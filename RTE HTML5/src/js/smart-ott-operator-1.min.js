var requirejs,require,define;!function(global){var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.6",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||!navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){var i;if(e)for(i=0;i<e.length&&(!e[i]||!t(e[i],i,e));i+=1);}function eachReverse(e,t){var i;if(e)for(i=e.length-1;-1<i&&(!e[i]||!t(e[i],i,e));i-=1);}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var i;for(i in e)if(hasProp(e,i)&&t(e[i],i))break}function mixin(i,e,n,r){return e&&eachProp(e,function(e,t){!n&&hasProp(i,t)||(r&&"string"!=typeof e?(i[t]||(i[t]={}),mixin(i[t],e,n,r)):i[t]=e)}),i}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,i,n){var r=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return r.requireType=e,r.requireModules=n,i&&(r.originalError=i),r}if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,i,n){var r,s,o=defContextName;return isArray(e)||"string"==typeof e||(s=e,isArray(t)?(e=t,t=i,i=n):e=[]),s&&s.context&&(o=s.context),(r=getOwn(contexts,o))||(r=contexts[o]=req.s.newContext(o)),s&&r.configure(s),r.require(e,t,i)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(t){req[t]=function(){var e=contexts[defContextName];return e.require[t].apply(e,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.load=function(t,i,n){var e,r=t&&t.config||{};if(isBrowser)return(e=r.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script")).type=r.scriptType||"text/javascript",e.charset="utf-8",e.async=!0,e.setAttribute("data-requirecontext",t.contextName),e.setAttribute("data-requiremodule",i),!e.attachEvent||e.attachEvent.toString&&e.attachEvent.toString().indexOf("[native code")<0||isOpera?(e.addEventListener("load",t.onScriptLoad,!1),e.addEventListener("error",t.onScriptError,!1)):(useInteractive=!0,e.attachEvent("onload",t.onScriptLoad)),e.src=n,currentlyAddingScript=e,baseElement?head.insertBefore(e,baseElement):head.appendChild(e),currentlyAddingScript=null,e;if(isWebWorker)try{importScripts(n),t.completeLoad(i)}catch(e){t.onError(makeError("importscripts","importScripts failed for "+i+" at "+n,e,[i]))}},isBrowser&&eachReverse(scripts(),function(e){if(head||(head=e.parentNode),dataMain=e.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||(mainScript=(src=mainScript.split("/")).pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,i,t){var n,r;"string"!=typeof e&&(t=i,i=e,e=null),isArray(i)||(t=i,i=null),!i&&isFunction(t)&&(i=[],t.length&&(t.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,t){i.push(t)}),i=(1===t.length?["require"]:["require","exports","module"]).concat(i))),useInteractive&&(n=currentlyAddingScript||getInteractiveScript())&&(e||(e=n.getAttribute("data-requiremodule")),r=contexts[n.getAttribute("data-requirecontext")]),(r?r.defQueue:globalDefQueue).push([e,i,t])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}function newContext(l){var u,e,g,c,d,m={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},h={},p={},n={},o=[],f={},r={},_=1,v=1;function C(e,t,i){var n,r,s,o,a,l,c,u,d,h,g,p=t&&t.split("/"),f=m.map,_=f&&f["*"];if(e&&"."===e.charAt(0)&&(t?(function(e){var t,i;for(t=0;e[t];t+=1)if("."===(i=e[t]))e.splice(t,1),t-=1;else if(".."===i){if(1===t&&(".."===e[2]||".."===e[0]))break;0<t&&(e.splice(t-1,2),t-=2)}}(e=(getOwn(m.pkgs,t)?p=[t]:p.slice(0,p.length-1)).concat(e.split("/"))),r=getOwn(m.pkgs,n=e[0]),e=e.join("/"),r&&e===n+"/"+r.main&&(e=n)):0===e.indexOf("./")&&(e=e.substring(2))),i&&f&&(p||_)){for(a=(o=e.split("/")).length;0<a;a-=1){if(c=o.slice(0,a).join("/"),p)for(l=p.length;0<l;l-=1)if((s=getOwn(f,p.slice(0,l).join("/")))&&(s=getOwn(s,c))){u=s,d=a;break}if(u)break;!h&&_&&getOwn(_,c)&&(h=getOwn(_,c),g=a)}!u&&h&&(u=h,d=g),u&&(o.splice(0,d,u),e=o.join("/"))}return e}function A(t){isBrowser&&each(scripts(),function(e){if(e.getAttribute("data-requiremodule")===t&&e.getAttribute("data-requirecontext")===g.contextName)return e.parentNode.removeChild(e),!0})}function E(e){var t=getOwn(m.paths,e);if(t&&isArray(t)&&1<t.length)return A(e),t.shift(),g.require.undef(e),g.require([e]),!0}function I(e){var t,i=e?e.indexOf("!"):-1;return-1<i&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function y(e,t,i,n){var r,s,o,a,l=null,c=t?t.name:null,u=e,d=!0,h="";return e||(d=!1,e="_@r"+(_+=1)),l=(a=I(e))[0],e=a[1],l&&(l=C(l,c,n),s=getOwn(f,l)),e&&(l?h=s&&s.normalize?s.normalize(e,function(e){return C(e,c,n)}):C(e,c,n):(l=(a=I(h=C(e,c,n)))[0],h=a[1],i=!0,r=g.nameToUrl(h))),{prefix:l,name:h,parentMap:t,unnormalized:!!(o=!l||s||i?"":"_unnormalized"+(v+=1)),url:r,originalName:u,isDefine:d,id:(l?l+"!"+h:h)+o}}function b(e){var t=e.id,i=getOwn(h,t);return i||(i=h[t]=new g.Module(e)),i}function S(e,t,i){var n=e.id,r=getOwn(h,n);!hasProp(f,n)||r&&!r.defineEmitComplete?(r=b(e)).error&&"error"===t?i(r.error):r.on(t,i):"defined"===t&&i(f[n])}function T(i,e){var t=i.requireModules,n=!1;e?e(i):(each(t,function(e){var t=getOwn(h,e);t&&(t.error=i,t.events.error&&(n=!0,t.emit("error",i)))}),n||req.onError(i))}function w(){globalDefQueue.length&&(apsp.apply(o,[o.length-1,0].concat(globalDefQueue)),globalDefQueue=[])}function P(e){delete h[e],delete p[e]}function D(){var t,i,e,n,r=1e3*m.waitSeconds,s=r&&g.startTime+r<(new Date).getTime(),o=[],a=[],l=!1,c=!0;if(!u){if(u=!0,eachProp(p,function(e){if(t=e.map,i=t.id,e.enabled&&(t.isDefine||a.push(e),!e.error))if(!e.inited&&s)E(i)?l=n=!0:(o.push(i),A(i));else if(!e.inited&&e.fetched&&t.isDefine&&(l=!0,!t.prefix))return c=!1}),s&&o.length)return(e=makeError("timeout","Load timeout for modules: "+o,null,o)).contextName=g.contextName,T(e);c&&each(a,function(e){!function r(s,o,a){var e=s.map.id;s.error?s.emit("error",s.error):(o[e]=!0,each(s.depMaps,function(e,t){var i=e.id,n=getOwn(h,i);!n||s.depMatched[t]||a[i]||(getOwn(o,i)?(s.defineDep(t,f[i]),s.check()):r(n,o,a))}),a[e]=!0)}(e,{},{})}),s&&!n||!l||!isBrowser&&!isWebWorker||d||(d=setTimeout(function(){d=0,D()},50)),u=!1}}function a(e){hasProp(f,e[0])||b(y(e[0],null,!0)).init(e[1],e[2])}function i(e,t,i,n){e.detachEvent&&!isOpera?n&&e.detachEvent(n,t):e.removeEventListener(i,t,!1)}function s(e){var t=e.currentTarget||e.srcElement;return i(t,g.onScriptLoad,"load","onreadystatechange"),i(t,g.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function k(){var e;for(w();o.length;){if(null===(e=o.shift())[0])return T(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));a(e)}}return c={require:function(e){return e.require?e.require:e.require=g.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?e.exports:e.exports=f[e.map.id]={}},module:function(t){return t.module?t.module:t.module={id:t.map.id,uri:t.map.url,config:function(){var e=getOwn(m.pkgs,t.map.id);return getOwn(m.config,e?t.map.id+"/"+e.main:t.map.id)||{}},exports:f[t.map.id]}}},(e=function(e){this.events=getOwn(n,e.id)||{},this.map=e,this.shim=getOwn(m.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0}).prototype={init:function(e,t,i,n){n=n||{},this.inited||(this.factory=t,i?this.on("error",i):this.events.error&&(i=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=i,this.inited=!0,this.ignore=n.ignore,n.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,g.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();g.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;r[e]||(r[e]=!0,g.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var t,e,i=this.map.id,n=this.depExports,r=this.exports,s=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(s)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{r=g.execCb(i,s,n,r)}catch(e){t=e}else r=g.execCb(i,s,n,r);if(this.map.isDefine&&((e=this.module)&&void 0!==e.exports&&e.exports!==this.exports?r=e.exports:void 0===r&&this.usingExports&&(r=this.exports)),t)return t.requireMap=this.map,t.requireModules=this.map.isDefine?[this.map.id]:null,t.requireType=this.map.isDefine?"define":"require",T(this.error=t)}else r=s;this.exports=r,this.map.isDefine&&!this.ignore&&(f[i]=r,req.onResourceLoad&&req.onResourceLoad(g,this.map,this.depMaps)),P(i),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var a=this.map,l=a.id,e=y(a.prefix);this.depMaps.push(e),S(e,"defined",bind(this,function(e){var s,t,i,n=this.map.name,r=this.map.parentMap?this.map.parentMap.name:null,o=g.makeRequire(a.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized)return e.normalize&&(n=e.normalize(n,function(e){return C(e,r,!0)})||""),S(t=y(a.prefix+"!"+n,this.map.parentMap),"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),void((i=getOwn(h,t.id))&&(this.depMaps.push(t),this.events.error&&i.on("error",bind(this,function(e){this.emit("error",e)})),i.enable()));(s=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})})).error=bind(this,function(e){this.inited=!0,(this.error=e).requireModules=[l],eachProp(h,function(e){0===e.map.id.indexOf(l+"_unnormalized")&&P(e.map.id)}),T(e)}),s.fromText=bind(this,function(e,t){var i=a.name,n=y(i),r=useInteractive;t&&(e=t),r&&(useInteractive=!1),b(n),hasProp(m.config,l)&&(m.config[i]=m.config[l]);try{req.exec(e)}catch(e){return T(makeError("fromtexteval","fromText eval for "+l+" failed: "+e,e,[l]))}r&&(useInteractive=!0),this.depMaps.push(n),g.completeLoad(i),o([i],s)}),e.load(a.name,o,s,m)})),g.enable(e,this),this.pluginMaps[e.id]=e},enable:function(){(p[this.map.id]=this).enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var i,n,r;if("string"==typeof e){if(e=y(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,r=getOwn(c,e.id))return void(this.depExports[t]=r(this));this.depCount+=1,S(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&S(e,"error",bind(this,this.errback))}i=e.id,n=h[i],hasProp(c,i)||!n||n.enabled||g.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(h,e.id);t&&!t.enabled&&g.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var i=this.events[e];i||(i=this.events[e]=[]),i.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},(g={config:m,contextName:l,registry:h,defined:f,urlFetched:r,defQueue:o,Module:e,makeModuleMap:y,nextTick:req.nextTick,onError:T,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var i=m.pkgs,n=m.shim,r={paths:!0,config:!0,map:!0};eachProp(e,function(e,t){r[t]?"map"===t?(m.map||(m.map={}),mixin(m[t],e,!0,!0)):mixin(m[t],e,!0):m[t]=e}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=g.makeShimExports(e)),n[t]=e}),m.shim=n),e.packages&&(each(e.packages,function(e){var t;t=(e="string"==typeof e?{name:e}:e).location,i[e.name]={name:e.name,location:t||e.name,main:(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}),m.pkgs=i),eachProp(h,function(e,t){e.inited||e.map.unnormalized||(e.map=y(t))}),(e.deps||e.callback)&&g.require(e.deps||[],e.callback)},makeShimExports:function(t){return function(){var e;return t.init&&(e=t.init.apply(global,arguments)),e||t.exports&&getGlobal(t.exports)}},makeRequire:function(s,o){function a(e,t,i){var n,r;return o.enableBuildCallback&&t&&isFunction(t)&&(t.__requireJsBuild=!0),"string"==typeof e?isFunction(t)?T(makeError("requireargs","Invalid require call"),i):s&&hasProp(c,e)?c[e](h[s.id]):req.get?req.get(g,e,s,a):(n=y(e,s,!1,!0).id,hasProp(f,n)?f[n]:T(makeError("notloaded",'Module name "'+n+'" has not been loaded yet for context: '+l+(s?"":". Use require([])")))):(k(),g.nextTick(function(){k(),(r=b(y(null,s))).skipMap=o.skipMap,r.init(e,t,i,{enabled:!0}),D()}),a)}return o=o||{},mixin(a,{isBrowser:isBrowser,toUrl:function(e){var t,i=e.lastIndexOf("."),n=e.split("/")[0];return-1!==i&&(!("."===n||".."===n)||1<i)&&(t=e.substring(i,e.length),e=e.substring(0,i)),g.nameToUrl(C(e,s&&s.id,!0),t,!0)},defined:function(e){return hasProp(f,y(e,s,!1,!0).id)},specified:function(e){return e=y(e,s,!1,!0).id,hasProp(f,e)||hasProp(h,e)}}),s||(a.undef=function(e){w();var t=y(e,s,!0),i=getOwn(h,e);delete f[e],delete r[t.url],delete n[e],i&&(i.events.defined&&(n[e]=i.events),P(e))}),a},enable:function(e){getOwn(h,e.id)&&b(e).enable()},completeLoad:function(e){var t,i,n,r=getOwn(m.shim,e)||{},s=r.exports;for(w();o.length;){if(null===(i=o.shift())[0]){if(i[0]=e,t)break;t=!0}else i[0]===e&&(t=!0);a(i)}if(n=getOwn(h,e),!t&&!hasProp(f,e)&&n&&!n.inited){if(!(!m.enforceDefine||s&&getGlobal(s)))return E(e)?void 0:T(makeError("nodefine","No define call for "+e,null,[e]));a([e,r.deps||[],r.exportsFn])}D()},nameToUrl:function(e,t,i){var n,r,s,o,a,l,c,u,d;if(req.jsExtRegExp.test(e))u=e+(t||"");else{for(n=m.paths,r=m.pkgs,l=(a=e.split("/")).length;0<l;l-=1){if(s=getOwn(r,c=a.slice(0,l).join("/")),d=getOwn(n,c)){isArray(d)&&(d=d[0]),a.splice(0,l,d);break}if(s){o=e===s.name?s.location+"/"+s.main:s.location,a.splice(0,l,o);break}}u=a.join("/"),u=("/"===(u+=t||(/\?/.test(u)||i?"":".js")).charAt(0)||u.match(/^[\w\+\.\-]+:/)?"":m.baseUrl)+u}return m.urlArgs?u+(-1===u.indexOf("?")?"?":"&")+m.urlArgs:u},load:function(e,t){req.load(g,e,t)},execCb:function(e,t,i,n){return t.apply(n,i)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=s(e);g.completeLoad(t.id)}},onScriptError:function(e){var t=s(e);if(!E(t.id))return T(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}}).require=g.makeRequire(),g}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState||eachReverse(scripts(),function(e){if("interactive"===e.readyState)return interactiveScript=e}),interactiveScript}}(this),require.def=define,define("antie/application",["antie/class","antie/runtimecontext","antie/widgets/componentcontainer","antie/widgets/button","antie/widgets/list","antie/devices/device"],function(e,l,r,t,n,c){"use strict";var i=e.extend({init:function(e,n,r,t,i){l.setCurrentApplication(this),this._rootElement=e,this._rootWidget=null,this._focussedWidget=null,this._onReadyHandler=t;var s=this,o=i||antie.framework.deviceConfiguration;function a(t){var e;(s._device=t).setApplication(s),t.addKeyEventListener();var i=s.getBestFitLayout();if(i.css=i.css||[],o.css)for(e=0;e<o.css.length;e++)o.css[e].width===i.width&&o.css[e].height===i.height&&(i.css=i.css.concat(o.css[e].files));require([i.module],function(e){s.setLayout(e,n,r,i.css,i.classes,[],function(){s.run(),s.route(t.getCurrentRoute())})})}this._device?a(this._device):c.load(o,{onSuccess:a,onError:function(e){console.error("Unable to load device",e)}})},run:function(){},ready:function(){if(this._onReadyHandler){var e=this;window.setTimeout(function(){e._onReadyHandler(e)},0)}},getBestFitLayout:function(){var e,t=this._device.getScreenSize(),i=this._device.getConfig().layouts;for(e in i.sort(function(e,t){var i=e.width*e.width+e.height*e.height,n=t.width*t.width+t.height*t.height;return i===n?0:i<n?1:-1}),i)if(t.height>=i[e].height&&t.width>=i[e].width)return i[e];return i[i.length-1]},setLayout:function(e,t,i,n,r,s,o){var a;this._layout=e;var l=this._device.getTopLevelElement(),c=e.classes||[];for(r&&(c=c.concat(r)),a=0;a!==c.length;a+=1)this._device.addClassToElement(l,c[a]);var u=e.preloadImages||[];for(s&&(u=u.concat(s)),a=0;a!==u.length;a+=1)this._device.preloadImage(i+u[a]);var d=e.css||[];if(n&&(d=d.concat(n)),o){var h=-1,g=this,p=function(){++h<d.length?g._device.loadStyleSheet(t+d[h],p):o()};p()}else for(a=0;a!==d.length;a+=1)this._device.loadStyleSheet(t+d[a])},getLayout:function(){return this._layout},setRootWidget:function(e){if(e.addClass("rootwidget"),e instanceof n&&e.setRenderMode(n.RENDER_MODE_CONTAINER),this._rootWidget=e,this._rootWidget._isFocussed=!0,!this._rootWidget.outputElement){var t=this.getDevice();t.appendChildElement(this._rootElement,e.render(t))}var i=this;i._onReadyHandler&&this._rootWidget.addEventListener("applicationready",function(e){i._onReadyHandler(e)})},getRootWidget:function(){return this._rootWidget},addComponentContainer:function(e,t,i){var n=new r(e);return this._rootWidget.appendChildWidget(n),t&&this.showComponent(e,t,i),n},showComponent:function(e,t,i){this._rootWidget.getChildWidget(e).show(t,i)},pushComponent:function(e,t,i){this._rootWidget.getChildWidget(e).pushComponent(t,i)},popComponent:function(e){this._rootWidget.getChildWidget(e).back()},hideComponent:function(e){this._rootWidget.getChildWidget(e).hide()},getComponent:function(e){return this._rootWidget.getChildWidget(e)},setActiveComponent:function(e){return this._rootWidget.setActiveChildWidget(this._rootWidget.getChildWidget(e))},getDevice:function(){return this._device},bubbleEvent:function(e){this._focussedWidget&&this._focussedWidget.bubbleEvent(e)},broadcastEvent:function(e){e.sentDown||(e.sentDown=1,this._rootWidget.broadcastEvent(e))},getFocussedWidget:function(){return this._focussedWidget},_setFocussedWidget:function(e){e instanceof t&&e.isFocussed()&&(this._focussedWidget=e)},addEventListener:function(e,t){this._rootWidget.addEventListener(e,t)},removeEventListener:function(e,t){this._rootWidget.removeEventListener(e,t)},getCurrentRoute:function(){return this._device.getCurrentRoute()},setCurrentRoute:function(e){this._referer=this._device.getCurrentRoute(),this._device.setCurrentRoute(e)},getReferer:function(){return this._referer||this._device.getReferrer()},route:function(){},launchAppFromURL:function(e,t,i,n){var r,s,o="",a="",l=n?{}:this.getCurrentAppURLParameters();if(t)for(r in t)t.hasOwnProperty(r)&&(l[r]=t[r]);for(r in l)l.hasOwnProperty(r)&&(void 0===l[r]||null===l[r]?o+=window.encodeURIComponent(r)+"&":o+=window.encodeURIComponent(r)+"="+window.encodeURIComponent(l[r])+"&");0<o.length&&(o="?"+o.slice(0,-1)),i&&0<i.length&&(a="#"+i.join("/")),s=this.getDevice().getHistorian().forward(e+o+a),this.getDevice().setWindowLocationUrl(s)},getCurrentAppURL:function(){var e=this.getDevice().getWindowLocation();return e.protocol+"//"+e.host+e.pathname},getCurrentAppURLParameters:function(){var e=this.getDevice().getWindowLocation();if(!e.search)return{};for(var t,i,n=e.search.replace(/^\?/,"").split("&"),r={},s=0;s<n.length;s++)i=(t=n[s].split("="))[1],t[1]&&(i=window.decodeURIComponent(i)),r[window.decodeURIComponent(t[0])]=i;return r},destroy:function(){l.clearCurrentApplication(),r.destroy()},back:function(){var e=this.getDevice().getHistorian();e.hasHistory()?this.getDevice().setWindowLocationUrl(e.back()):this.exit()},hasHistory:function(){return this.getDevice().getHistorian().hasHistory()},exit:function(){this.getDevice().getHistorian().hasBroadcastOrigin()?this.getDevice().exitToBroadcast():this.getDevice().exit()}});return i.getCurrentApplication=function(){return l.getCurrentApplication()},i}),define("antie/audiosource",["antie/mediasource"],function(e){"use strict";return e.extend({getMediaType:function(){return e.MEDIA_TYPE_AUDIO}})}),define("antie/callbackmanager",["antie/class"],function(e){"use strict";return e.extend({init:function(){this._callbacks=[]},addCallback:function(e,t){void 0===this._getIndexOf(e,t)&&this._callbacks.push([e,t])},removeCallback:function(e,t){var i=this._getIndexOf(e,t);void 0!==i&&this._callbacks.splice(i,1)},_getIndexOf:function(e,t){for(var i,n=0;n<this._callbacks.length;n++)if(this._callbacks[n][0]===e&&this._callbacks[n][1]===t){i=n;break}return i},removeAllCallbacks:function(){this._callbacks=[]},callAll:function(){for(var e=Array.prototype.slice.call(arguments),t=0;t<this._callbacks.length;t++){var i=this._callbacks[t][0];this._callbacks[t][1].apply(i,e)}}})}),define("antie/class",function(){"use strict";var s=!1,o=/var xyz/.test(function(){})?/\b_super\b/:/.*/;function a(){}return a.extend=function(e){var r=this.prototype;s=!0;var t=new this;for(var i in s=!1,e)t[i]="function"==typeof e[i]&&"function"==typeof r[i]&&o.test(e[i])?function(i,n){return function(){var e=this._super;this._super=r[i];var t=n.apply(this,arguments);return this._super=e,t}}(i,e[i]):e[i];var n=function(){!s&&this.init&&this.init.apply(this,arguments)};return((n.prototype=t).constructor=n).extend=a.extend,n},a}),define("antie/datasource",["antie/class"],function(e){"use strict";return e.extend({init:function(e,t,i,n){if(this._request=null,this._component=e,this._obj=t,this._func=i,this._args=n,e){var r=this,s=function(){e.removeEventListener("beforehide",s),r.abort()};e.addEventListener("beforehide",s)}},load:function(e){this._request=this._obj[this._func].apply(this._obj,[e].concat(this._args||[]))},abort:function(){this._request&&this._request.abort()}})}),define("antie/devices/anim/css3",["antie/devices/browserdevice","antie/devices/anim/css3/transition","antie/devices/anim/css3/optionstransitiondefinition","antie/devices/anim/shared/transitionendpoints"],function(e,s,o,a){"use strict";function l(e,t){return t.getConfig().animationDisabled||e.skipAnim}function c(e,t){if(t.getConfig().defaults)return t.getConfig().defaults[e]}e.prototype.scrollElementTo=function(e){var t,i;return this,new RegExp("_mask$").test(e.el.id)?0===e.el.childNodes.length?null:(e.el.style.position="relative",e.el=e.el.childNodes[0],e.el.style.position="relative",t=new a({to:{left:-e.to.left,top:-e.to.top},from:e.from,units:e.units,onComplete:e.onComplete,skipAnim:l(e,this)}),(i=new s(new o(e),t,e.el))._completed?null:i):null},e.prototype.moveElementTo=function(e){var t,i;return((i=new a({to:e.to,from:e.from,units:e.units,onComplete:e.onComplete,skipAnim:l(e,this)})).hasProperty("top")||i.hasProperty("left"))&&(t=new s(new o(e),i,e.el)),t._completed?null:t},e.prototype.showElement=function(e){var t,i,n,r;return r=c("showElementFade",this),n={to:{opacity:1,visibility:"visible"},from:{opacity:0,visibility:"hidden"},duration:e.duration,onComplete:e.onComplete,skipAnim:l(e,this)},(t=new o(n,r)).setPropertyDuration("visibility",0),i=new a(n),new s(t,i,e.el)},e.prototype.hideElement=function(e){var t,i,n,r;return r=c("hideElementFade",this),n={to:{opacity:0,visibility:"hidden"},from:{opacity:1,visibility:"visible"},duration:e.duration,onComplete:e.onComplete,skipAnim:l(e,this)},(t=new o(n,r)).setPropertyDelay("visibility",t.getPropertyDuration("opacity")),i=new a(n),new s(t,i,e.el)},e.prototype.tweenElementStyle=function(e){var t,i;return t=new o(e,{}),i=new a({to:e.to,from:e.from,units:e.units,onComplete:e.onComplete,skipAnim:l(e,this)}),new s(t,i,e.el)},e.prototype.isAnimationDisabled=function(){return!1},e.prototype.stopAnimation=function(e){e.stop(!0)}}),define("antie/devices/anim/css3/easinglookup",["antie/class"],function(e){"use strict";return e.extend({init:function(){},linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",easeInCubic:"cubic-bezier(.55,.055,.675,.19)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175,.885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)",easeFromTo:"cubic-bezier(.77,0,.175,1)"})}),define("antie/devices/anim/css3/existingtransitiondefinition",["antie/devices/anim/css3/transitiondefinition"],function(e){"use strict";return e.extend({init:function(e){var t,i,n,r,s;for(this._super(),t=e.getProperties(),i=e.getDurations(),n=e.getDelays(),r=e.getTimingFns(),s=0;s!==t.length;s+=1)this.setProperty(t[s],{duration:i[s],timingFn:r[s],delay:n[s]})}})}),define("antie/devices/anim/css3/optionstransitiondefinition",["antie/devices/anim/css3/transitiondefinition"],function(r){"use strict";return r.extend({init:function(e,t){var i,n;for(i in t=t||{},this._super(),e.to)e.to.hasOwnProperty(i)&&(n=e.easing||t.easing,this.setProperty(i,{duration:e.duration||t.duration,delay:e.delay,timingFn:n?r.easingLookup[n]:void 0}))}})}),define("antie/devices/anim/css3/skipanimtransitiondefinition",["antie/devices/anim/css3/transitiondefinition"],function(e){"use strict";return e.extend({init:function(e){this._super(),this._copyToSelf(e)},_copyToSelf:function(e){var t,i,n;for(t=e.getProperties(),n=0;n!==t.length;n+=1)i=t[n],this.setProperty(i,{duration:e.getPropertyDuration(i),delay:e.getPropertyDelay(i),timingFn:e.getPropertyTimingFn(i)})},getPropertyDuration:function(){return 0}})}),define("antie/devices/anim/css3/stringhelpers",["antie/class"],function(e){"use strict";return e.extend({stripWhiteSpace:function(e){return e.replace(/(^\s+|\s+$)/g,"")},csvAppend:function(e,t){return""===e?t:e+","+t},buildCsvString:function(e){var t,i;for(i="",t=0;t!==e.length;t+=1)i=this.csvAppend(i,e[t]);return i},splitStringOnNonParenthesisedCommas:function(e){var t,i,n,r,s;for(n=[],r="",i=t=0;i!==e.length;i+=1)"("===(s=e.charAt(i))&&(t+=1),")"===s&&(t-=1),0===t&&","===s?(""!==(r=this.stripWhiteSpace(r))&&n.push(r),r=""):r+=s;return""!==(r=this.stripWhiteSpace(r))&&n.push(r),n}})}),define("antie/devices/anim/css3/transition",["antie/class","antie/devices/anim/css3/transitionelement","antie/devices/anim/css3/existingtransitiondefinition","antie/devices/anim/css3/skipanimtransitiondefinition"],function(e,s,o,a){"use strict";return e.extend({init:function(e,t,i){var n,r;this._endPoints=t,this._completed=!1,this._transEl=new s(i),this._ownTransitions=e,this._endFn=this._genTransEndFn(),(r=this._isTransitionInstant())&&(this._ownTransitions=new a(this._ownTransitions)),(n=new o(this._transEl)).addIn(this._ownTransitions),this._setInitialValues(),this._forceUpdate(),this._transEl.applyDefinition(n),this._transEl.setCallback(this._endFn),this._forceUpdate(),this._doTransition(),r&&this.stop(!0)},stop:function(e){var t,i,n,r,s,o;if(!this._completed)if("boolean"!=typeof(o=e)&&(o=!0),o)this._endFn();else{for(n=this._ownTransitions.getProperties(),t=this._transEl.getComputedStyle(),i={},s=0;s!==n.length;s+=1)i[r=n[s]]=t[r]||0;for(this._endFn(),this._forceUpdate(),s=0;s!==n.length;s+=1)this._transEl.setStylePropertyValue(r,i[r])}},_setInitialValues:function(){var e,t,i,n;for(e=this._endPoints.getProperties(),i=0;i!==e.length;i+=1)n=e[i],void 0===(t=this._endPoints.getPropertyOrigin(n))&&(t=this._transEl.getStylePropertyValue(n)||this._endPoints.addUnitsToPropertyValue(n,0)),this._transEl.setStylePropertyValue(n,t)},_forceUpdate:function(){var e;0<(e=this._ownTransitions.getProperties()).length&&this._transEl.forceUpdate(e[0])},_genTransEndFn:function(){var n;return n=this,function e(t){var i;(!t||n._transEl.isEventTarget(t)&&n._ownTransitions.hasProperty(t.propertyName))&&(n._completed=!0,n._transEl.removeCallback(e),(i=new o(n._transEl)).takeOut(n._ownTransitions),n._transEl.applyDefinition(i),"function"==typeof n._endPoints.getOnCompleteCallback()&&n._endPoints.getOnCompleteCallback()())}},_doTransition:function(){var e,t,i,n;for(i=this._endPoints.getProperties(),n=0;n!==i.length;n+=1)e=i[n],t=this._endPoints.getPropertyDestination(e),this._transEl.setStylePropertyValue(e,t)},_isTransitionInstant:function(){var e=this._ownTransitions.areAllDurationsZero();return e=(e=e||this._endPoints.shouldSkip())||this._isThereNoChange()},_isThereNoChange:function(){var e,t,i,n,r,s,o;for(n=!1,e=(r=this)._endPoints.getProperties(),i=0;i!==e.length;i+=1)t=e[i],n=n||(s=t,o=void 0,o=r._transEl.getStylePropertyValue(s),r._endPoints.getPropertyDestination(s)!==o);return!n}})}),define("antie/devices/anim/css3/transitiondefinition",["antie/class","antie/devices/anim/css3/easinglookup"],function(e,t){"use strict";var i;return(i=e.extend({init:function(){this.properties={}},setProperty:function(e,t){this.properties[e]=t?{duration:void 0!==t.duration?t.duration:i.defaults.duration,delay:void 0!==t.delay?t.delay:i.defaults.delay,timingFn:void 0!==t.timingFn?t.timingFn:i.defaults.timingFn}:{duration:i.defaults.duration,delay:i.defaults.delay,timingFn:i.defaults.timingFn}},hasProperty:function(e){return this.properties.hasOwnProperty(e)},getProperties:function(){var e,t;for(e in t=[],this.properties)this.hasProperty(e)&&t.push(e);return t},removeProperty:function(e){return!!this.hasProperty(e)&&(delete this.properties[e],!0)},getPropertyDuration:function(e){return this._getPropertyAttribute(e,"duration")},getPropertyDelay:function(e){return this._getPropertyAttribute(e,"delay")},getPropertyTimingFn:function(e){return this._getPropertyAttribute(e,"timingFn")},setPropertyDuration:function(e,t){this.hasProperty(e)?this.properties[e].duration=t:this.setProperty(e,{duration:t})},setPropertyDelay:function(e,t){this.hasProperty(e)?this.properties[e].delay=t:this.setProperty(e,{delay:t})},setPropertyTimingFn:function(e,t){this.hasProperty(e)?this.properties[e].timingFn=t:this.setProperty(e,{timingFn:t})},addIn:function(e){var t,i,n;for(i=e.getProperties(),n=0;n!==i.length;n+=1)t=i[n],this.setProperty(t,{duration:e.getPropertyDuration(t),delay:e.getPropertyDelay(t),timingFn:e.getPropertyTimingFn(t)})},takeOut:function(e){var t,i;for(t=e.getProperties(),i=0;i!==t.length;i+=1)this.hasProperty(t[i])&&this.removeProperty(t[i])},areAllDurationsZero:function(){var e,t,i,n;for(n=!0,t=this.getProperties(),i=0;i!==t.length;i+=1)e=t[i],this.hasProperty(e)&&(n=n&&0===this.getPropertyDuration(e));return n},_getPropertyAttribute:function(e,t){if(this.hasProperty(e))return this.properties[e][t]}})).easingLookup=new t,i.defaults={duration:840,delay:0,timingFn:i.easingLookup.easeInOut},i}),define("antie/devices/anim/css3/transitionelement",["antie/class","antie/devices/anim/css3/stringhelpers"],function(e,t){"use strict";return e.extend({init:function(e){this._element=e,this._strHelper=new t,this._prefixes=["","-webkit-","-moz-","-o-"],this._transitionEndEvents=["webkitTransitionEnd","oTransitionEnd","otransitionend","transitionend"]},getProperties:function(){return this._getCssCsvPropValueAsArray("transition-property")},getDurations:function(){var e,t,i;for(t=[],e=this._getCssCsvPropValueAsArray("transition-duration"),i=0;i!==e.length;i+=1)t.push(parseInt(e[i],10));return t},getDelays:function(){var e,t,i;for(t=[],e=this._getCssCsvPropValueAsArray("transition-delay"),i=0;i!==e.length;i+=1)t.push(parseInt(e[i],10));return t},getTimingFns:function(){return this._getCssCsvPropValueAsArray("transition-timing-function")},setCallback:function(e){var t,i,n;for(t=this._transitionEndEvents,n=0;n!==t.length;n+=1)i=t[n],this._element.addEventListener(i,e)},removeCallback:function(e){var t,i,n;for(t=this._transitionEndEvents,n=0;n!==t.length;n+=1)i=t[n],this._element.removeEventListener(i,e)},applyDefinition:function(e){var t,i,n,r,s,o,a;for(n=[],s=[],o=[],r=[],t=e.getProperties(),a=0;a!==t.length;a+=1)i=t[a],s.push(i),n.push(e.getPropertyDelay(i)),o.push(e.getPropertyTimingFn(i)),r.push(e.getPropertyDuration(i));this._setDurations(r),this._setDelays(n),this._setTimingFns(o),this._setProperties(s)},forceUpdate:function(e){var t=this.getComputedStyle();return t?t[e]:null},getStylePropertyValue:function(e){return this._element.style.getPropertyValue(e)},setStylePropertyValue:function(e,t){this._element.style.setProperty(e,t,"")},setStylePropertyValueWithPrefixes:function(e,t){for(var i,n=0;n<this._prefixes.length;n+=1)i=this._prefixes[n],this._element.style.setProperty(i+e,t,"")},getComputedStyle:function(){return window.getComputedStyle(this._element,null)},_getCssCsvPropValueAsArray:function(e){var t;return null!=(t=this._element.style.getPropertyValue(e))&&(t=String(t)),"string"==typeof t?this._strHelper.splitStringOnNonParenthesisedCommas(t):[]},_setProperties:function(e){var t;t=this._strHelper.buildCsvString(e),this.setStylePropertyValueWithPrefixes("transition-property",t)},_setDurations:function(e){var t,i;for(i=0;i!==e.length;i+=1)e[i]+="ms";t=this._strHelper.buildCsvString(e),this.setStylePropertyValueWithPrefixes("transition-duration",t)},_setDelays:function(e){var t,i;for(i=0;i!==e.length;i+=1)e[i]+="ms";t=this._strHelper.buildCsvString(e),this.setStylePropertyValueWithPrefixes("transition-delay",t)},_setTimingFns:function(e){var t;t=this._strHelper.buildCsvString(e),this.setStylePropertyValueWithPrefixes("transition-timing-function",t)},isEventTarget:function(e){return e.target===this._element}})}),define("antie/devices/anim/noanim",["antie/devices/browserdevice","antie/devices/anim/shared/transitionendpoints"],function(e,o){"use strict";e.prototype.scrollElementTo=function(e){if(!new RegExp("_mask$").test(e.el.id))return null;if(0===e.el.childNodes.length)return null;e.el.style.position="relative",e.el=e.el.childNodes[0],e.el.style.position="relative";var t=Math.abs(e.el.style.left.replace(/px/,""))||0,i=void 0!==e.to.left?e.to.left-t:0,n=Math.abs(e.el.style.top.replace(/px/,""))||0,r=void 0!==e.to.top?e.to.top-n:0;return 0===i&&0===r||(void 0!==e.to.left&&(e.el.style.left=0-e.to.left+"px"),void 0!==e.to.top&&(e.el.style.top=0-e.to.top+"px")),e.onComplete&&e.onComplete(),null},e.prototype.moveElementTo=function(e){var t=parseInt(e.el.style.left.replace(/px|em|pt/,""))||0,i=void 0!==e.to.left?e.to.left-t:0,n=parseInt(e.el.style.top.replace(/px|em|pt/,""))||0,r=void 0!==e.to.top?e.to.top-n:0;if(0===i&&0===r)return e.onComplete&&e.onComplete(),null;void 0!==e.to.left&&(e.el.style.left=e.to.left+"px"),void 0!==e.to.top&&(e.el.style.top=e.to.top+"px"),e.onComplete&&e.onComplete()},e.prototype.hideElement=function(e){e.el.style.visibility="hidden",e.el.style.opacity=0,"function"==typeof e.onComplete&&e.onComplete()},e.prototype.showElement=function(e){e.el.style.visibility="visible",e.el.style.opacity=1,"function"==typeof e.onComplete&&e.onComplete()},e.prototype.tweenElementStyle=function(e){var t,i,n,r,s;for(s=e.el.style,r=(t=new o({to:e.to,from:e.from,units:e.units})).getProperties(),i=0;i!==r.length;i+=1)s[n=r[i]]=t.getPropertyDestination(n);"function"==typeof e.onComplete&&e.onComplete()},e.prototype.stopAnimation=function(){},e.prototype.isAnimationDisabled=function(){return!0}}),define("antie/devices/anim/shared/transitionendpoints",["antie/class"],function(e){"use strict";var n;return(n=e.extend({init:function(e){this._to={},this._from={},this._onComplete=function(){},e&&this.setFromOptions(e)},setFromOptions:function(e){var t;for(t in this.units=e.units||{},this._skipAnim=e.skipAnim,e.to)e.to.hasOwnProperty(t)&&(this._to[t]=this.addUnitsToPropertyValue(t,e.to[t]),this._addValuesToFrom(t,e));this._onComplete=e.onComplete||this._onComplete,this.onStart=e.onStart||this.onStart},addUnitsToPropertyValue:function(e,t,i){return void 0!==(i=i||this.units[e]||n.defaultUnits[e])?t+i:t},hasProperty:function(e){return this._to.hasOwnProperty(e)},getProperties:function(){var e,t;for(e in t=[],this._to)this._to.hasOwnProperty(e)&&t.push(e);return t},getPropertyDestination:function(e){if(this._to.hasOwnProperty(e))return this._to[e]},getPropertyOrigin:function(e){if(this._from.hasOwnProperty(e))return this._from[e]},getOnCompleteCallback:function(){return this._onComplete},shouldSkip:function(){return!!this._skipAnim||this.toAndFromAllEqual()},toAndFromAllEqual:function(){var e,t;for(e in t=!0,this._to)t=!!(this._to.hasOwnProperty(e)&&this._from&&this._from.hasOwnProperty(e))&&(t&&this._to[e]===this._from[e]);return t},completeOriginsUsingElement:function(e){var t,i,n;for(n in(i=this)._to)this._to.hasOwnProperty(n)&&null!=(t=e.style.getPropertyValue(n))&&void 0===i._from[n]&&(this._from[n]=t)},_addValuesToFrom:function(e,t){t.from&&t.from.hasOwnProperty(e)&&(this._from[e]=this.addUnitsToPropertyValue(e,t.from[e]))}})).defaultUnits={top:"px",left:"px",bottom:"px",right:"px",width:"px",height:"px"},n}),define("antie/devices/anim/styletopleft",["antie/devices/browserdevice","antie/devices/anim/shared/transitionendpoints","antie/devices/anim/tween"],function(e,t){"use strict";function a(e,t,i,n,r){var s,o;return 0===i&&0===n?(r.onComplete&&r.onComplete(),null):this.getConfig().animationDisabled||r.skipAnim?(void 0!==r.to.left&&(r.el.style.left=r.to.left+"px"),void 0!==r.to.top&&(r.el.style.top=r.to.top+"px"),r.onComplete&&r.onComplete(),null):(o={},void 0!==t&&(o.top=t+"px"),void 0!==e&&(o.left=e+"px"),s={},void 0!==r.to.top&&(s.top=r.to.top+"px"),void 0!==r.to.left&&(s.left=r.to.left+"px"),this._tween({el:r.el,style:r.el.style,from:o,to:s,offset:r.offset||0,easing:r.easing,fps:r.fps,duration:r.duration,onComplete:r.onComplete}))}e.prototype.scrollElementTo=function(e){var t,i,n,r,s;function o(e){function t(){}return t.prototype=e,new t}return s=o(e),e.to&&(s.to=o(e.to)),new RegExp("_mask$").test(e.el.id)?0===e.el.childNodes.length?null:(e.el.style.position="relative",s.el=e.el.childNodes[0],s.el.style.position="relative",e.to&&e.to.left&&(s.to.left=-e.to.left),e.to&&e.to.top&&(s.to.top=-e.to.top),t=s.el.style.left.replace(/px/,"")||0,i=void 0!==e.to.left?e.to.left-Math.abs(t):0,n=s.el.style.top.replace(/px/,"")||0,r=void 0!==e.to.top?e.to.top-Math.abs(n):0,a.apply(this,[t,n,i,r,s])):null},e.prototype.moveElementTo=function(e){var t,i,n,r;return t=parseInt(e.el.style.left.replace(/px|em|pt/,""),10)||0,i=void 0!==e.to.left?e.to.left-t:0,n=parseInt(e.el.style.top.replace(/px|em|pt/,""),10)||0,r=void 0!==e.to.top?e.to.top-n:0,a.apply(this,[t,n,i,r,e])},e.prototype.hideElement=function(e){var t;return this.getConfig().animationDisabled||e.skipAnim?(e.el.style.visibility="hidden",e.el.style.opacity=0,"function"==typeof e.onComplete&&e.onComplete(),null):(t=this.getConfig().defaults&&this.getConfig().defaults.hideElementFade||{},this._tween({el:e.el,style:e.el.style,from:{opacity:isNaN(parseInt(e.el.style.opacity,10))?1:parseFloat(e.el.style.opacity)},to:{opacity:0},fps:e.fps||t.fps||25,duration:e.duration||t.duration||840,easing:e.easing||t.easing||"linear",onComplete:function(){e.el.style.visibility="hidden",e.onComplete&&e.onComplete()}}))},e.prototype.showElement=function(e){var t;return this.getConfig().animationDisabled||e.skipAnim?(e.el.style.visibility="visible",e.el.style.opacity=1,void("function"==typeof e.onComplete&&e.onComplete())):(t=this.getConfig().defaults&&this.getConfig().defaults.showElementFade||{},this._tween({el:e.el,style:e.el.style,from:{opacity:isNaN(parseInt(e.el.style.opacity,10))?0:parseFloat(e.el.style.opacity)},to:{opacity:1},fps:e.fps||t.fps||25,duration:e.duration||t.duration||840,easing:e.easing||t.easing||"linear",onComplete:e.onComplete,onStart:function(){e.el.style.visibility="visible"}}))},e.prototype.tweenElementStyle=function(r){var s;function e(){r.onComplete&&r.onComplete()}return(s=new t(r)).completeOriginsUsingElement(r.el),s.toAndFromAllEqual()?(e(),null):r.skipAnim||this.getConfig().animationDisabled?(function(){var e,t,i;for(t=s.getProperties(),e=0;e!==t.length;e+=1)i=t[e],r.el.style[i]=s.getPropertyDestination(i)}(),void e()):this._tween(function(){var e,t,i,n;for(t=s.getProperties(),n={el:r.el,style:r.el.style,fps:r.el.fps,duration:r.duration,easing:r.easing,onComplete:r.onComplete,to:{},from:{}},e=0;e!==t.length;e+=1)i=t[e],n.to[i]=s.getPropertyDestination(i),n.from[i]=s.getPropertyOrigin(i);return n}())},e.prototype.stopAnimation=function(e){e.stop(!0)},e.prototype.isAnimationDisabled=function(){return!1}}),define("antie/devices/anim/tween",["antie/devices/browserdevice","antie/lib/shifty"],function(e,r){"use strict";var s={};function o(e,t){var i="fps"+e.fps,n=1e3/e.fps,r=s[i];r||(r=[],s[i]=r),r.isProcessing?r.push({options:e,values:t}):(r.isProcessing=!0,setTimeout(function(){var e,t;t=n,(e=r).intervalId=setInterval(function(){!function(e){if(0===e.length)clearInterval(e.intervalId),e.isProcessing=!1,e.intervalId=null;else try{for(var t=0;t<e.length;t++){var i=e[t];a(i.options,i.values)}}finally{e.length=0}}(e)},t)},n/2),a(e,t))}function a(e,t){for(var i in e.to)null!==t[i]&&void 0!==t[i]&&(/scroll/.test(i)?e.el[i]=t[i]:e.el.style[i]=t[i])}e.prototype._tween=function(e){var t=new r(e),i=this,n={el:e.el,initialState:e.from||{},from:e.from||{},to:e.to||{},duration:e.duration||840,easing:e.easing||"easeFromTo",fps:e.fps||25,start:function(){e.className&&(i.removeClassFromElement(e.el,"not"+e.className),i.addClassToElement(e.el,e.className)),i.removeClassFromElement(i.getTopLevelElement(),"notanimating"),i.addClassToElement(i.getTopLevelElement(),"animating"),e.onStart&&e.onStart()},step:function(){o(n,this)},callback:function(){e.className&&(i.removeClassFromElement(e.el,e.className),i.addClassToElement(e.el,"not"+e.className)),i.removeClassFromElement(i.getTopLevelElement(),"animating"),i.addClassToElement(i.getTopLevelElement(),"notanimating"),function(e){var t,i,n;if(t=s["fps"+e.fps])for(i=0;i<t.length;i++)(n=t[i]).options===e&&(a(n.options,n.values),t.splice(i,1),i--)}(n),this&&a(n,this),"function"==typeof e.onComplete&&e.onComplete()}};return t.tween(n),t}}),define("antie/devices/broadcastsource/basetvsource",["antie/class"],function(e){"use strict";var t=e.extend({init:function(){throw new Error("Abstract class constructor should not be called directly")},showCurrentChannel:function(){throw new Error("Device broadcast source does not override abstract method showCurrentChannel")},stopCurrentChannel:function(){throw new Error("Device broadcast source does not override abstract method stopCurrentChannel")},getCurrentChannelName:function(){throw new Error("Device broadcast source does not override abstract method getCurrentChannelName")},getChannelNameList:function(){throw new Error("Device broadcast source does not override abstract method getChannelList")},setPosition:function(){throw new Error("Device broadcast source does not override abstract method setPosition")},getState:function(){throw new Error("Device broadcast source does not override abstract method getState")},setChannelByName:function(){throw new Error("Device broadcast source does not override abstract method setChannelByName")},destroy:function(){throw new Error("Device broadcast source does not override abstract method destroy")}});return t.STATE={UNKNOWN:"UNKNOWN",UNAVAILABLE:"UNAVAILABLE",CONNECTING:"CONNECTING",PRESENTING:"PRESENTING",STOPPED:"STOPPED"},t}),define("antie/devices/broadcastsource/hbbtvsource",["antie/devices/browserdevice","antie/devices/broadcastsource/basetvsource","antie/runtimecontext","antie/events/tunerunavailableevent","antie/events/tunerpresentingevent","antie/events/tunerstoppedevent"],function(e,i,n,r,s,o){"use strict";var t=i.extend({init:function(){var i=this;if(this._broadcastVideoObject=document.getElementById("broadcastVideoObject"),!this._broadcastVideoObject)throw new Error("Unable to initialise HbbTV broadcast source");this._playStates={UNREALIZED:0,CONNECTING:1,PRESENTING:2,STOPPED:3},this.playState=this._playStates.UNREALIZED,this._broadcastVideoObject.addEventListener("PlayStateChange",function(){var e=i.playState,t=i._broadcastVideoObject.playState;e===i._playStates.PRESENTING&&t===i._playStates.UNREALIZED?n.getCurrentApplication().broadcastEvent(new r):t===i._playStates.PRESENTING?n.getCurrentApplication().broadcastEvent(new s(i.getCurrentChannelName())):t===i._playStates.STOPPED&&n.getCurrentApplication().broadcastEvent(new o),i.playState=t})},showCurrentChannel:function(){this._broadcastVideoObject.bindToCurrentChannel(),this._setBroadcastVisible()},_setBroadcastVisible:function(){this._setBroadcastToFullScreen(),this._broadcastVideoObject.style.visibility="visible"},stopCurrentChannel:function(){try{this._broadcastVideoObject.playState===this._playStates.UNREALIZED&&this._broadcastVideoObject.bindToCurrentChannel()}catch(e){throw new Error("Unable to bind to current channel")}this._broadcastVideoObject.stop(),this._broadcastVideoObject.style.visibility="hidden",this.setPosition(0,0,0,0)},getCurrentChannelName:function(){var e=this._broadcastVideoObject.currentChannel;if(null===e)throw new Error("Current channel name not available");if(null===e.name)throw new Error("Current channel name is null");if(void 0===e.name)throw new Error("Current channel name is not defined");return e.name},getChannelNameList:function(t){try{for(var e=this._getChannelList(),i=[],n=0;n<e.length;n++){var r=this._getChannelFromChannelList(e,n);i.push(r.name)}t.onSuccess(i)}catch(e){t.onError(e)}},setChannelByName:function(t){try{var e=this.getCurrentChannelName();t.channelName===e?(this.showCurrentChannel(),t.onSuccess()):this._setChannelByName(t)}catch(e){t.onError({name:"ChannelError",message:"Unable to determine current channel name"})}},_setChannelByName:function(t){try{for(var e,i=this._getChannelList(),n=0;n<i.length;n++){var r=this._getChannelFromChannelList(i,n);if(r.name===t.channelName){e=r;break}}if(!e)throw{name:"ChannelError",message:t.channelName+" not found in channel list"};this._tuneToChannelObject(e,t.onSuccess,t.onError)}catch(e){t.onError(e)}},setPosition:function(e,t,i,n){this._broadcastVideoObject.style.top=e+"px",this._broadcastVideoObject.style.left=t+"px",this._broadcastVideoObject.style.width=i+"px",this._broadcastVideoObject.style.height=n+"px"},getState:function(){var e=i.STATE.UNKNOWN,t=this._broadcastVideoObject.playState;return t===this._playStates.UNREALIZED?e=i.STATE.UNAVAILABLE:t===this._playStates.CONNECTING?e=i.STATE.CONNECTING:t===this._playStates.PRESENTING&&(e=i.STATE.PRESENTING),e},destroy:function(){},_tuneToChannelObject:function(e,t,i){var n=this,r=function(){n._broadcastVideoObject.removeEventListener("ChannelChangeSucceeded",r),n._broadcastVideoObject.removeEventListener("ChannelChangeError",s),n._setBroadcastVisible(),t()},s=function(){n._broadcastVideoObject.removeEventListener("ChannelChangeSucceeded",r),n._broadcastVideoObject.removeEventListener("ChannelChangeError",s),i({name:"ChangeChannelError",message:"Error tuning channel"})};this._broadcastVideoObject.addEventListener("ChannelChangeSucceeded",r),this._broadcastVideoObject.addEventListener("ChannelChangeError",s),this._broadcastVideoObject.setChannel(e)},_getChannelIdType:function(){var t;try{void 0===(t=this._broadcastVideoObject.currentChannel.idType)&&(t=12)}catch(e){t=12}return t},_setBroadcastToFullScreen:function(){var e=n.getCurrentApplication().getLayout().requiredScreenSize;this.setPosition(0,0,e.width,e.height)},_getChannelFromChannelList:function(e,t){return"function"==typeof e.item?e.item(t):e[t]},_getChannelList:function(){var e;try{e=this._broadcastVideoObject.getChannelConfig()}catch(e){throw{name:"ChannelListError",message:"Channel list is not available"}}if(!e||!e.channelList||0===e.channelList.length)throw{name:"ChannelListError",message:"Channel list is empty or not available"};return e.channelList}});return e.prototype.isBroadcastSourceSupported=function(){return this.getHistorian().hasBroadcastOrigin()},e.prototype.createBroadcastSource=function(){return this._broadcastSource||(this._broadcastSource=new t),this._broadcastSource},t}),define("antie/devices/broadcastsource/samsungtvsource",["antie/devices/browserdevice","antie/devices/broadcastsource/basetvsource","antie/runtimecontext","antie/events/tunerunavailableevent","antie/events/tunerstoppedevent","antie/events/tunerpresentingevent"],function(e,s,o,a,l,c){"use strict";var t=s.extend({init:function(){if(this._samsungSefWindowPlugin=document.getElementById("pluginObjectWindow"),!this._samsungSefWindowPlugin)throw new Error("Unable to initialise Samsung broadcast source");var e=document.getElementById("pluginObjectTV"),r=this;this.playState=s.STATE.UNKNOWN,e.OnEvent=function(e){switch(parseInt(e)){case 101:r.playState=s.STATE.UNAVAILABLE;var t=new a;o.getCurrentApplication().broadcastEvent(t);break;case 114:r.playState=s.STATE.STOPPED;var i=new l;o.getCurrentApplication().broadcastEvent(i);break;case 103:r.playState=s.STATE.PRESENTING;var n=new c(r.getCurrentChannelName());o.getCurrentApplication().broadcastEvent(n)}},e.SetEvent(103),e.SetEvent(101),e.SetEvent(114),this._setBroadcastToFullScreen()},getState:function(){return this.playState},showCurrentChannel:function(){this._samsungSefWindowPlugin.SetSource(0)},stopCurrentChannel:function(){this._samsungSefWindowPlugin.SetSource(43)},getCurrentChannelName:function(){var e=this._samsungSefWindowPlugin.GetCurrentChannel_Name();if(e<0)throw new Error("Channel name returned error code: "+e);return e},getChannelNameList:function(n){this._getChannelList({onSuccess:function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].channelName);n.onSuccess(t)},onError:n.onError})},_getChannelList:function(t){try{window.webapis.tv.channel.getChannelList(t.onSuccess,function(){t.onError({name:"ChannelListError",message:"Channel list is not available"})},window.webapis.tv.channel.NAVIGATOR_MODE_ALL,0,1e6)}catch(e){t.onError({name:"ChannelListError",message:"Channel list is empty or not available"})}},setPosition:function(e,t,i,n){this._samsungSefWindowPlugin.SetScreenRect(t,e,i,n)},destroy:function(){this.setPosition(0,-1,0,0)},setChannelByName:function(t){try{this.getCurrentChannelName()===t.channelName?(this.showCurrentChannel(),t.onSuccess()):this._tuneToChannelByName({name:t.channelName,onError:t.onError,onSuccess:t.onSuccess})}catch(e){t.onError({name:"ChannelError",message:"Unable to determine current channel name"})}},_setBroadcastToFullScreen:function(){var e=o.getCurrentApplication().getLayout().requiredScreenSize;this.setPosition(0,0,e.width,e.height)},_tuneToChannelByName:function(n){var r=this;this._getChannelList({onError:n.onError,onSuccess:function(e){for(var t,i=0;i<e.length;i++)if(e[i].channelName===n.name){t=e[i];break}t?r._tuneToChannel({channel:t,onError:n.onError,onSuccess:n.onSuccess}):n.onError({name:"ChannelError",message:"Channel could not be found"})}})},_tuneToChannel:function(t){var e=t.channel;try{window.webapis.tv.channel.tune(e,t.onSuccess,function(){t.onError({name:"ChangeChannelError",message:"Error tuning channel"})},0)}catch(e){t.onError({name:"ChangeChannelError",message:"Error tuning channel"})}}});return e.prototype.isBroadcastSourceSupported=function(){return!0},e.prototype.createBroadcastSource=function(){return this._broadcastSource||(this._broadcastSource=new t),this._broadcastSource},t}),define("antie/devices/broadcastsource/stubbedsource",["antie/devices/browserdevice","antie/devices/broadcastsource/basetvsource"],function(e,t){"use strict";var i=t.extend({init:function(){},showCurrentChannel:function(){},stopCurrentChannel:function(){},getCurrentChannelName:function(){return"BBC ONE N West"},getChannelNameList:function(){return[{name:"Catal Test"},{name:"BBC ONE N West"},{name:"BBC TWO"},{name:"INVALID"}]},setChannelByName:function(){},setPosition:function(){},getState:function(){return t.STATE.PRESENTING},destroy:function(){}});return e.prototype.isBroadcastSourceSupported=function(){return!0},e.prototype.createBroadcastSource=function(){return this._broadcastSource||(this._broadcastSource=new i),this._broadcastSource},i}),define("antie/devices/broadcastsource/tizentvsource",["antie/devices/browserdevice","antie/devices/broadcastsource/basetvsource","antie/runtimecontext","antie/events/tunerunavailableevent","antie/events/tunerstoppedevent","antie/events/tunerpresentingevent"],function(e,s,t,i,n,r){"use strict";var o=s.extend({init:function(){if("undefined"==typeof tizen||void 0===tizen.tvchannel||void 0===tizen.tvwindow)throw new Error("Unable to initialize Tizen broadcast object, not found");var t=this;this.signalStateChangeListenerId=-1,this.nop=function(){},this.signalStateChangeListenerId=tizen.tvchannel.addSignalStateChangeListener(function(e){switch(e){case"SIGNAL_STATE_OK":t.setState(s.STATE.PRESENTING);break;case"SIGNAL_STATE_NO_SIGNAL":t.setState(s.STATE.UNAVAILABLE)}}),this.playState=s.STATE.UNKNOWN},getState:function(){return this.playState},setState:function(e){if(e!==this.getState()||e===s.STATE.PRESENTING)switch(e){case s.STATE.UNAVAILABLE:this.playState=e,t.getCurrentApplication().broadcastEvent(new i);break;case s.STATE.PRESENTING:this.playState=e,t.getCurrentApplication().broadcastEvent(new r(this.getCurrentChannelName()));break;case s.STATE.STOPPED:this.playState=e,t.getCurrentApplication().broadcastEvent(new n)}},showCurrentChannel:function(){this._setBroadcastToFullScreen()},stopCurrentChannel:function(){var e=this;tizen.tvwindow.hide(function(){e.setState(s.STATE.STOPPED)})},getCurrentChannelName:function(){return tizen.tvchannel.getCurrentChannel().channelName},getChannelNameList:function(r){r.onSuccess=r.onSuccess||this.nop,r.onError=r.onError||this.nop,this._getChannelList({onSuccess:function(e){for(var t=[],i=0,n=e.length;i<n;i++)t.push(e[i].channelName);r.onSuccess(t)},onError:r.onError})},_getChannelList:function(t){t.onSuccess=t.onSuccess||this.nop,t.onError=t.onError||this.nop;try{tizen.tvchannel.getChannelList(t.onSuccess,function(){t.onError({name:"ChannelListError",message:"Channel list is not available"})},"ALL")}catch(e){t.onError({name:"ChannelListError",message:"Channel list is empty or not available"})}},setPosition:function(e,t,i,n){var r=this;tizen.tvwindow.show(function(){r.setState(s.STATE.PRESENTING)},this.nop,[t,e,i,n],"MAIN","BEHIND")},destroy:function(){-1!==this.signalStateChangeListenerId&&tizen.tvchannel.removeSignalStateChangeListener(this.signalStateChangeListenerId),tizen.tvwindow.hide(this.nop)},setChannelByName:function(t){t.onSuccess=t.onSuccess||this.nop,t.onError=t.onError||this.nop;try{this.getCurrentChannelName()===t.channelName?(this.showCurrentChannel(),t.onSuccess()):this._tuneToChannelByName({name:t.channelName,onError:t.onError,onSuccess:t.onSuccess})}catch(e){t.onError({name:"ChannelError",message:"Unable to determine current channel name"})}},_setBroadcastToFullScreen:function(){this.setPosition(0,0,window.screen.width,window.screen.height)},_tuneToChannelByName:function(r){r.onSuccess=r.onSuccess||this.nop,r.onError=r.onError||this.nop;var s=this;this._getChannelList({onError:r.onError,onSuccess:function(e){for(var t,i=0,n=e.length;i<n;i++)if(e[i].channelName===r.name){t=e[i];break}t?s._tuneToChannel({channel:t,onError:r.onError,onSuccess:r.onSuccess}):r.onError({name:"ChannelError",message:"Channel could not be found"})}})},_tuneToChannel:function(t){t.onError=t.onError||this.nop,t.onSuccess=t.onSuccess||this.nop;var e=t.channel,i=this;try{tizen.tvchannel.tune(e,{onsuccess:function(){i._setBroadcastToFullScreen(),i.setState(s.STATE.PRESENTING),t.onSuccess()},onnosignal:function(){i.setState(s.STATE.UNAVAILABLE)},onprograminforeceived:function(){}},function(){t.onError({name:"ChangeChannelError",message:"Error tuning channel"})})}catch(e){t.onError({name:"ChangeChannelError",message:"Error tuning channel "+e.message})}}});return e.prototype.isBroadcastSourceSupported=function(){return!0},e.prototype.createBroadcastSource=function(){return this._broadcastSource||(this._broadcastSource=new o),this._broadcastSource},o}),define("antie/devices/browserdevice",["antie/devices/device","antie/events/keyevent","antie/historian","antie/devices/sanitiser"],function(e,s,t,i){"use strict";function r(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")}return e.extend({init:function(e){this._super(e),this._textSizeCache={},this.addClassToElement(this.getTopLevelElement(),"notanimating")},_createElement:function(e,t,i){var n=document.createElement(e);return t&&"#"!==t.substring(0,1)&&(n.id=t),i&&0<i.length&&(n.className=i.join(" ")),n},createContainer:function(e,t){return this._createElement("div",e,t)},createLabel:function(e,t,i){var n=this._createElement("span",e,t);return this.setElementContent(n,i),n},createButton:function(e,t){return this._createElement("div",e,t)},createList:function(e,t){return this._createElement("ul",e,t)},createListItem:function(e,t){return this._createElement("li",e,t)},createImage:function(e,t,i,n,r,s){var o=this._createElement("img",e,t);return o.src=i,o.alt="",n&&this.setElementSize(o,n),void 0!==r&&(o.onload=r),void 0!==s&&(o.onerror=s),o},loadStyleSheet:function(e,t){var i=this;if(t&&function(){var e=i._createElement("style");e.type="text/css",e.innerHTML="body {};",e.className="added-by-antie",document.getElementsByTagName("head")[0].appendChild(e);try{return e.sheet.cssRules,!0}catch(e){}finally{e.parentNode.removeChild(e)}return!1}()){var n=this._createElement("style");n.type="text/css",n.innerHTML="@import url('"+e+"');",n.className="added-by-antie",document.getElementsByTagName("head")[0].appendChild(n);var r=window.setInterval(function(){try{n.sheet.cssRules,window.clearInterval(r)}catch(e){return}t(e)},200)}else{var s=this._createElement("link");if(s.type="text/css",s.rel="stylesheet",s.href=e,s.className="added-by-antie",document.getElementsByTagName("head")[0].appendChild(s),t){var o=this._createElement("img");o.onerror=function(){o.onerror=function(){},t(e),o.parentNode.removeChild(o)},this.getTopLevelElement().appendChild(o),o.src=e}}return n},appendChildElement:function(e,t){e.appendChild(t)},prependChildElement:function(e,t){0<e.childNodes.length?e.insertBefore(t,e.childNodes[0]):e.appendChild(t)},insertChildElementBefore:function(e,t,i){e.insertBefore(t,i)},insertChildElementAt:function(e,t,i){i>=e.childNodes.length?e.appendChild(t):e.insertBefore(t,e.childNodes[i])},getElementParent:function(e){return e.parentNode},removeElement:function(e){e.parentNode&&e.parentNode.removeChild(e)},clearElement:function(e){for(var t=e.childNodes.length-1;0<=t;t--)e.removeChild(e.childNodes[t])},setElementClasses:function(e,t){e.className=t.join(" ")},removeClassFromElement:function(e,t,i){if(new RegExp(" "+t+" ").test(" "+e.className+" ")&&(e.className=r((" "+e.className+" ").replace(" "+t+" "," "))),i)for(var n=0;n<e.childNodes.length;n++)this.removeClassFromElement(e.childNodes[n],t,!0)},addClassToElement:function(e,t){this.removeClassFromElement(e,t,!1),e.className=r(e.className+" "+t)},addKeyEventListener:function(){var i=this,n=this.getKeyMap(),r={};document.onkeydown=function(e){e=e||window.event;var t=n[e.keyCode.toString()];t&&(r[e.keyCode.toString()]?i._application.bubbleEvent(new s("keypress",t)):(i._application.bubbleEvent(new s("keydown",t)),r[e.keyCode.toString()]=!0),e.preventDefault())},document.onkeyup=function(e){e=e||window.event;var t=n[e.keyCode.toString()];t&&(delete r[e.keyCode.toString()],i._application.bubbleEvent(new s("keyup",t)),e.preventDefault())},document.onkeypress=function(e){e=e||window.event;var t=n[e.keyCode.toString()];t&&(i._application.bubbleEvent(new s("keypress",t)),e.preventDefault())}},getElementSize:function(e){return{width:e.clientWidth||e.offsetWidth,height:e.clientHeight||e.offsetHeight}},setElementSize:function(e,t){void 0!==t.width&&(e.style.width=t.width+"px"),void 0!==t.height&&(e.style.height=t.height+"px")},setElementPosition:function(e,t){void 0!==t.top&&(e.style.top=t.top+"px"),void 0!==t.left&&(e.style.left=t.left+"px")},setElementContent:function(e,t){""!==t?new i(t).setElementContent(e):this.clearElement(e)},cloneElement:function(e,t,i,n){var r=e.cloneNode(t);return i&&(r.className+=" "+i),n&&e.id&&(r.id=e.id+n),r},getTextHeight:function(e,t,i){var n,r=t+":"+i.join(" ")+":"+e;return(n=this._textSizeCache[r])||(this._measureTextElement||(this._measureTextElement=this.createLabel("measure",null,"fW"),this._measureTextElement.style.display="block",this._measureTextElement.style.position="absolute",this._measureTextElement.style.top="-10000px",this._measureTextElement.style.left="-10000px",this.appendChildElement(document.body,this._measureTextElement)),this._measureTextElement.className=i.join(" "),this._measureTextElement.style.width="number"==typeof t?t+"px":t,this._measureTextElement.innerHTML=e,n=this._textSizeCache[r]=this._measureTextElement.clientHeight),n},getChildElementsByTagName:function(e,t){var i=[];t=t.toLowerCase();for(var n=0;n<e.childNodes.length;n++)e.childNodes[n].tagName&&e.childNodes[n].tagName.toLowerCase()===t&&i.push(e.childNodes[n]);return i},getTopLevelElement:function(){return document.documentElement||document.body.parentNode||document},getStylesheetElements:function(){for(var e=[],t=document.getElementsByTagName("link"),i=document.getElementsByTagName("style"),n=0;n<t.length;n++)e.push(t[n]);for(var r=0;r<i.length;r++)e.push(i[r]);return e},getElementOffset:function(e){return{top:e.offsetTop,left:e.offsetLeft}},getScreenSize:function(){var e,t;if("number"==typeof window.innerWidth)e=window.innerWidth,t=window.innerHeight;else{var i=document.documentElement||document.body;t=i.clientHeight||i.offsetHeight,e=i.clientWidth||i.offsetWidth}return{width:e,height:t}},setCurrentRoute:function(e){var t=this.getHistorian().toString();0<e.length?window.location.hash="#"+e.join("/")+t:window.location.hash=""===t?"":"#"+t},getCurrentRoute:function(){return unescape(window.location.hash).split(t.HISTORY_TOKEN,1)[0].replace(/^#/,"").split("/")},getHistorian:function(){return new t(decodeURI(this.getWindowLocation().href))},getWindowLocation:function(){var e,t,i,n,r;if((e=this._windowLocation||window.location).hash&&1<e.hash.length&&e.href&&-1===e.href.lastIndexOf("#")){for(r={},t=["assign","hash","host","href","pathname","protocol","search"],n=0;n<t.length;n++)i=t[n],e.hasOwnProperty(i)&&(r[i]=e[i]);r.href=r.href+r.hash}return r||e},setWindowLocationUrl:function(e){var t=this._windowLocation||window.location;"function"==typeof t.assign?t.assign(e):t.href=e},getReferrer:function(){return document.referrer},preloadImage:function(e){(new Image).src=e},isHDEnabled:function(){return!0}})}),define("antie/devices/data/json2",["antie/devices/browserdevice"],function(Device){var JSON;JSON||(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var i,n,r,s,o,a=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(l)){for(s=l.length,i=0;i<s;i+=1)o[i]=str(i,l)||"null";return r=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+a+"]":"["+o.join(",")+"]",gap=a,r}if(rep&&"object"==typeof rep)for(s=rep.length,i=0;i<s;i+=1)"string"==typeof rep[i]&&(r=str(n=rep[i],l))&&o.push(quote(n)+(gap?": ":":")+r);else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(r=str(n,l))&&o.push(quote(n)+(gap?": ":":")+r);return r=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+a+"}":"{"+o.join(",")+"}",gap=a,r}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,i){var n;if(indent=gap="","number"==typeof i)for(n=0;n<i;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if((rep=t)&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var i,n,r=e[t];if(r&&"object"==typeof r)for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(void 0!==(n=walk(r,i))?r[i]=n:delete r[i]);return reviver.call(e,t,r)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),Device.prototype.decodeJson=function(e){return JSON.parse(e)},Device.prototype.encodeJson=function(e){return JSON.stringify(e)}}),define("antie/devices/data/nativejson",["antie/devices/browserdevice"],function(e){"use strict";e.prototype.decodeJson=function(e){return JSON.parse(e)},e.prototype.encodeJson=function(e){return JSON.stringify(e)}}),define("antie/devices/device",["antie/class","antie/events/keyevent","antie/storageprovider","antie/devices/storage/session","require","rofl/lib/utils"],function(e,g,n,r,s,o){"use strict";var i=e.extend({init:function(e){var t;if(this._application=null,this._config=e,this._keyMap={},e.input&&e.input.map){var i={UP:g.VK_UP,DOWN:g.VK_DOWN,LEFT:g.VK_LEFT,RIGHT:g.VK_RIGHT,ENTER:g.VK_ENTER,BACK:g.VK_BACK,SPACE:g.VK_SPACE,BACK_SPACE:g.VK_BACK_SPACE,PLAY:g.VK_PLAY,PAUSE:g.VK_PAUSE,PLAY_PAUSE:g.VK_PLAY_PAUSE,STOP:g.VK_STOP,PREV:g.VK_PREV,NEXT:g.VK_NEXT,FAST_FWD:g.VK_FAST_FWD,REWIND:g.VK_REWIND,SUBTITLE:g.VK_SUBTITLE,INFO:g.VK_INFO,VOLUME_UP:g.VK_VOLUME_UP,VOLUME_DOWN:g.VK_VOLUME_DOWN,MUTE:g.VK_MUTE,RED:g.VK_RED,GREEN:g.VK_GREEN,YELLOW:g.VK_YELLOW,BLUE:g.VK_BLUE,HELP:g.VK_HELP,SEARCH:g.VK_SEARCH,AD:g.VK_AUDIODESCRIPTION,HD:g.VK_HD,A:g.VK_A,B:g.VK_B,C:g.VK_C,D:g.VK_D,E:g.VK_E,F:g.VK_F,G:g.VK_G,H:g.VK_H,I:g.VK_I,J:g.VK_J,K:g.VK_K,L:g.VK_L,M:g.VK_M,N:g.VK_N,O:g.VK_O,P:g.VK_P,Q:g.VK_Q,R:g.VK_R,S:g.VK_S,T:g.VK_T,U:g.VK_U,V:g.VK_V,W:g.VK_W,X:g.VK_X,Y:g.VK_Y,Z:g.VK_Z,0:g.VK_0,1:g.VK_1,2:g.VK_2,3:g.VK_3,4:g.VK_4,5:g.VK_5,6:g.VK_6,7:g.VK_7,8:g.VK_8,9:g.VK_9};for(var n in e.input.map)if(e.input.map.hasOwnProperty(n))switch(n){case"alpha":var r=e.input.map[n][0],s=e.input.map[n][1],o="A".charCodeAt(0);for(t=r;t<=s;t++)this._keyMap[t.toString()]=i[String.fromCharCode(t-r+o)];break;case"numeric":var a=e.input.map[n][0],l=e.input.map[n][1],c="0".charCodeAt(0);for(t=a;t<=l;t++)this._keyMap[t.toString()]=i[String.fromCharCode(t-a+c)];break;default:var u=e.input.map[n];u&&(this._keyMap[n.toString()]=i[u])}}function d(){}var h={log:d,debug:d,info:d,warn:d,error:d};this.filteredLoggingMethods=function(e,t){var i=h;if(e.logging&&e.logging.level){var n=e.logging.level;switch(n){case"all":case"debug":i.debug=t.debug;case"info":i.info=t.info,i.log=t.log;case"warn":i.warn=t.warn;case"error":i.error=t.error}}return i}(e,function(e,t){if(e.logging&&e.logging.strategy){var i="antie/devices/logging/"+e.logging.strategy;if(t[i])return t[i]}var n=t["antie/devices/logging/default"];n||(n=t["antie/devices/logging/onscreen"]);n||(n=h);return n}(e,this.loggingStrategies))},setApplication:function(e){this._application=e},getConfig:function(){return this._config},getScreenSize:function(){throw new Error("Device::getScreenSize not implemented by current Device subclass.")},getLogger:function(){return this.filteredLoggingMethods},createContainer:function(){},createLabel:function(){},createButton:function(){},createList:function(){},createListItem:function(){},createImage:function(){},appendChildElement:function(){},setElementClasses:function(){},removeClassFromElement:function(){},addClassToElement:function(){},addKeyEventListener:function(){},getChildElementsByTagName:function(){},getTopLevelElement:function(){},getStylesheetElements:function(){},getElementOffset:function(){},getElementSize:function(){},setElementSize:function(){},scrollElementTo:function(){},moveElementTo:function(){},hideElement:function(){},showElement:function(){},tweenElementStyle:function(){},stopAnimation:function(){},encodeJson:function(){},decodeJson:function(){},getKeyMap:function(){return this._keyMap},createMediaInterface:function(){},getMediaPlayer:function(){},getLivePlayer:function(){},getLiveSupport:function(){},getPlayerEmbedMode:function(){},setCurrentRoute:function(){},getCurrentRoute:function(){},getWindowLocation:function(){},setWindowLocationUrl:function(){},getReferrer:function(){},loadScript:function(e,t,i,n,r){var s=this,o=null,a="_antie_callback_"+(r||1*new Date+"_"+Math.floor(1e7*Math.random()));if(window[a])throw"A request with the name "+a+" is already in flight";var l=window.setTimeout(function(){window[a]&&(o&&s.removeElement(o),delete window[a],i&&i.onError&&i.onError("timeout"))},n||5e3);return window[a]=function(e){n&&window.clearTimeout(l),i&&i.onSuccess&&i.onSuccess(e),s.removeElement(o),delete window[a]},(o=this._createElement("script")).src=e.replace(t,a),document.getElementsByTagName("head")[0].appendChild(o),o},loadStyleSheet:function(){},loadAuthenticatedURL:function(e,t){return this.loadURL(e,t)},_newXMLHttpRequest:function(){return new XMLHttpRequest},loadURL:function(e,t){var i=this._newXMLHttpRequest();i.onreadystatechange=function(){4===i.readyState&&(i.onreadystatechange=null,200<=i.status&&i.status<300?t.onLoad&&t.onLoad(i.responseText,i.status):t.onError&&t.onError(i.responseText,i.status))};try{if(i.open(t.method||"GET",e,!0),t&&t.headers)for(var n in t.headers)t.headers.hasOwnProperty(n)&&i.setRequestHeader(n,t.headers[n]);i.send(t.data||null)}catch(e){t.onError&&t.onError(e)}return i},crossDomainPost:function(s,o,a){var l,c,u,d=!1,h=a.blankUrl||"blank.html";function e(){var e,t,i;try{e=l.contentWindow.location.href}catch(e){t=e}if(!t&&e)if(!1===d){for(var n in d=!0,i=l.contentWindow.document,(c=i.createElement("form")).method="POST",c.action=s,i.body.appendChild(c),o)o.hasOwnProperty(n)&&g(n,o[n]);c.submit()}else{u&&clearTimeout(u),l.onload=null;try{var r=l.contentWindow.name;l.parentNode.removeChild(l),a.onLoad&&a.onLoad(r)}catch(e){a.onError&&a.onError(e)}}else setTimeout(function(){l.src=h+"#2"},500)}function g(e,t){var i=document.createElement("input");i.type="hidden",i.name=e,i.value=t,c.appendChild(i)}u=setTimeout(function(){l.onload=null,a.onError&&a.onError("timeout")},1e3*(a.timeout||10)),(l=document.createElement("iframe")).style.width="0",l.style.height="0",l.src=h+"#1",l.onload=e,document.body.appendChild(l)},executeCrossDomainGet:function(e,t,i){var n,r,s;i=i||{},a((n=this).getConfig())?(s={onLoad:function(e){t.onSuccess(n.decodeJson(e))},onError:t.onError},t.bearerToken&&(s.headers={Authorization:"Bearer "+t.bearerToken}),this.loadURL(e,s)):(r="?"+(i.callbackKey||"callback")+"=%callback%",-1===e.indexOf("?")?e+=r:e=e.replace("?",r+"&"),t.bearerToken&&(e=e+"&bearerToken="+t.bearerToken),this.loadScript(e,/%callback%/,t,i.timeout,i.id))},executeCrossDomainPost:function(e,t,i){var n,r,s;n=this.encodeJson(t),a(this.getConfig())?(r={onLoad:i.onLoad,onError:i.onError,headers:{"Content-Type":"application/json"},data:n,method:"POST"},i.bearerToken&&(r.headers.Authorization="Bearer "+i.bearerToken),this.loadURL(e,r)):((s={})[i.fieldName]=n,i.bearerToken&&(s.bearerToken=i.bearerToken),this.crossDomainPost(e,s,{onLoad:i.onLoad,onError:i.onError,blankUrl:i.blankUrl}))},preloadImage:function(){},isHDEnabled:function(){},exit:function(){throw new Error("Not supported on this device.")},exitToBroadcast:function(){this.exit()},getStorage:function(e,t,i){return e===n.STORAGE_TYPE_SESSION?r.getNamespace(t):e===n.STORAGE_TYPE_PERSISTENT?this.getPersistentStorage(t,i):e===n.STORAGE_TYPE_LOCAL?o.isFunction(this.getLocalStorage)?this.getLocalStorage(t,i):this.getPersistentStorage(t,i):void 0},isVolumeControlSupported:function(){return!1},getVolume:function(){},setVolume:function(){},getMuted:function(){},setMuted:function(){},isAnimationDisabled:function(){},createBroadcastSource:function(){throw new Error("Broadcast API not available on this device.")},isBroadcastSourceSupported:function(){return!1}});function a(e){return e&&e.networking&&e.networking.supportsCORS}return i.load=function(t,i){try{s([t.modules.base].concat(t.modules.modifiers),function(e){try{i.onSuccess(new e(t))}catch(e){i.onError&&i.onError(e)}})}catch(e){i.onError&&i.onError(e)}},i.addLoggingStrategy=function(e,t){i.prototype.loggingStrategies[e]=t},i.prototype.loggingStrategies=[],i.prototype.filteredLoggingMethods=null,i}),define("antie/devices/exit/broadcast/netcast",["antie/devices/browserdevice"],function(e){"use strict";e.prototype.exitToBroadcast=function(){window.NetCastExit()}}),define("antie/devices/exit/broadcast/samsung_maple",["antie/devices/browserdevice"],function(e){"use strict";e.prototype.exitToBroadcast=function(){(new Common.API.Widget).sendExitEvent()}}),define("antie/devices/exit/closewindow",["antie/devices/browserdevice"],function(e){"use strict";e.prototype.exit=function(){window.close()}}),define("antie/devices/exit/destroyapplication",["antie/devices/browserdevice"],function(e){"use strict";e.prototype.exit=function(){var e=window.oipfObjectFactory;if(e&&e.isObjectSupported("application/oipfApplicationManager")){var t=e.createApplicationManagerObject();if(t){var i=t.getOwnerApplication(window.document);i&&i.destroyApplication()}}}}),define("antie/devices/exit/history",["antie/devices/browserdevice"],function(e){"use strict";e.prototype.exit=function(){var e=history.length-1;history.go(-e)}}),define("antie/devices/exit/netcast",["antie/devices/browserdevice"],function(e){"use strict";e.prototype.exit=function(){window.NetCastBack()}}),define("antie/devices/exit/openclosewindow",["antie/devices/browserdevice"],function(e){"use strict";e.prototype.exit=function(){window.open("","_self"),window.close()}}),define("antie/devices/exit/sagemcom",["antie/devices/browserdevice"],function(e){"use strict";e.prototype.exit=function(){parent.postMessage("JS_EVENT_QUIT_THIRD_PARTY","*")}}),define("antie/devices/exit/samsung_maple",["antie/devices/browserdevice"],function(e){"use strict";e.prototype.exit=function(){(new Common.API.Widget).sendReturnEvent()}}),define("antie/devices/exit/samsung_tizen",["antie/devices/browserdevice"],function(e){"use strict";e.prototype.exit=function(){tizen.application.getCurrentApplication().exit()}}),define("antie/devices/exit/tivo",["antie/devices/browserdevice"],function(e){"use strict";e.prototype.exit=function(){tivo.core.exit()}}),define("antie/devices/googletv",["antie/devices/browserdevice","antie/runtimecontext"],function(e,t){"use strict";return e.extend({init:function(e){t.getCurrentApplication().getBestFitLayout=function(){var l=this._device.getScreenSize(),e=this._device.getConfig().layouts;e.sort(function(e,t){var i=Math.abs(l.width-e.width),n=Math.abs(l.height-e.height),r=Math.abs(l.width-t.width),s=Math.abs(l.height-t.height),o=i*i+n*s,a=r*r+s*s;return o==a?0:o<a?-1:1});var t=e[0];return document.body.style.zoom=screen.width/t.width,t},this._super(e)}})}),define("antie/devices/logging/alert",["module","antie/devices/device"],function(e,t){"use strict";var i={log:function(){alert("[LOG] "+Array.prototype.join.call(arguments,"\n"))},debug:function(){alert("[DEBUG] "+Array.prototype.join.call(arguments,"\n"))},info:function(){alert("[INFO] "+Array.prototype.join.call(arguments,"\n"))},warn:function(){alert("[WARN] "+Array.prototype.join.call(arguments,"\n"))},error:function(){alert("[ERROR] "+Array.prototype.join.call(arguments,"\n"))}};t.addLoggingStrategy(e.id,i)}),define("antie/devices/logging/consumelog",["module","antie/devices/device"],function(e,t){"use strict";function i(){}var n={log:i,debug:i,info:i,warn:i,error:i};t.addLoggingStrategy(e.id,n)}),define("antie/devices/logging/default",["module","antie/devices/device"],function(e,t){"use strict";var i={log:function(){console.log.apply(console,arguments)},debug:function(){console.debug.apply(console,arguments)},info:function(){console.info.apply(console,arguments)},warn:function(){console.warn.apply(console,arguments)},error:function(){console.error.apply(console,arguments)}};t.addLoggingStrategy(e.id,i)}),define("antie/devices/logging/jstestdriver",["module","antie/devices/device"],function(e,t){"use strict";var i={log:function(){jstestdriver.console.log.apply(jstestdriver.console,arguments)},debug:function(){jstestdriver.console.debug.apply(jstestdriver.console,arguments)},info:function(){jstestdriver.console.info.apply(jstestdriver.console,arguments)},warn:function(){jstestdriver.console.warn.apply(jstestdriver.console,arguments)},error:function(){jstestdriver.console.error.apply(jstestdriver.console,arguments)}};t.addLoggingStrategy(e.id,i)}),define("antie/devices/logging/onscreen",["module","antie/devices/device"],function(e,t){"use strict";var i=null,n=[];function r(e){i||((i=document.createElement("div")).id="__onScreenLogging",i.style.zIndex=9999999,i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.padding="20px",i.style.backgroundColor="#d8d8d8",i.style.backgroundColor="rgba(216,216,216,0.8)",i.style.color="#000000",i.style.lineHeight="12px",i.style.fontSize="12px",document.body.appendChild(i)),n.push(e),10<n.length&&n.shift(),i.innerHTML=n.join("<hr />")}var s={log:function(){r.call(this,"[LOG] "+Array.prototype.join.call(arguments,"<br/>"))},debug:function(){r.call(this,"[DEBUG] "+Array.prototype.join.call(arguments,"<br/>"))},info:function(){r.call(this,"[INFO] "+Array.prototype.join.call(arguments,"<br/>"))},warn:function(){r.call(this,"[WARN] "+Array.prototype.join.call(arguments,"<br/>"))},error:function(){r.call(this,"[ERROR] "+Array.prototype.join.call(arguments,"<br/>"))}};t.addLoggingStrategy(e.id,s)}),define("antie/devices/logging/saving",["module","antie/devices/device"],function(e,t){"use strict";var r=[],i=function(e,t){for(var i=[],n=0;n<t.length;++n)i.push(t[n]+"");r.push({level:e,message:i})},n={log:function(){i("LOG",arguments)},debug:function(){i("DEBUG",arguments)},info:function(){i("INFO",arguments)},warn:function(){i("WARN",arguments)},error:function(){i("ERROR",arguments)}};return t.addLoggingStrategy(e.id,n),{getLogItems:function(){var e=r.slice(0);return r=[],e}}}),define("antie/devices/logging/xhr",["module","antie/runtimecontext","antie/devices/device"],function(e,c,t){"use strict";function u(e,t){return 0<(t-=e.toString().length)?new Array(t+(/\./.test(e)?2:1)).join("0")+e:e+""}function i(e,t){var i,n,r,s,o,a=new Date,l=u(a.getHours(),2)+":"+u(a.getMinutes(),2)+":"+u(a.getSeconds(),2);i="/tvpjsframeworklogging",n={},r={command:"add",message:"["+l+"]["+e+"]"+t},s=new XMLHttpRequest,o=c.getCurrentApplication().getDevice().encodeJson(r),s.open("POST",i,!0),s.setRequestHeader("Content-type","application/json; charset=utf-8"),s.onreadystatechange=function(){4===this.readyState&&(this.onreadystatechange=null,200===this.status?n.onLoad&&n.onOkay(this.responseText):n.onError&&n.onError(this.responseText,this.status))},s.send(o)}var n={log:function(){i("LOG",Array.prototype.join.call(arguments,"\n"))},debug:function(){i("DEBUG",Array.prototype.join.call(arguments,"\n"))},info:function(){i("INFO",Array.prototype.join.call(arguments,"\n"))},warn:function(){i("WARN",Array.prototype.join.call(arguments,"\n"))},error:function(){i("ERROR",Array.prototype.join.call(arguments,"\n"))}};t.addLoggingStrategy(e.id,n)}),define("antie/devices/mediaplayer/cehtml",["antie/devices/device","antie/devices/mediaplayer/mediaplayer","antie/runtimecontext"],function(e,n,i){"use strict";var t=n.extend({init:function(){this._super(),this._setSentinelLimits(),this._state=n.STATE.EMPTY},setSource:function(e,t,i){this.getState()===n.STATE.EMPTY?(this._type=e,this._source=t,this._mimeType=i,this._timeAtLastSenintelInterval=0,this._setSeekSentinelTolerance(),this._createElement(),this._addElementToDOM(),this._mediaElement.data=this._source,this._registerEventHandlers(),this._toStopped()):this._toError("Cannot set source unless in the '"+n.STATE.EMPTY+"' state")},resume:function(){switch(this._postBufferingState=n.STATE.PLAYING,this.getState()){case n.STATE.PLAYING:case n.STATE.BUFFERING:break;case n.STATE.PAUSED:this._mediaElement.play(1),this._toPlaying();break;default:this._toError("Cannot resume while in the '"+this.getState()+"' state")}},playFrom:function(e){switch(this._postBufferingState=n.STATE.PLAYING,this._sentinelLimits.seek.currentAttemptCount=0,this.getState()){case n.STATE.BUFFERING:this._deferSeekingTo=e;break;case n.STATE.COMPLETE:this._toBuffering(),this._mediaElement.stop(),this._playAndSetDeferredSeek(e);break;case n.STATE.PLAYING:this._toBuffering(),!1===this._seekTo(e)&&this._toPlaying();break;case n.STATE.PAUSED:this._toBuffering(),this._seekTo(e),this._mediaElement.play(1);break;default:this._toError("Cannot playFrom while in the '"+this.getState()+"' state")}},beginPlayback:function(){switch(this._postBufferingState=n.STATE.PLAYING,this.getState()){case n.STATE.STOPPED:this._toBuffering(),this._mediaElement.play(1);break;default:this._toError("Cannot beginPlayback while in the '"+this.getState()+"' state")}},beginPlaybackFrom:function(e){switch(this._postBufferingState=n.STATE.PLAYING,this._sentinelLimits.seek.currentAttemptCount=0,this.getState()){case n.STATE.STOPPED:this._toBuffering(),this._playAndSetDeferredSeek(e);break;default:this._toError("Cannot beginPlayback while in the '"+this.getState()+"' state")}},pause:function(){switch(this._postBufferingState=n.STATE.PAUSED,this.getState()){case n.STATE.BUFFERING:case n.STATE.PAUSED:break;case n.STATE.PLAYING:this._mediaElement.play(0),this._toPaused();break;default:this._toError("Cannot pause while in the '"+this.getState()+"' state")}},stop:function(){switch(this.getState()){case n.STATE.STOPPED:break;case n.STATE.BUFFERING:case n.STATE.PLAYING:case n.STATE.PAUSED:case n.STATE.COMPLETE:this._sentinelSeekTime=void 0,this._mediaElement.stop(),this._toStopped();break;default:this._toError("Cannot stop while in the '"+this.getState()+"' state")}},reset:function(){switch(this.getState()){case n.STATE.EMPTY:break;case n.STATE.STOPPED:case n.STATE.ERROR:this._toEmpty();break;default:this._toError("Cannot reset while in the '"+this.getState()+"' state")}},getSource:function(){return this._source},getMimeType:function(){return this._mimeType},getCurrentTime:function(){switch(this.getState()){case n.STATE.STOPPED:case n.STATE.ERROR:break;case n.STATE.COMPLETE:if(this._range)return this._range.end;break;default:if(this._mediaElement)return this._mediaElement.playPosition/1e3}},getSeekableRange:function(){switch(this.getState()){case n.STATE.STOPPED:case n.STATE.ERROR:break;default:return this._range}},_getMediaDuration:function(){if(this._range)return this._range.end},getState:function(){return this._state},getPlayerElement:function(){return this._mediaElement},_onFinishedBuffering:function(){this._cacheRange(),this.getState()===n.STATE.BUFFERING&&(this._waitingToSeek()?(this._toBuffering(),this._performDeferredSeek()):this._waitingToPause()?(this._toPaused(),this._mediaElement.play(0)):this._toPlaying())},_onDeviceError:function(){this._reportError("Media element error code: "+this._mediaElement.error)},_onDeviceBuffering:function(){this.getState()===n.STATE.PLAYING&&this._toBuffering()},_onEndOfMedia:function(){this.getState()!==n.STATE.COMPLETE&&this._toComplete()},_onStatus:function(){this.getState()===n.STATE.PLAYING&&this._emitEvent(n.EVENT.STATUS)},_createElement:function(){var e=i.getDevice();this._mediaElement=e._createElement("object","mediaPlayer"),this._mediaElement.type=this._mimeType,this._mediaElement.style.position="absolute",this._mediaElement.style.top="0px",this._mediaElement.style.left="0px",this._mediaElement.style.width="100%",this._mediaElement.style.height="100%"},_registerEventHandlers:function(){var e=this;this._mediaElement.onPlayStateChange=function(){switch(e._mediaElement.playState){case t.PLAY_STATE_STOPPED:break;case t.PLAY_STATE_PLAYING:e._onFinishedBuffering();break;case t.PLAY_STATE_PAUSED:case t.PLAY_STATE_CONNECTING:break;case t.PLAY_STATE_BUFFERING:e._onDeviceBuffering();break;case t.PLAY_STATE_FINISHED:e._onEndOfMedia();break;case t.PLAY_STATE_ERROR:e._onDeviceError()}},this._updateInterval=setInterval(function(){e._onStatus()},500)},_addElementToDOM:function(){var e=i.getDevice(),t=document.getElementsByTagName("body")[0];e.prependChildElement(t,this._mediaElement)},_cacheRange:function(){this._mediaElement&&(this._range={start:0,end:this._mediaElement.playTime/1e3})},_playAndSetDeferredSeek:function(e){this._mediaElement.play(1),0<e&&(this._deferSeekingTo=e)},_waitingToSeek:function(){return void 0!==this._deferSeekingTo},_performDeferredSeek:function(){this._seekTo(this._deferSeekingTo),this._deferSeekingTo=void 0},_seekTo:function(e){var t=this._getClampedTime(e);return t!==e&&i.getDevice().getLogger().debug("playFrom "+e+" clamped to "+t+" - seekable range is { start: "+this._range.start+", end: "+this._range.end+" }"),this._sentinelSeekTime=t,this._mediaElement.seek(1e3*t)},_waitingToPause:function(){return this._postBufferingState===n.STATE.PAUSED},_wipe:function(){this._type=void 0,this._source=void 0,this._mimeType=void 0,this._sentinelSeekTime=void 0,this._range=void 0,this._mediaElement&&(clearInterval(this._updateInterval),this._clearSentinels(),this._destroyMediaElement())},_destroyMediaElement:function(){var e=i.getDevice();delete this._mediaElement.onPlayStateChange,e.removeElement(this._mediaElement),this._mediaElement=void 0},_reportError:function(e){i.getDevice().getLogger().error(e),this._emitEvent(n.EVENT.ERROR,{errorMessage:e})},_toStopped:function(){this._state=n.STATE.STOPPED,this._emitEvent(n.EVENT.STOPPED),this._sentinelInterval&&this._clearSentinels()},_toBuffering:function(){this._state=n.STATE.BUFFERING,this._emitEvent(n.EVENT.BUFFERING),this._setSentinels([this._exitBufferingSentinel])},_toPlaying:function(){this._state=n.STATE.PLAYING,this._emitEvent(n.EVENT.PLAYING),this._setSentinels([this._shouldBeSeekedSentinel,this._enterCompleteSentinel,this._enterBufferingSentinel])},_toPaused:function(){this._state=n.STATE.PAUSED,this._emitEvent(n.EVENT.PAUSED),this._setSentinels([this._shouldBePausedSentinel,this._shouldBeSeekedSentinel])},_toComplete:function(){this._state=n.STATE.COMPLETE,this._emitEvent(n.EVENT.COMPLETE),this._clearSentinels()},_toEmpty:function(){this._wipe(),this._state=n.STATE.EMPTY},_toError:function(e){throw this._wipe(),this._state=n.STATE.ERROR,this._reportError(e),"ApiError: "+e},_isNearToEnd:function(e){return this.getDuration()-e<=1},_setSentinels:function(i){this._sentinelLimits.pause.currentAttemptCount=0;var n=this;this._timeAtLastSenintelInterval=this.getCurrentTime(),this._clearSentinels(),this._sentinelIntervalNumber=0,this._sentinelInterval=setInterval(function(){var e=n.getCurrentTime();n._sentinelIntervalNumber++,n._timeHasAdvanced=!!e&&e>n._timeAtLastSenintelInterval+.2,n._sentinelTimeIsNearEnd=n._isNearToEnd(e||n._timeAtLastSenintelInterval);for(var t=0;t<i.length;t++){if(i[t].call(n))break}n._timeAtLastSenintelInterval=e},1100)},_setSentinelLimits:function(){this._sentinelLimits={pause:{maximumAttempts:2,successEvent:n.EVENT.SENTINEL_PAUSE,failureEvent:n.EVENT.SENTINEL_PAUSE_FAILURE,currentAttemptCount:0},seek:{maximumAttempts:2,successEvent:n.EVENT.SENTINEL_SEEK,failureEvent:n.EVENT.SENTINEL_SEEK_FAILURE,currentAttemptCount:0}}},_clearSentinels:function(){clearInterval(this._sentinelInterval)},_enterBufferingSentinel:function(){var e=!this._timeHasAdvanced&&!this._sentinelTimeIsNearEnd&&1<this._sentinelIntervalNumber;return e&&(this._emitEvent(n.EVENT.SENTINEL_ENTER_BUFFERING),this._toBuffering()),e},_exitBufferingSentinel:function(){var e=this._timeHasAdvanced;return e&&(this._emitEvent(n.EVENT.SENTINEL_EXIT_BUFFERING),this._onFinishedBuffering()),e},_shouldBeSeekedSentinel:function(){if(void 0===this._sentinelSeekTime)return!1;var e=this.getCurrentTime(),t=this._getClampedTime(this._sentinelSeekTime),i=!1;if(Math.abs(t-e)>this._seekSentinelTolerance){var n=this._mediaElement;i=this._nextSentinelAttempt(this._sentinelLimits.seek,function(){n.seek(1e3*t)})}else this._sentinelIntervalNumber<3?this._sentinelSeekTime=e:this._sentinelSeekTime=void 0;return i},_shouldBePausedSentinel:function(){var e=!1;if(this._timeHasAdvanced){var t=this._mediaElement;e=this._nextSentinelAttempt(this._sentinelLimits.pause,function(){t.play(0)})}return e},_enterCompleteSentinel:function(){var e=!this._timeHasAdvanced&&this._sentinelTimeIsNearEnd;return e&&(this._emitEvent(n.EVENT.SENTINEL_COMPLETE),this._onEndOfMedia()),e},_nextSentinelAttempt:function(e,t){var i,n;return e.currentAttemptCount+=1,(i=e.currentAttemptCount)===(n=e.maximumAttempts)+1&&this._emitEvent(e.failureEvent),i<=n&&(t(),this._emitEvent(e.successEvent),!0)},_setSeekSentinelTolerance:function(){this._seekSentinelTolerance=15,this._isLiveMedia()&&(this._seekSentinelTolerance=30)}});t.PLAY_STATE_STOPPED=0,t.PLAY_STATE_PLAYING=1,t.PLAY_STATE_PAUSED=2,t.PLAY_STATE_CONNECTING=3,t.PLAY_STATE_BUFFERING=4,t.PLAY_STATE_FINISHED=5,t.PLAY_STATE_ERROR=6;var r=new t;return e.prototype.getMediaPlayer=function(){return r},t}),define("antie/devices/mediaplayer/cehtmlseekfinishedemitevent",["antie/devices/mediaplayer/seekfinishedemitevent","antie/devices/mediaplayer/cehtml"],function(e,t){"use strict";return e(t),t}),define("antie/devices/mediaplayer/html5",["antie/runtimecontext","antie/devices/device","antie/devices/mediaplayer/mediaplayer"],function(a,e,l){"use strict";var t=l.extend({init:function(){this._super(),this._setSentinelLimits(),this._state=l.STATE.EMPTY},setSource:function(e,t,i){if(this.getState()===l.STATE.EMPTY){this._trustZeroes=!1,this._type=e,this._source=t,this._mimeType=i;var n=a.getDevice(),r="Video";e!==l.TYPE.AUDIO&&e!==l.TYPE.LIVE_AUDIO||(r="Audio"),this._setSeekSentinelTolerance(),this._mediaElement=n._createElement(r.toLowerCase(),"mediaPlayer"+r),this._mediaElement.autoplay=!1,this._mediaElement.style.position="absolute",this._mediaElement.style.top="0px",this._mediaElement.style.left="0px",this._mediaElement.style.width="100%",this._mediaElement.style.height="100%";var s=this;this._wrapOnFinishedBuffering=function(){s._onFinishedBuffering()},this._wrapOnError=function(){s._onDeviceError()},this._wrapOnEndOfMedia=function(){s._onEndOfMedia()},this._wrapOnDeviceBuffering=function(){s._onDeviceBuffering()},this._wrapOnStatus=function(){s._onStatus()},this._wrapOnMetadata=function(){s._onMetadata()},this._wrapOnSourceError=function(){s._onSourceError()},this._mediaElement.addEventListener("canplay",this._wrapOnFinishedBuffering,!1),this._mediaElement.addEventListener("seeked",this._wrapOnFinishedBuffering,!1),this._mediaElement.addEventListener("playing",this._wrapOnFinishedBuffering,!1),this._mediaElement.addEventListener("error",this._wrapOnError,!1),this._mediaElement.addEventListener("ended",this._wrapOnEndOfMedia,!1),this._mediaElement.addEventListener("waiting",this._wrapOnDeviceBuffering,!1),this._mediaElement.addEventListener("timeupdate",this._wrapOnStatus,!1),this._mediaElement.addEventListener("loadedmetadata",this._wrapOnMetadata,!1);var o=a.getCurrentApplication().getRootWidget().outputElement;n.prependChildElement(o,this._mediaElement),this._sourceElement=this._generateSourceElement(t,i),this._sourceElement.addEventListener("error",this._wrapOnSourceError,!1),this._mediaElement.preload="auto",n.appendChildElement(this._mediaElement,this._sourceElement),this._mediaElement.load(),this._toStopped()}else this._toError("Cannot set source unless in the '"+l.STATE.EMPTY+"' state")},playFrom:function(e){switch(this._postBufferingState=l.STATE.PLAYING,this._targetSeekTime=e,this._sentinelLimits.seek.currentAttemptCount=0,this.getState()){case l.STATE.PAUSED:case l.STATE.COMPLETE:this._trustZeroes=!0,this._toBuffering(),this._playFromIfReady();break;case l.STATE.BUFFERING:this._playFromIfReady();break;case l.STATE.PLAYING:this._trustZeroes=!0,this._toBuffering(),this._targetSeekTime=this._getClampedTimeForPlayFrom(e),this._isNearToCurrentTime(this._targetSeekTime)?(this._targetSeekTime=void 0,this._toPlaying()):this._playFromIfReady();break;default:this._toError("Cannot playFrom while in the '"+this.getState()+"' state")}},beginPlayback:function(){switch(this._postBufferingState=l.STATE.PLAYING,this._sentinelSeekTime=void 0,this.getState()){case l.STATE.STOPPED:this._trustZeroes=!0,this._toBuffering(),this._mediaElement.play();break;default:this._toError("Cannot beginPlayback while in the '"+this.getState()+"' state")}},beginPlaybackFrom:function(e){switch(this._postBufferingState=l.STATE.PLAYING,this._targetSeekTime=e,this._sentinelLimits.seek.currentAttemptCount=0,this.getState()){case l.STATE.STOPPED:this._trustZeroes=!0,this._toBuffering(),this._playFromIfReady();break;default:this._toError("Cannot beginPlaybackFrom while in the '"+this.getState()+"' state")}},pause:function(){switch(this._postBufferingState=l.STATE.PAUSED,this.getState()){case l.STATE.PAUSED:break;case l.STATE.BUFFERING:this._sentinelLimits.pause.currentAttemptCount=0,this._isReadyToPlayFrom()&&this._mediaElement.pause();break;case l.STATE.PLAYING:this._sentinelLimits.pause.currentAttemptCount=0,this._mediaElement.pause(),this._toPaused();break;default:this._toError("Cannot pause while in the '"+this.getState()+"' state")}},resume:function(){switch(this._postBufferingState=l.STATE.PLAYING,this.getState()){case l.STATE.PLAYING:break;case l.STATE.BUFFERING:this._isReadyToPlayFrom()&&this._mediaElement.play();break;case l.STATE.PAUSED:this._mediaElement.play(),this._toPlaying();break;default:this._toError("Cannot resume while in the '"+this.getState()+"' state")}},stop:function(){switch(this.getState()){case l.STATE.STOPPED:break;case l.STATE.BUFFERING:case l.STATE.PLAYING:case l.STATE.PAUSED:case l.STATE.COMPLETE:this._mediaElement.pause(),this._toStopped();break;default:this._toError("Cannot stop while in the '"+this.getState()+"' state")}},reset:function(){switch(this.getState()){case l.STATE.EMPTY:break;case l.STATE.STOPPED:case l.STATE.ERROR:this._toEmpty();break;default:this._toError("Cannot reset while in the '"+this.getState()+"' state")}},getSource:function(){return this._source},getMimeType:function(){return this._mimeType},getCurrentTime:function(){switch(this.getState()){case l.STATE.STOPPED:case l.STATE.ERROR:break;default:if(this._mediaElement)return this._mediaElement.currentTime}},getSeekableRange:function(){switch(this.getState()){case l.STATE.STOPPED:case l.STATE.ERROR:break;default:return this._getSeekableRange()}},_getMediaDuration:function(){if(this._mediaElement&&this._isReadyToPlayFrom())return this._mediaElement.duration},_getSeekableRange:function(){if(this._mediaElement){if(this._isReadyToPlayFrom()&&this._mediaElement.seekable&&0<this._mediaElement.seekable.length)return{start:this._mediaElement.seekable.start(0),end:this._mediaElement.seekable.end(0)};if(void 0!==this._mediaElement.duration)return{start:0,end:this._mediaElement.duration};a.getDevice().getLogger().warn("No 'duration' or 'seekable' on media element")}},getState:function(){return this._state},getPlayerElement:function(){return this._mediaElement},_onFinishedBuffering:function(){this._exitBuffering()},_onDeviceError:function(){this._reportError("Media element error code: "+this._mediaElement.error.code)},_onSourceError:function(){this._reportError("Media source element error")},_onDeviceBuffering:function(){this.getState()===l.STATE.PLAYING&&this._toBuffering()},_onEndOfMedia:function(){this._toComplete()},_onStatus:function(){this.getState()===l.STATE.PLAYING&&this._emitEvent(l.EVENT.STATUS)},_onMetadata:function(){this._metadataLoaded()},_exitBuffering:function(){this._metadataLoaded(),this.getState()===l.STATE.BUFFERING&&(this._postBufferingState===l.STATE.PAUSED?this._toPaused():this._toPlaying())},_metadataLoaded:function(){this._readyToPlayFrom=!0,this._waitingToPlayFrom()&&this._deferredPlayFrom()},_playFromIfReady:function(){this._isReadyToPlayFrom()&&this._waitingToPlayFrom()&&this._deferredPlayFrom()},_waitingToPlayFrom:function(){return void 0!==this._targetSeekTime},_deferredPlayFrom:function(){this._seekTo(this._targetSeekTime),this._mediaElement.play(),this._postBufferingState===l.STATE.PAUSED&&this._mediaElement.pause(),this._targetSeekTime=void 0},_seekTo:function(e){var t=this._getClampedTimeForPlayFrom(e);this._mediaElement.currentTime=t,this._sentinelSeekTime=t},_getClampedTimeForPlayFrom:function(e){var t=this._getClampedTime(e);if(t!==e){var i=this._getSeekableRange();a.getDevice().getLogger().debug("playFrom "+e+" clamped to "+t+" - seekable range is { start: "+i.start+", end: "+i.end+" }")}return t},_wipe:function(){this._type=void 0,this._source=void 0,this._mimeType=void 0,this._targetSeekTime=void 0,this._sentinelSeekTime=void 0,this._clearSentinels(),this._destroyMediaElement(),this._readyToPlayFrom=!1},_destroyMediaElement:function(){if(this._mediaElement){this._mediaElement.removeEventListener("canplay",this._wrapOnFinishedBuffering,!1),this._mediaElement.removeEventListener("seeked",this._wrapOnFinishedBuffering,!1),this._mediaElement.removeEventListener("playing",this._wrapOnFinishedBuffering,!1),this._mediaElement.removeEventListener("error",this._wrapOnError,!1),this._mediaElement.removeEventListener("ended",this._wrapOnEndOfMedia,!1),this._mediaElement.removeEventListener("waiting",this._wrapOnDeviceBuffering,!1),this._mediaElement.removeEventListener("timeupdate",this._wrapOnStatus,!1),this._mediaElement.removeEventListener("loadedmetadata",this._wrapOnMetadata,!1),this._sourceElement.removeEventListener("error",this._wrapOnSourceError,!1);var e=a.getDevice();e.removeElement(this._sourceElement),this._unloadMediaSrc(),e.removeElement(this._mediaElement),delete this._mediaElement,delete this._sourceElement}},_unloadMediaSrc:function(){this._mediaElement.removeAttribute("src"),this._mediaElement.load()},_generateSourceElement:function(e,t){var i=a.getDevice()._createElement("source");return i.src=e,i.type=t,i},_reportError:function(e){a.getDevice().getLogger().error(e),this._emitEvent(l.EVENT.ERROR,{errorMessage:e})},_toStopped:function(){this._state=l.STATE.STOPPED,this._emitEvent(l.EVENT.STOPPED),this._setSentinels([])},_toBuffering:function(){this._state=l.STATE.BUFFERING,this._emitEvent(l.EVENT.BUFFERING),this._setSentinels([this._exitBufferingSentinel])},_toPlaying:function(){this._state=l.STATE.PLAYING,this._emitEvent(l.EVENT.PLAYING),this._setSentinels([this._endOfMediaSentinel,this._shouldBeSeekedSentinel,this._enterBufferingSentinel])},_toPaused:function(){this._state=l.STATE.PAUSED,this._emitEvent(l.EVENT.PAUSED),this._setSentinels([this._shouldBeSeekedSentinel,this._shouldBePausedSentinel])},_toComplete:function(){this._state=l.STATE.COMPLETE,this._emitEvent(l.EVENT.COMPLETE),this._setSentinels([])},_toEmpty:function(){this._wipe(),this._state=l.STATE.EMPTY},_toError:function(e){throw this._wipe(),this._state=l.STATE.ERROR,this._reportError(e),"ApiError: "+e},_setSentinelLimits:function(){this._sentinelLimits={pause:{maximumAttempts:2,successEvent:l.EVENT.SENTINEL_PAUSE,failureEvent:l.EVENT.SENTINEL_PAUSE_FAILURE,currentAttemptCount:0},seek:{maximumAttempts:2,successEvent:l.EVENT.SENTINEL_SEEK,failureEvent:l.EVENT.SENTINEL_SEEK_FAILURE,currentAttemptCount:0}}},_enterBufferingSentinel:function(){var e=!this._hasSentinelTimeChangedWithinTolerance&&!this._nearEndOfMedia;return 0===this.getCurrentTime()&&(e=this._trustZeroes&&e),void 0===this._enterBufferingSentinelAttemptCount&&(this._enterBufferingSentinelAttemptCount=0),e?this._enterBufferingSentinelAttemptCount++:this._enterBufferingSentinelAttemptCount=0,1===this._enterBufferingSentinelAttemptCount&&(e=!1),!!e&&(this._emitEvent(l.EVENT.SENTINEL_ENTER_BUFFERING),this._toBuffering(),!(this._enterBufferingSentinelAttemptCount=0))},_exitBufferingSentinel:function(){function e(e){return e._emitEvent(l.EVENT.SENTINEL_EXIT_BUFFERING),e._exitBuffering(),!0}return this._readyToPlayFrom&&this._mediaElement.paused?e(this):!!this._hasSentinelTimeChangedWithinTolerance&&e(this)},_shouldBeSeekedSentinel:function(){if(void 0===this._sentinelSeekTime)return!1;var e=this,t=this.getCurrentTime(),i=!1;return Math.abs(t-this._sentinelSeekTime)>this._seekSentinelTolerance?i=this._nextSentinelAttempt(this._sentinelLimits.seek,function(){e._mediaElement.currentTime=e._sentinelSeekTime}):this._sentinelIntervalNumber<3?this._sentinelSeekTime=t:this._sentinelSeekTime=void 0,i},_shouldBePausedSentinel:function(){var e=!1;if(this._hasSentinelTimeChangedWithinTolerance){var t=this._mediaElement;e=this._nextSentinelAttempt(this._sentinelLimits.pause,function(){t.pause()})}return e},_nextSentinelAttempt:function(e,t){var i,n;return e.currentAttemptCount+=1,(i=e.currentAttemptCount)===(n=e.maximumAttempts)+1&&this._emitEvent(e.failureEvent),i<=n&&(t(),this._emitEvent(e.successEvent),!0)},_endOfMediaSentinel:function(){return!(this._hasSentinelTimeChangedWithinTolerance||!this._nearEndOfMedia)&&(this._emitEvent(l.EVENT.SENTINEL_COMPLETE),this._onEndOfMedia(),!0)},_clearSentinels:function(){clearInterval(this._sentinelInterval)},_setSentinels:function(n){var r=this;this._clearSentinels(),this._sentinelIntervalNumber=0,this._lastSentinelTime=this.getCurrentTime(),this._sentinelInterval=setInterval(function(){r._sentinelIntervalNumber+=1;var e=r.getCurrentTime();r._hasSentinelTimeChangedWithinTolerance=.2<Math.abs(e-r._lastSentinelTime),r._nearEndOfMedia=r.getDuration()-(e||r._lastSentinelTime)<=1,r._lastSentinelTime=e;for(var t=0;t<n.length;t++){var i=n[t].call(r);if(0<r.getCurrentTime()&&(r._trustZeroes=!1),i)break}},1100)},_isReadyToPlayFrom:function(){return void 0!==this._readyToPlayFrom&&this._readyToPlayFrom},_setSeekSentinelTolerance:function(){this._seekSentinelTolerance=15,this._isLiveMedia()&&(this._seekSentinelTolerance=30)}}),i=new t;return e.prototype.getMediaPlayer=function(){return i},t}),define("antie/devices/mediaplayer/html5memoryleakunfix",["antie/devices/mediaplayer/html5"],function(e){"use strict";return e.prototype._unloadMediaSrc=function(){},e}),define("antie/devices/mediaplayer/html5seekfinishedemitevent",["antie/devices/mediaplayer/seekfinishedemitevent","antie/devices/mediaplayer/html5"],function(e,t){"use strict";return e(t),t}),define("antie/devices/mediaplayer/html5untyped",["antie/runtimecontext","antie/devices/device","antie/devices/mediaplayer/html5"],function(i,e,t){"use strict";var n=t.extend({init:function(){this._super()},_generateSourceElement:function(e){var t=i.getDevice()._createElement("source");return t.src=e,t}}),r=new n;return e.prototype.getMediaPlayer=function(){return r},n}),define("antie/devices/mediaplayer/live/none",["antie/devices/device","antie/devices/mediaplayer/mediaplayer"],function(e,t){"use strict";e.prototype.getLivePlayer=function(){return null},e.prototype.getLiveSupport=function(){return t.LIVE_SUPPORT.NONE}}),define("antie/devices/mediaplayer/live/playable",["antie/class","antie/runtimecontext","antie/devices/device","antie/devices/mediaplayer/mediaplayer"],function(e,t,i,n){"use strict";var r,s=e.extend({init:function(){this._mediaPlayer=t.getDevice().getMediaPlayer()},beginPlayback:function(){this._mediaPlayer.beginPlayback()},setSource:function(e,t,i){e=e===n.TYPE.AUDIO?n.TYPE.LIVE_AUDIO:n.TYPE.LIVE_VIDEO,this._mediaPlayer.setSource(e,t,i)},stop:function(){this._mediaPlayer.stop()},reset:function(){this._mediaPlayer.reset()},getState:function(){return this._mediaPlayer.getState()},getSource:function(){return this._mediaPlayer.getSource()},getMimeType:function(){return this._mediaPlayer.getMimeType()},addEventCallback:function(e,t){this._mediaPlayer.addEventCallback(e,t)},removeEventCallback:function(e,t){this._mediaPlayer.removeEventCallback(e,t)},removeAllEventCallbacks:function(){this._mediaPlayer.removeAllEventCallbacks()},getPlayerElement:function(){return this._mediaPlayer.getPlayerElement()}});i.prototype.getLivePlayer=function(){return r||(r=new s),r},i.prototype.getLiveSupport=function(){return n.LIVE_SUPPORT.PLAYABLE}}),define("antie/devices/mediaplayer/live/restartable",["antie/class","antie/runtimecontext","antie/devices/device","antie/devices/mediaplayer/mediaplayer"],function(e,t,i,o){"use strict";var n,r=e.extend({init:function(){this._mediaPlayer=t.getDevice().getMediaPlayer(),this._millisecondsUntilStartOfWindow=null},beginPlayback:function(){var e=t.getDevice().getConfig();e&&e.streaming&&e.streaming.overrides&&e.streaming.overrides.forceBeginPlaybackToEndOfWindow?this._mediaPlayer.beginPlaybackFrom(1/0):this._mediaPlayer.beginPlayback(),this._determineTimeUntilStartOfWindow()},beginPlaybackFrom:function(e){this._millisecondsUntilStartOfWindow=1e3*e,this._mediaPlayer.beginPlaybackFrom(e),this._determineTimeSpentBuffering()},setSource:function(e,t,i){e=e===o.TYPE.AUDIO?o.TYPE.LIVE_AUDIO:o.TYPE.LIVE_VIDEO,this._mediaPlayer.setSource(e,t,i)},pause:function(e){this._mediaPlayer.pause(),!0!==(e=e||{}).disableAutoResume&&this._autoResumeAtStartOfRange()},resume:function(){this._mediaPlayer.resume()},stop:function(){this._mediaPlayer.stop(),this._stopDeterminingTimeUntilStartOfWindow(),this._stopDeterminingTimeSpentBuffering()},reset:function(){this._mediaPlayer.reset()},getState:function(){return this._mediaPlayer.getState()},getSource:function(){return this._mediaPlayer.getSource()},getMimeType:function(){return this._mediaPlayer.getMimeType()},addEventCallback:function(e,t){this._mediaPlayer.addEventCallback(e,t)},removeEventCallback:function(e,t){this._mediaPlayer.removeEventCallback(e,t)},removeAllEventCallbacks:function(){this._mediaPlayer.removeAllEventCallbacks()},getPlayerElement:function(){return this._mediaPlayer.getPlayerElement()},_determineTimeUntilStartOfWindow:function(){this.addEventCallback(this,this._detectCurrentTimeCallback)},_stopDeterminingTimeUntilStartOfWindow:function(){this.removeEventCallback(this,this._detectCurrentTimeCallback)},_detectCurrentTimeCallback:function(e){e.state===o.STATE.PLAYING&&0<e.currentTime&&(this.removeEventCallback(this,this._detectCurrentTimeCallback),this._millisecondsUntilStartOfWindow=1e3*e.currentTime,this._determineTimeSpentBuffering())},_autoResumeAtStartOfRange:function(){var i=this;if(null!==this._millisecondsUntilStartOfWindow){var e=Math.max(0,this._millisecondsUntilStartOfWindow-8e3),n=(new Date).getTime(),r=setTimeout(function(){i.removeEventCallback(i,s),i._millisecondsUntilStartOfWindow=0,i.resume()},e);this.addEventCallback(this,s)}function s(e){if(e.state!==o.STATE.PAUSED){i.removeEventCallback(i,s),clearTimeout(r);var t=(new Date).getTime()-n;i._millisecondsUntilStartOfWindow-=t}}},_determineTimeSpentBuffering:function(){this._bufferingStarted=null,this.addEventCallback(this,this._determineBufferingCallback)},_stopDeterminingTimeSpentBuffering:function(){this.removeEventCallback(this,this._determineBufferingCallback)},_determineBufferingCallback:function(e){if(e.state===o.STATE.BUFFERING&&null===this._bufferingStarted)this._bufferingStarted=(new Date).getTime();else if(e.state!==o.STATE.BUFFERING&&null!==this._bufferingStarted){var t=(new Date).getTime()-this._bufferingStarted;this._millisecondsUntilStartOfWindow=Math.max(0,this._millisecondsUntilStartOfWindow-t),this._bufferingStarted=null}}});return i.prototype.getLivePlayer=function(){return n||(n=new r),n},i.prototype.getLiveSupport=function(){return o.LIVE_SUPPORT.RESTARTABLE},r}),define("antie/devices/mediaplayer/live/seekable",["antie/class","antie/runtimecontext","antie/devices/device","antie/devices/mediaplayer/mediaplayer"],function(e,t,i,r){"use strict";var n,s=e.extend({init:function(){this._mediaPlayer=t.getDevice().getMediaPlayer()},setSource:function(e,t,i){e=e===r.TYPE.AUDIO?r.TYPE.LIVE_AUDIO:r.TYPE.LIVE_VIDEO,this._mediaPlayer.setSource(e,t,i)},beginPlayback:function(){var e=t.getDevice().getConfig();e&&e.streaming&&e.streaming.overrides&&e.streaming.overrides.forceBeginPlaybackToEndOfWindow?this._mediaPlayer.beginPlaybackFrom(1/0):this._mediaPlayer.beginPlayback()},beginPlaybackFrom:function(e){this._mediaPlayer.beginPlaybackFrom(e)},playFrom:function(e){this._mediaPlayer.playFrom(e)},pause:function(e){e=e||{};var t=this._mediaPlayer.getCurrentTime()-this._mediaPlayer.getSeekableRange().start;e.disableAutoResume?this._mediaPlayer.pause():t<=8?(this._mediaPlayer._toPaused(),this._mediaPlayer._toPlaying()):(this._mediaPlayer.pause(),this._autoResumeAtStartOfRange())},resume:function(){this._mediaPlayer.resume()},stop:function(){this._mediaPlayer.stop()},reset:function(){this._mediaPlayer.reset()},getState:function(){return this._mediaPlayer.getState()},getSource:function(){return this._mediaPlayer.getSource()},getCurrentTime:function(){return this._mediaPlayer.getCurrentTime()},getSeekableRange:function(){return this._mediaPlayer.getSeekableRange()},getMimeType:function(){return this._mediaPlayer.getMimeType()},addEventCallback:function(e,t){this._mediaPlayer.addEventCallback(e,t)},removeEventCallback:function(e,t){this._mediaPlayer.removeEventCallback(e,t)},removeAllEventCallbacks:function(){this._mediaPlayer.removeAllEventCallbacks()},getPlayerElement:function(){return this._mediaPlayer.getPlayerElement()},_autoResumeAtStartOfRange:function(){var t=this,e=Math.max(0,this._mediaPlayer.getCurrentTime()-this._mediaPlayer.getSeekableRange().start-8),i=setTimeout(function(){t.removeEventCallback(t,n),t.resume()},1e3*e);function n(e){e.state!==r.STATE.PAUSED&&(t.removeEventCallback(t,n),clearTimeout(i))}this.addEventCallback(this,n)}});i.prototype.getLivePlayer=function(){return n||(n=new s),n},i.prototype.getLiveSupport=function(){return r.LIVE_SUPPORT.SEEKABLE}}),define("antie/devices/mediaplayer/mediaplayer",["antie/class","antie/callbackmanager","antie/runtimecontext"],function(e,t,i){"use strict";var n=e.extend({init:function(){this._callbackManager=new t},addEventCallback:function(e,t){this._callbackManager.addCallback(e,t)},removeEventCallback:function(e,t){this._callbackManager.removeCallback(e,t)},removeAllEventCallbacks:function(){this._callbackManager.removeAllCallbacks()},_emitEvent:function(e,t){var i={type:e,currentTime:this.getCurrentTime(),seekableRange:this.getSeekableRange(),duration:this.getDuration(),url:this.getSource(),mimeType:this.getMimeType(),state:this.getState()};if(t)for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);this._callbackManager.callAll(i)},CLAMP_OFFSET_FROM_END_OF_RANGE:1.1,_getClampedTime:function(e){var t=this.getSeekableRange(),i=this._getClampOffsetFromConfig(),n=Math.max(t.end-i,t.start);return e<t.start?t.start:n<e?n:e},CURRENT_TIME_TOLERANCE:1,_isNearToCurrentTime:function(e){var t=this.getCurrentTime(),i=this._getClampedTime(e);return Math.abs(t-i)<=this.CURRENT_TIME_TOLERANCE},setSource:function(){throw new Error("setSource method has not been implemented")},playFrom:function(){throw new Error("playFrom method has not been implemented")},beginPlayback:function(){throw new Error("beginPlayback method has not been implemented")},beginPlaybackFrom:function(){throw new Error("beginPlaybackFrom method has not been implemented")},pause:function(){throw new Error("pause method has not been implemented")},resume:function(){throw new Error("resume method has not been implemented")},stop:function(){throw new Error("stop method has not been implemented")},reset:function(){throw new Error("reset method has not been implemented")},getSource:function(){throw new Error("getSource method has not been implemented")},getMimeType:function(){throw new Error("getMimeType method has not been implemented")},getCurrentTime:function(){throw new Error("getCurrentTime method has not been implemented")},getSeekableRange:function(){throw new Error("getSeekableRange method has not been implemented")},getDuration:function(){switch(this.getState()){case n.STATE.STOPPED:case n.STATE.ERROR:return;default:return this._isLiveMedia()?1/0:this._getMediaDuration()}},_getMediaDuration:function(){throw new Error("getMediaDuration method has not been implemented")},getState:function(){throw new Error("getState method has not been implemented")},getPlayerElement:function(){throw new Error("getPlayerElement method has not been implemented")},_getClampOffsetFromConfig:function(){var e,t=i.getDevice().getConfig();return t&&t.streaming&&t.streaming.overrides&&(e=t.streaming.overrides.clampOffsetFromEndOfRange),void 0!==e?e:this.CLAMP_OFFSET_FROM_END_OF_RANGE},_isLiveMedia:function(){return this._type===n.TYPE.LIVE_VIDEO||this._type===n.TYPE.LIVE_AUDIO}});return n.STATE={EMPTY:"EMPTY",STOPPED:"STOPPED",BUFFERING:"BUFFERING",PLAYING:"PLAYING",PAUSED:"PAUSED",COMPLETE:"COMPLETE",ERROR:"ERROR"},n.EVENT={STOPPED:"stopped",BUFFERING:"buffering",PLAYING:"playing",PAUSED:"paused",COMPLETE:"complete",ERROR:"error",STATUS:"status",SENTINEL_ENTER_BUFFERING:"sentinel-enter-buffering",SENTINEL_EXIT_BUFFERING:"sentinel-exit-buffering",SENTINEL_PAUSE:"sentinel-pause",SENTINEL_PLAY:"sentinel-play",SENTINEL_SEEK:"sentinel-seek",SENTINEL_COMPLETE:"sentinel-complete",SENTINEL_PAUSE_FAILURE:"sentinel-pause-failure",SENTINEL_SEEK_FAILURE:"sentinel-seek-failure",SEEK_ATTEMPTED:"seek-attempted",SEEK_FINISHED:"seek-finished"},n.TYPE={VIDEO:"video",AUDIO:"audio",LIVE_VIDEO:"live-video",LIVE_AUDIO:"live-audio"},n.LIVE_SUPPORT={NONE:"none",PLAYABLE:"playable",RESTARTABLE:"restartable",SEEKABLE:"seekable"},n}),define("antie/devices/mediaplayer/samsung_maple",["antie/devices/device","antie/devices/mediaplayer/mediaplayer","antie/runtimecontext"],function(e,n,i){"use strict";var t=n.extend({init:function(){this._super(),this._state=n.STATE.EMPTY,this._playerPlugin=document.getElementById("playerPlugin"),this._deferSeekingTo=null,this._postBufferingState=null,this._tryingToPause=!1,this._currentTimeKnown=!1},setSource:function(e,t,i){this.getState()===n.STATE.EMPTY?(this._type=e,this._source=t,this._mimeType=i,this._registerEventHandlers(),this._toStopped()):this._toError("Cannot set source unless in the '"+n.STATE.EMPTY+"' state")},resume:function(){switch(this._postBufferingState=n.STATE.PLAYING,this.getState()){case n.STATE.PLAYING:break;case n.STATE.BUFFERING:this._tryingToPause&&(this._tryingToPause=!1,this._toPlaying());break;case n.STATE.PAUSED:this._playerPlugin.Resume(),this._toPlaying();break;default:this._toError("Cannot resume while in the '"+this.getState()+"' state")}},playFrom:function(e){this._postBufferingState=n.STATE.PLAYING;var t=this._range?this._getClampedTimeForPlayFrom(e):e;switch(this.getState()){case n.STATE.BUFFERING:this._deferSeekingTo=t;break;case n.STATE.PLAYING:this._toBuffering(),this._currentTimeKnown?this._isNearToCurrentTime(t)?this._toPlaying():this._seekToWithFailureStateTransition(t):this._deferSeekingTo=t;break;case n.STATE.PAUSED:this._toBuffering(),this._currentTimeKnown?this._isNearToCurrentTime(t)?(this._playerPlugin.Resume(),this._toPlaying()):(this._seekToWithFailureStateTransition(t),this._playerPlugin.Resume()):this._deferSeekingTo=t;break;case n.STATE.COMPLETE:this._playerPlugin.Stop(),this._setDisplayFullScreenForVideo(),this._playerPlugin.ResumePlay(this._wrappedSource(),t),this._toBuffering();break;default:this._toError("Cannot playFrom while in the '"+this.getState()+"' state")}},beginPlayback:function(){switch(this._postBufferingState=n.STATE.PLAYING,this.getState()){case n.STATE.STOPPED:this._toBuffering(),this._setDisplayFullScreenForVideo(),this._playerPlugin.Play(this._wrappedSource());break;default:this._toError("Cannot beginPlayback while in the '"+this.getState()+"' state")}},beginPlaybackFrom:function(e){this._postBufferingState=n.STATE.PLAYING;var t=this._range?this._getClampedTimeForPlayFrom(e):e;switch(this.getState()){case n.STATE.STOPPED:this._setDisplayFullScreenForVideo(),this._playerPlugin.ResumePlay(this._wrappedSource(),t),this._toBuffering();break;default:this._toError("Cannot beginPlayback while in the '"+this.getState()+"' state")}},pause:function(){switch(this._postBufferingState=n.STATE.PAUSED,this.getState()){case n.STATE.BUFFERING:case n.STATE.PAUSED:break;case n.STATE.PLAYING:this._tryPauseWithStateTransition();break;default:this._toError("Cannot pause while in the '"+this.getState()+"' state")}},stop:function(){switch(this.getState()){case n.STATE.STOPPED:break;case n.STATE.BUFFERING:case n.STATE.PLAYING:case n.STATE.PAUSED:case n.STATE.COMPLETE:this._stopPlayer(),this._toStopped();break;default:this._toError("Cannot stop while in the '"+this.getState()+"' state")}},reset:function(){switch(this.getState()){case n.STATE.EMPTY:break;case n.STATE.STOPPED:case n.STATE.ERROR:this._toEmpty();break;default:this._toError("Cannot reset while in the '"+this.getState()+"' state")}},getSource:function(){return this._source},getMimeType:function(){return this._mimeType},getCurrentTime:function(){return this.getState()===n.STATE.STOPPED?void 0:this._currentTime},getSeekableRange:function(){return this._range},_getMediaDuration:function(){if(this._range)return this._range.end},getState:function(){return this._state},getPlayerElement:function(){return this._playerPlugin},_onFinishedBuffering:function(){this.getState()===n.STATE.BUFFERING&&null===this._deferSeekingTo&&(this._postBufferingState===n.STATE.PAUSED?this._tryPauseWithStateTransition():this._toPlaying())},_onDeviceError:function(e){this._reportError(e)},_onDeviceBuffering:function(){this.getState()===n.STATE.PLAYING&&this._toBuffering()},_onEndOfMedia:function(){this._toComplete()},_stopPlayer:function(){this._playerPlugin.Stop(),this._currentTimeKnown=!1},_tryPauseWithStateTransition:function(){var e=this._isSuccessCode(this._playerPlugin.Pause());e&&this._toPaused(),this._tryingToPause=!e},_onStatus:function(){this.getState()===n.STATE.PLAYING&&this._emitEvent(n.EVENT.STATUS)},_onMetadata:function(){this._range={start:0,end:this._playerPlugin.GetDuration()/1e3}},_onCurrentTime:function(e){this._currentTime=e/1e3,this._onStatus(),this._currentTimeKnown=!0,null!==this._deferSeekingTo&&this._deferredSeek(),this._tryingToPause&&this._tryPauseWithStateTransition()},_deferredSeek:function(){var e=this._getClampedTimeForPlayFrom(this._deferSeekingTo);this._isNearToCurrentTime(e)?(this._toPlaying(),this._deferSeekingTo=null):this._seekTo(e)&&(this._deferSeekingTo=null)},_getClampedTimeForPlayFrom:function(e){var t=this._getClampedTime(e);return t!==e&&i.getDevice().getLogger().debug("playFrom "+e+" clamped to "+t+" - seekable range is { start: "+this._range.start+", end: "+this._range.end+" }"),t},_registerEventHandlers:function(){var t=this;window.SamsungMapleOnRenderError=function(){t._onDeviceError("Media element emitted OnRenderError")},this._playerPlugin.OnRenderError="SamsungMapleOnRenderError",window.SamsungMapleOnConnectionFailed=function(){t._onDeviceError("Media element emitted OnConnectionFailed")},this._playerPlugin.OnConnectionFailed="SamsungMapleOnConnectionFailed",window.SamsungMapleOnNetworkDisconnected=function(){t._onDeviceError("Media element emitted OnNetworkDisconnected")},this._playerPlugin.OnNetworkDisconnected="SamsungMapleOnNetworkDisconnected",window.SamsungMapleOnStreamNotFound=function(){t._onDeviceError("Media element emitted OnStreamNotFound")},this._playerPlugin.OnStreamNotFound="SamsungMapleOnStreamNotFound",window.SamsungMapleOnAuthenticationFailed=function(){t._onDeviceError("Media element emitted OnAuthenticationFailed")},this._playerPlugin.OnAuthenticationFailed="SamsungMapleOnAuthenticationFailed",window.SamsungMapleOnRenderingComplete=function(){t._onEndOfMedia()},this._playerPlugin.OnRenderingComplete="SamsungMapleOnRenderingComplete",window.SamsungMapleOnBufferingStart=function(){t._onDeviceBuffering()},this._playerPlugin.OnBufferingStart="SamsungMapleOnBufferingStart",window.SamsungMapleOnBufferingComplete=function(){t._onFinishedBuffering()},this._playerPlugin.OnBufferingComplete="SamsungMapleOnBufferingComplete",window.SamsungMapleOnStreamInfoReady=function(){t._onMetadata()},this._playerPlugin.OnStreamInfoReady="SamsungMapleOnStreamInfoReady",window.SamsungMapleOnCurrentPlayTime=function(e){t._onCurrentTime(e)},this._playerPlugin.OnCurrentPlayTime="SamsungMapleOnCurrentPlayTime",this._onWindowHide=function(){t.stop()},window.addEventListener("hide",this._onWindowHide,!1),window.addEventListener("unload",this._onWindowHide,!1)},_unregisterEventHandlers:function(){for(var e=["SamsungMapleOnRenderError","SamsungMapleOnRenderingComplete","SamsungMapleOnBufferingStart","SamsungMapleOnBufferingComplete","SamsungMapleOnStreamInfoReady","SamsungMapleOnCurrentPlayTime","SamsungMapleOnConnectionFailed","SamsungMapleOnNetworkDisconnected","SamsungMapleOnStreamNotFound","SamsungMapleOnAuthenticationFailed"],t=0;t<e.length;t++){var i=e[t],n=i.substring("SamsungMaple".length);this._playerPlugin[n]=void 0,delete window[i]}window.removeEventListener("hide",this._onWindowHide,!1),window.removeEventListener("unload",this._onWindowHide,!1)},_wipe:function(){this._stopPlayer(),this._type=void 0,this._source=void 0,this._mimeType=void 0,this._currentTime=void 0,this._range=void 0,this._deferSeekingTo=null,this._tryingToPause=!1,this._currentTimeKnown=!1,this._unregisterEventHandlers()},_seekTo:function(e){var t=e-this.getCurrentTime(),i=this._isSuccessCode(this._jump(t));return i&&(this._currentTime=e),i},_seekToWithFailureStateTransition:function(e){this._seekTo(e)||this._toPlaying()},_jump:function(e){return 0<e?this._playerPlugin.JumpForward(e):this._playerPlugin.JumpBackward(Math.abs(e))},_isHlsMimeType:function(){var e=this._mimeType.toLowerCase();return"application/vnd.apple.mpegurl"===e||"application/x-mpegurl"===e},_wrappedSource:function(){var e=this._source;return this._isHlsMimeType()&&(e+="|COMPONENT=HLS"),e},_reportError:function(e){i.getDevice().getLogger().error(e),this._emitEvent(n.EVENT.ERROR,{errorMessage:e})},_toStopped:function(){this._currentTime=0,this._range=void 0,this._state=n.STATE.STOPPED,this._emitEvent(n.EVENT.STOPPED)},_toBuffering:function(){this._state=n.STATE.BUFFERING,this._emitEvent(n.EVENT.BUFFERING)},_toPlaying:function(){this._state=n.STATE.PLAYING,this._emitEvent(n.EVENT.PLAYING)},_toPaused:function(){this._state=n.STATE.PAUSED,this._emitEvent(n.EVENT.PAUSED)},_toComplete:function(){this._state=n.STATE.COMPLETE,this._emitEvent(n.EVENT.COMPLETE)},_toEmpty:function(){this._wipe(),this._state=n.STATE.EMPTY},_toError:function(e){throw this._wipe(),this._state=n.STATE.ERROR,this._reportError(e),"ApiError: "+e},_setDisplayFullScreenForVideo:function(){if(this._type===n.TYPE.VIDEO){var e=i.getDevice().getScreenSize();this._playerPlugin.SetDisplayArea(0,0,e.width,e.height)}},_isSuccessCode:function(e){return e&&-1!==e},CURRENT_TIME_TOLERANCE:2.5}),r=new t;return e.prototype.getMediaPlayer=function(){return r},t}),define("antie/devices/mediaplayer/seekfinishedemitevent",["antie/devices/mediaplayer/mediaplayer","antie/runtimecontext"],function(o,a){"use strict";return function(e){var s=e.prototype.setSource;e.prototype.setSource=function(e,t,i){this._count=0,this.getState()===o.STATE.EMPTY&&(this._emitEvent(o.EVENT.SEEK_ATTEMPTED),this._seekFinished=!1);var n=a.getDevice().getConfig().restartTimeout,r=this;this._timeoutHappened=!1,n?setTimeout(function(){r._timeoutHappened=!0},n):this._timeoutHappened=!0,s.call(this,e,t,i)};var n=e.prototype._onStatus;e.prototype._onStatus=function(e){n.call(this,e);var t=Math.abs(this.getCurrentTime()-this._sentinelSeekTime)<=this._seekSentinelTolerance;void 0===this._sentinelSeekTime&&(t=!0);var i=this.getState()===o.STATE.PLAYING&&t;i&&5<=this._count&&this._timeoutHappened&&!this._seekFinished?(this._emitEvent(o.EVENT.SEEK_FINISHED),this._seekFinished=!0):i?this._count++:this._count=0}}}),define("antie/devices/parentalguidance/appdefaultpghandler",["antie/devices/browserdevice","antie/devices/parentalguidance/basepghandler"],function(e,t){"use strict";var i=t.extend({isChallengeActive:function(){if(this._appHandler)return this._appHandler.isChallengeActive();throw new Error("No default parental guidance handler is registered")},showChallenge:function(e,t){if(this._appHandler){if("function"!=typeof t.onGuidanceChallengeResponse)throw new Error("The guidanceChallengeResponseCallback object should contain an onGuidanceChallengeResponsefunction. The appHandler should call this function with a value from pgchallengeresponse.js as the first parameter");return this._appHandler.showChallenge(e,t)}throw new Error("No default parental guidance handler is registered")},supportsMessage:function(){return!0},isConfigurable:function(){return!0}});e.prototype.parentalGuidanceHelper=new i,e.prototype.registerAppPgHandler=function(e){this.parentalGuidanceHelper._appHandler=e}}),define("antie/devices/parentalguidance/basepghandler",["antie/class"],function(e){"use strict";return e.extend({isChallengeActive:function(){throw new Error("IsChallengeActive method has not been implemented.")},showChallenge:function(){throw new Error("ShowChallenge method has not been implemented.")},supportsMessage:function(){throw new Error("SupportsMessage method has not been implemented.")},isConfigurable:function(){throw new Error("IsConfigurable method has not been implemented.")}})}),define("antie/devices/parentalguidance/pgchallengeresponse",[],function(){"use strict";return{NOT_AUTHORISED:0,AUTHORISED:1,ERROR:2,CHALLENGE_NOT_SET:3}}),define("antie/devices/parentalguidance/youviewpghandler",["antie/devices/browserdevice","antie/devices/parentalguidance/basepghandler","antie/devices/parentalguidance/pgchallengeresponse"],function(e,t,r){"use strict";var i;youview.parentalControls.getParentalControlSettings().then(function(e){i=e.parentalControlsEnabled});var n=t.extend({isChallengeActive:function(){return i},showChallenge:function(e,t){var i=youview.parentalControls.PinPromptResponseValue,n=t.onGuidanceChallengeResponse;youview.parentalControls.showPinPrompt().then(function(e){switch(e){case i.CORRECT:n(r.AUTHORISED);break;case i.INCORRECT:case i.CANCELLED_BY_USER:n(r.NOT_AUTHORISED);break;default:n(r.ERROR)}},function(){n(r.ERROR)})},supportsMessage:function(){return!1},isConfigurable:function(){return!1}});e.prototype.parentalGuidanceHelper=new n,e.prototype.registerAppPgHandler=function(){}}),define("antie/devices/ps3base",["antie/devices/browserdevice","antie/events/networkstatuschangeevent"],function(e,n){"use strict";var t=/(<\/[a-zA-Z]+>)\s/g;return window.console||(window.console={log:function(){}}),e.extend({init:function(e){this._super(e),this._nativeCallbacks=[],this.addNativeEventListener("networkStatusChange",function(e){var t="connected"===e.newState?n.NETWORK_STATUS_ONLINE:n.NETWORK_STATUS_OFFLINE;i._application.bubbleEvent(new n(t))});var i=this;this.nativeCommand("getDeviceInfo",null,function(e){i.outputPortType=e.portType,i.nativeCommand("dismissSplash")}),this._endtag=t},nativeCallback:function(e){var t=this.decodeJson(e);var i=this._nativeCallbacks[t.command];if(i&&0<i.length)switch(t.command){case"networkStatusChange":case"contentAvailable":case"playerStatusChange":case"getContentParameters":for(var n=0;n<i.length;n++)i[n](t);break;default:i.shift(1)(t)}},addNativeEventListener:function(e,t){var i;(i=this._nativeCallbacks[e])?this.removeNativeEventListener(e,t):i=this._nativeCallbacks[e]=[],i.push(t)},removeNativeEventListener:function(e,t){var i=this._nativeCallbacks[e];if(i)for(var n=0;n<i.length;n++)if(i[n]===t)return void i.splice(n,1)},nativeCommand:function(e,t,i){var n;(n=this._nativeCallbacks[e])||(n=this._nativeCallbacks[e]=[]),i&&n.push(i);var r={command:e};if(t)for(var s in t)t.hasOwnProperty(s)&&(r[s]=t[s]);var o=this.encodeJson(r);window.external&&window.external.user&&window.external.user(o)},loadAuthenticatedURL:function(e,i){var n="",r=0,s=0,o=this;function a(e){function t(e){var t=document.createElement("div");return t.innerHTML=e,t.innerText}s=parseInt(e.messageSize,10),n+=e.contentDocument,(r+=parseInt(e.chunkSize,10))<s||l&&(window.clearTimeout(l),o.removeNativeEventListener("getContentParameters",a),"ok"===e.status?i.onLoad(t(n)):i.onError(t(n)))}var l=window.setTimeout(function(){l=0,i.onError("timeout"),o.removeNativeEventListener("getContentParameters",a)},i.timeout||1e4);this.addNativeEventListener("getContentParameters",a),this.nativeCommand("getContentParameters",{parameterUrl:e})},isHDEnabled:function(){return"HDMI"===this.outputPortType}})}),define("antie/devices/sanitiser",[],function(){"use strict";function e(e){this._string=e}return e.prototype.setElementContent=function(e){e.innerHTML=this._string},e}),define("antie/devices/sanitisers/whitelisted",["antie/devices/sanitiser"],function(e){"use strict";e.prototype={_entities:{"&ldquo;":"“","&rdguo;":"”","&lsquo;":"‘","&rsquo;":"’","&laquo;":"«","&raquo;":"»","&lsaquo;":"‹","&rsaquo;":"›","&lt;":"<","&gt;":">","&nbsp;":" ","&bull;":"•","&deg;":"°","&hellip;":"…","&trade;":"™","&copy;":"©","&reg;":"®","&mdash;":"—","&ndash;":"–"},_whitelist:["p","ul","li","h1","h2","h3","h4","h5","h6","div","br"],setElementContent:function(e){var t=this._createDom();this._clearElement(e),this._processDomElement(t.firstChild,e)},_clearElement:function(e){for(var t=e.childNodes.length-1;0<=t;t--)e.removeChild(e.childNodes[t])},_createDom:function(){var e,t="<content>"+this._string+"</content>";(t=this._replaceEntities(t),window.DOMParser)?e=(new DOMParser).parseFromString(t,"text/xml"):((e=new ActiveXObject("Microsoft.XMLDOM")).async=!1,e.loadXML(t));return e},_replaceEntities:function(e){var t,i={},n=e.match(/&[a-zA-Z0-9]*;/g);if(e=e.replace(/&(?![a-zA-Z]*;)/g,"&amp;"),null===n)return e;for(var r=0;r<n.length;r++)void 0===i[n[r]]&&void 0!==this._entities[n[r]]&&(i[n[r]]=!0,t=new RegExp(n[r],"g"),e=e.replace(t,this._entities[n[r]]));return e},_processDomElement:function(e,t){for(var i,n=e.childNodes,r=0;r<n.length;r++)n[r].tagName?-1!==this._whitelist.indexOf(n[r].tagName)&&(i=document.createElement(n[r].tagName),i=this._processDomElement(n[r],i),t.appendChild(i)):(i=document.createTextNode(n[r].data),t.appendChild(i));return t}}}),define("antie/devices/storage/cookie",["antie/devices/browserdevice","antie/storageprovider"],function(n,e){"use strict";var i={},a=366,t=document.location.pathname.split("/");t.pop();var l=t.join("/")+"/";function r(e,t,i,n){t=encodeURIComponent(t),i=i||a;var r=new Date;r.setTime(r.getTime()+24*i*60*60*1e3);var s=n.path||l,o=[e+"="+t,"expires="+r.toGMTString(),"path="+(n.isPathless?"/":s)];n.domain&&o.push("domain="+n.domain),document.cookie=o.join("; ")}var s=e.extend({init:function(e,t){this._super(),this._namespace=e,this._opts=t||{};var i=function(e){for(var t=e+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var r=i[n];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return decodeURIComponent(r.substring(t.length,r.length))}return null}(e);i&&(this._valueCache=n.prototype.decodeJson(i),this._valueCache?this._save():this._valueCache={})},setItem:function(e,t){this._super(e,t),this._save()},removeItem:function(e){this._super(e),this._save()},clear:function(){this._super(),this._save(),delete i[this._namespace]},_isEmpty:function(){var e;for(e in this._valueCache)if(this._valueCache.hasOwnProperty(e))return!1;return!0},_save:function(){if(this._isEmpty())t=this._namespace,i=this._opts,r(t,"",-1,i);else{var e=n.prototype.encodeJson(this._valueCache);r(this._namespace,e,void 0,this._opts)}var t,i}});n.prototype.getPersistentStorage=function(e,t){return i[e]||(i[e]=new s(e,t)),i[e]}}),define("antie/devices/storage/session",["antie/storageprovider"],function(e){"use strict";var t={},i=e.extend({});return i.getNamespace=function(e){return t[e]||(t[e]=new i),t[e]},i}),define("antie/devices/storage/xboxpls",["antie/devices/browserdevice","antie/storageprovider"],function(n,e){"use strict";var t={},i=e.extend({init:function(){this._storage=Windows.Storage.ApplicationData.current.localSettings.values},getItem:function(e){if(this._storage.hasKey(e)){var t=this._storage.lookup(e),i=n.prototype.decodeJson(t);if(null===i)return;return i}},setItem:function(e,t){var i=n.prototype.encodeJson(t);this._storage.insert(e,i)},removeItem:function(e){this._storage.insert(e,null)},clear:function(){this._storage.clear()}});n.prototype.getPersistentStorage=function(e){return t[e]||(t[e]=new i(e)),t[e]}}),define("antie/devices/wiiu",["antie/devices/browserdevice","antie/events/keyevent"],function(e,i){"use strict";return e.extend({init:function(e){this._super(e)},addKeyEventListener:function(){this._registerWiiUGamePadInputControls(),this._registerWiiRemoteInputControls()},_registerWiiUGamePadInputControls:function(){var t=this,e=nwf.input.WiiUGamePad.getController();e.buttons.addEventListener(nwf.events.ButtonControlEvent.PRESS,function(e){t._onGamePadButtonPress(e)},this),e.buttons.addEventListener(nwf.events.ButtonControlEvent.RELEASE,function(e){t._onGamePadButtonRelease(e)},this)},_onGamePadButtonPress:function(e){var t=nwf.input.ControllerButton;switch(e.button){case t.GAMEPAD_A:this._application.bubbleEvent(new i("keydown",i.VK_ENTER));break;case t.GAMEPAD_B:this._application.bubbleEvent(new i("keydown",i.VK_BACK));break;case t.GAMEPAD_UP:this._application.bubbleEvent(new i("keydown",i.VK_UP));break;case t.GAMEPAD_DOWN:this._application.bubbleEvent(new i("keydown",i.VK_DOWN));break;case t.GAMEPAD_LEFT:this._application.bubbleEvent(new i("keydown",i.VK_LEFT));break;case t.GAMEPAD_RIGHT:this._application.bubbleEvent(new i("keydown",i.VK_RIGHT))}},_onGamePadButtonRelease:function(e){var t=nwf.input.ControllerButton;switch(e.button){case t.GAMEPAD_A:this._application.bubbleEvent(new i("keyup",i.VK_ENTER));break;case t.GAMEPAD_B:this._application.bubbleEvent(new i("keyup",i.VK_BACK));break;case t.GAMEPAD_UP:this._application.bubbleEvent(new i("keyup",i.VK_UP));break;case t.GAMEPAD_DOWN:this._application.bubbleEvent(new i("keyup",i.VK_DOWN));break;case t.GAMEPAD_LEFT:this._application.bubbleEvent(new i("keyup",i.VK_LEFT));break;case t.GAMEPAD_RIGHT:this._application.bubbleEvent(new i("keyup",i.VK_RIGHT))}},_registerWiiRemoteInputControls:function(){var t=this,e=nwf.input.WiiRemote.getController(nwf.input.WiiRemote.REMOTE_1);e.buttons.addEventListener(nwf.events.ButtonControlEvent.PRESS,function(e){t._onWiiRemoteButtonPress(e)},this),e.buttons.addEventListener(nwf.events.ButtonControlEvent.RELEASE,function(e){t._onWiiRemoteButtonRelease(e)},this)},_onWiiRemoteButtonPress:function(e){var t=nwf.input.ControllerButton;switch(e.button){case t.WII_REMOTE_A:this._application.bubbleEvent(new i("keydown",i.VK_ENTER));break;case t.WII_REMOTE_B:this._application.bubbleEvent(new i("keydown",i.VK_BACK));break;case t.WII_REMOTE_UP:this._application.bubbleEvent(new i("keydown",i.VK_UP));break;case t.WII_REMOTE_DOWN:this._application.bubbleEvent(new i("keydown",i.VK_DOWN));break;case t.WII_REMOTE_LEFT:this._application.bubbleEvent(new i("keydown",i.VK_LEFT));break;case t.WII_REMOTE_RIGHT:this._application.bubbleEvent(new i("keydown",i.VK_RIGHT))}},_onWiiRemoteButtonRelease:function(e){var t=nwf.input.ControllerButton;switch(e.button){case t.WII_REMOTE_A:this._application.bubbleEvent(new i("keyup",i.VK_ENTER));break;case t.WII_REMOTE_B:this._application.bubbleEvent(new i("keyup",i.VK_BACK));break;case t.WII_REMOTE_UP:this._application.bubbleEvent(new i("keyup",i.VK_UP));break;case t.WII_REMOTE_DOWN:this._application.bubbleEvent(new i("keyup",i.VK_DOWN));break;case t.WII_REMOTE_LEFT:this._application.bubbleEvent(new i("keyup",i.VK_LEFT));break;case t.WII_REMOTE_RIGHT:this._application.bubbleEvent(new i("keyup",i.VK_RIGHT))}}})}),define("antie/events/afteralignevent",["antie/events/event"],function(e){"use strict";return e.extend({init:function(e,t){this.target=e,this.alignedIndex=t,this._super("afteralign")}})}),define("antie/events/beforealignevent",["antie/events/event"],function(e){"use strict";return e.extend({init:function(e,t){this.target=e,this.alignedIndex=t,this._super("beforealign")}})}),define("antie/events/beforeselecteditemchangeevent",["antie/events/event"],function(e){"use strict";return e.extend({init:function(e,t,i){this.target=e,this.item=t,this.index=i,this._super("beforeselecteditemchange")}})}),define("antie/events/blurevent",["antie/events/event"],function(e){"use strict";return e.extend({init:function(e){this.target=e,this._super("blur")}})}),define("antie/events/componentevent",["antie/events/event"],function(e){"use strict";return e.extend({init:function(e,t,i,n,r,s){this.container=t,this.component=i,this.args=n,this.state=r,this.fromBack=s,this._super(e)}})}),define("antie/events/databoundevent",["antie/events/event"],function(e){"use strict";return e.extend({init:function(e,t,i,n){this.target=t,this.iterator=i,this.error=n,this._super(e)}})}),define("antie/events/event",["antie/class","antie/runtimecontext"],function(e,r){"use strict";var t=0,s={};return e.extend({init:function(e){this.type=e,this._propagationStopped=!1,this._defaultPrevented=!1,t++},stopPropagation:function(){this._propagationStopped=!0,--t||this.fireEvent("emptyStack")},isPropagationStopped:function(){return this._propagationStopped},preventDefault:function(){this._defaultPrevented=!0},isDefaultPrevented:function(){return this._defaultPrevented},addEventListener:function(e,t){var i=s[e];void 0===i&&(i=[],s[e]=i),~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i,n=s[e];if(!n)return r.getDevice().getLogger().error("Attempting to remove non-existent event listener"),!1;~(i=n.indexOf(t))&&n.splice(i,1)},fireEvent:function(e){var t=s[e];if(t)for(var i in t)t.hasOwnProperty(i)&&t[i]()}})}),define("antie/events/focusdelayevent",["antie/events/event"],function(e){"use strict";return e.extend({init:function(e){this.target=e,this._super("focusdelay")}})}),define("antie/events/focusevent",["antie/events/event"],function(e){"use strict";return e.extend({init:function(e){this.target=e,this._super("focus")}})}),define("antie/events/keyevent",["antie/events/event"],function(e){"use strict";var n=e.extend({init:function(e,t){var i;(this.keyCode=t)>=n.VK_0&&t<=n.VK_9?(i=t-n.VK_0,this.keyChar=String.fromCharCode("0".charCodeAt(0)+i)):t===n.VK_SPACE?this.keyChar=" ":t>=n.VK_A&&t<=n.VK_Z&&(i=t-n.VK_A,this.keyChar=String.fromCharCode("A".charCodeAt(0)+i)),this._super(e)}});return n.VK_ENTER=13,n.VK_LEFT=37,n.VK_UP=38,n.VK_RIGHT=39,n.VK_DOWN=40,n.VK_SPACE=32,n.VK_BACK_SPACE=8,n.VK_0=48,n.VK_1=49,n.VK_2=50,n.VK_3=51,n.VK_4=52,n.VK_5=53,n.VK_6=54,n.VK_7=55,n.VK_8=56,n.VK_9=57,n.VK_A=65,n.VK_B=66,n.VK_C=67,n.VK_D=68,n.VK_E=69,n.VK_F=70,n.VK_G=71,n.VK_H=72,n.VK_I=73,n.VK_J=74,n.VK_K=75,n.VK_L=76,n.VK_M=77,n.VK_N=78,n.VK_O=79,n.VK_P=80,n.VK_Q=81,n.VK_R=82,n.VK_S=83,n.VK_T=84,n.VK_U=85,n.VK_V=86,n.VK_W=87,n.VK_X=88,n.VK_Y=89,n.VK_Z=90,n.VK_RED=403,n.VK_GREEN=404,n.VK_YELLOW=405,n.VK_BLUE=406,n.VK_HELP=156,n.VK_SEARCH=112,n.VK_AUDIODESCRIPTION=113,n.VK_HD=114,n.VK_PLAY=415,n.VK_PAUSE=19,n.VK_PLAY_PAUSE=402,n.VK_STOP=413,n.VK_PREV=424,n.VK_NEXT=425,n.VK_FAST_FWD=417,n.VK_REWIND=412,n.VK_INFO=457,n.VK_SUBTITLE=460,n.VK_BACK=461,n.VK_VOLUME_UP=447,n.VK_VOLUME_DOWN=448,n.VK_MUTE=449,n}),define("antie/events/mediaerrorevent",["antie/events/mediaevent"],function(e){"use strict";return e.extend({init:function(e,t){this.code=t,this._super("error",e)}})}),define("antie/events/mediaevent",["antie/events/event"],function(e){"use strict";var t=e.extend({init:function(e,t){this.target=t,this._super(e)}});return t.TYPES=["loadstart","progress","suspend","abort","emptied","stalled","play","pause","loadedmetadata","loadeddata","waiting","playing","canplay","canplaythrough","seeking","seeked","timeupdate","ended","ratechange","durationchange","volumechange"],t}),define("antie/events/mediasourceerrorevent",["antie/events/mediaerrorevent"],function(e){"use strict";return e.extend({init:function(e,t,i,n){this.url=i,this.last=n,this._super(e,t)}})}),define("antie/events/networkstatuschangeevent",["antie/events/event"],function(e){"use strict";var t=e.extend({init:function(e){this.networkStatus=e,this._super("networkstatuschange")}});return t.NETWORK_STATUS_OFFLINE=0,t.NETWORK_STATUS_ONLINE=1,t}),define("antie/events/pagechangeevent",["antie/events/event"],function(e){"use strict";return e.extend({init:function(e,t){this.countername=e,this.labels=t,this._super("pagechange"),window.log&&window.log("Page change:",e,t)}})}),define("antie/events/selecteditemchangeevent",["antie/events/event"],function(e){"use strict";return e.extend({init:function(e,t,i){this.target=e,this.item=t,this.index=i,this._super("selecteditemchange")}})}),define("antie/events/selectevent",["antie/events/event"],function(e){"use strict";return e.extend({init:function(e){this.target=e,this._super("select")}})}),define("antie/events/sliderchangeevent",["antie/events/event"],function(e){"use strict";return e.extend({init:function(e,t,i){this._super(e),this.target=t,this.value=i}})}),define("antie/events/textchangeevent",["antie/events/event"],function(e){"use strict";return e.extend({init:function(e,t,i,n){this.target=e,this.text=t,this.button=i,this.multitap=n,this._super("textchange")}})}),define("antie/events/textpagechangeevent",["antie/events/event"],function(e){"use strict";return e.extend({init:function(e,t){this.target=e,this.page=t,this._super("textpagechange")}})}),define("antie/events/tunerpresentingevent",["antie/events/event"],function(e){"use strict";return e.extend({init:function(e){this.channel=e,this._super("tunerpresenting")}})}),define("antie/events/tunerstoppedevent",["antie/events/event"],function(e){"use strict";return e.extend({init:function(){this._super("tunerstopped")}})}),define("antie/events/tunerunavailableevent",["antie/events/event"],function(e){"use strict";return e.extend({init:function(){this._super("tunerunavailable")}})}),define("antie/formatter",["antie/class"],function(e){"use strict";return e.extend({init:function(e){e&&(this._opts=e)},format:function(){throw new Error("Not implemented (Formatter::format). A formatter class does not implement its format method.")}})}),define("antie/historian",["antie/class"],function(e){"use strict";var r=e.extend({init:function(e){var t;for(this._historyArray=e.split(r.HISTORY_TOKEN),this._currentUrl=this._historyArray.shift(),t=0;t!==this._historyArray.length;t+=1)this._historyArray[t]=r.HISTORY_TOKEN+this._historyArray[t]},back:function(){var e,t,i,n;return i="#",0<(n=this._historyArray).length?(e=n[0].split(r.HISTORY_TOKEN)[1],t=n.slice(1,n.length).join("")):e=t="",-1!==e.indexOf(r.ROUTE_TOKEN)&&(i="",e=e.replace(r.ROUTE_TOKEN,"#")),t?e+i+t:e},forward:function(e){var t,i;return""===(i=this)._currentUrl?e:(-1!==i._currentUrl.indexOf("#")&&(i._currentUrl=i._currentUrl.replace("#",r.ROUTE_TOKEN)),i._historyArray.unshift(r.HISTORY_TOKEN+i._currentUrl),function(){for(;1<i._historyArray.length&&999<i.toString().length+e.length;)i._historyArray.splice(-2,1)}(),t=-1!==e.indexOf("#")?"":"#",e+t+this.toString())},toString:function(){return this._historyArray.join("")},hasHistory:function(){var e=this.hasBroadcastOrigin()?2:1;return this._historyArray.length>=e},hasBroadcastOrigin:function(){return 0<this._historyArray.length&&this._historyArray[this._historyArray.length-1]===r.HISTORY_TOKEN+r.BROADCAST_ENTRY}});return r.HISTORY_TOKEN="&*history=",r.ROUTE_TOKEN="&*route=",r.BROADCAST_ENTRY="broadcast",r}),define("antie/iterator",["antie/class"],function(e){"use strict";return e.extend({init:function(e){this._array=e||[],this.reset()},reset:function(){this._currentIndex=0},hasNext:function(){return this._currentIndex<this._array.length},next:function(){return this.hasNext()?this._array[this._currentIndex++]:void 0},peek:function(){return this._array[this._currentIndex]},getPointer:function(){return this._currentIndex},isEmpty:function(){return 0===this._array.length},getLength:function(){return this._array.length}})}),define("antie/lib/date.format",function(){Date.prototype.format=function(e){for(var t="",i=Date.replaceChars,n=0;n<e.length;n++){var r=e.charAt(n);0<=n-1&&"\\"==e.charAt(n-1)?t+=r:i[r]?t+=i[r].call(this):"\\"!=r&&(t+=r)}return t},Date.replaceChars={shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d:function(){return(this.getDate()<10?"0":"")+this.getDate()},D:function(){return Date.replaceChars.shortDays[this.getDay()]},j:function(){return this.getDate()},l:function(){return Date.replaceChars.longDays[this.getDay()]},N:function(){return this.getDay()+1},S:function(){return this.getDate()%10==1&&11!=this.getDate()?"st":this.getDate()%10==2&&12!=this.getDate()?"nd":this.getDate()%10==3&&13!=this.getDate()?"rd":"th"},w:function(){return this.getDay()},z:function(){var e=new Date(this.getFullYear(),0,1);return Math.ceil((this-e)/864e5)},W:function(){var e=new Date(this.getFullYear(),0,1);return Math.ceil(((this-e)/864e5+e.getDay()+1)/7)},F:function(){return Date.replaceChars.longMonths[this.getMonth()]},m:function(){return(this.getMonth()<9?"0":"")+(this.getMonth()+1)},M:function(){return Date.replaceChars.shortMonths[this.getMonth()]},n:function(){return this.getMonth()+1},t:function(){var e=new Date;return new Date(e.getFullYear(),e.getMonth(),0).getDate()},L:function(){var e=this.getFullYear();return e%400==0||e%100!=0&&e%4==0},o:function(){var e=new Date(this.valueOf());return e.setDate(e.getDate()-(this.getDay()+6)%7+3),e.getFullYear()},Y:function(){return this.getFullYear()},y:function(){return(""+this.getFullYear()).substr(2)},a:function(){return this.getHours()<12?"am":"pm"},A:function(){return this.getHours()<12?"AM":"PM"},B:function(){return Math.floor(1e3*((this.getUTCHours()+1)%24+this.getUTCMinutes()/60+this.getUTCSeconds()/3600)/24)},g:function(){return this.getHours()%12||12},G:function(){return this.getHours()},h:function(){return((this.getHours()%12||12)<10?"0":"")+(this.getHours()%12||12)},H:function(){return(this.getHours()<10?"0":"")+this.getHours()},i:function(){return(this.getMinutes()<10?"0":"")+this.getMinutes()},s:function(){return(this.getSeconds()<10?"0":"")+this.getSeconds()},u:function(){var e=this.getMilliseconds();return(e<10?"00":e<100?"0":"")+e},e:function(){return"Not Yet Supported"},I:function(){return"Not Yet Supported"},O:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+"00"},P:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+":00"},T:function(){var e=this.getMonth();this.setMonth(0);var t=this.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1");return this.setMonth(e),t},Z:function(){return 60*-this.getTimezoneOffset()},c:function(){return this.format("Y-m-d\\TH:i:sP")},B:function(){return this.format("Y-m-d\\TH:i:sO")},r:function(){return this.toString()},U:function(){return this.getTime()/1e3}}}),define("antie/lib/date.parse",function(){var r=Date.parse;Date.parse=function(e){var t,i=r(e),n=0;return isNaN(i)&&(t=/(\d{4})-?(\d{2})-?(\d{2})(?:[T ](\d{2}):?(\d{2}):?(\d{2})(?:\.(\d{3,}))?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?))/.exec(e))&&("Z"!==t[8]&&(n=60*+t[10]+ +t[11],"+"===t[9]&&(n=0-n)),void 0===t[7]&&(t[7]="000"),i=Date.UTC(+t[1],+t[2]-1,+t[3],+t[4],+t[5]+n,+t[6],+t[7].substr(0,3))),i}}),define("antie/lib/intervalformat",function(){var d=["years","months","days","hours","minutes","seconds"],h={years:31536e3,months:2629746,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1};return function(e,t,i,n,r){t||(t=["years","months","days","hours","minutes","seconds"]),r||(r=" and ");for(var s=[],o=0;o<d.length;o++){var a=d[o];if(-1!==t.indexOf(a)){var l=Math.floor(e/h[a]);if((!n||!n[a]||l>=n[a])&&(e%=h[a],1<l?s.push(l+" "+a):1==l&&s.push(l+" "+a.substring(0,a.length-1)),i&&s.length===i))break}}if(1<s.length){var c=s.pop(),u=s.pop();s.splice(s.length-2,2,[u+r+c])}return s.join(", ")}}),define("antie/lib/math.seedrandom",function(){!function(r,s,l,e,o,a,c){function u(e){var t,i,a=this,n=e.length,r=0,s=a.i=a.j=a.m=0;for(a.S=[],a.c=[],n||(e=[n++]);r<l;)a.S[r]=r++;for(r=0;r<l;r++)s=h(s+(t=a.S[r])+e[r%n]),i=a.S[s],a.S[r]=i,a.S[s]=t;a.g=function(e){var t=a.S,i=h(a.i+1),n=t[i],r=h(a.j+n),s=t[r];t[i]=s,t[r]=n;for(var o=t[h(n+s)];--e;)s=t[r=h(r+(n=t[i=h(i+1)]))],t[i]=s,t[r]=n,o=o*l+t[h(n+s)];return a.i=i,a.j=r,o},a.g(l)}function d(e,t,i,n){for(e+="",n=i=0;n<e.length;n++)t[h(n)]=h((i^=19*t[h(n)])+e.charCodeAt(n));for(n in e="",t)e+=String.fromCharCode(t[n]);return e}function h(e){return e&l-1}s.seedrandom=function(e,t){var n,i=[];return e=d(function e(t,i,n,r){n=[];if(i&&"object"==typeof t)for(r in t)if(r.indexOf("S")<5)try{n.push(e(t[r],i-1))}catch(e){}return n.length?n:""+t}(t?[e,r]:arguments.length?e:[(new Date).getTime(),r,window],3),i),d((n=new u(i)).S,r),s.random=function(){for(var e=n.g(6),t=c,i=0;e<o;)e=(e+i)*l,t*=l,i=n.g(1);for(;a<=e;)e/=2,t/=2,i>>>=1;return(e+i)/t},e},c=s.pow(l,6),o=s.pow(2,o),a=2*o,d(s.random(),r)}([],Math,256,0,52)}),define("antie/lib/sha1",function(){var s=0;function e(e){return i(t(n(e)))}function t(e){return o(a(r(e),8*e.length))}function i(e){for(var t,i=s?"0123456789ABCDEF":"0123456789abcdef",n="",r=0;r<e.length;r++)t=e.charCodeAt(r),n+=i.charAt(t>>>4&15)+i.charAt(15&t);return n}function n(e){for(var t,i,n="",r=-1;++r<e.length;)t=e.charCodeAt(r),i=r+1<e.length?e.charCodeAt(r+1):0,55296<=t&&t<=56319&&56320<=i&&i<=57343&&(t=65536+((1023&t)<<10)+(1023&i),r++),t<=127?n+=String.fromCharCode(t):t<=2047?n+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?n+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(n+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return n}function r(e){for(var t=Array(e.length>>2),i=0;i<t.length;i++)t[i]=0;for(i=0;i<8*e.length;i+=8)t[i>>5]|=(255&e.charCodeAt(i/8))<<24-i%32;return t}function o(e){for(var t="",i=0;i<32*e.length;i+=8)t+=String.fromCharCode(e[i>>5]>>>24-i%32&255);return t}function a(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var i,n=Array(80),r=1732584193,s=-271733879,o=-1732584194,a=271733878,l=-1009589776,c=0;c<e.length;c+=16){for(var u=r,d=s,h=o,g=a,p=l,f=0;f<80;f++){n[f]=f<16?e[c+f]:C(n[f-3]^n[f-8]^n[f-14]^n[f-16],1);var _=v(v(C(r,5),m(f,s,o,a)),v(v(l,n[f]),(i=f)<20?1518500249:i<40?1859775393:i<60?-1894007588:-899497514));l=a,a=o,o=C(s,30),s=r,r=_}r=v(r,u),s=v(s,d),o=v(o,h),a=v(a,g),l=v(l,p)}return Array(r,s,o,a,l)}function m(e,t,i,n){return e<20?t&i|~t&n:e<40?t^i^n:e<60?t&i|t&n|i&n:t^i^n}function v(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function C(e,t){return e<<t|e>>>32-t}return e}),define("antie/lib/shifty",function(){function a(){return+new Date}function t(e,t){var i;for(i in e)e.hasOwnProperty(i)&&t(e,i)}function l(i,e){return t(e,function(e,t){i[t]=e[t]}),i}function c(i,e){return t(e,function(e,t){void 0===i[t]&&(i[t]=e[t])}),i}function o(e,t,i){var n,r;for(n in r=(e-t.timestamp)/t.duration,i.current)i.current.hasOwnProperty(n)&&t.to.hasOwnProperty(n)&&(i.current[n]=s(t.originalState[n],t.to[n],t.easingFunc,r));return i.current}function s(e,t,i,n){return e+(t-e)*i(n)}function u(i,n,r){t(h.prototype.filter,function(e,t){e[t][i]&&e[t][i].apply(n,r)})}function d(t,i){var e,n,r;function s(e){u("beforeTween",t.owner,[i.current,t.originalState,t.to]),o(e,t,i),u("afterTween",t.owner,[i.current,t.originalState,t.to]),t.hook.step&&function(e,t,i,n){var r;for(r=0;r<t[e].length;r++)t[e][r].apply(i,n)}("step",t.hook,t.owner,[i.current]),t.step.call(i.current)}(e=a())<t.timestamp+t.duration&&i.isAnimating?(i.loopId=(n=function(){d(t,i)},r=t.owner.fps,setTimeout(n,1e3/r)),s(e)):(s(t.timestamp+t.duration),t.owner.stop(!0))}function h(e){return e=e||{},this._hook={},this._tweenParams={owner:this,hook:this._hook,data:{}},this._state={},this._state.current=e.initialState||{},this.fps=e.fps||30,this.easing=e.easing||"linear",this.duration=e.duration||500,this}h.prototype.tween=function(e,t,i,n,r){var s,o;if(!this._state.isAnimating)return s=this._tweenParams,o=this._state,this._state.loopId=0,this._state.pausedAtTime=null,t?(s.step=function(){},s.to=t||{},s.duration=i||this.duration,s.callback=n||function(){},s.easing=r||this.easing,o.current=e||{}):(s.step=e.step||function(){},s.callback=e.callback||function(){},s.to=e.to||e.target||{},s.duration=e.duration||this.duration,s.easing=e.easing||this.easing,s.fps=e.fps||this.fps,o.current=e.from||{}),s.timestamp=a(),s.easingFunc=this.formula[s.easing]||this.formula.linear,c(o.current,s.to),c(s.to,o.current),u("tweenCreated",s.owner,[o.current,s.originalState,s.to]),s.originalState=l({},o.current),o.isAnimating=!0,this.resume(),e.start&&e.start(),this},h.prototype.to=function(e,t,i,n){return void 0===t?(e.from=this.get(),this.tween(e)):this.tween(this.get(),e,t,i,n),this},h.prototype.get=function(){return this._state.current},h.prototype.set=function(e){return this._state.current=e||{},this},h.prototype.stop=function(e){return clearTimeout(this._state.loopId),this._state.isAnimating=!1,e&&(l(this._state.current,this._tweenParams.to),u("afterTweenEnd",this,[this._state.current,this._tweenParams.originalState,this._tweenParams.to]),this._tweenParams.callback.call(this._state.current)),this},h.prototype.pause=function(){return clearTimeout(this._state.loopId),this._state.pausedAtTime=a(),this._state.isPaused=!0,this},h.prototype.resume=function(){return this._state.isPaused&&(this._tweenParams.timestamp+=a()-this._state.pausedAtTime),d(this._tweenParams,this._state),this},h.prototype.hookAdd=function(e,t){this._hook.hasOwnProperty(e)||(this._hook[e]=[]),this._hook[e].push(t)},h.prototype.hookRemove=function(e,t){var i;if(this._hook.hasOwnProperty(e))if(t)for(i=this._hook[e].length;0<=i;i++)this._hook[e][i]===t&&this._hook[e].splice(i,1);else this._hook[e]=[]},h.prototype.filter={},h.util={now:a,each:t,tweenProps:o,tweenProp:s,applyFilter:u,simpleCopy:l,weakCopy:c},h.prototype.formula={linear:function(e){return e}},h.util.simpleCopy(h.prototype.formula,{easeInQuad:function(e){return Math.pow(e,2)},easeOutQuad:function(e){return-(Math.pow(e-1,2)-1)},easeInOutQuad:function(e){return(e/=.5)<1?.5*Math.pow(e,2):-.5*((e-=2)*e-2)},easeInCubic:function(e){return Math.pow(e,3)},easeOutCubic:function(e){return Math.pow(e-1,3)+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)},easeInQuart:function(e){return Math.pow(e,4)},easeOutQuart:function(e){return-(Math.pow(e-1,4)-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},easeInQuint:function(e){return Math.pow(e,5)},easeOutQuint:function(e){return Math.pow(e-1,5)+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*Math.pow(e,5):.5*(Math.pow(e-2,5)+2)},easeInSine:function(e){return 1-Math.cos(e*(Math.PI/2))},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0==e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1==e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0==e?0:1==e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-Math.pow(e-1,2))},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInBack:function(e){return e*e*(2.70158*e-1.70158)},easeOutBack:function(e){return(e-=1)*e*(2.70158*e+1.70158)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},elastic:function(e){return-1*Math.pow(4,-8*e)*Math.sin((6*e-1)*(2*Math.PI)/2)+1},swingFromTo:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},swingFrom:function(e){return e*e*(2.70158*e-1.70158)},swingTo:function(e){return(e-=1)*e*(2.70158*e+1.70158)+1},bounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bouncePast:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?2-(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?2-(7.5625*(e-=2.25/2.75)*e+.9375):2-(7.5625*(e-=2.625/2.75)*e+.984375)},easeFromTo:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},easeFrom:function(e){return Math.pow(e,4)},easeTo:function(e){return Math.pow(e,.25)}});var n,r=/(px|em|%|pc|pt|mm|cm|in|ex)/i,g=/([a-z]|%)/gi;function p(e){var n;return n={},h.util.each(e,function(e,t){var i;"string"==typeof(i=e[t])&&r.test(i)&&(n[t]={suffix:e[t].match(r)[0]})}),n}function f(i,e){h.util.each(e,function(e,t){i[t]=+i[t].replace(g,"")})}function _(i,e){h.util.each(e,function(e,t){i[t]=i[t]+e[t].suffix})}return h.prototype.filter.token={beforeTween:function(e,t,i){f(e,n=p(t)),f(t,n),f(i,n)},afterTween:function(e,t,i){_(e,n),_(t,n),_(i,n)}},h}),define("antie/mediasource",["antie/class","antie/runtimecontext","antie/urlbuilder"],function(e,n,r){"use strict";var s=e.extend({init:function(e,t){this.src=e,this.type=t},isEqual:function(e){return this.src===e.src&&this.type===e.type},isLiveStream:function(){return s.isLiveStream(this.type)},getURL:function(e){e=e||{};var t=n.getCurrentApplication().getDevice().getConfig(),i=this.getMediaType()===s.MEDIA_TYPE_AUDIO?t.streaming.audio:t.streaming.video;return new r(i.mediaURIFormat).getURL(this.src,e)},getContentType:function(){return this.type},getMediaType:function(){return s.MEDIA_TYPE_UNKNOWN}});return s.MEDIA_TYPE_UNKNOWN=0,s.MEDIA_TYPE_VIDEO=1,s.MEDIA_TYPE_AUDIO=2,s.isLiveStream=function(e){return"application/vnd.apple.mpegurl"===e.toLowerCase()},s}),define("antie/packages/core",["antie/application","antie/mediasource","antie/videosource","antie/audiosource","antie/datasource","antie/iterator","antie/formatter","antie/widgets/widget","antie/widgets/carousel","antie/widgets/carousel/keyhandlers/activatefirsthandler","antie/widgets/carousel/keyhandlers/alignfirsthandler","antie/widgets/component","antie/widgets/container","antie/widgets/image","antie/widgets/label","antie/widgets/button","antie/widgets/verticallist","antie/widgets/horizontallist"],function(){}),define("antie/runtimecontext",["antie/class"],function(e){"use strict";var t;return new(e.extend({clearCurrentApplication:function(){t=void 0},setCurrentApplication:function(e){if(t)throw new Error("RuntimeContext.setCurrentApplication called for a second time. You can only have one application instance running at any time.");t=e},getCurrentApplication:function(){return t},getDevice:function(){return this.getCurrentApplication().getDevice()}}))}),define("antie/storageprovider",["antie/class"],function(e){"use strict";var t=e.extend({init:function(){this._valueCache={}},getItem:function(e){return this._valueCache[e]},setItem:function(e,t){this._valueCache[e]=t},removeItem:function(e){delete this._valueCache[e]},clear:function(){this._valueCache={}}});return t.STORAGE_TYPE_SESSION=0,t.STORAGE_TYPE_PERSISTENT=1,t.STORAGE_TYPE_LOCAL=2,t}),define("antie/urlbuilder",["antie/class"],function(e){"use strict";return e.extend({init:function(e){this._urlTemplate=e},getURL:function(e,i){var t=this._urlTemplate.replace(/^%href%/,e);return t=t.replace(/%[a-z]+%/g,function(e){var t;return void 0!==(t=i[e])?t:e}),encodeURI(t).replace(/'/g,"%27")}})}),define("antie/videosource",["antie/mediasource"],function(e){"use strict";return e.extend({getMediaType:function(){return e.MEDIA_TYPE_VIDEO}})}),define("antie/widgets/button",["antie/widgets/container","antie/events/focusevent","antie/events/focusdelayevent","antie/events/blurevent","antie/events/keyevent","antie/events/selectevent"],function(e,t,i,n,r,s){"use strict";return e.extend({init:function(e,t){this._super(e),this.addClass("button"),this.addClass("buttonBlurred"),this._focusDelayHandle=null,this._disabled=!1,this._focusDelayTimeout="boolean"!=typeof t||t?1500:500;var i=this;this.addEventListener("keydown",function(e){e.keyCode===r.VK_ENTER&&(i.select(),e.stopPropagation())})},render:function(e){this.outputElement=e.createButton(this.id,this.getClasses(),"#");for(var t=0;t<this._childWidgetOrder.length;t++)e.appendChildElement(this.outputElement,this._childWidgetOrder[t].render(e));return this.outputElement},isFocusable:function(){return!this._disabled},setDisabled:function(e){(this._disabled=e)?this.addClass("buttonDisabled"):this.removeClass("buttonDisabled")},focus:function(e){var t=this._disabled;e&&(this._disabled=!1);for(var i=!0,n=this;n.parentWidget;)n.parentWidget.setActiveChildWidget(n)||(i=!1),n=n.parentWidget;return this._disabled=t,i},select:function(){this.bubbleEvent(new s(this))},_setActiveChildFocussed:function(e){if(this._focusDelayHandle&&clearTimeout(this._focusDelayHandle),e){this.removeClass("buttonBlurred"),this.addClass("buttonFocussed");var t=this;this._focusDelayHandle=setTimeout(function(){t.bubbleEvent(new i(t))},this._focusDelayTimeout),this.getCurrentApplication()._setFocussedWidget(this)}else this.removeClass("buttonFocussed"),this.addClass("buttonBlurred")},removeFocus:function(){this._super(),this.removeClass("buttonFocussed"),this.addClass("buttonBlurred")}})}),define("antie/widgets/carousel",["antie/widgets/carousel/carouselcore","antie/widgets/container"],function(e,t){"use strict";var i=e.extend({appendChildWidget:function(e){return this.append(e)},insertChildWidget:function(e,t){return this.insert(e,t)},removeChildWidget:function(e,t){return this.remove(e,t)},removeChildWidgets:function(){return this.removeAll()},setActiveChildWidget:function(e){return e===this._mask?this._super(e):this.setActiveWidget(e)},hasChildWidget:function(e){return e===this._mask.id?this._super(e):this._widgetStrip.hasChildWidget(e)},getActiveChildWidget:function(){return this._widgetStrip.getActiveChildWidget()},getChildWidget:function(e){return e===this._mask.id?this._mask:this._widgetStrip.getChildWidget(e)},getChildWidgetCount:function(){return this._widgetStrip.getChildWidgetCount()},getChildWidgets:function(){return this.items()},setActiveChildIndex:function(e){return this.setActiveIndex(e)},getActiveChildIndex:function(){return this.getActiveIndex()},addClass:function(e){if(this._widgetStrip)return this._widgetStrip.addClass(e)},hasClass:function(e){return!!this._widgetStrip&&this._widgetStrip.hasClass(e)},removeClass:function(e){if(this._widgetStrip)return this._widgetStrip.removeClass(e)},getClasses:function(){return this._widgetStrip?this._widgetStrip.getClasses():[]},_directAppend:function(e){t.prototype.appendChildWidget.call(this,e)}});return i.orientations=e.orientations,i}),define("antie/widgets/carousel/aligners/aligner",["antie/class","antie/events/beforealignevent","antie/events/afteralignevent","antie/widgets/carousel/aligners/alignmentqueue"],function(e,t,i,n){"use strict";var r;return(r=e.extend({init:function(e){this._mask=e,this._queue=new n(this._mask),this._lastAlignIndex=null},alignNext:function(e,t){this._align(e,r.directions.FORWARD,t)},alignPrevious:function(e,t){this._align(e,r.directions.BACKWARD,t)},alignToIndex:function(e,t){this._informMaskBeforeAlign(e),this._moveNormally(e,t)},indexOfLastAlignRequest:function(){return this._lastAlignIndex},complete:function(){this._queue.complete()},_align:function(e,t,i){var n,r;n=this.indexOfLastAlignRequest(),null!==(r=this._subsequentIndexInDirection(e,t))&&(this._informMaskBeforeAlign(r),this._isWrap(n,r,t)?this._wrap(n,r,e,t,i):this._moveNormally(r,i))},_subsequentIndexInDirection:function(e,t){var i,n;return i=null===(n=this.indexOfLastAlignRequest())?0:n,t===r.directions.FORWARD?e.indexAfter(i):e.indexBefore(i)},_isWrap:function(e,t,i){return i===r.directions.FORWARD&&t<e||i===r.directions.BACKWARD&&e<t},_informMaskBeforeAlign:function(e){this._mask.beforeAlignTo(this._lastAlignIndex,e),this._lastAlignIndex=e},_informMaskAfterAlign:function(e){this._mask.afterAlignTo(e)},_wrap:function(e,t,i,n,r){this._fromIndexActive(e,i)?this._visibleActiveItemWrap(e,t,i,n,r):this._invisibleActiveItemWrap(e,t,i,n,r)},_fromIndexActive:function(e,t){return e===t.currentIndex()},_invisibleActiveItemWrap:function(e,t,i,n,r){var s=this._firstIndexToAlignForInvisibleActiveItemWrap(e,i,n);this._queue.add(s,{skipAnim:!0}),this._queueFinalAlign(t,r),this._queue.start()},_firstIndexToAlignForInvisibleActiveItemWrap:function(e,t,i){var n;return n=t.indexCount(),i===r.directions.FORWARD?e-t.indexCount():n+e},_visibleActiveItemWrap:function(e,t,i,n,r){var s;s=this._firstIndexToAlignForVisibleActiveItemWrap(t,i,n),this._queue.add(s,r),this._queueFinalAlign(t,{skipAnim:!0}),this._queue.start()},_firstIndexToAlignForVisibleActiveItemWrap:function(e,t,i){return i===r.directions.FORWARD?t.indexCount()+e:-t.indexCount()+e},_moveNormally:function(e,t){this._queueFinalAlign(e,t),this._queue.start()},_queueFinalAlign:function(e,t){var i,n;function r(){}n=this,r.prototype=t,i=new r,t&&t.onComplete?i.onComplete=function(){t.onComplete(),n._informMaskAfterAlign(e)}:i.onComplete=function(){n._informMaskAfterAlign(e)},this._queue.add(e,i)}})).directions={FORWARD:0,BACKWARD:1},r}),define("antie/widgets/carousel/aligners/alignmentqueue",["antie/class"],function(e){"use strict";return e.extend({init:function(e){this._mask=e,this._setSkip(!1),this._queue=[],this._started=!1},add:function(e,t){var i,n,r,s=(i=this,n=e,r=t,function(){var e=(r=r||{}).onComplete,t={el:r.el,to:r.to,from:r.from,duration:r.duration,easing:r.easing,skipAnim:r.skipAnim,fps:r.fps,onComplete:function(){e&&e(),i._next()}};i._skip&&(t.skipAnim=!0),i._mask.alignToIndex(n,t)});this._queue.push(s)},start:function(){this._started||this._runFirstInQueue()},complete:function(){this._started&&(this._setSkip(!0),this._mask.stopAnimation())},_runFirstInQueue:function(){0<this._queue.length?(this._started=!0,this._queue[0]()):(this._setSkip(!1),this._started=!1)},_next:function(){this._queue.shift(),this._runFirstInQueue()},_setSkip:function(e){this._skip=e}})}),define("antie/widgets/carousel/binder",["antie/class","antie/iterator","antie/events/databoundevent"],function(e,l,c){"use strict";return e.extend({init:function(e,t){this._dataSource=t,this._formatter=e},appendAllTo:function(e){this._bindAll(e,this._appendItem)},_bindAll:function(e,t,i,n){var r,s;r=this._getCallbacks(e,t,n),s=new c("beforedatabind",e),"function"==typeof i&&i(s),e.bubbleEvent(s),this._dataSource instanceof Array?r.onSuccess(this._dataSource):this._dataSource.load(r)},_getCallbacks:function(r,s,o){var a=this;return{onSuccess:function(e){var t,i,n;for(t=e instanceof l?e:new l(e);t.hasNext();)i=a._formatter.format(t),s(r,i);n=new c("databound",r,t),"function"==typeof o&&o(n),r.bubbleEvent(n)},onError:function(e){r.bubbleEvent(new c("databindingerror",r,null,e))}}},_appendItem:function(e,t){return e.appendChildWidget(t)}})}),define("antie/widgets/carousel/binders/batchbinder",["antie/widgets/carousel/binder"],function(e){"use strict";return e.extend({appendAllTo:function(e){this._bindAll(e,this._appendItem,this._disableAutoCalc,this._enableAutoCalc)},_disableAutoCalc:function(e){e.target.autoCalculate(!1)},_enableAutoCalc:function(e){e.target.autoCalculate(!0),e.target.recalculate()}})}),define("antie/widgets/carousel/carouselcore",["antie/widgets/container","antie/widgets/carousel/navigators/bookendednavigator","antie/widgets/carousel/mask","antie/widgets/carousel/strips/widgetstrip","antie/widgets/carousel/aligners/aligner","antie/widgets/carousel/orientations/vertical","antie/widgets/carousel/orientations/horizontal"],function(e,i,n,r,s,t,o){"use strict";var a=e.extend({init:function(e,t){this.id=e,this._super(e),this._setOrientation(t||a.orientations.VERTICAL),this.setWidgetStrip(r),this._mask=new n(this.id+"_CarouselMask",this._widgetStrip,this._orientation),this._directAppend(this._mask),this.setNavigator(i),this._aligner=new s(this._mask),this._setAlignEventsFromStripToHaveCarouselAsTarget(),this._autoCalculate=!0},render:function(e){return this.outputElement=this._mask.render(e),this.outputElement},append:function(e,t){return e.addClass("carouselItem"),this._widgetStrip.append(e,t)},insert:function(e,t,i){return t.addClass("carouselItem"),this._widgetStrip.insert(e,t,i)},setWidgetLengths:function(e){this._widgetStrip.setLengths(e)},setMaskLength:function(e){this._mask.setLength(e)},remove:function(e,t){if(this.hasChildWidget(e.id))return e.removeClass("carouselItem"),this._widgetStrip.remove(e,t)},removeAll:function(){this._widgetStrip.removeAll()},alignNext:function(e){this._aligner.alignNext(this._navigator,e)},alignPrevious:function(e){this._aligner.alignPrevious(this._navigator,e)},alignToIndex:function(e,t){this._aligner.alignToIndex(e,t)},completeAlignment:function(){this._aligner.complete()},setAlignPoint:function(e){this._mask.setAlignPoint(e)},setNormalisedAlignPoint:function(e){this._mask.setNormalisedAlignPoint(e)},setNormalisedWidgetAlignPoint:function(e){this._mask.setNormalisedWidgetAlignPoint(e)},recalculate:function(){this._widgetStrip.recalculate()},autoCalculate:function(e){this._widgetStrip.autoCalculate(e)},getActiveIndex:function(){return this._navigator.currentIndex()},setActiveIndex:function(e){this._navigator.setIndex(e)},nextIndex:function(){return this._navigator.nextIndex()},previousIndex:function(){return this._navigator.previousIndex()},setActiveWidget:function(e){var t;t=this._widgetStrip.getIndexOfChildWidget(e),this._navigator.setIndex(t)},setNavigator:function(e){this._navigator=new e(this._widgetStrip)},setWidgetStrip:function(e){this._widgetStrip=new e(this.id+"_WidgetStrip",this._orientation),this._navigator&&this._navigator.setContainer(this._widgetStrip),this._mask&&this._mask.setWidgetStrip(this._widgetStrip)},items:function(){return this._widgetStrip.widgets()},orientation:function(){return this._orientation},_setOrientation:function(e){this._orientation=e},_setAlignEventsFromStripToHaveCarouselAsTarget:function(){this._remapWidgetStripEventToCarousel("beforealign"),this._remapWidgetStripEventToCarousel("afteralign")},_remapWidgetStripEventToCarousel:function(e){var t=this;this._remapEvent=this._remapEvent||function(e){e.target===t._widgetStrip&&(e.target=t)},this.addEventListener(e,this._remapEvent)},_directAppend:function(e){return this.appendChildWidget(e)}});return a.orientations={VERTICAL:t,HORIZONTAL:o},a}),define("antie/widgets/carousel/keyhandlers/activatefirsthandler",["antie/widgets/carousel/keyhandlers/keyhandler"],function(e){"use strict";return e.extend({_addAlignmentListeners:function(){var t=this._carousel;t.addEventListener("beforealign",function(e){e.target===t&&t.setActiveIndex(e.alignedIndex)})}})}),define("antie/widgets/carousel/keyhandlers/alignfirsthandler",["antie/widgets/carousel/keyhandlers/keyhandler"],function(e){"use strict";return e.extend({_addAlignmentListeners:function(){var t=this._carousel;t.addEventListener("afteralign",function(e){e.target===t&&t.setActiveIndex(e.alignedIndex)})}})}),define("antie/widgets/carousel/keyhandlers/keyhandler",["antie/class"],function(e){"use strict";return e.extend({init:function(){this._animationOptions={}},attach:function(e){this._carousel=e,this._addKeyListeners(),this._addAlignmentListeners()},setAnimationOptions:function(e){this._animationOptions=e},_addKeyListeners:function(){var t,i,n,r;n=(r=this)._carousel,t=n.orientation().defaultKeys().PREVIOUS,i=n.orientation().defaultKeys().NEXT,n.addEventListener("keydown",function(e){switch(e.keyCode){case t:null!==n.previousIndex()&&(n.completeAlignment(),n.alignPrevious(r._animationOptions),e.stopPropagation());break;case i:null!==n.nextIndex()&&(n.completeAlignment(),n.alignNext(r._animationOptions),e.stopPropagation())}})},_addAlignmentListeners:function(){}})}),define("antie/widgets/carousel/mask",["antie/widgets/container","antie/widgets/carousel/spinner","antie/events/beforealignevent","antie/events/afteralignevent"],function(e,n,i,t){"use strict";return e.extend({init:function(e,t,i){this._super(e),this.addClass(i.styleClass()),this._orientation=i,this.addClass("carouselmask"),this.setWidgetStrip(t),this._alignmentPoint=0,this._normalisedWidgetAlignPoint=0,this._normalisedAlignmentPoint=0,this._spinner=new n(this.getCurrentApplication().getDevice(),this,i),this._lastAlignIndex=null,this._length=void 0},alignToIndex:function(e,t){this._doAlign(e,t,this._alignmentPoint)},_doAlign:function(e,t,i){var n;n=this._widgetStrip.getLengthToIndex(e),n-=this._getAlignmentPoint(),n+=this._getWidgetAlignmentPoint(e),this._moveContentsTo(-n,t),this._currentAlignPoint=i},_resetAlignment:function(){null!==this._lastAlignIndex&&this._doAlign(this._lastAlignIndex,{skipAnim:!0},this._currentAlignPoint)},setAlignPoint:function(e){this._alignmentPoint=e,this._normalisedAlignmentPoint=0},setNormalisedAlignPoint:function(e){var t=this._clampBetweenZeroAndOne(e);this._normalisedAlignmentPoint=t},setNormalisedWidgetAlignPoint:function(e){this._normalisedWidgetAlignPoint=this._clampBetweenZeroAndOne(e)},getWidgetStrip:function(){return this._widgetStrip},setWidgetStrip:function(e){this._widgetStrip&&this.removeChildWidget(this._widgetStrip),this._widgetStrip=e,this.appendChildWidget(this._widgetStrip)},setLength:function(e){this._length=e},getLength:function(){var e;return this._length?this._length:(e=this.getCurrentApplication().getDevice()).getElementSize(this.outputElement||this.render(e))[this._getDimension()]},indicesVisibleWhenAlignedToIndex:function(e){var t;return t=this.getLength(),this._visibleIndixesBefore(e,t).concat(this._visibleIndicesFrom(e,t))},stopAnimation:function(){this._spinner.stopAnimation()},beforeAlignTo:function(e,t){this._widgetStrip.needsVisibleIndices()&&(this._widgetStrip.attachIndexedWidgets(this._visibleIndicesBetween(e,t)),this._resetAlignment()),this._widgetStrip.bubbleEvent(new i(this._widgetStrip,t))},afterAlignTo:function(e){this._lastAlignIndex=e,this._widgetStrip.needsVisibleIndices()&&(this._widgetStrip.attachIndexedWidgets(this.indicesVisibleWhenAlignedToIndex(e)),this.alignToIndex(e,{skipAnim:!0})),this._widgetStrip.bubbleEvent(new t(this._widgetStrip,e))},_clampBetweenZeroAndOne:function(e){var t=e;return t=Math.max(0,t),t=Math.min(1,t)},_getWidgetAlignmentPoint:function(e){return 0===this._normalisedWidgetAlignPoint?0:this._widgetStrip.lengthOfWidgetAtIndex(e)*this._normalisedWidgetAlignPoint},_getAlignmentPoint:function(){return 0===this._normalisedAlignmentPoint?this._alignmentPoint:this.getLength()*this._normalisedAlignmentPoint},_visibleIndixesBefore:function(e,t){var i,n,r;for(r=[],n=e-1,i=this._getAlignmentPoint()-this._getWidgetAlignmentPoint(e);-1!==n&&0<i;)i<=t&&r.unshift(n),i-=this.getWidgetStrip().lengthOfWidgetAtIndex(n),n-=1;return r},_visibleIndicesFrom:function(e,t){var i,n,r,s;for(s=[],i=this.getWidgetStrip().getChildWidgetCount(),r=e,n=t-this._getAlignmentPoint()+this._getWidgetAlignmentPoint(e);r!==i&&0<n;)n<=t&&s.push(r),n-=this.getWidgetStrip().lengthOfWidgetAtIndex(r),r+=1;return s},_visibleIndicesBetween:function(e,t){var i,n,r,s,o,a,l;if(i=null===e?[]:this.indicesVisibleWhenAlignedToIndex(e),n=this.indicesVisibleWhenAlignedToIndex(t),r=i.concat(n),s=[],0<(r=this._deDuplicateAndSortArray(r)).length)for(o=r[0],a=r[r.length-1],l=o;l!==a+1;l+=1)s.push(l);return s},_deDuplicateAndSortArray:function(e){var t,i;for(e.sort(this._numericalSort),i=[],t=0;t!==e.length;t+=1)e[t]!==e[t+1]&&i.push(e[t]);return i},_numericalSort:function(e,t){return e-t},_moveContentsTo:function(e,t){this._spinner.moveContentsTo(e,t)},_getDimension:function(){return this._orientation.dimension()}})}),define("antie/widgets/carousel/navigators/bookendednavigator",["antie/widgets/carousel/navigators/navigator"],function(e){"use strict";return e.extend({indexAfter:function(e){var t;return t=this._super(e),this._validateIndex(t)},indexBefore:function(e){var t;return t=this._super(e),this._validateIndex(t)},_isValidIndex:function(e){var t;return t=this._container.getChildWidgetCount(),"number"==typeof e&&e<t&&0<=e},_validateIndex:function(e){var t;return t=null,this._isValidIndex(e)&&(t=e),t}})}),define("antie/widgets/carousel/navigators/navigator",["antie/class","antie/events/selecteditemchangeevent","antie/events/beforeselecteditemchangeevent"],function(e,t,i){"use strict";var n;return(n=e.extend({init:function(e){this.setContainer(e)},currentIndex:function(){return this._getActiveIndex()},nextIndex:function(){var e=this.currentIndex();return this.indexAfter(e)},indexAfter:function(e){return this._getNextPotientialIndexInDirection(e,n.directions.FORWARD)},previousIndex:function(){var e=this.currentIndex();return this.indexBefore(e)},indexBefore:function(e){return this._getNextPotientialIndexInDirection(e,n.directions.BACKWARD)},indexCount:function(){return this._container.getChildWidgetCount()},setIndex:function(e){this._isValidIndex(e)&&!this._indexedWidgetCantBeFocussed(e)&&(this._fireItemChangeEvent(e,i),this._setActiveIndexOnContainer(e),this._fireItemChangeEvent(e,t))},setContainer:function(e){this._container=e},_getActiveIndex:function(){var e,t;return e=this._container.getActiveChildWidget(),-1!==(t=this._container.getIndexOfChildWidget(e))?t:null},_setActiveIndexOnContainer:function(e){e!==this.currentIndex()&&this._container.setActiveChildIndex(e)},_indexedWidgetCantBeFocussed:function(e){return!this._container.getChildWidgets()[e].isFocusable()},_getIndexIncrementFunction:function(e){var t;switch(e){case n.directions.FORWARD:t=function(e){return e+1};break;case n.directions.BACKWARD:t=function(e){return e-1}}return t},_getNextPotientialIndexInDirection:function(e,t){var i,n,r;for(i=(r=this._getIndexIncrementFunction(t))(e),n=this._isValidIndex(i);n&&this._indexedWidgetCantBeFocussed(i);)i=r(i),n=this._isValidIndex(i);return i},_fireItemChangeEvent:function(e,t){var i,n;i=new t(n=this._container,this._container.getChildWidgets()[e],e),n.bubbleEvent(i)}})).directions={FORWARD:0,BACKWARD:1},n}),define("antie/widgets/carousel/navigators/wrappingnavigator",["antie/widgets/carousel/navigators/navigator"],function(n){"use strict";return n.extend({indexAfter:function(e){var t;return t=this._super(e),this._validateIndex(e,t)},indexBefore:function(e){var t;return t=this._super(e),this._validateIndex(e,t)},_validateIndex:function(e,t){var i;return i=null,(t=this._wrapIndex(t))!==e&&(i=t),i},_isValidIndex:function(e){var t;return t=this._container.getChildWidgetCount(),"number"==typeof e&&e<t&&0<=e},_wrapIndex:function(e){var t,i;return i=this._container.getChildWidgetCount(),-1===(t=e)?t=this._getNextPotientialIndexInDirection(i,n.directions.BACKWARD):e===i&&(t=this._getNextPotientialIndexInDirection(-1,n.directions.FORWARD)),t}})}),define("antie/widgets/carousel/orientations/horizontal",["antie/class","antie/events/keyevent"],function(e,t){"use strict";return new(e.extend({dimension:function(){return"width"},edge:function(){return"left"},styleClass:function(){return"horizontal"},defaultKeys:function(){return{PREVIOUS:t.VK_LEFT,NEXT:t.VK_RIGHT}}}))}),define("antie/widgets/carousel/orientations/vertical",["antie/class","antie/events/keyevent"],function(e,t){"use strict";return new(e.extend({dimension:function(){return"height"},edge:function(){return"top"},styleClass:function(){return"vertical"},defaultKeys:function(){return{PREVIOUS:t.VK_UP,NEXT:t.VK_DOWN}}}))}),define("antie/widgets/carousel/spinner",["antie/class"],function(e){"use strict";return e.extend({init:function(e,t,i){this._device=e,this._mask=t,this._orientation=i,this._animating=!1,this._currentAnimation=null},moveContentsTo:function(e,t){var i;i=this._getOptions(t,e),this.stopAnimation(),this._animating=!0,this._currentAnimation=this._device.moveElementTo(i)},stopAnimation:function(){this._animating&&(this._device.stopAnimation(this._currentAnimation),this._clearAnimating())},_getOptions:function(e,t){var i,n;return e=e||{},(i={})[this._getEdge()]=t,(n={}).el=this._mask.getWidgetStrip().outputElement,n.to=i,n.from=e.from,n.duration=e.duration||150,n.easing=e.easing||"linear",n.fps=e.fps||"25",n.skipAnim=void 0===e.skipAnim||e.skipAnim,n.onComplete=this._getWrappedOnComplete(e),n},_getWrappedOnComplete:function(e){var t;return t=this,function(){t._clearAnimating(),e.onComplete&&"function"==typeof e.onComplete&&e.onComplete()}},_clearAnimating:function(){this._animating=!1,this._currentAnimation=null},_getEdge:function(){return this._orientation.edge()}})}),define("antie/widgets/carousel/strips/cullingstrip",["antie/widgets/carousel/strips/widgetstrip","antie/widgets/carousel/strips/utility/widgetcontext","antie/widgets/carousel/strips/utility/states"],function(e,i,n){"use strict";return e.extend({init:function(e,t){this._super(e,t),this.setAutoRenderChildren(!1),this._widgetContexts=[]},append:function(e,t){this._super(e,t),this._widgetContexts.push(this.createContext(e,this))},render:function(e){var t;for(this.outputElement?e.clearElement(this.outputElement):this.outputElement=e.createContainer(this.id,this.getClasses()),t=0;t!==this._widgetContexts.length;t+=1)this._widgetContexts[t].setState("INIT");return this.outputElement},insert:function(e,t,i){this._super(e,t,i),this._widgetContexts.splice(e,0,this.createContext(t,this))},remove:function(e){var t,i;for(i=this.widgets(),t=0;t!==i.length;t+=1)e===i[t]&&this._widgetContexts.splice(t,1);return this._super(e,!1)},removeAll:function(){this._widgetContexts=[],this._super()},needsVisibleIndices:function(){return 0<this._widgetContexts.length},attachIndexedWidgets:function(e){var t,i,n,r,s,o;for(n={},r=this._firstIndexInView(),s=[],o=[],t=0;t!==e.length;t+=1)n[i=e[t]]=!0,i<r?s.push(i):o.push(i);for(this._detatchWidgetsNotIndexed(n),s.reverse(),t=0;t!==s.length;t+=1)i=s[t],this._widgetContexts[i].prepend();for(t=0;t!==o.length;t+=1)i=o[t],this._widgetContexts[i].append()},getLengthToIndex:function(e){var t,i,n;for(n=0,t=this._firstIndexWithLength();t<e;t+=1)void 0===(i=this._lengths[t])&&this._throwNoLengthError(),n+=i;return n},lengthOfWidgetAtIndex:function(e){if(void 0!==this._lengths[e])return this._lengths[e];this._throwNoLengthError()},createContext:function(e,t){return new i(e,t,n)},_detatchWidgetsNotIndexed:function(e){var t;for(t=0;t!==this._widgetContexts.length;t+=1)e.hasOwnProperty(t)||this._widgetContexts[t].detach()},_firstIndexWithLength:function(){var e,t,i;for(e=0,t=!1;e<this._widgetContexts.length&&!1===t;)t=this._widgetContexts[e].hasLength(),i=e,e+=1;return i},_firstIndexInView:function(){var e,t,i;for(e=0,t=!1;e<this._widgetContexts.length&&!1===t;)t=this._widgetContexts[e].inView(),i=e,e+=1;return i},_throwNoLengthError:function(){throw new Error("You must set widget lengths before aligning culling strip")}})}),define("antie/widgets/carousel/strips/hidingstrip",["antie/widgets/carousel/strips/cullingstrip","antie/widgets/carousel/strips/utility/widgetcontext","antie/widgets/carousel/strips/utility/visibilitystates"],function(e,i,n){"use strict";return e.extend({createContext:function(e,t){return new i(e,t,n)}})}),define("antie/widgets/carousel/strips/utility/attachedstate",["antie/widgets/carousel/strips/utility/state"],function(e){"use strict";return e.extend({init:function(){},append:function(){},prepend:function(){},detach:function(e,t){this._getDevice(t).removeElement(t.outputElement),e.setState("RENDERED")},hasLength:function(){return!0},inView:function(){return!0},_getDevice:function(e){return e.getCurrentApplication().getDevice(e)}})}),define("antie/widgets/carousel/strips/utility/hiddenstate",["antie/widgets/carousel/strips/utility/state"],function(e){"use strict";return e.extend({init:function(){},append:function(e,t,i){this._show(e,i)},prepend:function(e,t,i){this._show(e,i)},detach:function(){},hasLength:function(){return!0},inView:function(){return!1},_getDevice:function(e){return e.getCurrentApplication().getDevice()},_show:function(e,t){t.getCurrentApplication().getDevice().showElement({el:t.outputElement,skipAnim:!0}),e.setState("ATTACHED")}})}),define("antie/widgets/carousel/strips/utility/initstate",["antie/widgets/carousel/strips/utility/state"],function(e){"use strict";return e.extend({init:function(){},append:function(e,t,i){this._render(i),this._attach(e,t,i,"appendChildElement")},prepend:function(e,t,i){this._render(i),this._attach(e,t,i,"prependChildElement")},detach:function(){},hasLength:function(){return!1},inView:function(){return!1},_getDevice:function(e){return e.getCurrentApplication().getDevice()},_render:function(e){var t=this._getDevice(e);e.render(t)},_attach:function(e,t,i,n){this._getDevice(i)[n](t.outputElement,i.outputElement),e.setState("ATTACHED")}})}),define("antie/widgets/carousel/strips/utility/renderedstate",["antie/widgets/carousel/strips/utility/state"],function(e){"use strict";return e.extend({init:function(){},append:function(e,t,i){this._attach(e,t,i,"appendChildElement")},prepend:function(e,t,i){this._attach(e,t,i,"prependChildElement")},detach:function(){},hasLength:function(){return!1},inView:function(){return!1},_getDevice:function(e){return e.getCurrentApplication().getDevice()},_attach:function(e,t,i,n){this._getDevice(i)[n](t.outputElement,i.outputElement),e.setState("ATTACHED")}})}),define("antie/widgets/carousel/strips/utility/state",["antie/class"],function(e){"use strict";return e.extend({init:function(){},append:function(){},prepend:function(){},detach:function(){},hasLength:function(){},inView:function(){}})}),define("antie/widgets/carousel/strips/utility/states",["antie/widgets/carousel/strips/utility/initstate","antie/widgets/carousel/strips/utility/renderedstate","antie/widgets/carousel/strips/utility/attachedstate"],function(e,t,i){"use strict";return{INIT:e,RENDERED:t,ATTACHED:i}}),define("antie/widgets/carousel/strips/utility/visibilitystates",["antie/widgets/carousel/strips/utility/initstate","antie/widgets/carousel/strips/utility/hiddenstate","antie/widgets/carousel/strips/utility/visiblestate"],function(e,t,i){"use strict";return{INIT:e,HIDDEN:t,ATTACHED:i}}),define("antie/widgets/carousel/strips/utility/visiblestate",["antie/widgets/carousel/strips/utility/state"],function(e){"use strict";return e.extend({init:function(){},append:function(){},prepend:function(){},detach:function(e,t){this._getDevice(t).hideElement({el:t.outputElement,skipAnim:!0}),e.setState("HIDDEN")},hasLength:function(){return!0},inView:function(){return!0},_getDevice:function(e){return e.getCurrentApplication().getDevice(e)}})}),define("antie/widgets/carousel/strips/utility/widgetcontext",["antie/class"],function(e){"use strict";return e.extend({init:function(e,t,i){this._widget=e,this._parent=t,this.STATES=i,this._state=new this.STATES.INIT(this)},append:function(){this._state.append(this,this._parent,this._widget)},prepend:function(){this._state.prepend(this,this._parent,this._widget)},detach:function(){this._state.detach(this,this._widget)},hasLength:function(){return this._state.hasLength()},inView:function(){return this._state.inView()},setState:function(e){this._state=new this.STATES[e](this)}})}),define("antie/widgets/carousel/strips/widgetstrip",["antie/widgets/container"],function(e){"use strict";return e.extend({init:function(e,t){this._super(e),this.addClass(t.styleClass()),this._orientation=t,this._lengths=[],this.addClass("carouselwidgetstrip")},append:function(e,t){return this._lengths.push(t),this.appendChildWidget(e)},insert:function(e,t,i){return this._lengths.splice(e,0,i),this.insertChildWidget(e,t)},remove:function(e,t){var i,n;for(n=this.widgets(),i=0;i!==n.length;i+=1)n[i]===e&&this._lengths.splice(i,1);return this.removeChildWidget(e,t)},removeAll:function(){return this._lengths=[],this.removeChildWidgets()},widgets:function(){return this.getChildWidgets()},getLengthToIndex:function(e){var t;return null!==(t=this._lengthToIndexUsingSuppliedValues(e))?t:this._lengthToIndexByCalculatingUsingElements(e)},setLengths:function(e){var t,i;if("number"==typeof e)for(t=this.getChildWidgetCount(),i=0;i!==t;i+=1)this._lengths[i]=e;else this._lengths=e},needsVisibleIndices:function(){return!1},attachIndexedWidgets:function(){},_lengthToIndexByCalculatingUsingElements:function(e){var t,i,n,r;for(t=[],i=this.getChildWidgets(),n=this._getValidatedIndex(i,e+1),r=0;r!==n;r+=1)t.push(i[r].outputElement);return this._getOffsetToLastElementInArray(t)},_lengthToIndexUsingSuppliedValues:function(e){var t,i,n;for(n=t=0;n!==Math.max(0,e);n+=1){if(void 0===this._lengths[n]){i=!0;break}t+=this._lengths[n]}return i?null:t},lengthOfWidgetAtIndex:function(e){var t;return void 0!==this._lengths[e]?this._lengths[e]:(t=this.getChildWidgets()[e],this._getWidgetLength(t))},recalculate:function(){},autoCalculate:function(){},_getValidatedIndex:function(e,t){var i;return(i=t)<0&&(i=0),t>e.length&&(i=e.length),i},_getOffsetToLastElementInArray:function(e){var t;return(t=0)<=e.length-1&&(t=this._getElementOffset(e[e.length-1])),t},_getElementOffset:function(e){return this._getDevice().getElementOffset(e)[this._getEdge()]},_getDevice:function(){return this.getCurrentApplication().getDevice()},_getDimension:function(){return this._orientation.dimension()},_getEdge:function(){return this._orientation.edge()},_getWidgetLength:function(e){return this._getElementLength(e.outputElement)},_getElementLength:function(e){return this._getDevice().getElementSize(e)[this._getDimension()]}})}),define("antie/widgets/carousel/strips/wrappingstrip",["antie/widgets/carousel/strips/widgetstrip"],function(e){"use strict";return e.extend({init:function(e,t){this._super(e,t),this._clones=[],this._prependedClones=[],this._appendedClones=[],this._widgetElements=[],this._elements=[],this._elementIndexOffset=0,this.addClass("carouselwidgetstrip"),this._autoCalculate=!0},render:function(e){var t;for(this.outputElement?e.clearElement(this.outputElement):this.outputElement=e.createContainer(this.id,this.getClasses()),t=0;t!==this._elements.length;t++)e.appendChildElement(this.outputElement,this._elements[t]);return this.outputElement},append:function(e,t){this._super(e,t),this._recalculateIfAuto()},insert:function(e,t,i){this._super(e,t,i),this._recalculateIfAuto()},remove:function(e,t){this._super(e,t),this._recalculateIfAuto()},getLengthToIndex:function(e){var t;return null!==(t=this._lengthToIndexUsingSuppliedValues(e))?t:this._getLengthOfElementArrayUpToIndex(this.getChildElements(),e+this._elementIndexOffset)},getChildElements:function(){return this._elements},recalculate:function(){this._removeClones(),this._createClones(this._getMaskLength())},autoCalculate:function(e){"boolean"==typeof e&&(this._autoCalculate=e)},lengthOfWidgetAtIndex:function(e){var t;return"number"==typeof(t=this._lengthOfWidgetAtIndexUsingSuppliedValues(e))?t:this._getElementLength(this._elements[e+this._elementIndexOffset])},_lengthToIndexUsingSuppliedValues:function(){return null},_lengthOfWidgetAtIndexUsingSuppliedValues:function(){return null},_refereshWidgetElements:function(){var e,t;for(this._widgetElements=[],e=this.getChildWidgets(),t=0;t!==e.length;t+=1)this._widgetElements.push(e[t].outputElement||e[t].render(this._getDevice()))},_recalculateIfAuto:function(){!0===this._autoCalculate&&this.recalculate()},_refreshElements:function(){this._refereshWidgetElements(),this._elements=this._prependedClones.concat(this._widgetElements.concat(this._appendedClones)),this._elementIndexOffset=this._getPrependedClones().length},_getLengthOfElementArrayUpToIndex:function(e,t){var i,n;return n=this._getValidatedIndex(e,t),i=e.slice(0,n+1),this._getOffsetToLastElementInArray(i)},_firstFocusableIndex:function(e){var t,i;for(t=0,i=null;null===i&&t!==e.length;)i=e[t].isFocusable()?t:null,t+=1;return i},_createClones:function(e){var t,i,n,r,s;for(i=this.getCurrentApplication().getDevice(),t=this.getChildWidgets(),n=this._cloneFrontItems(t,e),s=0;s!==n.length;s+=1)i.appendChildElement(this.outputElement,n[s]);for(r=this._cloneRearItems(t,e),s=0;s!==r.length;s+=1)i.prependChildElement(this.outputElement,r[s]);this._prependedClones=r.reverse(),this._appendedClones=n,this._clones=r.concat(n),this._refreshElements()},_cloneFrontItems:function(e,t){var i,n,r;return r=[],null!==(i=this._firstFocusableIndex(e))&&(n=t+this.getLengthToIndex(i),r=this._cloneFromIndexToLength(e,0,n)),r},_cloneRearItems:function(e,t){var i;return(i=e.slice(0)).reverse(),this._cloneFrontItems(i,t)},_cloneFromIndexToLength:function(e,t,i){var n,r,s,o;for(n=[],r=0,s=t;r<i;)o=e[s],n.push(this._cloneWidget(o)),r+=this._getWidgetLength(o),(s+=1)===e.length&&(s=0);return n},_cloneWidget:function(e){return this._cloneElement(e.outputElement)},_cloneElement:function(e){var t;return t=this._getDevice().cloneElement(e,!0,"carouselclone","_CarouselClone"),this._removeStateStylesFromElement(t),t},_removeStateStylesFromElement:function(e){var t;(t=this.getCurrentApplication().getDevice()).removeClassFromElement(e,"focus",!0),t.removeClassFromElement(e,"active",!0),t.removeClassFromElement(e,"buttonFocussed",!0)},_removeClones:function(){var e,t,i;for(i=this.getCurrentApplication().getDevice(),e=0;e!==this._clones.length;e+=1)t=this._clones[e],i.removeElement(t);this._clones=[],this._prependedClones=[],this._appendedClones=[],this._refreshElements()},_getPrependedClones:function(){return this._prependedClones},_getAppendedClones:function(){return this._appendedClones},_getClones:function(){return this._clones},_getMaskLength:function(){return this.parentWidget.getLength()}})}),define("antie/widgets/component",["antie/widgets/container","antie/runtimecontext"],function(e,t){"use strict";return e.extend({init:function(e){this._super(e),this.addClass("component"),this._isModal=!1},hide:function(){this.parentWidget&&this.parentWidget.hide()},getCurrentState:function(){return null},getIsModal:function(){return this._isModal},setIsModal:function(e){this._isModal=e},getConfig:function(){return t.getDevice().getConfig()},isComponent:function(){return!0}})}),define("antie/widgets/componentcontainer",["antie/widgets/container","antie/events/componentevent"],function(e,p){"use strict";var f={},t=e.extend({init:function(e){this._loadingIndex=0,this._loadingModule=null,this._currentModule=null,this._currentComponent=null,this._currentArgs=null,this._historyStack=[],this._previousFocus=null,this._super(e),this.addClass("componentcontainer")},_loadComponentCallback:function(e,t,i,n,r){if(this.getCurrentApplication()){var s=new t;(f[e]=s).parentWidget=this,s.bubbleEvent(new p("load",this,f[e],i)),s.parentWidget=null,this.show(e,i,n,r)}},show:function(t,i,n,r,s,o){this._loadingModule=t,this._loadingIndex++;var a,l=this._loadingIndex;if(f[t]){var e=this.getCurrentApplication().getDevice(),c=this.getCurrentApplication().getFocussedWidget();if(this._currentComponent&&this.hide(null,i,n,r,s),this._currentModule=t,this._currentComponent=f[t],this._currentArgs=i,s||(this._previousFocus=c),!this._isFocussed)for(var u=this._currentComponent;u;)u.removeFocus(),u=u._activeChildWidget;(this._currentComponent.parentWidget=this)._currentComponent.bubbleEvent(new p("beforerender",this,this._currentComponent,i,r,s)),this._currentComponent.render(e),this._currentComponent.parentWidget=null,e.hideElement({el:this._currentComponent.outputElement,skipAnim:!0}),this.appendChildWidget(this._currentComponent);var d=new p("beforeshow",this,this._currentComponent,i,r,s);if(this._currentComponent.bubbleEvent(d),o&&o.focus(),a=this,!d.isDefaultPrevented()){var h=e.getConfig(),g=!h.widgets||!h.widgets.componentcontainer||!1!==h.widgets.componentcontainer.fade;e.showElement({el:this._currentComponent.outputElement,skipAnim:!g,onComplete:function(){a._currentComponent.bubbleEvent(new p("aftershow",a,a._currentComponent,i,r,s))}})}a.setActiveChildWidget(a._currentComponent)||(a._activeChildWidget=a._currentComponent,a.getCurrentApplication().getDevice().getLogger().warn("active component is not currently focusable",a._activeChildWidget))}else a=this,require([t],function(e){a._loadingModule===t&&a._loadingIndex===l&&a._loadComponentCallback(t,e,i,n,r,s,o)})},pushComponent:function(e,t){this.show(e,t,!0)},getContent:function(){return this._currentComponent},back:function(){var e=this._currentComponent.getIsModal()?this._previousFocus:null,t=this._historyStack.pop();t?(this._previousFocus=t.previousFocus,this.show(t.module,t.args,!0,t.state,!0,e)):this.hide(null,null,!1,null,!1)},hide:function(e,t,i,n,r){if(this._currentComponent){var s=new p("beforehide",this,this._currentComponent,t,n,r);this._currentComponent.bubbleEvent(s);var o=i?this._currentComponent.getCurrentState():null;this.removeChildWidget(this._currentComponent,s.isDefaultPrevented());var a=this._currentComponent;this._currentComponent=null,a.parentWidget=this,a.bubbleEvent(new p("afterhide",this,a,t,n,r)),a.parentWidget=null,i?r||this._historyStack.push({module:this._currentModule,args:this._currentArgs,state:o,previousFocus:this._previousFocus}):(a.getIsModal()&&!r&&(0<this._historyStack.length?this._historyStack[0].previousFocus.focus():this._previousFocus&&this._previousFocus.focus()),this._historyStack=[])}this._isFocussed&&e&&this.parentWidget.setActiveChildWidget(this.parentWidget._childWidgets[e])},getCurrentModule:function(){return this._currentModule},getCurrentArguments:function(){return this._currentArgs}});return t.destroy=function(){for(var e in f)f.hasOwnProperty(e)&&delete f[e]},t}),define("antie/widgets/container",["antie/widgets/widget","antie/events/focusevent","antie/events/blurevent"],function(e,t,i){"use strict";var n;return n=e.extend({init:function(e){this._childWidgets={},this._childWidgetOrder=[],this._activeChildWidget=null,this._autoRenderChildren=!0,this._super(e),this.addClass("container")},render:function(e){var t;for(this.outputElement?e.clearElement(this.outputElement):this.outputElement=e.createContainer(this.id,this.getClasses()),t=0;t<this._childWidgetOrder.length;t++)e.appendChildElement(this.outputElement,this._childWidgetOrder[t].render(e));return this.outputElement},appendChildWidget:function(e){if(!this.hasChildWidget(e.id)){if(this._childWidgets[e.id]=e,this._childWidgetOrder.push(e),(e.parentWidget=this)._activeChildWidget||this.setActiveChildWidget(e),this.outputElement&&this._autoRenderChildren){var t=this.getCurrentApplication().getDevice();t.appendChildElement(this.outputElement,e.render(t))}return e}},prependWidget:function(e){if(this.parentWidget instanceof n){var t,i;for(t=this.parentWidget._childWidgetOrder,i=0;i!==t.length&&t[i]!==this;i+=1);this.parentWidget.insertChildWidget(i,e)}return e},insertChildWidget:function(e,t){if(!this.hasChildWidget(t.id)){if(e>=this._childWidgetOrder.length)return this.appendChildWidget(t);if(this._childWidgets[t.id]=t,this._childWidgetOrder.splice(e,0,t),(t.parentWidget=this)._activeChildWidget||this.setActiveChildWidget(t),this.outputElement&&this._autoRenderChildren){var i=this.getCurrentApplication().getDevice();t.outputElement||t.render(i),i.insertChildElementBefore(this.outputElement,t.outputElement,this._childWidgetOrder[e+1].outputElement)}return t}},removeChildWidgets:function(){this._isFocussed&&this._activeChildWidget&&this.getCurrentApplication().getDevice().getLogger().warn("Removing widget that currently has focus: "+this._activeChildWidget.id);this.outputElement&&this.getCurrentApplication().getDevice().clearElement(this.outputElement);for(var e=0;e<this._childWidgetOrder.length;e++)this._childWidgetOrder[e].parentWidget=null;this._childWidgets={},this._childWidgetOrder=[],this._activeChildWidget=null},removeChildWidget:function(e,t){if(e){var i=this.getIndexOfChildWidget(e);if(!(i<0)){if(e._isFocussed)this.getCurrentApplication().getDevice().getLogger().warn("Removing widget that currently has focus: "+e.id);if(!t&&e.outputElement)this.getCurrentApplication().getDevice().removeElement(e.outputElement);this._childWidgetOrder.splice(i,1),delete this._childWidgets[e.id],e.parentWidget=null}}},hasChildWidget:function(e){return!!this._childWidgets[e]},getChildWidget:function(e){return this._childWidgets[e]},getChildWidgets:function(){return this._childWidgetOrder},getIndexOfChildWidget:function(e){return this._childWidgetOrder.indexOf(e)},setActiveChildWidget:function(e){if(!e)return!1;if(this.hasChildWidget(e.id)&&e.isFocusable()){if(this._activeChildWidget&&this._activeChildWidget!==e&&(this._activeChildWidget.removeClass("active"),this._setActiveChildFocussed(!1)),e.addClass("active"),this._activeChildWidget=e,!this.getCurrentApplication().getFocussedWidget())for(var t=this;t.parentWidget;)(t.parentWidget._activeChildWidget=t)._isFocussed=!0,t=t.parentWidget;return this._isFocussed&&this._setActiveChildFocussed(!0),!0}return!1},setActiveChildIndex:function(e){if(e<0||e>=this._childWidgetOrder.length)throw new Error("Widget::setActiveChildIndex Index out of bounds. "+this.id+" contains "+this._childWidgetOrder.length+" children, but an index of "+e+" was specified.");return this.setActiveChildWidget(this._childWidgetOrder[e])},getActiveChildWidget:function(){return this._activeChildWidget},_setActiveChildFocussed:function(e){this._activeChildWidget&&this._activeChildWidget._isFocussed!==e&&((this._activeChildWidget._isFocussed=e)?(this._activeChildWidget.addClass("focus"),this._activeChildWidget.bubbleEvent(new t(this._activeChildWidget))):(this._activeChildWidget.removeClass("focus"),this._activeChildWidget.bubbleEvent(new i(this._activeChildWidget))),this._activeChildWidget._setActiveChildFocussed(e))},getChildWidgetCount:function(){return this._childWidgetOrder.length},isFocusable:function(){for(var e=0;e<this._childWidgetOrder.length;e++)if(this._childWidgetOrder[e].isFocusable())return this._activeChildWidget||this.setActiveChildWidget(this._childWidgetOrder[e]),!0;return!1},setAutoRenderChildren:function(e){this._autoRenderChildren=e},broadcastEvent:function(e){if(this.fireEvent(e),!e.isPropagationStopped())for(var t=0;t<this._childWidgetOrder.length;t++)this._childWidgetOrder[t].broadcastEvent(e)},focus:function(){return!!this._activeChildWidget&&this._activeChildWidget.focus()}})}),define("antie/widgets/grid",["antie/widgets/container","antie/events/keyevent","antie/events/selecteditemchangeevent"],function(e,o,n){"use strict";return e.extend({init:function(e,t,i){this._super(e),this.addClass("grid"),this._cols=t,this._rows=i,this._selectedRow=0;for(var n=this._selectedCol=0;n<t*i;n++)this._childWidgetOrder.push(null);var r=this;this.addEventListener("keydown",function(e){r._onKeyDown(e)})},getWidgetAt:function(e,t){return this._childWidgetOrder[this._cols*t+e]},setWidgetAt:function(e,t,i){if(!this.hasChildWidget(i.id)&&(this._childWidgets[i.id]=i,((this._childWidgetOrder[this._cols*t+e]=i).parentWidget=this)._activeChildWidget||this.setActiveChildWidget(i),this.outputElement&&this._autoRenderChildren)){var n=this.getCurrentApplication().getDevice();i.outputElement||i.render(n),n.appendChildElement(this.outputElement,i.outputElement)}},render:function(e){var t;this.outputElement?e.clearElement(this.outputElement):this.outputElement=e.createContainer(this.id,this.getClasses());for(var i=0;i<this._rows;i++){t=e.createContainer(this.id+"_row_"+i,["row"]);for(var n=0;n<this._cols;n++){var r=this.getWidgetAt(n,i);if(r)0===n?r.addClass("firstcol"):n===this._cols-1&&r.addClass("lastcol"),e.appendChildElement(t,this.getWidgetAt(n,i).render(e));else{var s=["spacer"];0===n?s.push("firstcol"):n===this._cols-1&&s.push("lastcol"),e.appendChildElement(t,e.createContainer(this.id+"_"+n+"_"+i,s))}}e.appendChildElement(this.outputElement,t)}return this.outputElement},appendChildWidget:function(){throw new Error("Not supported")},insertChildWidget:function(){throw new Error("Not supported")},removeChildWidget:function(){throw new Error("Not supported")},setActiveChildWidget:function(e){var t=this._activeChildWidget!==e;if(this._super(e)){var i=this.getIndexOfChildWidget(e);return this._selectedRow=Math.floor(i/this._cols),this._selectedCol=Math.floor(i%this._cols),t&&this.bubbleEvent(new n(this,e,i)),!0}return!1},_onKeyDown:function(e){if(e.keyCode===o.VK_UP||e.keyCode===o.VK_DOWN||e.keyCode===o.VK_LEFT||e.keyCode===o.VK_RIGHT){for(var t=this._selectedCol,i=this._selectedRow,n=null;;){if(e.keyCode===o.VK_UP?i--:e.keyCode===o.VK_DOWN?i++:e.keyCode===o.VK_LEFT?t--:e.keyCode===o.VK_RIGHT&&t++,t<0||t>=this._cols)break;if(i<0||i>=this._rows)break;var r=i*this._cols+t,s=this._childWidgetOrder[r];if(s&&s.isFocusable()){n=s;break}}n&&(this.setActiveChildWidget(n),e.stopPropagation())}},broadcastEvent:function(e){if(this.fireEvent(e),!e.isPropagationStopped())for(var t=0;t<this._childWidgetOrder.length;t++)this._childWidgetOrder[t]&&this._childWidgetOrder[t].broadcastEvent(e)}})}),define("antie/widgets/horizontalcarousel",["antie/widgets/horizontallist","antie/widgets/list","antie/events/keyevent","antie/events/beforeselecteditemchangeevent"],function(e,m,t,h){"use strict";var v=e.extend({init:function(e,t,i,n,r){this._prefixClones=0,this._wrapMode=v.WRAP_MODE_VISUAL,this._viewportMode=v.VIEWPORT_MODE_NONE,this._viewportSize=0,this._activateThenScroll=!1,this._scrollHandle=null,this._keepHidden=!1,this._multiWidthItems=!1,this._overrideAnimation=n,this._activeWidgetAlignment=r||v.ALIGNMENT_CENTER,this._activeWidgetAnimationFPS=25,this._activeWidgetAnimationDuration=840,this._activeWidgetAnimationEasing="easeFromTo",this._nodeOffset=0,this._childWidgetsInDocument=[],this._paddingItemsCreated=!1,this._super(e,t,i),this.addClass("horizontalcarousel");var s=this;this.addEventListener("databound",function(e){if(e.target===s){var t=s.getCurrentApplication().getDevice().getConfig(),i=100;t.widgets&&t.widgets.horizontalcarousel&&t.widgets.horizontalcarousel.bindDelay&&(i=t.widgets.horizontalcarousel.bindDelay),setTimeout(function(){s._onDataBound(e)},i)}})},render:function(e){if(this._maskElement?(e.clearElement(this._maskElement),this._childWidgetsInDocument=[]):this._maskElement=e.createContainer(this.id+"_mask",["horizontallistmask","notscrolling"]),this._viewportMode!==v.VIEWPORT_MODE_DOM?e.appendChildElement(this._maskElement,this._super(e)):(!this._dataBound&&this._dataSource&&this._itemFormatter&&this._createDataBoundItems(e),this.outputElement||(this._renderMode===m.RENDER_MODE_LIST?this.outputElement=e.createList(this.id,this.getClasses()):this.outputElement=e.createContainer(this.id,this.getClasses())),e.appendChildElement(this._maskElement,this.outputElement)),this._dataSource)e.hideElement({el:this._maskElement,skipAnim:!0});else{var t=this,i=e.getConfig(),n=100;i.widgets&&i.widgets.horizontalcarousel&&i.widgets.horizontalcarousel.bindDelay&&(n=i.widgets.horizontalcarousel.bindDelay),setTimeout(function(){t._onDataBound()},n)}return this._maskElement},refreshViewport:function(){var e=this._activeChildWidget||this._childWidgetOrder[0];if(e){var t,i,n,r,s=this.getCurrentApplication().getDevice();if(this._viewportMode===v.VIEWPORT_MODE_DOM){for(this.setAutoRenderChildren(!0),e.outputElement||(e.outputElement=e.render(s)),t=0;t<this._childWidgetsInDocument.length;t++)((i=t+this._nodeOffset)<this._selectedIndex-this._viewportSize||i>this._selectedIndex+this._viewportSize)&&this._childWidgetsInDocument[t].outputElement&&s.removeElement(this._childWidgetsInDocument[t].outputElement);this._childWidgetsInDocument=[];var o=(o=this._selectedIndex-this._viewportSize)<0?0:o;for(t=o;t<=this._selectedIndex+this._viewportSize&&t<this._childWidgetOrder.length;t++)i=t-o+this._prefixClones,this._childWidgetOrder[t].addClass("inviewport"),this._childWidgetOrder[t].outputElement||(this._childWidgetOrder[t].outputElement=this._childWidgetOrder[t].render(s)),s.getElementParent(this._childWidgetOrder[t].outputElement)||s.insertChildElementAt(this.outputElement,this._childWidgetOrder[t].outputElement,i),this._childWidgetsInDocument.push(this._childWidgetOrder[t]);this._nodeOffset=this._selectedIndex-this._viewportSize,this._nodeOffset<0&&(this._nodeOffset=0),n=s.getElementOffset(e.outputElement),r=s.getElementSize(e.outputElement),this._alignToElement(e.outputElement,!0),this.setAutoRenderChildren(!1)}else if(this._viewportMode===v.VIEWPORT_MODE_CLASSES&&this.outputElement&&e.outputElement){n=(s=this.getCurrentApplication().getDevice()).getElementOffset(e.outputElement),r=s.getElementSize(e.outputElement);var a,l,c=s.getElementSize(this._maskElement),u=s.getChildElementsByTagName(this.outputElement,this._renderMode===m.RENDER_MODE_LIST?"li":"div"),d=n.left+r.width/2-c.width/2,h=n.left+r.width/2+c.width/2,g=n.left+r.width/2-1.5*c.width,p=n.left+r.width/2+1.5*c.width;for(t=0;t<u.length;t++)(l=u[t]).cloneOfWidget||(a=this._childWidgetOrder[t-this._prefixClones])&&(a.removeClass("inviewport"),a.removeClass("nearviewport"));for(t=0;t<u.length;t++){l=u[t];var f=s.getElementOffset(l),_=s.getElementSize(l);(a=l.cloneOfWidget||this._childWidgetOrder[t-this._prefixClones])&&(f.left+_.width>=d&&f.left<h?(l.cloneOfWidget&&(s.removeClassFromElement(l,"nearviewport"),s.addClassToElement(l,"inviewport")),a.removeClass("nearviewport"),a.addClass("inviewport")):f.left+_.width>=g&&f.left<p?(l.cloneOfWidget&&(s.removeClassFromElement(l,"inviewport"),s.addClassToElement(l,"nearviewport")),a.removeClass("inviewport"),a.addClass("nearviewport")):l.cloneOfWidget&&(s.removeClassFromElement(l,"inviewport"),s.removeClassFromElement(l,"nearviewport")))}}}},setAnimationOverride:function(e){return this._overrideAnimation=!e,this._overrideAnimation},setActiveChildWidget:function(e,t){var i=this._super(e);return this._activeChildWidget&&this.outputElement&&t&&(this._viewportMode!==v.VIEWPORT_MODE_DOM&&this._alignToElement(this._activeChildWidget.outputElement,!0),this.refreshViewport()),i},setActiveChildIndex:function(e,t){if(e<0||e>=this._childWidgetOrder.length)throw new Error("HorizontalCarousel::setActiveChildIndex Index out of bounds. "+this.id+" contains "+this._childWidgetOrder.length+" children, but an index of "+e+" was specified.");return this.setActiveChildWidget(this._childWidgetOrder[e],t)},setDataSource:function(e){this._prefixClones=0,this._super(e)},rebindDataSource:function(){var e=this.getCurrentApplication().getDevice(),t=e.getConfig(),i=!t.widgets||!t.widgets.horizontalcarousel||!1!==t.widgets.horizontalcarousel.fade,n=this,r=this._super;e.hideElement({el:this._maskElement,skipAnim:!i,onComplete:function(){r.call(n)}})},_onKeyDown:function(e){if(!this._scrollHandle||e.keyCode!==t.VK_LEFT&&e.keyCode!==t.VK_RIGHT&&e.keyCode!==t.VK_UP&&e.keyCode!==t.VK_DOWN)switch(e.keyCode){case t.VK_LEFT:this.selectPreviousChildWidget()&&e.stopPropagation();break;case t.VK_RIGHT:this.selectNextChildWidget()&&e.stopPropagation()}else e.stopPropagation()},_onDataBound:function(){var e=this.getCurrentApplication();if(e){var t=e.getDevice();if(0<this._childWidgetOrder.length){var i,n,r=t.getElementSize(this._maskElement),s=0,o=0,a=0;if(this._nodeOffset=0,this._childWidgetsInDocument=[],this._viewportMode===v.VIEWPORT_MODE_NONE)for(i=0;i<this._childWidgetOrder.length;i++)this._childWidgetOrder[i].addClass("inviewport");if(this._wrapMode!==v.WRAP_MODE_VISUAL){if(this._paddingItemsCreated){var l=this._renderMode===m.RENDER_MODE_LIST?t.createListItem:t.createContainer,c=l.call(t,this.id+"PaddingLeft",["viewportPadding","viewportPaddingLeft"]);t.setElementSize(c,{width:r.width}),t.prependChildElement(this.outputElement,c);var u=l.call(t,this.id+"PaddingRight",["viewportPadding","viewportPaddingRight"]);t.setElementSize(u,{width:r.width}),t.appendChildElement(this.outputElement,u),a=1}this._paddingItemsCreated=!0}else{for(var d=this._multiWidthItems?r.width:Math.ceil(r.width/2);s<d;)i=this._childWidgetOrder[o],((n=t.cloneElement(i.outputElement,!0,"clone","_clone")).cloneOfWidget=i).hasClass("active")&&t.removeClassFromElement(n,"active",!0),i.hasClass("focus")&&(t.removeClassFromElement(n,"focus",!0),t.removeClassFromElement(n,"buttonFocussed",!0)),t.appendChildElement(this.outputElement,n),i=t.getElementSize(i.outputElement).width,0===o&&1!==this._childWidgetOrder.length&&(d+=i),s+=i,++o===this._childWidgetOrder.length&&(o=0);for(s=0,o=this._childWidgetOrder.length-1;s<d;)i=this._childWidgetOrder[o],((n=t.cloneElement(i.outputElement,!0,"clone","_clone")).cloneOfWidget=i).hasClass("active")&&t.removeClassFromElement(n,"active",!0),i.hasClass("focus")&&t.removeClassFromElement(n,"focus",!0),t.prependChildElement(this.outputElement,n),s+=t.getElementSize(i.outputElement).width,a++,-1===--o&&(o=this._childWidgetOrder.length-1)}this._prefixClones=a,this._activeChildWidget&&this._viewportMode!==v.VIEWPORT_MODE_DOM&&this._alignToElement(this._activeChildWidget.outputElement,!0),this.refreshViewport()}this.show({})}},show:function(e){var t=this.getCurrentApplication();if(t){var i=t.getDevice();if(this._keepHidden)return!1;var n=i.getConfig(),r=!n.widgets||!n.widgets.horizontalcarousel||!1!==n.widgets.horizontalcarousel.fade;return e.el=this._maskElement,e.skipAnim=!r,i.showElement(e)}},setWrapMode:function(e){if(this._viewportMode===v.VIEWPORT_MODE_DOM&&e===v.WRAP_MODE_VISUAL)throw new Error("HorizontalCarousel::setWrapMode - VIEWPORT_MODE_DOM not supported for WRAP_MODE_VISUAL");this._wrapMode=e},setViewportMode:function(e,t){if(this._wrapMode===v.WRAP_MODE_VISUAL&&e===v.VIEWPORT_MODE_DOM)throw new Error("HorizontalCarousel::setViewportMode - VIEWPORT_MODE_DOM not supported for WRAP_MODE_VISUAL");if(e===v.VIEWPORT_MODE_DOM){if(!t)throw new Error("HorizontalCarousel::setViewportMode - You must specify a viewport size when using VIEWPORT_MODE_DOM");this.setAutoRenderChildren(!1)}else this.setAutoRenderChildren(!0);this._viewportMode=e,this._viewportSize=t},setAlignment:function(e){this._activeWidgetAlignment=e},getAlignment:function(){return this._activeWidgetAlignment},setAlignmentOffset:function(e){this._activeWidgetAlignmentOffset=e},getAlignmentOffset:function(){return this._activeWidgetAlignmentOffset},setWidgetAnimationFPS:function(e){this._activeWidgetAnimationFPS=e},getWidgetAnimationFPS:function(){return this._activeWidgetAnimationFPS},setWidgetAnimationDuration:function(e){this._activeWidgetAnimationDuration=e},getWidgetAnimationDuration:function(){return this._activeWidgetAnimationDuration},setWidgetAnimationEasing:function(e){this._activeWidgetAnimationEasing=e},getWidgetAnimationEasing:function(){return this._activeWidgetAnimationEasing},setHasMultiWidthItems:function(e){this._multiWidthItems=e},setActivateThenScroll:function(e){this._activateThenScroll=e},setKeepHidden:function(e){this._keepHidden=e},getSelectedChildWidgetIndex:function(){return this._selectedIndex},selectPreviousChildWidget:function(){return this._moveChildWidgetSelection(v.SELECTION_DIRECTION_LEFT)},selectNextChildWidget:function(){return this._moveChildWidgetSelection(v.SELECTION_DIRECTION_RIGHT)},_moveChildWidgetSelection:function(e){var t=this.getCurrentApplication().getDevice();this._scrollHandle&&t.stopAnimation(this._scrollHandle);for(var i=this._selectedIndex,n=(this._selectedIndex,this._prefixClones,this._activeChildWidget),r=null,s=null,o=!1;;){if(e===v.SELECTION_DIRECTION_LEFT)if(0,0<i)i--;else{if(!(this._wrapMode&&3<this._childWidgetOrder.length))break;i=this._childWidgetOrder.length-1,o=!0}else if(e===v.SELECTION_DIRECTION_RIGHT)if(0,i<this._childWidgetOrder.length-1)i++;else{if(!(this._wrapMode&&3<this._childWidgetOrder.length))break;o=!(i=0)}var a=this._childWidgetOrder[i];if(a.isFocusable()){r=a;break}}if(o&&this._wrapMode===v.WRAP_MODE_VISUAL?s=this._getWrappedElement(e,n.outputElement):r&&(s=r.outputElement),r&&s){var l=this;this.bubbleEvent(new h(this,r,i));this._activateThenScroll&&(this.setActiveChildWidget(r),this._selectedIndex=i);var c=t.getElementOffset(s);0===c.left&&(c.left=1);var u=t.getConfig(),d=!u.widgets||!u.widgets.horizontalcarousel||!1!==u.widgets.horizontalcarousel.animate;return this._scrollHandle=this._alignToElement(s,this._isAnimationOverridden(d),function(){l._activateThenScroll||(l.setActiveChildWidget(r),l._selectedIndex=i),o&&l._wrapMode===v.WRAP_MODE_VISUAL&&l._alignToElement(l._activeChildWidget.outputElement,!0),l.refreshViewport(),l._scrollHandle=null}),!0}return!1},_getWrappedElement:function(e,t){for(;(t=e===v.SELECTION_DIRECTION_RIGHT?t.nextSibling:t.previousSibling)&&1!==t.nodeType;);return t},_isAnimationOverridden:function(e){return this._overrideAnimation||!e},_alignToElement:function(e,t,i){var n,r=this.getCurrentApplication().getDevice(),s=r.getElementOffset(e),o=r.getElementSize(e),a=r.getElementSize(this._maskElement),l=this._activeWidgetAlignmentOffset||0;switch(this._activeWidgetAlignment){case v.ALIGNMENT_CENTER:n=s.left-(a.width-o.width)/2+l;break;case v.ALIGNMENT_LEFT:n=s.left+l;break;case v.ALIGNMENT_RIGHT:n=s.left-(a.width-o.width)-l}return r.scrollElementTo({el:this._maskElement,to:{left:n},fps:this.getWidgetAnimationFPS(),duration:this.getWidgetAnimationDuration(),easing:this.getWidgetAnimationEasing(),skipAnim:t,onComplete:i})}});return v.ALIGNMENT_CENTER=0,v.ALIGNMENT_LEFT=1,v.ALIGNMENT_RIGHT=2,v.SELECTION_DIRECTION_RIGHT="right",v.SELECTION_DIRECTION_LEFT="left",v.WRAP_MODE_NONE=0,v.WRAP_MODE_NAVIGATION_ONLY=1,v.WRAP_MODE_VISUAL=2,v.VIEWPORT_MODE_NONE=0,v.VIEWPORT_MODE_CLASSES=1,v.VIEWPORT_MODE_DOM=2,v}),define("antie/widgets/horizontallist",["antie/widgets/list","antie/events/keyevent"],function(e,r){"use strict";var s=e.extend({init:function(e,t,i){this._maskElement=null,this._super(e,t,i),this.addClass("horizontallist");var n=this;this.addEventListener("keydown",function(e){n._onKeyDown(e)})},setWrapMode:function(e){this._wrapMode=e},_onKeyDown:function(e){if(e.keyCode===r.VK_LEFT||e.keyCode===r.VK_RIGHT){for(var t=this._selectedIndex,i=null;;){if(e.keyCode===r.VK_LEFT?t--:e.keyCode===r.VK_RIGHT&&t++,this._wrapMode===s.WRAP_MODE_WRAP)t=(t+this._childWidgetOrder.length)%this._childWidgetOrder.length;else if(t<0||t>=this._childWidgetOrder.length)break;var n=this._childWidgetOrder[t];if(n.isFocusable()){i=n;break}}return i&&(this.setActiveChildWidget(i),e.stopPropagation()),null!==i}}});return s.WRAP_MODE_NONE=0,s.WRAP_MODE_WRAP=1,s}),define("antie/widgets/horizontalprogress",["antie/widgets/container","antie/widgets/label"],function(e,n){"use strict";return e.extend({init:function(e,t,i){this._value=i||0,this._moveHandle=!1,this._lastLeft=null,this._super(e),this.addClass("horizontalprogress"),t&&(this._label=new n(e+"_label",""),this.addClass("haslabel"))},render:function(e){return this.outputElement=e.createContainer(this.id,this.getClasses()),this._leftElement=e.createContainer(this.id+"_left"),this._innerElement=e.createContainer(this.id+"_inner"),e.appendChildElement(this._leftElement,this._innerElement),e.appendChildElement(this.outputElement,this._leftElement),this._label&&e.appendChildElement(this.outputElement,this._label.render(e)),this._moveInner(),this.outputElement},_moveInner:function(){var e=this.getCurrentApplication().getDevice(),t=e.getElementSize(this._leftElement),i=e.getElementSize(this._innerElement),n=Math.floor(this._value*(t.width-i.width));if(n!==this._lastLeft){this._lastLeft=n,this._moveHandle&&e.stopAnimation(this._moveHandle);var r=e.getConfig(),s=!r.widgets||!r.widgets.horizontalprogress||!1!==r.widgets.horizontalprogress.animate;this._moveHandle=e.moveElementTo({el:this._innerElement,to:{left:n},skipAnim:!s})}},getValue:function(){return this._value},setValue:function(e){this._value=e,this._moveInner()},setText:function(e){this._label&&this._label.setText(e)}})}),define("antie/widgets/horizontalslider",["antie/widgets/button","antie/events/focusevent","antie/events/blurevent","antie/events/keyevent","antie/events/selectevent","antie/events/sliderchangeevent"],function(e,t,i,n,r,s){"use strict";return e.extend({init:function(e,t,i,n,r){this._value=t||0,this._smallIncrement=i||.01,this._largeIncrement=n||.05,this._largeIncrementAfter=r||10,this._lastLeft=-1,this._keyPressTimer=null,this._super(e),this.addClass("horizontalslider"),this._currentIncrementCount=0,this._currentChanged=!1;var s=this;this.addEventListener("keydown",function(e){s._onKeyDown(e)}),this.addEventListener("keypress",function(e){s._onKeyPress(e)}),this.addEventListener("keyup",function(e){s._onKeyUp(e)})},render:function(e){return this.outputElement=e.createContainer(this.id,this.getClasses()),this._button=e.createButton(this.id+"_slider"),this._left=e.createContainer(this.id+"_left"),e.addClassToElement(this._button,"horizontalsliderhandle"),e.addClassToElement(this._left,"horizontalsliderleft"),e.appendChildElement(this.outputElement,this._left),e.appendChildElement(this.outputElement,this._button),this._moveButton(),this.outputElement},_moveButton:function(){if(this.outputElement){var e=this.getCurrentApplication().getDevice(),t=e.getElementSize(this.outputElement),i=Math.floor(this._value*t.width);i!==this._lastLeft&&(this._lastLeft=i,0===this._value?(this.addClass("start"),this.removeClass("end")):1===this._value?(this.removeClass("start"),this.addClass("end")):(this.removeClass("start"),this.removeClass("end")),e.moveElementTo({el:this._button,to:{left:i},skipAnim:!0}),e.setElementSize(this._left,{width:i}))}},_onKeyDown:function(e){if(e.keyCode===n.VK_LEFT||e.keyCode===n.VK_RIGHT){var t=!1;this._currentIncrementCount++;var i=this._currentIncrementCount>this._largeIncrementAfter?this._largeIncrement:this._smallIncrement;e.keyCode===n.VK_LEFT&&0<this._value?(this._value-=i,this._value<0&&(this._value=0),t=!0):e.keyCode===n.VK_RIGHT&&this._value<1&&(this._value+=i,1<this._value&&(this._value=1),t=!0),t&&(this._moveButton(),this._currentChanged=!0,this.fireEvent(new s("sliderchange",this,this._value)))}},_onKeyPress:function(e){if(e.keyCode===n.VK_LEFT||e.keyCode===n.VK_RIGHT){this._keyPressTimer&&(window.clearTimeout(this._keyPressTimer),this._keyPressTimer=null);var t=!1;this._currentIncrementCount++;var i=this._currentIncrementCount>this._largeIncrementAfter?this._largeIncrement:this._smallIncrement;e.keyCode===n.VK_LEFT&&0<this._value?(this._value-=i,this._value<0&&(this._value=0),t=!0):e.keyCode===n.VK_RIGHT&&this._value<1&&(this._value+=i,1<this._value&&(this._value=1),t=!0),t&&(this._moveButton(),this._currentChanged=!0,this.fireEvent(new s("sliderchange",this,this._value)))}},_onKeyUp:function(e){if(e.keyCode===n.VK_LEFT||e.keyCode===n.VK_RIGHT){this._keyPressTimer&&window.clearTimeout(this._keyPressTimer);var t=this;this._keyPressTimer=window.setTimeout(function(){t._keyPressTimer=null,t._currentChanged&&(t.fireEvent(new s("sliderchangeend",t,t._value)),t._currentChanged=!1,t._currentIncrementCount=0,t._currentIncrement=t._smallIncrement)},800)}},getValue:function(){return this._value},setValue:function(e){this._value=e,this._moveButton()},setSmallIncrement:function(e){this._smallIncrement=e}})}),define("antie/widgets/image",["antie/widgets/container"],function(e){"use strict";var r=e.extend({init:function(e,t,i,n){this._super(e),this._src=t,this._size=i,this._imageElement=null,this._renderMode=n===r.RENDER_MODE_IMG?r.RENDER_MODE_IMG:r.RENDER_MODE_CONTAINER,this.addClass("image")},render:function(e){return this._imageElement=e.createImage(this.id+"_img",null,this._src,this._size),this._renderMode===r.RENDER_MODE_CONTAINER?(this.outputElement=this._super(e),this._size&&e.setElementSize(this.outputElement,this._size),e.prependChildElement(this.outputElement,this._imageElement)):(this.outputElement=this._imageElement,e.setElementClasses(this.outputElement,this.getClasses())),this.outputElement},setSrc:function(e){this._src=e,this._imageElement&&(this._imageElement.src=e)},getSrc:function(){return this._src},setRenderMode:function(e){this._renderMode=e},getRenderMode:function(){return this._renderMode}});return r.RENDER_MODE_IMG=0,r.RENDER_MODE_CONTAINER=1,r}),define("antie/widgets/keyboard",["antie/widgets/grid","antie/widgets/button","antie/widgets/label","antie/events/keyevent","antie/events/textchangeevent"],function(e,l,c,r,s){"use strict";var o=e.extend({init:function(e,t,i,n){this._super(e,t,i),this.addClass("keyboard");var r=this,s=r.getCurrentApplication().getDevice();this._multitapConfig=s.getConfig().input.multitap,this._focussedCharacter=null,this._currentText="",this._letterButtons=[],this._keys=n,this._multiTap=!1,this._multiTapTimeout=null,this._multiTapLastKey=null,this._multiTapLastKeyIndex=0,this._capitalisation=o.CAPITALISATION_UPPER,this._maximumLength=null,this.addEventListener("select",function(e){r._onSelectHandler(e)}),this.addEventListener("keydown",function(e){r._onKeyDownHandler(e)}),this._populateTheGridWithKeyButtons(e,t,i)},_appendCharacter:function(e){return!(null!==this._maximumLength&&this._currentText.length>=this._maximumLength)&&(e=this._capitalisation===o.CAPITALISATION_LOWER||this._capitalisation!==o.CAPITALISATION_UPPER&&0!==this._currentText.length&&" "!==this._currentText[this._currentText.length-1]?e.toLowerCase():e.toUpperCase(),this._currentText+=e,this._correctTitleCase(),!0)},_correctTitleCase:function(){this._capitalisation===o.CAPITALISATION_TITLE&&(this._currentText=this._currentText.replace(o.LAST_WORD_REGEXP,function(e){return(e=e.substring(0,1).toUpperCase()+e.substring(1)).replace(o.SHORT_WORD_REGEXP,function(e){return e.toLowerCase()})}),this._currentText=this._currentText.substring(0,1).toUpperCase()+this._currentText.substring(1))},_onSelectHandler:function(e){var t=e.target.getDataItem(),i=!1;switch(t){case"DEL":0<this._currentText.length&&(this._currentText=this._currentText.substring(0,this._currentText.length-1),this._correctTitleCase(),i=!0);break;case"SPACE":i=this._appendCharacter(" ");break;default:i=this._appendCharacter(t)}i&&(this._updateClasses(),this.bubbleEvent(new s(this,this._currentText,e.target,!1)))},_onKeyDownHandler:function(e){if(e.keyChar)if(e.stopPropagation(),this._multitapConfig&&this._multiTap&&/[0-9]/.test(e.keyChar)){this._multiTapTimeout&&clearTimeout(this._multiTapTimeout);var t=this._multitapConfig[e.keyChar];for(e.keyChar===this._multiTapLastKey&&this._multiTapTimeout?this._currentText=this._currentText.substring(0,this._currentText.length-1):this._multiTapLastKeyIndex=-1;this._multiTapLastKeyIndex++,this._multiTapLastKeyIndex>=t.length&&(this._multiTapLastKeyIndex=0),!this._letterButtons[t[this._multiTapLastKeyIndex]];);this._focussedCharacter=t[this._multiTapLastKeyIndex],this._letterButtons[t[this._multiTapLastKeyIndex]].focus(),this._appendCharacter(t[this._multiTapLastKeyIndex]),this._multiTapLastKey=e.keyChar,this._updateClasses(),this.bubbleEvent(new s(this,this._currentText,null,!0));var i=this;this._multiTapTimeout=setTimeout(function(){i._multiTapTimeout=null,i.bubbleEvent(new s(this,i._currentText,null,!1))},1e3)}else{var n=this._letterButtons[e.keyChar];n&&(this._focussedCharacter=e.keyChar,n.focus(),n.select())}else e.keyCode===r.VK_BACK_SPACE?0<this._currentText.length&&(this._currentText=this._currentText.substring(0,this._currentText.length-1),this._correctTitleCase(),this._updateClasses(),this.bubbleEvent(new s(this,this._currentText,null,!1))):e.keyCode===r.VK_RIGHT&&this._multiTapTimeout&&(this._multiTapTimeout=null,this.bubbleEvent(new s(this,this._currentText,null,!1)),e.stopPropagation())},_populateTheGridWithKeyButtons:function(e,t,i){for(var n=0;n<t;n++)for(var r=0;r<i;r++){var s=r*t+n,o=this._keys[s];if(" "===o)o="SPACE";else if("-"===o)o="DEL";else if("_"===o)continue;var a=new l(this.id+"_"+o+"_"+n+"_"+r);a.setDataItem(o),a.addClass("key"+o),a.addClass("keyboardButton"),a.appendChildWidget(new c(o)),this._letterButtons[this._keys[s]]=a,this.setWidgetAt(n,r,a)}},setMultiTap:function(e){this._multiTap=e},getMultiTap:function(){return this._multiTap},setText:function(e){this._currentText=e,this._updateClasses()},getText:function(){return this._currentText},setCapitalisation:function(e){this._capitalisation=e},getCapitalisation:function(){return this._capitalisation},setActiveChildKey:function(e){this._focussedCharacter=e,this.setActiveChildWidget(this._letterButtons[e])},focus:function(){this._letterButtons[this._focussedCharacter].focus()},setFocusToActiveChildKey:function(e){this.setActiveChildKey(e),this.focus()},setMaximumLength:function(e){this._maximumLength=e},getMaximumLength:function(){return this._maximumLength},_updateClasses:function(){null!==this._maximumLength&&null!==this._currentText&&this._currentText.length>=this._maximumLength?(this.addClass("maxlength"),this.setActiveChildKey("-")):this.removeClass("maxlength")}});return o.LAST_WORD_REGEXP=/([^\s]+)$/,o.SHORT_WORD_REGEXP=/^(to|is|in|on|it|and|at|by|a|an|of|if)$/i,o.CAPITALISATION_UPPER=0,o.CAPITALISATION_LOWER=1,o.CAPITALISATION_TITLE=2,o}),define("antie/widgets/label",["antie/widgets/widget"],function(e){"use strict";var o=e.extend({init:function(e,t){1===arguments.length?(this._text=e,this._super()):(this._text=t,this._super(e)),this._truncationMode=o.TRUNCATION_MODE_NONE,this._maxLines=0,this._width=0,this.addClass("label")},render:function(e){var t;if(this._width&&this._maxLines&&this._text&&this._truncationMode===o.TRUNCATION_MODE_RIGHT_ELLIPSIS){for(var i=e.getTextHeight("fW",this._width,this.getClasses())*this._maxLines,n=e.getTextHeight(this._text,this._width,this.getClasses()),r=this._text.length;i<n&&1<r;)r=Math.floor(r*i/n),n=e.getTextHeight(this._text.substring(0,r)+"...",this._width,this.getClasses());for(;n<=i&&r<=this._text.length;)r++,n=e.getTextHeight(this._text.substring(0,r)+"...",this._width,this.getClasses());if(--r<this._text.length){for(var s=r;s&&!/\w\W$/.test(this._text.substring(0,s+1));)s--;t=0<s?this._text.substring(0,s)+"...":this._text.substring(0,r)+"..."}else t=this._text}else t=this._text;return this.outputElement?e.setElementContent(this.outputElement,t):this.outputElement=e.createLabel(this.id,this.getClasses(),t),this.outputElement},setText:function(e){this._text=e,this.outputElement&&this.render(this.getCurrentApplication().getDevice())},getText:function(){return this._text},setTruncationMode:function(e){this._truncationMode=e},setMaximumLines:function(e){this._maxLines=e},setWidth:function(e){this._width=e}});return o.TRUNCATION_MODE_NONE=0,o.TRUNCATION_MODE_RIGHT_ELLIPSIS=1,o}),define("antie/widgets/list",["antie/widgets/container","antie/widgets/listitem","antie/iterator","antie/events/databoundevent","antie/events/selecteditemchangeevent"],function(e,n,s,o,i){"use strict";var a=e.extend({init:function(e,t,i){this._selectedIndex=0,this._dataSource=i,this._itemFormatter=t,this._dataBound=!1,this._totalDataItems=0,this._renderMode=a.RENDER_MODE_CONTAINER,this._dataBindingOrder=a.DATA_BIND_FORWARD,this._super(e),this.addClass("list")},appendChildWidget:function(e){if(this._renderMode!==a.RENDER_MODE_LIST||e instanceof n)return e.addClass("listitem"),this._super(e),e;var t=new n;return t.appendChildWidget(e),t.setDataItem(e.getDataItem()),this._super(t),t},insertChildWidget:function(e,t){var i;return this._renderMode!==a.RENDER_MODE_LIST||t instanceof n?(t.addClass("listitem"),this._super(e,t),i=t):((i=new n).appendChildWidget(t),i.setDataItem(t.getDataItem()),this._super(e,i)),e<=this._selectedIndex&&this._selectedIndex+1<this.getChildWidgetCount()&&this._selectedIndex++,t},setActiveChildWidget:function(e){var t=this._activeChildWidget!==e;return!!this._super(e)&&(this._selectedIndex=this.getIndexOfChildWidget(e),t&&this.bubbleEvent(new i(this,e,this._selectedIndex)),!0)},render:function(e){return!this._dataBound&&this._dataSource&&this._itemFormatter&&this._createDataBoundItems(),this.outputElement||this._renderMode!==a.RENDER_MODE_LIST||(this.outputElement=e.createList(this.id,this.getClasses())),this._super(e)},_createDataBoundItems:function(){this._dataBound=!0;var r=this;function e(e){r.removeChildWidgets();for(var t=e instanceof s?e:new s(e);t.hasNext();){var i=t._currentIndex,n=r._itemFormatter.format(t);n._listIndex=i,r._dataBindingOrder===a.DATA_BIND_FORWARD?r.appendChildWidget(n):r._dataBindingOrder===a.DATA_BIND_REVERSE&&r.insertChildWidget(0,n)}r._totalDataItems=t._currentIndex,r.bubbleEvent(new o("databound",r,t))}r.bubbleEvent(new o("beforedatabind",r)),!this._dataSource||this._dataSource instanceof Array?e(this._dataSource):this._dataSource.load({onSuccess:e,onError:function(e){r.removeChildWidgets(),r.bubbleEvent(new o("databindingerror",r,null,e))}})},setDataSource:function(e){this._dataSource&&"function"==typeof this._dataSource.abort&&this._dataSource.abort(),this._dataSource=e,this.outputElement&&this._createDataBoundItems()},resetDataBindings:function(){this._dataBound=!1},rebindDataSource:function(){this._dataBound=!1,this.setDataSource(this._dataSource)},setRenderMode:function(e){this._renderMode=e},bindProgressIndicator:function(a,l){var c=this;this._updateProgressHandler=function(e){if(e.target===c)if("beforedatabind"!==e.type){var t=c._childWidgetOrder.length-c._totalDataItems;t<0&&(t=0);var i,n=c.getActiveChildWidget(),r=c._dataBound&&n&&void 0!==n._listIndex?n._listIndex:c._selectedIndex-t,s=c._childWidgetOrder.length-t;if(r<0?i=0:(i=r/(s-1))<0&&(i=0),l){var o=l(r+1,s);"string"==typeof o?a.setText(o):(a.setText(o.text),i=o.pos)}a.setValue(i)}else a.setText("")},this.addEventListener("selecteditemchange",this._updateProgressHandler),this.addEventListener("focus",this._updateProgressHandler),this.addEventListener("blur",this._updateProgressHandler),this.addEventListener("beforedatabind",this._updateProgressHandler),this.addEventListener("databound",this._updateProgressHandler)},unbindProgressIndicator:function(){this._updateProgressHandler&&(this.removeEventListener("selecteditemchange",this._updateProgressHandler),this.removeEventListener("focus",this._updateProgressHandler),this.removeEventListener("blur",this._updateProgressHandler),this.removeEventListener("databound",this._updateProgressHandler))},removeChildWidget:function(e){this._updateProgressHandler&&this._childWidgetOrder.length<this._totalDataItems&&this.getCurrentApplication().getDevice().getLogger().warn("antie.widgets.List::removeChildWidget - removing list items where multiple data items are contained within each list item can cause unintended behaviour within any position indicator attached to the list.");var t=this._childWidgetOrder.length-this._totalDataItems;this._totalDataItems--;var i=this._super(e);e.removeClass("listitem");for(var n=0;n<this._childWidgetOrder.length;n++)this._childWidgetOrder[n]._listIndex=n-t;return i},removeChildWidgets:function(){for(var e=0;e<this._childWidgetOrder.length;e++)this._childWidgetOrder[e].removeClass("listitem");return this._totalDataItems=0,this._super()},setDataBindingOrder:function(e){this._dataBindingOrder=e},getDataBindingOrder:function(){return this._dataBindingOrder}});return a.RENDER_MODE_CONTAINER=1,a.RENDER_MODE_LIST=2,a.DATA_BIND_FORWARD=0,a.DATA_BIND_REVERSE=1,a}),define("antie/widgets/listitem",["antie/widgets/container"],function(e){"use strict";return e.extend({init:function(e){this._super(e),this.addClass("listitem")},render:function(e){return this.outputElement||(this.outputElement=e.createListItem(this.id,this.getClasses())),this._super(e)}})}),define("antie/widgets/scrubbar",["antie/widgets/horizontalslider"],function(e){"use strict";return e.extend({init:function(e,t,i,n,r){this._super(e,t,i,n,r),this._bufferedRange={start:0,end:0},this._lastBufferLeft=-1,this._lastBufferWidth=-1},render:function(e){return this.outputElement=this._super(e),this._buffer=e.createButton(this.id+"_buffer"),e.addClassToElement(this._buffer,"scrubbarbuffer"),e.prependChildElement(this.outputElement,this._buffer),this.outputElement},_moveBuffer:function(){if(this.outputElement){var e=this.getCurrentApplication().getDevice(),t=e.getElementSize(this.outputElement),i=Math.floor(this._bufferedRange.start*t.width),n=Math.floor((this._bufferedRange.end-this._bufferedRange.start)*t.width);this._lastBufferLeft!==i&&(this._lastBufferLeft=i,e.moveElementTo({el:this._buffer,to:{left:i,top:null},skipAnim:!0})),this._lastBufferWidth!==n&&(this._lastBufferWidth=n,e.setElementSize(this._buffer,{width:n}))}},getBufferedRange:function(){return this._bufferedRange},setBufferedRange:function(e){this._bufferedRange=e,this._moveBuffer()}})}),define("antie/widgets/state_view_container",["antie/widgets/container","antie/events/keyevent","antie/widgets/button"],function(e,t,n){"use strict";var r={};return r[t.VK_UP]="up",r[t.VK_DOWN]="down",r[t.VK_LEFT]="left",r[t.VK_RIGHT]="right",r[t.VK_BACK]="back",e.extend({init:function(i){this._super();var t=this;this.focusButtonHack=new n,this.appendChildWidget(this.focusButtonHack),this.addEventListener("select",function(){i.select()}),this.addEventListener("keydown",function(e){var t=r[e.keyCode];t&&i[t]()}),this.addEventListener("afterhide",function(){t.focusHack()}),this.addEventListener("beforeshow",function(e){t.getCurrentApplication().setActiveComponent(e.component.id)})},focusHack:function(){this._isFocussed=!0,this.focusButtonHack.focus()}})}),define("antie/widgets/textpager",["antie/widgets/label","antie/events/textpagechangeevent"],function(e,i){"use strict";return e.extend({init:function(e){this._super(e,""),this.addClass("textpager"),this._page=1},render:function(e){var t=this._text;return this.outputElement||(this.outputElement=e.createContainer(this.id,this.getClasses()),this.innerElement=e.createContainer(this.id+"_inner"),this.outputElement.appendChild(this.innerElement)),e.setElementContent(this.innerElement,t),this.outputElement},getPageCount:function(){if(!this._paddingFudge){this._paddingFudge=!0,this.textHeight=this.innerElement.clientHeight,this.boxHeight=this.outputElement.clientHeight,this.lineHeight=this.getCurrentApplication().getLayout().textPager.lineHeight,this.lines_in_box=Math.floor(this.boxHeight/this.lineHeight),this.lines_in_text=Math.floor(this.textHeight/this.lineHeight),this._pageCount=Math.ceil(this.lines_in_text/this.lines_in_box);var e=this.textHeight-this.lines_in_text%this.lines_in_box;this.innerElement.style.paddingBottom=this.lineHeight*e+"px"}return this._pageCount},getCurrentPage:function(){return this._page},setPage:function(e){var t=this.outputElement;this._page=e,t.scrollTop=(e-1)*this.lineHeight*this.lines_in_box,this.bubbleEvent(new i(this,e))},pageUp:function(){var e=this.getCurrentPage();1!==e&&this.setPage(e-1)},pageDown:function(){var e=this.getPageCount(),t=this.getCurrentPage();t!==e&&this.setPage(t+1)},setText:function(e){this._super(e),this.innerElement&&(this.innerElement.style.paddingBottom=0),this._paddingFudge=!1}})}),define("antie/widgets/verticallist",["antie/widgets/list","antie/events/keyevent"],function(e,r){"use strict";return e.extend({init:function(e,t,i){this._super(e,t,i),this.addClass("verticallist");var n=this;this.addEventListener("keydown",function(e){n._onKeyDown(e)})},_onKeyDown:function(e){if(e.keyCode===r.VK_UP||e.keyCode===r.VK_DOWN){for(var t=this._selectedIndex,i=null;;){if(e.keyCode===r.VK_UP?t--:e.keyCode===r.VK_DOWN&&t++,t<0||t>=this._childWidgetOrder.length)break;var n=this._childWidgetOrder[t];if(n.isFocusable()){i=n;break}}i&&(this.setActiveChildWidget(i),e.stopPropagation())}}})}),define("antie/widgets/widget",["antie/class","antie/runtimecontext"],function(e,r){"use strict";var t=0;return e.extend({init:function(e){this._classNames={widget:!0},this.parentWidget=null,this.outputElement=null,this._eventListeners={},this._dataItem=null,this._isFocussed=!1,this.id=e||"#"+1*new Date+"_"+t++},render:function(){throw new Error("Widget::render called - the subclass for widget '"+this.id+"' must have not overridden the render method.")},addClass:function(e){this._classNames[e]||(this._classNames[e]=!0,this.outputElement&&this.getCurrentApplication().getDevice().setElementClasses(this.outputElement,this.getClasses()))},removeClass:function(e){this._classNames[e]&&(delete this._classNames[e],this.outputElement&&this.getCurrentApplication().getDevice().setElementClasses(this.outputElement,this.getClasses()))},hasClass:function(e){return!!this._classNames[e]},getClasses:function(){var e=[];for(var t in this._classNames)this._classNames.hasOwnProperty(t)&&e.push(t);return e},addEventListener:function(e,t){var i=this._eventListeners[e];void 0===i&&(i=[],this._eventListeners[e]=i),~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i,n=this._eventListeners[e];if(!n)return r.getDevice().getLogger().error("Attempting to remove non-existent event listener"),!1;~(i=n.indexOf(t))&&n.splice(i,1)},fireEvent:function(t){var i=this._eventListeners[t.type];if(i)for(var n in i)if(i.hasOwnProperty(n))try{i[n](t)}catch(e){this.getCurrentApplication().getDevice().getLogger().error("Error in "+t.type+" event listener on widget "+this.id+": "+e.message,e,i[n])}},bubbleEvent:function(e){this.fireEvent(e),e.isPropagationStopped()||(this.parentWidget?this.parentWidget.bubbleEvent(e):e.stopPropagation())},broadcastEvent:function(e){this.fireEvent(e)},isFocusable:function(){return!1},getCurrentApplication:function(){try{return r.getCurrentApplication()}catch(e){return null}},getDataItem:function(){return this._dataItem},setDataItem:function(e){this._dataItem=e},getComponent:function(){for(var e=this;e&&!e.isComponent();)e=e.parentWidget;return e},removeFocus:function(){this.removeClass("focus"),this._isFocussed=!1},isFocussed:function(){return this._isFocussed},isComponent:function(){return!1},show:function(e){if(!this.outputElement)throw new Error("Widget::show called - the current widget has not yet been rendered.");e.el=this.outputElement,this.getCurrentApplication().getDevice().showElement(e)},hide:function(e){if(!this.outputElement)throw new Error("Widget::hide called - the current widget has not yet been rendered.");e.el=this.outputElement,this.getCurrentApplication().getDevice().hideElement(e)},moveTo:function(e){if(!this.outputElement)throw new Error("Widget::moveTo called - the current widget has not yet been rendered.");e.el=this.outputElement,this.getCurrentApplication().getDevice().moveElementTo(e)}})}),define("rofl/advertisement/vast",["rofl/class","rofl/lib/utils","rofl/lib/promise","rofl/lib/xml","antie/runtimecontext","rofl/advertisement/vast/errors","rofl/advertisement/vast/eventmap","rofl/advertisement/vast/macroevent","rofl/timelinemanager/timeline/adbreak/ad","rofl/timelinemanager/timeline/adbreak/ad/linear","rofl/advertisement/vmap/errors","rofl/timelinemanager/timeline/offsetparser"],function(e,s,r,i,t,n,a,l,o,c,u,d){"use strict";var h=t.getCurrentApplication().getConfiguration().VAST||{},g=t.getDevice(),p=d.getInstance(),f=n.ERRORS,_=n.ERROR_DESCRIPTIONS,m="xml_parsing_error",v="wrapper_limit_reached",C="no_ad",A="undefined_error",E="linear",I=e.extend({_onPrepared:function(){return this._target},_isSupportedFormat:function(t){var i=!1;return s.each([/apple.mpegurl/gi,/mp4/gi,/mpegurl/gi,/ms-wmv/gi,/ms-sstr/gi,/dash/gi],function(e){e.test(t)&&(i=!0)}),i},_getLinearSources:function(e){var a=[];return e=e||[],s.isArray(e)||(e=[e]),s.each(e,function(e){var t=e["@type"]||null,i=e["@delivery"]||null,n=e["@width"]||0,r=e["@height"]||0,s=e["@bitrate"]||0,o=e["#cdata"]||null;o&&t&&i&&this._isSupportedFormat(t)&&a.push({url:o,type:t,width:parseInt(n,10),height:parseInt(r,10),delivery:i,bitRate:parseInt(s,10)})},this),a},_resolveCreativeType:function(e){return e.Linear?E:null},_processCreativeEvents:function(o,e){e=e||[],s.isArray(e)||(e=[e]),s.each(e,function(e){var t,i,n,r,s={};n=e["#cdata"],i=e["@offset"],n&&(i&&(s.offset=i),t=a.mapEvent(e["@event"],s,o.type),r=new l(t.name,n,t.options),o.addEvent(r))})},_processCreative:function(e,t){var i,n,r,s,o;return i=e["@sequence"],(n=e.Linear)&&(o=n["@skipoffset"],r=n.Duration,s=n.MediaFiles,t||(t=new c),i&&t.setSequence(i),r&&t.setDuration(p.getAppliedOffset({offset:r})),s&&s.MediaFile&&t.setSources(this._getLinearSources(s.MediaFile)),o&&t.setSkipOffset(o),n.TrackingEvents&&this._processCreativeEvents(t,n.TrackingEvents.Tracking)),t},_processCreatives:function(r,e){var t;e&&(t=e.Creative||[],s.isArray(t)||(t=[t]),s.each(t,function(e){var t,i,n;(t=this._resolveCreativeType(e))&&(i=r.getCreative(t)),n=this._processCreative(e,i),!i&&n&&r.addCreative(n)},this))},_processError:function(r,e){s.isArray(e)||(e=[e]),s.each(e,function(e){var t,i,n;e&&(t=e["#cdata"])&&(n=a.mapEvent("error",null,"ad"),i=new l(n.name,t,n.options),r.addEvent(i))})},_processImpression:function(r,e){s.isArray(e)||(e=[e]),s.each(e,function(e){var t,i,n;e&&(i=e["#cdata"])&&(t=a.mapEvent("impression",null,"ad"),n=new l(t.name,i,t.options),r.addEvent(n))},this)},_processInline:function(e,t){var i=t.Impression,n=t.Error;this._processImpression(e,i),this._processError(e,n),this._processCreatives(e,t.Creatives)},_followWrapper:function(e,t){var i=t.Impression,n=t.Error,r=t.VASTAdTagURI,s=new I(r["#cdata"]);return this._processImpression(e,i),this._processError(e,n),this._processCreatives(e,t.Creatives),s.prepare(e,this._depth+1)},_updateAd:function(e,t){var i=t.InLine,n=t.Wrapper;if(i)return this._processInline(e,i),r.resolve(e);if(n){if(10===this._depth)throw v;return this._followWrapper(e,n)}throw A},_createAd:function(e){var t=e["@id"]||null,i=e["@sequence"]||null;return new o(t,i,this._target.position)},_processSingleAd:function(e){var t=this._target;if(s.isArray(e)&&(e=e.pop()),e)return this._updateAd(t,e)},_processAdBreakAds:function(e){var n=[];return e=e||[],s.isArray(e)||(e=[e]),s.each(e,function(e){var t,i;t=this._createAd(e),i=this._updateAd(t,e),n.push(i)},this),r.all(n).then(s.bind(function(e){s.each(e,this._target.addAd,this._target)},this)).catch(s.bind(this.onError,this)).then(s.bind(function(){return this._target},this))},_targetIsAdBreak:function(e){return void 0!==e.addAd},_processVASTError:function(e){var t;e&&(t=e["#cdata"])&&(this._error=new l("error",t))},_processAdData:function(e){var t=this._targetIsAdBreak(this._target),i=e.VAST;if(i)return i.Ad?(this._processVASTError(i.Error),t?this._processAdBreakAds(i.Ad):this._processSingleAd(i.Ad)):r.reject(C);throw A},setAdData:function(e){this._adData=e},_parse:function(e){var t;try{return t=i.xml2json(e,""),g.decodeJson(t)}catch(e){throw g.getLogger().error(e),m}},_isWhitelistedForWithCredentials:function(t){var e=h.withCredentialsWhitelist||[],i=!1;return s.each(e,function(e){i||(i=-1!==t.indexOf(e))}),i},_request:function(i){var n=void 0===h.withCredentials||h.withCredentials;return i=s.addToQueryStringOfURL(i,{cache_buster:Math.floor(1e3*Math.random()+1)}),new r(s.bind(function(e,t){g.loadURL(i,{onLoad:e,onError:t,responseType:"xml",withCredentials:n||this._isWhitelistedForWithCredentials(i)})},this))},prepare:function(e,t){if(this._target=e,this._depth=t,this._adData)return this._processAdData(this._adData).then(s.bind(this._onPrepared,this)).catch(s.bind(this.onError,this));if(this._url)return this._request(this._url).then(s.bind(this._parse,this)).then(s.bind(this.setAdData,this)).then(s.bind(function(){return this._processAdData(this._adData)},this)).then(s.bind(this._onPrepared,this)).catch(s.bind(this.onError,this));throw"No url or adData set in VAST object. Unable to prepare."},onError:function(e){var t,i={};if(s.isString(e))if(this._targetIsAdBreak(this._target))i.code=u.ERRORS.AD_PARSING_ERROR;else switch(e){case m:i.code=f.PARSING_ERROR;break;case v:i.code=f.WRAPPER_LIMIT_REACHED;break;case C:i.code=f.NO_AD_RESPONSE;break;case A:default:i.code=f.UNDEFINED_ERROR}else g.getLogger().log("Unknown VAST error"),g.getLogger().log(e);return i.code===f.NO_AD_RESPONSE?this._error&&(t=this._error.fire(i).then(s.bind(function(){return this._target},this)).catch(s.bind(function(){return this._target},this))):this._target&&(t=this._target.fireErrorEvent(i)),t||r.resolve(this._target)},init:function(e){this._url=e,this._adData=null,this._target=null,this._depth=0,this._error=null}});return I.ERRORS=f,I.ERROR_DESCRIPTIONS=_,I}),define("rofl/advertisement/vast/errors",function(){"use strict";return{ERRORS:{PARSING_ERROR:100,SCHEMA_ERROR:101,SCHEMA_VERSION_ERROR:102,NON_DISPLAYABLE_AD:200,WRONG_LINEARITY:201,WRONG_DURATION:202,WRONG_SIZE:203,WRAPPER_ERROR:300,WRAPPER_URI_TIMEOUT:301,WRAPPER_LIMIT_REACHED:302,NO_AD_RESPONSE:303,GENERAL_LINEAR_ERROR:400,MEDIA_FILE_NOT_FOUND:401,MEDIA_FILE_TIMEOUT:402,NO_SUPPORTED_MEDIA_FILES:403,PROBLEM_DISPLAYING_MEDIA_FILE:405,UNDEFINED_ERROR:900},ERROR_DESCRIPTIONS:{100:"XML parsing error",101:"VAST schema validation error",102:"VAST version of response not supported",200:"Trafficking error. Unexpected / non-displayable ad",201:"Player expected different linearity",202:"Player expected different duration",203:"Player expected different size",300:"General Wrapper error",301:"VAST Wrapper URI request timeout",302:"VAST Wrapper limit reached",303:"No Ads VAST response after one or more Wrappers",400:"General Linear error. Unable to display the linear ad",401:"File not found. Unable to locate Linear/MediaFile from URI",402:"Timeout of MediaFile URI",403:"No supported MediaFiles found",405:"Problem displaying MediaFile. MediaFile may include: unsupported codecs, wrong MIME type, unsupported delivery method, etc.",900:"Undefined error"}}}),define("rofl/advertisement/vast/eventmap",["rofl/timelinemanager/timelineevents"],function(i){"use strict";return{_mapAdEvent:function(e){switch(e){case"impression":return{name:i.AD.START};case"error":return{name:i.AD.ERROR,options:{isDeep:!0}};default:return{name:e}}},_mapLinearEvent:function(e,t){switch(e){case"creativeView":return{name:i.LINEAR_CREATIVE.SHOW};case"start":return{name:i.PLAYBACK.START};case"end":case"complete":return{name:i.PLAYBACK.END};case"closeLinear":case"stop":return{name:i.USER_EVENTS.CLOSE};case"fullscreen":case"expand":return{name:i.USER_EVENTS.ENTER_FULLSCREEN,options:{isDeep:!0,isPersistent:!0}};case"exitFullscreen":case"collapse":return{name:i.USER_EVENTS.EXIT_FULLSCREEN,options:{isDeep:!0,isPersistent:!0}};case"progress":return{name:i.PLAYBACK.WATCHED+t.offset};case"mute":return{name:i.USER_EVENTS.MUTE,options:{isDeep:!0,isPersistent:!0}};case"unmute":return{name:i.USER_EVENTS.UN_MUTE,options:{isDeep:!0,isPersistent:!0}};case"pause":return{name:i.USER_EVENTS.PAUSE,options:{isDeep:!0,isPersistent:!0}};case"resume":return{name:i.USER_EVENTS.RESUME,options:{isDeep:!0,isPersistent:!0}};case"rewind":return{name:i.USER_EVENTS.REWIND,options:{isDeep:!0,isPersistent:!0}};case"skip":return{name:i.USER_EVENTS.SKIP};case"acceptInvitation":case"acceptInvitationLinear":return{name:i.LINEAR_CREATIVE.ACCEPT};case"firstQuartile":return{name:"25%"};case"midpoint":return{name:"50%"};case"thirdQuartile":return{name:"75%"};default:return{name:e}}},mapEvent:function(e,t,i){switch(i){case"ad":return this._mapAdEvent(e);case"linear":return this._mapLinearEvent(e,t);default:return{name:e}}}}}),define("rofl/advertisement/vast/macroevent",["rofl/lib/utils","rofl/timelinemanager/timeline/trackingevent/macroevent","rofl/timelinemanager/timelineevents","rofl/advertisement/vast/errors"],function(t,e,r,s){"use strict";return e.extend({_getErrorCode:function(e){var i,n=e.code;return void 0===n&&(i=e.error,t.each(r.AD.ERRORS,function(e,t){i===e&&(n=s.ERRORS[t])},this),void 0===n&&(n=s.ERRORS.UNDEFINED_ERROR)),n},_getIsoExtendedPlaytime:function(e){var t,i=e.toString().split("."),n=i[0],r=i[1],s=function(e){return 1===e.length&&(e="0"+e),e};return t=s(Math.floor(n/3600).toString())+":",t+=s(Math.floor(n%3600/60))+":",t+=s(n%60),r&&(t+="."+(r=r.substr(0,3))),t},_getCachebuster:function(){return Math.floor(1e6*(90*Math.random()+10))},_getMacroValue:function(e,t){var i,n=t.playerStatus;switch(t.assetURI?i=t.assetURI:t.mediaSource&&(i=t.mediaSource.getMediaUrl()),e){case"ERRORCODE":return this._getErrorCode(t);case"CONTENTPLAYHEAD":return n&&void 0!==n.currentTime?this._getIsoExtendedPlaytime(n.currentTime):null;case"CACHEBUSTING":return this._getCachebuster();case"ASSETURI":return i||null;default:return null}}})}),define("rofl/advertisement/vmap",["rofl/class","rofl/lib/utils","rofl/lib/promise","rofl/lib/xml","antie/runtimecontext","rofl/advertisement/vmap/errors","rofl/advertisement/vmap/eventmap","rofl/advertisement/vmap/macroevent","rofl/advertisement/vast","rofl/timelinemanager/timeline/adbreak","rofl/timelinemanager/timeline/offsetparser"],function(e,s,t,i,n,r,p,o,a,l,c){"use strict";var u=n.getCurrentApplication().getConfiguration().VMAP||{},d=n.getDevice(),f=c.getInstance(),h=r.ERRORS,g=r.ERROR_DESCRIPTIONS,_=e.extend({_processVMAPEvents:function(r,e){e=e||[],s.isArray(e)||(e=[e]),s.each(e,function(e){var t,i,n;(i=e["#cdata"])&&(t=p.mapEvent(e["@event"],null),n=new o(t.name,i,t.options),r.addEvent(n))})},_createAdTagURIAdBreak:function(e,t,i,n,r){var s,o=i["#cdata"];return s=new a(o),new l(e,t,s,n,r)},_createVASTAdDataAdBreak:function(e,t,i,n,r){var s=new a;return i.VAST&&!i.VAST.Ad?null:(s.setAdData(i),new l(e,t,s,n,r))},_process:function(e){var t,i=e.VMAP,g=[];return i&&(t=i.AdBreak||[],s.isArray(t)||(t=[t]),s.each(t,function(e,t){var i,n,r,s,o,a,l=e.AdSource,c=e["@timeOffset"]||"0",u=e["@breakType"],d=e["@repeatAfter"],h={};l&&(s=l.VASTAdData,o=l.AdTagURI,l.CustomAdData,d&&(i=f.getAppliedOffset({offset:d}),h.interval=i),r=p.mapEvent(c,h),s?a=this._createVASTAdDataAdBreak(r.name,u,s,i,t):o&&(a=this._createAdTagURIAdBreak(r.name,u,o,i,t)),a&&"linear"===u&&((n=e.TrackingEvents)&&this._processVMAPEvents(a,n.Tracking),g.push(a)))},this)),g},_parse:function(e){var t;try{return t=i.xml2json(e,"").replace(/vmap:/g,""),d.decodeJson(t)}catch(e){return d.getLogger().log("VMAP parsing error"),d.getLogger().log(e),[]}},_request:function(){var i=!s.isUndefined(u.withCredentials)&&u.withCredentials,n=this._url;return n=s.addToQueryStringOfURL(n,{cache_buster:Math.floor(1e3*Math.random()+1)}),new t(function(e,t){d.loadURL(n,{onLoad:e,onError:function(e){d.getLogger().log("VMAP request error"),d.getLogger().log(e),t([])},responseType:"xml",withCredentials:i})})},prepare:function(){return this._request().then(s.bind(this._parse,this)).then(s.bind(this._process,this)).catch(function(e){return d.getLogger().log("VMAP uncaught error"),d.getLogger().log(e),[]})},init:function(e){this._url=e}});return _.ERRORS=h,_.ERROR_DESCRIPTIONS=g,_}),define("rofl/advertisement/vmap/errors",function(){"use strict";return{ERRORS:{UNDEFINED_ERROR:900,SCHEMA_ERROR:1e3,UNSUPPORTED_RESPONSE_ERROR:1001,SCHEMA_PARSING_ERROR:1002,UNSUPPORTED_AD_BREAK_ERROR:1003,GENERAL_AD_RESPONSE_ERROR:1004,UNSUPPORTED_AD_TYPE_ERROR:1005,AD_PARSING_ERROR:1006,AD_REQUEST_TIMEOUT:1007,AD_REQUEST_ERROR:1008},ERROR_DESCRIPTIONS:{900:"Undefined error",1e3:"VMAP schema error",1001:"VMAP response version not supported",1002:"VMAP parsing error",1003:"AdBreak type not supported",1004:"General ad response document error",1005:"Ad response template type not supported",1006:"Ad response document extraction or parsing error",1007:"Ad response document retrieval timeout",1008:"Ad response document retrieval error"}}}),define("rofl/advertisement/vmap/eventmap",["rofl/timelinemanager/timelineevents"],function(i){"use strict";return{mapEvent:function(e,t){if(t&&t.interval)return{name:i.AD_BREAK.REPEAT+e+"-"+t.interval};switch(e){case"0":case"start":return{name:i.AD_BREAK.PRE_ROLLS};case"end":return{name:i.AD_BREAK.POST_ROLLS};case"breakStart":return{name:i.AD_BREAK.START};case"breakEnd":return{name:i.AD_BREAK.END};case"error":return{name:i.AD_BREAK.ERROR,options:{isDeep:!0}};default:return{name:e}}}}}),define("rofl/advertisement/vmap/macroevent",["rofl/lib/utils","rofl/timelinemanager/timeline/trackingevent/macroevent","rofl/timelinemanager/timelineevents","rofl/advertisement/vmap/errors"],function(t,e,r,s){"use strict";return e.extend({_getErrorMessage:function(e){return s.ERROR_DESCRIPTIONS[e]},_getErrorCode:function(e){var i,n=e.code;return void 0===n&&(i=e.error,t.each(r.AD_BREAK.ERRORS,function(e,t){i===e&&(n=s.ERRORS[t])}),void 0===n&&(n=s.ERRORS.UNDEFINED_ERROR)),n},_getMacroValue:function(e,t){switch(e){case"ERROR_CODE":return this._getErrorCode(t);case"ERROR_MESSAGE":return this._getErrorMessage(this._getErrorCode(t));default:return null}}})}),define("rofl/analytics/adobe/application",["rofl/lib/analytics/adobe/application"],function(e){"use strict";return{getAppMeasurementInstance:function(){return e}}}),define("rofl/analytics/adobe/video",["rofl/timelinemanager","rofl/timelinemanager/timeline/eventsource","rofl/lib/utils","rofl/lib/analytics/adobe/video","rofl/analytics/adobe/videoevent","rofl/timelinemanager/timelineevents","antie/runtimecontext","rofl/analytics/adobe/application"],function(e,t,l,i,c,u,n,r){"use strict";var a=i.va,d=a.MediaHeartbeat.StreamType,s=n.getCurrentApplication().getConfiguration(),o=n.getDevice().getMediaPlayer(),h=s.analytics.adobe.video,g=t.extend({_resetSeeking:function(){this._seeking=null},onReset:function(e){this._hasBeenReset||(!e&&this.isAdActive()||(this._hasBeenReset=!0,this.mediaHeartbeat.trackSessionEnd(),this.adBreakPosition=0,this.adActive=!1),this._resetSeeking(),this.buffering=!1)},onUserEnd:function(){this.onReset(!0)},onEnd:function(){this.isAdActive()||this.mediaHeartbeat.trackComplete(),this.onReset()},onSeekEnd:function(){this._resetSeeking(),this.mediaHeartbeat.trackSeekComplete()},onSeek:function(){this._resetBufferTimestamp(),this._seeking||(this._seeking=!0,this.mediaHeartbeat.trackSeekStart())},onPause:function(){this.mediaHeartbeat.trackPause()},onPlay:function(){this.isBuffering()&&(this.buffering=!1,this.mediaHeartbeat.trackEvent(a.MediaHeartbeat.Event.BufferComplete)),this._seeking?this.onSeekEnd():this.mediaHeartbeat.trackPlay()},onBuffer:function(){this.isBuffering()||(this.buffering=!0,this.mediaHeartbeat.trackEvent(a.MediaHeartbeat.Event.BufferStart))},onAdBreakStart:function(e){var t,i,n,r=o.getCurrentTime()||0;this.adActive=!0,i=(e=e||{}).customTags||{},this.adBreakPosition++,t=e.name,n=a.MediaHeartbeat.createAdBreakObject(t,this.adBreakPosition,r),this.mediaHeartbeat.trackEvent(a.MediaHeartbeat.Event.AdBreakStart,n,i)},onAdBreakEnd:function(){this.adActive=!1,this.mediaHeartbeat.trackEvent(a.MediaHeartbeat.Event.AdBreakComplete)},onAdStart:function(e){var t,i,n,r,s,o;s=(e=e||{}).customTags||{},t=e.name,i=e.id,n=e.position,r=e.length,o=a.MediaHeartbeat.createAdObject(t,i,n,r),this.mediaHeartbeat.trackEvent(a.MediaHeartbeat.Event.AdStart,o,s)},onAdEnd:function(){this.mediaHeartbeat.trackEvent(a.MediaHeartbeat.Event.AdComplete)},onAdError:function(){this.mediaHeartbeat.trackEvent(a.MediaHeartbeat.Event.AdComplete),this.onEnd()},isAdActive:function(){return this.adActive},isBuffering:function(){return this.buffering},_mapEvents:function(){var e=l.bind(this.onBuffer,this),t=l.bind(this.onEnd,this),i=l.bind(this.onPause,this),n=l.bind(this.onPlay,this),r=l.bind(this.onSeek,this),s=l.bind(this.onUserEnd,this),o=l.bind(this.onAdError,this),a=[{event:u.PLAYBACK.START,handler:n},{event:u.PLAYBACK.BUFFERING,handler:e},{event:u.USER_EVENTS.PAUSE,handler:i},{event:u.USER_EVENTS.REWIND,handler:r},{event:u.PLAYBACK.INTERRUPT,handler:t},{event:u.USER_EVENTS.CLOSE,handler:s},{event:u.PLAYBACK.END,handler:t},{event:u.PLAYBACK.ERROR,handler:t},{event:u.AD.ERROR,handler:o}];l.each(a,function(e){this.addEvent(new c(e.event,e.handler))},this)},_getMediaHeartbeatConfig:function(){var e=new a.MediaHeartbeatConfig;return e.trackingServer=h.trackingServer,e.playerName=h.playerName||"24iSmartTVPlayer",e.channel=h.channel,e.debugLogging=h.debugLogging||!1,e.ssl=h.ssl||!1,e.appVersion=s.version||"unknown",e.ovp=h.ovp||"",e},_getMediaDelegate:function(){var e=new a.MediaHeartbeatDelegate;return e.getCurrentPlaybackTime=function(){var e=o.getCurrentTime();return e||(e=0),e},e.getQoSObject=function(){return a.MediaHeartbeat.createQoSObject(void 0,void 0,void 0,void 0)},e},trackSessionStart:function(e){this.mediaHeartbeat.trackSessionStart(this.mediaObject,e)},startMediaTracking:function(e){var t,i,n,r,s,o;s=(e=e||{}).adobeTags||{},o=e.customTags||{},t=e.name,i=e.id,n=e.length,r=e.type||d.VOD,this.mediaObject=a.MediaHeartbeat.createMediaObject(t,i,n,r),this.mediaObject.setValue(a.MediaHeartbeat.MediaObjectKey.StandardVideoMetadata,s),this._hasBeenReset=!1,this.trackSessionStart(o)},init:function(){this._super(),this.mediaHeartbeatConfig=this._getMediaHeartbeatConfig(),this.appMeasurement=r.getAppMeasurementInstance(),this.mediaDelegate=this._getMediaDelegate(),this.mediaHeartbeat=new a.MediaHeartbeat(this.mediaDelegate,this.mediaHeartbeatConfig,this.appMeasurement),this.adBreakPosition=0,this.buffering=!1,this.adActive=!1,this._hasBeenReset=!1,this._resetSeeking(),this._mapEvents()}});return g.StreamTypes=d,g}),define("rofl/analytics/adobe/videoevent",["rofl/lib/utils","rofl/lib/promise","rofl/timelinemanager/timeline/trackingevent"],function(e,t,i){"use strict";return i.extend({fire:function(e){return this._callback(e),t.resolve()},init:function(e,t,i){(i=i||{}).isDeep=!0,i.isPersistent=!0,this._super(e,null,i),this._callback=t}})}),define("rofl/analytics/comscore/streamsense",["rofl/timelinemanager","rofl/timelinemanager/timeline/eventsource","rofl/lib/utils","rofl/lib/streamsense","rofl/analytics/comscore/streamsenseevent","rofl/timelinemanager/timelineevents","antie/runtimecontext"],function(e,t,s,i,n,r,o){"use strict";var a={BUFFER:i.StreamSense.PlayerEvents.BUFFER,PAUSE:i.StreamSense.PlayerEvents.PAUSE,PLAY:i.StreamSense.PlayerEvents.PLAY,END:i.StreamSense.PlayerEvents.END},l="ns_st_bt",c="ns_st_bp",u=t.extend({_updateBufferTime:function(e){var t=this.getCurrentClip(),i=t.getLabel(l);0<e&&(i||(i=0),i+=e,this._totalPlaylistBufferTime+=e,t.setLabel(l,i),t.setLabel(c,this._totalPlaylistBufferTime))},_resetBufferTimestamp:function(){this.bufferTimestamp=null},_resetSeeking:function(){this._seeking=null,this._seekTime=null},onEnd:function(e){var t=this.getEventLabelsAndPosition(a.END,e),i=t.labels,n=t.position;this._resetSeeking(),this._resetBufferTimestamp(),i.ns_st_ui="play",this.streamSense.notify(a.END,i,n)},onSeekEnd:function(e){var t=this.getEventLabelsAndPosition(a.PLAY,e),i=t.labels,n=t.position;i.ns_st_ui="seeking",this._resetSeeking(),this.streamSense.notify(a.PLAY,i,n)},onSeek:function(e){var t=this.getEventLabelsAndPosition(a.PAUSE,e),i=t.labels,n=t.position;this._resetBufferTimestamp(),this._seeking||(i.ns_st_ui="seeking",this._seeking=!0,this.streamSense.notify(a.PAUSE,i,n))},onResume:function(e){var t=this.getEventLabelsAndPosition(a.PLAY,e);t.seekTime&&(this._seekTime=t.seekTime),this._resetBufferTimestamp()},onPause:function(e){var t=this.getEventLabelsAndPosition(a.PAUSE,e),i=t.labels,n=t.position;this._resetBufferTimestamp(),this._resetSeeking(),i.ns_st_ui="manual",this.streamSense.notify(a.PAUSE,i,n)},onPlay:function(e){var t,i=this.getEventLabelsAndPosition(a.PLAY,e),n=i.labels,r=i.position;n.ns_st_ui="play",this.bufferTimestamp&&(t=(new Date).getTime()-this.bufferTimestamp,this._updateBufferTime(t),this._resetBufferTimestamp()),this._seeking&&this._seekTime&&Math.floor(r/1e3)>=Math.floor(this._seekTime/1e3)?this.onSeekEnd(e):this._seeking?setTimeout(s.bind(function(){e.currentTime=o.getDevice().getMediaPlayer().getCurrentTime(),this.onPlay(e)},this),1e3):this.streamSense.notify(a.PLAY,n,r)},onBuffer:function(e){var t=this.getEventLabelsAndPosition(a.BUFFER,e),i=t.labels,n=t.position;i.ns_st_ui="play",this.bufferTimestamp=(new Date).getTime(),this.streamSense.notify(a.BUFFER,i,n)},getClipLabel:function(e){return this.getCurrentClip().getLabel(e)},updateCurrentClip:function(e){var i=this.getCurrentClip();s.each(e,function(e,t){i.setLabel(t,e)})},getCurrentClip:function(){return this.streamSense.getClip()},setCurrentClip:function(e){this.streamSense.setClip(e),this._resetSeeking(),this._resetBufferTimestamp()},setCurrentPlaylist:function(){var e=this.getPlaylistLabels();this._totalPlaylistBufferTime=0,this.streamSense.setPlaylist(e)},setPersistentLabels:function(){var e=this.getPersistentLabels();this.streamSense.setLabels(e)},_mapEvents:function(){var e;e=new n(r.PLAYBACK.START,s.bind(this.onPlay,this)),this.addEvent(e),e=new n(r.PLAYBACK.BUFFERING,s.bind(this.onBuffer,this)),this.addEvent(e),e=new n(r.USER_EVENTS.PAUSE,s.bind(this.onPause,this)),this.addEvent(e),e=new n(r.USER_EVENTS.REWIND,s.bind(this.onSeek,this)),this.addEvent(e),e=new n(r.USER_EVENTS.RESUME,s.bind(this.onResume,this)),this.addEvent(e),e=new n(r.PLAYBACK.INTERRUPT,s.bind(this.onEnd,this)),this.addEvent(e),e=new n(r.USER_EVENTS.CLOSE,s.bind(this.onEnd,this)),this.addEvent(e),e=new n(r.PLAYBACK.END,s.bind(this.onEnd,this)),this.addEvent(e),e=new n(r.PLAYBACK.ERROR,s.bind(this.onEnd,this)),this.addEvent(e),e=new n(r.AD.ERROR,s.bind(this.onEnd,this)),this.addEvent(e),e=null},init:function(e,t){this._super(),t=t||null,this._resetBufferTimestamp(),this._resetSeeking(),this._totalPlaylistBufferTime=null,this.getPersistentLabels=s.bind(e.getPersistentLabels,t),this.getPlaylistLabels=s.bind(e.getPlaylistLabels,t),this.getEventLabelsAndPosition=s.bind(e.getEventLabelsAndPosition,t),this.streamSense=new i.StreamSense,this._mapEvents(),this.setPersistentLabels()}});return u.EVENTS=a,u}),define("rofl/analytics/comscore/streamsenseevent",["rofl/lib/utils","rofl/lib/promise","rofl/timelinemanager/timeline/trackingevent"],function(e,t,i){"use strict";return i.extend({fire:function(e){return this._callback(e),t.resolve()},init:function(e,t,i){(i=i||{}).isDeep=!0,i.isPersistent=!0,this._super(e,null,i),this._callback=t}})}),define("rofl/analytics/video/conviva",["rofl/class","rofl/lib/analytics/conviva","rofl/analytics/video/conviva/interfaces/http","rofl/analytics/video/conviva/interfaces/logging","rofl/analytics/video/conviva/interfaces/metadata","rofl/analytics/video/conviva/interfaces/storage","rofl/analytics/video/conviva/interfaces/time","rofl/analytics/video/conviva/interfaces/timer","rofl/application","antie/events/mediaevent","rofl/devices/device","rofl/devices/mediaplayer/mediaplayer","rofl/lib/utils"],function(e,r,t,i,n,s,o,a,l,c,u,d,h){"use strict";var g,p,f,_,m,v,C,A,E=null,I=r.Client.NO_SESSION_KEY,y=new r.SystemInterface(new o,new a,new t,new s,new n,new i),b=new r.SystemSettings,S=new r.SystemFactory(y,b),T={},w={lg:"LG"},P=null;return T[u.OperatingSystems.ANDROID]="Android",T[u.OperatingSystems.ANDROID_TV]="Android TV",T[u.OperatingSystems.ORSAY]="Orsay",T[u.OperatingSystems.NETCAST]="NetCast",T[u.OperatingSystems.WEB_OS]="WebOS",T[u.OperatingSystems.LINUX]="Linux",T[u.OperatingSystems.ORBIS_OS]="OrbisOS",T[u.OperatingSystems.CELL_OS]="CellOS",T[u.OperatingSystems.TIZEN]="Tizen",T[u.OperatingSystems.CEB]="CEB",b.logLevel=r.SystemSettings.LogLevel.ERROR,b.allowUncaughtExceptions=!0,p=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},A=function(){var e=l.getCurrentApplication(),t=e.getDevice(),i=p(e.getId()),n=t.getBrand(),r=t.getOperatingSystem(),s="";return s+=n=w[n]?w[n]:p(n),r&&r!==u.OPERATING_SYSTEM_NOT_AVAILABLE&&(s+=" "+(r=T[r]?T[r]:p(r))),i+" "+s},g=function(e,t,i){var n=new r.ContentMetadata;return n.assetName=t.titleOverride||"["+t.id+"] "+t.title.toUpperCase(),n.playerName=t.playerNameOverride||A(),n.streamUrl=t.url,n.streamType=t.isLive?r.ContentMetadata.StreamType.LIVE:r.ContentMetadata.StreamType.VOD,n.duration=Math.floor(t.duration),n.encodedFrameRate=t.frameRate,n.defaultBitrateKbps=Math.floor(t.defaultBitRate),n.cdnName=t.cdnName||"INHOUSE",n.applicationName=t.playerNameOverride||A(),n.viewerId=e.id,n.custom=i,n},C=function(e){var t=e;switch(e){case 1:t="MEDIA_ERR_ABORTED";break;case 2:t="MEDIA_ERR_NETWORK";break;case 3:t="MEDIA_ERR_DECODE";break;case 4:t="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:t="MEDIA_ERR_INVALID_LICENSE";break;case 0:default:t="MEDIA_ERR_UNKNOWN"}return t},m=e.extend({_userMetadata:null,_videoMetadata:null,_customMetadata:null,_onMediaEventBound:null,_onBitrateEventBound:null,init:function(){var e,t=l.getCurrentApplication().getConfiguration();if(!h.isObject(t.analytics)||!h.isObject(t.analytics.conviva))throw new Error("Missing config for Conviva");e=t.analytics.conviva,(_=new r.ClientSettings(e.customerKey)).heartbeatInterval=5,e.gatewayUrl&&(_.gatewayUrl=e.gatewayUrl),f=new r.Client(_,S)},_updateConvivaPlayerState:function(e){e&&v.getPlayerState()!==e&&(v.setPlayerState(e),this._playerStateRecentlyChanged=!0)},_onMediaEvent:function(e){var t,i;switch(null===P&&(P=e.target),e.type){case d.EVENT.STATUS:P.getState().toUpperCase()!==r.PlayerStateManager.PlayerState.PLAYING&&(i=r.PlayerStateManager.PlayerState.PLAYING);break;case d.EVENT.SEEK_ATTEMPTED:case d.EVENT.BUFFERING:i=r.PlayerStateManager.PlayerState.BUFFERING;break;case d.EVENT.COMPLETE:case d.EVENT.STOPPED:i=r.PlayerStateManager.PlayerState.STOPPED;break;case d.EVENT.PAUSED:i=r.PlayerStateManager.PlayerState.PAUSED;break;case"loadedmetadata":t=P.getDuration(),isNaN(t)||t===1/0||(this._videoMetadata.isLive&&(t=0),v.setDuration(t));break;case d.EVENT.ERROR:this.onPlayerError(e.errorMessage||C(e.code))}i&&this._updateConvivaPlayerState(i)},onPlayerError:function(e){var t;t=r.Client.ErrorSeverity.FATAL,v.sendError(e||C(0),t),this.stop()},_onBitrateEvent:function(){null!==P&&P.getBitrate()},getConvivaPlayerStateManager:function(){return v},setUserMetadata:function(e){this._userMetadata=e},getUserMetadata:function(){return this._userMetadata},setVideoMetadata:function(e){if(!e.id||!e.title&&!e.titleOverride||!e.url||void 0===e.isLive)throw new Error("Missing required metadata");this._videoMetadata=e},getVideoMetadata:function(){return this._videoMetadata},getDefaultPlayerName:function(){return A()},setCustomMetadata:function(e){this._customMetadata=e},getCustomMetadata:function(){return this._customMetadata},_pollPosition:function(){var e,t=P.getCurrentTime(),i=t!==this._lastPosition;this._lastPosition=t,1<Math.abs(this._lastPosition-t)||(this._playerStateRecentlyChanged?this._playerStateRecentlyChanged=!1:(e=v.getPlayerState(),i&&e!==r.PlayerStateManager.PlayerState.PLAYING?this._updateConvivaPlayerState(r.PlayerStateManager.PlayerState.PLAYING):i||e!==r.PlayerStateManager.PlayerState.PLAYING||P.getState()===d.STATE.PAUSED&&this._updateConvivaPlayerState(r.PlayerStateManager.PlayerState.PAUSED)))},_startPositionPolling:function(){this._lastPosition=0,this._positionPollingInterval=setInterval(h.bind(this._pollPosition,this),2e3)},_stopPositionPolling:function(){this._positionPollingInterval&&clearInterval(this._positionPollingInterval)},start:function(){var e,t=l.getCurrentApplication(),i=t.getDevice(),n=this.getVideoMetadata();if(I===r.Client.NO_SESSION_KEY){if(!n)throw new Error("Can't start a session without the required metadata");if((I=f.createSession(g(this.getUserMetadata(),n,this.getCustomMetadata())))===r.Client.NO_SESSION_KEY)throw new Error("Something went wrong with creating a Conviva session key");P=i.getMediaPlayer(),this._onMediaEventBound=h.bind(this._onMediaEvent,this),this._onBitrateEventBound=h.bind(this._onBitrateEvent,this),P.addEventCallback(this,this._onMediaEvent),this._startPositionPolling(),e=function(){this.getPHT=function(){return-1},this.getBufferLength=function(){return-1},this.getSignalStrength=function(){return 1e3},this.getRenderedFrameRate=function(){return-1}},(v=f.getPlayerStateManager()).setClientMeasureInterface(new e),f.attachPlayer(I,v)}else t.getDevice().getLogger().warn("There's already a session")},stop:function(){f.releasePlayerStateManager(v),this._stopPositionPolling(),P&&P.removeEventCallback(this,this._onMediaEvent),this._onMediaEventBound=null,this._onBitrateEventBound=null,v=null,f.detachPlayer(I),P=null,f.cleanupSession(I),I=r.Client.NO_SESSION_KEY},shutDown:function(){P&&this.stop(),f.release(),f=null,S.release(),E=S=null}}),{getInstance:function(){return null===E&&(E=new m),E}}}),define("rofl/analytics/video/conviva/interfaces/abstract",["rofl/class"],function(e){"use strict";return e.extend({release:function(){}})}),define("rofl/analytics/video/conviva/interfaces/http",["rofl/analytics/video/conviva/interfaces/abstract","rofl/application","rofl/lib/utils"],function(e,d,h){"use strict";return e.extend({makeRequest:function(e,t,i,n,r,s){var o,a,l,c=d.getCurrentApplication().getDevice(),u={method:e};return i&&(u.data=i),n&&(u.headers={},u.headers["Content-Type"]=n),u.responseType="whatever",s&&(u.onLoad=function(e){a&&clearTimeout(a),s(!0,e)},u.onError=function(e){s(!1,e)}),o=function(){h.isFunction(l.abort)&&l.abort()},l=c.loadURL(t,u),0<=r&&(a=setTimeout(function(){o()},r)),o}})}),define("rofl/analytics/video/conviva/interfaces/logging",["rofl/analytics/video/conviva/interfaces/abstract","rofl/lib/analytics/conviva","rofl/application"],function(e,n,r){"use strict";return e.extend({consoleLog:function(e,t){var i=r.getCurrentApplication().getDevice().getLogger();switch(t){case n.SystemSettings.LogLevel.DEBUG:i.debug(e);break;case n.SystemSettings.LogLevel.INFO:i.info(e);break;case n.SystemSettings.LogLevel.WARNING:i.warn(e);break;case n.SystemSettings.LogLevel.ERROR:i.error(e);break;case n.SystemSettings.LogLevel.NONE:break;default:i.log(e)}}})}),define("rofl/analytics/video/conviva/interfaces/metadata",["rofl/analytics/video/conviva/interfaces/abstract","rofl/application","rofl/lib/analytics/conviva","rofl/devices/device","antie/runtimecontext"],function(e,t,n,r,s){"use strict";return e.extend({getBrowserName:function(){return"non-browser app"},getBrowserVersion:function(){return"non-browser app"},getDeviceBrand:function(){return s.getDevice().getBrand()},getDeviceManufacturer:function(){return s.getDevice().getBrand()},getDeviceModel:function(){return s.getDevice().getModel()},getDeviceType:function(){var e=s.getDevice(),t=n.Client.DeviceType,i=t.SMARTTV;return/playstation_3|playstation_4/.test(e.getModel())?i=t.CONSOLE:/abox|glashart/.test(e.getBrand())&&(i=t.SETTOP),i},getDeviceVersion:function(){return null},getFrameworkName:function(){return null},getFrameworkVersion:function(){return null},getOperatingSystemName:function(){var e=s.getDevice(),t=e.getOperatingSystem();return t&&t!==r.OPERATING_SYSTEM_NOT_AVAILABLE||(t=e.getBrand().toUpperCase()),t},getOperatingSystemVersion:function(){var e,t=s.getDevice(),i=t.getFirmware();return i&&"n.a."!==i?i:(e=t.getExtendedModel())&&e!==r.EXTENDED_MODEL_NOT_AVAILABLE?e:t.getModel()||t.getBrand()}})}),define("rofl/analytics/video/conviva/interfaces/storage",["rofl/analytics/video/conviva/interfaces/abstract","rofl/application","antie/storageprovider"],function(e,t,i){"use strict";var s=function(e){return t.getCurrentApplication().getDevice().getStorage(i.STORAGE_TYPE_PERSISTENT,e)};return e.extend({loadData:function(e,t,i){var n=s(e);try{i(!0,n.getItem(t))}catch(e){i(!1,e)}},saveData:function(e,t,i,n){var r=s(e);try{r.setItem(t,i),n(!0,null)}catch(e){n(!1,e)}}})}),define("rofl/analytics/video/conviva/interfaces/time",["rofl/analytics/video/conviva/interfaces/abstract"],function(e){"use strict";return e.extend({getEpochTimeMs:function(){return(new Date).getTime()}})}),define("rofl/analytics/video/conviva/interfaces/timer",["rofl/analytics/video/conviva/interfaces/abstract","rofl/application"],function(e,r){"use strict";return e.extend({createTimer:function(e,t,i){var n=setInterval(function(){r.getCurrentApplication().getDevice().getLogger().log(i),e()},t);return function(){-1!==n&&(clearInterval(n),n=-1)}}})}),define("rofl/analytics/web/abstract",["antie/class","rofl/application","rofl/session","rofl/lib/utils"],function(e,t,i,n){"use strict";var r=[],s=null,o=null,a=function(){return s||(s=t.getCurrentApplication()),s},l=function(){return o||(o=a().getDevice()),o},c=function(e){if(n.isArray(e))return e;if(n.isString(e))return[e];if(!n.isObject(e))throw new Error("Invalid type given for ids");return u(e)},u=function(e){var t,i=l(),n=i.getBrand(),r=i.getModel();if((t=e[n])||(t=e[r]),t||(t=e._default),!t)throw new Error("Invalid structure given for ids");return c(t)};return e.extend({init:function(){throw new Error("Cannot create instance of abstract class")},getAnalyticsIds:function(){return r},setAnalyticsIds:function(e){r=c(e)},getAppSessionId:function(){return i.getId()},getApplication:function(){return a()},getDevice:function(){return l()},report:function(e){throw new Error("Function `report` should be implemented")}})}),define("rofl/analytics/web/google",["rofl/analytics/web/abstract","rofl/lib/utils"],function(e,o){"use strict";var t,a,r=null,s="http://www.google-analytics.com/collect",l="https://www.google-analytics.com/collect",c={EVENT:"event",EXCEPTION:"exception",PAGEVIEW:"pageview",SCREENVIEW:"screenview",SOCIAL:"social"},u={SCREEN:"screen",PAGE:"page"},d=function(i,e){var n={};return o.each(e,function(e,t){n[i+t]=e}),n};return t=e.extend({_metrics:null,_dimensions:null,_heartbeatTimeout:null,_heartbeatTimeoutTime:15e5,_get:function(e,t,i){var n=this["_"+e][i]||{},r=this["_"+e]._default||{};if(!i)throw new Error("No Google Analytics report type given");return d(t,o.extend({},r,n))},_getCustomValues:function(e){return o.extend({},d("cd",e.dimensions),d("cm",e.metrics))},_getBaseValues:function(e){var t=this._get("dimensions","cd",e),i=this._get("metrics","cm",e);return o.extend({},t,i)},setBaseValues:function(e){this._metrics=e.metrics||{},this._dimensions=e.dimensions||{}},updateBaseValues:function(e){e.dimensions&&o.extend(this._dimensions,e.dimensions,!0),e.metrics&&o.extend(this._metrics,e.metrics,!0)},restartHeartbeat:function(){this.disableHeartbeat(),this.enableHeartbeat(this._heartbeatTimeoutTime)},enableHeartbeat:function(e){var t=this;e&&(this._heartbeatTimeoutTime=e),null!==this._heartbeatTimeout&&clearTimeout(this._heartbeatTimeout),this._heartbeatTimeout=setTimeout(function(){t.onEvent("session","heartbeat")},this._heartbeatTimeoutTime)},disableHeartbeat:function(){null!==this._heartbeatTimeout&&(clearTimeout(this._heartbeatTimeout),this._heartbeatTimeout=null)},init:function(){var e,t,i,n;if(this._metrics={},this._dimensions={},r)throw new Error("Analytics::Google::init called for a second time");if(!(e=this.getApplication().getConfiguration().analytics))throw new Error("Your Application config must have an `analytics` section");if(!(i=e.google))throw new Error("Your Application config must have a `google` section for analytics");this._endpoint=i.secure?l:s,i[n=this.getDevice().getEnvironment()]&&(this.setAnalyticsIds(i[n]),t=this.getDevice(),!(a={v:1,cs:i.campaign||"OTT",cm:t.getBrand(),ck:t.getModel(),an:this.getApplication().getId(),av:this.getApplication().getConfiguration().version||"n/a",aip:i.anonymous?1:0})===i.sendAppId&&delete a.an)},_trackPixel:function(e){var t=o.addToQueryStringOfURL(this._endpoint,e);return(new Image).src=t},report:function(e,t){var i,n,r,s;if(!(r=(n=this.getAnalyticsIds()).length))return!1;for(t=o.extend({cid:this.getAppSessionId(),t:e},a,t),i=0;i<r;i++)s=o.extend({tid:n[i],z:(new Date).getTime()},t),this._trackPixel(s);return this.restartHeartbeat(),!0},onEvent:function(e,t,i){var n={ec:e,ea:t};return(i=i||{}).eventView&&i.eventView.type&&i.eventView.location&&(i.eventView.type===u.SCREEN?n.cd=i.eventView.location:n.dp=i.eventView.location),i.eventLabel&&(n.el=i.eventLabel),i.eventValue&&(n.ev=i.eventValue),i.customValues?o.extend(n,this._getBaseValues(c.EVENT),this._getCustomValues(i.customValues)):o.extend(n,this._getBaseValues(c.EVENT)),this.report(c.EVENT,n)},onException:function(e,t){var i={exd:e};return(t=t||{}).customValues?o.extend(i,this._getBaseValues(c.EXCEPTION),this._getCustomValues(t.customValues)):o.extend(i,this._getBaseValues(c.EXCEPTION)),this.report(c.EXCEPTION,i)},onPageView:function(e,t){var i={dp:e};return(t=t||{}).customValues?o.extend(i,this._getBaseValues(c.PAGEVIEW),this._getCustomValues(t.customValues)):o.extend(i,this._getBaseValues(c.PAGEVIEW)),this.report(c.PAGEVIEW,i)},onScreenView:function(e,t){var i={cd:e};return(t=t||{}).customValues?o.extend(i,this._getBaseValues(c.SCREENVIEW),this._getCustomValues(t.customValues)):o.extend(i,this._getBaseValues(c.SCREENVIEW)),this.report(c.SCREENVIEW,i)},onSocial:function(e,t,i,n){var r={sn:e,sa:t,st:i};return(n=n||{}).customValues?o.extend(r,this._getBaseValues(c.SOCIAL),this._getCustomValues(n.customValues)):o.extend(r,this._getBaseValues(c.SOCIAL)),this.report(c.SOCIAL,r)}}),{getInstance:function(){return null===r&&(r=new t),r},ENDPOINT:s,SECURE_ENDPOINT:l,TYPES:c,VIEW_TYPES:u}}),define("rofl/application",["antie/application","antie/runtimecontext","antie/devices/device","antie/widgets/componentcontainer","rofl/events/broadcastevent","antie/events/keyevent","rofl/bootloader","rofl/router","rofl/lib/pubsub","rofl/lib/utils","rofl/lib/l10n","rofl/logger"],function(e,c,u,t,i,n,d,r,s,h,o,g){"use strict";var p,a=e.extend({init:function(e,n,r,t,i){var s,o,a,l=this;if(c.setCurrentApplication(this),p)throw new Error("Application::init called for a second time. You can only have one application instance running at any time.");if(this._translation={},this._readyState=!1,this._rootElement=e,this._rootWidget=null,this._focussedWidget=null,this._onReadyHandler=t,p=this,o=i||antie.framework.deviceConfiguration,!(s=this._applicationConfiguration=antie.applicationConfiguration||{}).id||!s.deviceConfigName)throw new Error("Missing required application configuration fields");!0===s.debug&&(o.logging.level="all",o.modules.modifiers.unshift("rofl/devices/misc/developer")),g.install(),this._startupTimer=setTimeout(h.bind(this._onStartupTimeExceeded,this),1e3*this.getMaxStartupTime()),a=function(i){var e;(l._device=i).setScope(s.deviceConfigName),i.setApplication(l),i.addClassToElement(i.getTopLevelElement(),i.getBrand()),require(["rofl/logging/graylog"],function(e){g.addLogger(e.getInstance())}),d.execute().then(function(){var t;if(i.addKeyEventListener(),i.addPointerEventListener(),(t=l.getBestFitLayout()).css=t.css||[],o.css)for(e=0;e<o.css.length;e++)o.css[e].width===t.width&&o.css[e].height===t.height&&(t.css=t.css.concat(o.css[e].files));require([t.module],function(e){l.setLayout(e,n,r,t.css,t.classes,[],function(){l.run()})},function(e){var t="Failed loading the layout module(s).";i.getLogger().error(t,e),g.onAppError(t+" "+e)})},function(e){var t="Failed executing the bootloader.";e&&(e instanceof Error?t+=" "+e.name+": "+e.message:h.isString(e)&&(t+=" "+e)),g.onAppError(t)})},this._device?a(this._device):u.load(o,{onSuccess:a,onError:function(e){var t,i="Unable to load device.";!0===s.debug&&console.error(i,e),t=e.requireType||e.requireModules?e:e.name+": "+e.message,g.onAppError(i+" "+t)}})},getId:function(){return this._applicationConfiguration.id},route:function(e,t){var i=r.getInstance();return h.isString(e)?i.route(e,t):i.deeplink(e)},ready:function(){this._readyState=!0,clearTimeout(this._startupTimer),g.onAppSessionStart(),this.route(c.getDevice().getCurrentRoute()),this._onReadyHandler&&(this._onReadyHandler(this),this._onReadyHandler=null)},run:function(){this.ready()},getSupportedLayoutSizes:function(){return[]},supportsLayout:function(e){var t,i=e.width,n=e.height,r=this.getSupportedLayoutSizes(),s=0,o=r.length;if(0===o)return!0;for(;s<o;s++)if((t=r[s]).width===i&&t.height===n)return!0;return!1},getBestFitLayout:function(){var e,t=this._device.getConfig().layouts,i=this._device.getScreenSize(),n=[],r=0,s=t.length;for(t.sort(function(e,t){var i=e.width*e.width+e.height*t.height,n=t.width*t.width+t.height*t.height;return i===n?0:i<n?1:-1});r<s;r++)if(e=t[r],this.supportsLayout(e)&&(n.push(e),i.height>=e.height&&i.width>=e.width))return e;if(0===n.length)throw new Error("No supported layouts found");return n.pop()},addEventListener:function(e,t){~h.indexOf(i.LOCAL_BROADCAST_EVENTS,e)||"$"===e.charAt(0)?s.sub(e.replace("$",""),t,"--all"):this._super(e,t)},removeEventListener:function(e,t){~h.indexOf(i.LOCAL_BROADCAST_EVENTS,e)||"$"===e.charAt(0)?s.unsub(e.replace("$",""),t,"--all"):this._super(e,t)},broadcastEvent:function(e){e=i.convert(e),s.pub(e.type,e.data,"--all")},bubbleEvent:function(e){!1===this._readyState&&e instanceof n||this._super(e)},popComponent:function(e,t){!0===t?this._rootWidget.getChildWidget(e).pop():this._super(e)},setLayout:function(e,t,i,n,r,s,o){var a,l,c,u,d;if(e.deviceCss)for(a in c=this._device.getBrand()+"-"+this._device.getModel(),e.deviceCss)for(d="!"===a.substr(0,1)?(l=a.substr(1).split(","),!1):(l=a.split(","),!0),u=0;u<l.length;u++)d||-1!==c.indexOf(l[u].substr(1))?d&&-1!==c.indexOf(l[u])&&(n=n.concat(e.deviceCss[a])):n=n.concat(e.deviceCss[a]);this._super(e,t,i,n,r,s,o)},destroy:function(){g.onAppSessionEnd(),p=void 0,this._super()},getConfiguration:function(){return this._applicationConfiguration},setConfiguration:function(e){this._applicationConfiguration=e},setTranslation:function(e){o.getInstance().setTranslation(e)},__:function(e){return o.getInstance().get(e)},exit:function(){g.onAppSessionEnd(),this._super()},getMaxStartupTime:function(){return this._maxStartupTime||30},setMaxStartupTime:function(e){this._maxStartupTime=e},_onStartupTimeExceeded:function(){g.onAppError(h.formatString("Application starting time of {0} seconds exceeded",this.getMaxStartupTime()))},_setFocussedWidget:function(e){e.isFocusable()&&e.isFocussed()&&(this._focussedWidget=e)}});return a.getCurrentApplication=function(){return p},a.__=function(e){return p.__(e)},a}),define("rofl/bootloader",["antie/runtimecontext","rofl/lib/promise","rofl/lib/utils"],function(r,s,o){"use strict";return{_registered:[],register:function(e){if(!o.isFunction(e))throw new Error("Need a function to register on the bootloader");this._registered.push(e)},execute:function(){for(var e=this._registered,t=0,i=e.length,n=s.resolve();t<i;t++)n=n.then(e[t]).catch(o.bind(function(e,t){var i;throw i=(t=t||{})instanceof Error?t.message:t,o.isEmpty(i)&&(i="Bootloader failed at step: "+(e+1)),r.getDevice().getLogger().error(i),t},null,t));return n}}}),define("rofl/class",["antie/class","rofl/lib/utils"],function(e,s){"use strict";return e.extend({decorate:function(e){var t,i,n,r;for(i=0,r=e.length;i<r;i++){for(n in t=e[i])if(t.hasOwnProperty(n)){if(void 0!==this[n])throw new Error("Cannot override a property ("+n+") which is already present");"initialize"!==n&&(this[n]=t[n])}s.isFunction(t.initialize)&&t.initialize.call(this)}return this}})}),define("rofl/components/initialisation",["antie/runtimecontext","rofl/bootloader","rofl/lib/promise","rofl/lib/utils"],function(o,e,t,i){"use strict";var n={_loadConfig:function(i){return new t(function(e,t){o.getDevice().loadURL(i,{onLoad:e,onError:t})})},_toNumber:function(e){return parseInt(e,10)||0},_compareVersion:function(e,t){var i,n,r,s=0;for(e||(o.getDevice().getLogger().log("No local version found, falling back to 0.0.1"),e="0.0.1"),t||(o.getDevice().getLogger().log("No remote version found, falling back to 0.0.1"),t="0.0.1"),i=e.split("."),n=t.split("."),r=Math.max(i.length,n.length);s<r&&!(this._toNumber(i[s])>this._toNumber(n[s]));s++)if(this._toNumber(i[s])<this._toNumber(n[s]))return!1;return!0},_redirect:function(e){location.href=e},initialise:function(){var t=this,i=o.getCurrentApplication().getConfiguration(),e=(i.baseUrl||"")+"initialisation.json?bust="+(new Date).getTime();return this._loadConfig(e).then(function(e){return!(t._compareVersion(i.version,e.version)||!e.redirect)&&e.redirect}).then(function(e){e&&t._redirect(e)}).catch(function(){o.getDevice().getLogger().warn("Encountered an issue while initialisation config")})}};return e.register(i.bind(n.initialise,n)),n}),define("rofl/config",function(){"use strict";require.config({map:{"*":{"antie/application":"rofl/application","antie/datasource":"rofl/datasource","antie/devices/anim/css3":"rofl/devices/anim/css3","antie/devices/anim/styletopleft":"rofl/devices/anim/styletopleft","antie/devices/anim/css3/transition":"antie/devices/anim/css3/transition","antie/devices/anim/css3/transitiondefinition":"antie/devices/anim/css3/transitiondefinition","antie/devices/anim/css3/existingtransitiondefinition":"antie/devices/anim/css3/existingtransitiondefinition","antie/devices/anim/css3/optionstransitiondefinition":"antie/devices/anim/css3/optionstransitiondefinition","antie/devices/anim/css3/skipanimtransitiondefinition":"antie/devices/anim/css3/skipanimtransitiondefinition","antie/devices/anim/css3/transitionelement":"antie/devices/anim/css3/transitionelement","antie/devices/anim/css3/easinglookup":"antie/devices/anim/css3/easinglookup","antie/devices/anim/css3/propertymap":"antie/devices/anim/css3/propertymap","antie/devices/anim/css3/stringhelpers":"antie/devices/anim/css3/stringhelpers","antie/devices/storage/xboxpls":"rofl/devices/storage/xboxpls","antie/devices/broadcastsource/hbbtvsource":"rofl/devices/broadcastsource/hbbtvsource","antie/devices/browserdevice":"rofl/devices/browserdevice","antie/devices/device":"rofl/devices/device","antie/events/keyevent":"rofl/events/keyevent","antie/iterator":"rofl/iterator","antie/lib/date.format":"rofl/lib/date.format","antie/lib/date.parse":"rofl/lib/date.parse","antie/urlbuilder":"rofl/urlbuilder","antie/widgets/button":"rofl/widgets/button","antie/widgets/carousel/strips/widgetstrip":"rofl/widgets/carousel/strips/widgetstrip","antie/widgets/carousel/strips/wrappingstrip":"rofl/widgets/carousel/strips/wrappingstrip","antie/widgets/carousel/strips/cullingstrip":"rofl/widgets/carousel/strips/cullingstrip","antie/widgets/componentcontainer":"rofl/widgets/componentcontainer","antie/widgets/container":"rofl/widgets/container","antie/widgets/grid":"rofl/widgets/grid","antie/widgets/image":"rofl/widgets/image","antie/widgets/keyboard":"rofl/widgets/keyboard","antie/widgets/label":"rofl/widgets/label","antie/widgets/list":"rofl/widgets/list","antie/widgets/horizontallist":"rofl/widgets/horizontallist","antie/widgets/verticallist":"rofl/widgets/verticallist","antie/widgets/widget":"rofl/widgets/widget","antie/devices/mediaplayer/cehtml":"rofl/devices/mediaplayer/cehtml","antie/devices/mediaplayer/html5":"rofl/devices/mediaplayer/html5","antie/devices/mediaplayer/mediaplayer":"rofl/devices/mediaplayer/mediaplayer","rofl/lib/y":"rofl/lib/utils","antie/class":"rofl/class"},"rofl/application":{"antie/application":"antie/application"},"rofl/datasource":{"antie/datasource":"antie/datasource"},"rofl/devices/anim/css3":{"antie/devices/anim/css3":"antie/devices/anim/css3"},"rofl/devices/anim/styletopleft":{"antie/devices/anim/styletopleft":"antie/devices/anim/styletopleft"},"rofl/devices/broadcastsource/hbbtvsource":{"antie/devices/broadcastsource/hbbtvsource":"antie/devices/broadcastsource/hbbtvsource"},"rofl/devices/browserdevice":{"antie/devices/browserdevice":"antie/devices/browserdevice"},"rofl/devices/device":{"antie/devices/device":"antie/devices/device"},"rofl/devices/network":{"antie/devices/device":"antie/devices/device"},"rofl/events/keyevent":{"antie/events/keyevent":"antie/events/keyevent"},"rofl/iterator":{"antie/iterator":"antie/iterator"},"rofl/urlbuilder":{"antie/urlbuilder":"antie/urlbuilder"},"rofl/widgets/button":{"antie/widgets/button":"antie/widgets/button"},"rofl/widgets/carousel":{"antie/widgets/carousel":"antie/widgets/carousel"},"rofl/widgets/carousel/carouselcore":{"antie/widgets/carousel/carouselcore":"antie/widgets/carousel/carouselcore"},"rofl/widgets/carousel/keyhandlers/keyhandler":{"antie/widgets/carousel/keyhandlers/keyhandler":"antie/widgets/carousel/keyhandlers/keyhandler"},"rofl/widgets/carousel/mask":{"antie/widgets/carousel/mask":"antie/widgets/carousel/mask"},"rofl/widgets/carousel/navigators/navigator":{"antie/widgets/carousel/navigators/navigator":"antie/widgets/carousel/navigators/navigator"},"rofl/widgets/carousel/strips/cullingstrip":{"antie/widgets/carousel/strips/cullingstrip":"antie/widgets/carousel/strips/cullingstrip"},"rofl/widgets/carousel/strips/widgetstrip":{"antie/widgets/carousel/strips/widgetstrip":"antie/widgets/carousel/strips/widgetstrip"},"rofl/widgets/carousel/strips/wrappingstrip":{"antie/widgets/carousel/strips/wrappingstrip":"antie/widgets/carousel/strips/wrappingstrip"},"rofl/widgets/componentcontainer":{"antie/widgets/componentcontainer":"antie/widgets/componentcontainer"},"rofl/widgets/container":{"antie/widgets/container":"antie/widgets/container"},"rofl/widgets/grid":{"antie/widgets/grid":"antie/widgets/grid"},"rofl/widgets/image":{"antie/widgets/image":"antie/widgets/image"},"rofl/widgets/keyboard":{"antie/widgets/keyboard":"antie/widgets/keyboard"},"rofl/widgets/label":{"antie/widgets/label":"antie/widgets/label"},"rofl/widgets/list":{"antie/widgets/list":"antie/widgets/list"},"rofl/widgets/horizontallist":{"antie/widgets/horizontallist":"antie/widgets/horizontallist"},"rofl/widgets/verticallist":{"antie/widgets/verticallist":"antie/widgets/verticallist"},"rofl/widgets/widget":{"antie/widgets/widget":"antie/widgets/widget"},"rofl/devices/mediaplayer/cehtml":{"antie/devices/mediaplayer/cehtml":"antie/devices/mediaplayer/cehtml"},"rofl/devices/mediaplayer/html5":{"antie/devices/mediaplayer/html5":"antie/devices/mediaplayer/html5"},"rofl/devices/mediaplayer/mediaplayer":{"antie/devices/mediaplayer/mediaplayer":"antie/devices/mediaplayer/mediaplayer"},"rofl/class":{"antie/class":"antie/class"}},config:{text:{useXhr:function(){return!0}}}})}),define("rofl/data/encoding.map",function(){"use strict";return{Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",amp:"&",AMP:"&",andand:"⩕",And:"⩓",and:"∧",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angmsd:"∡",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",apacir:"⩯",ap:"≈",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxHd:"╤",boxhD:"╥",boxHD:"╦",boxhu:"┴",boxHu:"╧",boxhU:"╨",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"𝒷",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsolb:"⧅",bsol:"\\",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",capand:"⩄",capbrcup:"⩉",capcap:"⩋",cap:"∩",Cap:"⋒",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"𝔠",Cfr:"ℭ",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cir:"○",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"𝕔",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cup:"∪",Cup:"⋓",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",Darr:"↡",dArr:"⇓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",ddagger:"‡",ddarr:"⇊",DD:"ⅅ",dd:"ⅆ",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrowBar:"⤓",downarrow:"↓",DownArrow:"↓",Downarrow:"⇓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVectorBar:"⥖",DownLeftVector:"↽",DownRightTeeVector:"⥟",DownRightVectorBar:"⥗",DownRightVector:"⇁",DownTeeArrow:"↧",DownTee:"⊤",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",Ecirc:"Ê",ecirc:"ê",ecir:"≖",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",edot:"ė",eDot:"≑",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp13:" ",emsp14:" ",emsp:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"𝒻",Fscr:"ℱ",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",ge:"≥",gE:"≧",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",gescc:"⪩",ges:"⩾",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gla:"⪥",gl:"≷",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",gtcc:"⪧",gtcir:"⩺",gt:">",GT:">",Gt:"≫",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",harrcir:"⥈",harr:"↔",hArr:"⇔",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"𝔥",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"𝕙",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"𝒽",Hscr:"ℋ",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",ifr:"𝔦",Ifr:"ℑ",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",Im:"ℑ",imof:"⊷",imped:"Ƶ",Implies:"⇒",incare:"℅",in:"∈",infin:"∞",infintie:"⧝",inodot:"ı",intcal:"⊺",int:"∫",Int:"∬",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",iscr:"𝒾",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larrb:"⇤",larrbfs:"⤟",larr:"←",Larr:"↞",lArr:"⇐",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",latail:"⤙",lAtail:"⤛",lat:"⪫",late:"⪭",lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",LeftArrowBar:"⇤",leftarrow:"←",LeftArrow:"←",Leftarrow:"⇐",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVectorBar:"⥙",LeftDownVector:"⇃",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTeeArrow:"↤",LeftTee:"⊣",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangleBar:"⧏",LeftTriangle:"⊲",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVectorBar:"⥘",LeftUpVector:"↿",LeftVectorBar:"⥒",LeftVector:"↼",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",lescc:"⪨",les:"⩽",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",llarr:"⇇",ll:"≪",Ll:"⋘",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoustache:"⎰",lmoust:"⎰",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftrightarrow:"⟷",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longmapsto:"⟼",longrightarrow:"⟶",LongRightArrow:"⟶",Longrightarrow:"⟹",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"𝓁",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",ltcc:"⪦",ltcir:"⩹",lt:"<",LT:"<",Lt:"≪",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",midast:"*",midcir:"⫰",mid:"∣",middot:"·",minusb:"⊟",minus:"−",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",mscr:"𝓂",Mscr:"ℳ",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natural:"♮",naturals:"ℕ",natur:"♮",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",ne:"≠",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nlE:"≦̸",nle:"≰",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"𝕟",Nopf:"ℕ",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangleBar:"⧏̸",NotLeftTriangle:"⋪",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangleBar:"⧐̸",NotRightTriangle:"⋫",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",nparallel:"∦",npar:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",nprec:"⊀",npreceq:"⪯̸",npre:"⪯̸",nrarrc:"⤳̸",nrarr:"↛",nrArr:"⇏",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",Ocirc:"Ô",ocirc:"ô",ocir:"⊚",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",orarr:"↻",Or:"⩔",or:"∨",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",otimesas:"⨶",Otimes:"⨷",otimes:"⊗",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",para:"¶",parallel:"∥",par:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plus:"+",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"𝕡",Popf:"ℙ",pound:"£",prap:"⪷",Pr:"⪻",pr:"≺",prcue:"≼",precapprox:"⪷",prec:"≺",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",pre:"⪯",prE:"⪳",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportional:"∝",Proportion:"∷",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",qopf:"𝕢",Qopf:"ℚ",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",quot:"'",QUOT:"'",rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarr:"→",Rarr:"↠",rArr:"⇒",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",Re:"ℜ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"𝔯",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrowBar:"⇥",rightarrow:"→",RightArrow:"→",Rightarrow:"⇒",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVectorBar:"⥕",RightDownVector:"⇂",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTeeArrow:"↦",RightTee:"⊢",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangleBar:"⧐",RightTriangle:"⊳",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVectorBar:"⥔",RightUpVector:"↾",RightVectorBar:"⥓",RightVector:"⇀",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoustache:"⎱",rmoust:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"𝕣",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"𝓇",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",scap:"⪸",Scaron:"Š",scaron:"š",Sc:"⪼",sc:"≻",sccue:"≽",sce:"⪰",scE:"⪴",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdotb:"⊡",sdot:"⋅",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",solbar:"⌿",solb:"⧄",sol:"/",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",square:"□",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squ:"□",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succapprox:"⪸",succ:"≻",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup1:"¹",sup2:"²",sup3:"³",sup:"⊃",Sup:"⋑",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",therefore:"∴",Therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",ThinSpace:" ",thinsp:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",tilde:"˜",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",timesbar:"⨱",timesb:"⊠",times:"×",timesd:"⨰",tint:"∭",toea:"⤨",topbot:"⌶",topcir:"⫱",top:"⊤",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",uarr:"↑",Uarr:"↟",uArr:"⇑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrowBar:"⤒",uparrow:"↑",UpArrow:"↑",Uparrow:"⇑",UpArrowDownArrow:"⇅",updownarrow:"↕",UpDownArrow:"↕",Updownarrow:"⇕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTeeArrow:"↥",UpTee:"⊥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",Vcy:"В",vcy:"в",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",veebar:"⊻",vee:"∨",Vee:"⋁",veeeq:"≚",vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xharr:"⟷",xhArr:"⟺",Xi:"Ξ",xi:"ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",yuml:"ÿ",Yuml:"Ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",zfr:"𝔷",Zfr:"ℨ",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",zopf:"𝕫",Zopf:"ℤ",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}}),define("rofl/datasource",["antie/datasource"],function(e){"use strict";return e.extend({getArgs:function(){return this._args},setArgs:function(e){this._args=e}})}),define("rofl/datasources/abstract",["antie/class","antie/application","rofl/models/api/abstract","rofl/datasources/adapter/interface","rofl/session","rofl/lib/promise","rofl/lib/utils"],function(e,t,s,i,n,o,a){"use strict";var l=t.getCurrentApplication().getDevice(),r=n.getStorage("DAL");return e.extend({_adapter:null,_modelPath:null,_endpoint:null,_modelPromise:null,init:function(){throw new Error("Cannot create an instance of an abstract Class")},getCache:function(e){return r.getItem(e)||!1},setCache:function(e,t){r.setItem(e,t)},getAdapter:function(){return this._adapter},setAdapter:function(e){if(!(e instanceof i))throw new Error("Adapter should be an instance of AdapterInterface");this._adapter=e},getApiEndpoint:function(){return this._endpoint},setApiEndpoint:function(e){this._endpoint=e},getModelPath:function(){return this._modelPath},setModelPath:function(e){this._modelPath=e},fetchModel:function(i){var n=this;return i instanceof s?o.resolve(i):new o(function(t,e){require([n._modelPath+i],function(e){t(new e)},e)})},create:function(e,n){var r=this;return this.fetchModel(e).then(function(t){var i;if(!(t instanceof s))throw new Error("Model should be an instance of ModelInterface");return i=r.getApiEndpoint()+t.resolveCreateEndpoint(n.params),t.transformToCreate(n.data).then(function(e){return n.data=e,r._adapter.create(i,n)}).then(function(e){return t.validateCreateResponse(e)?t.transformFromCreate(e):o.reject(e||"Invalid response from API")})})},read:function(e,i){var t,n,r=this;return i=i||{},a.isString(e)&&(n=e+l.encodeJson(i.params||{})+l.encodeJson(i.headers||{}),t=r.getCache(n),!0!==i.notFromCache&&t)?o.resolve(t):this.fetchModel(e).then(function(t){var e;if(!(t instanceof s))throw new Error("Model should be an instance of ModelInterface");return(t.hasLocalData(i)?o.resolve(t.getLocalData(i)):(e=r.getApiEndpoint()+t.resolveReadEndpoint(i.params),r._adapter.read(e,i))).then(function(e){return t.validateReadResponse(e)?t.transformFromRead(e):o.reject(e||"Invalid response from API")}).then(function(e){return t.isCacheable()&&n&&r.setCache(n,e),e})})},update:function(e,n){var r=this;return this.fetchModel(e).then(function(t){var i;if(!(t instanceof s))throw new Error("Model should be an instance of ModelInterface");return i=r.getApiEndpoint()+t.resolveUpdateEndpoint(n.params),t.transformToUpdate(n.data).then(function(e){return n.data=e,r._adapter.update(i,n)}).then(function(e){return t.validateUpdateResponse(e)?t.transformFromUpdate(e):o.reject(e||"Invalid response from API")})})},destroy:function(e,i){var n=this;return this.fetchModel(e).then(function(t){var e;if(!(t instanceof s))throw new Error("Model should be an instance of ModelInterface");return e=n.getApiEndpoint()+t.resolveDestroyEndpoint(i.params),n._adapter.destroy(e,i).then(function(e){return t.validateDestroyResponse(e)?t.transformFromDestroy(e):o.reject(e||"Invalid response from API")})})}})}),define("rofl/datasources/adapter/interface",["antie/class"],function(e){"use strict";var t=function(){throw new Error("Not implemented yet.")};return e.extend({create:t,read:t,update:t,destroy:t})}),define("rofl/datasources/adapter/jsonrpc",["rofl/datasources/adapter/interface","antie/application","rofl/lib/promise","rofl/lib/utils","rofl/logger"],function(e,t,n,o,a){"use strict";var l=0,c=t.getCurrentApplication().getDevice();return e.extend({call:function(r,s,i){return n(function(t,n){var e={jsonrpc:"2.0",method:s,params:[i.data||{}],id:++l};i.data=c.encodeJson(e),i.method="POST",c.loadURL(r,o.extend({withCredentials:!1,onLoad:function(e){t(e)},onError:function(e,t){var i=e;o.isObject(i)&&(i=c.encodeJson(i)),a.onApiError(r,s,t,i),n(e)}},i))})},create:function(e,t){return this.call(e,t.method||"Create",t)},read:function(e,t){return this.call(e,t.method||"Read",t)},update:function(e,t){return this.call(e,t.method||"Update",t)},destroy:function(e,t){return this.call(e,t.method||"Destroy",t)}})}),define("rofl/datasources/adapter/rest",["rofl/datasources/adapter/interface","antie/application","rofl/lib/promise","rofl/lib/utils","rofl/logger"],function(e,t,i,o,a){"use strict";var l=t.getCurrentApplication().getDevice(),n="GET",r="POST",s="PUT",c="DELETE";return e.extend({call:function(r,s,e){return i(function(t,n){l.loadURL(r,o.extend({method:s,withCredentials:!1,onLoad:function(e){t(e)},onError:function(e,t){var i=e;o.isObject(i)&&(i=l.encodeJson(i)),a.onApiError(r,s,t,i),n(e)}},e||{}))})},create:function(e,t){return this.call(e,r,t)},read:function(e,t){return this.call(e,n,t)},update:function(e,t){return this.call(e,s,t)},destroy:function(e,t){return this.call(e,c,t)}})}),define("rofl/datasources/api",["antie/class","antie/runtimecontext","rofl/lib/promise","rofl/lib/utils"],function(e,n,t,s){"use strict";var r,o=function(e){var t,i=(r||(r=n.getCurrentApplication().getConfiguration().api),r);if(!i)throw new Error("Your Application config must have 'api' configuration");if(!(t=i[e=e||i._default]))throw new Error("Your Application config must have 'api' configuration for: '"+e+"'");return t};return e.extend({_dataSourcePromise:null,_headers:null,_withCredentials:null,init:function(i){s.isObject(i)||(i=o(i)),this._headers=i.headers||{},this._withCredentials=i.withCredentials,this._dataSourcePromise=t(function(t,e){require([i.datasource],function(e){t(new e(i))},e)})},create:function(e,t){return this._proxy("create",e,t)},read:function(e,t){return this._proxy("read",e,t)},update:function(e,t){return this._proxy("update",e,t)},destroy:function(e,t){return this._proxy("destroy",e,t)},_proxy:function(t,i,n){var e,r;return(n=n||{}).headers=(e=this._headers,r=n.headers,s.extend(s.clone(e),r||{})),s.isUndefined(this._withCredentials)||(n.withCredentials=this._withCredentials),this._dataSourcePromise.then(function(e){return e[t].call(e,i,n)})}})}),define("rofl/datasources/jsonrpc",["rofl/datasources/abstract","rofl/datasources/adapter/jsonrpc"],function(e,t){"use strict";return e.extend({init:function(e){this.setModelPath(e.modelPath),this.setApiEndpoint(e.endpoint.url),this.setAdapter(new t)}})}),define("rofl/datasources/restful",["rofl/datasources/abstract","rofl/datasources/adapter/rest"],function(e,t){"use strict";return e.extend({init:function(e){this.setModelPath(e.modelPath),this.setApiEndpoint(e.endpoint.url),this.setAdapter(new t)}})}),define("rofl/decorators/continuouslistener",["rofl/events/keyevent","rofl/lib/utils"],function(t,e){"use strict";return{_proxyContinuousListening:!1,initialize:function(){this._proxyContinuousEventBound=e.bind(this._proxyContinuousEvent,this)},setContinuousListener:function(e){this._proxyContinuousListening=!1!==e,this._proxyContinuousListening?this._addContinuousListener():this._removeContinuousListener()},isContinuousListening:function(){return this._proxyContinuousListening},_addContinuousListener:function(){this.addEventListener("keypress",this._proxyContinuousEventBound)},_removeContinuousListener:function(){this._proxyContinuousListening&&this.removeEventListener("keypress",this._proxyContinuousEventBound)},_proxyContinuousEvent:function(e){this.fireEvent(new t("keydown",e.keyCode))}}}),define("rofl/decorators/focus",["antie/runtimecontext","antie/events/focusdelayevent"],function(i,n){"use strict";return{initialize:function(){this.isFocusable=function(){return!0},this._focusDelayTimeout=i.getDevice().isAnimationDisabled()?500:1500},focus:function(){for(var e=this;e.parentWidget;){if(!e.parentWidget.setActiveChildWidget(e))return!1;e=e.parentWidget}return!0},setFocusDelayTime:function(e){this._focusDelayTimeout=e},_setActiveChildFocussed:function(e){var t=this;this._focusDelayHandle&&clearTimeout(this._focusDelayHandle),e&&(this._focusDelayHandle=setTimeout(function(){t.bubbleEvent(new n(t))},this._focusDelayTimeout),i.getCurrentApplication()._setFocussedWidget(this))}}}),define("rofl/decorators/pointer",["rofl/lib/utils","rofl/devices/input/pointer"],function(t,i){"use strict";var n;return{initialize:function(){n||(n=i.getInstance()),this._mouseWasOver=!1,this._mouseOver=!1,this._hoverTimeout=null,this._hoverDelay=20,(this._detectorWidget=this)._hoverFunctionBound=t.bind(this._hoverFunction,this)},initPointerHandlers:function(e){e&&(this._detectorWidget=e),this.destroyPointerHandlers(),this._onPointerOn=t.bind(function(){t.isFunction(this._onPointerOnHandler)&&this._onPointerOnHandler()},this),n.subscribe(i.EVENTS.POINTER_ON,this._onPointerOn),t.isFunction(this._onPointerOnHandler)&&n.pointerIsOn()&&this._onPointerOnHandler(),this._onPointerOff=t.bind(function(){this._mouseWasOver=!1,this._mouseOver=!1,t.isFunction(this._onPointerOffHandler)&&this._onPointerOffHandler()},this),n.subscribe(i.EVENTS.POINTER_OFF,this._onPointerOff),this._onMouseOver=t.bind(function(){n.pointerIsOn()&&(this._mouseOver=!0,this._mouseWasOver||setTimeout(this._onMouseEnter,1))},this),this._onMouseEnter=t.bind(function(){this._mouseOver&&!this._mouseWasOver&&(t.isFunction(this._onMouseEnterHandler)&&this._onMouseEnterHandler(),t.isFunction(this._hoverHandler)&&(clearTimeout(this._hoverTimeout),this._hoverTimeout=setTimeout(this._hoverFunctionBound,this._hoverDelay)),this._mouseWasOver=!0)},this),this._detectorWidget.outputElement&&this._detectorWidget.outputElement.addEventListener("mouseover",this._onMouseOver),this._onMouseOut=t.bind(function(){n.pointerIsOn()&&(this._mouseOver=!1,this._mouseWasOver&&setTimeout(this._onMouseLeave,1))},this),this._onMouseLeave=t.bind(function(){!this._mouseOver&&this._mouseWasOver&&(t.isFunction(this._onMouseLeaveHandler)&&this._onMouseLeaveHandler(),this._mouseWasOver=!1)},this),this._detectorWidget.outputElement&&this._detectorWidget.outputElement.addEventListener("mouseout",this._onMouseOut)},destroyPointerHandlers:function(){this._onPointerOn&&n.unsubscribe(i.EVENTS.POINTER_ON,this._onPointerOn),this._onPointerOff&&n.unsubscribe(i.EVENTS.POINTER_OFF,this._onPointerOff),this._detectorWidget.outputElement&&(this._detectorWidget.outputElement.removeEventListener("mouseover",this._onMouseOver),this._detectorWidget.outputElement.removeEventListener("mouseout",this._onMouseOut)),this._hoverTimeout&&clearInterval(this._hoverTimeout),this._onPointerOn=null,this._onPointerOff=null,this._onMouseOver=null,this._onMouseOut=null},_hoverFunction:function(){this.isMouseOver()&&0<this._hoverDelay&&(this._hoverTimeout=setTimeout(this._hoverFunctionBound,this._hoverDelay),t.isFunction(this._hoverHandler)&&(this._hoverHandler(),n.pointerIsOn()&&n.resetTimeout()))},getHoverDelay:function(){return this._hoverDelay},setHoverDelay:function(e){this._hoverDelay=e},isMouseOver:function(){return this._mouseWasOver}}}),define("rofl/decorators/scrollable",["rofl/lib/utils","rofl/devices/input/pointer","rofl/widgets/pointerdecoratedbutton","rofl/widgets/label","rofl/events/scrolllimitevent","rofl/widgets/carousel","rofl/widgets/list","antie/events/event"],function(o,t,i,n,e,s,a,r){"use strict";var l,c=["up","down","left","right"];return{initialize:function(){var e=this;l||(l=t.getInstance()),(this._scrollContainer=this)._canScroll={},this._atScrollLimit={},this._scrollClickHandlers={},this._hoverScrollSpeed=4,this._clickScrollDist=250,this._clickScrollStep=3,(this._scrollAnimHolder=this)._scrollAnimationOptions={duration:250,easing:"easeInOut",skipAnim:!1,fps:60,onComplete:function(){e._scrollAnimHolder.setAnimation(null)}},this._pagingOffset=null,this._mouseWheelHandlerBound=o.bind(this._mouseWheelHandler,this)},initScrollContainer:function(e){var t;e&&(this._scrollContainer=e),this.cleanScrollContainer(),this._scrollContainer.addClass("scrollable"),this._scrollContainer._scrollArrows={},o.each(c,function(e){this._canScroll[e]=!1,this._scrollClickHandlers[e]=null,(t=new i).addClass([e,"scrollarrow"]),t.appendChildWidget(new n("",["icon","arrow-"+e])),this._scrollContainer._scrollArrows[e]=this._scrollContainer.appendChildWidget(t)},this),this._scrollContainer.outputElement&&this._scrollContainer.outputElement.addEventListener("wheel",this._mouseWheelHandlerBound),this.hideScrollArrows(),this._onPointerOffHandler=function(){this.hideScrollArrows()},this._onMouseEnterHandler=function(){this.showScrollArrows(!0)},this._onMouseLeaveHandler=function(){this.hideScrollArrows()}},cleanScrollContainer:function(){var t=this.getScrollArrows();this._scrollAnimHolder&&this._scrollAnimHolder.setAnimation(null),t&&o.each(c,function(e){t[e]&&(this._scrollClickHandlers[e]&&(t[e].removeEventListener("select",this._scrollClickHandlers[e]),this._scrollClickHandlers[e]=null),this._scrollContainer.removeChildWidget(t[e]),delete t[e])},this),this._scrollContainer.outputElement&&this._scrollContainer.outputElement.removeEventListener("wheel",this._mouseWheelHandlerBound),this._scrollContainer.removeClass("scrollable")},_mouseWheelHandler:function(e){var t=e.deltaY,i=o.extend({},this._scrollAnimationOptions,{duration:50,easing:"linear",skipAnim:!1});this._canScroll.up&&this._canScroll.down&&(this._scrollAnimHolder.getAnimation()||this.pixelScroll(t,i))},showScrollArrows:function(e){var t,i;l.pointerIsOn()&&(e&&o.isFunction(this.pixelScrollHandler)&&(i=this.pixelScrollHandler(0),this._updateScrollLimits(i)),(!this._carousel||this._carousel&&this._carousel.canScroll())&&o.each(c,function(e){(t=this.getScrollArrows()[e])&&t.outputElement&&(this._canScroll[e]&&!this._atScrollLimit[e]?t.setStyleTo("display","block"):t.setStyleTo("display","none"))},this))},hideScrollArrows:function(){o.each(this.getScrollArrows(),function(e){e&&e.outputElement&&e.setStyleTo("display","none")},this)},getScrollArrows:function(){return this._scrollContainer._scrollArrows},allowScrollDirections:function(t){o.each(c,function(e){this._canScroll[e]=!!t[e]},this)},_updateScrollLimits:function(t){var i,n=!1;o.each(c,function(e){i=!!t[e],this._atScrollLimit[e]!==i&&(this._atScrollLimit[e]=i,n=!0)},this),n&&this.bubbleEvent(new e(this._atScrollLimit,this))},setScrollAnimHolder:function(e){this._scrollAnimHolder=e},pixelScroll:function(e,t){var i,n,r=!t||t.skipAnim,s=this;t=t||{},o.isFunction(this.pixelScrollHandler)&&(n=o.extend({skipAnim:r},t),r||(n.onComplete=function(){setTimeout(function(){s._updateScrollLimits(i),s.showScrollArrows(),s._doPagingCheck(),t.onComplete&&t.onComplete()},1)}),i=this.pixelScrollHandler(e,n),r&&(s._updateScrollLimits(i),s.showScrollArrows(),s._doPagingCheck()))},_doPagingCheck:function(){null!==this._pagingOffset&&0<this.getMaximumOffset()&&this.getMaximumOffset()-this.getCurrentScrollOffset()<this._pagingOffset&&this.bubbleEvent(new r("paginglimit"))},itemScroll:function(e,t){var i,n=this;t=t||{},this.itemScrollHandler&&((i=o.extend({},t)).onComplete=function(){t.onComplete&&t.onComplete(),n.pixelScroll(0)},this.itemScrollHandler(e,i))},scrollOptions:function(e){o.isUndefined(e.hoverScrollSpeed)||(this._hoverScrollSpeed=e.hoverScrollSpeed),o.isUndefined(e.clickScrollDistance)||(this._clickScrollDist=e.clickScrollDistance),o.isUndefined(e.clickScrollStep)||(this._clickScrollStep=e.clickScrollStep)},scrollSetup:function(t){var i,n,r=this;this.initScrollContainer(t.container),this.initPointerHandlers(t.container),this.allowScrollDirections(t.directions),this.pixelScrollHandler=t.pixelScrollHandler,this.itemScrollHandler=t.itemScrollHandler,this.pixelScroll(0),n=this.getScrollArrows(),o.each(c,function(e){(i=t.directions[e])&&(i.hoverHandler&&(n[e]._hoverHandler=i.hoverHandler),i.clickHandler&&(r._scrollClickHandlers[e]=i.clickHandler,n[e].addEventListener("select",r._scrollClickHandlers[e])))})},scrollSetupSimple:function(i){var e,t,n,r=this;i.rtl&&(r._hoverScrollSpeed=-4,r._clickScrollStep=-3),this.scrollOptions(i),i.directions=i.directions||{},this._carousel=i.carousel,i.carousel?(i.container=i.container||i.carousel.getMask(),i.pixelScrollHandler=function(e,t){return i.carousel.scrollByPixels(e,t)},i.itemScrollHandler=function(e,t){i.carousel.scrollByItems(e,t)},e={hoverHandler:function(){r.pixelScroll(-r._hoverScrollSpeed)},clickHandler:function(){r.itemScroll(-r._clickScrollStep,r._scrollAnimationOptions)}},t={hoverHandler:function(){r.pixelScroll(r._hoverScrollSpeed)},clickHandler:function(){r.itemScroll(r._clickScrollStep,r._scrollAnimationOptions)}},(n=i.carousel.orientation())===s.orientations.VERTICAL?(i.directions.up=e,i.directions.down=t):n!==s.orientations.HORIZONTAL&&n!==s.orientations.HORIZONTAL_RTL||(i.directions.left=e,i.directions.right=t),this.scrollSetup(i),this.setScrollAnimHolder(i.carousel)):i.list&&(i.container=i.container||i.list.parentWidget,i.pixelScrollHandler=function(e,t){return i.list.scrollByPixels(e,t)},e={hoverHandler:function(){r.pixelScroll(-r._hoverScrollSpeed)},clickHandler:function(){r.pixelScroll(-r._clickScrollDist,r._scrollAnimationOptions)}},t={hoverHandler:function(){r.pixelScroll(r._hoverScrollSpeed)},clickHandler:function(){r.pixelScroll(r._clickScrollDist,r._scrollAnimationOptions)}},i.list.orientation()===a.orientations.VERTICAL?(i.directions.up=e,i.directions.down=t):i.list.orientation()===a.orientations.HORIZONTAL&&(i.directions.left=e,i.directions.right=t),this.scrollSetup(i),this.setScrollAnimHolder(i.list))},scrollCleanup:function(){this.destroyPointerHandlers(),this.cleanScrollContainer()},getPagingScrollOffset:function(){return this._pagingOffset},setPagingScrollOffset:function(e){this._pagingOffset=e},unsetPagingScrollOffset:function(){this._pagingOffset=null}}});var global=window||this;define("rofl/devices/advertisement/xboxone",["antie/devices/device","rofl/lib/utils"],function(e,t){"use strict";e.prototype.allowsTargetedAdvertising=function(){return!!this.getAdvertisingId()},e.prototype.getAdvertisingId=function(){return t.getNested(global.Windows,"System","UserProfile","AdvertisingManager","advertisingId")||""}}),define("rofl/devices/anim/css3",["antie/devices/device","antie/devices/anim/css3"],function(e){"use strict";e.prototype.stopAnimation=function(e){e&&e.stop(!0)}}),define("rofl/devices/anim/styletopleft",["antie/devices/device","antie/devices/anim/styletopleft"],function(e){"use strict";e.prototype.stopAnimation=function(e){e&&e.stop(!0)}}),define("rofl/devices/broadcastsource/hbbtvsource",["rofl/devices/browserdevice","antie/devices/broadcastsource/hbbtvsource","antie/runtimecontext","antie/events/tunerunavailableevent","antie/events/tunerpresentingevent","antie/events/tunerstoppedevent"],function(e,t,n,r,s,o){"use strict";var i=t.extend({init:function(){var i=this;if(this._broadcastVideoObject=document.getElementById("broadcastVideoObject"),!this._broadcastVideoObject)throw new Error("Unable to initialise HbbTV broadcast source");this._playStates={UNREALIZED:0,CONNECTING:1,PRESENTING:2,STOPPED:3},this.playState=this._playStates.UNREALIZED,this._broadcastVideoObject.onPlayStateChange=function(){var e=i.playState,t=i._broadcastVideoObject.playState;e===i._playStates.PRESENTING&&t===i._playStates.UNREALIZED?n.getCurrentApplication().broadcastEvent(new r):t===i._playStates.PRESENTING?n.getCurrentApplication().broadcastEvent(new s(i.getCurrentChannelName())):t===i._playStates.STOPPED&&n.getCurrentApplication().broadcastEvent(new o),i.playState=t}},showCurrentChannel:function(){this._broadcastVideoObject.bindToCurrentChannel(),this._broadcastVideoObject.style.visibility="visible"}});return e.prototype.createBroadcastSource=function(){return this._broadcastSource||(this._broadcastSource=new i),this._broadcastSource},i}),define("rofl/devices/browserdevice",["antie/devices/browserdevice","rofl/events/keyevent","antie/historian","rofl/lib/utils","rofl/lib/promise"],function(e,c,t,a,i){"use strict";var u=null,d=null,n=[200,201,202,203,204,205,206,304];return e.extend({_networkCheckActive:!1,createInput:function(e,t,i){var n=this._createElement("input",e,t);return n.type=i||"text",n},addKeyEventListener:function(){var i,e,t,n,r=this.getKeyMap(),s={},o=this,a=this._application,l=this.getLogger();e=function(e){if(e=e||window.event,i=r[e.keyCode.toString()]){if(o.getFocusOverwritten(i))return;s[e.keyCode.toString()]?t(e,!0):(l.log("Keydown: "+e.keyCode.toString()),a.bubbleEvent(new c("keydown",i)),s[e.keyCode.toString()]=!0,(u||d)&&o._clearKeyPress(),u=setTimeout(function(){d=setInterval(function(){t(e,!0)},100)},500)),e.preventDefault()}else l.log("Unmapped Keycode: "+e.keyCode.toString())},n=function(e){if(o._clearKeyPress(),e=e||window.event,i=r[e.keyCode.toString()]){if(o.getFocusOverwritten(i))return;delete s[e.keyCode.toString()],a.bubbleEvent(new c("keyup",i)),e.preventDefault()}},t=function(e,t){if(t||o._clearKeyPress(),e=e||window.event,i=r[e.keyCode.toString()]){if(o.getFocusOverwritten(i))return;l.log("Keypress: "+e.keyCode.toString()),a.bubbleEvent(new c("keypress",i)),e.preventDefault()}},document.onkeydown=e,document.onkeyup=n,document.onkeypress=t},_clearKeyPress:function(){clearTimeout(u),u=null,clearInterval(d),d=null},setFocusOverwritten:function(e){this.focusOverwritten=e},getFocusOverwritten:function(e){var t=[c.VK_LEFT,c.VK_RIGHT,c.VK_UP,c.VK_DOWN,c.VK_BACK];return!0===this.focusOverwritten&&!~t.indexOf(e)},getTextWidth:function(e,t,i){var n,r="textwidth:"+t.join(" ")+":"+e;return(n=this._textSizeCache[r])||(this._measureTextElement?this.removeElement(this._measureTextElement):(this._measureTextElement=this.createLabel("measure",null,"fW"),this._measureTextElement.style.display="block",this._measureTextElement.style.position="absolute",this._measureTextElement.style.top="-10000px",this._measureTextElement.style.left="-10000px"),this.appendChildElement(i||document.body,this._measureTextElement),this._measureTextElement.className=t.join(" "),this._measureTextElement.innerHTML=e,n=this._textSizeCache[r]=this._measureTextElement.clientWidth),n},getTextHeight:function(e,t,i,n){var r,s=t+":"+i.join(" ")+":"+e;return(r=this._textSizeCache[s])||(this._measureTextElement?this.removeElement(this._measureTextElement):(this._measureTextElement=this.createLabel("measure",null,"fW"),this._measureTextElement.style.display="block",this._measureTextElement.style.position="absolute",this._measureTextElement.style.top="-10000px",this._measureTextElement.style.left="-10000px"),this.appendChildElement(n||document.body,this._measureTextElement),this._measureTextElement.className=i.join(" "),this._measureTextElement.style.width="number"==typeof t?t+"px":t,this._measureTextElement.innerHTML=e,r=this._textSizeCache[s]=this._measureTextElement.getBoundingClientRect().height),r},getCurrentRoute:function(){return decodeURIComponent(window.location.hash).split(t.HISTORY_TOKEN,1)[0].replace(/^#\//,"").split("/")},activateNetworkCheck:function(){this._networkCheckActive=!0},deactivateNetworkCheck:function(){this._networkCheckActive=!1},getActiveNetworkCheck:function(){return this._networkCheckActive},loadURL:function(e,i){var t,n,r,s=this,o=new XMLHttpRequest;t=(i=i||{}).headers||{},r=i.responseType||"json",o.open(i.method||"GET",e,!0),o.withCredentials=!!i.withCredentials,o.onreadystatechange=function(){var t,e;if(4===this.readyState){if(this.onreadystatechange=null,"xml"===r?(t=this.responseXML)||(e=this.responseText||this.response,t=(new DOMParser).parseFromString(e.replace(new RegExp("&quot;","g"),"'"),"text/xml")):t=this.responseText,"json"===r)try{t=t||"{}",t=s.decodeJson(t)}catch(e){t=!1}s._validateStatusCode(this.status)&&!1!==t?i.onLoad&&i.onLoad(t):i.onError&&i.onError(t,this.status)}},a.each(t,function(e,t){o.setRequestHeader(t,e)}),"POST"===i.method&&a.isUndefined(t["Content-Type"])&&o.setRequestHeader("Content-Type","application/x-www-form-urlencoded");try{(n=i.data||null)&&!0===i.asQuery?n=a.serialize(n):a.isObject(n)&&"application/json"===t["Content-Type"]&&(n=this.encodeJson(n)),o.send(n||null)}catch(e){i.onError&&i.onError(e)}return o},_validateStatusCode:function(e){return!!~n.indexOf(e)},getElementOffset:function(e,t){var i=e.offsetLeft;return{top:e.offsetTop,left:t?-(e.offsetParent.offsetWidth-(i+e.offsetWidth)):i}},getDeviceLanguage:function(){return i.resolve(navigator.language||navigator.browserLanguage||"")}})}),define("rofl/devices/cehtmldevice",["antie/devices/browserdevice","rofl/lib/utils"],function(e,n){"use strict";var r={VK_0:"0",VK_1:"1",VK_2:"2",VK_3:"3",VK_4:"4",VK_5:"5",VK_6:"6",VK_7:"7",VK_8:"8",VK_9:"9",VK_ENTER:"ENTER",VK_UP:"UP",VK_DOWN:"DOWN",VK_LEFT:"LEFT",VK_RIGHT:"RIGHT",VK_BACK:"BACK",VK_BACK_SPACE:"BACK",VK_PLAY:"PLAY",VK_STOP:"STOP",VK_PAUSE:"PAUSE",VK_FAST_FWD:"FAST_FWD",VK_REWIND:"REWIND",VK_RED:"RED",VK_BLUE:"BLUE",VK_GREEN:"GREEN",VK_YELLOW:"YELLOW",VK_PAGE_UP:"PREV",VK_PAGE_DOWN:"NEXT"};return e.extend({init:function(e){var t,i;for(t in this._super(e),i={},r)r.hasOwnProperty(t)&&void 0!==window[t]&&(i[window[t]]=r[t]);e.input&&e.input.map&&(i=n.extend(e.input.map,i)),this.addInputMapping(i)}})}),define("rofl/devices/connectivity/maple",["antie/runtimecontext","antie/devices/browserdevice","rofl/events/broadcastevent"],function(n,e,r){"use strict";var s=!0,o=document.getElementById("pluginObjectNetwork"),a=0,l=0,c=null,u=e.prototype.activateNetworkCheck,t=e.prototype.deactivateNetworkCheck,d=function(e){var t,i;try{0,i=!!1,-1===(t=o.GetActiveType())?i=!1:1!==o.CheckPhysicalConnection(t)?i=!1:1!==o.CheckHTTP(t)&&(i=!1),s&&!1===i?4<=++a&&(s=!1,e._application.broadcastEvent(new r("networkstatuschange",{networkStatus:s})),a=0):!1===s&&!0===i?(s=!(a=0),e._application.broadcastEvent(new r("networkstatuschange",{networkStatus:s}))):!0===i&&(a=0)}catch(e){(null===c&&(c=n.getDevice().getLogger()),c).log(e)}};e.prototype.activateNetworkCheck=function(e){var t,i=this;this.getActiveNetworkCheck()&&this.deactivateNetworkCheck(),t=Math.max(1e3,e&&e.interval?e.interval:5e3),l=window.setInterval(function(){d(i)},t),u.call(this)},e.prototype.deactivateNetworkCheck=function(){l&&window.clearInterval(l),t.call(this)}}),define("rofl/devices/connectivity/oipf",["antie/runtimecontext","rofl/devices/browserdevice","rofl/events/broadcastevent"],function(e,t,n){"use strict";var r=e.getCurrentApplication(),s=document.getElementById("oipfconfiguration"),i=t.prototype.activateNetworkCheck,o=t.prototype.deactivateNetworkCheck;t.prototype.activateNetworkCheck=function(){this.getActiveNetworkCheck()||(this._interval&&clearInterval(this._interval),s&&s.localSystem&&s.localSystem.networkInterfaces&&(this._interval=setInterval(function(){for(var e,t=!1,i=0;i<s.localSystem.networkInterfaces.length&&!t;i++)t=t||s.localSystem.networkInterfaces[i].connected;t||(e=!1,r.broadcastEvent(new n("networkstatuschange",{networkStatus:e})))},2e3)),i.call(this))},t.prototype.deactivateNetworkCheck=function(){this.getActiveNetworkCheck()&&(clearInterval(this._interval),o.call(this))}}),define("rofl/devices/connectivity/tizen",["antie/runtimecontext","rofl/devices/tizendevice","rofl/events/broadcastevent"],function(e,t,i){"use strict";var n=e.getCurrentApplication(),r=window.webapis.network,s=4,o=t.prototype.activateNetworkCheck,a=t.prototype.deactivateNetworkCheck,l=function(e){n.broadcastEvent(new i("networkstatuschange",{networkStatus:e===s}))};t.prototype.activateNetworkCheck=function(){this.getActiveNetworkCheck()||(r.addNetworkStateChangeListener(l),o.call(this))},t.prototype.deactivateNetworkCheck=function(){this.getActiveNetworkCheck()&&(r.removeNetworkStateChangeListener(l),a.call(this))},t.prototype.isNetworkConnected=function(){return!!r.getActiveConnectionType()}}),define("rofl/devices/connectivity/webos",["antie/runtimecontext","rofl/devices/webosdevice","rofl/events/broadcastevent","rofl/lib/utils"],function(e,t,i,n){"use strict";var r=e.getCurrentApplication(),s=t.prototype.activateNetworkCheck,o=t.prototype.deactivateNetworkCheck,a=null,l=!0,c=function(e){var t=e.isInternetConnectionAvailable;n.isBool(t)&&l!==t&&(l=t,r.getDevice().getLogger().log("Network connection changed to: ",t),r.broadcastEvent(new i("networkstatuschange",{networkStatus:l})))};t.prototype.activateNetworkCheck=function(){this.getActiveNetworkCheck()||(a=window.webOS.service.request("luna://com.webos.service.connectionmanager",{method:"getStatus",parameters:{subscribe:!0},onSuccess:c,onFailure:function(e){r.getDevice().getLogger().warn("Failed to get network state"),r.getDevice().getLogger().warn("["+e.errorCode+"]: "+e.errorText)}}),s.call(this))},t.prototype.deactivateNetworkCheck=function(){this.getActiveNetworkCheck()&&(a.cancel(),o.call(this))},t.prototype.isNetworkConnected=function(){return l}}),define("rofl/devices/device",["antie/devices/device","rofl/events/keyevent","rofl/lib/utils","rofl/devices/mediaplayer/mediaplayer","rofl/lib/promise"],function(e,o,a,i,t){"use strict";var n=e.extend({init:function(e){this._application=null,this._config=e,this._keyMap={},e.input&&e.input.map&&this.addInputMapping(e.input.map),this.setLoggingMethods()},setLoggingMethods:function(r){var e=function(){},s={log:e,debug:e,info:e,warn:e,error:e};this.filteredLoggingMethods=function(e,t){var i=s,n=!1;switch(r?n=r:e.logging&&e.logging.level&&(n=e.logging.level),n){case"all":case"debug":i.debug=t.debug;case"info":i.info=t.info,i.log=t.log;case"warn":i.warn=t.warn;case"error":i.error=t.error}return i}(this._config,function(e,t){var i,n;if(e.logging&&e.logging.strategy){if(t[e.logging.strategy])return t[e.logging.strategy];if(t[i="antie/devices/logging/"+e.logging.strategy])return t[i]}return(n=t["antie/devices/logging/default"])||(n=t["antie/devices/logging/onscreen"]),n||(n=s),n}(this._config,this.loggingStrategies))},addInputMapping:function(e){var r=this,s={};a.each(e,function(e,t){var i,n;switch(t){case"alpha":case"numeric":n=r._resolveInputCollection(e[0],e[1]),a.extend(s,n);break;default:(i=o["VK_"+e])&&(s[t.toString()]=i)}}),this._keyMap=s},_resolveInputCollection:function(e,t){var i,n,r={};for(n=e;n<=t;n++)(i=o["VK_"+String.fromCharCode(n)])&&(r[n.toString()]=i);return r},hideCursor:function(){},showCursor:function(){},getUdid:function(){return!1},getBrand:function(){return this.getEnvBrand()},getModel:function(){return this.getEnvModel()},getExtendedModel:function(){return n.EXTENDED_MODEL_NOT_AVAILABLE},getFirmware:function(){return"n.a."},getOperatingSystem:function(){return n.OPERATING_SYSTEM_NOT_AVAILABLE},supports:function(e){return!0},addPointerEventListener:function(){},isPointerVisible:function(){return this.isPointerSupported()},isPointerSupported:function(){return!1},isPointerActive:function(){return!1},setScope:function(e){var t=e.split("-");3===t.length&&(this._envBrand=t[0],this._envModel=t[1],this._environment=t[2])},getEnvBrand:function(){return!!this._envBrand&&this._envBrand},getEnvModel:function(){return!!this._envModel&&this._envModel},getEnvironment:function(){return!!this._environment&&this._environment},setOffScreenSaver:function(){},setOnScreenSaver:function(){},hasExit:function(){return"function"==typeof this.exit},supportsUHD:function(){return!1},registerKeysets:function(e){return!1},allowsTargetedAdvertising:function(){return!1},getAdvertisingId:function(){return""},getSupportedMediaContainers:function(e){var t=this._config.streaming;return a.isUndefined(e)?t:(~a.indexOf(a.values(i.TYPE),e)||(this.getLogger().warn('Trying to get supported media containers for an unknown media type, defaulting to "video"'),e=i.TYPE.VIDEO),t[e]||[])},isSupportedMediaContainer:function(e,t){var i=this.getSupportedMediaContainers(e);return!a.isArray(i)||!!~a.indexOf(i,t)},getDeviceLanguage:function(){return t.resolve("")}});return n.load=function(t,i){try{require([t.modules.base].concat(t.modules.modifiers),function(e){try{i.onSuccess(new e(t))}catch(e){i.onError&&i.onError(e)}},function(e){i.onError&&i.onError(e)})}catch(e){i.onError&&i.onError(e)}},n.addLoggingStrategy=e.addLoggingStrategy,n.EXTENDED_MODEL_NOT_AVAILABLE="n.a.",n.EXTENDED_FIRMWARE_NOT_AVAILABLE="n.a.",n.SERIAL_NUMBER_NOT_AVAILABLE="n.a.",n.OPERATING_SYSTEM_NOT_AVAILABLE="n.a.",n.OperatingSystems={ANDROID:"android",ANDROID_TV:"androidtv",ORSAY:"orsay",NETCAST:"netcast",WEB_OS:"webos",LINUX:"linux",ORBIS_OS:"orbisos",CELL_OS:"cellos",TIZEN:"tizen",CEB:"ceb",VEWD:"vewd"},n}),define("rofl/devices/exit/android/bridge",["antie/devices/browserdevice"],function(e){"use strict";e.prototype.exit=function(){JavaScriptBridge.bridgeJavaScriptToAndroid_Back()}}),define("rofl/devices/exit/none",["rofl/devices/browserdevice"],function(e){"use strict";e.prototype.exit=null,e.prototype.hasExit=function(){return!1}}),define("rofl/devices/exit/statichistory",["antie/devices/browserdevice"],function(e){"use strict";e.prototype.exit=function(){history.go(-1)}}),define("rofl/devices/exit/webos",["rofl/devices/browserdevice","antie/runtimecontext"],function(e,t){"use strict";var i=t.getCurrentApplication().getConfiguration();e.prototype.exit=function(){if(i.lg&&i.lg.exitLiveTV)try{window.webOS.service.request("luna://com.webos.applicationManager",{method:"launch",parameters:{id:"com.webos.app.livetv"},onSuccess:function(){window.webOS.platformBack()},onFailure:function(){window.webOS.platformBack()}})}catch(e){window.webOS.platformBack()}else window.webOS.platformBack()}}),define("rofl/devices/glashartdevice",["antie/devices/browserdevice"],function(e){"use strict";return e.extend({init:function(e){document.documentElement.clientWidth<=1035&&e.streaming.video.supported[0]&&(e.streaming.video.supported[0].hdPlayback=!1),this._super(e)}})}),define("rofl/devices/hbbtvdevice",["antie/devices/browserdevice","antie/runtimecontext","rofl/lib/utils"],function(e,t,o){"use strict";return e.extend({_keyset:{},init:function(e){var t,i=document.getElementById("appmgr");this._super(e);try{t=i.getOwnerApplication(window.document),this._keyset=t.privateData.keyset}catch(e){}},getKeyset:function(){return this._keyset},registerKeysets:function(e){var t,i,n,r,s=this.getKeyset();if(!o.isArray(e)||!e.length)throw new Error("Valid array should be given for keysets");for(s.hasOwnProperty("RED")||(s=this.fallbackKeyset),t=e.shift(),s.hasOwnProperty(t)&&(i=s[t]),n=0,r=e.length;n<r;n++)t=e[n],s.hasOwnProperty(t)&&(i|=s[t]);this._keyset.setValue(i)},fallbackKeyset:{RED:1,GREEN:2,YELLOW:4,BLUE:8,NAVIGATION:16,VCR:32,SCROLL:64,INFO:128,NUMERIC:256,ALPHA:512,OTHER:1024}})}),define("rofl/devices/identifier/abox",["antie/devices/device","rofl/devices/identifier/cookie/udid"],function(e){"use strict";e.prototype.getExtendedModel=function(){return window.tv2_stb_common?(new tv2_stb_common).getDeviceModel():e.EXTENDED_MODEL_NOT_AVAILABLE}}),define("rofl/devices/identifier/android/bridge",["rofl/devices/device","antie/runtimecontext","rofl/devices/identifier/cookie/udid"],function(e,t){"use strict";var i=JavaScriptBridge.bridgeJavaScriptToAndroid_GetDeviceInfo(),n=function(e){return"string"==typeof i&&(i=t.getDevice().decodeJson(i)),i[e]||null};e.prototype.getBrand=function(){return n("deviceBrand")},e.prototype.getModel=function(){return n("deviceModel")},e.prototype.getFirmware=function(){return n("osVersion")},e.prototype.getOperatingSystem=function(){return e.OperatingSystems.ANDROID}}),define("rofl/devices/identifier/cookie",["rofl/devices/identifier/cookie/udid"],function(){}),define("rofl/devices/identifier/cookie/udid",["antie/devices/device","antie/storageprovider"],function(e,t){"use strict";var i=!1;e.prototype.getUdid=function(){var e;return!1!==i||(e=this.getStorage(t.STORAGE_TYPE_PERSISTENT,"appcore"),(i=e.getItem("udid"))||(i=Math.round(1e3*Math.random()*1e3*1e3*1e3*1e3),e.setItem("udid",i))),i}}),define("rofl/devices/identifier/glashart",["antie/devices/device"],function(e){"use strict";var t=!1;e.prototype.getUdid=function(){return!1===t&&void 0!==navigator.avClient&&(t=navigator.avClient.id),t}}),define("rofl/devices/identifier/humax",["antie/devices/device"],function(t){"use strict";var i,n=t.prototype.getUdid;i=document.getElementById("sysinfo"),t.prototype.getEnvModel=function(){return i&&i.productname||this._envModel},t.prototype.getFirmware=function(){return i&&i.firmwareversion||t.EXTENDED_FIRMWARE_NOT_AVAILABLE},t.prototype.getUdid=function(){var e=this.getSerialNumber();return e&&e!==t.SERIAL_NUMBER_NOT_AVAILABLE||(e=n()),e},t.prototype.getSerialNumber=function(){return i&&i.serialnumber||t.SERIAL_NUMBER_NOT_AVAILABLE},t.prototype.getOperatingSystem=function(){var e=t.OPERATING_SYSTEM_NOT_AVAILABLE;return i&&i.productname&&(e=t.OperatingSystems.ANDROID),e}}),define("rofl/devices/identifier/local",["rofl/devices/identifier/local/udid"],function(){}),define("rofl/devices/identifier/local/udid",["antie/devices/device","antie/storageprovider"],function(e,t){"use strict";var i=!1;e.prototype.getUdid=function(){var e;return!1!==i||(e=this.getStorage(t.STORAGE_TYPE_LOCAL,"appcore"),(i=e.getItem("udid"))||(i=Math.round(1e3*Math.random()*1e3*1e3*1e3*1e3),e.setItem("udid",i))),i}}),define("rofl/devices/identifier/maple",["antie/devices/device"],function(e){"use strict";var t,i=!1,n=!1,r=!1,s=document.getElementById("pluginObjectNNavi"),o=!1;t=function(){var e;switch(document.getElementById("pluginObjectTV").GetProductType()+""){case 1:e="monitor";break;case 2:e="bd";break;case 0:default:e="tv"}return e},e.prototype.getUdid=function(){return!1===o&&(o=s.GetDUID(document.getElementById("pluginObjectNetwork").GetHWaddr())),o},e.prototype.getBrand=function(){return!1===i&&(i="samsung"),i},e.prototype.getExtendedModel=function(){return void 0!==window.webapis?window.webapis.tv.info.getModel().toUpperCase():e.EXTENDED_MODEL_NOT_AVAILABLE},e.prototype.getModel=function(){var e;if(!1===r){if(3===(e=this.getFirmware().toLowerCase().split("-")).length)switch(e[1]){case"infolink2016":r=2016;break;case"infolink2015":r=2015;break;case"infolink2014":r=2014;break;case"infolink2013":r=2013;break;case"infolink2012":r=2012;break;case"infolink2011":r=2011;break;default:r=this.getEnvModel()}r=t()+"-"+r}return r},e.prototype.getFirmware=function(){return!1===n&&(s=s||document.getElementById("pluginObjectNNavi"),n=s.GetFirmware()),n},e.prototype.getOperatingSystem=function(){return e.OperatingSystems.ORSAY},e.prototype.getVMXIdentifier=function(){var e,t=document.getElementById("pluginObjectNetwork");return t&&(e=t.GetHWaddr().toUpperCase()),e}}),define("rofl/devices/identifier/netcast",["antie/devices/device"],function(i){"use strict";var e=!1,t=!1,n=!1,r=!1;i.prototype.getBrand=function(){return!1===e&&(e="lg"),e},i.prototype.getModel=function(){var e;return!1===t&&(e=window.navigator.userAgent.toLowerCase(),t=-1<e.indexOf("simplesmart.tv-2016")?"simplesmart-2016":-1<e.indexOf("webos.tv-2017")?"webos-2017":-1<e.indexOf("webos.tv-2016")?"webos-2016":-1<e.indexOf("webos.tv-2015")?"webos-2015":-1<e.indexOf("webos.tv-2014")?"webos-2014":-1<e.indexOf("netcast.tv-2014")?"2014":-1<e.indexOf("netcast.tv-2013")?"2013":-1<e.indexOf("netcast.tv-2012")?"2012":-1<e.indexOf("netcast.tv-2011")?"2011":-1<e.indexOf("netcast.media-2011")?"bluray":-1<e.indexOf("netcast.media-2012")?"bluray":-1<e.indexOf("netcast.media-2013")?"bluray":-1<e.indexOf("netcast.media-2014")?"bluray":"unknown"),t},i.prototype.getFirmware=function(){var e;return!1===n&&(e=document.getElementById("netcastInfo"),n=e.swVersion),n},i.prototype.getUdid=function(){var e;return!1===r&&(e=document.getElementById("netcastInfo"),r=e.serialNumber.toString()),r},i.prototype.getOperatingSystem=function(){var e=window.navigator.userAgent.toLowerCase(),t=i.OPERATING_SYSTEM_NOT_AVAILABLE;return~e.indexOf("web0s")||~e.indexOf("webos.tv")?t=i.OperatingSystems.WEB_OS:~e.indexOf("netcast.tv")&&(t=i.OperatingSystems.NETCAST),t},i.prototype.getExtendedModel=function(){var e=document.getElementById("netcastInfo");return e&&e.modelName?e.modelName:i.EXTENDED_MODEL_NOT_AVAILABLE}}),define("rofl/devices/identifier/nettv",["antie/devices/device","rofl/devices/identifier/cookie/udid"],function(t){"use strict";var e=!1,i=!1,n=!1,r=navigator.userAgent;t.prototype.getBrand=function(){return!1===e&&(e="philips"),e},t.prototype.getModel=function(){return!1===n&&(n="tv-"+(n=/NETTV\/3\.(2|3|4)/gi.test(r)?"2012":/NETTV\/4\.(0|1)/gi.test(r)?"2012":/NETTV\/4\.(2|3)/gi.test(r)?"2013":/NETTV\/4\.(4\.9|5\.0)/gi.test(r)?"2016":/NETTV\/4\.(4)/gi.test(r)?"2014":/NETTV\/4\.6\.0\.1/gi.test(r)?"2018":/NETTV\/4\.(6)/gi.test(r)?"2017":/NETTV\/4\./gi.test(r)?"2016":/NETTV\/5\.2/gi.test(r)?"2015":/NETTV\/5\.0/gi.test(r)?"2014":/NETTV\/6\./gi.test(r)?"2015":/NETTV\/7\.0\.2/gi.test(r)?"2015":/NETTV\/7\./gi.test(r)?"2016":/NETTV\/8\.0\.0/gi.test(r)?"2017":/NETTV\/8\.0\.(1|2)/gi.test(r)?"2018":/NETTV\/8\.(0|1\.0)/gi.test(r)?"2016":"2013")),n},t.prototype.getFirmware=function(){var e,t=r.match(/(firmware\/\d+(\.\d+)*)/gi);return!1===i&&null!==t&&(e=t[0],i=e.substring(e.indexOf("/")+1)),i},t.prototype.getOperatingSystem=function(){var e=t.OperatingSystems.LINUX;return(~r.toLowerCase().indexOf("android")||~r.toLowerCase().indexOf("andr0id"))&&(e=t.OperatingSystems.ANDROID_TV),e}}),define("rofl/devices/identifier/playstation",["antie/runtimecontext","antie/devices/device","rofl/bootloader","rofl/lib/promise"],function(i,t,e,n){"use strict";var r,s=null,o=null;t.prototype.getBrand=function(){return"sony"},t.prototype.getModel=function(){var e;return null!==s?s:(e=window.navigator.userAgent.toLowerCase().match(/playstation [0-9]/),s=e?e[0].toLowerCase():"playstation 3")},t.prototype.getUdid=function(){return o},t.prototype.getOperatingSystem=function(){var e=t.OPERATING_SYSTEM_NOT_AVAILABLE;return"playstation 4"===this.getModel()?e=t.OperatingSystems.ORBIS_OS:"playstation 3"===this.getModel()&&(e=t.OperatingSystems.CELL_OS),e},r=function(){return new n(function(t){var e=i.getDevice();e.addNativeEventListener("hwid",function(e){if(!(o=e.hwid))throw new Error("Hardware ID not available.");t()}),e.nativeCommand("hwid")})},e.register(r)}),define("rofl/devices/identifier/sony",["rofl/devices/cehtmldevice","rofl/devices/identifier/cookie/udid"],function(t){"use strict";var i=!1,n=navigator.userAgent;t.prototype.getFirmware=function(){var e,t=n.match(/(PKG\d+(\.\d+))/gi);return!1===i&&null!==t&&(e=t[0],i=e.substring(e.indexOf("G")+1)),i},t.prototype.getExtendedModel=function(){var e=/(KDL|KD|BDP|BDV|SMP)-([0-9a-zA-Z])+/i.exec(n);return e.length?e[0]:t.EXTENDED_MODEL_NOT_AVAILABLE},t.prototype.getOperatingSystem=function(){return t.OperatingSystems.CEB}}),define("rofl/devices/identifier/tizen",["rofl/devices/device","rofl/devices/identifier/cookie/udid"],function(t){"use strict";var e=t.prototype.getUdid,i=!1;t.prototype.getModel=function(){var e;return!1===i&&(e=window.navigator.userAgent.toLowerCase(),i=0<=e.indexOf("tizen 2.3")?"2015":0<=e.indexOf("tizen 2.4")?"2016":0<=e.indexOf("tizen 3.0")?"2017":0<=e.indexOf("tizen 4.0")?"2018":0<=e.indexOf("tizen 5.0")?"2019":"2015"),i},t.prototype.getUdid=function(){return window.webapis&&window.webapis.productinfo?window.webapis.productinfo.getDuid():e()},t.prototype.getExtendedModel=function(){var e=t.EXTENDED_MODEL_NOT_AVAILABLE;return window.webapis&&window.webapis.productinfo&&(e=window.webapis.productinfo.getModel()),e},t.prototype.getFirmware=function(){var e=t.EXTENDED_FIRMWARE_NOT_AVAILABLE;return window.webapis&&window.webapis.productinfo&&(e=window.webapis.productinfo.getFirmware()),e},t.prototype.getOperatingSystem=function(){return t.OperatingSystems.TIZEN},t.prototype.getVMXIdentifier=function(){var e;return webapis&&webapis.avplay&&(e=webapis.avplay.setDrm("VERIMATRIX","GetUID","")),e}}),define("rofl/devices/identifier/vewd",["antie/devices/device","rofl/devices/identifier/cookie/udid"],function(e){"use strict";var t="",i="",n="",r=navigator.userAgent;e.prototype.getBrand=function(){var e=r.toLowerCase();return t||(-1<e.indexOf("toshiba")?t="Toshiba":-1<e.indexOf("sony")?t="Sony":-1<e.indexOf("shield")&&(t="Shield")),t},e.prototype.getModel=function(){var e,t=r.match(/Model\/(\w*)(\-(\w*))*/gi);return n||null===t||(e=t[0],n=e.substring(e.indexOf("/")+1)),n},e.prototype.getFirmware=function(){var e,t=r.match(/(OMI\/\d+(\.\w*){2})/gi);return i||null===t||(e=t[0],i=e.substring(e.indexOf("/")+1)),i},e.prototype.getOperatingSystem=function(){return e.OperatingSystems.VEWD}}),define("rofl/devices/identifier/webos",["antie/devices/device","rofl/lib/utils","vendor/webos/webOS","rofl/devices/identifier/cookie/udid"],function(e,t,i){"use strict";var n,r;e.prototype.getBrand=function(){return"lg"},e.prototype.getModel=function(){return"webos-"+(e=navigator.userAgent,t=2014,0<=e.indexOf("WEBOS4.0")?t=2018:0<=e.indexOf("WEBOS3.5")?t=2017:0<=e.indexOf("WEBOS3.0")?t=2016:0<=e.indexOf("WEBOS2.0")&&(t=2015),t);var e,t},e.prototype.getFirmware=function(){return r||(r=t.getNested(i,"device","platformVersion")||e.EXTENDED_FIRMWARE_NOT_AVAILABLE),r},e.prototype.getExtendedModel=function(){return n||(n=t.getNested(i,"device","modelNameAscii")||e.EXTENDED_MODEL_NOT_AVAILABLE),n},e.prototype.getOperatingSystem=function(){return e.OperatingSystems.WEB_OS}}),define("rofl/devices/identifier/xboxone",["antie/devices/device","rofl/devices/identifier/cookie/udid"],function(e){"use strict";e.prototype.getBrand=function(){return"Microsoft"},e.prototype.getModel=function(){return"XboxOne"}}),define("rofl/devices/input/keypress.fix",["antie/devices/browserdevice"],function(e){"use strict";var t=e.prototype.addKeyEventListener;e.prototype.addKeyEventListener=function(){t.call(this),document.onkeypress=function(e){e.stopPropagation(),e.preventDefault()}}}),define("rofl/devices/input/pointer",["rofl/lib/utils","rofl/lib/pubsub","rofl/class","rofl/events/broadcastevent","antie/runtimecontext"],function(e,i,t,n,r){"use strict";var s,o,a,l,c={POINTER_ON_CLASS:"pointer-on",POINTER_OFF_CLASS:"pointer-off"},u={ON:"on",OFF:"off"},d={POINTER_ON:"pointer-on",POINTER_OFF:"pointer-off",POINTER_MOVE:"pointer-move"},h=t.extend({getRootWidget:function(){var e;return s||((e=r.getCurrentApplication())&&(s=e.getRootWidget())||null)},getTimeoutTime:function(){var e,t;return void 0!==o?o:(e=r.getCurrentApplication())?(t=e.getConfiguration().pointer||{},o=t.pointerTimeout||5e3):5e3},_publish:function(e,t){i.pub(e,t,this)},subscribe:function(e,t){i.sub(e,t,this)},unsubscribe:function(e,t){i.unsub(e,t,this)},getPointerPagePosition:function(){var e=null;return this.lastEvent&&void 0!==this.lastEvent.pageX&&void 0!==this.lastEvent.pageY&&(e={x:this.lastEvent.pageX,y:this.lastEvent.pageY}),e},getPointerPosition:function(){var e=null;return this.lastEvent&&(e={x:this.lastEvent.clientX,y:this.lastEvent.clientY}),e},pointerIsOn:function(){return this.state===u.ON},onPointerOff:function(){var e;this.state!==u.OFF&&(e=this.getRootWidget(),a&&clearTimeout(a),this.state=u.OFF,e&&(e.removeClass(c.POINTER_ON_CLASS),e.addClass(c.POINTER_OFF_CLASS)),this._publish(d.POINTER_OFF,this.lastEvent))},onPointerOn:function(e){var t,i,n;if(this.state!==u.ON&&(t=this.getRootWidget())){this.state=u.ON,this.createTimeout(),t.removeClass(c.POINTER_OFF_CLASS),t.addClass(c.POINTER_ON_CLASS),this._publish(d.POINTER_ON,e);try{i=document.elementFromPoint(e.x,e.y),n=new MouseEvent("mouseover",e),i.dispatchEvent(n)}catch(e){r.getDevice().getLogger().log("POINTER ON: "+e.name+":"+e.message)}}},resetTimeout:function(){a&&clearTimeout(a),this.createTimeout()},createTimeout:function(){a=setTimeout(e.bind(this.onPointerOff,this),this.getTimeoutTime())},didActuallyMove:function(e,t){return!e||e.screenX!==t.screenX||e.screenY!==t.screenY||e.x!==t.x||e.y!==t.y},onPointerMoved:function(e){this.didActuallyMove(this.lastEvent,e)&&(this.lastEvent=e,this.state===u.OFF?this.onPointerOn(e):(this.resetTimeout(),this._publish(d.POINTER_MOVE,e)))},onKeyUp:function(){this.pointerIsOn()&&this.onPointerOff()},setEventListeners:function(){document.addEventListener("mousemove",e.bind(this.onPointerMoved,this)),document.addEventListener("keyup",e.bind(this.onKeyUp,this))},init:function(){this.state=null,this.lastEvent=null,this.onPointerOff(),this.setEventListeners()}});return{CLASSES:c,STATES:u,EVENTS:d,DEFAULT_TIMEOUT_TIME:5e3,getInstance:function(){return l||(l=new h),l}}}),define("rofl/devices/input/pointer/netcast",["rofl/lib/utils","rofl/devices/input/pointer"],function(e,t){"use strict";var i=t.getInstance();return void 0!==window.onmouseon&&void 0!==window.onmouseoff&&(window.addEventListener("mouseon",e.bind(i.onPointerOn,i)),window.addEventListener("mouseoff",e.bind(i.onPointerOff,i))),i}),define("rofl/devices/input/pointer/webos",["rofl/lib/utils","rofl/devices/input/pointer"],function(i,e){"use strict";var n=e.getInstance();return n.createTimeout=function(){},document.addEventListener("cursorStateChange",function(e){var t=i.getNested(e,"detail","visibility");!0===t?n.onPointerOn():!1===t&&n.onPointerOff()}),n}),define("rofl/devices/logging/graylog",["module","antie/devices/device","rofl/logging/graylog"],function(e,t,i){"use strict";var n=null,r=function(){return null===n&&(n=i.getInstance()),n},s={debug:function(){},error:function(){r().onAppError(Array.prototype.slice.call(arguments))},info:function(){r().onAppNotice(Array.prototype.slice.call(arguments))},log:function(){},warn:function(){}};t.addLoggingStrategy(e.id,s)}),define("rofl/devices/media/background",["antie/devices/device","rofl/devices/media/mediainterface"],function(e,t){"use strict";e.prototype.getPlayerEmbedMode=function(){return t.EMBED_MODE_BACKGROUND}}),define("rofl/devices/media/embedded",["antie/devices/device","rofl/devices/media/mediainterface"],function(e,t){"use strict";e.prototype.getPlayerEmbedMode=function(){return t.EMBED_MODE_EMBEDDED}}),define("rofl/devices/media/external",["antie/devices/device","rofl/devices/media/mediainterface"],function(e,t){"use strict";e.prototype.getPlayerEmbedMode=function(){return t.EMBED_MODE_EXTERNAL}}),define("rofl/devices/media/mediainterface",function(){"use strict";return{EMBED_MODE_EXTERNAL:0,EMBED_MODE_BACKGROUND:1,EMBED_MODE_EMBEDDED:2}}),define("rofl/devices/mediaplayer/android/bridge",["rofl/devices/mediaplayer/mediaplayer","rofl/lib/utils","antie/runtimecontext","rofl/devices/device","rofl/devices/mediaplayer/android/mediatrack","rofl/models/audiotrack","rofl/logger"],function(n,i,r,e,s,o,a){"use strict";var t,l=null;return t=n.extend({_allTracks:[],_audioTracks:[],init:function(){this._super(),this._state=n.STATE.EMPTY,this._onFinishedBufferingBound=i.bind(this._onFinishedBuffering,this),this._onErrorBound=i.bind(this._onError,this),this._onMediaEndedBound=i.bind(this._onMediaEnded,this),this._onBufferingBound=i.bind(this._onBuffering,this),this._onStatusBound=i.bind(this._onStatus,this),this._onMetadataBound=i.bind(this._onMetadata,this),this._onTracksChangedBound=i.bind(this._onTracksChanged,this),i.isFunction(JavaScriptBridge.bridgeJavaScriptToAndroid_GetCurrentTimeFloat)?this._getCurrentPlayerTime=i.bind(JavaScriptBridge.bridgeJavaScriptToAndroid_GetCurrentTimeFloat,JavaScriptBridge):this._getCurrentPlayerTime=i.bind(JavaScriptBridge.bridgeJavaScriptToAndroid_GetCurrentTime,JavaScriptBridge)},setSource:function(e,t,i){return this.getState()!==n.STATE.EMPTY?(this._reportError("Cannot set source unless in the '"+n.STATE.EMPTY+"' state"),this._toError(),!1):(this._type=e,this._source=t,this._mimeType=i,this._setEventListeners(),JavaScriptBridge.bridgeJavaScriptToAndroid_FullScreenVideo(),JavaScriptBridge.bridgeJavaScriptToAndroid_SetVideoPath(t),this._toStopped(),!0)},playFrom:function(e){switch(this._postBufferingState=n.STATE.PLAYING,this._targetSeekTime=e,this.getState()){case n.STATE.PAUSED:case n.STATE.COMPLETE:this._toBuffering(),this._playFromIfReady();break;case n.STATE.BUFFERING:this._playFromIfReady();break;case n.STATE.PLAYING:this._toBuffering(),this._targetSeekTime=this._getClampedTime(e),this._isNearToCurrentTime(this._targetSeekTime)?(this._targetSeekTime=null,this._toPlaying()):this._playFromIfReady();break;default:this._reportError("Cannot playFrom while in the '"+this.getState()+"' state"),this._toError()}},beginPlayback:function(){switch(this._postBufferingState=n.STATE.PLAYING,this.getState()){case n.STATE.STOPPED:this._toBuffering(),JavaScriptBridge.bridgeJavaScriptToAndroid_PlayVideo();break;default:this._reportError("Cannot beginPlayback while in the '"+this.getState()+"' state"),this._toError()}},beginPlaybackFrom:function(e){switch(this._postBufferingState=n.STATE.PLAYING,this._targetSeekTime=e,this.getState()){case n.STATE.STOPPED:this._toBuffering(),this._playFromIfReady();break;default:this._reportError("Cannot beginPlaybackFrom while in the '"+this.getState()+"' state"),this._toError()}},pause:function(){switch(this._postBufferingState=n.STATE.PAUSED,this.getState()){case n.STATE.PAUSED:break;case n.STATE.BUFFERING:case n.STATE.PLAYING:JavaScriptBridge.bridgeJavaScriptToAndroid_PauseVideo(),this._toPaused();break;default:this._reportError("Cannot pause while in the '"+this.getState()+"' state"),this._toError()}},resume:function(){switch(this._postBufferingState=n.STATE.PLAYING,this.getState()){case n.STATE.PLAYING:break;case n.STATE.BUFFERING:case n.STATE.PAUSED:JavaScriptBridge.bridgeJavaScriptToAndroid_PlayVideo(),this._toPlaying();break;default:this._reportError("Cannot resume while in the '"+this.getState()+"' state"),this._toError()}},stop:function(){switch(this.getState()){case n.STATE.STOPPED:break;case n.STATE.BUFFERING:case n.STATE.PLAYING:case n.STATE.PAUSED:case n.STATE.COMPLETE:JavaScriptBridge.bridgeJavaScriptToAndroid_StopVideo(),this._toStopped();break;default:this._reportError("Cannot stop while in the '"+this.getState()+"' state"),this._toError()}},reset:function(){switch(this.getState()){case n.STATE.EMPTY:break;case n.STATE.STOPPED:case n.STATE.ERROR:this._toEmpty();break;default:this._reportError("Cannot reset while in the '"+this.getState()+"' state"),this._toError()}},getSource:function(){return this._source},getMimeType:function(){return this._mimeType},getCurrentTime:function(){var e=0;switch(this.getState()){case n.STATE.STOPPED:case n.STATE.ERROR:break;default:e=this._getCurrentPlayerTime()}return e},getSeekableRange:function(){switch(this.getState()){case n.STATE.STOPPED:case n.STATE.ERROR:break;default:return{start:0,end:this.getDuration()}}},getState:function(){return this._state},_getMediaDuration:function(){return JavaScriptBridge.bridgeJavaScriptToAndroid_GetTotalTime()},_playFromIfReady:function(){this._isReadyToPlayFrom()&&this._waitingToPlayFrom()&&this._deferredPlayFrom()},_isReadyToPlayFrom:function(){return!!this._readyToPlayFrom},_waitingToPlayFrom:function(){return i.isNumber(this._targetSeekTime)&&0<=this._targetSeekTime},_deferredPlayFrom:function(){this._waitingToPlayFrom()&&this._seekTo(this._targetSeekTime),JavaScriptBridge.bridgeJavaScriptToAndroid_PlayVideo(),this._postBufferingState===n.STATE.PAUSED&&JavaScriptBridge.bridgeJavaScriptToAndroid_PauseVideo(),this._targetSeekTime=null},_seekTo:function(e){JavaScriptBridge.bridgeJavaScriptToAndroid_SeekTo(e)},_clean:function(){this._type=null,this._source=null,this._mediaType=null,this._targetSeekTime=null,this._readyToPlayFrom=!1,this._removeEventListeners(),this.clearMediaSource()},_toPaused:function(){this._state=n.STATE.PAUSED,this._emitEvent(n.EVENT.PAUSED)},_toPlaying:function(){this._state=n.STATE.PLAYING,this._emitEvent(n.EVENT.PLAYING)},_toError:function(){this._clean(),this._state=n.STATE.ERROR,this._emitEvent(n.EVENT.ERROR)},_toComplete:function(){this._state=n.STATE.COMPLETE,this._emitEvent(n.EVENT.COMPLETE)},_toBuffering:function(){this._state=n.STATE.BUFFERING,this._emitEvent(n.EVENT.BUFFERING)},_toStopped:function(){this._state=n.STATE.STOPPED,this._emitEvent(n.EVENT.STOPPED)},_toEmpty:function(){this._clean(),this._state=n.STATE.EMPTY},_setEventListeners:function(){document.addEventListener("canplay",this._onFinishedBufferingBound),document.addEventListener("seeked",this._onFinishedBufferingBound),document.addEventListener("playing",this._onFinishedBufferingBound),document.addEventListener("error",this._onErrorBound),document.addEventListener("ended",this._onMediaEndedBound),document.addEventListener("waiting",this._onBufferingBound),document.addEventListener("timeupdate",this._onStatusBound),document.addEventListener("loadedmetadata",this._onMetadataBound),document.addEventListener("tracksChanged",this._onTracksChangedBound)},_removeEventListeners:function(){document.removeEventListener("canplay",this._onFinishedBufferingBound),document.removeEventListener("seeked",this._onFinishedBufferingBound),document.removeEventListener("playing",this._onFinishedBufferingBound),document.removeEventListener("error",this._onErrorBound),document.removeEventListener("ended",this._onMediaEndedBound),document.removeEventListener("waiting",this._onBufferingBound),document.removeEventListener("timeupdate",this._onStatusBound),document.removeEventListener("loadedmetadata",this._onMetadataBound),document.removeEventListener("tracksChanged",this._onTracksChangedBound)},_reportError:function(e,t){r.getDevice().getLogger().error(e),t&&a.onPlaybackError(this._source,this._currentTime,"none",e)},_onFinishedBuffering:function(){this._onMetadata(),this._state===n.STATE.BUFFERING&&(this._postBufferingState===n.STATE.PAUSED?this._toPaused():this._toPlaying())},_onMetadata:function(){this._readyToPlayFrom=!0,this._waitingToPlayFrom()&&this._deferredPlayFrom()},_onTracksChanged:function(e){var t=e.tracks&&JSON.parse(e.tracks)||[];this._allTracks=i.arrayFrom(i.map(t,function(e){return new s(e.name,e.language,e.type,e.format)}))},_onError:function(){this._reportError("Media player emitted an error",!0),this._toError()},_onMediaEnded:function(){this._toComplete()},_onBuffering:function(){this.getState()===n.STATE.PLAYING&&this._toBuffering()},_onStatus:function(){this.getState()===n.STATE.PLAYING&&this._emitEvent(n.EVENT.STATUS)},setNativeSubtitlesEnabled:function(e){"bridgeJavaScriptToAndroid_setNativeSubtitlesEnabled"in JavaScriptBridge&&JavaScriptBridge.bridgeJavaScriptToAndroid_setNativeSubtitlesEnabled(e)},getAudioTracks:function(){var e;return this._allTracks&&0<this._allTracks.length&&(e=i.filter(this._allTracks,function(e){return e.getType()===s.TYPES.AUDIO}),this._audioTracks=i.arrayFrom(i.map(e,function(e,t){var i=e.getExtra()&&e.getExtra().id||t+1;return new o(i,e.getName(),e.getLanguage(),null,e.getExtra())}))),this._audioTracks||[]},setAudioTrack:function(e){"bridgeJavaScriptToAndroid_SetAudioTrack"in JavaScriptBridge&&JavaScriptBridge.bridgeJavaScriptToAndroid_SetAudioTrack(JSON.stringify({type:s.TYPES.AUDIO,language:e.getLanguage(),name:e.getId()}))},getSubtitleTracks:function(){var e=[];return this._allTracks&&0<this._allTracks.length&&(e=i.filter(this._allTracks,function(e){return e.getType()===s.TYPES.SUBTITLES})),e},setTrack:function(e){"bridgeJavaScriptToAndroid_SetTrack"in JavaScriptBridge&&JavaScriptBridge.bridgeJavaScriptToAndroid_SetTrack(JSON.stringify({type:e.getType(),language:e.getLanguage(),name:e.getName()}))},getCurrentAudioTrack:function(){var e=this._allTracks&&0<this._allTracks.length&&this._allTracks[0];return"bridgeJavaScriptToAndroid_getCurrentAudioTrack"in JavaScriptBridge&&(e=JSON.parse(JavaScriptBridge.bridgeJavaScriptToAndroid_getCurrentAudioTrack()),e=new o(e.name,e.name,e.language)),e}}),e.prototype.getMediaPlayer=function(){return null===l&&(l=new t),l},t}),define("rofl/devices/mediaplayer/android/mediatrack",["antie/class"],function(e){"use strict";var t;return(t=e.extend({init:function(e,t,i,n){this._name=e,this._language=t,this._type=i,this._extra=n},getName:function(){return this._name},getLanguage:function(){return this._language},getType:function(){return this._type},getExtra:function(){return this._extra}})).TYPES={VIDEO:"video",AUDIO:"audio",SUBTITLES:"subtitles",CAPTIONS:"captions",UNKNOWN:"unknown"},t}),define("rofl/devices/mediaplayer/cehtml",["antie/devices/mediaplayer/cehtml","antie/devices/device"],function(e,t){"use strict";var i,n=e.extend({_wipe:function(){this._super(),this.clearMediaSource()},_setSentinels:function(i){var n=this;this._sentinelLimits.pause.currentAttemptCount=0,this._timeAtLastSenintelInterval=this.getCurrentTime(),this._clearSentinels(),this._sentinelIntervalNumber=0,this._sentinelInterval=setInterval(function(){var e,t=n.getCurrentTime();for(n._sentinelIntervalNumber++,n._isLiveMedia()?n._timeHasAdvanced=!!t&&t!==n._timeAtLastSenintelInterval:n._timeHasAdvanced=!!t&&t>n._timeAtLastSenintelInterval+.2,n._sentinelTimeIsNearEnd=n._isNearToEnd(t||n._timeAtLastSenintelInterval),e=0;e<i.length&&!i[e].call(n);e++);n._timeAtLastSenintelInterval=t},1100)}});return n.PLAY_STATE_STOPPED=e.PLAY_STATE_STOPPED,n.PLAY_STATE_PLAYING=e.PLAY_STATE_PLAYING,n.PLAY_STATE_PAUSED=e.PLAY_STATE_PAUSED,n.PLAY_STATE_CONNECTING=e.PLAY_STATE_CONNECTING,n.PLAY_STATE_BUFFERING=e.PLAY_STATE_BUFFERING,n.PLAY_STATE_FINISHED=e.PLAY_STATE_FINISHED,n.PLAY_STATE_ERROR=e.PLAY_STATE_ERROR,i=new n,t.prototype.getMediaPlayer=function(){return i},n}),define("rofl/devices/mediaplayer/html5",["antie/devices/mediaplayer/html5","antie/devices/mediaplayer/mediaplayer","antie/devices/device","rofl/models/audiotrack","rofl/lib/utils"],function(e,t,i,n,r){"use strict";var s,o=e.extend({_wipe:function(){this._super(),this.clearMediaSource()}});return s=new o,t.prototype.getAudioTracks=function(){var e,t=[];return this._mediaElement.audioTracks&&0<this._mediaElement.audioTracks.length&&(e=this._mediaElement.audioTracks,t=r.map(e,function(e){return new n(e.id,e.label,e.language)})),r.arrayFrom(t)},t.prototype.setAudioTrack=function(e){var t=this._mediaElement.audioTracks,i=e.getId();r.each(t,function(e){e.enabled=!1,e.id===i&&(e.enabled=!0)})},t.prototype.getCurrentAudioTrack=function(){var e=this._mediaElement.audioTracks&&r.arrayFrom(this._mediaElement.audioTracks),t=r.filter(e,function(e){return!0===e.enabled});return t&&t.length&&new n(t[0].id,t[0].label,t[0].language)||!1},i.prototype.getMediaPlayer=function(){return s},o}),define("rofl/devices/mediaplayer/html5panasonic",["antie/runtimecontext","rofl/devices/mediaplayer/html5","antie/devices/mediaplayer/mediaplayer","antie/devices/device"],function(e,t,i,n){"use strict";var r,s=t.extend({_deferredPlayFrom:function(){this._mediaElement.play(),this._seekTo(this._targetSeekTime),this._postBufferingState===i.STATE.PAUSED&&this._mediaElement.pause(),this._targetSeekTime=void 0}});return r=new s,n.prototype.getMediaPlayer=function(){return r},s}),define("rofl/devices/mediaplayer/html5plus",["rofl/devices/mediaplayer/html5","antie/devices/mediaplayer/mediaplayer","antie/devices/device","rofl/lib/utils","rofl/media/source","rofl/media/drm/item","antie/runtimecontext"],function(e,l,t,i,c,s,u){"use strict";var d=window.Hls,h=window.MediaPlayer,n=e.extend({setSource:function(e,t,i){var n;if(this.getState()===l.STATE.EMPTY){this._trustZeroes=!1,this._type=e,this._source=t,this._mimeType=i;var r=u.getDevice(),s="Video";e!==l.TYPE.AUDIO&&e!==l.TYPE.LIVE_AUDIO||(s="Audio"),this._setSeekSentinelTolerance(),this._mediaElement=r._createElement(s.toLowerCase(),"mediaPlayer"+s),this._mediaElement.autoplay=!1,this._mediaElement.style.position="absolute",this._mediaElement.style.top="0px",this._mediaElement.style.left="0px",this._mediaElement.style.width="100%",this._mediaElement.style.height="100%";var o=this;this._wrapOnFinishedBuffering=function(){o._onFinishedBuffering()},this._wrapOnError=function(){o._onDeviceError()},this._wrapOnEndOfMedia=function(){o._onEndOfMedia()},this._wrapOnDeviceBuffering=function(){o._onDeviceBuffering()},this._wrapOnStatus=function(){o._onStatus()},this._wrapOnMetadata=function(){o._onMetadata()},this._wrapOnSourceError=function(){o._onSourceError()},this._mediaElement.addEventListener("canplay",this._wrapOnFinishedBuffering,!1),this._mediaElement.addEventListener("seeked",this._wrapOnFinishedBuffering,!1),this._mediaElement.addEventListener("playing",this._wrapOnFinishedBuffering,!1),this._mediaElement.addEventListener("error",this._wrapOnError,!1),this._mediaElement.addEventListener("ended",this._wrapOnEndOfMedia,!1),this._mediaElement.addEventListener("waiting",this._wrapOnDeviceBuffering,!1),this._mediaElement.addEventListener("timeupdate",this._wrapOnStatus,!1),this._mediaElement.addEventListener("loadedmetadata",this._wrapOnMetadata,!1);var a=u.getCurrentApplication().getRootWidget().outputElement;r.prependChildElement(a,this._mediaElement),i===c.MIME_TYPES.m3u8&&d&&d.isSupported()?((n=this._hls=new d).on(d.Events.ERROR,function(e,t){switch(t.type){case d.ErrorTypes.NETWORK_ERROR:t.fatal&&(o._onSourceError(),n.startLoad());break;case d.ErrorTypes.MEDIA_ERROR:t.fatal&&(o._onSourceError(),n.recoverMediaError());break;default:n.destroy()}}),this._hls.loadSource(t),this._hls.attachMedia(this._mediaElement)):i!==c.MIME_TYPES.mpd&&i!==c.MIME_TYPES.ism||!h?(this._sourceElement=this._generateSourceElement(t,i),this._sourceElement.addEventListener("error",this._wrapOnSourceError,!1),this._mediaElement.preload="auto",r.appendChildElement(this._mediaElement,this._sourceElement),this._mediaElement.load()):this._setupHasPlayer(t),this._toStopped()}else this._toError("Cannot set source unless in the '"+l.STATE.EMPTY+"' state")},_setupHasPlayer:function(e){var t,i,n,r={url:e};this.hasMediaSource()&&(i=(t=this.getMediaSource().getDrmItem())&&t.getLicenseOverrideUri()||null)&&t.getType()===s.TYPES.PLAYREADY&&(r.protData={"com.microsoft.playready":{laURL:i}}),(n=this._hasPlayer=new h).init(this._mediaElement),n.load(r)},_destroyMediaElement:function(){if(this._mediaElement){this._mediaElement.removeEventListener("canplay",this._wrapOnFinishedBuffering,!1),this._mediaElement.removeEventListener("seeked",this._wrapOnFinishedBuffering,!1),this._mediaElement.removeEventListener("playing",this._wrapOnFinishedBuffering,!1),this._mediaElement.removeEventListener("error",this._wrapOnError,!1),this._mediaElement.removeEventListener("ended",this._wrapOnEndOfMedia,!1),this._mediaElement.removeEventListener("waiting",this._wrapOnDeviceBuffering,!1),this._mediaElement.removeEventListener("timeupdate",this._wrapOnStatus,!1),this._mediaElement.removeEventListener("loadedmetadata",this._wrapOnMetadata,!1);var e=u.getDevice();this._sourceElement&&(this._sourceElement.removeEventListener("error",this._wrapOnSourceError,!1),e.removeElement(this._sourceElement)),this._unloadMediaSrc(),e.removeElement(this._mediaElement),delete this._mediaElement,delete this._sourceElement}this._hls&&(this._hls.destroy(),this._hls=null),this._hasPlayer&&(this._hasPlayer.reset(0),this._hasPlayer=null)}}),r=new n;return t.prototype.getMediaPlayer=function(){return r},n}),define("rofl/devices/mediaplayer/html5saorview",["antie/runtimecontext","antie/devices/mediaplayer/html5","antie/devices/mediaplayer/mediaplayer","antie/devices/device"],function(a,e,l,t){"use strict";var i,n=e.extend({_wipe:function(){this._super(),this.clearMediaSource()},setSource:function(e,t,i){var n,r=a.getDevice(),s="Video",o=this;this.getState()===l.STATE.EMPTY?(this._trustZeroes=!1,this._type=e,this._source=t,this._mimeType=i,e!==l.TYPE.AUDIO&&e!==l.TYPE.LIVE_AUDIO||(s="Audio"),this._setSeekSentinelTolerance(),this._mediaElement=r._createElement(s.toLowerCase(),"mediaPlayer"+s),this._mediaElement.autoplay=!1,this._mediaElement.style.position="absolute",this._mediaElement.style.top="0px",this._mediaElement.style.left="0px",this._mediaElement.style.width="100%",this._mediaElement.style.height="100%",this._wrapOnFinishedBuffering=function(){o._onFinishedBuffering()},this._wrapOnError=function(){o._onDeviceError()},this._wrapOnEndOfMedia=function(){o._onEndOfMedia()},this._wrapOnDeviceBuffering=function(){o._onDeviceBuffering()},this._wrapOnStatus=function(){o._onStatus()},this._wrapOnMetadata=function(){o._onMetadata()},this._wrapOnSourceError=function(){o._onSourceError()},this._mediaElement.addEventListener("canplay",this._wrapOnFinishedBuffering,!1),this._mediaElement.addEventListener("seeked",this._wrapOnFinishedBuffering,!1),this._mediaElement.addEventListener("playing",this._wrapOnFinishedBuffering,!1),this._mediaElement.addEventListener("error",this._wrapOnError,!1),this._mediaElement.addEventListener("ended",this._wrapOnEndOfMedia,!1),this._mediaElement.addEventListener("waiting",this._wrapOnDeviceBuffering,!1),this._mediaElement.addEventListener("timeupdate",this._wrapOnStatus,!1),this._mediaElement.addEventListener("loadedmetadata",this._wrapOnMetadata,!1),this._mediaElement.src=t,this._mediaElement.type=i,n=a.getCurrentApplication().getRootWidget().outputElement,r.prependChildElement(n,this._mediaElement),this._mediaElement.preload="auto",this._mediaElement.load(),this._toStopped()):this._toError("Cannot set source unless in the '"+l.STATE.EMPTY+"' state")},_destroyMediaElement:function(){var e=a.getDevice();this._mediaElement&&(this._mediaElement.removeEventListener("canplay",this._wrapOnFinishedBuffering,!1),this._mediaElement.removeEventListener("seeked",this._wrapOnFinishedBuffering,!1),this._mediaElement.removeEventListener("playing",this._wrapOnFinishedBuffering,!1),this._mediaElement.removeEventListener("error",this._wrapOnError,!1),this._mediaElement.removeEventListener("ended",this._wrapOnEndOfMedia,!1),this._mediaElement.removeEventListener("waiting",this._wrapOnDeviceBuffering,!1),this._mediaElement.removeEventListener("timeupdate",this._wrapOnStatus,!1),this._mediaElement.removeEventListener("loadedmetadata",this._wrapOnMetadata,!1),this._unloadMediaSrc(),e.removeElement(this._mediaElement),delete this._mediaElement)}});return i=new n,t.prototype.getMediaPlayer=function(){return i},n}),define("rofl/devices/mediaplayer/html5vestel",["antie/devices/mediaplayer/html5","antie/devices/mediaplayer/mediaplayer","antie/devices/device"],function(e,t,i){"use strict";var n,r=e.extend({beginPlayback:function(){switch(this.stop(),this._postBufferingState=t.STATE.PLAYING,this._sentinelSeekTime=void 0,this.getState()){case t.STATE.STOPPED:this._trustZeroes=!0,this._toBuffering(),this._mediaElement.play();break;default:this._toError("Cannot beginPlayback while in the '"+this.getState()+"' state")}},beginPlaybackFrom:function(e){switch(e||this.stop(),this._postBufferingState=t.STATE.PLAYING,this._targetSeekTime=e,this._sentinelLimits.seek.currentAttemptCount=0,this.getState()){case t.STATE.STOPPED:this._trustZeroes=!0,this._toBuffering(),this._playFromIfReady();break;default:this._toError("Cannot beginPlaybackFrom while in the '"+this.getState()+"' state")}}});return n=new r,i.prototype.getMediaPlayer=function(){return n},r}),define("rofl/devices/mediaplayer/html5xboxone",["antie/runtimecontext","rofl/devices/mediaplayer/html5","antie/devices/mediaplayer/mediaplayer","antie/devices/device"],function(a,e,l,t){"use strict";var i=null,n=e.extend({init:function(){this._enableSmoothStreaming(),this._super()},_enableSmoothStreaming:function(){var e=new window.Windows.Media.MediaExtensionManager,t=new window.Windows.Foundation.Collections.PropertySet,i=window.Microsoft.Media.AdaptiveStreaming.AdaptiveSourceManager.getDefault();t["{A5CE1DE8-1D00-427B-ACEF-FB9A3C93DE2D}"]=i,e.registerByteStreamHandler("Microsoft.Media.AdaptiveStreaming.SmoothByteStreamHandler",".ism","text/xml"),e.registerByteStreamHandler("Microsoft.Media.AdaptiveStreaming.SmoothByteStreamHandler",".ism","application/vnd.ms-sstr+xml"),e.registerByteStreamHandler("Microsoft.Media.AdaptiveStreaming.SmoothByteStreamHandler",".ism","application/vnd.ms-ss"),e.registerByteStreamHandler("Windows.Media.Protection.PlayReady.PlayReadyByteStreamHandler",".pyv",t),e.registerByteStreamHandler("Windows.Media.Protection.PlayReady.PlayReadyByteStreamHandler",".pya",t)},setMediaSource:function(e){this.setSource(e.getMediaType(),e.getMediaUrl(),e.getMediaMimetype())},getMediaElement:function(){return this._mediaElement||null},setSource:function(e,t,i){var n=a.getDevice(),r="Video",s=this,o=a.getCurrentApplication().getRootWidget().outputElement;this.getState()===l.STATE.EMPTY?(this._trustZeroes=!1,this._type=e,this._source=t,this._mimeType=i,e!==l.TYPE.AUDIO&&e!==l.TYPE.LIVE_AUDIO||(r="Audio"),this._setSeekSentinelTolerance(),this._mediaElement=n._createElement(r.toLowerCase(),"mediaPlayer"+r),this._mediaElement.autoplay=!1,this._mediaElement.style.position="absolute",this._mediaElement.style.top="0px",this._mediaElement.style.left="0px",this._mediaElement.style.width="100%",this._mediaElement.style.height="100%",this._wrapOnFinishedBuffering=function(){s._onFinishedBuffering()},this._wrapOnError=function(){s._onDeviceError()},this._wrapOnEndOfMedia=function(){s._onEndOfMedia()},this._wrapOnDeviceBuffering=function(){s._onDeviceBuffering()},this._wrapOnStatus=function(){s._onStatus()},this._wrapOnMetadata=function(){s._onMetadata()},this._wrapOnSourceError=function(){s._onSourceError()},this._mediaElement.addEventListener("canplay",this._wrapOnFinishedBuffering,!1),this._mediaElement.addEventListener("seeked",this._wrapOnFinishedBuffering,!1),this._mediaElement.addEventListener("playing",this._wrapOnFinishedBuffering,!1),this._mediaElement.addEventListener("error",this._wrapOnError,!1),this._mediaElement.addEventListener("ended",this._wrapOnEndOfMedia,!1),this._mediaElement.addEventListener("waiting",this._wrapOnDeviceBuffering,!1),this._mediaElement.addEventListener("timeupdate",this._wrapOnStatus,!1),this._mediaElement.addEventListener("loadedmetadata",this._wrapOnMetadata,!1),n.prependChildElement(o,this._mediaElement),this._sourceElement=this._generateSourceElement(t,i),this._sourceElement.addEventListener("error",this._wrapOnSourceError,!1),this._mediaElement.preload="none",n.appendChildElement(this._mediaElement,this._sourceElement),this._mediaElement.load(),this._toStopped()):this._toError("Cannot set source unless in the '"+l.STATE.EMPTY+"' state")},_destroyMediaElement:function(){var e=a.getDevice(),t=e.getDrmAgent();t.hasDrmItem()&&this._mediaElement&&(t.destroyDrmManager(),e.getLogger().debug("DRM Media Protection Manager destroyed")),this._super()}});return t.prototype.getMediaPlayer=function(){return null===i&&(i=new n),i},n}),define("rofl/devices/mediaplayer/mediaplayer",["antie/devices/mediaplayer/mediaplayer"],function(e){"use strict";var t,i=e.EVENT;return i.BITRATE_CHANGED="bitrate_changed",t=e.extend({_getClampedTime:function(e){return this.getSeekableRange()?this._super(e):e},hasMediaSource:function(){return void 0!==this._mediaSource},setMediaSource:function(e){this._mediaSource=e,this.setSource(e.getMediaType(),e.getMediaUrl(),e.getMediaMimetype())},getMediaSource:function(){return this._mediaSource},clearMediaSource:function(){delete this._mediaSource},isLiveMedia:function(){return this._isLiveMedia()},setNativeSubtitlesEnabled:function(e){},beginLivePlayback:function(){this.beginPlayback()},getAudioTracks:function(){},getCurrentAudioTrack:function(){},setAudioTrack:function(e){}}),i.SUSPEND="suspend",t.EVENT=i,t.STATE=e.STATE,t.TYPE=e.TYPE,t.LIVE_SUPPORT=e.LIVE_SUPPORT,t}),define("rofl/devices/mediaplayer/playstation",["rofl/devices/mediaplayer/mediaplayer","antie/runtimecontext","antie/devices/ps3base","rofl/devices/device","rofl/lib/utils"],function(n,r,e,t,s){"use strict";var o,i,a={GET_PLAYBACK_TIME:"getPlaybackTime",LOAD:"load",PAUSE:"pause",PLAY:"play",PLAYER_STATUS_CHANGE:"playerStatusChange",SET_PLAY_TIME:"setPlayTime",SET_VIDEO_PORTAL_SIZE:"setVideoPortalSize",STOP:"stop"},l=null,c="Buffering",u="DisplayingVideo",d="endOfStream",h="notReady",g="opening",p="paused",f="playing";return(i=n.extend({_onFinishedBufferingBound:null,_onEndOfMediaBound:null,_onDeviceBufferingBound:null,_onStatusBound:null,_updateInterval:null,_duration:null,_currentTime:null,init:function(){if(!((o=r.getDevice())instanceof e))throw new Error("You need a PlayStation device for this media player to work");this._super(),this._setSentinelLimits(),this._state=n.STATE.EMPTY},setSource:function(e,t,i){this.getState()===n.STATE.EMPTY?(o=r.getDevice(),this._trustZeroes=!1,this._type=e,this._source=t,this._mimeType=i,this._setSeekSentinelTolerance(),this._onFinishedBufferingBound=s.bind(this._onFinishedBuffering,this),this._onEndOfMediaBound=s.bind(this._onEndOfMedia,this),this._onDeviceBufferingBound=s.bind(this._onDeviceBuffering,this),this._onStatusBound=s.bind(this._onStatus,this),this._onPlayerStatusChangedBound=s.bind(this._onPlayerStatusChanged,this),o.addNativeEventListener(a.PLAYER_STATUS_CHANGE,this._onPlayerStatusChangedBound),this.hasMediaSource()&&this.getMediaSource().hasDrmItem()||o.nativeCommand(a.LOAD,{contentUri:t}),this._toStopped()):this._toError('Cannot set source unless in the "'+n.STATE.EMPTY+'" state')},_updateTimeValues:function(e){this._currentTime=e.elapsedTime,this._duration&&this._duration===e.totalTime||(this._duration=e.totalTime),this._onStatus()},_startUpdateInterval:function(){this._updateInterval||(this._updateInterval=window.setInterval(s.bind(function(){this._currentTime&&this._duration?(this._currentTime+=.5,Math.round(this._currentTime)%10==0&&o.nativeCommand(a.GET_PLAYBACK_TIME,null,s.bind(this._updateTimeValues,this)),this._onStatus()):o.nativeCommand(a.GET_PLAYBACK_TIME,null,s.bind(this._updateTimeValues,this))},this),500))},_clearUpdateInterval:function(){this._updateInterval&&(window.clearInterval(this._updateInterval),this._updateInterval=null)},_onPlayerStatusChanged:function(e){var t=e.playerState;switch(t!==f&&this._clearUpdateInterval(),t){case c:this._onDeviceBuffering();break;case d:this._onEndOfMedia();break;case h:case g:this._onDeviceBuffering();break;case p:break;case f:case u:o.nativeCommand(a.GET_PLAYBACK_TIME,null,s.bind(this._updateTimeValues,this)),this._startUpdateInterval(),this._onFinishedBuffering()}},playFrom:function(e){switch(this._postBufferingState=n.STATE.PLAYING,this._targetSeekTime=e,this._sentinelLimits.seek.currentAttemptCount=0,this.getState()){case n.STATE.PAUSED:case n.STATE.COMPLETE:this._trustZeroes=!0,this._toBuffering(),this._playFromIfReady();break;case n.STATE.BUFFERING:this._playFromIfReady();break;case n.STATE.PLAYING:this._trustZeroes=!0,this._toBuffering(),this._targetSeekTime=this._getClampedTimeForPlayFrom(e),this._isNearToCurrentTime(this._targetSeekTime)?(this._targetSeekTime=void 0,this._toPlaying()):this._playFromIfReady();break;default:this._toError('Cannot playFrom while in the "'+this.getState()+'" state')}},beginPlayback:function(){switch(this._postBufferingState=n.STATE.PLAYING,this._sentinelSeekTime=void 0,this.getState()){case n.STATE.STOPPED:this._trustZeroes=!0,this._toBuffering(),o.nativeCommand(a.PLAY);break;default:this._toError('Cannot beginPlayback while in the "'+this.getState()+'" state')}},beginPlaybackFrom:function(e){switch(this._postBufferingState=n.STATE.PLAYING,this._targetSeekTime=e,this._sentinelLimits.seek.currentAttemptCount=0,this.getState()){case n.STATE.STOPPED:this._trustZeroes=!0,this._toBuffering(),this._playFromIfReady();break;default:this._toError('Cannot beginPlaybackFrom while in the "'+this.getState()+'" state')}},pause:function(){switch(this._postBufferingState=n.STATE.PAUSED,this.getState()){case n.STATE.PAUSED:break;case n.STATE.BUFFERING:this._sentinelLimits.pause.currentAttemptCount=0,this._isReadyToPlayFrom()&&o.nativeCommand(a.PAUSE);break;case n.STATE.PLAYING:this._sentinelLimits.pause.currentAttemptCount=0,o.nativeCommand(a.PAUSE),this._toPaused();break;default:this._toError('Cannot pause while in the "'+this.getState()+'" state')}},resume:function(){switch(this._postBufferingState=n.STATE.PLAYING,this.getState()){case n.STATE.PLAYING:break;case n.STATE.BUFFERING:this._isReadyToPlayFrom()&&o.nativeCommand(a.PLAY);break;case n.STATE.PAUSED:o.nativeCommand(a.PLAY),this._toPlaying();break;default:this._toError('Cannot resume while in the "'+this.getState()+'" state')}},stop:function(){switch(this.getState()){case n.STATE.STOPPED:break;case n.STATE.BUFFERING:case n.STATE.PLAYING:case n.STATE.PAUSED:case n.STATE.COMPLETE:o.nativeCommand(a.STOP),this._toStopped();break;default:this._toError('Cannot stop while in the "'+this.getState()+'" state')}},reset:function(){switch(this.getState()){case n.STATE.EMPTY:break;case n.STATE.STOPPED:case n.STATE.ERROR:this._toEmpty();break;default:this._toError('Cannot reset while in the "'+this.getState()+'" state')}},getSource:function(){return this._source},getMimeType:function(){return this._mimeType},getCurrentTime:function(){switch(this.getState()){case n.STATE.STOPPED:case n.STATE.ERROR:break;default:if(this._currentTime)return this._currentTime}},getSeekableRange:function(){switch(this.getState()){case n.STATE.STOPPED:case n.STATE.ERROR:break;default:return this._getSeekableRange()}},_getMediaDuration:function(){if(this._duration&&this._isReadyToPlayFrom())return this._duration},_getSeekableRange:function(){var e;return this._duration?e={start:0,end:this._duration}:o.getLogger().warn('No "duration" or "seekable" on media element'),e},getState:function(){return this._state},_onFinishedBuffering:function(){this._exitBuffering()},_onDeviceBuffering:function(){this.getState()===n.STATE.PLAYING&&this._toBuffering()},_onEndOfMedia:function(){this._toComplete()},_onStatus:function(){this.getState()===n.STATE.PLAYING&&this._emitEvent(n.EVENT.STATUS)},_exitBuffering:function(){this._metadataLoaded(),this.getState()===n.STATE.BUFFERING&&(this._postBufferingState===n.STATE.PAUSED?this._toPaused():this._toPlaying())},_metadataLoaded:function(){this._readyToPlayFrom=!0,this._waitingToPlayFrom()&&this._deferredPlayFrom()},_playFromIfReady:function(){this._isReadyToPlayFrom()&&this._waitingToPlayFrom()&&this._deferredPlayFrom()},_waitingToPlayFrom:function(){return void 0!==this._targetSeekTime},_deferredPlayFrom:function(){this._seekTo(this._targetSeekTime),o.nativeCommand(a.PLAY),this._postBufferingState===n.STATE.PAUSED&&o.nativeCommand(a.PAUSE),this._targetSeekTime=void 0},_seekTo:function(e){var t=Math.round(this._getClampedTimeForPlayFrom(e));o.nativeCommand(a.SET_PLAY_TIME,{playTime:t}),this._sentinelSeekTime=t,this._currentTime=t},_getClampedTimeForPlayFrom:function(e){var t,i=this._getClampedTime(e);return i!==e&&(t=this._getSeekableRange(),o.getLogger().debug("playFrom "+e+" clamped to "+i+" - seekable range is { start: "+t.start+", end: "+t.end+" }")),i},_wipe:function(){this._clearUpdateInterval(),o.removeNativeEventListener(a.PLAYER_STATUS_CHANGE,this._onPlayerStatusChangedBound),this._type=void 0,this._source=void 0,this._mimeType=void 0,this._targetSeekTime=void 0,this._sentinelSeekTime=void 0,this._clearSentinels(),this._readyToPlayFrom=!1,this._duration=null,this._currentTime=null,this.clearMediaSource()},_reportError:function(e){r.getDevice().getLogger().error(e),this._emitEvent(n.EVENT.ERROR)},_toStopped:function(){this._state=n.STATE.STOPPED,this._emitEvent(n.EVENT.STOPPED),this._setSentinels([])},_toBuffering:function(){this._state=n.STATE.BUFFERING,this._emitEvent(n.EVENT.BUFFERING),this._setSentinels([this._exitBufferingSentinel])},_toPlaying:function(){this._state=n.STATE.PLAYING,this._emitEvent(n.EVENT.PLAYING),this._setSentinels([this._endOfMediaSentinel,this._shouldBeSeekedSentinel,this._enterBufferingSentinel])},_toPaused:function(){this._state=n.STATE.PAUSED,this._emitEvent(n.EVENT.PAUSED),this._setSentinels([this._shouldBeSeekedSentinel,this._shouldBePausedSentinel])},_toComplete:function(){this._state=n.STATE.COMPLETE,this._emitEvent(n.EVENT.COMPLETE),this._setSentinels([])},_toEmpty:function(){this._wipe(),this._state=n.STATE.EMPTY},_toError:function(e){throw this._wipe(),this._state=n.STATE.ERROR,this._reportError(e),"ApiError: "+e},_setSentinelLimits:function(){this._sentinelLimits={pause:{maximumAttempts:2,successEvent:n.EVENT.SENTINEL_PAUSE,failureEvent:n.EVENT.SENTINEL_PAUSE_FAILURE,currentAttemptCount:0},seek:{maximumAttempts:2,successEvent:n.EVENT.SENTINEL_SEEK,failureEvent:n.EVENT.SENTINEL_SEEK_FAILURE,currentAttemptCount:0}}},_enterBufferingSentinel:function(){var e=!this._hasSentinelTimeChangedWithinTolerance&&!this._nearEndOfMedia;return 0===this.getCurrentTime()&&(e=this._trustZeroes&&e),void 0===this._enterBufferingSentinelAttemptCount&&(this._enterBufferingSentinelAttemptCount=0),e?this._enterBufferingSentinelAttemptCount++:this._enterBufferingSentinelAttemptCount=0,1===this._enterBufferingSentinelAttemptCount&&(e=!1),!!e&&(this._emitEvent(n.EVENT.SENTINEL_ENTER_BUFFERING),this._toBuffering(),!(this._enterBufferingSentinelAttemptCount=0))},_exitBufferingSentinel:function(){var e=function(e){return e._emitEvent(n.EVENT.SENTINEL_EXIT_BUFFERING),e._exitBuffering(),!0};return this._readyToPlayFrom&&this.getState()===n.STATE.PAUSED?e(this):!!this._hasSentinelTimeChangedWithinTolerance&&e(this)},_shouldBeSeekedSentinel:function(){var e,t,i;return void 0!==this._sentinelSeekTime&&(e=(t=this).getCurrentTime(),i=!1,Math.abs(e-this._sentinelSeekTime)>this._seekSentinelTolerance?i=this._nextSentinelAttempt(this._sentinelLimits.seek,function(){o.nativeCommand(a.SET_PLAY_TIME,{playTime:t._sentinelSeekTime}),t._currentTime=t._sentinelSeekTime}):this._sentinelIntervalNumber<3?this._sentinelSeekTime=e:this._sentinelSeekTime=void 0,i)},_shouldBePausedSentinel:function(){var e=!1;return this._hasSentinelTimeChangedWithinTolerance&&(e=this._nextSentinelAttempt(this._sentinelLimits.pause,function(){o.nativeCommand(a.PAUSE)})),e},_nextSentinelAttempt:function(e,t){var i,n;return e.currentAttemptCount+=1,(i=e.currentAttemptCount)===(n=e.maximumAttempts)+1&&this._emitEvent(e.failureEvent),i<=n&&(t(),this._emitEvent(e.successEvent),!0)},_endOfMediaSentinel:function(){return!(this._hasSentinelTimeChangedWithinTolerance||!this._nearEndOfMedia)&&(this._emitEvent(n.EVENT.SENTINEL_COMPLETE),this._onEndOfMedia(),!0)},_clearSentinels:function(){clearInterval(this._sentinelInterval)},_setSentinels:function(r){var s=this;this._clearSentinels(),this._sentinelIntervalNumber=0,this._lastSentinelTime=this.getCurrentTime(),this._sentinelInterval=setInterval(function(){var e,t,i,n;for(s._sentinelIntervalNumber+=1,i=s.getCurrentTime(),s._hasSentinelTimeChangedWithinTolerance=.2<Math.abs(i-s._lastSentinelTime),s._nearEndOfMedia=s.getDuration()-(i||s._lastSentinelTime)<=1,s._lastSentinelTime=i,e=0,t=r.length;e<t&&(n=r[e].call(s),0<s.getCurrentTime()&&(s._trustZeroes=!1),!n);e++);},1100)},_isReadyToPlayFrom:function(){return void 0!==this._readyToPlayFrom&&this._readyToPlayFrom},_setSeekSentinelTolerance:function(){this._seekSentinelTolerance=15,this._isLiveMedia()&&(this._seekSentinelTolerance=30)}})).Commands=a,t.prototype.getMediaPlayer=function(){return null===l&&(l=new i),l},i}),define("rofl/devices/mediaplayer/samsung/avplay",["rofl/lib/utils","antie/runtimecontext","rofl/devices/device","rofl/devices/mediaplayer/mediaplayer","rofl/media/source","rofl/media/drm/item","rofl/lib/promise","rofl/bootloader"],function(a,s,e,i,l,c,t,n){"use strict";var r,o,u,d=null;return u=function(){return new t(function(t,i){if(null===d){if(!window.webapis||!window.webapis.avplay||!a.isFunction(window.webapis.avplay.getAVPlay))return void i({message:"`webapis.avplay` not available."});window.webapis.avplay.getAVPlay(function(e){d=e,t()},function(e){i({message:"Cannot get avplay object : "+e.name})})}else t()})},o=i.extend({init:function(){this._super(),this._state=i.STATE.EMPTY},getAVPlay:function(){return d},_createMediaElement:function(){var e,t,i,n=this._device=s.getDevice(),r=n.getScreenSize();this._mediaElement||((e=this._mediaElement=n.createContainer("mediaplayerContainer")).style.position="absolute",e.style.left=0,e.style.top=0,e.style.width=r.width+"px",e.style.height=r.height+"px",(t=document.createElement("object")).id="av-player",t.setAttribute("type","application/avplayer"),t.style.position="absolute",t.style.left=0,t.style.top=0,t.style.width=r.width+"px",t.style.height=r.height+"px",t.style.opacity=0,t.style.transform="translateZ(0)",t.style.webkitTransform="translateZ(0)",t.style.mozTransform="translateZ(0)",(i=document.createElement("param")).setAttribute("name","wmode"),i.setAttribute("value","transparent"),t.appendChild(i),e.appendChild(t),n.prependChildElement(s.getCurrentApplication().getRootWidget().outputElement,this._mediaElement))},setSource:function(e,t,i){var n,r,s,o;if(this._sourceUrl=t,this._type=e,this._mimeType=i,this.hasMediaSource()&&(n=(s=this._mediaSource).getBitRate(),o=s.getStartBitRate(),s.isAdaptive()&&(n&&(!a.isObject(n)||a.isEmpty(n.min)||a.isEmpty(n.max)?t+="|BITRATES="+n:t+="|BITRATES="+n.min+"~"+n.max),o&&(t+="|STARTBITRATE="+o)),this._isMpdMimeType(s)&&(t+="|COMPONENT=HAS"),this._isHlsMimeType()&&(t+="|COMPONENT=HLS"),s.hasDrmItem()))for(r in c.TYPES)if(c.TYPES.hasOwnProperty(r)&&s.getDrmItem().getType()===c.TYPES[r]){t+="|DRM_TYPE="+r;break}this._createMediaElement(),this._assignEventListeners(),d.open(t),this.hasMediaSource()&&s.getQuality()===l.Qualities.UHD?d.setUHDResolution(!0):d.setUHDResolution(!1),this._toStopped()},playFrom:function(e){switch(this._postBufferingState=i.STATE.PLAYING,this._targetSeekTime=e,this.getState()){case i.STATE.PAUSED:case i.STATE.COMPLETE:this._toBuffering(),this._playFromIfReady();break;case i.STATE.BUFFERING:this._playFromIfReady();break;case i.STATE.PLAYING:this._toBuffering(),this._targetSeekTime=this._getClampedTime(e),this._isNearToCurrentTime(this._targetSeekTime)?(delete this._targetSeekTime,this._toPlaying()):this._playFromIfReady();break;default:this._toError('Cannot playFrom while in the "'+this.getState()+'" state')}},beginPlayback:function(){switch(this._postBufferingState=i.STATE.PLAYING,this._targetSeekTime=0,this.getState()){case i.STATE.STOPPED:this._toBuffering(),d.play(function(){},function(){});break;default:this._toError('Cannot beginPlayback while in the "'+this.getState()+'" state')}},beginPlaybackFrom:function(e){switch(this._postBufferingState=i.STATE.PLAYING,this._targetSeekTime=e,this.getState()){case i.STATE.STOPPED:this._toBuffering(),d.play(function(){},function(){},e),this._playFromIfReady();break;default:this._toError('Cannot beginPlaybackFrom while in the "'+this.getState()+'" state')}},pause:function(){switch(this._postBufferingState=i.STATE.PAUSED,this.getState()){case i.STATE.PAUSED:break;case i.STATE.BUFFERING:this._isReadyToPlayFrom()&&(d.pause(),this._toPaused());break;case i.STATE.PLAYING:d.pause(),this._toPaused();break;default:this._toError('Cannot pause while in the "'+this.getState()+'" state')}},resume:function(){switch(this._postBufferingState=i.STATE.PLAYING,this.getState()){case i.STATE.PLAYING:break;case i.STATE.BUFFERING:this._isReadyToPlayFrom()&&d.resume();break;case i.STATE.PAUSED:d.resume(),this._toPlaying();break;default:this._toError('Cannot resume while in the "'+this.getState()+'" state')}},stop:function(){switch(this.getState()){case i.STATE.STOPPED:break;case i.STATE.BUFFERING:case i.STATE.PLAYING:case i.STATE.PAUSED:case i.STATE.COMPLETE:d.stop(),this._toStopped();break;default:this._toError('Cannot stop while in the "'+this.getState()+'" state')}},reset:function(){switch(this.getState()){case i.STATE.EMPTY:break;case i.STATE.STOPPED:case i.STATE.ERROR:this._toEmpty();break;default:this._toError('Cannot reset while in the "'+this.getState()+'" state')}},getSource:function(){return this._sourceUrl},getMimeType:function(){return this._mimeType},getCurrentTime:function(){return this._currentTime},getSeekableRange:function(){switch(this.getState()){case i.STATE.STOPPED:case i.STATE.ERROR:break;default:return this._getSeekableRange()}},_getSeekableRange:function(){var e=this._getMediaDuration();if(e)return{start:0,end:e};s.getDevice().getLogger().warn('No "duration" or "seekable" on media element')},_getMediaDuration:function(){if(this._isReadyToPlayFrom())return Math.floor(d.getDuration()/1e3)},getState:function(){return this._state},getPlayerElement:function(){return this._mediaElement},_assignEventListeners:function(){var t=this;d.init({playCallback:{onbufferingstart:function(){t._toBuffering()},onbufferingcomplete:function(){t._doneBuffering()},onavplaycallback:function(){t._doneBuffering()},oncurrentplaytime:function(e){t._currentTime=parseInt(e.millisecond,10)/1e3,t.getState()===i.STATE.PLAYING?t._emitEvent(i.EVENT.STATUS):(t.getState()===i.STATE.PAUSED&&t._toPlaying(),t._doneBuffering())},onstreamcompleted:function(){t._toComplete()},onerror:function(e){s.getDevice().getLogger().warn("Media source element emitted an error"),t._toError(e)}}})},_doneBuffering:function(){this._readyToPlayFrom=!0,this._waitingToPlayFrom()&&this._deferredPlayFrom(),this.getState()===i.STATE.BUFFERING&&(this._postBufferingState===i.STATE.PAUSED?this._toPaused():this._toPlaying())},_isReadyToPlayFrom:function(){return!!this._readyToPlayFrom},_playFromIfReady:function(){this._isReadyToPlayFrom()&&this._waitingToPlayFrom()&&this._deferredPlayFrom()},_waitingToPlayFrom:function(){return!a.isUndefined(this._targetSeekTime)},_deferredPlayFrom:function(){this._waitingToPlayFrom()&&this._seekTo(this._targetSeekTime),this._postBufferingState===i.STATE.PAUSED&&d.pause(),delete this._targetSeekTime},_isHlsMimeType:function(){var e=this._mimeType.toLowerCase();return"application/vnd.apple.mpegurl"===e||"application/x-mpegurl"===e},_isMpdMimeType:function(e){return e.getMediaMimetype()===l.MIME_TYPES.mpd},_seekTo:function(e){var t=this._currentTime,i=this._getClampedTime(e);t<i?d.jumpForward(i-t):i<t&&d.jumpBackward(t-i),this._currentTime=i,this.resume()},_clean:function(){this._sourceUrl=null,this._type=null,this._mimeType=null,delete this._targetSeekTime,this._destroyMediaElement(),this.clearMediaSource(),d.stop()},_destroyMediaElement:function(){this._mediaElement&&(s.getDevice().removeElement(this._mediaElement),delete this._mediaElement)},_toStopped:function(){this._state=i.STATE.STOPPED,this._emitEvent(i.EVENT.STOPPED)},_toBuffering:function(){this._state=i.STATE.BUFFERING,this._emitEvent(i.EVENT.BUFFERING)},_toPlaying:function(){this._state=i.STATE.PLAYING,this._emitEvent(i.EVENT.PLAYING)},_toPaused:function(){this._state=i.STATE.PAUSED,this._emitEvent(i.EVENT.PAUSED)},_toComplete:function(){this._state!==i.STATE.COMPLETE&&(this._state=i.STATE.COMPLETE,this._emitEvent(i.EVENT.COMPLETE))},_toEmpty:function(){this._clean(),this._state=i.STATE.EMPTY},_toError:function(e){this._clean(),this._state=i.STATE.ERROR,this._emitEvent(i.EVENT.ERROR,{error:e})}}),e.prototype.getMediaPlayer=function(){return r||(r=new o),r},n.register(u),o}),define("rofl/devices/mediaplayer/samsung/maple",["antie/devices/mediaplayer/mediaplayer","antie/devices/mediaplayer/samsung_maple","antie/devices/device","rofl/media/source","rofl/lib/utils"],function(t,e,i,r,s){"use strict";var n,o=e.extend({setSource:function(e,t,i){this._super(e,t,i),this.getPlayerElement().InitPlayer(this._wrappedSource())},beginPlaybackFrom:function(e){e=e||0,this.getState()===t.STATE.STOPPED&&0<e&&(this._currentTime=e),this._super(e)},_wipe:function(){this._super(),this.clearMediaSource()},_wrappedSource:function(){var e,t,i=this._super(),n=this.getMediaSource();return this.hasMediaSource()&&(e=n.getBitRate(),t=n.getStartBitRate(),n.getMediaMimetype()===r.MIME_TYPES.mpd&&(i+="|COMPONENT=HAS"),n.isAdaptive()&&(e&&(!s.isObject(e)||s.isEmpty(e.min)||s.isEmpty(e.max)?i+="|BITRATES="+e:i+="|BITRATES="+e.min+"-"+e.max),t&&(i+="|STARTBITRATE="+t))),i}});return n=new o,i.prototype.getMediaPlayer=function(){return n},o}),define("rofl/devices/mediaplayer/samsung/tizen",["rofl/lib/utils","antie/runtimecontext","rofl/devices/device","rofl/devices/mediaplayer/mediaplayer","rofl/media/source"],function(a,o,e,n,l){"use strict";var t,i,c=window.webapis.avplay,r="PLAYER_MSG_BITRATE_CHANGE",u="PLAYER_DISPLAY_MODE_AUTO_ASPECT_RATIO",s="PLAYING",d="PAUSED",h={default:0,2015:36e5};return i=n.extend({init:function(){this._super(),this._state=n.STATE.EMPTY},_createMediaElement:function(){var e,t,i,n=this._device=o.getDevice(),r=n.getScreenSize();this._mediaElement||((e=this._mediaElement=n.createContainer("mediaplayerContainer")).style.position="absolute",e.style.left=0,e.style.top=0,e.style.width=r.width+"px",e.style.height=r.height+"px",(t=document.createElement("object")).id="av-player",t.setAttribute("type","application/avplayer"),t.style.position="absolute",t.style.left=0,t.style.top=0,t.style.width=r.width+"px",t.style.height=r.height+"px",t.style.transform="translateZ(0)",t.style.webkitTransform="translateZ(0)",t.style.mozTransform="translateZ(0)",(i=document.createElement("param")).setAttribute("name","wmode"),i.setAttribute("value","transparent"),t.appendChild(i),e.appendChild(t),n.prependChildElement(o.getCurrentApplication().getRootWidget().outputElement,this._mediaElement))},_onVisibilityChanged:function(){document.hidden&&(c.stop(),this._emitEvent(n.EVENT.SUSPEND))},removeTizenMultitaskHandler:function(){this._multitaskHandler&&(document.removeEventListener("visibilitychange",this._multitaskHandler),this._multitaskHandler=null)},setTizenMultitaskHandler:function(){this.removeTizenMultitaskHandler(),this._multitaskHandler=a.bind(this._onVisibilityChanged,this),document.addEventListener("visibilitychange",this._multitaskHandler)},_setMaxDeviceBitrate:function(e){var t=o.getDevice().getModel(),i=h[t]?h[t]:h.default,n=e.getBitRate(),r=a.getNested(n,"min")||1,s=a.getNested(n,"max");e.isAdaptive()&&i&&(!s||i<s)&&e.setBitRate(r,i)},setSource:function(e,t,i){var n,r,s,o="";this._sourceUrl=t,this._type=e,this._mimeType=i,this.setTizenMultitaskHandler(),c.open(t),this.hasMediaSource()&&(n=this._mediaSource,this._setMaxDeviceBitrate(n),r=n.getBitRate(),s=n.getStartBitRate(),n.isAdaptive()&&(r&&(!a.isObject(r)||a.isEmpty(r.min)||a.isEmpty(r.max)?o+="|BITRATES="+r:o+="|BITRATES="+r.min+"~"+r.max),s&&(o+="|STARTBITRATE="+s))),c.setStreamingProperty("ADAPTIVE_INFO",o),this.hasMediaSource()&&this._mediaSource.getQuality()===l.Qualities.UHD?c.setStreamingProperty("SET_MODE_4K","TRUE"):c.setStreamingProperty("SET_MODE_4K","FALSE"),c.setTimeoutForBuffering(10),c.setDisplayRect(0,0,1920,1080),c.setDisplayMethod(u),this._createMediaElement(),this._assignEventListeners(),this._toStopped()},playFrom:function(e){switch(this._postBufferingState=n.STATE.PLAYING,this._targetSeekTime=e,this.getState()){case n.STATE.PAUSED:case n.STATE.COMPLETE:this._toBuffering(),this._playFromIfReady();break;case n.STATE.BUFFERING:this._playFromIfReady();break;case n.STATE.PLAYING:this._toBuffering(),this._targetSeekTime=this._getClampedTime(e),this._isNearToCurrentTime(this._targetSeekTime)?(delete this._targetSeekTime,this._toPlaying()):this._playFromIfReady();break;default:this._toError('Cannot playFrom while in the "'+this.getState()+'" state')}},beginPlayback:function(e){switch(e=e||{},this._postBufferingState=n.STATE.PLAYING,this._targetSeekTime=0,this.getState()){case n.STATE.STOPPED:this._toBuffering(),this._startVideo(e.async);break;default:this._toError('Cannot beginPlayback while in the "'+this.getState()+'" state')}},beginLivePlayback:function(e){switch(e=e||{},this._postBufferingState=n.STATE.PLAYING,delete this._targetSeekTime,this.getState()){case n.STATE.STOPPED:this._toBuffering(),this._startVideo(e.async);break;default:this._toError('Cannot beginPlayback while in the "'+this.getState()+'" state')}},beginPlaybackFrom:function(e,t){switch(t=t||{},this._postBufferingState=n.STATE.PLAYING,this._targetSeekTime=e,this.getState()){case n.STATE.STOPPED:this._toBuffering(),this._startVideo(t.async);break;default:this._toError('Cannot beginPlaybackFrom while in the "'+this.getState()+'" state')}},pause:function(){switch(this._postBufferingState=n.STATE.PAUSED,this.getState()){case n.STATE.PAUSED:break;case n.STATE.BUFFERING:this._isReadyToPlayFrom()&&(c.pause(),this._toPaused());break;case n.STATE.PLAYING:c.pause(),this._toPaused();break;default:this._toError('Cannot pause while in the "'+this.getState()+'" state')}},resume:function(){switch(this._postBufferingState=n.STATE.PLAYING,this.getState()){case n.STATE.PLAYING:break;case n.STATE.BUFFERING:this._isReadyToPlayFrom()&&c.play();break;case n.STATE.PAUSED:c.play(),this._toPlaying();break;default:this._toError('Cannot resume while in the "'+this.getState()+'" state')}},stop:function(){switch(this.getState()){case n.STATE.STOPPED:break;case n.STATE.BUFFERING:case n.STATE.PLAYING:case n.STATE.PAUSED:case n.STATE.COMPLETE:c.stop(),this._toStopped();break;default:this._toError('Cannot stop while in the "'+this.getState()+'" state')}},reset:function(){switch(this.getState()){case n.STATE.EMPTY:break;case n.STATE.STOPPED:case n.STATE.ERROR:this._toEmpty();break;default:this._toError('Cannot reset while in the "'+this.getState()+'" state')}},getSource:function(){return this._sourceUrl},getMimeType:function(){return this._mimeType},getCurrentTime:function(){return this._currentTime},getSeekableRange:function(){switch(this.getState()){case n.STATE.STOPPED:case n.STATE.ERROR:break;default:return this._getSeekableRange()}},_getSeekableRange:function(){var e=this._getMediaDuration();if(e)return{start:0,end:e};o.getDevice().getLogger().warn('No "duration" or "seekable" on media element')},_getMediaDuration:function(){if(this._isReadyToPlayFrom()&&(c.getState()===s||c.getState()===d))return this._type===n.TYPE.LIVE_VIDEO?1/0:Math.floor(c.getDuration()/1e3)},getState:function(){return this._state},getPlayerElement:function(){return this._mediaElement},_assignEventListeners:function(){var i=this;c.setListener({onbufferingstart:function(){i._toBuffering()},onbufferingcomplete:function(){},onavplaycallback:function(){i._doneBuffering()},oncurrentplaytime:function(e){i._currentTime!==e/1e3?(i._currentTime=e/1e3,i.getState()===n.STATE.PLAYING?i._emitEvent(n.EVENT.STATUS):(i.getState()===n.STATE.PAUSED&&i._toPlaying(),i._doneBuffering())):i.getState()!==n.STATE.BUFFERING&&i._toBuffering()},onstreamcompleted:function(){i._toComplete()},onevent:function(e,t){i._onEvent(e,t)},onerror:function(e){o.getDevice().getLogger().warn(e.toString()),o.getDevice().getLogger().warn("Media source element emitted an error"),i._toError(e)}})},_doneBuffering:function(){this._readyToPlayFrom=!0,this._waitingToPlayFrom()&&this._deferredPlayFrom(),this.getState()===n.STATE.BUFFERING&&(this._postBufferingState===n.STATE.PAUSED?this._toPaused():this._toPlaying())},_isReadyToPlayFrom:function(){return!!this._readyToPlayFrom},_playFromIfReady:function(){this._isReadyToPlayFrom()&&this._waitingToPlayFrom()&&this._deferredPlayFrom()},_waitingToPlayFrom:function(){return!a.isUndefined(this._targetSeekTime)},_deferredPlayFrom:function(){this._waitingToPlayFrom()&&this._seekTo(this._targetSeekTime),this._postBufferingState===n.STATE.PAUSED&&c.pause(),delete this._targetSeekTime},_isHlsMimeType:function(){var e=this._mimeType.toLowerCase();return"application/vnd.apple.mpegurl"===e||"application/x-mpegurl"===e},_seekTo:function(e){var t=this,i=Math.max(1,this._getClampedTime(e));this._currentTime=i;try{c.seekTo(1e3*i,function(){t.resume()})}catch(e){o.getDevice().getLogger().warn("Unable to seek to "+i+": ",e)}},_startVideo:function(e){var t=this;!0===e?c.prepareAsync(function(){c.play(),t._playFromIfReady()}):(c.prepare(),c.play())},_clean:function(){this._sourceUrl=null,this._type=null,this._mimeType=null,delete this._targetSeekTime,this.removeTizenMultitaskHandler(),this._destroyMediaElement(),this.clearMediaSource(),c.close()},_destroyMediaElement:function(){this._mediaElement&&(o.getDevice().removeElement(this._mediaElement),delete this._mediaElement)},_toStopped:function(){this._state=n.STATE.STOPPED,this._emitEvent(n.EVENT.STOPPED)},_toBuffering:function(){this._state=n.STATE.BUFFERING,this._emitEvent(n.EVENT.BUFFERING)},_toPlaying:function(){this._state=n.STATE.PLAYING,this._emitEvent(n.EVENT.PLAYING)},_toPaused:function(){this._state=n.STATE.PAUSED,this._emitEvent(n.EVENT.PAUSED)},_toComplete:function(){this._state!==n.STATE.COMPLETE&&(this._state=n.STATE.COMPLETE,this._emitEvent(n.EVENT.COMPLETE))},_toEmpty:function(){this._clean(),this._state=n.STATE.EMPTY},_toError:function(e){this._clean(),this._state=n.STATE.ERROR,this._emitEvent(n.EVENT.ERROR,{error:e})},_onEvent:function(e,t){switch(e){case r:this._onBitrateChange(t)}},_onBitrateChange:function(e){var t=e.replace("BITRATE:","");this._emitEvent(n.EVENT.BITRATE_CHANGED,{bitrate:t})}}),t=new i,e.prototype.getMediaPlayer=function(){return t},i}),define("rofl/devices/mediaplayer/sony/html5",["antie/runtimecontext","antie/devices/mediaplayer/html5","antie/devices/mediaplayer/mediaplayer","antie/devices/device"],function(t,e,i,n){"use strict";var r,s=e.extend({setMediaSource:function(e){this._mediaSource=e,this._mediaSource.hasDrmItem()?t.getDevice().getLogger().log("Make sure DRM items are prepared before playback"):this.setSource(e.getMediaType(),e.getMediaUrl(),e.getMediaMimetype())}});return r=new s,n.prototype.getMediaPlayer=function(){return r},s}),define("rofl/devices/mediaplayer/webos/html5",["rofl/devices/mediaplayer/html5","antie/runtimecontext","antie/devices/mediaplayer/mediaplayer","antie/devices/device","rofl/media/drm/agent/webos","rofl/models/audiotrack","rofl/lib/utils"],function(e,l,c,t,s,r,o){"use strict";var i,n=e.extend({_currentMediaId:null,_audioTracks:[],setMediaSource:function(e){this.setSource(e)},setSource:function(e){var t,i,n,r,s=e.getMediaType(),o=e.getMediaUrl(),a=e.getMediaMimetype();this.getState()===c.STATE.EMPTY?(this._trustZeroes=!1,this._type=s,this._source=o,this._mimeType=a,i=l.getDevice(),n="Video",s!==c.TYPE.AUDIO&&s!==c.TYPE.LIVE_AUDIO||(n="Audio"),this._setSeekSentinelTolerance(),this._mediaElement=i._createElement(n.toLowerCase(),"mediaPlayer"+n),this._mediaElement.autoplay=!1,this._mediaElement.style.position="absolute",this._mediaElement.style.top="0px",this._mediaElement.style.left="0px",this._mediaElement.style.width="100%",this._mediaElement.style.height="100%",(t=this)._wrapOnFinishedBuffering=function(){t._onFinishedBuffering()},this._wrapOnError=function(e){t._onDeviceError(e)},this._wrapOnEndOfMedia=function(){t._onEndOfMedia()},this._wrapOnDeviceBuffering=function(){t._onDeviceBuffering()},this._wrapOnStatus=function(){t._onStatus()},this._wrapOnMetadata=function(){t._onMetadata()},this._wrapOnSourceError=function(e){t._onSourceError(e)},this._mediaElement.addEventListener("canplay",this._wrapOnFinishedBuffering,!1),this._mediaElement.addEventListener("seeked",this._wrapOnFinishedBuffering,!1),this._mediaElement.addEventListener("playing",this._wrapOnFinishedBuffering,!1),this._mediaElement.addEventListener("error",this._wrapOnError,!1),this._mediaElement.addEventListener("ended",this._wrapOnEndOfMedia,!1),this._mediaElement.addEventListener("waiting",this._wrapOnDeviceBuffering,!1),this._mediaElement.addEventListener("timeupdate",this._wrapOnStatus,!1),this._mediaElement.addEventListener("loadedmetadata",this._wrapOnMetadata,!1),r=l.getCurrentApplication().getRootWidget().outputElement,i.prependChildElement(r,this._mediaElement),this._sourceElement=this._generateSourceElement(e),this._sourceElement.addEventListener("error",this._wrapOnSourceError,!1),this._mediaElement.preload="auto",i.appendChildElement(this._mediaElement,this._sourceElement),this._mediaElement.load(),this._toStopped()):this._toError("Cannot set source unless in the '"+c.STATE.EMPTY+"' state")},_generateSourceElement:function(e){var t=l.getDevice()._createElement("source");return t.src=e.getMediaUrl(),t.type=this._getSourceType(e),t},_getSourceType:function(e){var t,i,n=s.getInstance(),r=e.getMediaMimetype();return e.getDrmItem()&&(t=n.getActiveDrmClientType(),i=n.getActiveClientId(),r+=";mediaOption="+this._getMediaOption(t,i,e)),r},_getMediaOption:function(e,t,i){var n={},r=i.getStartBitRate();return n.option={},n.option.drm={},n.option.drm.type=e,n.option.drm.clientId=t,r&&(n.option.adaptiveStreaming={},n.option.adaptiveStreaming.bps={},n.option.adaptiveStreaming.bps.start=r),encodeURIComponent(l.getDevice().encodeJson(n))},getAudioTracks:function(){var e,i=this,n=[];return(!this._currentMediaId||this._currentMediaId!==this._mediaElement.mediaId)&&this._mediaElement.audioTracks&&0<this._mediaElement.audioTracks.length&&(this._currentMediaId=this._mediaElement.mediaId,e=o.arrayFrom(o.map(this._mediaElement.audioTracks,function(e){return new r(e.id,e.label,e.language,e.enabled,{kind:e.kind})})),this._audioTracks=[],e&&0<e.length&&o.each(e,function(e){var t=e.getId();-1===n.indexOf(t)&&(i._audioTracks.push(e),n.push(t))})),this._audioTracks||[]},_exitBuffering:function(){var e=this;this._super(),this._postBufferingState!==c.STATE.PAUSED&&this._mediaElement.paused&&setTimeout(function(){e._mediaElement.play()})},setAudioTrack:function(t){var e=this._mediaElement.mediaId,i=l.getDevice(),n=this,r=function(){o.each(n._audioTracks,function(e){e.setActive(e.getId()===t.getId())})},s=parseInt(t.getId());webOS&&webOS.service.request("luna://com.webos.media",{method:"selectTrack",parameters:{type:"audio",index:s,mediaId:e},onSuccess:function(e){r(),i.getLogger().log("SetAudioTrack index "+s+" Success: "+JSON.stringify(e))},onFailure:function(e){0===e.errorCode&&e.errorText&&"no error"===e.errorText.toLowerCase()&&r(),i.getLogger().log("SetAudioTrack index "+s+" Error: "+JSON.stringify(e))}})},getCurrentAudioTrack:function(){var e=o.filter(this._audioTracks,function(e){return!0===e.getActive()});return e&&e.length&&e[0]||!1}});return i=new n,t.prototype.getMediaPlayer=function(){return i},n}),define("rofl/devices/misc/developer",["antie/application","antie/devices/browserdevice","antie/widgets/container","antie/events/keyevent","rofl/events/broadcastevent","antie/devices/logging/onscreen"],function(e,t,i,_,m){"use strict";var n,r=t.prototype.addKeyEventListener;t.prototype.addKeyEventListener=function(){var l,c,u,d,h,g,p,f;r.call(this),l=this,c=e.getCurrentApplication(),u=c.getDevice(),d=c.getConfiguration(),h=document.onkeydown,g=this.getKeyMap(),f=p=!0,document.onkeydown=function(e){var t,i,n,r,s,o,a;if(e=e||window.event,(t=g[e.keyCode.toString()])===_.VK_8&&(i=document.getElementById("developer-widget"),n=f?"none":"block",i&&(i.style.display=n,f=!f)),f){if(t===_.VK_2||t===_.VK_L3)return 0<(r=window.location.href).indexOf("#")&&(r=r.substr(0,r.indexOf("#"))),window.location.href=r,void e.preventDefault();if(t===_.VK_3||t===_.VK_R3)s=document.getElementById("__onScreenLogging"),(o=c.getRootWidget()).hasClass("developer-hidden")?(o.removeClass("developer-hidden"),s&&(s.style.display="block"),u.setLoggingMethods()):(o.addClass("developer-hidden"),s&&(s.style.display="none"),u.setLoggingMethods("none"));else if(t===_.VK_4)l.deactivateNetworkCheck(),p=!p,c.broadcastEvent(new m("networkstatuschange",{networkStatus:p}));else if(t===_.VK_5){a=u.getLogger();try{a.log("Udid:",u.getUdid()),a.log("Brand:",u.getBrand()),a.log("Model:",u.getModel()),a.log("Firmware:",u.getFirmware()),a.log("ExtendedModel:",u.getExtendedModel()),a.log("EnvBrand:",u.getEnvBrand()),a.log("EnvModel:",u.getEnvModel())}catch(e){a.log(e)}}else t===_.VK_6&&((a=u.getLogger()).log("AppId:",d.id),a.log("Version number:",d.version),a.log("Current URL:",u.getWindowLocation().href))}h(e)}},e.prototype.run=function(){var t,e;t=new i("developer-widget"),(n=new i("developer-widget-network")).addClass("developer-network-on"),t.appendChildWidget(n),this._rootWidget.appendChildWidget(t),t.setStylesTo({backgroundImage:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAAB5CAYAAABWfp/hAAAACXBIWXMAABYlAAAWJQFJUiTwAAAMKmlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjarVdnVFPpFt23JKGEUBIQkBJ6E6VXQXoRFKTDWAhJgFBCCAkq9jLOCI4FFQuWER0VcdTREZCxIPYyKHbH8lAHBWUc7AWV9yOAM755P95a71vrZp217z777HNu1l33ANr2ApmsgNQBCqUKeUJkCD8tPYPPugsKJIaAB5ZAWCILjo+PxX89r6+BAIDLzgKZrAD/29EViUuEABEPIEtUIiwEiJ8BmiOUyRUA4zgAq8kKmQJgdALgydPSMwDGBwC8nLT0DICpA4CXpYqtAfDkSQmhANMHUGMLBPIcgBMGgF8qzFEAHBEAF6lIIgU4KwAECnMFIoBzBcCwwsIiEaANAPZZf9HJ+Ztm1qCmQJAzGKt6AQCohUlKZAWCqfh/n8IC5UANCwDsXHlUAgAeQKzLL4pJAMAGiD3SrLFxAPQA4qBEBPTHrbnKqOR+fruwJDQDgAFAvBQJwmIAmACkhjI/Obg/thXIARWfDJEoopP64xR5UUK/PpknLRgbq9Ihp+eKowfiSnFJeOIAJ1sSEQ1AByC3l+Umpap8ko2lkpSxADgAebwkPzGmP/dSWW7o2AGOXJmQDMAaIDuz5REJKg7FLiwZ6IuyFArCEwEYApSHIjcpSpVLxYrEYeGqulSaWJrc74fKlSlCEvr5ZbKC+Nh+vFJcEJkAwBKgtpSUJg7knlTIk/rnTF3LE4yOV3mmHssU8Un9ft4iFqEIAx9K8JGFIuRB0trd0A1+/50ICCBHDsRw7kcGMlIhgBxSCJCIMvwBKcQoGcwLgQByiFEKKT4OoqpfZ2RDADlKIUYJ8vEQchTSxnQg7U/H0oF0EB1Iu9E+tO9AHl97oCoznBnGjGJGMB0GfQhRhAIUQQ7JP2AxKIAYSsghhnSgh896jIeMNsZ9xlVGO+MmUvA75JAMsCZJ5sq/cM7HGLRD2T8VMbIgRdcAh7al3WhPOoQOoANpX/BpA9oYzrQH7UMH06Nof9qT9v2bQ+Wgt8+z/LKeGNK/9dOPcxw5nv0usgafTOgg60uV0L/MSIQixHzJpL6l9lGnqKPUGeog1QA+dYRqpM5Th6iGv/wTfoccOYPVEiCGFPkogGSA41Ln0uXy4T+qC/odyCFGCaAQT1EAQGiRbKpckpOr4AfLZAVifrRUOHwY383F1QNIS8/gq14ZLwxAACAMzn7GipsB33KAyPmMCayAAw8B7uvPmNVzgL0UOHRRqJSXqjAaABjQgDZ4MIIZrGAPZ7jBC/4IQjhGIw5JSMdECJGLQsgxGdMxBwtQgaVYibXYiM3Yjh+xFw04iKM4iXO4iKu4hXZ04Al68Bq9BEGwCC2CSxgR5oQN4US4ET5EIBFOxBIJRDqRSeQQUkJJTCfmERVEJbGW2ETUEj8RB4ijxBmijbhJ3CO6iOfEe5Ii2SSPNCVtyRGkDxlMxpBJ5AQyhywmy8j55GJyNVlD7iTryaPkOfIq2U4+IV9RoDQpA8qCcqZ8qFAqjsqgsik5NZMqp6qoGmoX1USdoi5T7VQ39Y5m0lyaTzvT/nQUnUwL6WJ6Jr2IXktvp+vp4/Rl+h7dQ39iaDFMGE4MP0Y0I42Rw5jMWMCoYmxl7GecYFxldDBeM5lMA6Yd05sZxUxn5jGnMRcx1zN3M5uZbcwHzFcsFsuI5cQKYMWxBCwFawFrDWsn6wjrEquD9VZNU81czU0tQi1DTao2V61KbYfaYbVLao/UetV11G3U/dTj1EXqU9WXqG9Rb1K/oN6h3quhq2GnEaCRpJGnMUdjtcYujRMatzVeaGpqWmr6ao7TlGjO1lytuUfztOY9zXdsPbYjO5Q9nq1kL2ZvYzezb7JfaGlp2WoFaWVoKbQWa9VqHdO6q/WWw+UM50RzRJxZnGpOPecS56m2uraNdrD2RO0y7SrtfdoXtLt11HVsdUJ1BDozdap1Duhc13mly9V11Y3TLdRdpLtD94xupx5Lz1YvXE+kN19vs94xvQdcimvFDeUKufO4W7gnuB08Js+OF83L41XwfuS18nr09fQ99FP0p+hX6x/SbzegDGwNog0KDJYY7DW4ZvB+iOmQ4CHiIQuH7Bpyacgbw6GGQYZiw3LD3YZXDd8b8Y3CjfKNlhk1GN0xpo0djccZTzbeYHzCuHsob6j/UOHQ8qF7h/5mQpo4miSYTDPZbHLe5JWpmWmkqcx0jekx024zA7MgszyzFWaHzbrMueaB5hLzFeZHzB/z9fnB/AL+av5xfo+FiUWUhdJik0WrRa+lnWWy5VzL3ZZ3rDSsfKyyrVZYtVj1WJtbj7Gebl1n/ZuNuo2PTa7NKptTNm9s7WxTbb+xbbDttDO0i7Yrs6uzu22vZT/Kvti+xv6KA9PBxyHfYb3DRUfS0dMx17Ha8YIT6eTlJHFa79Q2jDHMd5h0WM2w685s52DnUuc653vDDYbHDp87vGH40xHWIzJGLBtxasQnF0+XApctLrdc9VxHu851bXJ97uboJnSrdrviruUe4T7LvdH9mYeTh9hjg8cNT67nGM9vPFs8P3p5e8m9dnl1eVt7Z3qv877uw/OJ91nkc9qX4RviO8v3oO87Py8/hd9evz/9nf3z/Xf4d460GykeuWXkgwDLAEHApoD2QH5gZuD3ge2jLEYJRtWMuh9kFSQK2hr0KNghOC94Z/DTEJcQecj+kDehfqEzQpvDqLDIsPKw1nC98OTwteF3IywjciLqInoiPSOnRTZHMaJiopZFXY82jRZG10b3jPYePWP08Rh2TGLM2pj7sY6x8timMeSY0WOWj7k91masdGxDHOKi45bH3Ym3iy+O/2Ucc1z8uOpxDxNcE6YnnErkJk5K3JH4OikkaUnSrWT7ZGVyS4p2yviU2pQ3qWGplantaSPSZqSdSzdOl6Q3ZrAyUjK2Zrz6KvyrlV91jPccv2D8tQl2E6ZMODPReGLBxEOTtCcJJu3LZGSmZu7I/CCIE9QIXmVFZ63L6hGGClcJn4iCRCtEXeIAcaX4UXZAdmV2Z05AzvKcrtxRuVW53ZJQyVrJs7yovI15b/Lj8rfl9xWkFuwuVCvMLDwg1ZPmS48XmRVNKWqTOckWyNqL/YpXFvfIY+RbS4iSCSWNCp5CpjivtFd+rbxXGlhaXfp2csrkfVN0p0innJ/qOHXh1EdlEWU/TKOnCae1TLeYPmf6vRnBMzbNJGZmzWyZZTVr/qyO2ZGzt8/RmJM/59e5LnMr576clzqvab7p/NnzH3wd+XXdAs4C+YLr3/h/s/Fb+lvJt60L3ReuWfipXFR+tsKloqriwyLhorPfuX63+ru+xdmLW5d4LdmwlLlUuvTaslHLtlfqVpZVPlg+Znn9Cv6K8hUvV05aeabKo2rjKo1VylXtq2NXN66xXrN0zYe1uWuvVodU715nsm7hujfrResvbQjasGuj6caKje+/l3x/Y1Pkpvoa25qqzczNpZsfbknZcuoHnx9qtxpvrdj6cZt0W/v2hO3Ha71ra3eY7FhSR9Yp67p2jt958cewHxt3Oe/atNtgd8Ue7FHuefxT5k/X9sbsbdnns2/XzzY/r9vP3V9eT9RPre9pyG1ob0xvbDsw+kBLk3/T/l+G/7LtoMXB6kP6h5Yc1jg8/3DfkbIjr5plzd1Hc44+aJnUcutY2rErx8cdbz0Rc+L0yYiTx04FnzpyOuD0wTN+Zw6c9TnbcM7rXP15z/P7f/X8dX+rV2v9Be8LjRd9Lza1jWw7fGnUpaOXwy6fvBJ95dzVsVfbriVfu3F9/PX2G6IbnTcLbj77rfS33luzbzNul9/RuVN11+Ruzb8c/rW73av90L2we+fvJ96/9UD44MnvJb9/6Jj/UOth1SPzR7Wdbp0HuyK6Lj7+6nHHE9mT3u4Ff+j+se6p/dOf/wz683xPWk/HM/mzvueLXhi92PbS42XLq/hXd18Xvu59U/7W6O32dz7vTr1Pff+od/IH1ofVHx0+Nn2K+XS7r7CvTyaQCwAAFAAyOxt4vg3QSge4FwENjmrnAgAQqj0RUH2D/HOs2ssAAF7AtiAgeTYQ2wxsaAZsZgPsZiAeQFIQSHf3wav/lGS7u6m02HKA8bav74UpwGoCPsr7+nrX9/V93AJQN4HmYtWuB6h2yO+1AeBM6zz6y53r39M7ahJ2Zy6pAABBT2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS41LWMwMTQgNzkuMTUxNDgxLCAyMDEzLzAzLzEzLTEyOjA5OjE1ICAgICAgICAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgICAgICAgICAgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDx4bXA6Q3JlYXRlRGF0ZT4yMDE0LTAzLTIwVDE1OjEzOjUzKzAxOjAwPC94bXA6Q3JlYXRlRGF0ZT4KICAgICAgICAgPHhtcDpNb2RpZnlEYXRlPjIwMTQtMDMtMjBUMTY6MTYrMDE6MDA8L3htcDpNb2RpZnlEYXRlPgogICAgICAgICA8eG1wOk1ldGFkYXRhRGF0ZT4yMDE0LTAzLTIwVDE2OjE2KzAxOjAwPC94bXA6TWV0YWRhdGFEYXRlPgogICAgICAgICA8eG1wOkNyZWF0b3JUb29sPkFkb2JlIFBob3Rvc2hvcCBDQyAoTWFjaW50b3NoKTwveG1wOkNyZWF0b3JUb29sPgogICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3BuZzwvZGM6Zm9ybWF0PgogICAgICAgICA8cGhvdG9zaG9wOkNvbG9yTW9kZT4zPC9waG90b3Nob3A6Q29sb3JNb2RlPgogICAgICAgICA8cGhvdG9zaG9wOklDQ1Byb2ZpbGU+RGlzcGxheTwvcGhvdG9zaG9wOklDQ1Byb2ZpbGU+CiAgICAgICAgIDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+CiAgICAgICAgICAgIDxyZGY6QmFnPgogICAgICAgICAgICAgICA8cmRmOmxpPnhtcC5kaWQ6YmRlZTY0MzUtNjAwMC00MGYyLWEzMWYtMTYyMGZhYjUxYzA5PC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOkJhZz4KICAgICAgICAgPC9waG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+CiAgICAgICAgIDx4bXBNTTpIaXN0b3J5PgogICAgICAgICAgICA8cmRmOlNlcT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+Y29udmVydGVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpwYXJhbWV0ZXJzPmZyb20gaW1hZ2UvcG5nIHRvIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3A8L3N0RXZ0OnBhcmFtZXRlcnM+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5zYXZlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOjJkMTZkN2FkLTIxNzQtNDZmNy05ZWFiLTk2YWQxMTFlZWIzMjwvc3RFdnQ6aW5zdGFuY2VJRD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAxNC0wMy0yMFQxNjoxNTozMSswMTowMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnNvZnR3YXJlQWdlbnQ+QWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpPC9zdEV2dDpzb2Z0d2FyZUFnZW50PgogICAgICAgICAgICAgICAgICA8c3RFdnQ6Y2hhbmdlZD4vPC9zdEV2dDpjaGFuZ2VkPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+c2F2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDo3ZTk1MTkwOC01NTk0LTRlMGUtYWJjNC01OWIzODE1NGUwODQ8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTQtMDMtMjBUMTY6MTYrMDE6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDQyAoTWFjaW50b3NoKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmNoYW5nZWQ+Lzwvc3RFdnQ6Y2hhbmdlZD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPmNvbnZlcnRlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6cGFyYW1ldGVycz5mcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nPC9zdEV2dDpwYXJhbWV0ZXJzPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+ZGVyaXZlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6cGFyYW1ldGVycz5jb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZzwvc3RFdnQ6cGFyYW1ldGVycz4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPnNhdmVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6MWEyMzMwOTMtNzVhZC00MWRjLTg1ZjMtM2QzMjkwMzI4NmUyPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE0LTAzLTIwVDE2OjE2KzAxOjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpjaGFuZ2VkPi88L3N0RXZ0OmNoYW5nZWQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICA8L3JkZjpTZXE+CiAgICAgICAgIDwveG1wTU06SGlzdG9yeT4KICAgICAgICAgPHhtcE1NOkRlcml2ZWRGcm9tIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgPHN0UmVmOmluc3RhbmNlSUQ+eG1wLmlpZDo3ZTk1MTkwOC01NTk0LTRlMGUtYWJjNC01OWIzODE1NGUwODQ8L3N0UmVmOmluc3RhbmNlSUQ+CiAgICAgICAgICAgIDxzdFJlZjpkb2N1bWVudElEPnhtcC5kaWQ6MmQxNmQ3YWQtMjE3NC00NmY3LTllYWItOTZhZDExMWVlYjMyPC9zdFJlZjpkb2N1bWVudElEPgogICAgICAgICAgICA8c3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPnhtcC5kaWQ6MmQxNmQ3YWQtMjE3NC00NmY3LTllYWItOTZhZDExMWVlYjMyPC9zdFJlZjpvcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDwveG1wTU06RGVyaXZlZEZyb20+CiAgICAgICAgIDx4bXBNTTpEb2N1bWVudElEPnhtcC5kaWQ6MmQxNmQ3YWQtMjE3NC00NmY3LTllYWItOTZhZDExMWVlYjMyPC94bXBNTTpEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjFhMjMzMDkzLTc1YWQtNDFkYy04NWYzLTNkMzI5MDMyODZlMjwveG1wTU06SW5zdGFuY2VJRD4KICAgICAgICAgPHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjJkMTZkN2FkLTIxNzQtNDZmNy05ZWFiLTk2YWQxMTFlZWIzMjwveG1wTU06T3JpZ2luYWxEb2N1bWVudElEPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpYUmVzb2x1dGlvbj4xNDQwMDAwLzEwMDAwPC90aWZmOlhSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpZUmVzb2x1dGlvbj4xNDQwMDAwLzEwMDAwPC90aWZmOllSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpSZXNvbHV0aW9uVW5pdD4yPC90aWZmOlJlc29sdXRpb25Vbml0PgogICAgICAgICA8ZXhpZjpDb2xvclNwYWNlPjY1NTM1PC9leGlmOkNvbG9yU3BhY2U+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lvbj4yMjI8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+MTIxPC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz6Ho0i4AAAAIGNIUk0AAG11AABzoAAA/N0AAINkAABw6AAA7GgAADA+AAAQkOTsmeoAACgrSURBVHja7J15fFT1uf+f75kzCzPZJgtLCATBVvS61PVnIQUqAq1oL/RqtRatP7dfJYJcEOOKKNJCoCyV5daAxSpXbX9evQpVRDYhFalV2+rVKgIhe0gmM0kmme2c7/3DJJ6cfLdz5swSyPf1Oq9ZGJKT88z7eZ7P8/2e74MwxjA4BsfgSO6QBi/B4BgcyR9o8LwBAGBAhv3BbGXgDnnQOVB/x+C3enCcceChBH8eG/yZaQ8hQuh0+D4iC+03CJ6FFx5ZFA0RxYDY4OcHR2oyGDTQoZQHgEEQ5zPIpLfEJgyIBuGzHJR4QcQDMVORBwBwpCiHTMKHNfDoDYQFtd5g9IvPtshC+Eg2wwPBVvIAAQ4ZfM0zFiYYCnEgHATQvG2RgSxGxHnSMhBMiXhpZys0gIATfS6aZhp5rv+/aaEttNMJaVJcEQEMmQSQpcd5dsKptlWqIx4LOhpwku49JAAeYgBHAwzr3lc1HhULaIczWf8ZAY73KPo7MEE+8NLRtImAKA2AAwpEJOAk3b9JBqIeCTqV8Igpn8EUgFMW/dIk4iEB4Fh2FomGolGN52B50fK0iXhmgEME2FivEcOQwDAQ7v5ZPY/6CKfqPsOKamei/kMmbAoUOxuJfCy4ECEC0nRgSqOfPACAkyjQSQKpJwiklqoOPqwzDikKnskAigAHHNsgAQBFdTrNroig01k/L6m2kpMMHUnHiQInCQApCp5KAE/VwKcSvCcJQDiD9J+VwIlqdSPFMZpWRxS7pRRAOUnA8XQcDSpJdyDCaz2EPCFOAk/VAajqANQ+YsL7IgWYgRr9RAsnPOAkAwAaKZDRDlUAQNK8blIAlFMEnEh04x2IAiDLaCTgSLCx4NNrhNM5/TSj45AAcJIgfCJpJg02RAGQlYmQKqQJyVbkFAGHOJFNf9gEIEQvz7zhFznHa+4GAPCfVfTMjTv/WKG7qLRIpz8Uzr+ztMbpAKDZtJIFGCmbAY5WF4FOW5GWdM4U6zIVWjqa9PQTJQA6MzqOBpqN854EANLyyTO++3+CsZWRlha39mQceXmdlW7p4cff3f0+RdORYFM476kE44oYlmVoUwZNwHRCPDqOVQRjSYk+P+uJJ56YHwgE5gEAZGVlbVi6dOnTAtFOZTyqDIkBFHvxpo1wssFLpI6zMR6Jz2ecPX7o/SPP/m30ZE0h66TtxUV1v6r657y9x788RYBOCxftOQ1CmrEBkjD/ZyF4Vug4nn2Z+nz+/Pnfc7vdG9rb2z3aE8nMzAy2t7fft3HjxkMMycDT65jjLIHhNBOyAgalADjESCdpkMna9z12h/2PU3/0a3T0+BVYUcT+AJsNYuOK//qTvW882BWNxgjwacGKMWCkpaE42QBaBJ6VOo4GGFWjT506dfjEiRO3t7S0jGKdZF5eXs3+/ftvfffddxsJ0Y6l1XEcmQpOVPRDcUKn/TcpDh1Hg07W/ZvthR/+2135J2pvUUMhU/vFSC6XWj96+Ev/d9drzzHAUjQAGoFP5RhVC2Lc6Wec4KUKOAkAJI/HY3/ggQeeaW5unqCqqpjtJAny8/PfW7ly5dzOzk7FQHEs7QBEFkY5mmFEdBwpusna109MmlYyIRhbGvW1uqwQM/Zcb2iPA69c8d7+93SRTtFFvRglCoroP1Vgnsl09DMJHi+tjEfHCRXIlixZMr+9vf3uSCRiynk6HA7V7XY/u3z58o0M8BQDQBrVf3Gnn8jiKCeSVpKA0x9yD3Azzh4/4v7CcRui1bXDEjKfUjTy1PLqzxcfOPFVkw4yLYAxSkQUAZClK+KKfibAQwacKBiIcKjbbohSALMBgHTvvfdO8Xg8v+7o6Bhihe0yMjK6fD7fwxUVFQc011dhwKeNkoqADmStjokr+hkBDxnQcqJpJQk4GwDIbrvD8f+vum4NOnr8YiyYipgWOZIEsXFj/n7D3jceC8WiUR1sMQqQNABF0h2W9sMJAg+ZiHJGKtFa+yJtFjN16tTCCRMmPO/z+UYkwn65ubkN+/fvv/PgwYP1FOgUDWiKoEQQzVZMLb5GcUAnklbaBKKcrH988Zrr53qPVd+ohsNJXXIvOZ24oXjEa7ftem2rxlhRHXQ8CHkVUNWgMamGNAAeEohyohEOAX+u1QYAktvttpeVlW1pbm6+Qk2w85QkCXJzcz8oLy+/t6urKypQkVYMwKeCOe2HzeT7RqCzUYATjnAAIC+bNG3ylR3Rx6KtfiekcNi9OeE9DrxmxeEDlZToZzQC6gFUrIBPEDwR6MxodMSaZ12yZMnitra2W6PRaFI3Tbbb7arH4/nP5cuXr2dUrUkQ4ji0umH4RG7RN7vqhAVaHx03a/z5o0sLin8TraktgDQatqLCltW1Rx/afeyLWh10MYr+ixlMQUW9qVnwzEInVJkkgTdv3ryr3W53eUdHhyuVtsvIyAj5fL4lFRUV+4A9PytSiIm3WIatmjjlpRw2UmVSA5sMALY8t2fI8yXT16Kvqi5MtI6LR/8pY0d/+rODux4LhLpCHABjlIoob/5PBRMTuBzwzEBHm/S28YC75pprii+99NLnfD7fsHSyn9frbaqsrPzFvn37TpoAUAH2ZLxp+JBgtBMpoIjoN3vP65euuX5+zrHqG5Kt4+LRf42jR7z+87dfqyDAF+PoQcUAgLTCSz8DGgTPjEbXF0v66fX8/HznvHnztjY3N1+qpqnzlCQJ8vLyPl63bl2p3+8PgfhKJVIxxqxWFwKPtSQIUTwgK53sPVZPvWb6Ra3Bh6KtAScMwCHnZEfey7Cvf/zgO/soAJKAVDjRTwH67SxUAzLAE81cSFM+LPv2AW/JkiUPtrW1zUm2jotT/728fPnyNUBfFEGCkaUFRVPPPs954LEMZKNAR0or5Rv/5Ttn3eUt3BCprcuH02DII0f41jeeeHDnl5+d1EAWZcAXo8CnCBrSDHjxQEddK7tw4cKZsiwvDwaDA9J5ejyecEdHx7JNmza9RbGHSCQ0Ax8XPNLEOM8wdlKEy3d73NtLZmxSvzpxfrrquHj0Hx47+vObD+56wP+1/osKQBgVNChrot0IeKzMRT/5zZz+mTVr1lkXXHDB730+39DTwX5er7f5yJEjd7/99tsngL5Ol5eG0nY0YG64hASjHQk67RIv7dEDoP2/Zv6kzHP0xI8Vk0uDBsqQHA7sG1O08+Zd//W0Bjjao/YgeVVesaXXgBTwRKIdaxlfv3WzBQUFQ+bNm/f8qVOnvqOeZs6zW//9Y/369Xe3traGKMUxVUCnixbJsCh4oullD3T2DdN/dO05TYEl0UDAAWfQsGdnR/6S7Vzz8IG3d3eDpoUuSoDPaNppFDztc9G7QyRtNfqJJ55Y2tra+tOBouPi0X8ZGRmvPPXUU78E8mJ5leIsecsEiVEPMdJMWoWLBJ0dAOR7r5h4zixH1pZIbX0enMHDXji89dlAw6IXP/n4qA46UvRjeVJSpdMoeGYina2srGwWxnjFQNVxZofb7Y5EIpGl69ev3wnm5miFIh8vLSFFO1mv68bnD83YcEnJC9Gjx88f7FL6DQhobPHndx7ZP6+mzd8BAJFu4CIUvRczEPV44PF0HW11kXzrrbeOLy4u3u7z+QrOZPt5vd6WTz/99M5XX331CyAvnOetTmLqPRZ4NF3XL73cce6Vn0km749LhN4CAFAjkfSYH3S58DWfHZ7UDVzEYNpJ21aQBp5otOsH3fjx4z0333zzK01NTRcNOs9vrmlBQcEnFRUVP6+pqQly7EWacKdGPRoshlKUw52dUkOKjYUQgvCYUdU3Vv1jyY1V/1gSHjOqOtWNPIIYoLqrC+kclb54Qbp5lLZDtunLw8topk+f/kVjY2NaQCfLMpZlOeUngjGGpqam86+//vq/AHvfHyM7pfXRc0D5MOkmyH7pJwaArzCG91UV2lJwudCIYe2/UgKrZ+97Y30g1NUVCHV1zt73xroVSqAcjRjWnuzziQBAHcbg+6Yeop/fpBmP1AsCRAwp6ECpTvT48eNSR0dHyp2n1+s9+txzz/3sueee+5nX6/0y1c4zEolAc3Mzc7MtjtMk/gEywzsCkO88JsEH0B1//4FV8GCAcyUJEq3KbVlZsbccystr/7zrA1I4P1B1rPpA1bFHFl5ecukPItLNsbY2eyLPRwGAZowhQjhVzaF0P6oUj6nt46C1AzYAm4h+19sSfD4f+P1+KCgoAKczuTWV7Oxs/4EDB5ZUVlZW99jvqaeeWlxSUjJq8uTJT/r9fm8yz0dRFOjs7ATN9IkN+u44LkHfzY31B2Y8UvfVJHXoYZWh+6ZYAPCBqsJQhGAsQv0/YIGOqyosqPx/+3b+EcgLWEHzRUVr/nLoz2sADldcde1No2qbJlmt/zAAtGIMQUb2pClHawHUX0tV4+iwzohmUkte9NPbGFRVhcbGRrDb7TB06FCw2WwJ/YK73e7oqVOnNmzcuHE/ScceOnTo+KFDh2657bbbJhcUFNzX2dmZ0CkqjDEEg0FQ+m+iJVHsxWugQ3SesoCnBKDvBiwR0tXe0YQxNGEMYxGC4QjFLVaQJEGoeGTVnEO71gf/GYkIVgB7z/muvTt+n+FwvvRCyYzFzqqasVaspOnAAK18LkgLDyTGdVUJtsAmIGRtjy6xbBiNRqG2thY8Hg/k5uZa3gbMbrdju93+5qpVqzYDf9IZbdu2bQ8A7H3ggQdKI5HIzGg0ankO2tXVBZFIhGVDTHGYmGIzarYiC4pxAPbkK3McwxhOYgzjkQTZJi8XKhze9mTVZ0+/t/fDemAvZKWCBwBSRyQcm7X39WWTiscWPlJ0zmKlrj7HzPmEAeAUxqIU2EBwN2zKdY9XOSMQ61vQv0AUDEIwGASv1wuZmZnxZyuSBNnZ2f9ct27dgx0dHRGB8nuf72N5efn6zMzMzQsWLFjt9/vPtWIlTSQSga6uLu6pwzdVflXwmmJWCmTWaMLg9ei/T7r133hJAtG7JG052dGdtuiLv6l86wOgT2SS5lH0f0OfgtC7Vceq36069u+Lr5x05dVhdLviDwjpP6UbuKjB7xunkikMQhzpJmvKiGvD1tZWCAQCkJ+fDy6XuXtcc3JyfHv27Hn48OHD1UDfcg9znCdqb29Xli1bNm/ixImjpkyZstrv95tasKEoCgSDQRCs5NIa5ehTTtq1x0bAE2kWaWj+LggAf1VVKACAcZJE1X+S04m/HJ57aN7+N18F9op/PXjasA+Eiqw27ZNXHX63chXA+89Mvfbm0bWnptLuDxTQcSKpJq/TkZE+cWYLLTRbcoeqqtDU1AR2ux0KCgpAlsVab3g8nkhDQ8NvNm7ceADYk840x0lyoKiysvJEZWXlT+64446r8vLyFgeDQSH9x9BxIuBJDOiQkVQznp3GJLNfkFMAcEpV4SyEYIRG/yFJgmBx4YmfH3z7meDnkZ47vkkLjKNAX75D8pak5VEKfL36Bt+9Z8f2DIfzlee/N2Oh60TNt7T6T1DHmTEaq6cfcGyDBaOdKHzCIxqNQl1dHbjdbsjLy6PqP7vdjm02247y8vItILbQWBWJePrruXXr1ncAYF9ZWdnccDg8m6X/ODrOTMQThY5aXBGJdLS7lU2P4xhDNcZwDpIgu3BY2yPHPtny0d4P9Xtcslb56yOfCHjaObVebdERCePZe14vv7KoeMTjxecuCtU1ZBvQcaLg0bZYQHFGPhRHBDQ1Ojs7obOzs5/+69Zxn61du3ZpMBgMQ98FxrS7MsyAp81eYOXKlRszMzO3LliwYKXf7z9fq/8EdZyI5JKAPN9qxF5IFvSUrF7jcadEMQD4FKvw4l8PVhwLd7YwgGPBp/egtC9+T6STKcZGh2uq6pc6Hatvx+5lVs2AUEADzjU2O5cHwN5RwDL49Ppv6NChvjfffHPpxx9/XAfsHdh4C42pBTJdOd+m+aytvb09tGzZsoVXXHFF0bRp01a1tLTkGdBxIjYUaaaJeLaTTXhO0l3LFg2kT0diBOgiQF/hrxJ0Au0OC1J07P37EUIKWPiHcarDItccxwmcqDM1NXr031tvvbWktra2kQEZrziGOTpdr9WJt04dOXKkVpblRWPHjt1msQ1FO9oCobpJnEA3stWf0dAq+pepBOhinOhHWrBKSzVZwPUxsIRQzGLwaNMGrOwBxQGg0YKZVYPUn04PncjtUJiT6umjXb/PS5Jk9V27vN4SwtdRROPRjAUJMJpKEOExQuQjgRcTSDW1KSbJWL1wJCHisV6bdWxIwFuLOFmrbciKfirBabKmhFTou2KK1mIZIYTUBNgQcZwkz5khAMCyQQ9p5BfEG/EURvTTaz0jEY9k2H7pn2S90UBg6gAlAISkRrzuLzupcw8v6qkUqUDKGrRRzkYDJEHgiWpyUxHPigqaWfC0xmJtm6cvsNAm0fUGUymRTg9eLEFf+KRcy1TYT5dqslpnsXpOsCIe1qWYJDB6lnSpCUg1LbOjkQl0I/8Wr9FoW66xWmjFBIorKkHXSt3/V9L+ToSkRHnLVFzX5BGNkL5bK8uW+oO2y5q2SCHxIl33z0p0xItryCn2jvrfhDlpCs1LkiqbJO1m072n6PRf74EQqAn7K5N7zXm7hSfKedJ2X1aA3gabl2piDXx6IFRttAMAnKCIx7t2SMSORqcTUIKhJFXEaB1fRHboop2zAv2XkfX5Alis8YxAkAgQURIdKubYETNsRtruQh9tMMGWSAedmsBU05LrK0MaDfT1PB6vLxmv+aNCMBrWVd0QcJYqdZ/LQB2pdp60Triqweck8PT3LaqaSqfKqYym2nnitARP59G0uyizelWzHrU6TgucxPmZp9euranTeLRDFYyM2u8E6Uuu6ooufZ3n1+eSlkUpOU3tR9vEldSLmtefGnE+y2sGOTistSc2+B6Y/A6ktS2lwe/E4EiS82Q5SFZ3HUzJhrg/IwER77QHj7cgmzZ5ybqLW/T/D47BkfAhpyl0oBPTtPug9Dck9szxSEBeuUJ6pO20PDisdZ5GlsxhTvFCaNkdxhgNgieUm2AWHKw9X/RzO6y7E3h7niAAQF+fy2AATACERrIWHsgi7w0Y8DAnbxf9rFkD8RpraPel1FazbJyUmtr3DQh7oqgYSwnxLeau5YAp+nRHGd6hrTJrsxVaIYV2KxXzjvAERDycSPBSZ3Qs1skG+padbTpweffjyQwAew+ME5Zu4iRcc8zw+Mlwnqz0Xv9cm63on7PkgshzlK7OUxb8Jdjgv8Ub8WjRqGe7BtJcT8/qBRZ4+maapL7tX29Lj1UJrNuKl1WdS8Z1xUl0qLx+Gz1b5GHoez+dViaQzo+1oXLPY5/PqKqaLK1u+PrKFv4iK85ef0FlYPeM00OHgH9bkBY2YvtoAJBVjOUkGCcZGYWIh06E85Qo0cgG9MXO+j0paakmAvJ2idrXKMHgYYGoh1nax+gvoM2dmB4SABQhBE9eMvHeSwtHDQV6A8x+7Z41h2zwuZ0G35Qx40Y8ml+8JNN6IzH73SUIhFRqPF72orcxrR2c/mfIjJ8jfSMXLNXp2Er7SHHCFjd4QwHBaIRAAoD2+sbsua78R5676rp/9zgcTgZ0pMNh8Ln+kLOdLtcb0/51WZkte71S1+DN6d56fkj8UgGD8QnkREJo+c9ECEFWVhZcf/31Ky6++OJCgbSQBp+Nc4hAJ5WUlBRNnDhxQwKar1iSucgMQY7j0CnckQUAeQj15pE9I6aqEDt2ctyms77zm9aigj0L9uzcTkkvSSmIDcQ3O+oTPbdNn3X38JP116lHq/osd7ADQD4CCAECv/EdpLXXirT4l7VKI1GFEMuXV3k8HrDb7YAxhubm5twLL7zwt9OmTftk06ZND3V0dHD3RtFJBQnYd6AjIPdstwGALTs727VgwYKnfT7fRX6/H1wuFzgcDgiFQhCNRhPhPE1FQtkEuaRtt4WHEwBGdN/sxtrUJBQOoyFf1Vy9/TuTJv/FhbasO3zgEAM4o9v79YL35KRp37+yPbIg9uUJB2tltAsAhiMEHQAQwNjoKmqS0YxcQ2zg9yDG78dWAu10OsHtdoOqqn22z1MUBerq6s6/6aabXs/MzHx17dq1mxiAK4SKtAT8zY76Rc5HHnlkYTAYvLG7n903xpckcLvdEIvFIBQKGd1BGjiwgUEJRmzTpTUcFviFwt5SAoCR3SmlkS9thz9gPw/gnpcm/uCnm2uPPnXgxNFqQpQzvKHttd8+b9T8ocUrY9X1uUb2eMgAADdC0IYxGOh4ybrlRdSDWpUexh3xbDYbZGZmAsYYWE1DQqEQCoVCPy4tLZ3Z2dlZ/rvf/W4PpZAigfnt/WylpaU/8Hg8S/x+PzOvlGUZMjIyIBKJQCgUMrPXpsgibcs0Hu22DpWRAvYZw7p1nNm96TAABGrrc26VMldvn/qj5ZlOl1uj2RzdgVToyHEN8fxp2qx1pYqrIlZbn2tWGBvUf6SqLAnEuIwpkL5iQe9N1XHZ2dm90ImOQCDgjMVijy1atOiVkpKSMZRKsl1X6GI9twOAPH369LGPPvroLgBYHgwGhcWcw+GAzMxMo803RW53Er3+vVuYIwNzE1iXclItkA0AuQQdZ3bEVBU6vqo6++niC37fOXrEO3PfeX0LGGhasn367Hvyqmp/qB49Ycmy9R79FwYErWz9pzLgY2UO8Qh5ffbCK5gJ6zgzuzJjjKGxsTFv3LhxL0ycOPHTzZs3z29rawvpop3QFu5er9d53333PdPS0nJBa2ur6WKQQf2nCsCGecCxNJ5I5GOlBMI6zuwIRyLIdrRq2n9e9L0pH3nsz6z6895DwGjTtbRk6qQJ7dF7Y18etyfiDlcnX/+xtilXwbpIhwzYUwg6mo4zOxRFgdra2n+54YYb3snNzX1t1apVa6D/3eNU8B599NEHOjo6fnzq1ClLpgp69J+iKNDV1cXSf6QbpbHJKjQWXTLGSjf7NIkuNKHjzI72QJv9WwEofWnCjDlbm6p+tfvo59Xac5z5rXOL5g8d/ahS25gTS8L59Oi/9m79h/t6S5E+AVbNjdK0OjBsaUrHmXae4TCqr6+fXVpaOjMcDq/csmXLblaxae7cudM8Hs+jra2tCWnFbLPZePpPxGGyIBRaMoYFq3G94A0DBENQ4ja6YOq/uobsG5FrxW3fv+74vPf3rkAAeNuVUx+UT1SPVeoaIZlDAoBshMADAH4M0PX11WC1paJNM1gxj6dv38zahqE3BcvKygKEkCURTkD/ORBCjy1cuLD0448/Xrh3794T2vObPn36mMsvv3y93+/P7ezsTPj5OBwOsNvtEA6HIRKJaK8BSy6IwkcET2sk0gZBEi3ifXvIEDUUCkmp3KhEwRg6jp88a23Ref8xDADU4ydTevux3K3/oq4h+l21eH3bVU5qaDb1JMGn3X8mbh1n2jtgDE1NTblFRUXbysrKPq+oqFiIEILS0tI1Pp9vvN/vT6rtKPqPFvFUMDFdIwmkl6qumNJvV6/HGr6clHf2Wf9jQ6m/BSoSiSA1AY3pzRgPjy0+enf1pzcAvbkKbYMfFazdO4RbkRs2bJgqy3JSgeuXy6kq1NbWjp89e/bOOXPm7GxpaRmfyvPp0X9er5e0NaFolZOaGfHK0aQvQh/wTvp9Xde/89rtuzOkn+eOHOE7028flQqHBTbJ4YUz9/z3/Y0d7V0gtgcoydEZqWLygANCRbr32L1790WjR4/+uyRJaeE8Y7FYWjjPgoKC//nDH/4wRUAuGFrLTLstn7YKXNtJVb9usmdOzfH4pOkzxreFFrb5A46kf+nh64n6lKSXWVnR/UNQxS8PHzgAX/d2iGgetQev4xFvS3Pck6JpvyTQf/9J0u05+vWSfWw6a9as8ePGjdva1NSUn6po06MzUzlycnJ8H3zwwfxdu3YdBXrPDtIu5grQ52x7gWTth6EFj7ZqnAafHQAcFTNmz7Mfr7kmHImg0xk8yeHAdaOG7739nde36YAjwUeCLgb8Bh6i4AGwb0SlLVTuM6E9d+7caxFCTwQCyXeeqQTP7XZH/H5/eUVFxS5gN80RabBJ0oHAA4+0Lk5/S4Z2RYEDCHcAZLuGuP+jZPqvOo+dPCemqqcVeEiSIDqm6KubD+5a0REJd0H/zrVRCoBa70nqFccqvhgBDwlGPW3ks2tBLCsre6i5ufnfwuGwdDqDZ7fbscvlen3FihXrCBFN+zoK9DZjikDVkwieVvdJwFmUCuz74/ocV487Z/RdI856KlBT78WnAXhS4fDAL2u+KH+36lgt9O9UyzpobaRpFU9Vo7PBJHi0qMfKZHphzM7OHnLPPff8tr6+/nyTC4zTFjxJkiAnJ+ezdevWLWhvbw8DuYcfDUK9zRQQnGpgtQRmRT2RtJP4evGEqyZf3Bmb254g/Zdo8Gw52dG3Heq2X79/8DDQ20NHOa9jAh5TBfbidBJ4ep3H2r6QBJ9M0X42AJCnTJky5rLLLtvU2NiYUP2XLPBycnJa9u/ff39lZeVJoDfOJGm5GAM62iS7tuACIuCx9J4E7LvDSdFQBgB5w9U/uj2zuuGHoXAYDQTwJKcTnxhZsPcXe3a8xBDbpKhGinIxILchVgS8pQh4IlGPt6EUbU8a+Y477pjucrkeDgQCzoEInsfjiTQ3N69+9tln9wG5+zDvOa+TLXdindb5ROJUOUnRj7Z/CW2VuZzpdLk2l8xYEj5+crxV+s9q8JAkQWhM0Ze3HNy1tiMSDgO9Iy0JQlonW1KUY1UxSZPqouABI+qR4OtxprQtFnrfu//+++/z+/03hEIhNBDAs9vt2G63v7Zq1arNQG/5FgN6r3aSs+StwQUj4LH2QxRJO20CEPYe3yseN7K06NuPt9XW5eI0Ag+NHO5/8sRnq96rqWrU5fgsqGjVL7PpJXWluwB48UY+7aZTJBClrKws19y5c9fV19dfZJX+sxq8bh33ybp168ra29sjjGokCTRWT0bTS8h44NF0go1hMBnomxQxj3uvKLlyQtR2b3ur35FK8GRvTuS/IbR144eHP9TBEhUoMdNKzqyVK4qILhAEjxX1aJvA2jjZDGkut8+/T5gwYdR3v/vdp5uamgri1X9WgpeTk9O8e/fuxUeOHKkFsR7sMeA3P+2xF0kaCK275TXZQwKVThGdQCxV046nr75uTlZN00wzKUw84ElOJz5WmP/O3L07/6DxeKSKFg2wKEOQiywX01cwmfuwCILHymBIuzPT4KM97/PeLbfcMjk7O5t7N3iiwcvIyAjX1taufOGFFw4RoOF1FqY9J0kC3vIx4IFHA9FIqkKKfhIl/aQBaAMA2SnLji2TZz4SOX7yPCP6zwx4SJKgc8yof/50/461EUXRz63x4KN9TgXx9ZkiKYr+uQh48cInUYBjbdsnAYBt0aJFpW1tbTd2dXWhZILXreNeWbVqVYUAcConqrFaRRuFThg8WqoiAp9opYwGYO97lxcVD7v/rPMeD1TX5eMEgIdGFvoeOfb38g/rak7pYOFBpwikkyLr+1iT5MxV7gzwRKQDDT6SljcTCSWn02lfsGDB2oaGhouN6D8z4HXruL+Vl5c/GA6HYzpYFIPP9ekkyWYiW3ZQnaZID2cRo9kE5oh4qajMeG2be/nEy7+n2Oe3+VqdVoAn53rDr+KuZzZ/ePhjAnAiEY8FGm+ORzFoNCvAA0H4SBCydmzmgnjZZZeNmDJlyobGxsZhIvrPKHher7dp586diz766KMGQoQSBU2lRDhan3ZDqSUPvHjgo23XzdvIVObowT7Rcc3Ua2/Krzv1r11dIckMeJLLpX45PPdP8/b96VUKLDFCQYU3ocpKV+L1lETDCYBnFj5W9JPiAFCaM2dOidfrXdra2uqyAryMjIxQTU3N8u3btx+mAGMWONVElBOGjgaZEfhECy+SyQhI3MbbKcv2Ld+/9uHosZMXRnUpDA08ZLNB55hRn/503441ESXGi1S0dFI0wvEMSCugGNr0SAC8eODjAYgY4PWDTvv+woUL7+zo6Lils7NTMgOew+FQbTbbi6tXr95GuMaKAHykf8dxAGcIOqPg6YGjTbTzJmttggDSli/1TvBeOnJ0ftm4C5YFTtYMUxngSaNHNj38xd+e+rC+poVipJhAuskDTmRDI97EuKFdxQTBE4WPp+NFimosCPt8xuVyyQsWLPh1Q0PD5bFYTAg8SZLA6/V+sHLlyofC4TDL0SmcR1Ww2GVEhxvaCxUJGgsSkLLQqmMyY9JWJqyukO65fOIlk7FzcaC5ZYgWPHteXtfr0LXm6Q/+/DfNF11/xHRzOLRJ1BinCmZlagIixjMAntE5WyQIIQ1AxIh4fT53ySWXDJ06dermhoaGwp6/hwRebm5u/Y4dO+Z99NFHzZRrrAikm9hAsUvUdjTQMJiAy4roJ1r9ZJWmaQ0qSKkMWj/tuptzq5tuKkAITo4c+vLd77z+su4C6Q2mcCZVY5zSs5lqZVxRLg7wWMU0kd7ivEaTNoPFmD7/Z86cOVfm5eX9sqWlxa0FLzMzs7O2tvax559//n3N9dPbU5sqihZLFEbRhBfheE4Tm4Uq3uhH034iawVpC7FpwJH6sGnPSb99BS01Ya1eEIGOBDdLywHE2XnGBHgic7esfuISsO94EC3EUFsqL1q06K729vY7PR4POJ3OrStWrNhKsSMWsKkKYrqbtles4WkCUdsZndy0EkCRCihvvkhvQFrjedaeoEbmdXi39icFuDjBMxr9RKcfaD3KeQdi2I/Xx4MFHiv9N5JWglVRrs90lkFjYYrR9C2Re060pwOM9lHbDVS/ZWDPVnM23aPS/VyheE6S8Wjg0YzFEuC8RbGii5tT1RVWxJa0airSPdd3bdU/qtC3v7nKAU6iQC0CHmaAlZbAmQWPZBAegEAwHMlgmAKhtu9dzz77EiXasRrOk9IJXlXMrI5LWJRLEICI8BoL2pvlTFUGgLSUFTjOEzgposqZ9KbugwLGOzaZtp1soccEE55T79Vo3lEV9JgS55xUA55SVMcNVOBEoh9pg2NMiEz6z0sEp6qPiNomlKxoB4JRj/ZoVsdZHuWsAs8KAPXvk7wlSzeQvKaI0US8ZFrouDRMP4ECoErIaPTRTv+oCOg7HngqoXjGulXHyNQOTpTtErE5iej0g6hgRxQtR0sxeWkK5kQv0a26U67j4iyuJLsAw3uPBZ1I1KPZKGU6LtERL9H6j+Q1eZUwHnislmMiwJ1OUS4Z+k9vLywAHSvigUAEU4E9D5dwHZfsiBfv9APPO/K8JS/tFTVU2gOXhIhnNPoBxxnyopzRiCcCYMp0XLIjnlX6T9IJc6TTB0Cpghkxmkp4pK00ORMiXKL0H206Agykmax0EwYKcMmKePHqPxJcIp5SNE1hpR+07RfSZj4uyRHPCv0HAsCZ7WorYuOUA5cq8IyknzzjGUlRwIBReEuD0ibKpRg8oNgLOAACQxoYkQvAcIi8Bp84lXZLFXjxAijymgcfNvg6LdPKNAGPFf14WtBIpBOJfLxUEqeL7dKhlZ0RAGmQmU1TWOlj2uu4NALPDIC8CMerC/AiWFoCl07giQJI+4xRj4k5BR5Id+DSGDxRiIwAByYBTEvg0hE8kfNBFp+/UcOkVbUyjcETcZRW2BHH8d4geBacF7LAYAMGuAEEnoh9rHaeaW83gMTP41lxMVGKwDgd5+LS0Z74TLSbPMCMlqhIPQhZau1p1K4D3l4oVQ3mB8fgOJOHNHgJBsfgGARvcAyOM2L87wC0bvmlwr+fFQAAAABJRU5ErkJggg==)",position:"absolute",left:"25px",top:"25px",width:"111px",height:"121px"}),(e=document.createElement("style")).type="text/css",e.innerHTML="#developer-widget.developer-network-off { background-position: -113px -1px; } ",document.getElementsByTagName("head")[0].appendChild(e),this._rootWidget.addEventListener("networkstatuschange",function(e){e.networkStatus?(t.removeClass("developer-network-off"),t.addClass("developer-network-on")):(t.removeClass("developer-network-on"),t.addClass("developer-network-off"))})}}),define("rofl/devices/misc/setcorrectdate",["rofl/bootloader","antie/runtimecontext","rofl/lib/promise","rofl/lib/date"],function(e,s,t,o){"use strict";var a="http://time.24i.com",i=function(){return new t(function(t){var e,i=s.getCurrentApplication().getConfiguration(),n=s.getDevice(),r=i.timecheck||{};r.disabled?t():(e=r.endpoint||a,n.loadURL(e,{onLoad:function(e){o.setValues(e),t()},onError:function(){n.getLogger().warn('Something went wrong with the request to: "'+e+'". Contact someone from 24i support.'),n.getLogger().error(arguments),t()}}))})};return e.register(i),{setCorrectDate:i,TIMESERVER_ENDPOINT:a}}),define("rofl/devices/net/connectivity/xboxone",["antie/runtimecontext","antie/devices/browserdevice","rofl/events/broadcastevent"],function(i,e,n){"use strict";var r=null,s=null,t=function(){var e,t=Windows.Networking.Connectivity.NetworkConnectivityLevel;switch(null===r&&(r=i.getCurrentApplication()),Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile().getNetworkConnectivityLevel()){case t.internetAccess:e=!0;break;case t.none:case t.localAccess:case t.constrainedInternetAccess:default:e=!1}s!==e&&(s=e,r.broadcastEvent(new n("networkstatuschange",{networkStatus:e})))};e.prototype.activateNetworkCheck=function(){t(),Windows.Networking.Connectivity.NetworkInformation.onnetworkstatuschanged=t},e.prototype.deactivateNetworkCheck=function(){Windows.Networking.Connectivity.NetworkInformation.onnetworkstatuschanged=null}}),define("rofl/devices/netcast",["antie/devices/browserdevice"],function(e){"use strict";return e.extend({isPointerSupported:function(){return!0},isPointerActive:function(){try{return"on"===window.NetCastGetMouseOnOff()}catch(e){return!0}},hideCursor:function(){window.NetCastMouseOff(0)},showCursor:function(){window.NetCastMouseOn()}})}),define("rofl/devices/nettvdevice",["rofl/devices/cehtmldevice"],function(e){"use strict";return e.extend({supportsUHD:function(){return"undefined"!=typeof SmartTvA_API&&SmartTvA_API.hasCapability("UHD")}})}),define("rofl/devices/network",["antie/devices/device"],function(e){"use strict";e.NETWORK_TYPE_UNKNOWN=0,e.NETWORK_TYPE_LAN=1,e.NETWORK_TYPE_WIFI=2,e.NETWORK_APPLY_STATUS_UNINITIALIZED=0,e.NETWORK_APPLY_STATUS_PENDING=1,e.NETWORK_APPLY_STATUS_SUCCESS=2,e.NETWORK_APPLY_STATUS_ERROR=3,e.NETWORK_APPLY_STATUS_TERMINATED=4,e.prototype.getNetworkInterfaces=function(){return{}},e.prototype.getActiveNetworkInterface=function(){return!1},e.prototype.setActiveNetworkInterface=function(e){return!1},e.prototype.getNetworkInterfaceIsWifi=function(e){return!1},e.prototype.getWifiNetworks=function(e){return{}},e.prototype.getIPAddress=function(){return!1},e.prototype.getMacAddress=function(){return!1},e.prototype.getNetmaskAddress=function(){return!1},e.prototype.getGatewayAddress=function(){return!1},e.prototype.getDNSAddresses=function(){return[]},e.prototype.setNetworkSSID=function(e,t){return!1},e.prototype.setNetworkPassword=function(e,t){return!1},e.prototype.applyNetworkConfiguration=function(e,t){return!1},e.prototype.hasNetworkConnection=function(){return!0},e.prototype.setNetworkUseDHCP=function(e,t){return!1},e.prototype.getNetworkUseDHCP=function(){return!1}}),define("rofl/devices/network/abox",["antie/devices/device","rofl/lib/promise"],function(u,d){"use strict";var h;window.tv2_stb_common&&(h=new window.tv2_stb_common),u.prototype.getNetworkInterfaces=function(){var e,t,i,n;if(void 0===h)return{};for(e=h.getNetworkInterfaceCount(),t={},i=0;i<e;i++){switch(h.getNetworkInterfaceType(i)){case 1:n=u.NETWORK_TYPE_LAN;break;case 2:n=u.NETWORK_TYPE_WIFI;break;default:n=u.NETWORK_TYPE_UNKNOWN}t[i]=n}return t},u.prototype.getActiveNetworkInterface=function(){return h.getNetworkActiveIntf()},u.prototype.setActiveNetworkInterface=function(e){return h.activateNetworkInterface(e)},u.prototype.getNetworkInterfaceIsWifi=function(e){return h.getNetworkInterfaceType(e)===u.NETWORK_TYPE_WIFI},u.prototype.getWifiNetworks=function(e){var i,n,r,s;return h.startNetworkWirelessScan(e),d(function(e,t){n=setInterval(function(){if(2===h.getNetworkWirelessScanStatus()){for(i=h.getNetworkWirelessScanCount(),r=[],s=0;s<i;s++)r.push({ssid:h.getNetworkWirelessScanItemSSID(s),strength:h.getNetworkWirelessScanItemSignalStrength(s),encrypted:1<h.getNetworkWirelessScanItemEncryptionType(s)});e(r)}3!==h.getNetworkWirelessScanStatus()&&4!==h.getNetworkWirelessScanStatus()||(t(),clearInterval(n))},1e3)})},u.prototype.getIPAddress=function(){return h.getNetworkInterfaceIP(this.getActiveNetworkInterface())},u.prototype.getMacAddress=function(){return h.getNetworkInterfaceMacaddress(this.getActiveNetworkInterface())},u.prototype.getNetmaskAddress=function(){return h.getNetworkInterfaceNetmask(this.getActiveNetworkInterface())},u.prototype.getGatewayAddress=function(){return h.getNetworkInterfaceGateway(this.getActiveNetworkInterface())},u.prototype.getDNSAddresses=function(){var e=this.getActiveNetworkInterface();return[h.getNetworkInterfaceDNS1(e),h.getNetworkInterfaceDNS2(e)]},u.prototype.setNetworkSSID=function(e,t){h.setNetworkInterfaceSSID(e,t)},u.prototype.setNetworkPassword=function(e,t){return h.setNetworkInterfacePassword(e,t)},u.prototype.applyNetworkConfiguration=function(r,e){var t,i,n,s,o,a,l,c;return t=void 0!==(e=void 0!==e?e:{}).ip?e.ip:h.getNetworkInterfaceIP(r),i=void 0!==e.netmask?e.netmask:h.getNetworkInterfaceNetmask(r),n=void 0!==e.router?e.router:h.getNetworkInterfaceGateway(r),s=void 0!==e.dns1?e.dns1:h.getNetworkInterfaceDNS1(r),o=void 0!==e.dns2?e.dns2:h.getNetworkInterfaceDNS2(r),a=void 0!==e.dhcp?e.dhcp:h.getNetworkInterfaceDHCPStatus(r),l=void 0!==e.ssid?e.ssid:h.getNetworkInterfaceSSID(r),c=void 0!==e.password?e.password:h.getNetworkInterfacePassword(r),h.setNetworkInterfaceDHCPStatus(r,a),h.setNetworkInterfaceIP(r,t),h.setNetworkInterfaceNetmask(r,i),h.setNetworkInterfaceGateway(r,n),h.setNetworkInterfaceDNS1(r,s),h.setNetworkInterfaceDNS2(r,o),this.getNetworkInterfaceIsWifi(r)&&(h.setNetworkInterfaceSSID(r,l),h.setNetworkInterfacePassword(r,c)),h.startApplyNetworkConfiguration(r),d(function(t,i){var n=setInterval(function(){var e=h.getNetworkConfigurationApplyStatus();e===u.NETWORK_APPLY_STATUS_SUCCESS&&(h.activateNetworkInterface(r),t(),clearInterval(n)),e===u.NETWORK_APPLY_STATUS_ERROR&&(i("An error occurred"),clearInterval(n)),e===u.NETWORK_APPLY_STATUS_TERMINATED&&(i("Applying configuration was terminated"),clearInterval(n))},1e3)})},u.prototype.hasNetworkConnection=function(i){var n=navigator.onLine,r=this.getActiveNetworkInterface(),s=this,o=0,a=function(e,t){var i=setTimeout(t,500);s.loadURL(window.location.href+"?rand="+Math.floor(65536*(1+Math.random())),{method:"HEAD",onLoad:function(){clearTimeout(i),e()},onError:function(){clearTimeout(i),3===++o?t():a(e,t)}})};return d(function(e,t){h||e(),0===h.getNetworkInterfaceConnectedStatus(r)&&t(),!0!==i&&n?e():a(e,t)})},u.prototype.setNetworkUseDHCP=function(e,t){h.setNetworkInterfaceDHCPStatus(e,t)},u.prototype.getNetworkUseDHCP=function(){return!!h.getNetworkInterfaceDHCPStatus(this.getActiveNetworkInterface())}}),define("rofl/devices/oipfbrowserdevice",["rofl/devices/browserdevice"],function(e){"use strict";return e.extend({init:function(e){this._super(e),this.activateNetworkCheck()}})}),define("rofl/devices/playstation",["rofl/devices/ps3base"],function(e){"use strict";var i=/(<\/[a-zA-Z]+>)\s/g;return e.extend({setElementContent:function(e,t){"number"!=typeof t&&t&&(t=t.replace(i," $&")),e.innerHTML=t},setElementSize:function(e,t){void 0!==t.width&&(e.style.width=t.width+"px",e.width=t.width),void 0!==t.height&&(e.style.height=t.height+"px",e.height=t.height)},insertChildElementBefore:function(e,t,i){null!==t.parentNode&&t.parentNode.removeChild(t),this._super(e,t,i)},insertChildElementAt:function(e,t,i){null!==t.parentNode&&t.parentNode.removeChild(t),this._super(e,t,i)}})}),define("rofl/devices/ps3base",["antie/devices/ps3base","antie/events/networkstatuschangeevent","rofl/events/broadcastevent","rofl/events/keyevent"],function(e,n,r,s){"use strict";return e.extend({init:function(){var i=this;this._super.apply(this,arguments),this.addNativeEventListener("networkStatusChange",function(e){var t="connected"===e.newState?n.NETWORK_STATUS_ONLINE:n.NETWORK_STATUS_OFFLINE;i._application.broadcastEvent(new r("networkstatuschange",{networkStatus:t}))})},isPointerActive:function(){return!0},getExtendedModel:function(){var e=/playstation ([0-9]+)/i.exec(navigator.userAgent);return e.length?e[0]:"n.a."},_getKeyUpTimeout:function(e){return setTimeout(function(){document.onkeyup({keyCode:e,preventDefault:function(){}})},500)},addKeyEventListener:function(){var i=this.getKeyMap(),n={},r=this;document.onkeydown=function(e){var t;if(e=e||window.event,r.getLogger().log("Keycode: "+e.keyCode.toString()),t=i[e.keyCode.toString()]){if(r.getFocusOverwritten(t))return;n[e.keyCode.toString()]?(clearTimeout(n[e.keyCode.toString()]),r._application.bubbleEvent(new s("keypress",t))):r._application.bubbleEvent(new s("keydown",t)),n[e.keyCode.toString()]=r._getKeyUpTimeout(e.keyCode),e.preventDefault()}},document.onkeyup=function(e){var t;if(e=e||window.event,t=i[e.keyCode.toString()]){if(r.getFocusOverwritten(t))return;clearTimeout(n[e.keyCode.toString()]),delete n[e.keyCode.toString()],r._application.bubbleEvent(new s("keyup",t)),e.preventDefault()}},document.onkeypress=function(e){var t;if(e=e||window.event,t=i[e.keyCode.toString()]){if(r.getFocusOverwritten(t))return;clearTimeout(n[e.keyCode.toString()]),r._application.bubbleEvent(new s("keypress",t)),n[e.keyCode.toString()]=r._getKeyUpTimeout(e.keyCode),e.preventDefault()}}}})}),define("rofl/devices/samsung/aftershowfix",["antie/widgets/component"],function(e){"use strict";e.prototype._init=e.prototype.init,e.prototype.init=function(e){var t=this;this._init(e),this.addEventListener("aftershow",function(){t.outputElement&&window.setTimeout(function(){t.removeClass("aftershowfix"),t.addClass("aftershowfixed")},600)}),this.addEventListener("beforeshow",function(){t.outputElement&&(t.removeClass("aftershowfixed"),t.addClass("aftershowfix"))})}}),define("rofl/devices/samsungdevice",["antie/devices/browserdevice","antie/events/keyevent"],function(e,n){"use strict";var r,s=new Common.API.Plugin,o=new Common.API.Widget,a=document.getElementById("pluginObjectNNavi");return(r=e.extend({init:function(e){var i=this,t=function(){var e,t;for(t in a.SetBannerState(r.PL_NNAVI_STATE_BANNER_VOL),e=i.getKeyMap())e[t]===n.VK_MUTE?s.unregistKey(parseInt(t,10)):e[t]===n.VK_VOLUME_UP?s.unregistKey(parseInt(t,10)):e[t]===n.VK_VOLUME_DOWN&&s.unregistKey(parseInt(t,10))};this._super(e),window.onShow=t,window.onHide=function(){},t(),o.sendReadyEvent(),this.activateNetworkCheck()},setElementContent:function(e,t){o.putInnerHTML(e,t)},setOffScreenSaver:function(){s.setOffScreenSaver()},setOnScreenSaver:function(){s.setOnScreenSaver()},supportsUHD:function(){var e;return void 0!==window.webapis&&(~(e=window.webapis.tv.info.getModel().toUpperCase()).indexOf("UHD")||~e.indexOf("14_NT14U"))}})).PL_NNAVI_STATE_BANNER_NONE=0,r.PL_NNAVI_STATE_BANNER_VOL=1,r.PL_NNAVI_STATE_BANNER_VOL_CH=2,r.PL_TV_DST_TYPE_OFF=0,r.PL_TV_TIMEZONE_SEOUL=100,r}),define("rofl/devices/storage/cookie",["antie/application","antie/devices/browserdevice","antie/storageprovider","rofl/lib/utils"],function(e,i,t,n){"use strict";var s,r,o=e.getCurrentApplication().getConfiguration(),a={},l=document.location.pathname.split("/"),c=function(e,t,i){var n,r=new Date;if(t=encodeURIComponent(t),i=i||366,r.setTime(r.getTime()+24*i*60*60*1e3),4096<(n=e+"="+t+("; expires="+r.toGMTString())+"; path="+s).length)throw new Error("Unable to set a cookie that exceeds 4096b (currently: "+n.length+"b)");document.cookie=n};l.pop(),s=o.storage&&o.storage.path||l.join("/")+"/",r=t.extend({init:function(e){var t=function(e){var t,i,n=e+"=",r=document.cookie.split(";");for(t=0;t<r.length;t++){for(i=r[t];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(n))return decodeURIComponent(i.substring(n.length,i.length))}return null}(e);this._super(),this._namespace=e,t&&(this._valueCache=i.prototype.decodeJson(t),this._valueCache?this._save():this._valueCache={})},setItem:function(e,t){this._super(e,t),this._save()},removeItem:function(e){this._super(e),this._save()},clear:function(){this._super(),this._save(),delete a[this._namespace]},_isEmpty:function(){var e;for(e in this._valueCache)if(n.hasop(this._valueCache,e))return!1;return!0},_save:function(){var e,t;this._isEmpty()?(t=this._namespace,c(t,"",-1)):(e=i.prototype.encodeJson(this._valueCache),c(this._namespace,e))}}),i.prototype.getPersistentStorage=function(e){return a[e]||(a[e]=new r(e)),a[e]}}),define("rofl/devices/storage/local",["antie/devices/browserdevice","antie/storageprovider"],function(i,e){"use strict";var t,n={},r=function(e,t){localStorage.setItem(e,t)};t=e.extend({init:function(e){var t;this._super(),this._namespace=e,t=localStorage.getItem(e),this._valueCache=t?i.prototype.decodeJson(t):{}},setItem:function(e,t){this._super(e,t),this._save()},removeItem:function(e){this._super(e),this._save()},clear:function(){this._super(),this._save(),delete n[this._namespace]},_isEmpty:function(){var e,t=!0;for(e in this._valueCache)this._valueCache.hasOwnProperty(e)&&(t=!1);return t},_save:function(){var e,t;this._isEmpty()?(t=this._namespace,r(t,"")):(e=i.prototype.encodeJson(this._valueCache),r(this._namespace,e))}}),i.prototype.getLocalStorage=function(e){return n[e]||(n[e]=new t(e)),n[e]}}),define("rofl/devices/storage/maple",["rofl/devices/browserdevice","antie/storageprovider","antie/runtimecontext"],function(o,e,t){"use strict";var i={},a=curWidget.id,n=null,r=function(){return null===n&&(n=t.getDevice().getLogger()),n},l=function(){var e=new FileSystem,t=e.isValidCommonPath(a);0===t?e.createCommonDir(a)||r().error("Maple Storage: unable to create common dir "+a):2===t?r().error("Maple Storage: Invalid path, common dir '"+a+"' could not be created"):1!==t&&r().error("Maple Storage: Unknown error occurred")},s=e.extend({init:function(e){var t,i,n,r,s;this._super(),this._namespace=e,i=e,l(),s=null,(r=(n=new FileSystem).openCommonFile(a+"/"+i,"r"))&&(s=r.readLine(),n.closeCommonFile(r)),n=null,(t=s)&&(this._valueCache=o.prototype.decodeJson(t),this._valueCache?this._save():this._valueCache={})},setItem:function(e,t){this._super(e,t),this._save()},removeItem:function(e){this._super(e),this._save()},clear:function(){this._super(),this._save(),delete i[this._namespace]},_isEmpty:function(){var e;for(e in this._valueCache)if(this._valueCache.hasOwnProperty(e))return!1;return!0},_save:function(){var e,t,i,n,r,s;this._isEmpty()?(s=this._namespace,l(),(new FileSystem).deleteCommonFile(a+"/"+s)):(e=o.prototype.encodeJson(this._valueCache),t=this._namespace,i=e,l(),(r=(n=new FileSystem).openCommonFile(a+"/"+t,"w")).writeLine(i),n.closeCommonFile(r),n=null)}});o.prototype.getPersistentStorage=function(e){return i[e]||(i[e]=new s(e)),i[e]}}),define("rofl/devices/storage/tizen",["antie/runtimecontext","antie/storageprovider","rofl/bootloader","rofl/devices/browserdevice","rofl/devices/storage/tizen/filesystem","rofl/lib/promise","rofl/lib/utils"],function(i,e,t,s,o,a,l){"use strict";var n,c,r={};return c=e.extend({_namespace:null,init:function(e){this._super(),this._namespace=e},setItem:function(e,t){this._super(e,t),this._writeContents()},removeItem:function(e){this._super(e),this._writeContents()},clear:function(){this._super(),this._writeContents()},_writeContents:function(){var t=this._namespace+".json",i=this._valueCache;o.getDir(c.FILE_DIRECTORY).then(function(e){return o.getFile(e,t)}).then(function(e){return o.writeFile(e.file,s.prototype.encodeJson(i))})}}),n=function(){var r,e,t;return e=function(e){var t=e.directory,i=e.files,n=[];return l.each(i,function(e){e.isFile&&~e.name.indexOf(".json")&&n.push(r(t,e.name))}),a.all(n)},r=function(e,t){return o.getFile(e,t).then(function(e){return e.file})},t=function(e){var r=[];return l.each(e,function(e){var t=e.name.replace(".json",""),i=s.prototype.getPersistentStorage(t),n=o.getFileContent(e).then(function(e){i._valueCache=s.prototype.decodeJson(e)});r.push(n)}),a.all(r)},o.getDir(c.FILE_DIRECTORY).then(o.readDir).then(e).then(t).catch(function(e){i.getDevice().getLogger().error(e.message)})},s.prototype.getPersistentStorage=function(e){return l.isUndefined(r[e])&&(r[e]=new c(e)),r[e]},c.FILE_DIRECTORY="wgt-private",t.register(n),c}),define("rofl/devices/storage/tizen/filesystem",["rofl/lib/promise"],function(t){"use strict";var r,s=tizen.filesystem;return r={getDir:function(e){return new t(function(t,i){s.resolve(e,function(e){e.isDirectory?t(e):i(new Error("Requested path is a file"))},i)})},readDir:function(i){return new t(function(e,t){i.listFiles(e,t)}).then(function(e){return{directory:i,files:e}})},getFile:function(e,n){return new t(function(t,i){s.resolve(e.fullPath+"/"+n,function(e){e.isFile?t({file:e,isCreated:!1}):i(new Error("Requested path is a directory"))},function(){t({file:e.createFile(n),isCreated:!0})})})},getFileContent:function(i){return new t(function(e,t){i.readAsText(e,t,r.FILE_ENCODING)})},writeFile:function(e,n){return new t(function(t,i){e.openStream(r.FILE_MODE.WRITE,function(e){e.write(n),e.close(),t()},function(e){i(e)},r.FILE_ENCODING)})},FILE_ENCODING:"UTF-8",FILE_MODE:{READ_ONLY:"r",READ_WRITE:"rw",WRITE:"w",APPEND:"a"}}}),define("rofl/devices/storage/xboxpls",["rofl/devices/xboxone","antie/storageprovider","rofl/lib/utils"],function(r,e,s){"use strict";var t,i={},o=Windows.Storage.ApplicationData.current.localSettings.values;t=e.extend({init:function(e){var t,i;this._super(),this._namespace=e,i=e,(t=o.hasKey(i)&&o.lookup(i)||null)&&(this._valueCache=r.prototype.decodeJson(t)||{})},setItem:function(e,t){this._super(e,t),this._save()},removeItem:function(e){this._super(e),this._save()},clear:function(){this._super(),this._save(),delete i[this._namespace]},_save:function(){var e,t,i,n;s.isEmpty(this._valueCache)?(n=this._namespace,o.remove(n)):(e=r.prototype.encodeJson(this._valueCache),t=this._namespace,i=e,o.insert(t,i))}}),r.prototype.getPersistentStorage=function(e){return i[e]||(i[e]=new t(e)),i[e]}}),define("rofl/devices/tizendevice",["antie/devices/browserdevice","rofl/lib/promise"],function(e,t){"use strict";return e.extend({_networkState:!1,init:function(e){this._super(e),this.setKeys(),this.addInputMapping(this.getKeys()),this.activateNetworkCheck()},setKeys:function(){var e,n=this,t=0,i=function(e){var t,i;return function(e){try{tizen.tvinputdevice.registerKey(e)}catch(e){return!1}return!0}(e)&&(i=e,t=n.supportedKeys[i]||!1)?t:"KEY_NOT_RESOLVED"};for(this.supportedKeys=function(){for(var e=tizen.tvinputdevice.getSupportedKeys(),t=[],i=0,n=e.length;i<n;i++)t[e[i].name]=e[i].code;return t}(),this.keys={10009:"BACK",38:"UP",40:"DOWN",37:"LEFT",39:"RIGHT",13:"ENTER",447:"VOLUME_UP",448:"VOLUME_DOWN",449:"MUTE",458:"GUIDE"},this.keys[i("ColorF0Red")]="RED",this.keys[i("ColorF1Green")]="GREEN",this.keys[i("ColorF2Yellow")]="YELLOW",this.keys[i("ColorF3Blue")]="BLUE",this.keys[i("Caption")]="SUBTITLE",this.keys[i("MediaPlay")]="PLAY",this.keys[i("MediaPlayPause")]="PLAY_PAUSE",this.keys[i("MediaStop")]="STOP",this.keys[i("MediaPause")]="PAUSE",this.keys[i("MediaFastForward")]="FAST_FWD",this.keys[i("MediaRewind")]="REWIND",this.keys[i("MediaTrackPrevious")]="PREV",this.keys[i("MediaTrackNext")]="NEXT",this.keys[i("Info")]="INFO",this.keys[i("ChannelDown")]="CHANNEL_DOWN",this.keys[i("ChannelUp")]="CHANNEL_UP",this.keys[i("Guide")]="GUIDE";t<=9;t++)e=t.toString(),this.keys[i(e)]=e},getKeys:function(){return this.keys},getKeyCode:function(e){return e.keyCode?e.keyCode:e.which?e.which:e.charCode},keyCodeToChar:function(e){var t=this.getKeys();switch(e){case t.KEY_1:case t.KEY_2:case t.KEY_3:case t.KEY_4:case t.KEY_5:case t.KEY_6:case t.KEY_7:case t.KEY_8:case t.KEY_9:case t.KEY_0:return e;default:return""}},isPointerActive:function(){return!0},supportsUHD:function(){return void 0!==window.webapis.productinfo&&window.webapis.productinfo.isUdPanelSupported()},getDeviceLanguage:function(){return void 0!==window.tizen.systeminfo?new t(function(t){window.tizen.systeminfo.getPropertyValue("LOCALE",function(e){t(e.language)})}):e.prototype.getDeviceLanguage()}})}),define("rofl/devices/webosdevice",["antie/devices/browserdevice"],function(e){"use strict";return e.extend({_networkState:!1,init:function(e){this._super(e),this.activateNetworkCheck()}})}),define("rofl/devices/xboxone",["rofl/devices/browserdevice"],function(e){"use strict";var t=null;return e.extend({init:function(e){this._super(e),this._useKeyboardInputEmulation(),this._disableOverscan()},_useKeyboardInputEmulation:function(){navigator.gamepadInputEmulation="keyboard"},_disableOverscan:function(){var e=Windows.UI.ViewManagement.ApplicationViewBoundsMode.useCoreWindow;Windows.UI.ViewManagement.ApplicationView.getForCurrentView().setDesiredBoundsMode(e)},setOnScreenSaver:function(){t&&(t.RequestRelease(),t=null)},setOffScreenSaver:function(){t||(t=new Windows.System.Display.DisplayRequest).RequestActive()},loadStyleSheet:function(e,t){var i,n,r=this._createElement("link");r.type="text/css",r.rel="stylesheet",r.href=e,r.className="added-by-antie",document.getElementsByTagName("head")[0].appendChild(r),t&&(n=function(){i.onerror=function(){},t(e),i.parentNode.removeChild(i)},(i=this._createElement("img")).onerror=n,this.getTopLevelElement().appendChild(i),i.src=e)}})}),define("rofl/events/afterselecteditemchangeevent",["antie/events/event"],function(e){"use strict";return e.extend({init:function(e,t,i){this.target=e,this.item=t,this.index=i,this._super("afterselecteditemchange")}})}),define("rofl/events/broadcastevent",["antie/events/event","rofl/lib/utils"],function(e,n){"use strict";var r=e.extend({init:function(e,t){this.data=t,this._super(e)}});return r.convert=function(e){var t,i;if(e instanceof r)return e;for(i in t={},e)e.hasOwnProperty(i)&&(~n.indexOf(["self","super","type"],i)||"_"===i.charAt(0)||(t[i]=e[i]));return new r(e.type,t)},r.LOCAL_BROADCAST_EVENTS=["pointerstatuschange","networkstatuschange","pagechange"],r}),define("rofl/events/externalinputevent",["antie/events/event"],function(e){"use strict";return e.extend({init:function(e,t){this._super("externalinput"),this.data=t,this.identifier=e}})}),define("rofl/events/grid/selecteditemchange",["antie/events/event"],function(e){"use strict";return e.extend({init:function(e,t,i,n){this.target=e,this.item=t,this.col=i,this.row=n,this._super("gridselecteditemchange")}})}),define("rofl/events/keyboard/swapkeyset",["antie/events/event"],function(e){"use strict";return e.extend({swapTo:null,init:function(e){this._super("swapkeyset"),this.swapTo=e}})}),define("rofl/events/keyevent",["antie/events/keyevent"],function(e){"use strict";return e.VK_CHANNEL_UP=1e3,e.VK_CHANNEL_DOWN=1001,e.VK_MENU=1002,e.VK_SQUARE=1100,e.VK_TRIANGLE=1101,e.VK_L1=1102,e.VK_R1=1103,e.VK_L2=1104,e.VK_R2=1105,e.VK_SELECT=1106,e.VK_SHARE=1107,e.VK_START=1108,e.VK_OPTIONS=1109,e.VK_TOUCH_PAD=1110,e.VK_L3=1111,e.VK_R3=1112,e.VK_TELETEXT=1201,e.VK_REPLAY=1202,e.VK_CLOUD=1203,e.VK_TV=1204,e.VK_STANDBY=1205,e.VK_EPG=1206,e.VK_FAVORITE=1207,e.VK_XBOX_X=1300,e.VK_XBOX_Y=1301,e.VK_LB=1302,e.VK_RB=1303,e.VK_LT=1304,e.VK_RT=1305,e.VK_XBOX_VIEW=1306,e.VK_GUIDE=458,e.VK_LIST=1056,e}),define("rofl/events/mediamanagerevent",["antie/events/event"],function(e){"use strict";return e.extend({init:function(e,t){this.target=t,this._super(e)}})}),define("rofl/events/partialboundevent",["antie/events/event"],function(e){"use strict";return e.extend({init:function(e,t,i){this.target=e,this.iterator=t,this.error=i,this._super("partialbound")}})}),define("rofl/events/pointerscrollevent",["antie/events/event"],function(e){"use strict";return e.extend({init:function(e){this.delta=e,this._super("pointerscroll")}})}),define("rofl/events/pointerselectevent",["antie/events/event"],function(e){"use strict";return e.extend({init:function(e,t,i){this.target=e,this.fromClick=!0,this.positionX=void 0!==t?t:null,this.positionY=void 0!==i?i:null,this._super("select")}})}),define("rofl/events/scrolllimitevent",["antie/events/event"],function(e){"use strict";return e.extend({init:function(e,t){this.limits=e,this.target=t,this._super("scrolllimit")}})}),define("rofl/externalinput/base",["antie/class","rofl/events/externalinputevent","antie/runtimecontext","rofl/lib/utils"],function(e,t,i,n){"use strict";var r;return e.extend({identifier:"base",_sendEvent:function(e){n.isEmpty(e)&&(e={}),r||(r=i.getCurrentApplication()),r.broadcastEvent(new t(this.identifier,e))}})}),define("rofl/externalinput/samsung/tizen/eden",["rofl/externalinput/base","rofl/application","rofl/lib/utils","antie/runtimecontext"],function(e,t,r,s){"use strict";return new(e.extend({identifier:"eden",init:function(){this._onAppControlBound=r.bind(this._onAppControl,this),window.addEventListener("appcontrol",this._onAppControlBound)},_onAppControl:function(){var e=this._retrieveAppcontrolData();e&&this._sendEvent(e)},_retrieveAppcontrolData:function(){var e,t=tizen.application.getCurrentApplication().getRequestedAppControl(),i=s.getDevice(),n=null;return null===t?null:(e=t.appControl.data||[],r.each(e,function(e){var t;"PAYLOAD"===e.key&&(t=i.decodeJson(e.value[0]),n=t.values)}),n)},destroy:function(){window.removeEventListener("appcontrol",this._onAppControlBound)}}))}),define("rofl/iterator",["antie/iterator"],function(e){"use strict";return e.extend({reverse:function(){return"function"==typeof this._array.reverse&&this._array.reverse(),this._array},getArray:function(){return this._array}})}),define("rofl/lib/analytics/adobe/application",["antie/runtimecontext","rofl/lib/analytics/adobe/visitor"],function(e){function c(e){var h=this;h.version="2.4.0";var d=window;d.s_c_in||(d.s_c_il=[],d.s_c_in=0),h._il=d.s_c_il,h._in=d.s_c_in,h._il[h._in]=h,d.s_c_in++,h._c="s_c";var g=d.AppMeasurement.Pb;g||(g=null);var t,i,n,p=d;try{for(t=p.parent,i=p.location;t&&t.location&&i&&""+t.location!=""+i&&p.location&&""+t.location!=""+p.location&&t.location.host==i.host;)t=(p=t).parent}catch(e){}h.F=function(e){try{console.log(e)}catch(e){}},h.Ma=function(e){return""+parseInt(e)==""+e},h.replace=function(e,t,i){return!e||e.indexOf(t)<0?e:e.split(t).join(i)},h.escape=function(e){var t,i;if(!e)return e;for(e=encodeURIComponent(e),t=0;t<7;t++)i="+~!*()'".substring(t,t+1),0<=e.indexOf(i)&&(e=h.replace(e,i,"%"+i.charCodeAt(0).toString(16).toUpperCase()));return e},h.unescape=function(e){if(!e)return e;e=0<=e.indexOf("+")?h.replace(e,"+"," "):e;try{return decodeURIComponent(e)}catch(e){}return unescape(e)},h.wb=function(){var e,t=d.location.hostname,i=h.fpCookieDomainPeriods;if(i||(i=h.cookieDomainPeriods),t&&!h.Ea&&!/^[0-9.]+$/.test(t)&&(i=2<(i=i?parseInt(i):2)?i:2,0<=(e=t.lastIndexOf(".")))){for(;0<=e&&1<i;)e=t.lastIndexOf(".",e-1),i--;h.Ea=0<e?t.substring(e):t}return h.Ea},h.c_r=h.cookieRead=function(e){e=h.escape(e);var t=" "+h.d.cookie,i=t.indexOf(" "+e+"="),n=i<0?i:t.indexOf(";",i);return"[[B]]"!=(e=i<0?"":h.unescape(t.substring(i+2+e.length,n<0?t.length:n)))?e:""},h.c_w=h.cookieWrite=function(e,t,i){var n,r=h.wb(),s=h.cookieLifetime;return t=""+t,s=s?(""+s).toUpperCase():"",i&&"SESSION"!=s&&"NONE"!=s&&((n=""!=t?parseInt(s||0):-60)?(i=new Date).setTime(i.getTime()+1e3*n):1==i&&(n=(i=new Date).getYear(),i.setYear(n+5+(n<1900?1900:0)))),e&&"NONE"!=s?(h.d.cookie=h.escape(e)+"="+h.escape(""!=t?t:"[[B]]")+"; path=/;"+(i&&"SESSION"!=s?" expires="+i.toGMTString()+";":"")+(r?" domain="+r+";":""),h.cookieRead(e)==t):0},h.L=[],h.ia=function(e,t,i){if(h.Fa)return 0;h.maxDelay||(h.maxDelay=250);var n=0,r=(new Date).getTime()+h.maxDelay,s=h.d.visibilityState,o=["webkitvisibilitychange","visibilitychange"];if(s||(s=h.d.webkitVisibilityState),s&&"prerender"==s){if(!h.ja)for(h.ja=1,i=0;i<o.length;i++)h.d.addEventListener(o[i],function(){var e=h.d.visibilityState;e||(e=h.d.webkitVisibilityState),"visible"==e&&(h.ja=0,h.delayReady())});n=1,r=0}else i||h.p("_d")&&(n=1);return n&&(h.L.push({m:e,a:t,t:r}),h.ja||setTimeout(h.delayReady,h.maxDelay)),n},h.delayReady=function(){var e,t=(new Date).getTime(),i=0;for(h.p("_d")?i=1:h.xa();0<h.L.length;){if(e=h.L.shift(),i&&!e.t&&e.t>t){h.L.unshift(e),setTimeout(h.delayReady,parseInt(h.maxDelay/2));break}h.Fa=1,h[e.m].apply(h,e.a),h.Fa=0}},h.setAccount=h.sa=function(e){var t,i;if(!h.ia("setAccount",arguments))if(h.account=e,h.allAccounts)for(t=h.allAccounts.concat(e.split(",")),h.allAccounts=[],t.sort(),i=0;i<t.length;i++)0!=i&&t[i-1]==t[i]||h.allAccounts.push(t[i]);else h.allAccounts=e.split(",")},h.foreachVar=function(e,t){var i,n,r,s,o="";for(r=n="",h.lightProfileID?(i=h.P,(o=h.lightTrackVars)&&(o=","+o+","+h.na.join(",")+",")):(i=h.g,(h.pe||h.linkType)&&(o=h.linkTrackVars,n=h.linkTrackEvents,h.pe&&(r=h.pe.substring(0,1).toUpperCase()+h.pe.substring(1),h[r]&&(o=h[r].Nb,n=h[r].Mb))),o&&(o=","+o+","+h.H.join(",")+","),n&&o&&(o+=",events,")),t&&(t=","+t+","),n=0;n<i.length;n++)r=i[n],(s=h[r])&&(!o||0<=o.indexOf(","+r+","))&&(!t||0<=t.indexOf(","+r+","))&&e(r,s)},h.r=function(e,t,i,n,r){var s,o,a,l,c="",u=0;if("contextData"==e&&(e="c"),t){for(s in t)if(!(Object.prototype[s]||r&&s.substring(0,r.length)!=r)&&t[s]&&(!i||0<=i.indexOf(","+(n?n+".":"")+s+","))){if(a=!1,u)for(o=0;o<u.length;o++)s.substring(0,u[o].length)==u[o]&&(a=!0);if(!a&&(""==c&&(c+="&"+e+"."),o=t[s],r&&(s=s.substring(r.length)),0<s.length))if(0<(a=s.indexOf(".")))a=(r||"")+(o=s.substring(0,a))+".",u||(u=[]),u.push(a),c+=h.r(o,t,i,n,a);else if("boolean"==typeof o&&(o=o?"true":"false"),o){if("retrieveLightData"==n&&r.indexOf(".contextData.")<0)switch(a=s.substring(0,4),l=s.substring(4),s){case"transactionID":s="xact";break;case"channel":s="ch";break;case"campaign":s="v0";break;default:h.Ma(l)&&("prop"==a?s="c"+l:"eVar"==a?s="v"+l:"list"==a?s="l"+l:"hier"==a&&(s="h"+l,o=o.substring(0,255)))}c+="&"+h.escape(s)+"="+h.escape(o)}}""!=c&&(c+="&."+e)}return c},h.usePostbacks=0,h.zb=function(){var e,t,i,n,r,s,o,a,l="",c="",u="",d=n="";if(h.lightProfileID?(e=h.P,(c=h.lightTrackVars)&&(c=","+c+","+h.na.join(",")+",")):(e=h.g,(h.pe||h.linkType)&&(c=h.linkTrackVars,u=h.linkTrackEvents,h.pe&&(n=h.pe.substring(0,1).toUpperCase()+h.pe.substring(1),h[n]&&(c=h[n].Nb,u=h[n].Mb))),c&&(c=","+c+","+h.H.join(",")+","),u&&(u=","+u+",",c&&(c+=",events,")),h.events2&&(d+=(""!=d?",":"")+h.events2)),h.visitor&&h.visitor.getCustomerIDs){if(n=g,r=h.visitor.getCustomerIDs())for(t in r)Object.prototype[t]||"object"==typeof(i=r[t])&&(n||(n={}),i.id&&(n[t+".id"]=i.id),i.authState&&(n[t+".as"]=i.authState));n&&(l+=h.r("cid",n))}for(h.AudienceManagement&&h.AudienceManagement.isReady()&&(l+=h.r("d",h.AudienceManagement.getEventCallConfigParams())),t=0;t<e.length;t++){if(n=e[t],r=h[n],i=n.substring(0,4),s=n.substring(4),r||("events"==n&&d?(r=d,d=""):"marketingCloudOrgID"==n&&h.visitor&&(r=h.visitor.marketingCloudOrgID)),r&&(!c||0<=c.indexOf(","+n+","))){switch(n){case"customerPerspective":n="cp";break;case"marketingCloudOrgID":n="mcorgid";break;case"supplementalDataID":n="sdid";break;case"timestamp":n="ts";break;case"dynamicVariablePrefix":n="D";break;case"visitorID":n="vid";break;case"marketingCloudVisitorID":n="mid";break;case"analyticsVisitorID":n="aid";break;case"audienceManagerLocationHint":n="aamlh";break;case"audienceManagerBlob":n="aamb";break;case"authState":n="as";break;case"pageURL":n="g",255<r.length&&(h.pageURLRest=r.substring(255),r=r.substring(0,255));break;case"pageURLRest":n="-g";break;case"referrer":n="r";break;case"vmk":case"visitorMigrationKey":n="vmt";break;case"visitorMigrationServer":n="vmf",h.ssl&&h.visitorMigrationServerSecure&&(r="");break;case"visitorMigrationServerSecure":n="vmf",!h.ssl&&h.visitorMigrationServer&&(r="");break;case"charSet":n="ce";break;case"visitorNamespace":n="ns";break;case"cookieDomainPeriods":n="cdp";break;case"cookieLifetime":n="cl";break;case"variableProvider":n="vvp";break;case"currencyCode":n="cc";break;case"channel":n="ch";break;case"transactionID":n="xact";break;case"campaign":n="v0";break;case"latitude":n="lat";break;case"longitude":n="lon";break;case"resolution":n="s";break;case"colorDepth":n="c";break;case"javascriptVersion":n="j";break;case"javaEnabled":n="v";break;case"cookiesEnabled":n="k";break;case"browserWidth":n="bw";break;case"browserHeight":n="bh";break;case"connectionType":n="ct";break;case"homepage":n="hp";break;case"events":if(d&&(r+=(""!=r?",":"")+d),u)for(s=r.split(","),r="",i=0;i<s.length;i++)0<=(a=(o=s[i]).indexOf("="))&&(o=o.substring(0,a)),0<=(a=o.indexOf(":"))&&(o=o.substring(0,a)),0<=u.indexOf(","+o+",")&&(r+=(r?",":"")+s[i]);break;case"events2":r="";break;case"contextData":l+=h.r("c",h[n],c,n),r="";break;case"lightProfileID":n="mtp";break;case"lightStoreForSeconds":n="mtss",h.lightProfileID||(r="");break;case"lightIncrementBy":n="mti",h.lightProfileID||(r="");break;case"retrieveLightProfiles":n="mtsr";break;case"deleteLightProfiles":n="mtsd";break;case"retrieveLightData":h.retrieveLightProfiles&&(l+=h.r("mts",h[n],c,n)),r="";break;default:h.Ma(s)&&("prop"==i?n="c"+s:"eVar"==i?n="v"+s:"list"==i?n="l"+s:"hier"==i&&(n="h"+s,r=r.substring(0,255)))}r&&(l+="&"+n+"="+("pev"!=n.substring(0,3)?h.escape(r):r))}"pev3"==n&&h.e&&(l+=h.e)}return l},h.D=function(e){var t=e.tagName;return"undefined"!=""+e.Sb||"undefined"!=""+e.Ib&&"HTML"!=(""+e.Ib).toUpperCase()?"":("SHAPE"==(t=t&&t.toUpperCase?t.toUpperCase():"")&&(t=""),t&&(("INPUT"==t||"BUTTON"==t)&&e.type&&e.type.toUpperCase?t=e.type.toUpperCase():!t&&e.href&&(t="A")),t)},h.Ia=function(e){var t,i,n,r=d.location,s=e.href?e.href:"";return t=s.indexOf(":"),i=s.indexOf("?"),n=s.indexOf("/"),s&&(t<0||0<=i&&i<t||0<=n&&n<t)&&(i=e.protocol&&1<e.protocol.length?e.protocol:r.protocol?r.protocol:"",t=r.pathname.lastIndexOf("/"),s=(i?i+"//":"")+(e.host?e.host:r.host?r.host:"")+("/"!=s.substring(0,1)?r.pathname.substring(0,t<0?0:t)+"/":"")+s),s},h.M=function(e){var t,i,n=h.D(e),r="",s=0;return n&&(t=e.protocol,i=e.onclick,!e.href||"A"!=n&&"AREA"!=n||i&&t&&!(t.toLowerCase().indexOf("javascript")<0)?i?(r=h.replace(h.replace(h.replace(h.replace(""+i,"\r",""),"\n",""),"\t","")," ",""),s=2):"INPUT"==n||"SUBMIT"==n?(e.value?r=e.value:e.innerText?r=e.innerText:e.textContent&&(r=e.textContent),s=3):"IMAGE"==n&&e.src&&(r=e.src):r=h.Ia(e),r)?{id:r.substring(0,100),type:s}:0},h.Qb=function(e){for(var t=h.D(e),i=h.M(e);e&&!i&&"BODY"!=t;)(e=e.parentElement?e.parentElement:e.parentNode)&&(t=h.D(e),i=h.M(e));return i&&"BODY"!=t||(e=0),e&&(0<=(t=e.onclick?""+e.onclick:"").indexOf(".tl(")||0<=t.indexOf(".trackLink("))&&(e=0),e},h.Hb=function(){var e,t,i,n,r=h.linkObject,s=h.linkType,o=h.linkURL;if(h.oa=1,r||(h.oa=0,r=h.clickObject),r){for(e=h.D(r),t=h.M(r);r&&!t&&"BODY"!=e;)(r=r.parentElement?r.parentElement:r.parentNode)&&(e=h.D(r),t=h.M(r));if(t&&"BODY"!=e||(r=0),r&&!h.linkObject){var a=r.onclick?""+r.onclick:"";(0<=a.indexOf(".tl(")||0<=a.indexOf(".trackLink("))&&(r=0)}}else h.oa=1;if(!o&&r&&(o=h.Ia(r)),o&&!h.linkLeaveQueryString&&(0<=(i=o.indexOf("?"))&&(o=o.substring(0,i))),!s&&o){var l,c=0,u=0;if(h.trackDownloadLinks&&h.linkDownloadFileTypes)for(i=(a=o.toLowerCase()).indexOf("?"),n=a.indexOf("#"),0<=i?0<=n&&n<i&&(i=n):i=n,0<=i&&(a=a.substring(0,i)),i=h.linkDownloadFileTypes.toLowerCase().split(","),n=0;n<i.length;n++)(l=i[n])&&a.substring(a.length-(l.length+1))=="."+l&&(s="d");if(h.trackExternalLinks&&!s&&(a=o.toLowerCase(),h.La(a)&&(h.linkInternalFilters||(h.linkInternalFilters=d.location.hostname),i=0,h.linkExternalFilters?(i=h.linkExternalFilters.toLowerCase().split(","),c=1):h.linkInternalFilters&&(i=h.linkInternalFilters.toLowerCase().split(",")),i))){for(n=0;n<i.length;n++)l=i[n],0<=a.indexOf(l)&&(u=1);u?c&&(s="e"):c||(s="e")}}h.linkObject=r,h.linkURL=o,h.linkType=s,(h.trackClickMap||h.trackInlineStats)&&(h.e="",r&&(s=h.pageName,o=1,r=r.sourceIndex,s||(s=h.pageURL,o=0),d.s_objectID&&(t.id=d.s_objectID,r=t.type=1),s&&t&&t.id&&e&&(h.e="&pid="+h.escape(s.substring(0,255))+(o?"&pidt="+o:"")+"&oid="+h.escape(t.id.substring(0,100))+(t.type?"&oidt="+t.type:"")+"&ot="+e+(r?"&oi="+r:""))))},h.Ab=function(){var e=h.oa,t=h.linkType,i=h.linkURL,n=h.linkName;if(t&&(i||n)&&("d"!=(t=t.toLowerCase())&&"e"!=t&&(t="o"),h.pe="lnk_"+t,h.pev1=i?h.escape(i):"",h.pev2=n?h.escape(n):"",e=1),h.abort&&(e=0),h.trackClickMap||h.trackInlineStats||h.ActivityMap){t={},i=0;var r,s,o,a=(l=h.cookieRead("s_sq"))?l.split("&"):0,l=0;if(a)for(r=0;r<a.length;r++)s=a[r].split("="),n=h.unescape(s[0]).split(","),t[s=h.unescape(s[1])]=n;for(o in n=h.account.split(","),r={},h.contextData)o&&!Object.prototype[o]&&"a.activitymap."==o.substring(0,14)&&(r[o]=h.contextData[o],h.contextData[o]="");if(h.e=h.r("c",r)+(h.e?h.e:""),e||h.e){for(s in e&&!h.e&&(l=1),t)if(!Object.prototype[s])for(o=0;o<n.length;o++)for(l&&((a=t[s].join(","))==h.account&&(h.e+=("&"!=s.charAt(0)?"&":"")+s,t[s]=[],i=1)),r=0;r<t[s].length;r++)(a=t[s][r])==n[o]&&(l&&(h.e+="&u="+h.escape(a)+("&"!=s.charAt(0)?"&":"")+s+"&u=0"),t[s].splice(r,1),i=1);if(e||(i=1),i){for(s in l="",r=2,!e&&h.e&&(l=h.escape(n.join(","))+"="+h.escape(h.e),r=1),t)!Object.prototype[s]&&0<r&&0<t[s].length&&(l+=(l?"&":"")+h.escape(t[s].join(","))+"="+h.escape(s),r--);h.cookieWrite("s_sq",l)}}}return e},h.Bb=function(){if(!h.Lb){var e,t,i,n,r=new Date,s=p.location,o=t=e="",a="1.2",l=h.cookieWrite("s_cc","true",0)?"Y":"N",c="",u="";if(r.setUTCDate&&(a="1.3",(0).toPrecision&&(a="1.5",(r=[]).forEach))){a="1.6",t=0,e={};try{(t=new Iterator(e)).next&&(a="1.7",r.reduce&&((a="1.8").trim&&(a="1.8.1",Date.parse&&(a="1.8.2",Object.create&&(a="1.8.5")))))}catch(e){}}e=screen.width+"x"+screen.height,o=navigator.javaEnabled()?"Y":"N",t=screen.pixelDepth?screen.pixelDepth:screen.colorDepth,i=h.w.innerWidth?h.w.innerWidth:h.d.documentElement.offsetWidth,n=h.w.innerHeight?h.w.innerHeight:h.d.documentElement.offsetHeight;try{h.b.addBehavior("#default#homePage"),c=h.b.Rb(s)?"Y":"N"}catch(e){}try{h.b.addBehavior("#default#clientCaps"),u=h.b.connectionType}catch(e){}h.resolution=e,h.colorDepth=t,h.javascriptVersion=a,h.javaEnabled=o,h.cookiesEnabled=l,h.browserWidth=i,h.browserHeight=n,h.connectionType=u,h.homepage=c,h.Lb=1}},h.Q={},h.loadModule=function(t,e){var i=h.Q[t];if(!i){i=d["AppMeasurement_Module_"+t]?new d["AppMeasurement_Module_"+t](h):{},h.Q[t]=h[t]=i,i.eb=function(){return i.ib},i.jb=function(e){(i.ib=e)&&(h[t+"_onLoad"]=e,h.ia(t+"_onLoad",[h,i],1)||e(h,i))};try{Object.defineProperty?Object.defineProperty(i,"onLoad",{get:i.eb,set:i.jb}):i._olc=1}catch(e){i._olc=1}}e&&(h[t+"_onLoad"]=e,h.ia(t+"_onLoad",[h,i],1)||e(h,i))},h.p=function(e){var t,i;for(t in h.Q)if(!Object.prototype[t]&&(i=h.Q[t])&&(i._olc&&i.onLoad&&(i._olc=0,i.onLoad(h,i)),i[e]&&i[e]()))return 1;return 0},h.Db=function(){var e=Math.floor(1e13*Math.random()),t=h.visitorSampling,i=h.visitorSamplingGroup,n=(i="s_vsn_"+(h.visitorNamespace?h.visitorNamespace:h.account)+(i?"_"+i:""),h.cookieRead(i));if(t){if(t*=100,n&&(n=parseInt(n)),!n){if(!h.cookieWrite(i,e))return 0;n=e}if(t<n%1e4)return 0}return 1},h.R=function(e,t){var i,n,r,s,o,a;for(i=0;i<2;i++)for(n=0<i?h.Aa:h.g,r=0;r<n.length;r++)if((o=e[s=n[r]])||e["!"+s]){if(!t&&("contextData"==s||"retrieveLightData"==s)&&h[s])for(a in h[s])o[a]||(o[a]=h[s][a]);h[s]=o}},h.Va=function(e,t){var i,n,r,s;for(i=0;i<2;i++)for(n=0<i?h.Aa:h.g,r=0;r<n.length;r++)e[s=n[r]]=h[s],t||e[s]||(e["!"+s]=1)},h.vb=function(e){var t,i,n,r,s,o,a=0,l="",c="";if(e&&255<e.length&&(0<(i=(t=""+e).indexOf("?"))&&(o=t.substring(i+1),n=0,"http://"==(r=(t=t.substring(0,i)).toLowerCase()).substring(0,7)?n+=7:"https://"==r.substring(0,8)&&(n+=8),0<(i=r.indexOf("/",n))&&(r=r.substring(n,i),s=t.substring(i),t=t.substring(0,i),0<=r.indexOf("google")?a=",q,ie,start,search_key,word,kw,cd,":0<=r.indexOf("yahoo.co")&&(a=",p,ei,"),a&&o)))){if((e=o.split("&"))&&1<e.length){for(n=0;n<e.length;n++)0<(i=(r=e[n]).indexOf("="))&&0<=a.indexOf(","+r.substring(0,i)+",")?l+=(l?"&":"")+r:c+=(c?"&":"")+r;l&&c?o=l+"&"+c:c=""}e=t+(0<(i=253-(o.length-c.length)-t.length)?s.substring(0,i):"")+"?"+o}return e},h.ab=function(t){var e=h.d.visibilityState,i=["webkitvisibilitychange","visibilitychange"];if(e||(e=h.d.webkitVisibilityState),e&&"prerender"==e){if(t)for(e=0;e<i.length;e++)h.d.addEventListener(i[e],function(){var e=h.d.visibilityState;e||(e=h.d.webkitVisibilityState),"visible"==e&&t()});return!1}return!0},h.ea=!1,h.J=!1,h.lb=function(){h.J=!0,h.j()},h.ca=!1,h.V=!1,h.hb=function(e){h.marketingCloudVisitorID=e,h.V=!0,h.j()},h.fa=!1,h.W=!1,h.mb=function(e){h.visitorOptedOut=e,h.W=!0,h.j()},h.Z=!1,h.S=!1,h.Xa=function(e){h.analyticsVisitorID=e,h.S=!0,h.j()},h.ba=!1,h.U=!1,h.Za=function(e){h.audienceManagerLocationHint=e,h.U=!0,h.j()},h.aa=!1,h.T=!1,h.Ya=function(e){h.audienceManagerBlob=e,h.T=!0,h.j()},h.$a=function(e){return h.maxDelay||(h.maxDelay=250),!h.p("_d")||(e&&setTimeout(function(){e()},h.maxDelay),!1)},h.da=!1,h.I=!1,h.xa=function(){h.I=!0,h.j()},h.isReadyToTrack=function(){var e,t,i,n=!0,r=h.visitor;return h.ea||h.J||(h.ab(h.lb)?h.J=!0:h.ea=!0),!(h.ea&&!h.J)&&(r&&r.isAllowed()&&(h.ca||h.marketingCloudVisitorID||!r.getMarketingCloudVisitorID||(h.ca=!0,h.marketingCloudVisitorID=r.getMarketingCloudVisitorID([h,h.hb]),h.marketingCloudVisitorID&&(h.V=!0)),h.fa||h.visitorOptedOut||!r.isOptedOut||(h.fa=!0,h.visitorOptedOut=r.isOptedOut([h,h.mb]),h.visitorOptedOut!=g&&(h.W=!0)),h.Z||h.analyticsVisitorID||!r.getAnalyticsVisitorID||(h.Z=!0,h.analyticsVisitorID=r.getAnalyticsVisitorID([h,h.Xa]),h.analyticsVisitorID&&(h.S=!0)),h.ba||h.audienceManagerLocationHint||!r.getAudienceManagerLocationHint||(h.ba=!0,h.audienceManagerLocationHint=r.getAudienceManagerLocationHint([h,h.Za]),h.audienceManagerLocationHint&&(h.U=!0)),h.aa||h.audienceManagerBlob||!r.getAudienceManagerBlob||(h.aa=!0,h.audienceManagerBlob=r.getAudienceManagerBlob([h,h.Ya]),h.audienceManagerBlob&&(h.T=!0)),n=h.ca&&!h.V&&!h.marketingCloudVisitorID,r=h.Z&&!h.S&&!h.analyticsVisitorID,e=h.ba&&!h.U&&!h.audienceManagerLocationHint,t=h.aa&&!h.T&&!h.audienceManagerBlob,i=h.fa&&!h.W,n=!(n||r||e||t||i)),h.da||h.I||(h.$a(h.xa)?h.I=!0:h.da=!0),h.da&&!h.I&&(n=!1),n)},h.o=g,h.u=0,h.callbackWhenReadyToTrack=function(e,t,i){var n;(n={}).qb=e,n.pb=t,n.nb=i,h.o==g&&(h.o=[]),h.o.push(n),0==h.u&&(h.u=setInterval(h.j,100))},h.j=function(){var e;if(h.isReadyToTrack()&&(h.kb(),h.o!=g))for(;0<h.o.length;)(e=h.o.shift()).pb.apply(e.qb,e.nb)},h.kb=function(){h.u&&(clearInterval(h.u),h.u=0)},h.fb=function(e){var t,i,n=g,r=g;if(h.isReadyToTrack())return!1;if(t=[],e!=g)for(i in n={},e)n[i]=e[i];return r={},h.Va(r,!0),t.push(n),t.push(r),h.callbackWhenReadyToTrack(h,h.track,t),!0},h.xb=function(){var e,t=h.cookieRead("s_fid"),i="",n="";e=8;var r=4;if(!t||t.indexOf("-")<0){for(t=0;t<16;t++)e=Math.floor(Math.random()*e),i+="0123456789ABCDEF".substring(e,e+1),e=Math.floor(Math.random()*r),n+="0123456789ABCDEF".substring(e,e+1),e=r=16;t=i+"-"+n}return h.cookieWrite("s_fid",t,1)||(t=0),t},h.t=h.track=function(e,t){var i,n=new Date,r="s"+Math.floor(n.getTime()/108e5)%10+Math.floor(1e13*Math.random()),s=n.getYear();s="t="+h.escape(n.getDate()+"/"+n.getMonth()+"/"+(s<1900?s+1900:s)+" "+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds()+" "+n.getDay()+" "+n.getTimezoneOffset());h.visitor&&h.visitor.getAuthState&&(h.authState=h.visitor.getAuthState()),h.p("_s"),h.fb(e)||(t&&h.R(t),e&&(i={},h.Va(i,0),h.R(e)),h.Db()&&!h.visitorOptedOut&&(h.analyticsVisitorID||h.marketingCloudVisitorID||(h.fid=h.xb()),h.Hb(),h.usePlugins&&h.doPlugins&&h.doPlugins(h),h.account&&(h.abort||(h.trackOffline&&!h.timestamp&&(h.timestamp=Math.floor(n.getTime()/1e3)),n=d.location,h.pageURL||(h.pageURL=n.href?n.href:n),h.referrer||h.Wa||(n=h.Util.getQueryParam("adobe_mc_ref",null,null,!0),h.referrer=n||void 0===n?void 0===n?"":n:p.document.referrer),h.Wa=1,h.referrer=h.vb(h.referrer),h.p("_g")),h.Ab()&&!h.abort&&(h.visitor&&!h.supplementalDataID&&h.visitor.getSupplementalDataID&&(h.supplementalDataID=h.visitor.getSupplementalDataID("AppMeasurement:"+h._in,!h.expectSupplementalData)),h.Bb(),s+=h.zb(),h.Gb(r,s),h.p("_t"),h.referrer=""))),e&&h.R(i,1)),h.abort=h.supplementalDataID=h.timestamp=h.pageURLRest=h.linkObject=h.clickObject=h.linkURL=h.linkName=h.linkType=d.s_objectID=h.pe=h.pev1=h.pev2=h.pev3=h.e=h.lightProfileID=0},h.za=[],h.registerPreTrackCallback=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);"function"==typeof e?h.za.push([e,t]):h.debugTracking&&h.F("DEBUG: Non function type passed to registerPreTrackCallback")},h.cb=function(e){h.wa(h.za,e)},h.ya=[],h.registerPostTrackCallback=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);"function"==typeof e?h.ya.push([e,t]):h.debugTracking&&h.F("DEBUG: Non function type passed to registerPostTrackCallback")},h.bb=function(e){h.wa(h.ya,e)},h.wa=function(e,t){if("object"==typeof e)for(var i=0;i<e.length;i++){var n=e[i][0],r=e[i][1];if(r.unshift(t),"function"==typeof n)try{n.apply(null,r)}catch(e){h.debugTracking&&h.F(e.message)}}},h.tl=h.trackLink=function(e,t,i,n,r){return h.linkObject=e,h.linkType=t,h.linkName=i,r&&(h.l=e,h.A=r),h.track(n)},h.trackLight=function(e,t,i,n){return h.lightProfileID=e,h.lightStoreForSeconds=t,h.lightIncrementBy=i,h.track(n)},h.clearVars=function(){var e,t;for(e=0;e<h.g.length;e++)("prop"==(t=h.g[e]).substring(0,4)||"eVar"==t.substring(0,4)||"hier"==t.substring(0,4)||"list"==t.substring(0,4)||"channel"==t||"events"==t||"eventList"==t||"products"==t||"productList"==t||"purchaseID"==t||"transactionID"==t||"state"==t||"zip"==t||"campaign"==t)&&(h[t]=void 0)},h.tagContainerMarker="",h.Gb=function(e,t){var i,n=h.trackingServer;i="";var r=h.dc,s="sc.",o=h.visitorNamespace;n?h.trackingServerSecure&&h.ssl&&(n=h.trackingServerSecure):(o||(0<=(n=(o=h.account).indexOf(","))&&(o=o.substring(0,n)),o=o.replace(/[^A-Za-z0-9]/g,"")),i||(i="2o7.net"),r=r?(""+r).toLowerCase():"d1","2o7.net"==i&&("d1"==r?r="112":"d2"==r&&(r="122"),s=""),n=o+"."+r+"."+s+i),i=h.ssl?"https://":"http://",r=h.AudienceManagement&&h.AudienceManagement.isReady()||0!=h.usePostbacks,i+=n+"/b/ss/"+h.account+"/"+(h.mobile?"5.":"")+(r?"10":"1")+"/JS-"+h.version+(h.Kb?"T":"")+(h.tagContainerMarker?"-"+h.tagContainerMarker:"")+"/"+e+"?AQB=1&ndh=1&pf=1&"+(r?"callback=s_c_il["+h._in+"].doPostbacks&et=1&":"")+t+"&AQE=1",h.cb(i),h.tb(i),h.ka()},h.Ua=/{(%?)(.*?)(%?)}/,h.Ob=RegExp(h.Ua.source,"g"),h.ub=function(e){if("object"==typeof e.dests)for(var t=0;t<e.dests.length;++t){var i=e.dests[t];if("string"==typeof i.c&&"aa."==i.id.substr(0,3))for(var n=i.c.match(h.Ob),r=0;r<n.length;++r){var s=n[r],o=s.match(h.Ua),a="";"%"==o[1]&&"timezone_offset"==o[2]?a=(new Date).getTimezoneOffset():"%"==o[1]&&"timestampz"==o[2]&&(a=h.yb()),i.c=i.c.replace(s,h.escape(a))}}},h.yb=function(){var e=new Date,t=new Date(6e4*Math.abs(e.getTimezoneOffset()));return h.k(4,e.getFullYear())+"-"+h.k(2,e.getMonth()+1)+"-"+h.k(2,e.getDate())+"T"+h.k(2,e.getHours())+":"+h.k(2,e.getMinutes())+":"+h.k(2,e.getSeconds())+(0<e.getTimezoneOffset()?"-":"+")+h.k(2,t.getUTCHours())+":"+h.k(2,t.getUTCMinutes())},h.k=function(e,t){return(Array(e+1).join(0)+t).slice(-e)},h.ta={},h.doPostbacks=function(e){if("object"==typeof e)if(h.ub(e),"object"==typeof h.AudienceManagement&&"function"==typeof h.AudienceManagement.isReady&&h.AudienceManagement.isReady()&&"function"==typeof h.AudienceManagement.passData)h.AudienceManagement.passData(e);else if("object"==typeof e&&"object"==typeof e.dests)for(var t=0;t<e.dests.length;++t){var i=e.dests[t];"object"==typeof i&&"string"==typeof i.c&&"string"==typeof i.id&&"aa."==i.id.substr(0,3)&&(h.ta[i.id]=new Image,h.ta[i.id].alt="",h.ta[i.id].src=i.c)}},h.tb=function(e){h.i||h.Cb(),h.i.push(e),h.ma=h.C(),h.Sa()},h.Cb=function(){h.i=h.Eb(),h.i||(h.i=[])},h.Eb=function(){var e,t;if(h.ra()){try{(t=d.localStorage.getItem(h.pa()))&&(e=d.JSON.parse(t))}catch(e){}return e}},h.ra=function(){var e=!0;return h.trackOffline&&h.offlineFilename&&d.localStorage&&d.JSON||(e=!1),e},h.Ja=function(){var e=0;return h.i&&(e=h.i.length),h.q&&e++,e},h.ka=function(){if(!h.q||(h.B&&h.B.complete&&h.B.G&&h.B.va(),!h.q))if(h.Ka=g,h.qa)h.ma>h.O&&h.Qa(h.i),h.ua(500);else{var e=h.ob();0<e?h.ua(e):(e=h.Ga())&&(h.q=1,h.Fb(e),h.Jb(e))}},h.ua=function(e){h.Ka||(e||(e=0),h.Ka=setTimeout(h.ka,e))},h.ob=function(){var e;return!h.trackOffline||h.offlineThrottleDelay<=0?0:(e=h.C()-h.Pa,h.offlineThrottleDelay<e?0:h.offlineThrottleDelay-e)},h.Ga=function(){if(0<h.i.length)return h.i.shift()},h.Fb=function(e){if(h.debugTracking){var t,i="AppMeasurement Debug: "+e;for(e=e.split("&"),t=0;t<e.length;t++)i+="\n\t"+h.unescape(e[t]);h.F(i)}},h.gb=function(){return h.marketingCloudVisitorID||h.analyticsVisitorID},h.Y=!1;try{n=JSON.parse('{"x":"y"}')}catch(e){n=null}for(n&&"y"==n.x?(h.Y=!0,h.X=function(e){return JSON.parse(e)}):d.$&&d.$.parseJSON?(h.X=function(e){return d.$.parseJSON(e)},h.Y=!0):h.X=function(){return null},h.Jb=function(e){var t,i,n;if(h.gb()&&2047<e.length&&("undefined"!=typeof XMLHttpRequest&&("withCredentials"in(t=new XMLHttpRequest)?i=1:t=0),t||"undefined"==typeof XDomainRequest||(t=new XDomainRequest,i=2),t&&(h.AudienceManagement&&h.AudienceManagement.isReady()||0!=h.usePostbacks)&&(h.Y?t.Ba=!0:t=0)),!t&&h.Ta&&(e=e.substring(0,2047)),!t&&h.d.createElement&&(0!=h.usePostbacks||h.AudienceManagement&&h.AudienceManagement.isReady())&&(t=h.d.createElement("SCRIPT"))&&"async"in t&&((n=(n=h.d.getElementsByTagName("HEAD"))&&n[0]?n[0]:h.d.body)?(t.type="text/javascript",t.setAttribute("async","async"),i=3):t=0),t||((t=new Image).alt="",t.abort||void 0===d.InstallTrigger||(t.abort=function(){t.src=g})),t.Da=function(){try{t.G&&(clearTimeout(t.G),t.G=0)}catch(e){}},t.onload=t.va=function(){if(h.bb(e),t.Da(),h.sb(),h.ga(),h.q=0,h.ka(),t.Ba){t.Ba=!1;try{h.doPostbacks(h.X(t.responseText))}catch(e){}}},t.onabort=t.onerror=t.Ha=function(){t.Da(),(h.trackOffline||h.qa)&&h.q&&h.i.unshift(h.rb),h.q=0,h.ma>h.O&&h.Qa(h.i),h.ga(),h.ua(500)},t.onreadystatechange=function(){4==t.readyState&&(200==t.status?t.va():t.Ha())},h.Pa=h.C(),1==i||2==i){var r=e.indexOf("?");n=e.substring(0,r),r=(r=e.substring(r+1)).replace(/&callback=[a-zA-Z0-9_.\[\]]+/,""),1==i?(t.open("POST",n,!0),t.send(r)):2==i&&(t.open("POST",n),t.send(r))}else if(t.src=e,3==i){if(h.Na)try{n.removeChild(h.Na)}catch(e){}n.firstChild?n.insertBefore(t,n.firstChild):n.appendChild(t),h.Na=h.B}t.G=setTimeout(function(){t.G&&(t.complete?t.va():(h.trackOffline&&t.abort&&t.abort(),t.Ha()))},5e3),h.rb=e,h.B=d["s_i_"+h.replace(h.account,",","_")]=t,(h.useForcedLinkTracking&&h.K||h.A)&&(h.forcedLinkTrackingTimeout||(h.forcedLinkTrackingTimeout=250),h.ha=setTimeout(h.ga,h.forcedLinkTrackingTimeout))},h.sb=function(){if(h.ra()&&!(h.Oa>h.O))try{d.localStorage.removeItem(h.pa()),h.Oa=h.C()}catch(e){}},h.Qa=function(e){if(h.ra()){h.Sa();try{d.localStorage.setItem(h.pa(),d.JSON.stringify(e)),h.O=h.C()}catch(e){}}},h.Sa=function(){if(h.trackOffline)for((!h.offlineLimit||h.offlineLimit<=0)&&(h.offlineLimit=10);h.i.length>h.offlineLimit;)h.Ga()},h.forceOffline=function(){h.qa=!0},h.forceOnline=function(){h.qa=!1},h.pa=function(){return h.offlineFilename+"-"+h.visitorNamespace+h.account},h.C=function(){return(new Date).getTime()},h.La=function(e){return 0!=(e=e.toLowerCase()).indexOf("#")&&0!=e.indexOf("about:")&&0!=e.indexOf("opera:")&&0!=e.indexOf("javascript:")},h.setTagContainer=function(e){var t,i,n;for(h.Kb=e,t=0;t<h._il.length;t++)if((i=h._il[t])&&"s_l"==i._c&&i.tagContainerName==e){if(h.R(i),i.lmq)for(t=0;t<i.lmq.length;t++)n=i.lmq[t],h.loadModule(n.n);if(i.ml)for(n in i.ml)if(h[n])for(t in e=h[n],n=i.ml[n])!Object.prototype[t]&&("function"!=typeof n[t]||(""+n[t]).indexOf("s_c_il")<0)&&(e[t]=n[t]);if(i.mmq)for(t=0;t<i.mmq.length;t++)n=i.mmq[t],h[n.m]&&((e=h[n.m])[n.f]&&"function"==typeof e[n.f]&&(n.a?e[n.f].apply(e,n.a):e[n.f].apply(e)));if(i.tq)for(t=0;t<i.tq.length;t++)h.track(i.tq[t]);i.s=h;break}},h.Util={urlEncode:h.escape,urlDecode:h.unescape,cookieRead:h.cookieRead,cookieWrite:h.cookieWrite,getQueryParam:function(e,t,i,n){var r,s="";return t||(t=h.pageURL?h.pageURL:d.location),i=i||"&",e&&t?(r=(t=""+t).indexOf("?"))<0?s:(t=i+t.substring(r+1)+i,n&&(0<=t.indexOf(i+e+i)||0<=t.indexOf(i+e+"="+i))?void 0:(0<=(r=t.indexOf("#"))&&(t=t.substr(0,r)+i),(r=t.indexOf(i+e+"="))<0||(0<=(r=(t=t.substring(r+i.length+e.length+1)).indexOf(i))&&(t=t.substring(0,r)),0<t.length&&(s=h.unescape(t))),s)):s}},h.H="supplementalDataID timestamp dynamicVariablePrefix visitorID marketingCloudVisitorID analyticsVisitorID audienceManagerLocationHint authState fid vmk visitorMigrationKey visitorMigrationServer visitorMigrationServerSecure charSet visitorNamespace cookieDomainPeriods fpCookieDomainPeriods cookieLifetime pageName pageURL customerPerspective referrer contextData currencyCode lightProfileID lightStoreForSeconds lightIncrementBy retrieveLightProfiles deleteLightProfiles retrieveLightData".split(" "),h.g=h.H.concat("purchaseID variableProvider channel server pageType transactionID campaign state zip events events2 products audienceManagerBlob tnt".split(" ")),h.na="timestamp charSet visitorNamespace cookieDomainPeriods cookieLifetime contextData lightProfileID lightStoreForSeconds lightIncrementBy".split(" "),h.P=h.na.slice(0),h.Aa="account allAccounts debugTracking visitor visitorOptedOut trackOffline offlineLimit offlineThrottleDelay offlineFilename usePlugins doPlugins configURL visitorSampling visitorSamplingGroup linkObject clickObject linkURL linkName linkType trackDownloadLinks trackExternalLinks trackClickMap trackInlineStats linkLeaveQueryString linkTrackVars linkTrackEvents linkDownloadFileTypes linkExternalFilters linkInternalFilters useForcedLinkTracking forcedLinkTrackingTimeout trackingServer trackingServerSecure ssl abort mobile dc lightTrackVars maxDelay expectSupplementalData usePostbacks registerPreTrackCallback registerPostTrackCallback AudienceManagement".split(" "),t=0;t<=250;t++)t<76&&(h.g.push("prop"+t),h.P.push("prop"+t)),h.g.push("eVar"+t),h.P.push("eVar"+t),t<6&&h.g.push("hier"+t),t<4&&h.g.push("list"+t);t="pe pev1 pev2 pev3 latitude longitude resolution colorDepth javascriptVersion javaEnabled cookiesEnabled browserWidth browserHeight connectionType homepage pageURLRest marketingCloudOrgID".split(" "),h.g=h.g.concat(t),h.H=h.H.concat(t),h.ssl=0<=d.location.protocol.toLowerCase().indexOf("https"),h.charSet="UTF-8",h.contextData={},h.offlineThrottleDelay=0,h.offlineFilename="AppMeasurement.offline",h.Pa=0,h.ma=0,h.O=0,h.Oa=0,h.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx",h.w=d,h.d=d.document;try{if(h.Ta=!1,navigator){var r=navigator.userAgent;("Microsoft Internet Explorer"==navigator.appName||0<=r.indexOf("MSIE ")||0<=r.indexOf("Trident/")&&0<=r.indexOf("Windows NT 6"))&&(h.Ta=!0)}}catch(e){}h.ga=function(){h.ha&&(d.clearTimeout(h.ha),h.ha=g),h.l&&h.K&&h.l.dispatchEvent(h.K),h.A&&("function"==typeof h.A?h.A():h.l&&h.l.href&&(h.d.location=h.l.href)),h.l=h.K=h.A=0},h.Ra=function(){h.b=h.d.body,h.b?(h.v=function(e){var t,i,n,r,s;if(!(h.d&&h.d.getElementById("cppXYctnr")||e&&e["s_fe_"+h._in])){if(h.Ca){if(!h.useForcedLinkTracking)return h.b.removeEventListener("click",h.v,!0),void(h.Ca=h.useForcedLinkTracking=0);h.b.removeEventListener("click",h.v,!1)}else h.useForcedLinkTracking=0;h.clickObject=e.srcElement?e.srcElement:e.target;try{if(!h.clickObject||h.N&&h.N==h.clickObject||!(h.clickObject.tagName||h.clickObject.parentElement||h.clickObject.parentNode))h.clickObject=0;else{var o=h.N=h.clickObject;if(h.la&&(clearTimeout(h.la),h.la=0),h.la=setTimeout(function(){h.N==o&&(h.N=0)},1e4),n=h.Ja(),h.track(),n<h.Ja()&&h.useForcedLinkTracking&&e.target){for(r=e.target;r&&r!=h.b&&"A"!=r.tagName.toUpperCase()&&"AREA"!=r.tagName.toUpperCase();)r=r.parentNode;if(r&&(s=r.href,h.La(s)||(s=0),i=r.target,e.target.dispatchEvent&&s&&(!i||"_self"==i||"_top"==i||"_parent"==i||d.name&&i==d.name))){try{t=h.d.createEvent("MouseEvents")}catch(e){t=new d.MouseEvent}if(t){try{t.initMouseEvent("click",e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}catch(e){t=0}t&&(t["s_fe_"+h._in]=t.s_fe=1,e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.preventDefault(),h.l=e.target,h.K=t)}}}}}catch(e){h.clickObject=0}}},h.b&&h.b.attachEvent?h.b.attachEvent("onclick",h.v):h.b&&h.b.addEventListener&&(navigator&&(0<=navigator.userAgent.indexOf("WebKit")&&h.d.createEvent||0<=navigator.userAgent.indexOf("Firefox/2")&&d.MouseEvent)&&(h.Ca=1,h.useForcedLinkTracking=1,h.b.addEventListener("click",h.v,!0)),h.b.addEventListener("click",h.v,!1))):setTimeout(h.Ra,30)},h.Ra(),e?h.setAccount(e):h.F("Error, missing Report Suite ID in AppMeasurement initialization"),h.loadModule("ActivityMap")}function s(e){var t,i,n,r,s,o=window.s_c_il,a=e.split(","),l=0;if(o)for(i=0;!l&&i<o.length;){if("s_c"==(t=o[i])._c&&(t.account||t.oun))if(t.account&&t.account==e)l=1;else for(n=t.account?t.account:t.oun,n=t.allAccounts?t.allAccounts:n.split(","),r=0;r<a.length;r++)for(s=0;s<n.length;s++)a[r]==n[s]&&(l=1);i++}return l||(t=new c(e)),t}c.getInstance=s,window.s_objectID||(window.s_objectID=0),function(){var e,t,i,n=window,r=n.s_giq;if(r)for(e=0;e<r.length;e++)(i=s((t=r[e]).oun)).setAccount(t.un),i.setTagContainer(t.tagContainerName);n.s_giq=0}(),window.AppMeasurement=c;var t=e.getCurrentApplication().getConfiguration().analytics.adobe,i=s(t.application.rsid);return i.visitor=Visitor.getInstance(t.application.mcorgid),i.trackingServer=t.application.trackingServer,i.ssl=t.application.ssl,i}),define("rofl/lib/analytics/adobe/video",function(){var F;return function(e){if(void 0===o)var o={};if(void 0===i)var i={};if(void 0===t)var t={};if(t.radio||(t.radio={}),t.plugin||(t.plugin={}),void 0===n)var n={};n.clock||(n.clock={}),function(e){"use strict";function d(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function a(e,t,i,n,r,s){return d((o=d(d(t,e),d(n,s)))<<(a=r)|o>>>32-a,i);var o,a}function h(e,t,i,n,r,s,o){return a(t&i|~t&n,e,t,r,s,o)}function g(e,t,i,n,r,s,o){return a(t&n|i&~n,e,t,r,s,o)}function p(e,t,i,n,r,s,o){return a(t^i^n,e,t,r,s,o)}function f(e,t,i,n,r,s,o){return a(i^(t|~n),e,t,r,s,o)}function l(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var i,n,r,s,o,a=1732584193,l=-271733879,c=-1732584194,u=271733878;for(i=0;i<e.length;i+=16)l=f(l=f(l=f(l=f(l=p(l=p(l=p(l=p(l=g(l=g(l=g(l=g(l=h(l=h(l=h(l=h(r=l,c=h(s=c,u=h(o=u,a=h(n=a,l,c,u,e[i],7,-680876936),l,c,e[i+1],12,-389564586),a,l,e[i+2],17,606105819),u,a,e[i+3],22,-1044525330),c=h(c,u=h(u,a=h(a,l,c,u,e[i+4],7,-176418897),l,c,e[i+5],12,1200080426),a,l,e[i+6],17,-1473231341),u,a,e[i+7],22,-45705983),c=h(c,u=h(u,a=h(a,l,c,u,e[i+8],7,1770035416),l,c,e[i+9],12,-1958414417),a,l,e[i+10],17,-42063),u,a,e[i+11],22,-1990404162),c=h(c,u=h(u,a=h(a,l,c,u,e[i+12],7,1804603682),l,c,e[i+13],12,-40341101),a,l,e[i+14],17,-1502002290),u,a,e[i+15],22,1236535329),c=g(c,u=g(u,a=g(a,l,c,u,e[i+1],5,-165796510),l,c,e[i+6],9,-1069501632),a,l,e[i+11],14,643717713),u,a,e[i],20,-373897302),c=g(c,u=g(u,a=g(a,l,c,u,e[i+5],5,-701558691),l,c,e[i+10],9,38016083),a,l,e[i+15],14,-660478335),u,a,e[i+4],20,-405537848),c=g(c,u=g(u,a=g(a,l,c,u,e[i+9],5,568446438),l,c,e[i+14],9,-1019803690),a,l,e[i+3],14,-187363961),u,a,e[i+8],20,1163531501),c=g(c,u=g(u,a=g(a,l,c,u,e[i+13],5,-1444681467),l,c,e[i+2],9,-51403784),a,l,e[i+7],14,1735328473),u,a,e[i+12],20,-1926607734),c=p(c,u=p(u,a=p(a,l,c,u,e[i+5],4,-378558),l,c,e[i+8],11,-2022574463),a,l,e[i+11],16,1839030562),u,a,e[i+14],23,-35309556),c=p(c,u=p(u,a=p(a,l,c,u,e[i+1],4,-1530992060),l,c,e[i+4],11,1272893353),a,l,e[i+7],16,-155497632),u,a,e[i+10],23,-1094730640),c=p(c,u=p(u,a=p(a,l,c,u,e[i+13],4,681279174),l,c,e[i],11,-358537222),a,l,e[i+3],16,-722521979),u,a,e[i+6],23,76029189),c=p(c,u=p(u,a=p(a,l,c,u,e[i+9],4,-640364487),l,c,e[i+12],11,-421815835),a,l,e[i+15],16,530742520),u,a,e[i+2],23,-995338651),c=f(c,u=f(u,a=f(a,l,c,u,e[i],6,-198630844),l,c,e[i+7],10,1126891415),a,l,e[i+14],15,-1416354905),u,a,e[i+5],21,-57434055),c=f(c,u=f(u,a=f(a,l,c,u,e[i+12],6,1700485571),l,c,e[i+3],10,-1894986606),a,l,e[i+10],15,-1051523),u,a,e[i+1],21,-2054922799),c=f(c,u=f(u,a=f(a,l,c,u,e[i+8],6,1873313359),l,c,e[i+15],10,-30611744),a,l,e[i+6],15,-1560198380),u,a,e[i+13],21,1309151649),c=f(c,u=f(u,a=f(a,l,c,u,e[i+4],6,-145523070),l,c,e[i+11],10,-1120210379),a,l,e[i+2],15,718787259),u,a,e[i+9],21,-343485551),a=d(a,n),l=d(l,r),c=d(c,s),u=d(u,o);return[a,l,c,u]}function c(e){var t,i="";for(t=0;t<32*e.length;t+=8)i+=String.fromCharCode(e[t>>5]>>>t%32&255);return i}function u(e){var t,i=[];for(i[(e.length>>2)-1]=void 0,t=0;t<i.length;t+=1)i[t]=0;for(t=0;t<8*e.length;t+=8)i[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return i}function n(e){var t,i,n="0123456789abcdef",r="";for(i=0;i<e.length;i+=1)t=e.charCodeAt(i),r+=n.charAt(t>>>4&15)+n.charAt(15&t);return r}function i(e){return unescape(encodeURIComponent(e))}function r(e){return c(l(u(t=i(e)),8*t.length));var t}function s(e,t){return function(e,t){var i,n,r=u(e),s=[],o=[];for(s[15]=o[15]=void 0,16<r.length&&(r=l(r,8*e.length)),i=0;i<16;i+=1)s[i]=909522486^r[i],o[i]=1549556828^r[i];return n=l(s.concat(u(t)),512+8*t.length),c(l(o.concat(n),640))}(i(e),i(t))}o.md5=function(e,t,i){return t?i?s(t,e):n(s(t,e)):i?r(e):n(r(e))}}(),function(e){"use strict";var t={startsWith:function(e,t){return 0==e.indexOf(t)}};o.StringUtils=t}(),function(e){"use strict";var r={clone:function(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},merge:function(e,t){var i=r.clone(e);for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);return i}};o.ObjectUtils=r}(),function(e){"use strict";function t(e,t,i){this.fn=e,this.ctx=t,this.params=i}t.prototype.run=function(){this.params?this.fn.apply(this.ctx,this.params):this.fn.apply(this.ctx)},e.radio.Command=t}(t),function(e){"use strict";function t(e,t){this._queue=[],this._lastTs=0,this._isSuspended=void 0!==e&&e,this._delay=void 0!==t?t:0}t.prototype.addCommand=function(e){this._queue.push(e),this._drain()},t.prototype.cancelAllCommands=function(){this._queue=[]},t.prototype.isEmpty=function(){return 0===this._queue.length},t.prototype.suspend=function(){this._isSuspended=!0},t.prototype.resume=function(){this._isSuspended=!1,this._drain()},t.prototype.flush=function(){this._isSuspended=!1;for(var e=0;e<this._queue.length;e++){this._queue[e].run()}this._queue=[]},t.prototype._drain=function(){if(!this._isSuspended&&!this._drainInProgress){this._drainInProgress=!0;var i=this;!function e(){var t=i._queue.shift();t?i._runCommand(t,function(){i._isSuspended||e()}):i._drainInProgress=!1}()}},t.prototype._runCommand=function(e,t){function i(){e.run(),null!=t&&t.call(n)}var n=this;if(0==this._lastTs)i();else{var r=(new Date).getTime(),s=r-this._lastTs;this._lastTs=r,s<this._delay?setTimeout(i,this._delay-s):i()}},e.radio.CommandQueue=t}(t),function(e){"use strict";function o(e,t){if(this._name=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._listeners={},this._requests={},this._commands={},this._isShutDown=!1}function s(e,t){if(e===t)return!0;for(var i=(e||"").split(o.SEPARATOR),n=(t||"").split(o.SEPARATOR),r=!0,s=0;s<i.length;s++)r=r&&(i[s]===o.WILDCARD||i[s]===n[s]);return r}o.WILDCARD="*",o.SEPARATOR=":",o.prototype.toString=function(){return"<channel: "+this._name+">"},o.prototype.shutdown=function(){this._isShutDown||(this._logger.debug(n,"#shutdown > Shutting down"),this.off(),this._requests={},this._commands={},this._isShutDown=!0)},o.prototype.on=function(e,t,i){this._isShutDown||(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push({fn:t,ctx:i}))},o.prototype.off=function(e,t,i){if(!this._isShutDown){if(t="function"==typeof t?t:null,!e&&null==t&&!i)return void(this._listeners={});if(e)this._removeListener(e,t,i);else for(e in this._listeners)this._listeners.hasOwnProperty(e)&&this._removeListener(e,t,i)}},o.prototype.trigger=function(e){if(!this._isShutDown)for(var t in this._listeners)if(this._listeners.hasOwnProperty(t)&&s(t,e.name))for(var i=this._listeners[t].slice(0),n=0;n<i.length;n++){var r=i[n];r.fn.call(r.ctx,e)}},o.prototype.comply=function(e,t,i){this._isShutDown||(this._commands[e]={cmd:t,ctx:i})},o.prototype.command=function(e,t){if(!this._isShutDown){var i=this._commands[e];return i?void i.cmd.call(i.ctx,t):void this._logger.warn(n,"#command > No command handler for: "+e)}},o.prototype.reply=function(e,t,i){this._isShutDown||(this._requests[e]={fn:t,ctx:i})},o.prototype.request=function(e){if(!this._isShutDown){var t=this._requests[e];return t?t.fn.call(t.ctx):(this._logger.warn(n,"#request > No request handler for: "+e),null)}},o.prototype._removeListener=function(e,t,i){t="function"==typeof t?t:null;var n=this._listeners[e];if(n){if(!n.length||null==t&&!i)return void delete this._listeners[e];for(var r=0;r<n.length;r++){var s=n[r];null!==t&&t!==s.fn||i&&i!==s.ctx||this._listeners[e].splice(r,1)}}};var n="radio::Channel";e.radio.Channel=o}(t),function(e){"use strict";function t(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._channels={}}var i=e.radio.Channel;t.prototype.channel=function(e){return this._channels[e]||(this._channels[e]=new i(e,this._logger)),this._channels[e]},t.prototype.shutdown=function(){for(var e in this._channels)this._channels.hasOwnProperty(e)&&this._channels[e].shutdown()},e.radio.Radio=t}(t),function(e){"use strict";t.extend=function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e}}(),function(e){"use strict";function t(){}t.prototype.write=function(e){throw new Error("Implementation error: Method must be overridden.")},e.ILogWriter=t}(t),function(e){"use strict";function t(){}t.prototype.write=function(e){window.console&&window.console.log&&window.console.log(e)},e.LogWriter=t}(t),function(e){"use strict";function t(){}t.prototype.setLogWriter=function(e){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getLogWriter=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getEnabled=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.debug=function(e,t){throw new Error("Implementation error: Method must be overridden.")},t.prototype.info=function(e,t){throw new Error("Implementation error: Method must be overridden.")},t.prototype.warn=function(e,t){throw new Error("Implementation error: Method must be overridden.")},t.prototype.error=function(e,t){throw new Error("Implementation error: Method must be overridden.")},e.ILogger=t}(t),function(e){"use strict";function t(){this._logWriter=new i}var i=e.LogWriter;t.prototype.setLogWriter=function(e){if(!e)throw new Error("Reference to the ILogWriter object cannot be NULL");this._logWriter=e,this._enabled=!1},t.prototype.getLogWriter=function(){return this._logWriter},t.prototype.getEnabled=function(){return this._enabled},t.prototype.enable=function(){this._enabled=!0},t.prototype.disable=function(){this._enabled=!1},t.prototype.debug=function(e,t){this._log(e,r,t)},t.prototype.info=function(e,t){this._log(e,n,t)},t.prototype.warn=function(e,t){this._log(e,s,t)},t.prototype.error=function(e,t){this._log(e,o,t)},t.prototype._log=function(e,t,i){if(t==o||this._enabled){var n="",r=new Date;n+="["+r.toTimeString()+"."+((s=r.getMilliseconds())<10?"00"+s:s<100?"0"+s:""+s)+"] ["+t+"] ",n+="["+e+"] "+i,this._logWriter.write(n)}var s};var n="INFO",r="DEBUG",s="WARN",o="ERROR";e.Logger=t}(t),function(e){"use strict";function t(e,t){this._pluginName=e,this._eventName=t}var i=e.radio.Channel;t.prototype.getPluginName=function(){return this._pluginName},t.prototype.getEventName=function(){return this._eventName},t.prototype.getName=function(){return this._pluginName+i.SEPARATOR+this._eventName},e.Trigger=t}(t),function(e){"use strict";function t(e,t){this.name=e,this.data=t}t.SUCCESS="success",t.ERROR="error",t.createFromTrigger=function(e){return new t(e.getName())},e.Event=t}(t),function(e){"use strict";function t(){this._events={}}t.prototype.addEventListener=function(e,t,i){e&&t&&(i=i||window,this._events[e]=this._events[e]||[],this._events[e].push({cb:t,ctx:i}))},t.prototype.removeEventListener=function(e,t,i){if(e&&t){i=i||window;var n,r,s=!1;for(r in this._events)if(e===r){s=!0;break}if(s){for(n=this._events[r].length-1;0<=n;n--){var o=this._events[r][n];t===o.cb&&i===o.ctx&&this._events[r].splice(n,1)}this._events[r].length||delete this._events[r]}}},t.prototype.dispatchEvent=function(e){var t,i;if(e.name)for(t in this._events)if(this._events.hasOwnProperty(t)&&e.name===t){var n=this._events[t].slice(0),r=n.length;for(i=0;i<r;i++)n[i].cb.call(n[i].ctx,e);break}},t.prototype.removeAllListeners=function(e){var t,i;if(e){for(i in this._events)if(this._events.hasOwnProperty(i)){for(t=this._events[i].length-1;0<=t;t--){this._events[i][t].ctx===e&&this._events[i].splice(t,1)}this._events[i].length||delete this._events[i]}}else this._events={}},e.EventDispatcher=t}(t),function(e){"use strict";function t(){}function s(){s.__super__.constructor.call(this),this._connection=null}var o=e.Event,i=e.EventDispatcher;t.GET="GET",s.RESPONSE="response",s.INSTANCE="instance",e.extend(s,i),s.prototype.close=function(){this.removeAllListeners(null)},s.prototype.load=function(e){e&&e.method&&e.url&&(e._xmlhttp=this._createCORSRequest(e),e._xmlhttp?e._xmlhttp.send():this._loadImage(e))},s.prototype._createCORSRequest=function(e){var t=null;if(void 0!==window.XMLHttpRequest){var i=new window.XMLHttpRequest;"withCredentials"in i&&(t=i).open(e.method,e.url,!0)}if(null==t&&void 0!==window.XDomainRequest&&(t=new window.XDomainRequest).open(e.method,e.url),t){var n={},r=n[s.INSTANCE]=this;t.onload=function(){return t.status&&400<=parseInt(t.status,10)?this.onerror():(n[s.RESPONSE]=t.responseText,void r.dispatchEvent(new o(o.SUCCESS,n)))},t.onerror=function(){r.dispatchEvent(new o(o.ERROR,n))}}return t},s.prototype._loadImage=function(e){this._connection||(this._connection=new Image,this._connection.alt=""),this._connection.src=e.url;var t={};t[s.RESPONSE]="",(t[s.INSTANCE]=this).dispatchEvent(new o(o.SUCCESS,t))},e.URLRequestMethod=t,e.URLRequest=function(e,t){this.url=e||null,this.method=t,this._xmlhttp=null},e.URLLoader=s}(t),function(e){"use strict";var t={getVersion:function(){return"js-2.0.2.123-150f2b"},getMajor:function(){return t.getNumberAtPosition(0)},getMinor:function(){return t.getNumberAtPosition(1)},getMicro:function(){return t.getNumberAtPosition(2)},getPatch:function(){return t.getNumberAtPosition(3)},getBuild:function(){return"150f2b"},getApiLevel:function(){return 4},getNumberAtPosition:function(e){return"2.0.2.123".split(".")[e]}};i.Version=t}(),function(e){"use strict";function t(e,t){this._message=e,this._details=t}t.prototype.getMessage=function(){return this._message},t.prototype.getDetails=function(){return this._details},e.ErrorInfo=t}(i),function(e){"use strict";i.HeartbeatConfig=function(){this.debugLogging=!1}}(),function(e){"use strict";function t(){}t.prototype.onError=function(e){},e.HeartbeatDelegate=t}(i),function(e){"use strict";function t(){}t.prototype.configure=function(e){throw new Error("Implementation error: Method must be overridden.")},t.prototype.bootstrap=function(e){throw new Error("Implementation error: Method must be overridden.")},t.prototype.setup=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.destroy=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getName=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.isInitialized=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.resolveData=function(e){throw new Error("Implementation error: Method must be overridden.")},e.plugin.IPlugin=t}(t),function(e){"use strict";function t(e,t,i,n){this.trigger=e,this.action=i,this.plugin=t,this._paramMappings={},this.mergeParams(n)}var n=e.plugin.ParamMapping;t.prototype.mergeParams=function(e){if(e)for(var t=0;t<e.length;t++){var i=e[t];this._paramMappings[i.getKeyName()]=i}},t.prototype.getParams=function(){var e=[];for(var t in this._paramMappings)this._paramMappings.hasOwnProperty(t)&&e.push(this._paramMappings[t]);return e},t.prototype.addParam=function(e){this._paramMappings[e.getKeyName()]=e},t.prototype.removeParam=function(e,t){var i=new n(e,t);this._paramMappings.hasOwnProperty(i.getKeyName())&&delete this._paramMappings[i.getKeyName()]},e.plugin.Behaviour=t}(t),function(e){"use strict";function t(e,t,i){this._pluginName=e,this._key=t,this._paramName=i||e+n.SEPARATOR+t}var n=e.radio.Channel;t.prototype.getPluginName=function(){return this._pluginName},t.prototype.getKey=function(){return this._key},t.prototype.getKeyName=function(){return this._pluginName+n.SEPARATOR+this._key},t.prototype.getParamName=function(){return this._paramName},e.plugin.ParamMapping=t}(t),function(e){"use strict";function i(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._plugins={},this._behaviours={},this._radio=new t(this._logger),this._dataChannel=this._radio.channel(r),this._ctrlChannel=this._radio.channel(a)}var n=e.Event,t=e.radio.Radio,s=e.radio.Channel,o=e.plugin.Behaviour;i.ERROR="error",i.prototype.addPlugin=function(e){var t=e.getName();this._plugins[t]&&this._logger.warn(l,"#addPlugin > Replacing plugin: "+t),(this._plugins[t]=e).bootstrap(this)},i.prototype.setupPlugins=function(){for(var e in this._plugins)this._plugins.hasOwnProperty(e)&&this._plugins[e].setup()},i.prototype.pluginExists=function(e){return!!this._plugins[e]},i.prototype.isPluginInitialized=function(e){return this._plugins[e]&&this._plugins[e].isInitialized()},i.prototype.on=function(e,t,i,n){this._dataChannel.on(e+s.SEPARATOR+t,i,n)},i.prototype.off=function(e,t,i,n){var r=e&&t?e+s.SEPARATOR+t:null;this._dataChannel.off(r,i,n)},i.prototype.trigger=function(e){var t=e.name,i=this._behaviours[t];if(i){var n,r,s,o,a,l={},c={};for(n=0;n<i.length;n++)if(o=(s=i[n]).getParams())for(r=0;r<o.length;r++)l[(a=o[r]).getPluginName()]=l[a.getPluginName()]||[],a.key in l[a.getPluginName()]||l[a.getPluginName()].push(a.getKey());for(var u in l)l.hasOwnProperty(u)&&(c[u]=this.request(u,l[u]));for(n=0;n<i.length;n++){var d={_behaviour:s=i[n],_eventData:e.data||{}};if(o=s.getParams()){for(r=0;r<o.length;r++)d[(a=o[r]).getParamName()]=c[a.getPluginName()]?c[a.getPluginName()][a.getKey()]:null;this.command(s.plugin.getName(),s.action,d)}}}this._dataChannel.trigger(e)},i.prototype.request=function(e,t){var i=this._plugins[e];return i&&t&&0!=t.length?i.resolveData(t):null},i.prototype.raise=function(e){this._errorInfo=e;var t=new n(i.ERROR,e);this._ctrlChannel.trigger(t)},i.prototype.getErrorInfo=function(){return this._errorInfo},i.prototype.destroy=function(){for(var e in this._radio.shutdown(),this._plugins)this._plugins.hasOwnProperty(e)&&this._plugins[e].destroy()},i.prototype.comply=function(e,t,i){this._dataChannel.comply(e.getName()+s.SEPARATOR+t,i,e)},i.prototype.command=function(e,t,i){this._dataChannel.command(e+s.SEPARATOR+t,i)},i.prototype.registerBehaviour=function(e,t,i,n){var r=e.getName(),s=new o(e,t,i,n);this._behaviours[r]=this._behaviours[r]||[],this._behaviours[r].push(s)};var r="data_channel",a="ctrl_channel",l="plugin::PluginManager";e.plugin.PluginManager=i}(t),function(e,t){"use strict";function i(e){this._name=e,this._isInitialized=!1,this._isDestroyed=!1,this._isEnabled=!0,this._dataResolver={},this._logTag="plugin::"+this.getName(),this._logger=new n}var n=e.Logger,r=e.Trigger,s=e.Event,o=t.ErrorInfo;i.INITIALIZED="initialized",i.prototype.configure=function(e){},i.prototype.bootstrap=function(e){this._pluginManager=e,this._isDestroyed&&this._pluginManager.raise(new o("Invalid state.","Plugin already destroyed."))},i.prototype.setup=function(){this._trigger(i.INITIALIZED),this._isInitialized=!0},i.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._teardown())},i.prototype.enable=function(){this._isEnabled=!0,this._enabled()},i.prototype.disable=function(){this._isEnabled=!1,this._disabled()},i.prototype.getName=function(){return this._name},i.prototype.getLogger=function(){return this._logger},i.prototype.isInitialized=function(){return this._isInitialized},i.prototype.resolveData=function(e){if(!this._isEnabled||!this._isInitialized)return this._logger.warn(this._logTag,"Unable to retrieve plugin data. Plugin: "+this._name+". Enabled: "+this._isEnabled+". Initialized: "+this._isInitialized+"."),null;if("function"==typeof this._dataResolver)return this._dataResolver.call(this,e);var t=null;if(e)for(var i=0;i<e.length;i++){var n=e[i];this._dataResolver.hasOwnProperty(n)&&(t=t||{},"function"==typeof this._dataResolver[n]?t[n]=this._dataResolver[n].call(this):t[n]=this._dataResolver[n])}return t},i.prototype.toString=function(){return"<plugin: "+this._name+">"},i.prototype._enabled=function(){},i.prototype._disabled=function(){},i.prototype._teardown=function(){},i.prototype._canProcess=function(){return this._isEnabled?!this._isDestroyed||(this._logger.error(this._logTag,"Plugin destroyed."),!1):(this._logger.error(this._logTag,"Plugin disabled."),!1)},i.prototype._trigger=function(e,t){var i=s.createFromTrigger(new r(this.getName(),e));i.data=t,this._pluginManager.trigger(i)},e.plugin.BasePlugin=i}(t,i),function(e){"use strict";function n(e,t,i){this.name=e,this.interval=t,this.isActive=!1,this.repeatCount=void 0!==i?i:s,this._nextTickTimestamp=0,this.reset()}function t(e,t){if(!e)throw new Error("Reference to the ClockService object cannot be NULL");if(this._service=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._isDestroyed=!1,this._timers={};var i=this;this._clock=window.setInterval(function(){i._onTick()},1e3*o)}n.prototype.reset=function(){this.tick=0,this._createdTimestamp=(new Date).getTime(),this._updateNextTickTimestamp()},n.prototype.shouldTick=function(){return(new Date).getTime()>this._nextTickTimestamp-o/2&&(this.tick++,this._updateNextTickTimestamp(),!0)},n.prototype._updateNextTickTimestamp=function(){this._nextTickTimestamp=this._createdTimestamp+1e3*this.interval*(this.tick+1)},t.prototype.createTimer=function(e,t,i){this._timers[e]=new n(e,t,i)},t.prototype.destroyTimer=function(e){delete this._timers[e]},t.prototype.resumeTimer=function(e,t){t=void 0!==t&&t,this._logger.debug(r,"#resumeTimer(name="+e+", reset="+t+")");var i=this._timers[e];i&&(i.isActive=!0,t&&i.reset())},t.prototype.pauseTimer=function(e,t){t=void 0!==t&&t,this._logger.debug(r,"#pauseTimer(name="+e+", reset="+t+")");var i=this._timers[e];i&&(i.isActive=!1,t&&i.reset())},t.prototype.isTimerPaused=function(e){var t=this._timers[e];return!!t&&!t.isActive},t.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._timers={},window.clearInterval(this._clock))},t.prototype._onTick=function(){for(var e in this._timers)if(this._timers.hasOwnProperty(e)){var t=this._timers[e];t.isActive&&t.shouldTick()&&(1<t.interval&&this._logger.debug(r,"#_onTick() > "+t.name+"("+t.tick+" | "+t.repeatCount+")"),0!=t.repeatCount?(this._service.onTick(t.name,t.interval,t.tick),t.repeatCount!=s&&t.repeatCount--):this.destroyTimer(t.name))}};var r="service.clock::TimerManager",s=-1,o=.25;e.clock.TimerDescriptor=n,e.clock.TimerManager=t}(n),function(e,t,i){"use strict";function n(e){if(n.__super__.constructor.call(this,a),!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._timerManager=new r(this,this._logger),this._setupDataResolver()}var r=i.clock.TimerManager,o=t.StringUtils,s=e.plugin.BasePlugin;e.extend(n,s),n.prototype.bootstrap=function(e){n.__super__.bootstrap.call(this,e),this._pluginManager.comply(this,l,this._cmdCreate),this._pluginManager.comply(this,u,this._cmdResume),this._pluginManager.comply(this,c,this._cmdPause),this._pluginManager.comply(this,d,this._cmdDestroy)},n.prototype._teardown=function(){this._timerManager.destroy()},n.prototype._cmdCreate=function(e){var t=e[p]||v;this._timerManager.createTimer(e[h],e[g],t)},n.prototype._cmdPause=function(e){this._timerManager.pauseTimer(e[h],!!e[_])},n.prototype._cmdResume=function(e){this._timerManager.resumeTimer(e[h],!!e[_])},n.prototype._cmdDestroy=function(e){this._timerManager.destroyTimer(e[h])},n.prototype.onTick=function(e,t,i){e+=".tick";var n={};n[h]=e,n[g]=t,n[f]=i,this._trigger(e,n)},n.prototype._setupDataResolver=function(){var s={},t=this._timerManager;s[m]=function(e){return t.isTimerPaused(e)},this._dataResolver=function(e){if(!e||0==e.length)return null;for(var t=null,i=0;i<e.length;i++){var n=e[i];if(t=t||{},o.startsWith(n,m)){var r=n.split(m+".");0<r.length&&(t[n]=s[m].call(this,r[1]))}}return t}};var a="service.clock",l="create",c="pause",u="resume",d="destroy",h="name",g="interval",p="repeat_count",f="tick",_="reset",m="is_paused",v=-1;i.clock.ClockService=n}(t,o,n),function(e,t,i){"use strict";function n(e,t){if(this._logger=new r,this._pluginManager=new s(this._logger),this._pluginManager.addPlugin(new o(this._logger)),t)for(var i=0;i<t.length;i++)this._pluginManager.addPlugin(t[i]);this._pluginManager.setupPlugins(),this._isDestroyed=!1}var r=e.Logger,s=e.plugin.PluginManager,o=t.clock.ClockService;n.prototype.configure=function(e){if(!e)throw new Error("Configuration object cannot be NULL.");e.debugLogging?this._logger.enable():this._logger.disable(),this._isDestroyed&&this._logger.error(a,"Instance is destroyed.")},n.prototype.destroy=function(){this._isDestroyed||(this._pluginManager.destroy(),this._isDestroyed=!0)};var a="Heartbeat";i.Heartbeat=n}(t,n,i),e.ADB||(e.ADB={}),e.ADB.core||(e.ADB.core=t),e.ADB.va||(e.ADB.va=i),e.ADB.va.utils||(e.ADB.va.utils=o),e.ADB.va.plugins||(e.ADB.va.plugins={})}(this),function(e){if(void 0===i)var i={};!function(e){"use strict";var t={ASSET_TYPE_VOD:"vod",ASSET_TYPE_LIVE:"live",ASSET_TYPE_LINEAR:"linear"};i.AssetType=t}(),function(e){"use strict";function t(){this.playerName=null,this.name=null,this.position=null,this.startTime=null}t.prototype.toString=function(){return"playerName="+this.playerName+", name="+this.name+", position="+this.position+", startTime="+this.startTime},e.AdBreakInfo=t}(i),function(e){"use strict";function t(){this.id=null,this.name=null,this.length=null,this.position=null}t.prototype.toString=function(){return"id="+this.id+", name="+this.name+", length="+this.length+", position="+this.position},e.AdInfo=t}(i),function(e){"use strict";function t(){this.name=null,this.length=null,this.position=null,this.startTime=null}t.prototype.toString=function(){return"name="+this.name+", length="+this.length+", position="+this.position+", startTime="+this.startTime},e.ChapterInfo=t}(i),function(e){"use strict";function t(){this.bitrate=null,this.fps=null,this.droppedFrames=null,this.startupTime=null}t.prototype.toString=function(){return"bitrate="+this.bitrate+", fps="+this.fps+", droppedFrames="+this.droppedFrames+", startupTime="+this.startupTime},e.QoSInfo=t}(i),function(e){"use strict";function t(){this.playerName=null,this.id=null,this.name=null,this.length=null,this.playhead=null,this.streamType=null,this.resumed=!1}t.prototype.toString=function(){return"playerName="+this.playerName+", id="+this.id+", name="+this.name+", length="+this.length+", playhead="+this.playhead+", streamType="+this.streamType+", resumed="+this.resumed},e.VideoInfo=t}(i),function(e){"use strict";i.VideoPlayerPluginConfig=function(){this.debugLogging=!1}}(),function(e){"use strict";function t(){}t.prototype.getVideoInfo=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getAdBreakInfo=function(){return null},t.prototype.getAdInfo=function(){return null},t.prototype.getChapterInfo=function(){return null},t.prototype.getQoSInfo=function(){return null},e.VideoPlayerPluginDelegate=t}(i),function(e,t){"use strict";function i(e){if(i.__super__.constructor.call(this,a),!e)throw new Error("PlayerPlugin delegate cannot be NULL.");this._delegate=e,this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1,this._isTrackingAd=!1,this._playheadTimer=null,this._previousPlayhead=-1,this._stalledPlayheadCount=0,this._playheadStalled=!1,this._videoIdle=!1,this._setupDataResolver()}var n=e.plugin.ParamMapping,r=e.Trigger,s=e.plugin.BasePlugin,o=t.VideoPlayerPluginConfig;e.extend(i,s),i.prototype.configure=function(e){if(!e)throw new Error("Reference to the configuration data cannot be NULL.");if(!(e instanceof o))throw new Error("Expected config data to be instance of VideoPlayerPluginConfig.");e.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure(debugLogging="+e.debugLogging+")")},i.prototype.bootstrap=function(e){i.__super__.bootstrap.call(this,e),this._registerCommands(),this._registerBehaviours()},i.prototype._cmdVideoIdleStart=function(e){this._logger.info(this._logTag,"#_cmdVideoIdleStart()"),this._videoIdle=!0},i.prototype._cmdVideoIdleResume=function(e){this._logger.info(this._logTag,"#_cmdVideoIdleResume()"),this._videoIdle&&(this._trigger(p),this._trigger(f),e.isInChapter&&this._trigger(T),e.isInAd&&(this._trigger(A),this._isTrackingAd=!0)),this._videoIdle=!1},i.prototype.trackSessionStart=function(){if(this._logger.info(this._logTag,"#trackSessionStart()"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,"#trackSessionStart() > No active tracking session.");if(this._isTrackingSessionStarted)return void this._logger.info(this._logTag,"#trackSessionStart() > Tracking session already started.");this._trigger(p),this._isTrackingSessionStarted=!0;var e=this._dataResolver(["video.resumed"]);e.hasOwnProperty("video.resumed")&&e["video.resumed"]&&this._trigger(f)}},i.prototype.trackVideoLoad=function(){this._logger.info(this._logTag,"#trackVideoLoad()"),this._canProcess()&&(this._trigger(h),this._isTrackingSessionActive=!0,this._isTrackingSessionStarted=!1)},i.prototype.trackVideoUnload=function(){if(this._logger.info(this._logTag,"#trackVideoUnload()"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,"#trackVideoUnload() > No active tracking session.");this._stopPlayheadTimer(),this._trigger(g),this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1,this._videoIdle=!1}},i.prototype.trackPlay=function(){this._logger.info(this._logTag,"#trackPlay()"),this._canProcess()&&this._startSessionIfNeeded("trackPlay")&&(this._trigger(v),this._startPlayheadTimer())},i.prototype.trackPause=function(){if(this._logger.info(this._logTag,"#trackPause()"),this._canProcess()&&this._startSessionIfNeeded("trackPause")){this._stopPlayheadTimer();var e={};e[L]=!1,this._trigger(C,e)}},i.prototype.trackBufferStart=function(){this._logger.info(this._logTag,"#trackBufferStart()"),this._canProcess()&&this._startSessionIfNeeded("trackBufferStart")&&(this._stopPlayheadTimer(),this._trigger(I))},i.prototype.trackBufferComplete=function(){this._logger.info(this._logTag,"#trackBufferComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackBufferComplete")&&(this._trigger(y),this._startPlayheadTimer())},i.prototype.trackSeekStart=function(){this._logger.info(this._logTag,"#trackSeekStart()"),this._canProcess()&&this._startSessionIfNeeded("trackSeekStart")&&(this._stopPlayheadTimer(),this._trigger(b))},i.prototype.trackSeekComplete=function(){if(this._logger.info(this._logTag,"#trackSeekComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackSeekComplete")){this._trigger(S),this._startPlayheadTimer();var e=this._dataResolver(["ad.isInAd"]);this._isTrackingAd=e.hasOwnProperty("ad.isInAd")&&e["ad.isInAd"]}},i.prototype.trackComplete=function(e){if(this._logger.info(this._logTag,"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackComplete")){var t={};t[R]=e,this._stopPlayheadTimer(),this._trigger(_,t)}},i.prototype.trackTimedMetadata=function(e){this._logger.info(this._logTag,"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackTimedMetadata")&&this._trigger(m,e)},i.prototype.trackChapterStart=function(){this._logger.info(this._logTag,"#trackChapterStart()"),this._canProcess()&&this._startSessionIfNeeded("#trackChapterStart")&&this._trigger(T)},i.prototype.trackChapterComplete=function(){this._logger.info(this._logTag,"trackChapterComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackChapterComplete")&&this._trigger(w)},i.prototype.trackAdStart=function(){this._logger.info(this._logTag,"#trackAdStart()"),this._canProcess()&&this._startSessionIfNeeded("trackAdStart")&&(this._trigger(A),this._isTrackingAd=!0)},i.prototype.trackAdComplete=function(){this._logger.info(this._logTag,"#trackAdComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackAdComplete")&&(this._trigger(E),this._isTrackingAd=!1)},i.prototype.trackBitrateChange=function(){this._logger.info(this._logTag,"#trackBitrateChange()"),this._canProcess()&&this._startSessionIfNeeded("trackBitrateChange")&&this._trigger(P)},i.prototype.trackVideoPlayerError=function(e){if(this._logger.info(this._logTag,"#trackVideoPlayerError(errorId="+e+")"),this._startSessionIfNeeded("trackVideoPlayerError")){var t={};t[x]=d,t[N]=e,this._trigger(D,t)}},i.prototype.trackApplicationError=function(e){if(this._logger.info(this._logTag,"#trackApplicationError(errorId="+e+")"),this._startSessionIfNeeded("trackApplicationError")){var t={};t[x]=u,t[N]=e,this._trigger(D,t)}},i.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoIdleStart",this._cmdVideoIdleStart),this._pluginManager.comply(this,"handleVideoIdleResume",this._cmdVideoIdleResume)},i.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new r(c,k),this,"handleVideoIdleStart"),this._pluginManager.registerBehaviour(new r(c,O),this,"handleVideoIdleResume",[new n(l,"ad.isInAd","isInAd"),new n(l,"chapter.isInChapter","isInChapter")])},i.prototype._setupDataResolver=function(){function i(){return l.video||(l.video=c._delegate.getVideoInfo(),c._logger.info(c._logTag,"Data from delegate > VideoInfo: "+l.video)),l.video}function n(){return l.ad||(l.ad=c._delegate.getAdInfo(),c._logger.info(c._logTag,"Data from delegate > AdInfo: "+l.ad)),l.ad}function r(){return l.pod||(l.pod=c._delegate.getAdBreakInfo(),c._logger.info(c._logTag,"Data from delegate > AdBreakInfo: "+l.pod)),l.pod}function s(){return l.chapter||(l.chapter=c._delegate.getChapterInfo(),c._logger.info(c._logTag,"Data from delegate > ChapterInfo: "+l.chapter)),l.chapter}function o(){return l.qos||(l.qos=c._delegate.getQoSInfo(),c._logger.info(c._logTag,"Data from delegate > QoSInfo: "+l.qos)),l.qos}var a={},l={},c=this;a["video.id"]=function(){var e=i(),t=e?e.id:null;return c._logger.debug(c._logTag,"Resolving video.id: "+t),t},a["video.name"]=function(){var e=i(),t=e?e.name:null;return c._logger.debug(c._logTag,"Resolving video.name: "+t),t},a["video.length"]=function(){var e=i(),t=e?e.length:NaN;return c._logger.debug(c._logTag,"Resolving video.length: "+t),t},a["video.playerName"]=function(){var e=i(),t=e?e.playerName:null;return c._logger.debug(c._logTag,"Resolving video.playerName: "+t),t},a["video.streamType"]=function(){var e=i(),t=e?e.streamType:null;return c._logger.debug(c._logTag,"Resolving video.streamType: "+t),t},a["video.playhead"]=function(){var e=i(),t=e?e.playhead:NaN;return c._logger.debug(c._logTag,"Resolving video.playhead: "+t),t},a["video.resumed"]=function(){var e=i(),t=!!e&&e.resumed;return c._logger.debug(c._logTag,"Resolving video.resumed: "+t),t},a["video.playheadStalled"]=function(){return this._playheadStalled},a["pod.name"]=function(){var e=r(),t=e?e.name:null;return c._logger.debug(c._logTag,"Resolving pod.name: "+t),t},a["pod.playerName"]=function(){var e=r(),t=e?e.playerName:null;return c._logger.debug(c._logTag,"Resolving pod.playerName: "+t),t},a["pod.position"]=function(){var e=r(),t=e?e.position:NaN;return c._logger.debug(c._logTag,"Resolving pod.position: "+t),t},a["pod.startTime"]=function(){var e=r(),t=e?e.startTime:NaN;return c._logger.debug(c._logTag,"Resolving pod.startTime: "+t),t},a["ad.isInAd"]=function(){var e=null!=n();return c._logger.debug(c._logTag,"Resolving ad.isInAd: "+e),e},a["ad.isInAdBreak"]=function(){var e=null!=r();return c._logger.debug(c._logTag,"Resolving ad.isInAdBreak: "+e),e},a["ad.id"]=function(){var e=n(),t=e?e.id:null;return c._logger.debug(c._logTag,"Resolving ad.id: "+t),t},a["ad.name"]=function(){var e=n(),t=e?e.name:null;return c._logger.debug(c._logTag,"Resolving ad.name: "+t),t},a["ad.length"]=function(){var e=n(),t=e?e.length:NaN;return c._logger.debug(c._logTag,"Resolving ad.length: "+t),t},a["ad.position"]=function(){var e=n(),t=e?e.position:NaN;return c._logger.debug(c._logTag,"Resolving ad.position: "+t),t},a["chapter.isInChapter"]=function(){var e=null!=s();return c._logger.debug(c._logTag,"Resolving chapter.isInChapter: "+e),e},a["chapter.name"]=function(){var e=s(),t=e?e.name:null;return c._logger.debug(c._logTag,"Resolving chapter.name: "+t),t},a["chapter.length"]=function(){var e=s(),t=e?e.length:NaN;return c._logger.debug(c._logTag,"Resolving chapter.length: "+t),t},a["chapter.position"]=function(){var e=s(),t=e?e.position:NaN;return c._logger.debug(c._logTag,"Resolving chapter.position: "+t),t},a["chapter.startTime"]=function(){var e=s(),t=e?e.startTime:NaN;return c._logger.debug(c._logTag,"Resolving chapter.startTime: "+t),t},a["qos.bitrate"]=function(){var e=o(),t=e?e.bitrate:NaN;return c._logger.debug(c._logTag,"Resolving qos.bitrate: "+t),t},a["qos.fps"]=function(){var e=o(),t=e?e.fps:NaN;return c._logger.debug(c._logTag,"Resolving qos.fps: "+t),t},a["qos.droppedFrames"]=function(){var e=o(),t=e?e.droppedFrames:NaN;return c._logger.debug(c._logTag,"Resolving qos.droppedFrames: "+t),t},a["qos.startupTime"]=function(){var e=o(),t=e?1e3*e.startupTime:NaN;return c._logger.debug(c._logTag,"Resolving qos.startupTime: "+t),t},this._dataResolver=function(e){if(!e||0==e.length)return null;l={};for(var t=null,i=0;i<e.length;i++){var n=e[i];(t=t||{})[n]=a.hasOwnProperty(n)?a[n].call(this):null}return t}},i.prototype._trackPlayheadStall=function(){this._canProcess()&&(this._playheadStalled||(this._logger.info(this._logTag,"#_trackPlayheadStall()"),this._stalledPlayheadCount=0,this._playheadStalled=!0,this._trigger(C)))},i.prototype._trackExitStall=function(){this._canProcess()&&(this._stalledPlayheadCount=0,this._playheadStalled&&(this._logger.info(this._logTag,"#_trackExitStall()"),this._playheadStalled=!1,this._trigger(v)))},i.prototype._startPlayheadTimer=function(){var i=this;this._playheadTimer||(this._playheadTimer=setInterval(function(){if(i._canProcess()){var e=i._dataResolver(["ad.isInAd","video.playhead"]);if(i._isTrackingAd)i._playheadStalled&&i._trackExitStall(),e.hasOwnProperty("ad.isInAd")&&!e["ad.isInAd"]&&(i._isTrackingAd=!1);else{var t=e["video.playhead"];t!=i._previousPlayhead?i._trackExitStall():0<=i._previousPlayhead&&t==i._previousPlayhead&&(i._stalledPlayheadCount++,i._stalledPlayheadCount==B&&i._trackPlayheadStall()),i._previousPlayhead=t}}},M))},i.prototype._stopPlayheadTimer=function(){this._playheadTimer&&(clearInterval(this._playheadTimer),this._playheadTimer=null),this._trackExitStall()},i.prototype._startSessionIfNeeded=function(e){return this._isTrackingSessionActive?(this._isTrackingSessionStarted||(this._logger.info(this._logTag,"#"+e+"() > Tracking session auto-start."),this.trackSessionStart()),!0):(this._logger.warn(this._logTag,"#"+e+"() > No active tracking session."),!1)};var a="player",l=a,c="adobe-heartbeat",u="sourceErrorExternal",d="sourceErrorSDK",h="video_load",g="video_unload",p="video_start",f="video_resume",_="video_complete",m="timed_metadata",v="play",C="pause",A="ad_start",E="ad_complete",I="buffer_start",y="buffer_complete",b="seek_start",S="seek_complete",T="chapter_start",w="chapter_complete",P="bitrate_change",D="track_error",k="video_idle_start",O="video_idle_resume",R="callback",L="filter_report",x="source",N="error_id",M=1001,B=2;t.VideoPlayerPlugin=i}(e.ADB.core,i),e.ADB.va.plugins.videoplayer||(e.ADB.va.plugins.videoplayer=i)}(this),function(e){if(void 0===t)var t={};t.clock||(t.clock={}),t.context||(t.context={}),t.filter||(t.filter={}),t.model||(t.model={}),t.network||(t.network={}),function(e,t){"use strict";function n(e,t,i,n,r){if(!t)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=t,!e)throw new Error("Reference to the pluginManager object cannot be NULL");if(this._pluginManager=e,!r)throw new Error("Reference to the logger object cannot be NULL");this._logTag="ah::Timer."+i,this._logger=r,this._isDestroyed=!1,this._createTimer(i,n),this._installHandlers()}var i=e.Event;n.KEY_NAME="name",n.KEY_INTERVAL="interval",n.KEY_RESET="reset",n.prototype.resume=function(e){this._logger.debug(this._logTag,"Starting timer: "+this._name);var t={};t[n.KEY_NAME]=r+"."+this._name,t[n.KEY_RESET]=e,this._pluginManager.command(s,l,t)},n.prototype.pause=function(e){this._logger.debug(this._logTag,"Stopping timer: "+this._name);var t={};t[n.KEY_NAME]=r+"."+this._name,t[n.KEY_RESET]=e,this._pluginManager.command(s,a,t)},n.prototype.destroy=function(){if(!this._isDestroyed){this._isDestroyed=!0,this._uninstallHandlers();var e={};e[n.KEY_NAME]=r+"."+this._name,this._pluginManager.command(s,c,e)}},n.prototype.setInterval=function(e){var t=u+"."+r+"."+this._name,i=this._pluginManager.request(s,[t])[t];this.pause(!0),this._createTimer(this._name,e),i||this.resume(!0)},n.prototype._cmdResume=function(e){var t=!1;null!=e&&e.hasOwnProperty(n.KEY_RESET)&&(t=e[n.KEY_RESET]),this.resume(t)},n.prototype._cmdPause=function(e){var t=!1;null!=e&&e.hasOwnProperty(n.KEY_RESET)&&(t=e[n.KEY_RESET]),this.pause(t)},n.prototype._onTick=function(e,t){this._channel.trigger(new i("clock:"+this._name+".tick",t))},n.prototype._installHandlers=function(){this._channel.comply("clock:"+this._name+".resume",this._cmdResume,this),this._channel.comply("clock:"+this._name+".pause",this._cmdPause,this),this._pluginManager.on(s,r+"."+this._name+".tick",this._onTick,this)},n.prototype._uninstallHandlers=function(){this._channel.off(null,null,this),this._pluginManager.off(null,null,null,this)},n.prototype._createTimer=function(e,t){this._name=e,this._interval=t;var i={};i[n.KEY_NAME]=r+"."+this._name,i[n.KEY_INTERVAL]=this._interval,this._pluginManager.command(s,o,i)};var r="heartbeat",s="service.clock",o="create",a="pause",l="resume",c="destroy",u="is_paused";t.clock.Timer=n}(e.ADB.core,t),function(e,t){"use strict";function n(e,t,i){n.__super__.constructor.call(this,e,t,s,a,i)}var i=e.Event,r=t.clock.Timer;e.extend(n,r),n.prototype._onCheckStatusComplete=function(e){var t=e.data[d];if(this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+t+")"),t){if(t==this._interval)return void this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");o<t?(this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Interval value too large: "+t),this.setInterval(o)):(this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+t),this.setInterval(t))}else this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(a)},n.prototype._getSettings=function(e){this._logger.debug(this._logTag,"#_getSettings()"),this._channel.trigger(new i(l))},n.prototype._installHandlers=function(){n.__super__._installHandlers.call(this),this._channel.on(c,this._getSettings,this),this._channel.on(u,this._onCheckStatusComplete,this),this._channel.reply(d,function(){return this._interval},this)};var s="check_status",o=600,a=60,l="clock:check_status.tick",c="clock:check_status.get_settings",u="net:check_status_complete",d="check_status_interval";t.clock.CheckStatusTimer=n}(e.ADB.core,t),function(e,t){"use strict";function n(e,t,i){n.__super__.constructor.call(this,e,t,r,s,i)}var i=t.clock.Timer;e.extend(n,i),n.prototype._onCheckStatusComplete=function(e){var t=e.data[o];if(this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+t+")"),t){if(t==this._interval)return void this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+t),this.setInterval(t)}else this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(s)},n.prototype._installHandlers=function(){n.__super__._installHandlers.call(this),this._channel.on(a,this._onCheckStatusComplete,this),this._channel.reply(o,function(){return this._interval},this)};var r="reporting",s=10,o="reporting_interval",a="net:check_status_complete";t.clock.ReportingTimer=n}(e.ADB.core,t),function(e,t){"use strict";function n(e,t,i){n.__super__.constructor.call(this,e,t,r,s,i)}var i=t.clock.Timer;e.extend(n,i);var r="idle",s=1800;t.clock.IdleTimer=n}(e.ADB.core,t),function(e,t){"use strict";function n(e,t,i){n.__super__.constructor.call(this,e,t,r,s,i)}var i=t.clock.Timer;e.extend(n,i);var r="flush_filter",s=.25;t.clock.FlushFilterTimer=n}(e.ADB.core,t),function(e,t){"use strict";function i(e,t,i){if(!e)throw new Error("Reference to the pluginManager object cannot be NULL");if(!t)throw new Error("Reference to the channel object cannot be NULL");if(!i)throw new Error("Reference to the logger object cannot be NULL");this._isDestroyed=!1,this._reportingTimer=new s(e,t,i),this._checkStatusTimer=new n(e,t,i),this._flushFilterTimer=new r(e,t,i),this._idleTimer=new o(e,t,i)}var n=t.clock.CheckStatusTimer,r=t.clock.FlushFilterTimer,s=t.clock.ReportingTimer,o=t.clock.IdleTimer;i.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._reportingTimer.destroy(),this._checkStatusTimer.destroy(),this._flushFilterTimer.destroy(),this._idleTimer.destroy())},t.clock.Clock=i}(e.ADB.core,t),function(e,t){"use strict";function n(e,t){this.value=e,this.hint=t}function i(e){this.realm=e,this.data={}}n.HINT_SHORT="short",i.prototype.setField=function(e,t,i){this.data[e]=new n(t,i)},i.prototype._createAccessor=function(e,t,i){var n=this;return function(){return arguments.length&&(n[e]=arguments[0],n.setField(t,arguments[0],i)),n[e]}},t.model.Dao=i,t.model.DaoField=n}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"asset"),this.adId=this._createAccessor("_adId","ad_id",null),this.sid=this._createAccessor("_sid","ad_sid",null),this.resolver=this._createAccessor("_resolver","resolver",null),this.podId=this._createAccessor("_podId","pod_id",null),this.podPosition=this._createAccessor("_podPosition","pod_position",null),this.podOffset=this._createAccessor("_podOffset","pod_offset",null),this.podName=this._createAccessor("_podName","pod_name",null),this.adLength=this._createAccessor("_adLength","ad_length",null),this.adName=this._createAccessor("_adName","ad_name",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.adId(e.adId()),this.sid(e.sid()),this.resolver(e.resolver()),this.podId(e.podId()),this.podPosition(e.podPosition()),this.podOffset(e.podOffset()),this.podName(e.podName()),this.adLength(e.adLength()),this.adName(e.adName())}else this.adId(""),this.sid(""),this.resolver(""),this.podId(""),this.podPosition(""),this.podOffset(0),this.podName(""),this.adLength(0),this.adName("")}var n=t.model.Dao;e.extend(i,n),t.model.AdDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"sc"),this.reportSuiteId=this._createAccessor("_reportSuiteId","rsid",null),this.trackingServer=this._createAccessor("_trackingServer","tracking_server",null),this.ssl=this._createAccessor("_ssl","ssl",r.HINT_SHORT),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.reportSuiteId(e.reportSuiteId()),this.trackingServer(e.trackingServer()),this.ssl(e.ssl())}else this.reportSuiteId(""),this.trackingServer(""),this.ssl(0)}var n=t.model.Dao,r=t.model.DaoField;e.extend(i,n),t.model.AdobeAnalyticsDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"stream"),this.id=this._createAccessor("_id","chapter_id",null),this.sid=this._createAccessor("_sid","chapter_sid",null),this.name=this._createAccessor("_name","chapter_name",null),this.position=this._createAccessor("_position","chapter_pos",null),this.length=this._createAccessor("_length","chapter_length",null),this.offset=this._createAccessor("_offset","chapter_offset",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.id(e.id()),this.sid(e.sid()),this.name(e.name()),this.position(e.position()),this.length(e.length()),this.offset(e.offset())}else this.id(""),this.sid(""),this.name(""),this.position(0),this.length(0),this.offset(0)}var n=t.model.Dao;e.extend(i,n),t.model.ChapterDao=i}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"asset"),this.type=this._createAccessor("_type","type",null),this.videoId=this._createAccessor("_videoId","video_id",null),this.publisher=this._createAccessor("_publisher","publisher",null),this.adData=this._createAccessor("_adData","ad_data",null),this.chapterData=this._createAccessor("_chapterData","chapter_data",null),this.length=this._createAccessor("_length","length",null),this.name=this._createAccessor("_name","name",null),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.type(e.type()),this.name(e.name()),this.videoId(e.videoId()),this.publisher(e.publisher()),this.length(e.length());var t=e.adData()?new r(e.adData()):null;this.adData(t);var i=e.chapterData()?new s(e.chapterData()):null;this.chapterData(i)}else this.type(""),this.name(""),this.videoId(""),this.publisher(""),this.length(0),this.adData(null),this.chapterData(null)}var i=t.model.Dao,r=t.model.AdDao,s=t.model.ChapterDao;e.extend(n,i),n.TYPE_AD="ad",n.TYPE_MAIN_CONTENT="main",t.model.AssetDao=n}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"event"),this.type=this._createAccessor("_type","type",null),this.duration=this._createAccessor("_duration","duration",null),this.playhead=this._createAccessor("_playhead","playhead",null),this.id=this._createAccessor("_id","id",null),this.source=this._createAccessor("_source","source",null),this.ts=this._createAccessor("_ts","ts",null),this.prevTs=this._createAccessor("_prevTs","prev_ts",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.type(e.type()),this.duration(e.duration()),this.playhead(e.playhead()),this.id(e.id()),this.source(e.source()),this.ts(e.ts()),this.prevTs(e.prevTs())}else this.type(""),this.duration(0),this.playhead(0),this.id(""),this.source(""),this.ts(0),this.prevTs(-1)}var n=t.model.Dao;e.extend(i,n),i.EVENT_TYPE_AA_START="aa_start",i.EVENT_TYPE_AA_AD_START="aa_ad_start",i.EVENT_TYPE_START="start",i.EVENT_TYPE_RESUME="resume",i.EVENT_TYPE_CHAPTER_START="chapter_start",i.EVENT_TYPE_CHAPTER_COMPLETE="chapter_complete",i.EVENT_TYPE_PLAY="play",i.EVENT_TYPE_PAUSE="pause",i.EVENT_TYPE_STALL="stall",i.EVENT_TYPE_BUFFER="buffer",i.EVENT_TYPE_BITRATE_CHANGE="bitrate_change",i.EVENT_TYPE_ERROR="error",i.EVENT_TYPE_COMPLETE="complete",t.model.EventDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"stream"),this.bitrate=this._createAccessor("_bitrate","bitrate",null),this.fps=this._createAccessor("_fps","fps",null),this.droppedFrames=this._createAccessor("_droppedFrames","dropped_frames",null),this.startupTime=this._createAccessor("_startup_time","startup_time",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.bitrate(e.bitrate()),this.fps(e.fps()),this.droppedFrames(e.droppedFrames()),this.startupTime(e.startupTime()),this.isStartupTimeOverridden=e.isStartupTimeOverridden}else this.bitrate(0),this.fps(0),this.droppedFrames(0),this.startupTime(0),this.isStartupTimeOverridden=!1}var n=t.model.Dao;e.extend(i,n),t.model.QoSDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"sp"),this.ovp=this._createAccessor("_ovp","ovp",null),this.sdk=this._createAccessor("_sdk","sdk",null),this.channel=this._createAccessor("_channel","channel",null),this.playerName=this._createAccessor("_playerName","player_name",null),this.libVersion=this._createAccessor("_libVersion","hb_version",null),this.apiLevel=this._createAccessor("_apiLevel","hb_api_lvl",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.ovp(e.ovp()),this.sdk(e.sdk()),this.channel(e.channel()),this.playerName(e.playerName()),this.libVersion(e.libVersion()),this.apiLevel(e.apiLevel())}else this.ovp(r),this.sdk(r),this.channel(r),this.playerName(""),this.libVersion(""),this.apiLevel(0)}var n=t.model.Dao;e.extend(i,n);var r="unknown";t.model.ServiceProviderDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"event"),this.sessionId=this._createAccessor("_sessionId","sid",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.sessionId(e.sessionId())}else this.sessionId(null)}var n=t.model.Dao;e.extend(i,n),t.model.SessionDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"stream"),this.type=this._createAccessor("_type","type",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.type(e.type())}else this.type(null)}var n=t.model.Dao;e.extend(i,n),t.model.StreamDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"user"),this.analyticsVisitorId=this._createAccessor("_analyticsVisitorId","aid",null),this.marketingCloudVisitorId=this._createAccessor("_marketingCloudVisitorId","mid",null),this.visitorId=this._createAccessor("_visitorId","id",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.analyticsVisitorId(e.analyticsVisitorId()),this.marketingCloudVisitorId(e.marketingCloudVisitorId()),this.visitorId(e.visitorId())}else this.analyticsVisitorId(null),this.marketingCloudVisitorId(null),this.visitorId(null)}var n=t.model.Dao;e.extend(i,n),t.model.UserDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"aam"),this.audienceManagerBlob=this._createAccessor("_audienceManagerBlob","blob",null),this.audienceManagerLocationHint=this._createAccessor("_audienceManagerLocationHint","loc_hint",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.audienceManagerBlob(e.audienceManagerBlob()),this.audienceManagerLocationHint(e.audienceManagerLocationHint())}else this.audienceManagerBlob(null),this.audienceManagerLocationHint(null)}var n=t.model.Dao;e.extend(i,n),t.model.AudienceManagerDao=i}(e.ADB.core,t),function(e,t){"use strict";var s=e.ObjectUtils,o=t.model.EventDao,a=t.model.AssetDao,l=t.model.StreamDao,c=t.model.QoSDao;t.model.TrackItem=function(e,t,i,n,r){this.eventData=new o,this.eventData.type(t),this.eventData.duration(0),this.eventData.ts((new Date).getTime()),this.eventData.playhead(i),this.assetData=new a(e._assetData),this.streamData=new l(e._streamData),this.qosData=new c(e._qosData),this.cuserData=s.clone(e._cuserData),this.meta=n,this.callback=r,this.filterReport=!0}}(e.ADB.va.utils,t),function(e,t){"use strict";var o=e.ObjectUtils,a=t.model.EventDao,l=t.model.AssetDao,c=t.model.StreamDao,u=t.model.QoSDao;t.model.CUserDao,t.model.Report=function(e,t,i,n,r,s){this.adobeAnalyticsData=e,this.userData=t,this.aamData=i,this.serviceProviderData=n,this.sessionData=r,this.eventData=new a(s.eventData),this.assetData=new l(s.assetData),this.streamData=new c(s.streamData),this.qosData=new u(s.qosData),this.cuserData=o.clone(s.cuserData),this.meta=o.clone(s.meta),this.callback=s.callback,this.filterReport=s.filterReport}}(e.ADB.va.utils,t),function(e){"use strict";function t(){}t.prototype.serializeReport=function(e){},t.prototype.serializeDao=function(e){},t.prototype.serializeMap=function(e){},t.prototype.serializeNumber=function(e,t,i,n){},t.prototype.serializeString=function(e,t,i,n){},e.model.ISerializer=t}(t),function(e,t){"use strict";function i(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e}var l=t.model.Dao,s=t.model.DaoField,n=t.model.ISerializer;e.extend(i,n),i.prototype.serializeReport=function(e){var t=[];return t.push(this.serializeDao(e.adobeAnalyticsData)),t.push(this.serializeDao(e.userData)),t.push(this.serializeDao(e.aamData)),t.push(this.serializeMap(e.cuserData,"cuser")),t.push(this.serializeDao(e.serviceProviderData)),t.push(this.serializeDao(e.sessionData)),t.push(this.serializeDao(e.eventData)),t.push(this.serializeDao(e.assetData)),t.push(this.serializeDao(e.streamData)),t.push(this.serializeDao(e.qosData)),t.push(this.serializeMap(e.meta,"meta")),{serializedOutput:t.filter(function(e){return!!e}).join("&"),callback:e.callback}},i.prototype.serializeDao=function(e){return this._processDao(e).filter(function(e){return!!e}).join("&")},i.prototype.serializeMap=function(e,t){var i=[],n=t||"meta";for(var r in e)e.hasOwnProperty(r)&&e[r]&&i.push("s:"+n+":"+r+"="+window.encodeURIComponent(e[r]));return i.join("&")},i.prototype.serializeNumber=function(e,t,i,n){var r=o;return null==t||isNaN(t)?null:(n===s.HINT_SHORT&&(r=a),r+":"+i+":"+e+"="+Math.floor(t))},i.prototype.serializeString=function(e,t,i,n){return t?r+":"+i+":"+e+"="+window.encodeURIComponent(t):null},i.prototype._processDao=function(e){var t=[];for(var i in e.data)if(e.data.hasOwnProperty(i)){var n=e.data[i],r=n.value,s=n.hint,o=null,a=e.realm;if(null==r)continue;"number"==typeof r?o=this.serializeNumber(i,r,a,s):"string"==typeof r?o=this.serializeString(i,r,a,s):r instanceof l?o=this.serializeDao(r):this._logger.warn(c,"#_processDao() > Unable to serialize DAO. Field: "+i+". Value: "+r+"."),o&&t.push(o)}return t};var c="ah::QuerystringSerializer",o="l",a="h",r="s";t.model.QuerystringSerializer=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t){if(!e)throw new Error("Reference to the data object cannot be NULL");if(this._data=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t}i.prototype.parse=function(){var e,t,i,n,r,s;window.DOMParser?r=(new window.DOMParser).parseFromString(this._data,"text/xml"):((r=new window.ActiveXObject("Microsoft.XMLDOM")).async=!1,r.loadXML(this._data));(s=parseInt(r.getElementsByTagName("trackingInterval")[0].childNodes[0].nodeValue,10))&&(e=s),(s=parseInt(r.getElementsByTagName("setupCheckInterval")[0].childNodes[0].nodeValue,10))&&(t=s),(s=parseInt(r.getElementsByTagName("trackExternalErrors")[0].childNodes[0].nodeValue,10))&&(i=1==s),n=!r.getElementsByTagName("nielsenEnabled")[0]||1==(s=parseInt(r.getElementsByTagName("nielsenEnabled")[0].childNodes[0].nodeValue,10));var o={};return o[l]=e,o[c]=t,o[u]=i,o[d]=n,this._logger.debug(a,"#parse() > Obtained configuration settings."),o};var a="ah::SettingsParser",l="reporting_interval",c="check_status_interval",u="track_external_errors",d="nielsen_enabled";t.network.SettingsParser=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t){if(this._trackingServer=null,this._checkStatusServer=null,this._publisher=null,this._isConfigured=!1,this._isDestroyed=!1,this._quietMode=!1,this._visitorOptedOut=!1,this._prevReportSent=null,!e)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._serializer=new n(t),this._installEventListeners()}var l=e.Event,c=e.URLRequestMethod,u=e.URLRequest,d=e.URLLoader,o=t.network.SettingsParser,n=t.model.QuerystringSerializer;i.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(h,"#destroy()"),this._uninstallEventListeners())},i.prototype._onApiConfig=function(e){var t=e.data;this._logger.debug(h,"#_onApiConfig(sb_server="+t[r]+", check_status_server="+t[s]+", publisher="+t[a]+", quiet_mode="+t[g]+", ssl="+t[p]+")"),this._trackingServer=this._updateRequestProtocol(t[r],t[p]),this._checkStatusServer=this._updateRequestProtocol(t[s],t[p]),this._publisher=t[a],this._quietMode=t[g],this._isConfigured=!0},i.prototype._onUpdateVisitorOptOut=function(e){var t=e.data;this._logger.debug(h,"#_onUpdateVisitorOptOut(visitor_opt_out="+t[_]+")"),this._visitorOptedOut=t[_]},i.prototype._onFilterReportAvailable=function(e){var t=e.data;if(this._isConfigured){var i=t[f],n=this._serializer.serializeReport(i),r=this._trackingServer+"/?"+n.serializedOutput;if(this._prevReportSent&&this._prevReportSent.eventData&&i.eventData&&this._prevReportSent.eventData.playhead==i.eventData.playhead&&this._prevReportSent.eventData.ts==i.eventData.ts&&this._prevReportSent.eventData.prevTs==i.eventData.prevTs&&this._prevReportSent.eventData.type==i.eventData.type)this._logger.debug(h,"#_onFilterReportAvailable() > Duplicate heartbeat report not sent for URL:\n"+r);else{this._prevReportSent=i;var s=new u(r,c.GET);this._logger.debug(h,"#_onFilterReportAvailable() > "+s.url);var o=this;if(!this._quietMode&&!this._visitorOptedOut){var a=new d;a.addEventListener(l.SUCCESS,function(e){a.close(),n.callback&&n.callback.call(null)},this),a.addEventListener(l.ERROR,function(e){a.close(),o._logger.warn(h,"#_onFilterReportAvailable() > Failed to send heartbeat report."),n.callback&&n.callback.call(null)},this),a.load(s)}}}else this._logger.warn(h,"#_onFilterReportAvailable() > Unable to send request: not configured.")},i.prototype._onClockCheckStatusTick=function(e){if(this._isConfigured)if(this._publisher){var i=this,t=this._publisher.replace(/[^a-zA-Z0-9]+/,"-").toLocaleLowerCase(),n=this._checkStatusServer+t+".xml?r="+(new Date).getTime(),r=new u(n,c.GET),s=new d;s.addEventListener(l.SUCCESS,function(e){if(e.data){var t=new o(e.data.response,i._logger).parse();t?i._channel.trigger(new l(E,t)):i._logger.warn(h,"#_onClockCheckStatusTick() > Failed to parse the config. settings.")}s.close()},this),s.addEventListener(l.ERROR,function(e){i._logger.warn(h,"#_onClockCheckStatusTick() > Failed to obtain the config. settings."),s.close()},this),this._logger.debug(h,"#_onClockCheckStatusTick() > Get new settings from: "+n),s.load(r)}else this._logger.warn(h,"#_onClockCheckStatusTick() > Publisher is NULL.");else this._logger.warn(h,"#_onClockCheckStatusTick() > Unable to send request: not configured.")},i.prototype._updateRequestProtocol=function(e,t){var i=e;return 0===i.indexOf("http://")?i=i.slice(7):0===i.indexOf("https://")&&(i=i.slice(8)),t?"https://"+i:"http://"+i},i.prototype._installEventListeners=function(){this._channel.on(m,this._onApiConfig,this),this._channel.on(v,this._onUpdateVisitorOptOut,this),this._channel.on(C,this._onFilterReportAvailable,this),this._channel.on(A,this._onClockCheckStatusTick,this)},i.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var h="ah::Network",r="tracking_server",s="check_status_server",a="publisher",g="quiet_mode",p="ssl",f="report",_="visitor_opt_out",m="api:config",v="api:update_visitor_optout",C="filter:data_available",A="clock:check_status.tick",E="net:check_status_complete";t.network.Network=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t){if(!e)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._isDestroyed=!1,this._isBufferingInProgress=!1,this._reportBuffer={},this._tsHistory={},this._workQueue=new r,this._installEventListeners()}function c(e){var t=[];return e&&e.forEach(function(e){e.eventData.type()==s.EVENT_TYPE_PAUSE||e.eventData.type()==s.EVENT_TYPE_STALL?(!e.filterReport||e.eventData.duration()>C)&&t.push(e):t.push(e)}),t}function u(e){var t=-1,i=-1,n=[];return e.forEach(function(e){e.eventData.type()==s.EVENT_TYPE_START?e.assetData.type()==g.TYPE_MAIN_CONTENT?-1==t?t=n.push(e)-1:(e.eventData.prevTs(-1),n[t]=e):-1==i?i=n.push(e)-1:(e.eventData.prevTs(-1),n[i]=e):n.push(e)}),n}function d(n){var r=[];return n.forEach(function(e){if(e.eventData.type()==s.EVENT_TYPE_PLAY){if(e.eventData.duration()>v)r.push(e);else if(0==e.eventData.duration()&&e.assetData.type()==g.TYPE_MAIN_CONTENT){var t=(i=[],n.forEach(function(e){e.eventData.type()!=s.EVENT_TYPE_PLAY&&e.eventData.type()!=s.EVENT_TYPE_BUFFER&&e.eventData.type()!=s.EVENT_TYPE_START||i.push(e)}),i);t.indexOf(e)==t.length-1&&r.push(e)}}else r.push(e);var i}),r}var n=e.radio.Command,r=e.radio.CommandQueue,h=e.Event,s=t.model.EventDao,g=t.model.AssetDao;i.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(E,"#destroy()"),this._uninstallEventListeners(),this.clear())},i.prototype.clear=function(){this._logger.debug(E,"#clear()"),this._workQueue.cancelAllCommands(),this._reportBuffer={},this._tsHistory={},this._isBufferingInProgress=!1},i.prototype.flush=function(){this._workQueue.addCommand(new n(this._flushBufferReport,this))},i.prototype._bufferReport=function(e){if(!this._isDestroyed){var t=e[f];if(t){var i=t.sessionData.sessionId();this._reportBuffer[i]=this._reportBuffer[i]||[],this._reportBuffer[i].push(t)}if(!this._isBufferingInProgress){this._isBufferingInProgress=!0;var n={};n[l]=!0,n[_]=1,this._channel.command(m,n)}}},i.prototype._flushBufferReport=function(){function e(e){if(e)for(var t=0;t<e.length;t++){var i=e[t],n=i.sessionData.sessionId();s._tsHistory[n]=s._tsHistory[n]||{};var r=i.eventData.type()+"."+(i.assetData.type()==g.TYPE_AD?i.assetData.adData().adId():i.assetData.videoId());s._tsHistory[n].hasOwnProperty(r)&&i.eventData.prevTs(s._tsHistory[n][r]),s._tsHistory[n][r]=i.eventData.ts()}}if(!this._isDestroyed){var s=this;for(var t in this._reportBuffer)if(this._reportBuffer.hasOwnProperty(t)){var i=d(u(c(this._reportBuffer[t])));e(i);for(var n=0;n<i.length;n++){var r=i[n],o={};o[f]=r,this._channel.trigger(new h(p,o))}}this._reportBuffer={};var a=this._channel.request(A),l=this._tsHistory[a]||{};this._tsHistory={},this._tsHistory[a]=l,this._isBufferingInProgress=!1}},i.prototype._onContextReportAvailable=function(e){var t=e.data;this._workQueue.addCommand(new n(this._bufferReport,this,[t]))},i.prototype._onClockFlushFilterTick=function(e){this.flush()},i.prototype._installEventListeners=function(){this._channel.on(o,this._onContextReportAvailable,this),this._channel.on(a,this._onClockFlushFilterTick,this)},i.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var o="context:report_available",p="filter:data_available",a="clock:flush_filter.tick",l="reset",f="report",_="repeat_count",m="clock:flush_filter.resume",v=250,C=250,A="session_id",E="ah::ReportFilter";t.filter.ReportFilter=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t){this._onFail={fn:e,ctx:t}}var n=e.ErrorInfo;i.prototype.validateFields=function(e,t){if(!e)return this._fail("Data cannot be null");if(t)for(var i=0;i<t.length;i++){var n=t[i];switch(n){case"videoId":if(!e.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if("string"!=typeof e.videoId)return this._fail("The ID for the main video must be a String.");if(""===e.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case"streamType":if(!e.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof e.streamType)return this._fail("The stream type for the main video must be a String.");if(""===e.streamType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"videoLength":if(!e.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof e.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(e.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"playhead":if(!e.hasOwnProperty("playhead"))return this._fail("The playhead for the main video must be specified.");if("number"!=typeof e.playhead)return this._fail("The playhead for the main video must be a Number.");if(isNaN(e.playhead))return this._fail("The playhead for the main video cannot be NaN.");break;case"playerName":if(!e.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof e.playerName)return this._fail("The player name for the main video must be a String.");if(""===e.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case"rsid":if(!e.hasOwnProperty("rsid"))return this._fail("account (rsid) is required and has to be set in the AppMeasurement instance.");if("string"!=typeof e.rsid)return this._fail("account (rsid) of the AppMeasurement instance must be a String.");if(""===e.rsid)return this._fail("account (rsid) of the AppMeasurement instance  cannot be an empty string.");break;case"trackingServer":if(!e.hasOwnProperty("trackingServer"))return this._fail("trackingServer is required and has to be set in the AppMeasurement instance.");if("string"!=typeof e.trackingServer)return this._fail("trackingServer of the AppMeasurement instance must be a String.");if(""===e.trackingServer)return this._fail("trackingServer of the AppMeasurement instance cannot be an empty string.");break;case"podPlayerName":if(!e.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof e.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===e.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!e.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if("number"!=typeof e.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(e.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!e.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof e.adId)return this._fail("The ad ID must be a String.");if(""===e.adId)return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!e.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if("number"!=typeof e.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(e.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"chapterPosition":if(!e.hasOwnProperty("chapterPosition"))return this._fail("Position (index) of the chapter must be specified.");if("number"!=typeof e.chapterPosition)return this._fail("Position (index) of the chapter must be a Number.");if(isNaN(e.chapterPosition))return this._fail("Position (index) of the chapter cannot be NaN.");break;case"chapterOffset":if(!e.hasOwnProperty("chapterOffset"))return this._fail("Chapter start-time (offset) must be specified.");if("number"!=typeof e.chapterOffset)return this._fail("Chapter start-time (offset) must be a Number.");if(isNaN(e.chapterOffset))return this._fail("Chapter start-time (offset) cannot be NaN.");break;case"chapterLength":if(!e.hasOwnProperty("chapterLength"))return this._fail("The length of the chapter must be specified.");if("number"!=typeof e.chapterLength)return this._fail("The length of the chapter must be a Number.");if(isNaN(e.chapterLength))return this._fail("The length of the chapter cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+n)}}return!0},i.prototype._fail=function(e){var t=new n("Invalid input data",e);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,t),!1},t.context.InputDataValidator=i}(e.ADB.va,t),function(e,t){"use strict";function i(e,t){if(!t)throw new Error("Reference to the logger object cannot be NULL");if(this._logger=t,!e)throw new Error("Reference to the context object cannot be NULL");this._context=e}var n=t.model.Report;i.prototype.createReportForItem=function(e){return this._logger.debug(r,"Creating report for item: "+e.eventData.type()),new n(this._context._adobeAnalyticsData,this._context._userData,this._context._aamData,this._context._serviceProviderData,this._context._sessionData,e)};var r="ah::ReportFactory";t.context.ReportFactory=i}(e.ADB.core,t),function(e,t,i,n){"use strict";function r(e,t){if(!e)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._lastInBandItem=null,this._autoComputedStartupTime=0,this._reportingInterval=se,this._assetData=null,this._streamData=null,this._qosData=null,this._sessionData=null,this._cuserData=null,this._adobeAnalyticsData=new c,this._serviceProviderData=new u,this._userData=new d,this._aamData=new h,this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._activeAssetId=null,this._isDestroyed=!1,this._doNotOverrideEventDuration=!1,this._reportFactory=new A(this,this._logger),this._inputDataValidator=new E(function(e){this._logger.error(I,e.getMessage()+" | "+e.getDetails()),this._channel.trigger(new a(b,e))},this),this._stashedChapterData=null,this._stashedAdData=null,this._trackExternalErrors=!0,this._installEventListeners()}var s=i.md5,o=i.ObjectUtils,a=e.Event,l=n.model.SessionDao,c=n.model.AdobeAnalyticsDao,u=n.model.ServiceProviderDao,d=n.model.UserDao,h=n.model.AudienceManagerDao,g=n.model.EventDao,p=n.model.AssetDao,f=n.model.StreamDao,_=n.model.QoSDao,m=n.model.AdDao,v=n.model.ChapterDao,C=n.model.TrackItem,A=n.context.ReportFactory,E=n.context.InputDataValidator;r.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(I,"#destroy()"),this._uninstallEventListeners())},r.prototype._onApiAnalyticsStart=function(e){this._logger.debug(I,"#_onApiAnalyticsStart()");var t=e.data;if(this._checkCall("_onApiAnalyticsStart")&&this._inputDataValidator.validateFields(t,["playhead"])){this._userData.visitorId(t.vid),this._userData.analyticsVisitorId(t.aid),this._userData.marketingCloudVisitorId(t.mid),this._aamData.audienceManagerBlob(t.blob),this._aamData.audienceManagerLocationHint(t.loc_hint),t.customerIDs&&(this._cuserData=t.customerIDs),this._updateQoSInfo(t);var i=new C(this,g.EVENT_TYPE_AA_START,t.playhead,null,t._eventData[k]);i.assetData.adData(null),i.assetData.type(p.TYPE_MAIN_CONTENT),this._cuserData=null,this._sendHit(i)}},r.prototype._onApiAnalyticsAdStart=function(e){this._logger.debug(I,"#_onApiAnalyticsAdStart()");var t=e.data;if(this._checkCall("_onApiAnalyticsAdStart")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var i=new C(this,g.EVENT_TYPE_AA_AD_START,t.playhead,null,t._eventData[k]);this._sendHit(i)}},r.prototype._onApiVideoLoad=function(e){var t=e.data;this._logger.debug(I,"#_onApiVideoLoad(rsid="+t.rsid+", aa_trackingServer="+t.trackingServer+")"),this._resetInternalState(),this._inputDataValidator.validateFields(t,["rsid","trackingServer"])&&(this._sessionData.sessionId(this._generateSessionId()),this._isTrackingSessionActive=!0)},r.prototype._onApiVideoUnload=function(e){return this._logger.debug(I,"#_onApiVideoUnload()"),this._isTrackingSessionActive?void(this._isTrackingSessionActive=!1):void this._logger.debug(I,"#_onApiVideoUnload() > No active tracking session.")},r.prototype._onApiVideoStart=function(e){var t=e.data;if(this._logger.debug(I,"#_onApiVideoStart(id="+t.videoId+", name="+t.videoName+", length="+t.videoLength+", type="+t.streamType+", playerName="+t.playerName+")"),this._checkCall("_onApiVideoStart")&&this._inputDataValidator.validateFields(t,["videoId","streamType","videoLength","playhead","playerName"])){this._adobeAnalyticsData.reportSuiteId(t.rsid),this._adobeAnalyticsData.trackingServer(t.trackingServer),this._adobeAnalyticsData.ssl(Number(t.useSsl)),this._serviceProviderData.ovp(t.ovp),this._serviceProviderData.sdk(t.sdk),this._serviceProviderData.channel(t.channel),this._serviceProviderData.libVersion(t.version),this._serviceProviderData.apiLevel(t.apiLvl),this._activeAssetId=t.videoId,this._serviceProviderData.playerName(t.playerName),this._assetData.videoId(this._activeAssetId),this._assetData.length(t.videoLength),this._assetData.type(p.TYPE_MAIN_CONTENT),this._assetData.publisher(t.publisher),this._assetData.name(t.videoName),this._streamData.type(t.streamType),this._updateQoSInfo(t);var i=t.metaNielsen?o.merge(t.metaVideo,t.metaNielsen):t.metaVideo,n=new C(this,g.EVENT_TYPE_START,t.playhead,i,t._eventData[k]);this._sendHit(n)}},r.prototype._onApiVideoResume=function(e){var t=e.data;if(this._logger.debug(I,"#_onApiVideoResume(id="+t.videoId+", name="+t.videoName+", length="+t.videoLength+", type="+t.streamType+", playerName="+t.playerName+")"),this._checkCall("_onApiVideoResume")&&this._inputDataValidator.validateFields(t,["videoId","streamType","videoLength","playhead","playerName"])){this._activeAssetId=t.videoId,this._assetData.videoId(this._activeAssetId),this._assetData.length(t.videoLength),this._assetData.type(p.TYPE_MAIN_CONTENT),this._assetData.name(t.videoName),this._streamData.type(t.streamType);var i=new C(this,g.EVENT_TYPE_RESUME,t.playhead,null,t._eventData[k]);this._sendHit(i)}},r.prototype._onApiVideoComplete=function(e){this._logger.debug(I,"#_onApiVideoComplete()");var t=e.data;if(this._checkCall("_onApiVideoComplete")){var i=new C(this,g.EVENT_TYPE_COMPLETE,this._assetData.length(),null,t._eventData[k]);this._sendHit(i),this._isVideoComplete=!0}},r.prototype._onApiPlay=function(e){this._logger.debug(I,"#_onApiPlay()");var t=e.data;if(this._checkCall("_onApiPlay")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var i=new C(this,g.EVENT_TYPE_PLAY,t.playhead,null,t._eventData[k]);this._sendHit(i)}},r.prototype._onApiPause=function(e){this._logger.debug(I,"#_onApiPause()");var t=e.data;if(this._checkCall("_onApiPause")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var i=t.playheadStalled?g.EVENT_TYPE_STALL:g.EVENT_TYPE_PAUSE,n=new C(this,i,t.playhead,null,t._eventData[k]);t._eventData.hasOwnProperty(O)&&(n.filterReport=t._eventData[O]),this._sendHit(n)}},r.prototype._onApiBufferStart=function(e){this._logger.debug(I,"#_onApiBufferStart()");var t=e.data;if(this._checkCall("_onApiBufferStart")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var i=new C(this,g.EVENT_TYPE_BUFFER,t.playhead,null,t._eventData[k]);this._sendHit(i)}},r.prototype._onApiSeekStart=function(e){this._logger.debug(I,"#_onApiSeekStart()"),this._checkCall("_onApiSeekStart")&&(this._stashedAdData=this._assetData.adData(),this._stashedChapterData=this._assetData.chapterData(),this._assetData.adData(null),this._assetData.type(p.TYPE_MAIN_CONTENT),this._activeAssetId=this._assetData.videoId(),this._assetData.chapterData(null))},r.prototype._onApiSeekComplete=function(e){this._logger.debug(I,"#_onApiSeekComplete()");var t=e.data;if(this._checkCall("_onApiSeekComplete")&&this._inputDataValidator.validateFields(t,["playhead"])){if(t.isInAd){if(!this._inputDataValidator.validateFields(t,["adId","adPosition","podPosition","podPlayerName"]))return;var i=s(this._assetData.videoId())+"_"+t.podPosition;if(this._stashedAdData&&this._stashedAdData.podId()==i&&parseInt(this._stashedAdData.podPosition(),10)==t.adPosition)this._assetData.adData(this._stashedAdData),this._activeAssetId=this._stashedAdData.adId();else if(!this._assetData.adData()){this._activeAssetId=t.adId;var n=new m;n.adId(this._activeAssetId),n.adName(t.adName),n.adLength(t.adLength),n.podId(i),n.resolver(t.podPlayerName),n.podPosition(t.podPosition+""),n.podName(t.podName),n.podOffset(t.podSecond),n.sid(this._generateSessionId()),this._assetData.adData(n)}this._assetData.type(p.TYPE_AD)}else this._assetData.adData(null),this._assetData.type(p.TYPE_MAIN_CONTENT),this._activeAssetId=this._assetData.videoId();if(t.isInChapter){if(!this._inputDataValidator.validateFields(t,["chapterPosition","chapterLength","chapterOffset"]))return;if(this._stashedChapterData&&t.chapterPosition==this._stashedChapterData.position())this._assetData.chapterData(this._stashedChapterData);else if(!this._assetData.chapterData()){var r=new v;r.id(s(this._assetData.videoId())+"_"+t.chapterPosition),r.name(t.chapterName),r.length(t.chapterLength),r.position(t.chapterPosition),r.offset(t.chapterOffset),r.sid(this._generateSessionId()),this._assetData.chapterData(r)}}else this._assetData.chapterData(null);this._stashedAdData=null,this._stashedChapterData=null}},r.prototype._onApiAdStart=function(e){var t=e.data;if(this._logger.debug(I,"#_onApiAdStart(id="+t.adId+", player_name="+t.podPlayerName+", parent_name="+this._assetData.videoId()+", pod_pos="+t.adPosition+")"),this._checkCall("_onApiAdStart")&&this._inputDataValidator.validateFields(t,["playhead","podPosition","podPlayerName","adId","adPosition"])){this._activeAssetId=t.adId;var i=new m;i.adId(this._activeAssetId),i.adName(t.adName),i.adLength(t.adLength),i.resolver(t.podPlayerName),i.podId(s(this._assetData.videoId())+"_"+t.podPosition),i.podPosition(t.adPosition+""),i.podName(t.podName),i.podOffset(t.podSecond),i.sid(this._generateSessionId()),this._assetData.adData(i),this._assetData.type(p.TYPE_AD),this._updateQoSInfo(t);var n=o.merge(t.metaVideo,t.metaAd);n=t.metaNielsen?o.merge(n,t.metaNielsen):n;var r=new C(this,g.EVENT_TYPE_START,t.playhead,n,t._eventData[k]);this._sendHit(r)}},r.prototype._onApiAdComplete=function(e){this._logger.debug(I,"#_onApiAdComplete()");var t=e.data;if(this._checkCall("_onApiAdComplete")&&this._inputDataValidator.validateFields(t,["playhead"])){if(this._assetData.type()!=p.TYPE_AD)return void this._logger.warn(I,"#_onApiAdComplete() > Ignoring the ad complete event, because we are no longer in an ad.");this._updateQoSInfo(t);var i=new C(this,g.EVENT_TYPE_COMPLETE,t.playhead,null,t._eventData[k]);this._sendHit(i),this._assetData.adData(null),this._assetData.type(p.TYPE_MAIN_CONTENT),this._activeAssetId=this._assetData.videoId()}},r.prototype._onApiChapterStart=function(e){var t=e.data;if(this._logger.debug(I,"#_onApiChapterStart(name="+t.chapterName+", length="+t.chapterLength+", position="+t.chapterPosition+", chapter_offset="+t.chapterOffset+")"),this._checkCall("_onApiChapterStart")&&this._inputDataValidator.validateFields(t,["playhead","chapterPosition","chapterOffset","chapterLength"])){var i=new v;i.id(s(this._assetData.videoId())+"_"+t.chapterPosition),i.name(t.chapterName),i.length(t.chapterLength),i.position(t.chapterPosition),i.offset(t.chapterOffset),i.sid(this._generateSessionId()),this._assetData.chapterData(i),this._updateQoSInfo(t);var n=o.merge(t.metaVideo,t.metaChapter),r=new C(this,g.EVENT_TYPE_CHAPTER_START,t.playhead,n,t._eventData[k]);r.assetData.adData(null),r.assetData.type(p.TYPE_MAIN_CONTENT),this._sendHit(r)}},r.prototype._onApiChapterComplete=function(e){this._logger.debug(I,"#_onApiChapterComplete()");var t=e.data;if(this._checkCall("_onApiChapterComplete")&&this._inputDataValidator.validateFields(t,["playhead"])){if(!this._assetData.chapterData())return void this._logger.warn(I,"#_onApiChapterComplete() > Ignoring the chapter complete event, because we are no longer in a chapter.");this._updateQoSInfo(t);var i=new C(this,g.EVENT_TYPE_CHAPTER_COMPLETE,t.playhead,null,t._eventData[k]);i.assetData.adData(null),i.assetData.type(p.TYPE_MAIN_CONTENT),this._sendHit(i),this._assetData.chapterData(null)}},r.prototype._onApiBitrateChange=function(e){this._logger.debug(I,"#_onApiBitrateChange()");var t=e.data;if(this._checkCall("_onApiBitrateChange")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var i=new C(this,g.EVENT_TYPE_BITRATE_CHANGE,t.playhead,null,t._eventData[k]);this._sendHit(i)}},r.prototype._onApiTrackError=function(e){var t=e.data;if(this._logger.debug(I,"#_onApiTrackError(source="+t._eventData.source+", err_id="+t._eventData.error_id+")"),this._isTrackingSessionActive){if(this._trackExternalErrors||t._eventData.source===y){this._updateQoSInfo(t);var i=new C(this,g.EVENT_TYPE_ERROR,0,null,t._eventData[k]);i.eventData.id(t._eventData.error_id),i.eventData.source(t._eventData.source),this._sendHit(i)}}else this._logger.warn(I,"#_onApiTrackError() > No active tracking session.")},r.prototype._onApiTrackInternalError=function(e){var t=e.data;this._logger.debug(I,"#_onApiTrackInternalError(source="+t.source+", err_id="+t.error_id+")"),this._updateQoSInfo(t);var i=new C(this,g.EVENT_TYPE_ERROR,0);i.eventData.id(t.error_id),i.eventData.source(t.source),this._sendHit(i)},r.prototype._onApiQuantumEnd=function(e){this._logger.debug(I,"#_onApiQuantumEnd(interval="+this._channel.request(w)+")");var t=e.data;this._checkCall("_onApiQuantumEnd")&&this._inputDataValidator.validateFields(t,["playhead"])&&(this._lastInBandItem&&(this._lastInBandItem.eventData.playhead(t.playhead),this._updateQoSInfo(t),this._lastInBandItem.qosData.bitrate(this._qosData.bitrate()),this._lastInBandItem.qosData.fps(this._qosData.fps()),this._lastInBandItem.qosData.droppedFrames(this._qosData.droppedFrames()),this._lastInBandItem.qosData.startupTime(this._qosData.startupTime())),this._sendHit(this._lastInBandItem))},r.prototype._onNetworkCheckStatusComplete=function(e){var t=e.data;this._trackExternalErrors=t[x],this._reportingInterval=t[N],this._reportingInterval||(this._reportingInterval=se),this._logger.debug(I,"#_onNetworkCheckStatusComplete(track_ext_err="+this._trackExternalErrors+")")},r.prototype._onResetSessionId=function(e){var t=this._generateSessionId();this._sessionData=new l,this._sessionData.sessionId(t),this._logger.debug(I,"#_resetSessionId(new sessionId="+t+")")},r.prototype._installEventListeners=function(){this._channel.on(M,this._onApiAnalyticsStart,this),this._channel.on(B,this._onApiAnalyticsAdStart,this),this._channel.on(F,this._onApiVideoLoad,this),this._channel.on(U,this._onApiVideoUnload,this),this._channel.on(V,this._onApiVideoStart,this),this._channel.on(W,this._onApiVideoComplete,this),this._channel.on(H,this._onApiVideoResume,this),this._channel.on(Y,this._onApiAdStart,this),this._channel.on(K,this._onApiAdComplete,this),this._channel.on(G,this._onApiPlay,this),this._channel.on(j,this._onApiPause,this),this._channel.on(q,this._onApiBufferStart,this),this._channel.on(z,this._onApiSeekStart,this),this._channel.on(Q,this._onApiSeekComplete,this),this._channel.on(J,this._onApiChapterStart,this),this._channel.on(Z,this._onApiChapterComplete,this),this._channel.on(ee,this._onApiBitrateChange,this),this._channel.on(X,this._onApiTrackError,this),this._channel.on($,this._onApiTrackInternalError,this),this._channel.on(te,this._onApiQuantumEnd,this),this._channel.on(ne,this._onNetworkCheckStatusComplete,this),this._channel.on(D,this._onResetSessionId,this),this._channel.reply(P,function(){return this._sessionData&&this._sessionData.sessionId()?this._sessionData.sessionId():null},this)},r.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)},r.prototype._resetInternalState=function(){this._logger.debug(I,"#_resetInternalState()"),this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._autoComputedStartupTime=0,this._streamData=new f,this._qosData=new _,this._sessionData=new l,this._assetData=new p,this._cuserData=null,this._stashedAdData=null,this._stashedChapterData=null,this._lastInBandItem=null},r.prototype._generateSessionId=function(){return""+(new Date).getTime()+Math.floor(1e9*Math.random())},r.prototype._updateQoSInfo=function(e){this._qosData.bitrate(e.bitrate||0),this._qosData.fps(e.fps||0),this._qosData.droppedFrames(e.droppedFrames||0),null==e.startupTime||isNaN(e.startupTime)?(this._qosData.startupTime(this._autoComputedStartupTime),this._qosData.isStartupTimeOverridden=!1):(this._qosData.startupTime(e.startupTime),this._qosData.isStartupTimeOverridden=!0)},r.prototype._checkCall=function(e){return this._isTrackingSessionActive?!this._isVideoComplete||(this._logger.warn(I,"#"+e+"() > The video content already completed."),!1):(this._logger.warn(I,"#"+e+"() > No active tracking session."),!1)},r.prototype._updateLastInBandItem=function(e){var t=(new Date).getTime(),i=1e3*Math.abs(e.eventData.playhead()-this._lastInBandItem.eventData.playhead()),n=Math.abs(t-this._lastInBandItem.eventData.ts());this._lastInBandItem.eventData.type()!=g.EVENT_TYPE_PAUSE&&this._lastInBandItem.eventData.type()!=g.EVENT_TYPE_STALL?(i<=n*re||this._doNotOverrideEventDuration)&&n<=this._reportingInterval*re*1e3?this._lastInBandItem.eventData.duration(t-this._lastInBandItem.eventData.ts()):(this._logger.warn(I,"[WARNING] Resetting duration in lastInBandItem to 0. playheadDelta:"+i+" tsDelta:"+n+" event type:"+this._lastInBandItem.eventData.type()),this._lastInBandItem.eventData.duration(0)):this._lastInBandItem.eventData.duration(t-this._lastInBandItem.eventData.ts()),this._doNotOverrideEventDuration&&(this._doNotOverrideEventDuration=!1),this._lastInBandItem.eventData.ts(t),this._lastInBandItem.eventData.playhead(e.eventData.playhead()),this._lastInBandItem.qosData.startupTime(e.qosData.startupTime()),this._lastInBandItem.qosData.isStartupTimeOverridden=e.qosData.isStartupTimeOverridden},r.prototype._sendHit=function(e){function t(e){var t=n._reportFactory.createReportForItem(e);t.qosData.isStartupTimeOverridden||t.qosData.startupTime(n._autoComputedStartupTime);var i={};i[R]=t,n._channel.trigger(new a(ie,i)),t.eventData.type()!=g.EVENT_TYPE_PLAY&&t.eventData.type()!=g.EVENT_TYPE_BUFFER&&t.eventData.type()!=g.EVENT_TYPE_START||((r={})[L]=!0,n._channel.command(S,r))}var n=this,r={};switch(e.eventData.type()){case g.EVENT_TYPE_START:case g.EVENT_TYPE_PLAY:case g.EVENT_TYPE_PAUSE:case g.EVENT_TYPE_STALL:case g.EVENT_TYPE_BUFFER:this._lastInBandItem&&(this._updateLastInBandItem(e),this._lastInBandItem.eventData.type()==g.EVENT_TYPE_START&&this._lastInBandItem.assetData.type()==p.TYPE_MAIN_CONTENT&&(this._autoComputedStartupTime+=this._lastInBandItem.eventData.duration()),e!=this._lastInBandItem&&t(this._lastInBandItem)),t(e),this._lastInBandItem=e,(r={})[L]=!0,this._channel.command(S,r);break;case g.EVENT_TYPE_COMPLETE:this._lastInBandItem&&(e.assetData.type()==p.TYPE_AD&&(this._doNotOverrideEventDuration=!0),this._updateLastInBandItem(e),t(this._lastInBandItem)),t(e),e.assetData.type()==p.TYPE_MAIN_CONTENT?(this._lastInBandItem=null,(r={})[L]=!0,this._channel.command(T,r)):e.assetData.type()==p.TYPE_AD&&(this._lastInBandItem.assetData.adData(null),this._lastInBandItem.assetData.type(p.TYPE_MAIN_CONTENT),this._doNotOverrideEventDuration=!0);break;case g.EVENT_TYPE_CHAPTER_START:case g.EVENT_TYPE_CHAPTER_COMPLETE:this._lastInBandItem&&(this._updateLastInBandItem(e),t(this._lastInBandItem)),t(e),this._lastInBandItem&&(this._lastInBandItem.assetData.chapterData(e.eventData.type()==g.EVENT_TYPE_CHAPTER_START?new v(e.assetData.chapterData()):null),this._lastInBandItem.eventData.duration(0),t(this._lastInBandItem));break;default:t(e)}};var I="ah::Context",y="sourceErrorSDK",b="error",S="clock:reporting.resume",T="clock:reporting.pause",w="reporting_interval",P="session_id",D="reset_session_id",k="callback",O="filter_report",R="report",L="reset",x="track_external_errors",N="reporting_interval",M="api:aa_start",B="api:aa_ad_start",F="api:video_load",U="api:video_unload",V="api:video_start",W="api:video_complete",H="api:video_resume",Y="api:ad_start",K="api:ad_complete",G="api:play",j="api:pause",q="api:buffer_start",z="api:seek_start",Q="api:seek_complete",J="api:chapter_start",Z="api:chapter_complete",X="api:track_error",$="api:track_internal_error",ee="api:bitrate_change",te="api:quantum_end",ie="context:report_available",ne="net:check_status_complete",re=1.5,se=10;n.context.Context=r}(e.ADB.core,e.ADB.va,e.ADB.va.utils,t),function(e){"use strict";t.AdobeHeartbeatPluginConfig=function(e,t){this.trackingServer=e,this.publisher=t,this.ssl=!1,this.ovp="unknown",this.sdk="unknown",this.quietMode=!1,this.debugLogging=!1,this.__isPrimetime=!1,this.__psdkVersion=null}}(),function(e){"use strict";function t(){}t.prototype.onError=function(e){},e.AdobeHeartbeatPluginDelegate=t}(t),function(e,t,i){"use strict";function n(e){n.__super__.constructor.call(this,_),this._radio=new l(this._logger),this._channel=this._radio.channel(b),this._delegate=e,this._context=new d(this._channel,this._logger),this._filter=new h(this._channel,this._logger),this._network=new g(this._channel,this._logger),this._setupDataResolver()}var r=e.Event,s=e.Trigger,o=e.plugin.BasePlugin,a=e.plugin.ParamMapping,l=e.radio.Radio,c=t.ErrorInfo,u=t.Version,d=i.context.Context,h=i.filter.ReportFilter,g=i.network.Network,p=i.clock.Clock,f=i.AdobeHeartbeatPluginConfig;e.extend(n,o),n.prototype.configure=function(e){if(!e)throw new Error("Reference to the configuration data cannot be NULL.");if(!(e instanceof f))throw new Error("Expected config data to be instance of AdobeHeartbeatPluginConfig.");this._config=e,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.trackingServer+", publisher="+this._config.publisher+", quietMode="+this._config.quietMode+", ssl="+this._config.ssl+"})");var t=this._config.trackingServer+"/settings/",i={};i[$]=this._config.trackingServer,i[ee]=t,i[te]=this._config.publisher,i[ie]=this._config.quietMode,i[ne]=this._config.ssl,this._channel.trigger(new r(ae,i)),this._isConfigured=!0},n.prototype.bootstrap=function(e){n.__super__.bootstrap.call(this,e),this._channel.on(S,this._onError,this),this._clock=new p(this._pluginManager,this._channel,this._logger),this._channel.command(Pe),this._channel.trigger(new r(Ne)),this._registerCommands(),this._registerBehaviours()},n.prototype._teardown=function(){this._logger.debug(this._logTag,"#_teardown()"),this._radio.shutdown(),this._context.destroy(),this._clock.destroy(),this._filter.destroy(),this._network.destroy()},n.prototype._canProcess=function(){return this._isConfigured?this._errorInfo?(this._logger.error(this._logTag,"_canProcess() > Plugin in ERROR state."),!1):n.__super__._canProcess.call(this):(this._logger.error(this._logTag,"_canProcess() > Plugin not configured."),!1)},n.prototype._cmdAnalyticsError=function(e){this._errorInfo||(this._errorInfo=new c("Internal error","AdobeAnalyticsPlugin is in ERROR state."),this._trigger(S,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},n.prototype._cmdAnalyticsStart=function(e){if(this._canProcess()){var t={};t[re]=e.visitorOptedOut,this._channel.trigger(new r(le,t)),this._channel.trigger(new r(se,e))}},n.prototype._cmdAnalyticsAdStart=function(e){this._canProcess()&&this._channel.trigger(new r(oe,e))},n.prototype._cmdVideoLoad=function(e){this._errorInfo=null,this._canProcess()&&(this._isTrackingSessionActive&&this._channel.trigger(new r(ue,e)),this._isTrackingSessionActive=!1,this._isPaused=!0,this._isSeeking=!1,this._isBuffering=!1,this._isVideoIdle=!1,this._filter.clear(),this._channel.trigger(new r(ce,e)),this._isTrackingSessionActive=!0)},n.prototype._cmdVideoUnload=function(e){this._errorInfo=null,this._canProcess()&&(this._channel.trigger(new r(ue,e)),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._isTrackingSessionActive=!1)},n.prototype._cmdVideoStart=function(e){this._canProcess()&&this._channel.trigger(new r(de,e))},n.prototype._cmdVideoComplete=function(e){this._canProcess()&&this._channel.trigger(new r(he,e))},n.prototype._cmdVideoResume=function(e){this._canProcess()&&this._channel.trigger(new r(ge,e))},n.prototype._cmdPlay=function(e){this._canProcess()&&(this._isPaused=!1,this._resumePlaybackIfPossible(e))},n.prototype._cmdPause=function(e){this._canProcess()&&(this._channel.trigger(new r(me,e)),this._isPaused=!0,this._runIdleTimer(!0))},n.prototype._cmdAdStart=function(e){this._canProcess()&&(this._channel.trigger(new r(pe,e)),this._resumePlaybackIfPossible(e))},n.prototype._cmdAdComplete=function(e){this._canProcess()&&(this._channel.trigger(new r(fe,e)),e.isInAdBreak||this._resumePlaybackIfPossible(e))},n.prototype._cmdBufferStart=function(e){this._canProcess()&&(this._channel.trigger(new r(ve,e)),this._isBuffering=!0,this._runIdleTimer(!0))},n.prototype._cmdBufferComplete=function(e){this._canProcess()&&(this._isBuffering=!1,this._resumePlaybackIfPossible(e))},n.prototype._cmdSeekStart=function(e){this._canProcess()&&(this._channel.trigger(new r(Ce,e)),this._channel.trigger(new r(me,e)),this._isSeeking=!0,this._runIdleTimer(!0))},n.prototype._cmdSeekComplete=function(e){this._canProcess()&&(this._channel.trigger(new r(Ae,e)),this._isSeeking=!1,this._resumePlaybackIfPossible(e))},n.prototype._cmdChapterStart=function(e){this._canProcess()&&this._channel.trigger(new r(Ee,e))},n.prototype._cmdChapterComplete=function(e){this._canProcess()&&this._channel.trigger(new r(Ie,e))},n.prototype._cmdBitrateChange=function(e){this._canProcess()&&this._channel.trigger(new r(Se,e))},n.prototype._cmdTrackError=function(e){this._canProcess()&&this._channel.trigger(new r(ye,e))},n.prototype._cmdClockReportingTick=function(e){this._canProcess()&&this._channel.trigger(new r(Te,e))},n.prototype._cmdIdleTick=function(e){this._canProcess()&&(this._isVideoIdle=!0,this._trigger(q),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._trigger(G))},n.prototype._onError=function(e){this._errorInfo=e.data;var t={};t[Z]=we,t[X]=this._errorInfo.getMessage()+"|"+this._errorInfo.getDetails(),this._channel.trigger(new r(be,t)),this._runReportingTimer(!1),this._trigger(S,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo)},n.prototype._runIdleTimer=function(e){var t={};t[J]=!0,e?this._channel.command(Le,t):this._channel.command(xe,t)},n.prototype._runFlushFilterTimer=function(e){var t={};t[J]=!0,e?this._channel.command(Oe,t):this._channel.command(Re,t)},n.prototype._runReportingTimer=function(e){var t={};t[J]=!0,e?this._channel.command(De,t):this._channel.command(ke,t)},n.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleAnalyticsError",this._cmdAnalyticsError),this._pluginManager.comply(this,"handleAnalyticsStart",this._cmdAnalyticsStart),this._pluginManager.comply(this,"handleAnalyticsAdStart",this._cmdAnalyticsAdStart),this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad),this._pluginManager.comply(this,"handleVideoUnload",this._cmdVideoUnload),this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart),this._pluginManager.comply(this,"handleVideoComplete",this._cmdVideoComplete),this._pluginManager.comply(this,"handleVideoResume",this._cmdVideoResume),this._pluginManager.comply(this,"handlePlay",this._cmdPlay),this._pluginManager.comply(this,"handlePause",this._cmdPause),this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart),this._pluginManager.comply(this,"handleAdComplete",this._cmdAdComplete),this._pluginManager.comply(this,"handleBufferStart",this._cmdBufferStart),this._pluginManager.comply(this,"handleBufferComplete",this._cmdBufferComplete),this._pluginManager.comply(this,"handleSeekStart",this._cmdSeekStart),this._pluginManager.comply(this,"handleSeekComplete",this._cmdSeekComplete),this._pluginManager.comply(this,"handleChapterStart",this._cmdChapterStart),this._pluginManager.comply(this,"handleChapterComplete",this._cmdChapterComplete),this._pluginManager.comply(this,"handleBitrateChange",this._cmdBitrateChange),this._pluginManager.comply(this,"handleTrackError",this._cmdTrackError),this._pluginManager.comply(this,"handleClockReportingTick",this._cmdClockReportingTick),this._pluginManager.comply(this,"handleIdleTick",this._cmdIdleTick)},n.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new s(C,P),this,"handleVideoLoad",[new a(v,"rsid","rsid"),new a(v,"tracking_server","trackingServer")]),this._pluginManager.registerBehaviour(new s(C,D),this,"handleVideoUnload"),this._pluginManager.registerBehaviour(new s(C,k),this,"handleVideoStart",[new a(C,"video.id","videoId"),new a(C,"video.name","videoName"),new a(C,"video.length","videoLength"),new a(C,"video.playhead","playhead"),new a(C,"video.playerName","playerName"),new a(C,"video.streamType","streamType"),new a(C,"qos.fps","fps"),new a(C,"qos.droppedFrames","droppedFrames"),new a(C,"qos.bitrate","bitrate"),new a(C,"qos.startupTime","startupTime"),new a(v,"rsid","rsid"),new a(v,"tracking_server","trackingServer"),new a(v,"channel","channel"),new a(v,"meta.video.*","metaVideo"),new a(v,"ssl","useSsl"),new a(A,"meta","metaNielsen"),new a(m,"publisher","publisher"),new a(m,"sdk","sdk"),new a(m,"ovp","ovp"),new a(m,"version","version"),new a(m,"api_level","apiLvl")]),this._pluginManager.registerBehaviour(new s(C,R),this,"handleVideoComplete",[new a(C,"qos.fps","fps"),new a(C,"qos.droppedFrames","droppedFrames"),new a(C,"qos.bitrate","bitrate"),new a(C,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new s(C,O),this,"handleVideoResume",[new a(C,"video.id","videoId"),new a(C,"video.name","videoName"),new a(C,"video.length","videoLength"),new a(C,"video.playhead","playhead"),new a(C,"video.playerName","playerName"),new a(C,"video.streamType","streamType")]),this._pluginManager.registerBehaviour(new s(C,L),this,"handlePlay",[new a(C,"video.playhead","playhead"),new a(C,"qos.fps","fps"),new a(C,"qos.droppedFrames","droppedFrames"),new a(C,"qos.bitrate","bitrate"),new a(C,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new s(C,x),this,"handlePause",[new a(C,"video.playhead","playhead"),new a(C,"video.playheadStalled","playheadStalled"),new a(C,"qos.fps","fps"),new a(C,"qos.droppedFrames","droppedFrames"),new a(C,"qos.bitrate","bitrate"),new a(C,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new s(C,N),this,"handleAdStart",[new a(C,"video.playhead","playhead"),new a(C,"ad.id","adId"),new a(C,"ad.name","adName"),new a(C,"ad.length","adLength"),new a(C,"ad.position","adPosition"),new a(C,"pod.name","podName"),new a(C,"pod.playerName","podPlayerName"),new a(C,"pod.position","podPosition"),new a(C,"pod.startTime","podSecond"),new a(C,"qos.fps","fps"),new a(C,"qos.droppedFrames","droppedFrames"),new a(C,"qos.bitrate","bitrate"),new a(C,"qos.startupTime","startupTime"),new a(v,"meta.video.*","metaVideo"),new a(v,"meta.ad.*","metaAd"),new a(A,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new s(C,M),this,"handleAdComplete",[new a(C,"video.playhead","playhead"),new a(C,"ad.isInAdBreak","isInAdBreak"),new a(C,"qos.fps","fps"),new a(C,"qos.droppedFrames","droppedFrames"),new a(C,"qos.bitrate","bitrate"),new a(C,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new s(C,B),this,"handleBufferStart",[new a(C,"video.playhead","playhead"),new a(C,"qos.fps","fps"),new a(C,"qos.droppedFrames","droppedFrames"),new a(C,"qos.bitrate","bitrate"),new a(C,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new s(C,F),this,"handleBufferComplete",[new a(C,"video.playhead","playhead"),new a(C,"qos.fps","fps"),new a(C,"qos.droppedFrames","droppedFrames"),new a(C,"qos.bitrate","bitrate"),new a(C,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new s(C,U),this,"handleSeekStart",[new a(C,"video.playhead","playhead")]),this._pluginManager.registerBehaviour(new s(C,V),this,"handleSeekComplete",[new a(C,"video.playhead","playhead"),new a(C,"ad.isInAd","isInAd"),new a(C,"ad.id","adId"),new a(C,"ad.position","adPosition"),new a(C,"pod.playerName","podPlayerName"),new a(C,"pod.position","podPosition"),new a(C,"chapter.isInChapter","isInChapter"),new a(C,"chapter.position","chapterPosition"),new a(C,"chapter.name","chapterName"),new a(C,"chapter.length","chapterLength"),new a(C,"chapter.startTime","chapterOffset"),new a(C,"qos.fps","fps"),new a(C,"qos.droppedFrames","droppedFrames"),new a(C,"qos.bitrate","bitrate"),new a(C,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new s(C,W),this,"handleChapterStart",[new a(C,"video.playhead","playhead"),new a(C,"chapter.position","chapterPosition"),new a(C,"chapter.name","chapterName"),new a(C,"chapter.length","chapterLength"),new a(C,"chapter.startTime","chapterOffset"),new a(C,"qos.fps","fps"),new a(C,"qos.droppedFrames","droppedFrames"),new a(C,"qos.bitrate","bitrate"),new a(C,"qos.startupTime","startupTime"),new a(v,"meta.video.*","metaVideo"),new a(v,"meta.chapter.*","metaChapter"),new a(A,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new s(C,H),this,"handleChapterComplete",[new a(C,"video.playhead","playhead"),new a(C,"qos.fps","fps"),new a(C,"qos.droppedFrames","droppedFrames"),new a(C,"qos.bitrate","bitrate"),new a(C,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new s(C,Y),this,"handleBitrateChange",[new a(C,"video.playhead","playhead"),new a(C,"qos.fps","fps"),new a(C,"qos.droppedFrames","droppedFrames"),new a(C,"qos.bitrate","bitrate"),new a(C,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new s(C,K),this,"handleTrackError"),this._pluginManager.registerBehaviour(new s(E,z),this,"handleClockReportingTick",[new a(C,"video.playhead","playhead"),new a(C,"qos.fps","fps"),new a(C,"qos.droppedFrames","droppedFrames"),new a(C,"qos.bitrate","bitrate"),new a(C,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new s(E,Q),this,"handleIdleTick",[]),this._pluginManager.registerBehaviour(new s(m,q),this,"handleClockReportingTick",[new a(C,"video.playhead","playhead"),new a(C,"qos.fps","fps"),new a(C,"qos.droppedFrames","droppedFrames"),new a(C,"qos.bitrate","bitrate"),new a(C,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new s(v,S),this,"handleAnalyticsError"),this._pluginManager.registerBehaviour(new s(v,T),this,"handleAnalyticsStart",[new a(v,"vid","vid"),new a(v,"aid","aid"),new a(v,"mid","mid"),new a(v,"customerIDs","customerIDs"),new a(v,"visitorOptedOut","visitorOptedOut"),new a(v,"blob","blob"),new a(v,"loc_hint","loc_hint"),new a(C,"video.playhead","playhead"),new a(C,"qos.fps","fps"),new a(C,"qos.droppedFrames","droppedFrames"),new a(C,"qos.bitrate","bitrate"),new a(C,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new s(v,w),this,"handleAnalyticsAdStart",[new a(C,"video.playhead","playhead"),new a(C,"qos.fps","fps"),new a(C,"qos.droppedFrames","droppedFrames"),new a(C,"qos.bitrate","bitrate"),new a(C,"qos.startupTime","startupTime")])},n.prototype._setupDataResolver=function(){var r={},e=this;r.version=function(){return u.getVersion()},r.api_level=function(){return u.getApiLevel()},r.tracking_server=function(){return e._config?e._config.trackingServer:null},r.publisher=function(){return e._config?e._config.publisher:null},r.quiet_mode=function(){return!!e._config&&e._config.quietMode},r.ovp=function(){return e._config?e._config.ovp:null},r.sdk=function(){return e._config?e._config.sdk:null},r.is_primetime=function(){return!!e._config&&e._config.__isPrimetime},r.psdk_version=function(){return e._config?e._config.__psdkVersion:null},r.session_id=function(){return e._channel.request(I)},this._dataResolver=function(e){if(!e||0==e.length)return null;for(var t=null,i=0;i<e.length;i++){var n=e[i];(t=t||{})[n]=r.hasOwnProperty(n)?r[n].call(this):null}return t}},n.prototype._resumePlaybackIfPossible=function(e){this._errorInfo||this._isPaused||this._isSeeking||this._isBuffering||(this._isVideoIdle&&(this._isVideoIdle=!1,this._resumePlaybackFromIdle()),this._runIdleTimer(!1),this._channel.trigger(new r(_e,e)))},n.prototype._resumePlaybackFromIdle=function(){this._trigger(q),this._filter.clear(),this._channel.trigger(new r(y)),this._trigger(j),this._runReportingTimer(!0),this._runFlushFilterTimer(!0)};var _="adobe-heartbeat",m=_,v="adobe-analytics",C="player",A="nielsen",E="service.clock",I="session_id",y="reset_session_id",b="heartbeat-channel",S="error",T="aa_start",w="sc_ad_start",P="video_load",D="video_unload",k="video_start",O="video_resume",R="video_complete",L="play",x="pause",N="ad_start",M="ad_complete",B="buffer_start",F="buffer_complete",U="seek_start",V="seek_complete",W="chapter_start",H="chapter_complete",Y="bitrate_change",K="track_error",G="video_idle_start",j="video_idle_resume",q="quantum_close",z="heartbeat.reporting.tick",Q="heartbeat.idle.tick",J="reset",Z="source",X="error_id",$="tracking_server",ee="check_status_server",te="publisher",ie="quiet_mode",ne="ssl",re="visitor_opt_out",se="api:aa_start",oe="api:aa_ad_start",ae="api:config",le="api:update_visitor_optout",ce="api:video_load",ue="api:video_unload",de="api:video_start",he="api:video_complete",ge="api:video_resume",pe="api:ad_start",fe="api:ad_complete",_e="api:play",me="api:pause",ve="api:buffer_start",Ce="api:seek_start",Ae="api:seek_complete",Ee="api:chapter_start",Ie="api:chapter_complete",ye="api:track_error",be="api:track_internal_error",Se="api:bitrate_change",Te="api:quantum_end",we="sourceErrorHeartbeat",Pe="clock:check_status.resume",De="clock:reporting.resume",ke="clock:reporting.pause",Oe="clock:flush_filter.resume",Re="clock:flush_filter.pause",Le="clock:idle.resume",xe="clock:idle.pause",Ne="clock:check_status.get_settings";i.AdobeHeartbeatPlugin=n}(e.ADB.core,e.ADB.va,t),e.ADB.va.plugins.ah||(e.ADB.va.plugins.ah=t)}(this),function(e){if(void 0===t)var t={};!function(e,t){"use strict";function i(e,t){this._onFail={fn:e,ctx:t}}var n=e.ErrorInfo;i.prototype.validateFields=function(e,t){if(!e)return this._fail("Data cannot be null");if(t)for(var i=0;i<t.length;i++){var n=t[i];switch(n){case"videoId":if(!e.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if("string"!=typeof e.videoId)return this._fail("The ID for the main video must be a String.");if(""===e.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case"streamType":if(!e.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof e.streamType)return this._fail("The stream type for the main video must be a String.");if(""===e.streamType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"playerName":if(!e.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof e.playerName)return this._fail("The player name for the main video must be a String.");if(""===e.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case"videoLength":if(!e.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof e.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(e.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"podPlayerName":if(!e.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof e.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===e.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!e.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if("number"!=typeof e.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(e.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!e.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof e.adId)return this._fail("The ad ID must be a String.");if(""===e.adId)return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!e.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if("number"!=typeof e.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(e.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"adLength":if(!e.hasOwnProperty("adLength"))return this._fail("The length of the ad must be specified.");if("number"!=typeof e.adLength)return this._fail("The length of the ad must be a Number.");if(isNaN(e.adLength))return this._fail("The length of the ad cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+n)}}return!0},i.prototype._fail=function(e){var t=new n("Invalid input data",e);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,t),!1},t.InputDataValidator=i}(e.ADB.va,t),function(e){"use strict";t.AdobeAnalyticsPluginConfig=function(){this.channel="",this.debugLogging=!1}}(),function(e){"use strict";function t(){}t.prototype.onError=function(e){},e.AdobeAnalyticsPluginDelegate=t}(t),function(e,t,i,n){"use strict";function r(e,t){if(r.__super__.constructor.call(this,m),!e)throw new Error("The reference to the AppMeasurement object cannot be NULL.");this._appMeasurement=e,this._delegate=t,this._customMetaKeys=[],this._videoMetadata={},this._adMetadata={},this._chapterMetadata={},this._errorInfo=null,this._workQueue=new u(!0,I),this._inputDataValidator=new _(function(e){this._errorInfo=e,this._logger.error(this._logTag,e.getMessage()+" | "+e.getDetails());var t=this;setTimeout(function(){t._trigger(y,e),t._delegate&&t._delegate.onError(t._errorInfo)},0)},this),this._appMeasurement.isReadyToTrack(),this._setupDataResolver()}var s=e.Trigger,o=e.plugin.BasePlugin,a=e.plugin.ParamMapping,l=e.radio.Channel,c=e.radio.Command,u=e.radio.CommandQueue,d=t.ErrorInfo,h=i.md5,g=i.StringUtils,p=i.ObjectUtils,f=n.AdobeAnalyticsPluginConfig,_=n.InputDataValidator;e.extend(r,o),r.prototype.configure=function(e){if(!e)throw new Error("Reference to the configuration data cannot be NULL.");if(!(e instanceof f))throw new Error("Expected config data to be instance of AdobeAnalyticsPluginConfig.");this._config=e,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.debugLogging+", channel="+this._config.channel+", ssl="+this._appMeasurement.ssl+"})")},r.prototype.bootstrap=function(e){r.__super__.bootstrap.call(this,e),this._registerCommands(),this._registerBehaviours()},r.prototype.setup=function(){this._appMeasurement.isReadyToTrack()?this._onAppMeasurementReady():this._appMeasurement.callbackWhenReadyToTrack(this,this._onAppMeasurementReady,[]),r.__super__.setup.call(this)},r.prototype.setVideoMetadata=function(e){this._videoMetadata=p.clone(e)},r.prototype.setAdMetadata=function(e){this._adMetadata=p.clone(e)},r.prototype.setChapterMetadata=function(e){this._chapterMetadata=p.clone(e)},r.prototype._canProcess=function(){return this._errorInfo?(this._logger.error(this._logTag,"#_canProcess() > In ERROR state."),!1):r.__super__._canProcess.call(this)},r.prototype._cmdVideoLoad=function(e){this._errorInfo=null},r.prototype._cmdVideoStart=function(e){this._logger.debug(this._logTag,"#_cmdVideoStart()"),this._canProcess()&&this._workQueue.addCommand(new c(this._executeOpen,this,[e]))},r.prototype._cmdAdStart=function(e){this._logger.debug(this._logTag,"#_cmdAdStart()"),this._canProcess()&&this._workQueue.addCommand(new c(this._executeOpenAd,this,[e]))},r.prototype._cmdHeartbeatPluginError=function(e){this._errorInfo||(this._errorInfo=new d("Internal error","HeartbeatPlugin is in ERROR state."),this._trigger(y,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},r.prototype._resetAppMeasurementContextData=function(){delete this._appMeasurement.contextData["a.contentType"],delete this._appMeasurement.contextData["a.media.name"],delete this._appMeasurement.contextData["a.media.friendlyName"],delete this._appMeasurement.contextData["a.media.length"],delete this._appMeasurement.contextData["a.media.playerName"],delete this._appMeasurement.contextData["a.media.channel"],delete this._appMeasurement.contextData["a.media.view"],delete this._appMeasurement.contextData["a.media.ad.name"],delete this._appMeasurement.contextData["a.media.ad.friendlyName"],delete this._appMeasurement.contextData["a.media.ad.podFriendlyName"],delete this._appMeasurement.contextData["a.media.ad.length"],delete this._appMeasurement.contextData["a.media.ad.playerName"],delete this._appMeasurement.contextData["a.media.ad.pod"],delete this._appMeasurement.contextData["a.media.ad.podPosition"],delete this._appMeasurement.contextData["a.media.ad.podSecond"],delete this._appMeasurement.contextData["a.media.ad.view"];for(var e=0;e<this._customMetaKeys.length;e++){var t=this._customMetaKeys[e];delete this._appMeasurement.contextData[t]}this._customMetaKeys=[]},r.prototype._executeOpen=function(e){if(this._logger.debug(this._logTag,"#_executeOpen(id="+e.videoId+", videoName="+e.videoName+", streamType="+e.streamType+", length="+e.videoLength+", playerName="+e.playerName+", channel="+e.channel+", isPrimetime="+e.isPrimetime+", sessionId="+e.sessionId+")"),this._canProcess()&&this._inputDataValidator.validateFields(e,["videoId","streamType","videoLength","playerName"])){for(var t in this._resetAppMeasurementContextData(),e.metaVideo)e.metaVideo.hasOwnProperty(t)&&(this._appMeasurement.contextData[t]=e.metaVideo[t],this._customMetaKeys.push(t));if(e.metaNielsen)for(var t in e.metaNielsen)e.metaNielsen.hasOwnProperty(t)&&(this._appMeasurement.contextData[t]=e.metaNielsen[t],this._customMetaKeys.push(t));this._appMeasurement.contextData["a.contentType"]=e.streamType,this._appMeasurement.contextData["a.media.name"]=e.videoId,this._appMeasurement.contextData["a.media.friendlyName"]=e.videoName||"",this._appMeasurement.contextData["a.media.length"]=Math.floor(e.videoLength)||"0.0",this._appMeasurement.contextData["a.media.playerName"]=e.playerName,this._appMeasurement.contextData["a.media.channel"]=e.channel||"",this._appMeasurement.contextData["a.media.view"]=!0,this._appMeasurement.contextData["a.media.vsid"]=e.sessionId,this._appMeasurement.pev3=b,this._appMeasurement.pe=e.isPrimetime?w:T,this._appMeasurement.track();var i=this;setTimeout(function(){i._trigger(k,e)},0)}},r.prototype._executeOpenAd=function(e){var t=h(e.videoId)+"_"+e.podPosition;if(this._logger.debug(this._logTag,"#_executeOpenAd(id="+e.adId+", streamType="+e.streamType+", length="+e.adLength+", podPlayerName="+e.podPlayerName+", parentId="+e.videoId+", podId="+t+", parentPodPosition="+e.adPosition+", podSecond="+e.podSecond+")"),this._canProcess()&&this._inputDataValidator.validateFields(e,["videoId","streamType","playerName","adId","adLength","podPlayerName","adPosition"])){for(i in e.podSecond=null==e.podSecond||isNaN(e.podSecond)?e.playhead:e.podSecond,this._resetAppMeasurementContextData(),e.metaVideo)e.metaVideo.hasOwnProperty(i)&&(this._appMeasurement.contextData[i]=e.metaVideo[i],this._customMetaKeys.push(i));for(i in e.metaAd)e.metaAd.hasOwnProperty(i)&&(this._appMeasurement.contextData[i]=e.metaAd[i],this._customMetaKeys.push(i));if(e.metaNielsen)for(var i in e.metaNielsen)e.metaNielsen.hasOwnProperty(i)&&(this._appMeasurement.contextData[i]=e.metaNielsen[i],this._customMetaKeys.push(i));this._appMeasurement.contextData["a.contentType"]=e.streamType,this._appMeasurement.contextData["a.media.name"]=e.videoId,this._appMeasurement.contextData["a.media.playerName"]=e.playerName,this._appMeasurement.contextData["a.media.channel"]=e.channel||"",this._appMeasurement.contextData["a.media.vsid"]=e.sessionId,this._appMeasurement.contextData["a.media.friendlyName"]=e.videoName||"",this._appMeasurement.contextData["a.media.length"]=Math.floor(e.videoLength)||"0.0",this._appMeasurement.contextData["a.media.ad.name"]=e.adId,this._appMeasurement.contextData["a.media.ad.friendlyName"]=e.adName||"",this._appMeasurement.contextData["a.media.ad.podFriendlyName"]=e.podName||"",this._appMeasurement.contextData["a.media.ad.length"]=Math.floor(e.adLength)||"0.0",this._appMeasurement.contextData["a.media.ad.playerName"]=e.podPlayerName,this._appMeasurement.contextData["a.media.ad.pod"]=t,this._appMeasurement.contextData["a.media.ad.podPosition"]=Math.floor(e.adPosition)||"0.0",this._appMeasurement.contextData["a.media.ad.podSecond"]=Math.floor(e.podSecond)||"0.0",this._appMeasurement.contextData["a.media.ad.view"]=!0,this._appMeasurement.pev3=S,this._appMeasurement.pe=e.isPrimetime?D:P,this._appMeasurement.track();var n=this;setTimeout(function(){n._trigger(O,e)},0)}},r.prototype._setupDataResolver=function(){var r={},s=this;r.rsid=function(){return s._appMeasurement.account},r.tracking_server=function(){return s._appMeasurement.ssl&&s._appMeasurement.trackingServerSecure?s._appMeasurement.trackingServerSecure:s._appMeasurement.trackingServer},r.ssl=function(){return s._appMeasurement.ssl},r.vid=function(){return s._appMeasurement.visitorID},r.aid=function(){return s._appMeasurement.analyticsVisitorID},r.mid=function(){return s._appMeasurement.marketingCloudVisitorID},r.blob=function(){return s._appMeasurement.audienceManagerBlob},r.loc_hint=function(){return s._appMeasurement.audienceManagerLocationHint?parseInt(s._appMeasurement.audienceManagerLocationHint):""},r.customerIDs=function(){var e=s._appMeasurement.visitor.getCustomerIDs(),t={};for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];if("object"==typeof n){for(var r in n)n.hasOwnProperty(r)&&("authState"==r?t[i+".as"]=n[r]:t[i+"."+r]=n[r]);t[i+".as"]||(t[i+".as"]="0")}}return t},r.channel=function(){return s._config?s._config.channel:null},r.meta=function(e){var t=e.split(".");if(t.length<2)return null;var i=t.shift();switch(e=t.join("."),i){case"video":return e==l.WILDCARD?s._videoMetadata:s._videoMetadata[e];case"ad":return e==l.WILDCARD?s._adMetadata:s._adMetadata[e];case"chapter":return e==l.WILDCARD?s._chapterMetadata:s._chapterMetadata[e];default:return null}},r.visitorOptedOut=function(){return null!=s._appMeasurement.visitorOptedOut&&s._appMeasurement.visitorOptedOut},this._dataResolver=function(e){if(!e||0==e.length)return null;for(var t=null,i=0;i<e.length;i++){var n=e[i];t=t||{},g.startsWith(n,"meta.")?t[n]=r.meta(n.split("meta.")[1]):t[n]=r.hasOwnProperty(n)?r[n].call(this):null}return t}},r.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad),this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart),this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart),this._pluginManager.comply(this,"handleHeartbeatPluginError",this._cmdHeartbeatPluginError)},r.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new s(A,R),this,"handleVideoLoad"),this._pluginManager.registerBehaviour(new s(A,L),this,"handleVideoStart",[new a(A,"video.id","videoId"),new a(A,"video.streamType","streamType"),new a(A,"video.name","videoName"),new a(A,"video.length","videoLength"),new a(A,"video.playerName","playerName"),new a(A,"video.streamType","streamType"),new a(E,"is_primetime","isPrimetime"),new a(E,"session_id","sessionId"),new a(v,"channel","channel"),new a(v,"meta.video.*","metaVideo"),new a(C,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new s(A,x),this,"handleAdStart",[new a(A,"video.id","videoId"),new a(A,"video.streamType","streamType"),new a(A,"video.playhead","playhead"),new a(A,"video.playerName","playerName"),new a(A,"video.name","videoName"),new a(A,"video.length","videoLength"),new a(A,"ad.id","adId"),new a(A,"ad.length","adLength"),new a(A,"ad.position","adPosition"),new a(A,"ad.name","adName"),new a(A,"pod.name","podName"),new a(A,"pod.position","podPosition"),new a(A,"pod.playerName","podPlayerName"),new a(A,"pod.startTime","podSecond"),new a(E,"is_primetime","isPrimetime"),new a(E,"session_id","sessionId"),new a(v,"channel","channel"),new a(v,"meta.video.*","metaVideo"),new a(v,"meta.ad.*","metaAd"),new a(C,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new s(E,y),this,"handleHeartbeatPluginError")},r.prototype._onAppMeasurementReady=function(){this._workQueue.resume()};var m="adobe-analytics",v=m,C="nielsen",A="player",E="adobe-heartbeat",I=2e3,y="error",b="video",S="videoAd",T="ms_s",w="msp_s",P="msa_s",D="mspa_s",k="aa_start",O="sc_ad_start",R="video_load",L="video_start",x="ad_start";n.AdobeAnalyticsPlugin=r}(e.ADB.core,e.ADB.va,e.ADB.va.utils,t),function(e){"use strict";e.VideoMetadataKeys={SHOW:"a.media.show",SEASON:"a.media.season",EPISODE:"a.media.episode",ASSET_ID:"a.media.asset",GENRE:"a.media.genre",FIRST_AIR_DATE:"a.media.airDate",FIRST_DIGITAL_DATE:"a.media.digitalDate",RATING:"a.media.rating",ORIGINATOR:"a.media.originator",NETWORK:"a.media.network",SHOW_TYPE:"a.media.type",AD_LOAD:"a.media.adLoad",MVPD:"a.media.pass.mvpd",AUTHORIZED:"a.media.pass.auth",DAY_PART:"a.media.dayPart",FEED:"a.media.feed",STREAM_FORMAT:"a.media.format"},e.AdMetadataKeys={ADVERTISER:"a.media.ad.advertiser",CAMPAIGN_ID:"a.media.ad.campaign",CREATIVE_ID:"a.media.ad.creative",PLACEMENT_ID:"a.media.ad.placement",SITE_ID:"a.media.ad.site",CREATIVE_URL:"a.media.ad.creativeURL"}}(t),e.ADB.va.plugins.aa||(e.ADB.va.plugins.aa=t)}(this),function(e){"use strict";function t(){this.trackingServer=void 0,this.channel=void 0,this.ovp=void 0,this.appVersion=void 0,this.playerName=void 0,this.ssl=!1,this.debugLogging=!1}e.MediaHeartbeatConfig=t,e.MediaHeartbeatConfig.sharedInstance=new t}((F=this).ADB.va),function(e){"use strict";function t(){this.data={}}var i=e.plugins.videoplayer.VideoInfo,n=e.plugins.videoplayer.AdBreakInfo,r=e.plugins.videoplayer.AdInfo,s=e.plugins.videoplayer.ChapterInfo,o=e.plugins.videoplayer.QoSInfo;t.MEDIAINFO_KEY_NAME="a.name",t.MEDIAINFO_KEY_VIDEOID="a.videoId",t.MEDIAINFO_KEY_ADID="a.adId",t.MEDIAINFO_KEY_LENGTH="a.length",t.MEDIAINFO_KEY_PLAYHEAD="a.playhead",t.MEDIAINFO_KEY_STREAMTYPE="a.streamType",t.MEDIAINFO_KEY_POSITION="a.position",t.MEDIAINFO_KEY_STARTTIME="a.startTime",t.MEDIAINFO_KEY_BITRATE="a.bitrate",t.MEDIAINFO_KEY_FPS="a.fps",t.MEDIAINFO_KEY_DROPPEDFRAMES="a.droppedFrames",t.MEDIAINFO_KEY_STARTUPTIME="a.startupTime",t.MEDIAINFO_KEY_TIMEDMETADATA="a.timedMetadata",t.prototype.setValue=function(e,t){this.data[e]=t},t.prototype.getValue=function(e){return this.data.hasOwnProperty(e)?this.data[e]:null},t.prototype.createVideoInfo=function(){var e=new i;return e.id=null!=this.getValue(t.MEDIAINFO_KEY_VIDEOID)?this.getValue(t.MEDIAINFO_KEY_VIDEOID):"",e.name=null!=this.getValue(t.MEDIAINFO_KEY_NAME)?this.getValue(t.MEDIAINFO_KEY_NAME):"",e.length=null!=this.getValue(t.MEDIAINFO_KEY_LENGTH)?this.getValue(t.MEDIAINFO_KEY_LENGTH):0,e.playhead=null!=this.getValue(t.MEDIAINFO_KEY_PLAYHEAD)?this.getValue(t.MEDIAINFO_KEY_PLAYHEAD):0,e.streamType=null!=this.getValue(t.MEDIAINFO_KEY_STREAMTYPE)?this.getValue(t.MEDIAINFO_KEY_STREAMTYPE):"",e},t.prototype.createAdBreakInfo=function(){var e=new n;return e.name=null!=this.getValue(t.MEDIAINFO_KEY_NAME)?this.getValue(t.MEDIAINFO_KEY_NAME):"",e.position=null!=this.getValue(t.MEDIAINFO_KEY_POSITION)?this.getValue(t.MEDIAINFO_KEY_POSITION):0,e.startTime=null!=this.getValue(t.MEDIAINFO_KEY_STARTTIME)?this.getValue(t.MEDIAINFO_KEY_STARTTIME):0,e},t.prototype.createAdInfo=function(){var e=new r;return e.id=null!=this.getValue(t.MEDIAINFO_KEY_ADID)?this.getValue(t.MEDIAINFO_KEY_ADID):"",e.name=null!=this.getValue(t.MEDIAINFO_KEY_NAME)?this.getValue(t.MEDIAINFO_KEY_NAME):"",e.length=null!=this.getValue(t.MEDIAINFO_KEY_LENGTH)?this.getValue(t.MEDIAINFO_KEY_LENGTH):0,e.position=null!=this.getValue(t.MEDIAINFO_KEY_POSITION)?this.getValue(t.MEDIAINFO_KEY_POSITION):0,e},t.prototype.createChapterInfo=function(){var e=new s;return e.name=null!=this.getValue(t.MEDIAINFO_KEY_NAME)?this.getValue(t.MEDIAINFO_KEY_NAME):"",e.length=null!=this.getValue(t.MEDIAINFO_KEY_LENGTH)?this.getValue(t.MEDIAINFO_KEY_LENGTH):0,e.startTime=null!=this.getValue(t.MEDIAINFO_KEY_STARTTIME)?this.getValue(t.MEDIAINFO_KEY_STARTTIME):0,e.position=null!=this.getValue(t.MEDIAINFO_KEY_POSITION)?this.getValue(t.MEDIAINFO_KEY_POSITION):0,e},t.prototype.createQoSInfo=function(){var e=new o;return e.bitrate=null!=this.getValue(t.MEDIAINFO_KEY_BITRATE)?this.getValue(t.MEDIAINFO_KEY_BITRATE):0,e.fps=null!=this.getValue(t.MEDIAINFO_KEY_FPS)?this.getValue(t.MEDIAINFO_KEY_FPS):0,e.droppedFrames=null!=this.getValue(t.MEDIAINFO_KEY_DROPPEDFRAMES)?this.getValue(t.MEDIAINFO_KEY_DROPPEDFRAMES):0,e.startupTime=null!=this.getValue(t.MEDIAINFO_KEY_STARTUPTIME)?this.getValue(t.MEDIAINFO_KEY_STARTUPTIME):0,e},e.MediaObject=t}(F.ADB.va),function(e,t){"use strict";function i(e){i.__super__.constructor.call(this),this._heartbeat=e}function n(e){n.__super__.constructor.call(this),this._heartbeat=e}function r(e){r.__super__.constructor.call(this),this._heartbeat=e}function s(e){s.__super__.constructor.call(this),this._heartbeat=e}e.extend(i,t.plugins.aa.AdobeAnalyticsPluginDelegate),i.prototype.onError=function(e){t.MediaHeartbeat._onDelegateError.call(this._heartbeat,e)},e.extend(n,t.plugins.ah.AdobeHeartbeatPluginDelegate),n.prototype.onError=function(e){t.MediaHeartbeat._onDelegateError.call(this._heartbeat,e)},e.extend(r,t.HeartbeatDelegate),r.prototype.onError=function(e){t.MediaHeartbeat._onDelegateError.call(this._heartbeat,e)},e.extend(s,t.plugins.videoplayer.VideoPlayerPluginDelegate),s.prototype.getVideoInfo=function(){return this._heartbeat&&this._heartbeat._videoInfo?(this._heartbeat._delegate&&(this._heartbeat._videoInfo.playhead=this._heartbeat._delegate.getCurrentPlaybackTime()),this._heartbeat._videoInfo):null},s.prototype.getAdBreakInfo=function(){return this._heartbeat&&this._heartbeat._adBreakInfo?this._heartbeat._adBreakInfo:null},s.prototype.getAdInfo=function(){return this._heartbeat&&this._heartbeat._adInfo?this._heartbeat._adInfo:null},s.prototype.getChapterInfo=function(){return this._heartbeat&&this._heartbeat._chapterInfo?this._heartbeat._chapterInfo:null},s.prototype.getQoSInfo=function(){if(this._heartbeat&&this._heartbeat._delegate&&this._heartbeat._delegate.getQoSObject()){var e=this._heartbeat._delegate.getQoSObject();if(e&&"object"==typeof e&&e.setValue)return e.createQoSInfo()}return null},t._MediaAnalyticsPluginDelegate=i,t._MediaHeartbeatPluginDelegate=n,t._ADBMediaHeartbeatDelegate=r,t._MediaHeartbeatVideoPlayerPluginDelegate=s}(F.ADB.core,F.ADB.va),function(e,t){"use strict";function i(){}function n(e){n.__super__.constructor.call(this),this._heartbeat=e}var r=t.MediaHeartbeatConfig;t.plugins.nielsen&&(i.MEDIAHEARTBEAT_NIELSEN_CONTENT_METADATA="media_nielsen_content_metadata",i.MEDIAHEARTBEAT_NIELSEN_AD_METADATA="media_nielsen_ad_metadata",i.MEDIAHEARTBEAT_NIELSEN_CHANNEL_METADATA="media_nielsen_channel_metadata",r.prototype.nielsenConfigKey=void 0,r.prototype.nielsenAppInfo=void 0,e.extend(n,t.plugins.nielsen.NielsenPluginDelegate),n.prototype.getMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentContentMediaObject){var e=this._heartbeat._currentContentMediaObject.getValue(i.MEDIAHEARTBEAT_NIELSEN_CONTENT_METADATA);if("object"==typeof e)return e}return null},n.prototype.getAdMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentAdMediaObject){var e=this._heartbeat._currentAdMediaObject.getValue(i.MEDIAHEARTBEAT_NIELSEN_AD_METADATA);if("object"==typeof e)return e}return null},n.prototype.getChannelInfo=function(){if(this._heartbeat&&this._heartbeat._currentContentMediaObject){var e=this._heartbeat._currentContentMediaObject.getValue(i.MEDIAHEARTBEAT_NIELSEN_CHANNEL_METADATA);if("object"==typeof e)return e}return null},n.prototype.onError=function(e){this._heartbeat&&t.MediaHeartbeat._onError.call(this._heartbeat,e)},t._MediaHeartbeatNielsen=i,t._MediaHeartbeatNielsenPluginDelegate=n)}(F.ADB.core,F.ADB.va),function(e,n){"use strict";function t(){}function o(e,t,i){if(this._logger=new c,this._plugins=[],this._playerPlugin=null,this._aaPlugin=null,this._ahPlugin=null,this._nielsenPlugin=null,this._currentContentMediaObject=void 0,this._currentAdMediaObject=void 0,this._videoInfo=void 0,this._adBreakInfo=void 0,this._adInfo=void 0,this._chapterInfo=void 0,this._state={},this._delegate=e,i)this.appMeasurement=i;else{if(!F.s)return void this._logger.error(M,"Valid AppMeasurement instance required for initialising MediaHeartbeat");this.appMeasurement=F.s}t&&"object"==typeof t&&null!=t.trackingServer?(this._config=t,n.MediaHeartbeat._debugLogging||this._config.debugLogging?this._logger.enable():this._logger.disable()):this._logger.error(M,"Valid config required for initialising MediaHeartbeat")}function i(){this._ahPlugin=new E(new y(this));var e=new I(this._config.trackingServer,this.appMeasurement.visitor.marketingCloudOrgID);e.debugLogging=n.MediaHeartbeat._debugLogging||this._config.debugLogging,e.ovp=this._config.ovp?this._config.ovp:"",e.ssl=this._config.ssl,e.sdk=this._config.appVersion?this._config.appVersion:"";var t=function(){return this._currentContentMediaObject?this._currentContentMediaObject.getValue(B):null}.call(this);t&&0<t.length&&(e.__primetime=!0,e.__psdkVersion=t),this._ahPlugin.configure(e),this._plugins.push(this._ahPlugin)}function s(e,t){if(e!=T&&(!this._state[T]||this._state[D]))return!1;if(e===w&&function(){this._state[O]&&this.trackEvent(o.Event.SeekComplete),this._state[k]&&this.trackEvent(o.Event.BufferComplete)}.call(this),(e!==x||t)&&(t?!this._state[e]:this._state[e]))return!1;switch(e){case w:this._state[P]=t,this._state[N]=!0;break;case P:this._state[w]=t;break;case x:if(!t&&this._state[L])return!1;break;case L:if(!t&&!this._state[x])return!1}return this._state[e]=!t,!0}function r(){return this._state[T]}function a(){this._state={}}function l(){this._plugins=[],this._aaPlugin=null,this._ahPlugin=null,this._playerPlugin=null,this._nielsenPlugin=null,this._heartbeat&&(this._heartbeat.destroy(),this._heartbeat=null)}var c=e.Logger,u=n.plugins.videoplayer.AssetType,d=n.MediaObject,h=n.Heartbeat,g=n.HeartbeatConfig,p=n._ADBMediaHeartbeatDelegate,f=n.plugins.videoplayer.VideoPlayerPlugin,_=n.plugins.videoplayer.VideoPlayerPluginConfig,m=n._MediaHeartbeatVideoPlayerPluginDelegate,v=n.plugins.aa.AdobeAnalyticsPlugin,C=n.plugins.aa.AdobeAnalyticsPluginConfig,A=n._MediaAnalyticsPluginDelegate,E=n.plugins.ah.AdobeHeartbeatPlugin,I=n.plugins.ah.AdobeHeartbeatPluginConfig,y=n._MediaHeartbeatPluginDelegate;if(t.prototype.getCurrentPlaybackTime=function(){return null},t.prototype.getQoSObject=function(){return null},o.Event={AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",SeekStart:"seekStart",SeekComplete:"seekComplete",BufferStart:"bufferStart",BufferComplete:"bufferComplete",BitrateChange:"bitrateChange",TimedMetadataUpdate:"timedMetadataUpdate"},o.StreamType={VOD:"vod",LIVE:"live",LINEAR:"linear"},o.MediaObjectKey={StandardVideoMetadata:"media_standard_content_metadata",StandardAdMetadata:"media_standard_ad_metadata",VideoResumed:"resumed"},o.VideoMetadataKeys=n.plugins.aa.VideoMetadataKeys,o.AdMetadataKeys=n.plugins.aa.AdMetadataKeys,o.version=function(){return n.Version.getVersion()},o.prototype.trackSessionStart=function(e,t){if(this._logger.info(M,"#::trackSessionStart()"),s.call(this,T)){if(!e||"object"!=typeof e||!e.setValue)return function(e){this._state[e]=!1}.call(this,T),void this._logger.error(M,"Invalid Media Info object");this._currentContentMediaObject=e,this._videoInfo=e.createVideoInfo(),this._videoInfo.playerName=null!=this._config.playerName?this._config.playerName:"";var i=e.getValue(o.MediaObjectKey.StandardVideoMetadata);if(i&&"object"==typeof i)for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n]);var r=e.getValue(o.MediaObjectKey.VideoResumed);r&&"boolean"==typeof r&&(this._videoInfo.resumed=e.getValue(o.MediaObjectKey.VideoResumed)),S.call(this),this._playerPlugin&&(this._aaPlugin&&this._aaPlugin.setVideoMetadata(t),this._playerPlugin.trackVideoLoad(),this._playerPlugin.trackSessionStart())}else this._logger.error(M,"API call trackSessionStart is unsupported in the current state.")},o.prototype.trackPlay=function(){return this._logger.info(M,"#::trackPlay()"),s.call(this,w)?void this._playerPlugin.trackPlay():void this._logger.error(M,"API call trackPlay is unsupported in the current state.")},o.prototype.trackPause=function(){return this._logger.info(M,"#::trackPause()"),s.call(this,P)?void(this._playerPlugin&&this._playerPlugin.trackPause()):void this._logger.error(M,"API call trackPause is unsupported in the current state.")},o.prototype.trackComplete=function(){return this._logger.info(M,"#::trackComplete()"),s.call(this,D)?void(this._playerPlugin&&this._playerPlugin.trackComplete(function(){})):void this._logger.error(M,"API call trackComplete is unsupported in the current state.")},o.prototype.trackSessionEnd=function(){return this._logger.info(M,"#::trackSessionEnd()"),s.call(this,T,!0)?(this._playerPlugin&&this._playerPlugin.trackVideoUnload(),a.call(this),void l.call(this)):(a.call(this),l.call(this),void this._logger.error(M,"API call trackSessionEnd is unsupported in the current state."))},o.prototype.trackError=function(e){return this._logger.info(M,"#::trackError()"),r.call(this)?void(this._playerPlugin&&this._playerPlugin.trackVideoPlayerError(e||"unknown_error_id")):void this._logger.error(M,"API call trackError is unsupported in the current state.")},o.prototype.trackEvent=function(e,t,i){switch(e){case o.Event.AdBreakStart:case o.Event.AdBreakComplete:(function(e,t){if(e==o.Event.AdBreakStart){if(this._logger.info(M,"#::trackEvent(AdBreakStart)"),!s.call(this,x))return void this._logger.error(M,"API call trackEvent:AdBreakStart is unsupported in the current state.");t&&"object"==typeof t&&t.setValue?(this._adBreakInfo=t.createAdBreakInfo(),this._adBreakInfo.playerName=this._config.playerName?this._config.playerName:""):this._logger.error(M,"Invalid AdBreak Info for MediaHeartbeatEvent.AdBreakStart event.")}else{if(this._logger.info(M,"#::trackEvent(AdBreakComplete)"),!s.call(this,x,!0))return void this._logger.error(M,"API call trackEvent:AdBreakComplete is unsupported in the current state.");this._adBreakInfo=void 0}}).call(this,e,t);break;case o.Event.AdStart:case o.Event.AdComplete:case o.Event.AdSkip:(function(e,t,i){if(e==o.Event.AdStart){if(this._logger.info(M,"#::trackEvent(AdStart)"),!s.call(this,L))return void this._logger.error(M,"API call trackEvent:AdStart is unsupported in the current state.");if(t&&"object"==typeof t&&t.setValue){this._currentAdMediaObject=t,this._adInfo=t.createAdInfo();var n=t.getValue(o.MediaObjectKey.StandardAdMetadata);if(n&&"object"==typeof n)for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r]);this._aaPlugin&&this._aaPlugin.setAdMetadata(i),this._playerPlugin.trackAdStart(),this._state[N]||this._state[P]||this.trackPlay()}else this._logger.error(M,"Invalid Ad Info for MediaHeartbeatEvent.AdStart event.")}else if(e==o.Event.AdComplete){if(this._logger.info(M,"#::trackEvent(AdComplete)"),!s.call(this,L,!0))return void this._logger.error(M,"API call trackEvent:AdComplete is unsupported in the current state.");this._playerPlugin.trackAdComplete(),this._adInfo=null}else{if(this._logger.info(M,"#::trackEvent(AdSkip)"),!s.call(this,L,!0))return void this._logger.error(M,"API call trackEvent:AdSkip is unsupported in the current state.");this._adInfo=null}}).call(this,e,t,i);break;case o.Event.SeekStart:case o.Event.SeekComplete:(function(e){if(e==o.Event.SeekStart){if(this._logger.info(M,"#::trackEvent(SeekStart)"),!s.call(this,O))return void this._logger.error(M,"API call trackEvent:SeekStart is unsupported in the current state.");this._playerPlugin.trackSeekStart()}else{if(this._logger.info(M,"#::trackEvent(SeekComplete)"),!s.call(this,O,!0))return void this._logger.error(M,"API call trackEvent:SeekComplete is unsupported in the current state.");this._playerPlugin.trackSeekComplete()}}).call(this,e);break;case o.Event.ChapterStart:case o.Event.ChapterComplete:case o.Event.ChapterSkip:(function(e,t,i){if(e==o.Event.ChapterStart){if(this._logger.info(M,"#::trackEvent(ChapterStart)"),!s.call(this,R))return void this._logger.error(M,"API call trackEvent:ChapterStart is unsupported in the current state.");t&&"object"==typeof t&&t.setValue?(this._chapterInfo=t.createChapterInfo(),this._aaPlugin&&this._aaPlugin.setChapterMetadata(i),this._playerPlugin.trackChapterStart(),this._state[N]||this._state[P]||this.trackPlay()):this._logger.error(M,"Invalid Chapter Info for MediaHeartbeatEvent.ChapterStart event.")}else if(e==o.Event.ChapterComplete){if(this._logger.info(M,"#::trackEvent(ChapterComplete)"),!s.call(this,R,!0))return void this._logger.error(M,"API call trackEvent:ChapterComplete is unsupported in the current state.");this._chapterInfo=null,this._playerPlugin.trackChapterComplete()}else{if(this._logger.info(M,"#::trackEvent(ChapterSkip)"),!s.call(this,R,!0))return void this._logger.error(M,"API call trackEvent:ChapterSkip is unsupported in the current state.");this._chapterInfo=null}}).call(this,e,t,i);break;case o.Event.BufferStart:case o.Event.BufferComplete:(function(e){if(e==o.Event.BufferStart){if(this._logger.info(M,"#::trackEvent(BufferStart)"),!s.call(this,k))return void this._logger.error(M,"API call trackEvent:BufferStart is unsupported in the current state.");this._playerPlugin.trackBufferStart()}else{if(this._logger.info(M,"#::trackEvent(BufferComplete)"),!s.call(this,k,!0))return void this._logger.error(M,"API call trackEvent:BufferComplete is unsupported in the current state.");this._playerPlugin.trackBufferComplete()}}).call(this,e);break;case o.Event.BitrateChange:(function(){return this._logger.info(M,"#::trackEvent(BitrateChange)"),r.call(this)?void this._playerPlugin.trackBitrateChange():void this._logger.error(M,"API call trackEvent:BitrateChange is unsupported in the current state.")}).call(this);break;case o.Event.TimedMetadataUpdate:(function(e){if(this._logger.info(M,"#::trackEvent(TimedMetadataUpdate)"),e&&"object"==typeof e&&e.setValue){var t=e.getValue(d.MEDIAINFO_KEY_TIMEDMETADATA);this._playerPlugin&&t&&"string"==typeof t&&this._playerPlugin.trackTimedMetadata(t)}}).call(this,t)}},n.plugins.nielsen){var b=n._MediaHeartbeatNielsen;o.MediaObjectKey.NielsenContentMetadata=b.MEDIAHEARTBEAT_NIELSEN_CONTENT_METADATA,o.MediaObjectKey.NielsenAdMetadata=b.MEDIAHEARTBEAT_NIELSEN_AD_METADATA,o.MediaObjectKey.NielsenChannelMetadata=b.MEDIAHEARTBEAT_NIELSEN_CHANNEL_METADATA,o.prototype.nielsenLoadMetadata=function(e){this._nielsenPlugin&&this._nielsenPlugin.loadMetadata(e)}}var S=function(){if(!this.appMeasurement||!this.appMeasurement.visitor)throw new Error("appMeasurement.visitor object cannot be NULL.");(function(){this._aaPlugin=new v(this.appMeasurement,new A(this));var e=new C;e.channel=this._config.channel?this._config.channel:"",e.debugLogging=n.MediaHeartbeat._debugLogging||this._config.debugLogging,this._aaPlugin.configure(e),this._plugins.push(this._aaPlugin)}).call(this),i.call(this),function(){this._playerPlugin=new f(new m(this));var e=new _;e.debugLogging=n.MediaHeartbeat._debugLogging||this._config.debugLogging,this._playerPlugin.configure(e),this._plugins.push(this._playerPlugin)}.call(this),function(){if(n.plugins.nielsen&&this._config.nielsenConfigKey&&this._config.nielsenAppInfo){this._nielsenPlugin=new n.plugins.nielsen.NielsenPlugin(new n._MediaHeartbeatNielsenPluginDelegate(this));var e=new n.plugins.nielsen.NielsenPluginConfig;e.debugLogging=n.MediaHeartbeat._debugLogging||this._config.debugLogging,e.appInfo=this._config.nielsenAppInfo,e.configKey=this._config.nielsenConfigKey,this._nielsenPlugin.configure(e),this._plugins.push(this._nielsenPlugin)}}.call(this),function(){var e=new g;e.debugLogging=n.MediaHeartbeat._debugLogging||this._config.debugLogging,this._heartbeat=new h(new p(this),this._plugins),this._heartbeat.configure(e)}.call(this)},T=1,w=2,P=3,D=4,k=5,O=6,R=7,L=8,x=9,N=10;o.createMediaObject=function(e,t,i,n){var r=new d;r.setValue(d.MEDIAINFO_KEY_VIDEOID,t),r.setValue(d.MEDIAINFO_KEY_NAME,e),r.setValue(d.MEDIAINFO_KEY_LENGTH,i),r.setValue(d.MEDIAINFO_KEY_PLAYHEAD,0);var s=u.ASSET_TYPE_VOD;switch(n){case o.StreamType.VOD:s=u.ASSET_TYPE_VOD;break;case o.StreamType.LIVE:s=u.ASSET_TYPE_LIVE;break;case o.StreamType.LINEAR:s=u.ASSET_TYPE_LINEAR}return r.setValue(d.MEDIAINFO_KEY_STREAMTYPE,s),r},o.createAdBreakObject=function(e,t,i){var n=new d;return n.setValue(d.MEDIAINFO_KEY_NAME,e),n.setValue(d.MEDIAINFO_KEY_POSITION,t),n.setValue(d.MEDIAINFO_KEY_STARTUPTIME,i),n},o.createAdObject=function(e,t,i,n){var r=new d;return r.setValue(d.MEDIAINFO_KEY_NAME,e),r.setValue(d.MEDIAINFO_KEY_ADID,t),r.setValue(d.MEDIAINFO_KEY_POSITION,i),r.setValue(d.MEDIAINFO_KEY_LENGTH,n),r},o.createChapterObject=function(e,t,i,n){var r=new d;return r.setValue(d.MEDIAINFO_KEY_NAME,e),r.setValue(d.MEDIAINFO_KEY_POSITION,t),r.setValue(d.MEDIAINFO_KEY_LENGTH,i),r.setValue(d.MEDIAINFO_KEY_STARTTIME,n),r},o.createQoSObject=function(e,t,i,n){var r=new d;return r.setValue(d.MEDIAINFO_KEY_BITRATE,e),r.setValue(d.MEDIAINFO_KEY_FPS,i),r.setValue(d.MEDIAINFO_KEY_DROPPEDFRAMES,n),r.setValue(d.MEDIAINFO_KEY_STARTUPTIME,t),r},o.createTimedMetadataObject=function(e){var t=new d;return t.setValue(d.MEDIAINFO_KEY_TIMEDMETADATA,e),t};var M="MediaHeartbeat",B="a.__pttvsdkVersion";n.MediaHeartbeat=o,n.MediaHeartbeatDelegate=t,n.MediaHeartbeat._onDelegateError=function(e){this._logger.error(M,e.getMessage()+" | "+e.getDetails())},n.MediaHeartbeat._debugLogging=!1}(F.ADB.core,F.ADB.va),F.ADB||(F.ADB={}),F.ADB.core||(F.ADB.core=core),F.ADB.va||(F.ADB.va=va),F.ADB.va.plugins||(F.ADB.va.plugins={}),ADB}),define("rofl/lib/analytics/adobe/visitor",function(){!function s(o,a,l){function c(t,e){if(!a[t]){if(!o[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(u)return u(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var r=a[t]={exports:{}};o[t][0].call(r.exports,function(e){return c(o[t][1][e]||e)},r,r.exports,s,o,a,l)}return a[t].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,i){(function(g){e("./utils/polyfills");var p=e("./strategies/LocalVisitor"),f=e("./strategies/ProxyVisitor"),_=e("./strategies/PlaceholderVisitor"),m=e("./utils/callbackRegistryFactory"),v=e("./Message"),C=e("./enums").MESSAGES;t.exports=function(e,t,i,n){function r(e){Object.assign(c,e)}function s(e){if(!h.isInvalid(e)){d=!1;var t=h.parse(e);c.setStateAndPublish(t.state)}}function o(e){!d&&u&&(d=!0,h.send(n,e))}function a(){r(new p(i._generateID)),c.getMarketingCloudVisitorID(),c.callbackRegistry.executeAll(c.state,!0),g.removeEventListener("message",l)}function l(e){if(!h.isInvalid(e)){var t=h.parse(e);d=!1,g.clearTimeout(this.timeout),g.removeEventListener("message",l),r(new f(c)),g.addEventListener("message",s),c.setStateAndPublish(t.state),c.callbackRegistry.hasCallbacks()&&o(C.GETSTATE)}}var c=this,u=t.whitelistParentDomain;c.state={},c.version=i.version,c.marketingCloudOrgID=e;var d=!1,h=new v(e,u);c.callbackRegistry=m(),c.findField=function(e,t){if(c.state[e])return t(c.state[e]),c.state[e]},c.messageParent=o,c.setStateAndPublish=function(e){Object.assign(c.state,e),c.callbackRegistry.executeAll(c.state)},g.s_c_in||(g.s_c_il=[],g.s_c_in=0),c._c="Visitor",c._il=g.s_c_il,c._in=g.s_c_in,c._il[c._in]=c,g.s_c_in++,Object.keys(i).forEach(function(e){0!==e.indexOf("_")&&"function"==typeof i[e]&&(c[e]=function(){})}),c.getSupplementalDataID=i.getSupplementalDataID,r(new _(c)),function(){u&&postMessage?(g.addEventListener("message",l),o(C.HANDSHAKE),this.timeout=setTimeout(a,250)):a()}()}}).call(this,void 0!==global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Message":2,"./enums":4,"./strategies/LocalVisitor":5,"./strategies/PlaceholderVisitor":6,"./strategies/ProxyVisitor":7,"./utils/callbackRegistryFactory":8,"./utils/polyfills":10}],2:[function(e,t,i){var a=e("./enums").MESSAGES,n={0:"prefix",1:"orgID",2:"state"};t.exports=function(s,o){this.parse=function(e){try{var i={};return e.data.split("|").forEach(function(e,t){void 0!==e&&(i[n[t]]=2!==t?e:JSON.parse(e))}),i}catch(e){}},this.isInvalid=function(e){var t=this.parse(e);if(!t||Object.keys(t).length<2)return!0;var i=s!==t.orgID,n=!o||e.origin!==o,r=-1===Object.keys(a).indexOf(t.prefix);return i||n||r},this.send=function(e,t,i){var n=t+"|"+s;i&&i===Object(i)&&(n+="|"+JSON.stringify(i));try{e.postMessage(n,o)}catch(e){}}}},{"./enums":4}],3:[function(e,t,i){(function(i){function n(){function e(){o.windowLoaded=!0}i.addEventListener?i.addEventListener("load",e):i.attachEvent&&i.attachEvent("onload",e),o.codeLoadEnd=(new Date).getTime()}var r=e("./ChildVisitor"),a=e("./Message"),s=e("./utils/makeChildMessageListener"),o=function(e,t){function n(e){var n=e;return function(e){var t=e||_.location.href;try{var i=g._extractParamFromUri(t,n);if(i)return R.parsePipeDelimetedKeyValues(i)}catch(e){}}}function r(e){function t(e,t){e&&e.match(h.VALID_VISITOR_ID_REGEX)&&t(e)}t(e[I],g.setMarketingCloudVisitorID),g._setFieldExpire(L,-1),t(e[O],g.setAnalyticsVisitorID)}function o(e){e=e||{},g._supplementalDataIDCurrent=e.supplementalDataIDCurrent||"",g._supplementalDataIDCurrentConsumed=e.supplementalDataIDCurrentConsumed||{},g._supplementalDataIDLast=e.supplementalDataIDLast||"",g._supplementalDataIDLastConsumed=e.supplementalDataIDLastConsumed||{}}function l(e){for(var t="",i=0,n=e.length;i<n;i++){var r=e[i],s=r[0],o=r[1];null!=o&&o!==P&&(t=(a=(a=t)?a+="|":a)+(s+"=")+encodeURIComponent(o))}var a,l;return(l=(l=t)?l+="|":l)+"TS="+R.getTimestampInSeconds()}function u(e){var t=e.minutesToLive,i="";return g.idSyncDisableSyncs&&(i=i||"Error: id syncs have been disabled"),"string"==typeof e.dpid&&e.dpid.length||(i=i||"Error: config.dpid is empty"),"string"==typeof e.url&&e.url.length||(i=i||"Error: config.url is empty"),void 0===t?t=20160:(t=parseInt(t,10),(isNaN(t)||t<=0)&&(i=i||"Error: config.minutesToLive needs to be a positive number")),{error:i,ttl:t}}function c(e){for(var t=0,i=e.length;t<i;t++)if(!h.POSITIVE_INT_REGEX.test(e[t]))return!1;return!0}function d(e,t){for(;e.length<t.length;)e.push("0");for(;t.length<e.length;)t.push("0")}function f(e,t){for(var i=0;i<e.length;i++){var n=parseInt(e[i],10),r=parseInt(t[i],10);if(r<n)return 1;if(n<r)return-1}return 0}if(!e)throw new Error("Visitor requires Adobe Marketing Cloud Org ID");var g=this;g.version="2.4.0";var _=i,m=_.Visitor;m.version=g.version,_.s_c_in||(_.s_c_il=[],_.s_c_in=0),g._c="Visitor",g._il=_.s_c_il,g._in=_.s_c_in,g._il[g._in]=g,_.s_c_in++,g._log={requests:[]};var p=_.document,h={POST_MESSAGE_ENABLED:!!_.postMessage,DAYS_BETWEEN_SYNC_ID_CALLS:1,MILLIS_PER_DAY:864e5,ADOBE_MC:"adobe_mc",ADOBE_MC_SDID:"adobe_mc_sdid",VALID_VISITOR_ID_REGEX:/^[0-9a-fA-F\-]+$/,ADOBE_MC_TTL_IN_MIN:5,POSITIVE_INT_REGEX:/^\d+$/,VERSION_REGEX:/vVersion\|((\d+\.)?(\d+\.)?(\*|\d+))(?=$|\|)/,HAS_JSON_STRINGIFY:window.JSON===Object(window.JSON)&&"function"==typeof window.JSON.stringify},S=function(e){return!Object.prototype[e]};g._hash=function(e){var t,i=0;if(e)for(t=0;t<e.length;t++)i=(i<<5)-i+e.charCodeAt(t),i&=i;return i},g._generateID=function(e,t){var i,n,r="0123456789",s="",o="",a=8,l=10,c=10;if(t===I&&(x.isClientSideMarketingCloudVisitorID=!0),1===e){for(r+="ABCDEF",i=0;i<16;i++)n=Math.floor(Math.random()*a),s+=r.substring(n,n+1),n=Math.floor(Math.random()*a),o+=r.substring(n,n+1),a=16;return s+"-"+o}for(i=0;i<19;i++)n=Math.floor(Math.random()*l),s+=r.substring(n,n+1),0===i&&9===n?l=3:(1===i||2===i)&&10!==l&&n<2?l=10:2<i&&(l=10),n=Math.floor(Math.random()*c),o+=r.substring(n,n+1),0===i&&9===n?c=3:(1===i||2===i)&&10!==c&&n<2?c=10:2<i&&(c=10);return s+o},g._getDomain=function(e){var t;if(!e&&_.location&&(e=_.location.hostname),t=e)if(/^[0-9.]+$/.test(t))t="";else{var i=t.split("."),n=i.length-1,r=n-1;if(1<n&&i[n].length<=2&&(2===i[n-1].length||",ac,ad,ae,af,ag,ai,al,am,an,ao,aq,ar,as,at,au,aw,ax,az,ba,bb,be,bf,bg,bh,bi,bj,bm,bo,br,bs,bt,bv,bw,by,bz,ca,cc,cd,cf,cg,ch,ci,cl,cm,cn,co,cr,cu,cv,cw,cx,cz,de,dj,dk,dm,do,dz,ec,ee,eg,es,et,eu,fi,fm,fo,fr,ga,gb,gd,ge,gf,gg,gh,gi,gl,gm,gn,gp,gq,gr,gs,gt,gw,gy,hk,hm,hn,hr,ht,hu,id,ie,im,in,io,iq,ir,is,it,je,jo,jp,kg,ki,km,kn,kp,kr,ky,kz,la,lb,lc,li,lk,lr,ls,lt,lu,lv,ly,ma,mc,md,me,mg,mh,mk,ml,mn,mo,mp,mq,mr,ms,mt,mu,mv,mw,mx,my,na,nc,ne,nf,ng,nl,no,nr,nu,nz,om,pa,pe,pf,ph,pk,pl,pm,pn,pr,ps,pt,pw,py,qa,re,ro,rs,ru,rw,sa,sb,sc,sd,se,sg,sh,si,sj,sk,sl,sm,sn,so,sr,st,su,sv,sx,sy,sz,tc,td,tf,tg,th,tj,tk,tl,tm,tn,to,tp,tr,tt,tv,tw,tz,ua,ug,uk,us,uy,uz,va,vc,ve,vg,vi,vn,vu,wf,ws,yt,".indexOf(","+i[n]+",")<0)&&r--,0<r)for(t="";r<=n;)t=i[n]+(t?".":"")+t,n--}return t},g.cookieRead=function(e){e=encodeURIComponent(e);var t=(";"+p.cookie).split(" ").join(";"),i=t.indexOf(";"+e+"="),n=i<0?i:t.indexOf(";",i+1);return i<0?"":decodeURIComponent(t.substring(i+2+e.length,n<0?t.length:n))},g.cookieWrite=function(e,t,i){var n,r=g.cookieLifetime;if(t=""+t,r=r?(""+r).toUpperCase():"",i&&"SESSION"!==r&&"NONE"!==r){if(n=""!==t?parseInt(r||0,10):-60)(i=new Date).setTime(i.getTime()+1e3*n);else if(1===i){var s=(i=new Date).getYear();i.setYear(s+2+(s<1900?1900:0))}}else i=0;return e&&"NONE"!==r?(p.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; path=/;"+(i?" expires="+i.toGMTString()+";":"")+(g.cookieDomain?" domain="+g.cookieDomain+";":""),g.cookieRead(e)===t):0},g._callbackList=null,g._callCallback=function(e,t){try{"function"==typeof e?e.apply(_,t):e[1].apply(e[0],t)}catch(e){}},g._registerCallback=function(e,t){t&&(null==g._callbackList&&(g._callbackList={}),null==g._callbackList[e]&&(g._callbackList[e]=[]),g._callbackList[e].push(t))},g._callAllCallbacks=function(e,t){if(null!=g._callbackList){var i=g._callbackList[e];if(i)for(;0<i.length;)g._callCallback(i.shift(),t)}},g._addQuerystringParam=function(e,t,i,n){var r=encodeURIComponent(t)+"="+encodeURIComponent(i),s=R.parseHash(e),o=R.hashlessUrl(e);if(-1===o.indexOf("?"))return o+"?"+r+s;var a=o.split("?"),l=a[0]+"?",c=a[1];return l+R.addQueryParamAtLocation(c,r,n)+s},g._extractParamFromUri=function(e,t){var i=new RegExp("[\\?&#]"+t+"=([^&#]*)").exec(e);if(i&&i.length)return decodeURIComponent(i[1])},g._parseAdobeMcFromUrl=n(h.ADOBE_MC),g._parseAdobeMcSdidFromUrl=n(h.ADOBE_MC_SDID),g._attemptToPopulateSdidFromUrl=function(t){var i=g._parseAdobeMcSdidFromUrl(t),n=1e9;i&&i.TS&&(n=R.getTimestampInSeconds()-i.TS),i&&i.SDID&&i[C]===e&&n<g.sdidParamExpiry&&(g._supplementalDataIDCurrent=i.SDID,g._supplementalDataIDCurrentConsumed.SDID_URL_PARAM=!0)},g._attemptToPopulateIdsFromUrl=function(){var t=g._parseAdobeMcFromUrl();if(t&&t.TS){var i=R.getTimestampInSeconds()-t.TS;if(Math.floor(i/60)>h.ADOBE_MC_TTL_IN_MIN||t[C]!==e)return;r(t)}},g.resetState=function(e){e?g._mergeServerState(e):o()},g._mergeServerState=function(e){if(e)try{if(n=e,(e=R.isObject(n)?n:R.parseJSON(n))[g.marketingCloudOrgID]){var t=e[g.marketingCloudOrgID];i=t.customerIDs,R.isObject(i)&&g.setCustomerIDs(i),o(t.sdid)}}catch(e){throw new Error("`serverState` has an invalid format.")}var i,n},g._timeout=null,g._loadData=function(e,t,i,n){t=g._addQuerystringParam(t,"d_fieldgroup",e,1),n.url=g._addQuerystringParam(n.url,"d_fieldgroup",e,1),n.corsUrl=g._addQuerystringParam(n.corsUrl,"d_fieldgroup",e,1),x.fieldGroupObj[e]=!0,n===Object(n)&&n.corsUrl&&"XMLHttpRequest"===g._requestProcs.corsMetadata.corsType?g._requestProcs.fireCORS(n,i,e):g.useCORSOnly||g._loadJSONP(e,t,i)},g._loadJSONP=function(e,t,i){var n,r=0,s=0;if(t&&p){for(n=0;!r&&n<2;){try{r=(r=p.getElementsByTagName(0<n?"HEAD":"head"))&&0<r.length?r[0]:0}catch(e){r=0}n++}if(!r)try{p.body&&(r=p.body)}catch(e){r=0}if(r)for(n=0;!s&&n<2;){try{s=p.createElement(0<n?"SCRIPT":"script")}catch(e){s=0}n++}}if(t&&r&&s){s.type="text/javascript",s.src=t,r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s);var o=g.loadTimeout;i&&(null==g._timeout&&(g._timeout={}),g._timeout[e]=setTimeout(function(){i(!0)},o)),g._log.requests.push(t)}else i&&i()},g._clearTimeout=function(e){null!=g._timeout&&g._timeout[e]&&(clearTimeout(g._timeout[e]),g._timeout[e]=0)},g._isAllowedDone=!1,g._isAllowedFlag=!1,g.isAllowed=function(){return g._isAllowedDone||(g._isAllowedDone=!0,(g.cookieRead(g.cookieName)||g.cookieWrite(g.cookieName,"T",1))&&(g._isAllowedFlag=!0)),g._isAllowedFlag},g._fields=null,g._fieldsExpired=null;var D="MC",I="MCMID",C="MCORGID",v="MCCIDH",A="MCSYNCS",y="MCSYNCSOP",M="MCIDTS",b="MCOPTOUT",E="A",O="MCAID",T="AAM",k="MCAAMLH",L="MCAAMB",P="NONE";g._settingsDigest=0,g._getSettingsDigest=function(){if(!g._settingsDigest){var e=g.version;g.audienceManagerServer&&(e+="|"+g.audienceManagerServer),g.audienceManagerServerSecure&&(e+="|"+g.audienceManagerServerSecure),g._settingsDigest=g._hash(e)}return g._settingsDigest},g._readVisitorDone=!1,g._readVisitor=function(){if(!g._readVisitorDone){g._readVisitorDone=!0;var e,t,i,n,r,s,o=g._getSettingsDigest(),a=!1,l=g.cookieRead(g.cookieName),c=new Date;if(null==g._fields&&(g._fields={}),l&&"T"!==l)for((l=l.split("|"))[0].match(/^[\-0-9]+$/)&&(parseInt(l[0],10)!==o&&(a=!0),l.shift()),l.length%2==1&&l.pop(),e=0;e<l.length;e+=2)i=(t=l[e].split("-"))[0],n=l[e+1],s=1<t.length?(r=parseInt(t[1],10),0<t[1].indexOf("s")):(r=0,!1),a&&(i===v&&(n=""),0<r&&(r=c.getTime()/1e3-60)),i&&n&&(g._setField(i,n,1),0<r&&(g._fields["expire"+i]=r+(s?"s":""),(c.getTime()>=1e3*r||s&&!g.cookieRead(g.sessionCookieName))&&(g._fieldsExpired||(g._fieldsExpired={}),g._fieldsExpired[i]=!0)));!g._getField(O)&&R.isTrackingServerPopulated()&&(l=g.cookieRead("s_vi"))&&(1<(l=l.split("|")).length&&0<=l[0].indexOf("v1")&&(0<=(e=(n=l[1]).indexOf("["))&&(n=n.substring(0,e)),n&&n.match(h.VALID_VISITOR_ID_REGEX)&&g._setField(O,n)))}},g._appendVersionTo=function(e){var t="vVersion|"+g.version,i=e?g._getCookieVersion(e):null;return i?R.areVersionsDifferent(i,g.version)&&(e=e.replace(h.VERSION_REGEX,t)):e+=(e?"|":"")+t,e},g._writeVisitor=function(){var e,t,i=g._getSettingsDigest();for(e in g._fields)S(e)&&g._fields[e]&&"expire"!==e.substring(0,6)&&(t=g._fields[e],i+=(i?"|":"")+e+(g._fields["expire"+e]?"-"+g._fields["expire"+e]:"")+"|"+t);i=g._appendVersionTo(i),g.cookieWrite(g.cookieName,i,1)},g._getField=function(e,t){return null==g._fields||!t&&g._fieldsExpired&&g._fieldsExpired[e]?null:g._fields[e]},g._setField=function(e,t,i){null==g._fields&&(g._fields={}),g._fields[e]=t,i||g._writeVisitor()},g._getFieldList=function(e,t){var i=g._getField(e,t);return i?i.split("*"):null},g._setFieldList=function(e,t,i){g._setField(e,t?t.join("*"):"",i)},g._getFieldMap=function(e,t){var i=g._getFieldList(e,t);if(i){var n,r={};for(n=0;n<i.length;n+=2)r[i[n]]=i[n+1];return r}return null},g._setFieldMap=function(e,t,i){var n,r=null;if(t)for(n in r=[],t)S(n)&&(r.push(n),r.push(t[n]));g._setFieldList(e,r,i)},g._setFieldExpire=function(e,t,i){var n=new Date;n.setTime(n.getTime()+1e3*t),null==g._fields&&(g._fields={}),g._fields["expire"+e]=Math.floor(n.getTime()/1e3)+(i?"s":""),t<0?(g._fieldsExpired||(g._fieldsExpired={}),g._fieldsExpired[e]=!0):g._fieldsExpired&&(g._fieldsExpired[e]=!1),i&&(g.cookieRead(g.sessionCookieName)||g.cookieWrite(g.sessionCookieName,"1"))},g._findVisitorID=function(e){return e&&("object"==typeof e&&(e=e.d_mid?e.d_mid:e.visitorID?e.visitorID:e.id?e.id:e.uuid?e.uuid:""+e),e&&"NOTARGET"===(e=e.toUpperCase())&&(e=P),e&&(e===P||e.match(h.VALID_VISITOR_ID_REGEX))||(e="")),e},g._setFields=function(e,t){if(g._clearTimeout(e),null!=g._loading&&(g._loading[e]=!1),x.fieldGroupObj[e]&&x.setState(e,!1),e===D){!0!==x.isClientSideMarketingCloudVisitorID&&(x.isClientSideMarketingCloudVisitorID=!1);var i=g._getField(I);if(!i||g.overwriteCrossDomainMCIDAndAID){if(!(i="object"==typeof t&&t.mid?t.mid:g._findVisitorID(t))){if(g._use1stPartyMarketingCloudServer&&!g.tried1stPartyMarketingCloudServer)return g.tried1stPartyMarketingCloudServer=!0,void g.getAnalyticsVisitorID(null,!1,!0);i=g._generateID(0,I)}g._setField(I,i)}i&&i!==P||(i=""),"object"==typeof t&&((t.d_region||t.dcs_region||t.d_blob||t.blob)&&g._setFields(T,t),g._use1stPartyMarketingCloudServer&&t.mid&&g._setFields(E,{id:t.id})),g._callAllCallbacks(I,[i])}if(e===T&&"object"==typeof t){var n=604800;null!=t.id_sync_ttl&&t.id_sync_ttl&&(n=parseInt(t.id_sync_ttl,10));var r=g._getField(k);r||((r=t.d_region)||(r=t.dcs_region),r&&(g._setFieldExpire(k,n),g._setField(k,r))),r||(r=""),g._callAllCallbacks(k,[r]);var s=g._getField(L);(t.d_blob||t.blob)&&((s=t.d_blob)||(s=t.blob),g._setFieldExpire(L,n),g._setField(L,s)),s||(s=""),g._callAllCallbacks(L,[s]),!t.error_msg&&g._newCustomerIDsHash&&g._setField(v,g._newCustomerIDsHash)}if(e===E){var o=g._getField(O);o&&!g.overwriteCrossDomainMCIDAndAID||((o=g._findVisitorID(t))?o!==P&&g._setFieldExpire(L,-1):o=P,g._setField(O,o)),o&&o!==P||(o=""),g._callAllCallbacks(O,[o])}if(g.idSyncDisableSyncs)F.idCallNotProcesssed=!0;else{F.idCallNotProcesssed=!1;var a={};a.ibs=t.ibs,a.subdomain=t.subdomain,F.processIDCallData(a)}var l,c;t===Object(t)&&(g.isAllowed()&&(l=g._getField(b)),l||(l=P,t.d_optout&&t.d_optout instanceof Array&&(l=t.d_optout.join(",")),c=parseInt(t.d_ottl,10),isNaN(c)&&(c=7200),g._setFieldExpire(b,c,!0),g._setField(b,l)),g._callAllCallbacks(b,[l]))},g._loading=null,g._getRemoteField=function(i,e,t,n,r){var s,o="",a=R.isFirstPartyAnalyticsVisitorIDCall(i);if(g.isAllowed())if(g._readVisitor(),!(!(o=g._getField(i,!0===V[i]))||g._fieldsExpired&&g._fieldsExpired[i])||g.disableThirdPartyCalls&&!a)o||(i===I?(g._registerCallback(i,t),o=g._generateID(0,I),g.setMarketingCloudVisitorID(o)):i===O?(g._registerCallback(i,t),o="",g.setAnalyticsVisitorID(o)):n=!(o=""));else if(i===I||i===b?s=D:i===k||i===L?s=T:i===O&&(s=E),s)return!e||null!=g._loading&&g._loading[s]||(null==g._loading&&(g._loading={}),g._loading[s]=!0,g._loadData(s,e,function(e){if(!g._getField(i)){e&&x.setState(s,!0);var t="";i===I?t=g._generateID(0,I):s===T&&(t={error_msg:"timeout"}),g._setFields(s,t)}},r)),g._registerCallback(i,t),o||(e||g._setFields(s,{id:P}),"");return i!==I&&i!==O||o!==P||(n=!(o="")),t&&n&&g._callCallback(t,[o]),o},g._setMarketingCloudFields=function(e){g._readVisitor(),g._setFields(D,e)},g.setMarketingCloudVisitorID=function(e){g._setMarketingCloudFields(e)},g._use1stPartyMarketingCloudServer=!1,g.getMarketingCloudVisitorID=function(e,t){if(g.isAllowed()){g.marketingCloudServer&&g.marketingCloudServer.indexOf(".demdex.net")<0&&(g._use1stPartyMarketingCloudServer=!0);var i=g._getAudienceManagerURLData("_setMarketingCloudFields"),n=i.url;return g._getRemoteField(I,n,e,t,i)}return""},g._mapCustomerIDs=function(e){g.getAudienceManagerBlob(e,!0)},m.AuthState={UNKNOWN:0,AUTHENTICATED:1,LOGGED_OUT:2},g._currentCustomerIDs={},g._customerIDsHashChanged=!1,g._newCustomerIDsHash="",g.setCustomerIDs=function(e){if(g.isAllowed()&&e){var t,i;for(t in g._readVisitor(),e)if(S(t)&&(i=e[t]))if("object"==typeof i){var n={};i.id&&(n.id=i.id),null!=i.authState&&(n.authState=i.authState),g._currentCustomerIDs[t]=n}else g._currentCustomerIDs[t]={id:i};var r=g.getCustomerIDs(),s=g._getField(v),o="";for(t in s||(s=0),r)S(t)&&(o+=(o?"|":"")+t+"|"+((i=r[t]).id?i.id:"")+(i.authState?i.authState:""));g._newCustomerIDsHash=g._hash(o),g._newCustomerIDsHash!==s&&(g._customerIDsHashChanged=!0,g._mapCustomerIDs(function(){g._customerIDsHashChanged=!1}))}},g.getCustomerIDs=function(){g._readVisitor();var e,t,i={};for(e in g._currentCustomerIDs)S(e)&&(t=g._currentCustomerIDs[e],i[e]||(i[e]={}),t.id&&(i[e].id=t.id),null!=t.authState?i[e].authState=t.authState:i[e].authState=m.AuthState.UNKNOWN);return i},g._setAnalyticsFields=function(e){g._readVisitor(),g._setFields(E,e)},g.setAnalyticsVisitorID=function(e){g._setAnalyticsFields(e)},g.getAnalyticsVisitorID=function(t,e,i){if(!R.isTrackingServerPopulated()&&!i)return g._callCallback(t,[""]),"";if(g.isAllowed()){var n="";if(i||(n=g.getMarketingCloudVisitorID(function(e){g.getAnalyticsVisitorID(t,!0)})),n||i){var r=i?g.marketingCloudServer:g.trackingServer,s="";g.loadSSL&&(i?g.marketingCloudServerSecure&&(r=g.marketingCloudServerSecure):g.trackingServerSecure&&(r=g.trackingServerSecure));var o={};if(r){var a="http"+(g.loadSSL?"s":"")+"://"+r+"/id",l="d_visid_ver="+g.version+"&mcorgid="+encodeURIComponent(g.marketingCloudOrgID)+(n?"&mid="+encodeURIComponent(n):"")+(g.idSyncDisable3rdPartySyncing?"&d_coppa=true":""),c=["s_c_il",g._in,"_set"+(i?"MarketingCloud":"Analytics")+"Fields"];s=a+"?"+l+"&callback=s_c_il%5B"+g._in+"%5D._set"+(i?"MarketingCloud":"Analytics")+"Fields",o.corsUrl=a+"?"+l,o.callback=c}return o.url=s,g._getRemoteField(i?I:O,s,t,e,o)}}return""},g._setAudienceManagerFields=function(e){g._readVisitor(),g._setFields(T,e)},g._getAudienceManagerURLData=function(e){var t=g.audienceManagerServer,i="",n=g._getField(I),r=g._getField(L,!0),s=g._getField(O),o=s&&s!==P?"&d_cid_ic=AVID%01"+encodeURIComponent(s):"";if(g.loadSSL&&g.audienceManagerServerSecure&&(t=g.audienceManagerServerSecure),t){var a,l,c=g.getCustomerIDs();if(c)for(a in c)S(a)&&(l=c[a],o+="&d_cid_ic="+encodeURIComponent(a)+"%01"+encodeURIComponent(l.id?l.id:"")+(l.authState?"%01"+l.authState:""));e||(e="_setAudienceManagerFields");var u="http"+(g.loadSSL?"s":"")+"://"+t+"/id",d="d_visid_ver="+g.version+"&d_rtbd=json&d_ver=2"+(!n&&g._use1stPartyMarketingCloudServer?"&d_verify=1":"")+"&d_orgid="+encodeURIComponent(g.marketingCloudOrgID)+"&d_nsid="+(g.idSyncContainerID||0)+(n?"&d_mid="+encodeURIComponent(n):"")+(g.idSyncDisable3rdPartySyncing?"&d_coppa=true":"")+(!0===j?"&d_coop_safe=1":!1===j?"&d_coop_unsafe=1":"")+(r?"&d_blob="+encodeURIComponent(r):"")+o,h=["s_c_il",g._in,e];return{url:i=u+"?"+d+"&d_cb=s_c_il%5B"+g._in+"%5D."+e,corsUrl:u+"?"+d,callback:h}}return{url:i}},g.getAudienceManagerLocationHint=function(t,e){if(g.isAllowed()&&g.getMarketingCloudVisitorID(function(e){g.getAudienceManagerLocationHint(t,!0)})){var i=g._getField(O);if(!i&&R.isTrackingServerPopulated()&&(i=g.getAnalyticsVisitorID(function(e){g.getAudienceManagerLocationHint(t,!0)})),i||!R.isTrackingServerPopulated()){var n=g._getAudienceManagerURLData(),r=n.url;return g._getRemoteField(k,r,t,e,n)}}return""},g.getLocationHint=g.getAudienceManagerLocationHint,g.getAudienceManagerBlob=function(t,e){if(g.isAllowed()&&g.getMarketingCloudVisitorID(function(e){g.getAudienceManagerBlob(t,!0)})){var i=g._getField(O);if(!i&&R.isTrackingServerPopulated()&&(i=g.getAnalyticsVisitorID(function(e){g.getAudienceManagerBlob(t,!0)})),i||!R.isTrackingServerPopulated()){var n=g._getAudienceManagerURLData(),r=n.url;return g._customerIDsHashChanged&&g._setFieldExpire(L,-1),g._getRemoteField(L,r,t,e,n)}}return""},g._supplementalDataIDCurrent="",g._supplementalDataIDCurrentConsumed={},g._supplementalDataIDLast="",g._supplementalDataIDLastConsumed={},g.getSupplementalDataID=function(e,t){g._supplementalDataIDCurrent||t||(g._supplementalDataIDCurrent=g._generateID(1));var i=g._supplementalDataIDCurrent;return g._supplementalDataIDLast&&!g._supplementalDataIDLastConsumed[e]?(i=g._supplementalDataIDLast,g._supplementalDataIDLastConsumed[e]=!0):i&&(g._supplementalDataIDCurrentConsumed[e]&&(g._supplementalDataIDLast=g._supplementalDataIDCurrent,g._supplementalDataIDLastConsumed=g._supplementalDataIDCurrentConsumed,g._supplementalDataIDCurrent=i=t?"":g._generateID(1),g._supplementalDataIDCurrentConsumed={}),i&&(g._supplementalDataIDCurrentConsumed[e]=!0)),i},m.OptOut={GLOBAL:"global"},g.getOptOut=function(e,t){if(g.isAllowed()){var i=g._getAudienceManagerURLData("_setMarketingCloudFields"),n=i.url;return g._getRemoteField(b,n,e,t,i)}return""},g.isOptedOut=function(i,n,e){if(g.isAllowed()){n||(n=m.OptOut.GLOBAL);var t=g.getOptOut(function(e){var t=e===m.OptOut.GLOBAL||0<=e.indexOf(n);g._callCallback(i,[t])},e);return t?t===m.OptOut.GLOBAL||0<=t.indexOf(n):null}return!1},g.appendVisitorIDsTo=function(e){var t=h.ADOBE_MC,i=l([[I,g._getField(I)],[O,g._getField(O)],[C,g.marketingCloudOrgID]]);try{return g._addQuerystringParam(e,t,i)}catch(t){return e}},g.appendSupplementalDataIDTo=function(e,t){if(!(t=t||g.getSupplementalDataID(R.generateRandomString(),!0)))return e;var i=h.ADOBE_MC_SDID,n="SDID="+encodeURIComponent(t)+"|";n+=C+"="+encodeURIComponent(g.marketingCloudOrgID)+"|",n+="TS="+R.getTimestampInSeconds();try{return g._addQuerystringParam(e,i,n)}catch(t){return e}},g._xd={postMessage:function(e,t,i){var n=1;t&&(h.POST_MESSAGE_ENABLED?i.postMessage(e,t.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):t&&(i.location=t.replace(/#.*$/,"")+"#"+ +new Date+n+++"&"+e))},receiveMessage:function(t,i){var e;try{h.POST_MESSAGE_ENABLED&&(t&&(e=function(e){if("string"==typeof i&&e.origin!==i||"[object Function]"===Object.prototype.toString.call(i)&&!1===i(e.origin))return!1;t(e)}),_.addEventListener?_[t?"addEventListener":"removeEventListener"]("message",e,!1):_[t?"attachEvent":"detachEvent"]("å",e))}catch(t){}}};var R={addListener:p.addEventListener?function(e,t,i){e.addEventListener(t,function(e){"function"==typeof i&&i(e)},!1)}:p.attachEvent?function(e,t,i){e.attachEvent("on"+t,function(e){"function"==typeof i&&i(e)})}:void 0,map:function(e,t){if(Array.prototype.map)return e.map(t);if(void 0===e||null==e)throw new TypeError;var i=Object(e),n=i.length>>>0;if("function"!=typeof t)throw new TypeError;for(var r=new Array(n),s=t,o=0;o<n;o++)o in i&&(r[o]=t.call(s,i[o],o,i));return r},encodeAndBuildRequest:function(e,t){return this.map(e,function(e){return encodeURIComponent(e)}).join(t)},parseHash:function(e){var t=e.indexOf("#");return 0<t?e.substr(t):""},hashlessUrl:function(e){var t=e.indexOf("#");return 0<t?e.substr(0,t):e},addQueryParamAtLocation:function(e,t,i){var n=e.split("&");return i=null!=i?i:n.length,n.splice(i,0,t),n.join("&")},isFirstPartyAnalyticsVisitorIDCall:function(e,t,i){return e===O&&(t||(t=g.trackingServer),i||(i=g.trackingServerSecure),!("string"!=typeof(n=g.loadSSL?i:t)||!n.length)&&n.indexOf("2o7.net")<0&&n.indexOf("omtrdc.net")<0);var n},isObject:function(e){return Boolean(e&&e===Object(e))},isLessThan:function(e,t){return g._compareVersions(e,t)<0},areVersionsDifferent:function(e,t){return 0!==g._compareVersions(e,t)},removeCookie:function(e){document.cookie=encodeURIComponent(e)+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"},isTrackingServerPopulated:function(){return!!g.trackingServer||!!g.trackingServerSecure},parseJSON:function(e,t){function i(e,n){var r,s,o=e[n];if(o&&"object"==typeof o)for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(void 0!==(s=i(o,r))?o[r]=s:delete o[r]);return t.call(e,n,o)}if("object"==typeof JSON&&"function"==typeof JSON.parse)return JSON.parse(e,t);var n,r=/^[\],:{}\s]*$/,a=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,s=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,l=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;if(e=String(e),l.lastIndex=0,l.test(e)&&(e=e.replace(l,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),r.test(e.replace(a,"@").replace(s,"]").replace(o,"")))return n=eval("("+e+")"),"function"==typeof t?i({"":n},""):n;throw new SyntaxError("JSON.parse")},getTimestampInSeconds:function(){return Math.round((new Date).getTime()/1e3)},parsePipeDelimetedKeyValues:function(e){for(var t={},i=e.split("|"),n=0,r=i.length;n<r;n++){var s=i[n].split("=");t[s[0]]=decodeURIComponent(s[1])}return t},generateRandomString:function(e){e=e||5;for(var t="",i="abcdefghijklmnopqrstuvwxyz0123456789";e--;)t+=i[Math.floor(Math.random()*i.length)];return t},parseBoolean:function(e){return"true"===e||"false"!==e&&null}};g._helpers=R;var w={corsMetadata:(xkb="none",ykb=!0,"undefined"!=typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?xkb="XMLHttpRequest":"undefined"!=typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(ykb=!1),0<Object.prototype.toString.call(_.HTMLElement).indexOf("Constructor")&&(ykb=!1)),{corsType:xkb,corsCookiesEnabled:ykb}),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new _[this.corsMetadata.corsType]},fireCORS:function(s,e,t){var o=this;e&&(s.loadErrorHandler=e);try{var i=this.getCORSInstance();i.open("get",s.corsUrl+"&ts="+(new Date).getTime(),!0),"XMLHttpRequest"===this.corsMetadata.corsType&&(i.withCredentials=!0,i.timeout=g.loadTimeout,i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){4===this.readyState&&200===this.status&&function(e){var t;try{if((t=JSON.parse(e))!==Object(t))return o.handleCORSError(s,null,"Response is not JSON")}catch(e){return o.handleCORSError(s,e,"Error parsing response as JSON")}try{for(var i=s.callback,n=_,r=0;r<i.length;r++)n=n[i[r]];n(t)}catch(e){o.handleCORSError(s,e,"Error forming callback function")}}(this.responseText)}),i.onerror=function(e){o.handleCORSError(s,e,"onerror")},i.ontimeout=function(e){o.handleCORSError(s,e,"ontimeout")},i.send(),g._log.requests.push(s.corsUrl)}catch(e){this.handleCORSError(s,e,"try-catch")}},handleCORSError:function(e,t,i){g.CORSErrors.push({corsData:e,error:t,description:i}),e.loadErrorHandler&&("ontimeout"===i?e.loadErrorHandler(!0):e.loadErrorHandler(!1))}},xkb,ykb;g._requestProcs=w;var F={THROTTLE_START:3e4,MAX_SYNCS_LENGTH:649,throttleTimerSet:!1,id:null,onPagePixels:[],iframeHost:null,getIframeHost:function(e){if("string"==typeof e){var t=e.split("/");return t[0]+"//"+t[2]}},subdomain:null,url:null,getUrl:function(){var e,t="http://fast.",i="?d_nsid="+g.idSyncContainerID+"#"+encodeURIComponent(p.location.href);return this.subdomain||(this.subdomain="nosubdomainreturned"),g.loadSSL&&(t=g.idSyncSSLUseAkamai?"https://fast.":"https://"),e=t+this.subdomain+".demdex.net/dest5.html"+i,this.iframeHost=this.getIframeHost(e),this.id="destination_publishing_iframe_"+this.subdomain+"_"+g.idSyncContainerID,e},checkDPIframeSrc:function(){var e="?d_nsid="+g.idSyncContainerID+"#"+encodeURIComponent(p.location.href);"string"==typeof g.dpIframeSrc&&g.dpIframeSrc.length&&(this.id="destination_publishing_iframe_"+(g._subdomain||this.subdomain||(new Date).getTime())+"_"+g.idSyncContainerID,this.iframeHost=this.getIframeHost(g.dpIframeSrc),this.url=g.dpIframeSrc+e)},idCallNotProcesssed:null,doAttachIframe:!1,startedAttachingIframe:!1,iframeHasLoaded:null,iframeIdChanged:null,newIframeCreated:null,originalIframeHasLoadedAlready:null,sendingMessages:!1,messages:[],messagesPosted:[],messagesReceived:[],messageSendingInterval:h.POST_MESSAGE_ENABLED?null:100,jsonForComparison:[],jsonDuplicates:[],jsonWaiting:[],jsonProcessed:[],canSetThirdPartyCookies:!0,receivedThirdPartyCookiesNotification:!1,readyToAttachIframe:function(){return!g.idSyncDisable3rdPartySyncing&&(this.doAttachIframe||g._doAttachIframe)&&(this.subdomain&&"nosubdomainreturned"!==this.subdomain||g._subdomain)&&this.url&&!this.startedAttachingIframe},attachIframe:function(){function e(){(n=document.createElement("iframe")).sandbox="allow-scripts allow-same-origin",n.title="Adobe ID Syncing iFrame",n.id=i.id,n.style.cssText="display: none; width: 0; height: 0;",n.src=i.url,i.newIframeCreated=!0,t(),document.body.appendChild(n)}function t(){R.addListener(n,"load",function(){n.className="aamIframeLoaded",i.iframeHasLoaded=!0,i.requestToProcess()})}this.startedAttachingIframe=!0;var i=this,n=document.getElementById(this.id);n?"IFRAME"!==n.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==n.className?(this.originalIframeHasLoadedAlready=!1,t()):(this.originalIframeHasLoadedAlready=!0,this.iframeHasLoaded=!0,this.iframe=n,this.requestToProcess())):e(),this.iframe=n},requestToProcess:function(e){function t(){n.jsonForComparison.push(e),n.jsonWaiting.push(e),n.processSyncOnPage(e)}var i,n=this;if(e===Object(e)&&e.ibs)if(h.HAS_JSON_STRINGIFY)if(i=JSON.stringify(e.ibs||[]),this.jsonForComparison.length){var r,s,o,a=!1;for(r=0,s=this.jsonForComparison.length;r<s;r++)if(o=this.jsonForComparison[r],i===JSON.stringify(o.ibs||[])){a=!0;break}a?this.jsonDuplicates.push(e):t()}else t();else t();if((this.receivedThirdPartyCookiesNotification||!h.POST_MESSAGE_ENABLED||this.iframeHasLoaded)&&this.jsonWaiting.length){var l=this.jsonWaiting.shift();this.process(l),this.requestToProcess()}!g.idSyncDisableSyncs&&this.iframeHasLoaded&&this.messages.length&&!this.sendingMessages&&(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){n.messageSendingInterval=h.POST_MESSAGE_ENABLED?null:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},processSyncOnPage:function(e){var t,i,n,r;if((t=e.ibs)&&t instanceof Array&&(i=t.length))for(n=0;n<i;n++)(r=t[n]).syncOnPage&&this.checkFirstPartyCookie(r,"","syncOnPage")},process:function(e){var t,i,n,r,s,o=encodeURIComponent,a=!1;if((t=e.ibs)&&t instanceof Array&&(i=t.length))for(a=!0,n=0;n<i;n++)r=t[n],s=[o("ibs"),o(r.id||""),o(r.tag||""),R.encodeAndBuildRequest(r.url||[],","),o(r.ttl||""),"","",r.fireURLSync?"true":"false"],r.syncOnPage||(this.canSetThirdPartyCookies?this.addMessage(s.join("|")):r.fireURLSync&&this.checkFirstPartyCookie(r,s.join("|")));a&&this.jsonProcessed.push(e)},checkFirstPartyCookie:function(e,t,i){var n="syncOnPage"===i,r=n?y:A;g._readVisitor();var s,o,a=g._getField(r),l=!1,c=!1,u=Math.ceil((new Date).getTime()/h.MILLIS_PER_DAY);a?(s=a.split("*"),l=(o=this.pruneSyncData(s,e.id,u)).dataPresent,c=o.dataValid,l&&c||this.fireSync(n,e,t,s,r,u)):(s=[],this.fireSync(n,e,t,s,r,u))},pruneSyncData:function(e,t,i){var n,r,s,o=!1,a=!1;for(r=0;r<e.length;r++)n=e[r],s=parseInt(n.split("-")[1],10),n.match("^"+t+"-")?(o=!0,i<s?a=!0:(e.splice(r,1),r--)):s<=i&&(e.splice(r,1),r--);return{dataPresent:o,dataValid:a}},manageSyncsSize:function(e){if(e.join("*").length>this.MAX_SYNCS_LENGTH)for(e.sort(function(e,t){return parseInt(e.split("-")[1],10)-parseInt(t.split("-")[1],10)});e.join("*").length>this.MAX_SYNCS_LENGTH;)e.shift()},fireSync:function(e,t,i,n,u,r){var d=this;if(e){if("img"===t.tag){var s,o,a,l,c=t.url,h=g.loadSSL?"https:":"http:";for(s=0,o=c.length;s<o;s++){a=c[s],l=/^\/\//.test(a);var p=new Image;R.addListener(p,"load",function(o,a,l,c){return function(){d.onPagePixels[o]=null,g._readVisitor();var e,t,i,n,r=g._getField(u),s=[];if(r)for(t=0,i=(e=r.split("*")).length;t<i;t++)(n=e[t]).match("^"+a.id+"-")||s.push(n);d.setSyncTrackingData(s,a,l,c)}}(this.onPagePixels.length,t,u,r)),p.src=(l?h:"")+a,this.onPagePixels.push(p)}}}else this.addMessage(i),this.setSyncTrackingData(n,t,u,r)},addMessage:function(e){var t=encodeURIComponent(g._enableErrorReporting?"---destpub-debug---":"---destpub---");this.messages.push((h.POST_MESSAGE_ENABLED?"":t)+e)},setSyncTrackingData:function(e,t,i,n){e.push(t.id+"-"+(n+Math.ceil(t.ttl/60/24))),this.manageSyncsSize(e),g._setField(i,e.join("*"))},sendMessages:function(){var e,t=this;this.messages.length?h.POST_MESSAGE_ENABLED?(e=encodeURIComponent("---destpub-combined---")+this.messages.join("%01"),this.postMessage(e),this.messages=[],this.sendingMessages=!1):(e=this.messages.shift(),this.postMessage(e),setTimeout(function(){t.sendMessages()},this.messageSendingInterval)):this.sendingMessages=!1},postMessage:function(e){g._xd.postMessage(e,this.url,this.iframe.contentWindow),this.messagesPosted.push(e)},receiveMessage:function(e){var t,i=/^---destpub-to-parent---/;"string"==typeof e&&i.test(e)&&("canSetThirdPartyCookies"===(t=e.replace(i,"").split("|"))[0]&&(this.canSetThirdPartyCookies="true"===t[1],this.receivedThirdPartyCookiesNotification=!0,this.requestToProcess()),this.messagesReceived.push(e))},processIDCallData:function(e){(null==this.url||e.subdomain&&"nosubdomainreturned"===this.subdomain)&&("string"==typeof g._subdomain&&g._subdomain.length?this.subdomain=g._subdomain:this.subdomain=e.subdomain||"",this.url=this.getUrl()),e.ibs instanceof Array&&e.ibs.length&&(this.doAttachIframe=!0),this.readyToAttachIframe()&&(g.idSyncAttachIframeOnWindowLoad?(m.windowLoaded||"complete"===p.readyState||"loaded"===p.readyState)&&this.attachIframe():this.attachIframeASAP()),"function"==typeof g.idSyncIDCallResult?g.idSyncIDCallResult(e):this.requestToProcess(e),"function"==typeof g.idSyncAfterIDCallResult&&g.idSyncAfterIDCallResult(e)},canMakeSyncIDCall:function(e,t){return g._forceSyncIDCall||!e||t-e>h.DAYS_BETWEEN_SYNC_ID_CALLS},attachIframeASAP:function(){var t=this;!function e(){t.startedAttachingIframe||(document.body?t.attachIframe():setTimeout(e,30))}()}};g._destinationPublishing=F,g.timeoutMetricsLog=[];var N,x={isClientSideMarketingCloudVisitorID:null,MCIDCallTimedOut:null,AnalyticsIDCallTimedOut:null,AAMIDCallTimedOut:null,fieldGroupObj:{},setState:function(e,t){switch(e){case D:!1===t?!0!==this.MCIDCallTimedOut&&(this.MCIDCallTimedOut=!1):this.MCIDCallTimedOut=t;break;case E:!1===t?!0!==this.AnalyticsIDCallTimedOut&&(this.AnalyticsIDCallTimedOut=!1):this.AnalyticsIDCallTimedOut=t;break;case T:!1===t?!0!==this.AAMIDCallTimedOut&&(this.AAMIDCallTimedOut=!1):this.AAMIDCallTimedOut=t}}};g.isClientSideMarketingCloudVisitorID=function(){return x.isClientSideMarketingCloudVisitorID},g.MCIDCallTimedOut=function(){return x.MCIDCallTimedOut},g.AnalyticsIDCallTimedOut=function(){return x.AnalyticsIDCallTimedOut},g.AAMIDCallTimedOut=function(){return x.AAMIDCallTimedOut},g.idSyncGetOnPageSyncInfo=function(){return g._readVisitor(),g._getField(y)},g.idSyncByURL=function(e){var t=u(e||{});if(t.error)return t.error;var i,n,r=e.url,s=encodeURIComponent,o=F;return r=r.replace(/^https:/,"").replace(/^http:/,""),i=R.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],","),n=["ibs",s(e.dpid),"img",s(r),t.ttl,"",i],o.addMessage(n.join("|")),o.requestToProcess(),"Successfully queued"},g.idSyncByDataSource=function(e){return e===Object(e)&&"string"==typeof e.dpuuid&&e.dpuuid.length?(e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid,g.idSyncByURL(e)):"Error: config or config.dpuuid is empty"},g._compareVersions=function(e,t){if(e===t)return 0;var i=e.toString().split("."),n=t.toString().split(".");return c(i.concat(n))?(d(i,n),f(i,n)):NaN},g._getCookieVersion=function(e){e=e||g.cookieRead(g.cookieName);var t=h.VERSION_REGEX.exec(e);return t&&1<t.length?t[1]:null},g._resetAmcvCookie=function(e){var t=g._getCookieVersion();t&&!R.isLessThan(t,e)||R.removeCookie(g.cookieName)},g.setAsCoopSafe=function(){j=!0},g.setAsCoopUnsafe=function(){j=!1},e.indexOf("@")<0&&(e+="@AdobeOrg"),g.marketingCloudOrgID=e,g.cookieName="AMCV_"+e,g.sessionCookieName="AMCVS_"+e,g.cookieDomain=g._getDomain(),g.cookieDomain===_.location.hostname&&(g.cookieDomain=""),g.loadSSL=0<=_.location.protocol.toLowerCase().indexOf("https"),g.loadTimeout=3e4,g.CORSErrors=[],g.marketingCloudServer=g.audienceManagerServer="dpm.demdex.net",g.sdidParamExpiry=30;var V={};V[k]=!0,V[L]=!0;var j=null;if(t&&"object"==typeof t){var U;for(U in t)S(U)&&(g[U]=t[U]);g.idSyncContainerID=g.idSyncContainerID||0,j="boolean"==typeof g.isCoopSafe?g.isCoopSafe:R.parseBoolean(g.isCoopSafe),g.resetBeforeVersion&&g._resetAmcvCookie(g.resetBeforeVersion),g._attemptToPopulateIdsFromUrl(),g._attemptToPopulateSdidFromUrl(),g._readVisitor();var H=g._getField(M),B=Math.ceil((new Date).getTime()/h.MILLIS_PER_DAY);!g.idSyncDisableSyncs&&F.canMakeSyncIDCall(H,B)&&(g._setFieldExpire(L,-1),g._setField(M,B)),g.getMarketingCloudVisitorID(),g.getAudienceManagerLocationHint(),g.getAudienceManagerBlob(),g._mergeServerState(g.serverState)}else g._attemptToPopulateIdsFromUrl(),g._attemptToPopulateSdidFromUrl();if(!g.idSyncDisableSyncs){F.checkDPIframeSrc();var G=function(){var e=F;e.readyToAttachIframe()&&e.attachIframe()};R.addListener(_,"load",function(){m.windowLoaded=!0,G()});try{g._xd.receiveMessage(function(e){F.receiveMessage(e.data)},F.iframeHost)}catch(e){}}g.whitelistIframeDomains&&h.POST_MESSAGE_ENABLED&&(g.whitelistIframeDomains=g.whitelistIframeDomains instanceof Array?g.whitelistIframeDomains:[g.whitelistIframeDomains],g.whitelistIframeDomains.forEach(function(t){var i=new a(e,t),n=s(g,i);g._xd.receiveMessage(n,t)}))};o.getInstance=function(s,e){if(!s)throw new Error("Visitor requires Adobe Marketing Cloud Org ID");s.indexOf("@")<0&&(s+="@AdobeOrg");var t=function(){var e=i.s_c_il;if(e)for(var t=0;t<e.length;t++){var n=e[t];if(n&&"Visitor"===n._c&&n.marketingCloudOrgID===s)return n}}();if(t)return t;var n=new o(s),a=n.isAllowed();return i.s_c_il.splice(--i.s_c_in,1),function(){try{return i.self!==i.parent}catch(e){return!0}}()&&!a&&i.parent?new r(s,e,n,i.parent):new o(s,e)},n(),i.Visitor=o,t.exports=o}).call(this,void 0!==global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ChildVisitor":1,"./Message":2,"./utils/makeChildMessageListener":9}],4:[function(e,t,i){i.MESSAGES={HANDSHAKE:"HANDSHAKE",GETSTATE:"GETSTATE",PARENTSTATE:"PARENTSTATE"},i.STATE_KEYS_MAP={MCMID:"MCMID",MCAID:"MCAID",MCAAMB:"MCAAMB",MCAAMLH:"MCAAMLH",MCOPTOUT:"MCOPTOUT",CUSTOMERIDS:"CUSTOMERIDS"},i.ASYNC_API_MAP={MCMID:"getMarketingCloudVisitorID",MCAID:"getAnalyticsVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"getOptOut"},i.SYNC_API_MAP={CUSTOMERIDS:"getCustomerIDs"},i.ALL_APIS={MCMID:"getMarketingCloudVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"getOptOut",MCAID:"getAnalyticsVisitorID",CUSTOMERIDS:"getCustomerIDs"},i.FIELDGROUP_TO_FIELD={MC:"MCMID",A:"MCAID",AAM:"MCAAMB"}},{}],5:[function(e,t,i){var s=e("../enums").STATE_KEYS_MAP;t.exports=function(r){function n(){}this.getMarketingCloudVisitorID=function(e){e=e||n;var t=this.findField(s.MCMID,e),i=function(e,i){var n=this;return function(){var e=r(0,s.MCMID),t={};return t[s.MCMID]=e,n.setStateAndPublish(t),i(e),e}}.call(this,s.MCMID,e);return void 0!==t?t:i()}}},{"../enums":4}],6:[function(e,t,i){var n=e("../enums").ASYNC_API_MAP;t.exports=function(){Object.keys(n).forEach(function(t){this[n[t]]=function(e){this.callbackRegistry.add(t,e)}},this)}},{"../enums":4}],7:[function(e,t,i){var n=e("../enums"),s=n.MESSAGES,o=n.ASYNC_API_MAP,a=n.SYNC_API_MAP;t.exports=function(){function r(){}Object.keys(o).forEach(function(n){this[o[n]]=function(e){e=e||r;var t=this.findField(n,e),i=function(e,t){var i=this;return function(){return i.callbackRegistry.add(e,t),i.messageParent(s.GETSTATE),""}}.call(this,n,e);return void 0!==t?t:i()}},this),Object.keys(a).forEach(function(e){this[a[e]]=function(){return this.findField(e,r)||{}}},this)}},{"../enums":4}],8:[function(e,t,i){var n=e("./utils");t.exports=function(){return{callbacks:{},add:function(e,t){this.callbacks[e]=this.callbacks[e]||[];var i=this.callbacks[e].push(t)-1;return function(){this.callbacks[e].splice(i,1)}},execute:function(e,t){if(this.callbacks[e]){t=(t=void 0===t?[]:t)instanceof Array?t:[t];try{for(;this.callbacks[e].length;){var i=this.callbacks[e].shift();"function"==typeof i?i.apply(null,t):i instanceof Array&&i[1].apply(i[0],t)}delete this.callbacks[e]}catch(e){}}},executeAll:function(i,e){(e||i&&!n.isObjectEmpty(i))&&Object.keys(this.callbacks).forEach(function(e){var t=void 0!==i[e]?i[e]:"";this.execute(e,t)},this)},hasCallbacks:function(){return Boolean(Object.keys(this.callbacks).length)}}}},{"./utils":11}],9:[function(e,t,i){var n=e("../enums"),s=e("./utils"),a=n.MESSAGES,l=n.ALL_APIS,c=n.ASYNC_API_MAP,u=n.FIELDGROUP_TO_FIELD;t.exports=function(o,r){function t(s){return function e(t){var i,n=(i=[],o._loading&&Object.keys(o._loading).forEach(function(e){if(o._loading[e]){var t=u[e];i.push(t)}}),i.length?i:null);if(n){var r=c[n[0]];o[r](e,!0)}else s()}}function n(e,t){var n,i=(n={},Object.keys(l).forEach(function(e){var t=l[e],i=o[t]();s.isValueEmpty(i)||(n[e]=i)}),n);r.send(e,t,i)}function i(e){var t,i;t=e,i=o.setCustomerIDs,o.setCustomerIDs=function(e){i.call(o,e),r.send(t,a.PARENTSTATE,{CUSTOMERIDS:o.getCustomerIDs()})},n(e,a.HANDSHAKE)}return function(e){r.isInvalid(e)||(r.parse(e).prefix===a.HANDSHAKE?i:function(e){t(function(){n(e,a.PARENTSTATE)})()})(e.source)}}},{"../enums":4,"./utils":11}],10:[function(e,t,i){Object.keys=Object.keys||function(e){var t=[];for(var i in e)t.hasOwnProperty.call(e,i)&&t.push(i);return t},Array.prototype.forEach=Array.prototype.forEach||function(e,t){for(var i=0,n=this.length;i<n;i++)e.call(t,this[i],i,this)},Object.assign=Object.assign||function(e){for(var t,i,n=1;n<arguments.length;++n)for(t in i=arguments[n])Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t]);return e}},{}],11:[function(e,t,i){i.isObjectEmpty=function(e){return e===Object(e)&&0===Object.keys(e).length},i.isValueEmpty=function(e){return""===e||i.isObjectEmpty(e)}},{}]},{},[1,2,3,4])}),define("rofl/lib/analytics/conviva",[],function(){"use strict";return function(e,t){if("function"==typeof dontcheckdefine&&define.amd)define(t);else if("object"==typeof exports)module.exports=t();else{if(void 0!==e.Conviva)return;if(e.ConvivaLoading)return;e.ConvivaLoading=!0,e.Conviva=t(),delete e.ConvivaLoading}}(window,function(){var t,z={};return t={},function(){var d=z.Client=function(e,t){var o=this;this._logger=null,this._sessionFactory=null,this._systemFactory=null,this._globalSessionKey=-1,this._settings=null,this._systemSettings=null,this._exceptionCatcher=null,this._config=null,this._id=-1,this._released=!1,function(e,t){if(!(e instanceof i))throw new Error("clientSettings parameter should be an instance of ClientSettings.");if(!(t instanceof n))throw new Error("systemFactory parameter should be an instance of SystemFactory.");this._settings=e.clone(),this._systemFactory=t,this._systemFactory.configure("SDK",this._settings),this._exceptionCatcher=this._systemFactory.buildExceptionCatcher(),this._exceptionCatcher.runProtected("Client.init",function(){o._id=V.uinteger32(),o._logger=o._systemFactory.buildLogger(),o._logger.setModuleName("Client"),o._logger.info("init(): url="+o._settings.gatewayUrl+" customerKey="+o._settings.customerKey),o._config=o._systemFactory.buildConfig(),o._config.load(),o._sessionFactory=o._systemFactory.buildSessionFactory(o,o._settings,o._config),o._logger.info("init(): done.")},function(e){throw new Error("Client constructor failed: "+e.message)})}.apply(this,arguments),this.release=function(){this._released||this._exceptionCatcher.runProtected("Client.release",function(){o._logger.info("release()"),o._sessionFactory.cleanup(),o._sessionFactory=null,o._globalSessionKey=-1,o._logger=null,o._id=-1,o._exceptionCatcher=null,o._settings=null,o._systemSettings=null,o._systemFactory=null,o._released=!0})},this.createSession=function(e){var t=d.NO_SESSION_KEY;return this._released||(null==e||e instanceof a?this._exceptionCatcher.runProtected("Client.createSession",function(){t=o._sessionFactory.makeVideoSession(e,D.SESSION_TYPE.VIDEO)}):o._logger.error("createSession(): expecting an instance of ContentMetadata for contentMetadata parameter")),t},this.createAdSession=function(t,i){var n=d.NO_SESSION_KEY;return this._released||(null==i||i instanceof a?this._exceptionCatcher.runProtected("Client.createAdSession",function(){var e=o._sessionFactory.getVideoSession(t);null!=e&&((null==i.applicationName||null==i.viewerId)&&(null==i.viewerId&&null!=e._contentMetadata.viewerId&&(i.viewerId=e._contentMetadata.viewerId),null==i.applicationName&&null!=e._contentMetadata.applicationName&&(i.applicationName=e._contentMetadata.applicationName)),i.custom["c3.csid"]=B.ToString(e._id)),n=o._sessionFactory.makeVideoSession(i,D.SESSION_TYPE.AD)}):o._logger.error("createAdSession(): expecting an instance of ContentMetadata for adMetadata parameter")),n},this.reportError=function(t,i,n){return this._released?void 0:B.isValidString(i)?n!==z.Client.ErrorSeverity.FATAL&&n!==z.Client.ErrorSeverity.WARNING?void this._logger.error("reportError(): invalid error severity: "+n):void this._exceptionCatcher.runProtected("Client.reportError",function(){var e=o._sessionFactory.getVideoSession(t);null!=e&&e.reportError(i,n)}):void this._logger.error("reportError(): invalid error message string: "+i)},this.updateContentMetadata=function(i,n){return this._released?void 0:n instanceof a?void this._exceptionCatcher.runProtected("Client.updateContentMetadata",function(){var e=o._sessionFactory.getVideoSession(i);if(null!=e){var t=n.clone();e.updateContentMetadata(t)}}):void o._logger.error("updateContentMetadata(): expecting an instance of ContentMetadata for contentMetadata parameter")},this.detachPlayer=function(t){this._released||this._exceptionCatcher.runProtected("Client.detachPlayer",function(){var e=o._sessionFactory.getVideoSession(t);null!=e&&e.detachPlayer()})},this.attachPlayer=function(t,i){return this._released?void 0:i instanceof g?void this._exceptionCatcher.runProtected("Client.attachPlayer",function(){var e=o._sessionFactory.getVideoSession(t);null!=e&&e.attachPlayer(i)}):void o._logger.error("attachPlayer(): expecting an instance of PlayerStateManager for playerStateManager parameter")},this.contentPreload=function(t){this._released||this._exceptionCatcher.runProtected("Client.contentPreload",function(){var e=o._sessionFactory.getVideoSession(t);null!=e&&e.contentPreload()})},this.contentStart=function(t){this._released||this._exceptionCatcher.runProtected("Client.contentStart",function(){var e=o._sessionFactory.getVideoSession(t);null!=e&&e.contentStart()})},this.sendCustomEvent=function(n,r,s){return this._released?void 0:B.isValidString(r)?void this._exceptionCatcher.runProtected("Client.sendCustomEvent",function(){if(n==d.NO_SESSION_KEY){if(o._globalSessionKey<0){var e=new a;o._globalSessionKey=o._sessionFactory.makeGlobalSession(e,null)}n=o._globalSessionKey}var t=B.sanitizeStringToStringObject(s),i=o._sessionFactory.getSession(n);null!=i&&i.sendCustomEvent(r,t)}):void o._logger.error("sendCustomEvent(): eventName parameter must be a valid string.")},this.adStart=function(t,i,n,r){return this._released?void 0:i!==d.AdStream.CONTENT&&i!==d.AdStream.SEPARATE?void this._logger.error("adStart(): ignored, invalid value for adStream parameter: "+i):n!==d.AdPlayer.CONTENT&&n!==d.AdPlayer.SEPARATE?void this._logger.error("adStart(): ignored, invalid value for adPlayer parameter: "+n):r!==d.AdPosition.BUMPER&&r!==d.AdPosition.PREROLL&&r!==d.AdPosition.MIDROLL&&r!==d.AdPosition.POSTROLL?void this._logger.error("adStart(): ignored, invalid value for adPosition parameter: "+r):void this._exceptionCatcher.runProtected("Client.adStart",function(){var e=o._sessionFactory.getVideoSession(t);null!=e&&e.adStart(i,n,r)})},this.adEnd=function(t){this._released||this._exceptionCatcher.runProtected("Client.adEnd",function(){var e=o._sessionFactory.getVideoSession(t);null!=e&&e.adEnd()})},this.cleanupSession=function(e){return this._released?void 0:e===d.NO_SESSION_KEY?void this._logger.warning("cleanupSession(): ignored, can't cleanup Client.NO_SESSION_KEY"):void this._exceptionCatcher.runProtected("Client.cleanupSession",function(){null!=o._sessionFactory.getVideoSession(e)&&o._sessionFactory.cleanupSession(e)})},this.getAttachedPlayer=function(t){var i=null;return this._released||(t===d.NO_SESSION_KEY?this._logger.warning("getAttachedPlayer(): ignored for Client.NO_SESSION_KEY"):this._exceptionCatcher.runProtected("Client.getAttachedPlayer",function(){var e=o._sessionFactory.getVideoSession(t);null!=e&&(i=e.getPlayerStateManager())})),i},this.isPlayerAttached=function(e){return!this._released&&null!==this.getAttachedPlayer(e)},this.getPlayerStateManager=function(){if(this._released)throw new Error("This instance of Conviva.Client has been released.");return new g(this._systemFactory)},this.releasePlayerStateManager=function(e){if(this._released)throw new Error("This instance of Conviva.Client has been released.");this._exceptionCatcher.runProtected("Client.releasePlayerStateManager",function(){e instanceof g&&e.release()})},this.getSettings=function(){return this._settings},this.getId=function(){return this._id}};d.version="2.137.0.35314",d.NO_SESSION_KEY=-2,d.AdPosition={BUMPER:"BUMPER",PREROLL:"PREROLL",MIDROLL:"MIDROLL",POSTROLL:"POSTROLL"},d.AdStream={CONTENT:"CONTENT",SEPARATE:"SEPARATE"},d.AdPlayer={CONTENT:"CONTENT",SEPARATE:"SEPARATE"},d.ErrorSeverity={FATAL:0,WARNING:1},d.DeviceType={DESKTOP:"DESKTOP",CONSOLE:"Console",SETTOP:"Settop",MOBILE:"Mobile",TABLET:"Tablet",SMARTTV:"SmartTV",UNKNOWN:"Unknown"},d.AdTechnology={CLIENT_SIDE:"Client Side",SERVER_SIDE:"Server Side"},d.AdType={BLACKOUT_SLATE:"Blackout slate",TECHNICAL_DIFFICULTIES_SLATE:"Technical Difficulties slate",COMMERCIAL_SLATE:"Commercial Break slate",OTHER_SLATE:"Other slate",VPAID:"VPAID",REGULAR:"Regular Ad"},d.AdServingType={INLINE:"Inline",WRAPPER:"Wrapper"};var i=z.ClientSettings=function(e){this._customerKey=null,B.defGet(this,"customerKey",function(){return this._customerKey}),B.defSet(this,"customerKey",function(e){B.isValidString(e)&&(this._customerKey=e)}),this._heartbeatInterval=i.defaultProductionHeartbeatInterval,B.defGet(this,"heartbeatInterval",function(){return this._heartbeatInterval}),B.defSet(this,"heartbeatInterval",function(e){if("number"==typeof e){var t=B.NumberToUnsignedInt(e);t===e&&(this._heartbeatInterval=t)}}),this._gatewayUrl=i.defaultProductionGatewayUrl,B.defGet(this,"gatewayUrl",function(){return this._gatewayUrl}),B.defSet(this,"gatewayUrl",function(e){B.isValidString(e)&&(this._gatewayUrl=e)}),function(e){if(!B.isValidString(e))throw new Error("customerKey must be valid");this.customerKey=e}.apply(this,arguments),this.equals=function(e){return this.customerKey===e.customerKey&&this.gatewayUrl===e.gatewayUrl&&this.heartbeatInterval===e.heartbeatInterval},this.clone=function(){var e=new i(this.customerKey);return e.gatewayUrl=this.gatewayUrl,e.heartbeatInterval=this.heartbeatInterval,e}};i.defaultDevelopmentGatewayUrl="https://conviva.testonly.conviva.com",i.defaultProductionGatewayUrl="https://cws.conviva.com",i.defaultDevelopmentHeartbeatInterval=5,i.defaultProductionHeartbeatInterval=20;var a=z.ContentMetadata=function(){this._assetName=null,B.defGet(this,"assetName",function(){return this._assetName}),B.defSet(this,"assetName",function(e){"string"==typeof e&&(this._assetName=e)}),this._custom={},B.defGet(this,"custom",function(){return this._custom}),B.defSet(this,"custom",function(e){"object"==typeof e&&(this._custom=B.sanitizeStringToStringObject(e))}),this._defaultBitrateKbps=-2,B.defGet(this,"defaultBitrateKbps",function(){return this._defaultBitrateKbps}),B.defSet(this,"defaultBitrateKbps",function(e){this._defaultBitrateKbps=W.sanitizeSpecialIntegerValue(e)}),this._defaultResource=null,B.defGet(this,"defaultResource",function(){return this._defaultResource}),B.defSet(this,"defaultResource",function(e){"string"==typeof e&&(this._defaultResource=e)}),this._viewerId=null,B.defGet(this,"viewerId",function(){return this._viewerId}),B.defSet(this,"viewerId",function(e){"string"==typeof e&&(this._viewerId=e)}),this._applicationName=null,B.defGet(this,"applicationName",function(){return this._applicationName}),B.defSet(this,"applicationName",function(e){"string"==typeof e&&(this._applicationName=e)}),this._streamUrl=null,B.defGet(this,"streamUrl",function(){return this._streamUrl}),B.defSet(this,"streamUrl",function(e){"string"==typeof e&&(this._streamUrl=e)}),this._streamType=a.StreamType.UNKNOWN,B.defGet(this,"streamType",function(){return this._streamType}),B.defSet(this,"streamType",function(e){(e===a.StreamType.UNKNOWN||e===a.StreamType.VOD||e===a.StreamType.LIVE)&&(this._streamType=e)}),this._duration=-1,B.defGet(this,"duration",function(){return this._duration}),B.defSet(this,"duration",function(e){this._duration=W.sanitizeSpecialIntegerValue(e)}),this._encodedFrameRate=-1,B.defGet(this,"encodedFrameRate",function(){return this._encodedFrameRate}),B.defSet(this,"encodedFrameRate",function(e){this._encodedFrameRate=W.sanitizeSpecialIntegerValue(e)}),function(){}.apply(this,arguments),this.clone=function(){var e=new a;for(var t in e.assetName=this.assetName,e.applicationName=this.applicationName,e.streamUrl=this.streamUrl,e.viewerId=this.viewerId,e.defaultBitrateKbps=this.defaultBitrateKbps,e.defaultResource=this.defaultResource,e.streamType=this.streamType,e.duration=this.duration,e.encodedFrameRate=this.encodedFrameRate,this.custom)e.custom[t]=this.custom[t];return e}};a.StreamType={UNKNOWN:"UNKNOWN",LIVE:"LIVE",VOD:"VOD"};var n=(z.ErrorType={ERROR_UNKNOWN:"ERROR_UNKNOWN",ERROR_IO:"ERROR_IO",ERROR_TIMEOUT:"ERROR_TIMEOUT",ERROR_NULL_ASSET:"ERROR_NULL_ASSET",ERROR_MISSING_PARAMETER:"ERROR_MISSING_PARAMETER",ERROR_NO_AD_AVAILABLE:"ERROR_NO_AD_AVAILABLE",ERROR_PARSE:"ERROR_PARSE",ERROR_INVALID_VALUE:"ERROR_INVALID_VALUE",ERROR_INVALID_SLOT:"ERROR_INVALID_SLOT",ERROR_3P_COMPONENT:"ERROR_3P_COMPONENT",ERROR_UNSUPPORTED_3P_FEATURE:"ERROR_UNSUPPORTED_3P_FEATURE",ERROR_DEVICE_LIMIT:"ERROR_DEVICE_LIMIT",ERROR_UNMATCHED_SLOT_SIZE:"ERROR_UNMATCHED_SLOT_SIZE"},z.Events={AD_REQUESTED:"Conviva.AdRequested",AD_RESPONSE:"Conviva.AdResponse",AD_SLOT_STARTED:"Conviva.SlotStarted",AD_ATTEMPTED:"Conviva.AdAttempted",AD_SLOT_ENDED:"Conviva.SlotEnded",AD_IMPRESSION_START:"Conviva.AdImpression",AD_START:"Conviva.AdStart",AD_FIRST_QUARTILE:"Conviva.AdFirstQuartile",AD_MID_QUARTILE:"Conviva.AdMidQuartile",AD_THIRD_QUARTILE:"Conviva.AdThirdQuartile",AD_COMPLETE:"Conviva.AdComplete",AD_END:"Conviva.AdEnd",AD_IMPRESSION_END:"Conviva.AdImpressionEnd",AD_SKIPPED:"Conviva.AdSkipped",AD_ERROR:"Conviva.AdError",AD_PROGRESS:"Conviva.AdProgress",AD_CLOSE:"Conviva.AdClose",CONTENT_PAUSED:"Conviva.PauseContent",CONTENT_RESUMED:"Conviva.ResumeContent",POD_START:"Conviva.PodStart",POD_END:"Conviva.PodEnd"},z.SystemFactory=function(e,t){var i=this;(function(e,t){if(!(e instanceof r))throw new Error("systemInterface parameter should be an instance of SystemInterface.");this._systemInterface=e,this._timeInterface=this._systemInterface._timeInterface,this._timerInterface=this._systemInterface._timerInterface,this._httpInterface=this._systemInterface._httpInterface,this._storageInterface=this._systemInterface._storageInterface,this._metadataInterface=this._systemInterface._metadataInterface,this._loggingInterface=this._systemInterface._loggingInterface,this._settings=t instanceof s?t.clone():new s}).apply(this,arguments),this.configure=function(e,t){this._packageName=e,this._clientSettings=t},this.release=function(){this._systemInterface.release(),this._systemInterface=null,this._packageName=null,this._settings=null,this._logBuffer=null};var n=function(){return new Y(i._loggingInterface,i._timeInterface,i.getSettings(),i._logBuffer,i._packageName)};this.buildLogger=function(){return n()},this.buildSessionFactory=function(e,t,i){return new O(e,t,i,this)},this.buildPing=function(){return new U(this.buildLogger(),this.buildHttpClient(),this._clientSettings)},this.buildCallbackWithTimeout=function(){return new R(this.buildTimer())},this.buildCallbackWithTimeoutNoPing=function(){var e=new N(this.buildLogger(),null,this.getSettings()),t=new q(this.buildLogger(),this._timerInterface,e);return new R(t)},this.buildHttpClient=function(){return new H(this.buildLogger(),this._httpInterface,this.buildCallbackWithTimeoutNoPing(),this.getSettings())},this.buildExceptionCatcher=function(){return new N(this.buildLogger(),this.buildPing(),this.getSettings())},this.buildTime=function(){return new j(this._timeInterface,this.buildLogger())},this.buildTimer=function(){return new q(this.buildLogger(),this._timerInterface,this.buildExceptionCatcher())},this.buildStorage=function(){return new K(this.buildLogger(),this._storageInterface,this.buildCallbackWithTimeout(),this.getSettings())},this.buildConfig=function(){return new L(this.buildLogger(),this.buildStorage(),this.buildJsonInterface())},this.buildSystemMetadata=function(){return new G(this.buildLogger(),this._metadataInterface,this.buildExceptionCatcher())},this.buildCwsProtocol=function(){return new T},this.buildGatewayControl=function(e){return new M(e,this.buildLogger(),this.buildHttpClient(),this.buildJsonInterface())},this.buildCwsSession=function(e,t,i){var n=this.buildGatewayControl(t);return new D(this.buildEventQueue(),e,t,this.buildLogger(),this.buildExceptionCatcher(),this.buildTimer(),n,this.buildCwsProtocol(),this.buildTime(),this.getLogBuffer(),i)},this.buildSession=function(e,t,i,n,r,s){var o=this.buildExceptionCatcher(),a=this.buildLogger(),l=this.buildCwsSession(e,t,i);return new k(n,r,s,i,this.buildSystemMetadata(),l,o,a)},this.buildEventQueue=function(){return new x},this.buildJsonInterface=function(){return new w},this.getLogBuffer=function(){return this._logBuffer},this.getSettings=function(){return this._settings},this._logBuffer=new F}),s=z.SystemSettings=function(){this._logLevel=s.defaultProductionLogLevel,B.defGet(this,"logLevel",function(){return this._logLevel}),B.defSet(this,"logLevel",function(e){if("number"==typeof e){var t=B.NumberToUnsignedInt(e);t===e&&t>=s.LogLevel.DEBUG&&t<=s.LogLevel.ERROR&&(this._logLevel=t)}}),this._allowUncaughtExceptions=s.defaultProductionAllowUncaughtExceptions,B.defGet(this,"allowUncaughtExceptions",function(){return this._allowUncaughtExceptions}),B.defSet(this,"allowUncaughtExceptions",function(e){B.isBoolean(e)&&(this._allowUncaughtExceptions=e)}),this._storageTimeout=s.defaultStorageTimeout,B.defGet(this,"storageTimeout",function(){return this._storageTimeout}),B.defSet(this,"storageTimeout",function(e){if("number"==typeof e){var t=B.NumberToUnsignedInt(e);t===e&&(this._storageTimeout=t)}}),this._httpTimeout=s.defaultHttpTimeout,B.defGet(this,"httpTimeout",function(){return this._httpTimeout}),B.defSet(this,"httpTimeout",function(e){if("number"==typeof e){var t=B.NumberToUnsignedInt(e);t===e&&(this._httpTimeout=t)}}),function(){}.apply(this,arguments),this.equals=function(e){return this.logLevel===e.logLevel&&this.allowUncaughtExceptions===e.allowUncaughtExceptions&&this.storageTimeout===e.storageTimeout&&this.httpTimeout===e.httpTimeout},this.clone=function(){var e=new s;return e.logLevel=this.logLevel,e.allowUncaughtExceptions=this.allowUncaughtExceptions,e.storageTimeout=this.storageTimeout,e.httpTimeout=this.httpTimeout,e}};s.LogLevel={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},s.defaultDevelopmentLogLevel=s.LogLevel.DEBUG,s.defaultProductionLogLevel=s.LogLevel.ERROR,s.defaultDevelopmentAllowUncaughtExceptions=!0,s.defaultProductionAllowUncaughtExceptions=!1,s.defaultStorageTimeout=10,s.defaultHttpTimeout=10;var g=z.PlayerStateManager=function(e){var n=this;n._monitorNotifier=null,n._bitrateKbps=-2,n._playerState=g.PlayerState.UNKNOWN,n._currentMetadata={},n._renderedFrameRate=-2,n._encodedFrameRate=-2,n._duration=-2,n._playerVersion=null,n._playerType=null,n._streamUrl=null,n._width=-1,n._height=-1,n._connectionType=null,n._ssid=null,n._linkEncryption=null,n._lastError=null,n._pendingErrors=[],n._released=!1,this.release=function(){n._released||n._exceptionCatcher.runProtected("PlayerStateManager.release",function(){null!=n._monitorNotifier&&n._monitorNotifier.onRelease(),n.removeMonitoringNotifier(),n._systemFactory=null,n._logger=null,n._exceptionCatcher=null,n._released=!0})},this.setPlayheadTime=function(e){},this.setBufferLength=function(e){},this.setRenderedFrameRate=function(e){},this.getEncodedFrameRate=function(){return n._encodedFrameRate},this.setEncodedFrameRate=function(t){n._released||n._exceptionCatcher.runProtected("PlayerStateManager.setEncodedFrameRate",function(){var e=W.sanitizeSpecialIntegerValue(t);-1<=e&&(n._encodedFrameRate=e,null!=n._monitorNotifier&&n._monitorNotifier.onEncodedFrameRateChange(n._encodedFrameRate))})},this.getDuration=function(){return n._duration},this.setClientMeasureInterface=function(e){B.validateInterface(e,new z.ClientMeasureInterface,"ClientMeasureInterface"),this._playerInterface=e},this.getPHT=function(){return this._playerInterface&&"function"==typeof this._playerInterface.getPHT?this._playerInterface.getPHT():-1},this.getBufferLength=function(){return this._playerInterface&&"function"==typeof this._playerInterface.getBufferLength?this._playerInterface.getBufferLength():-1},this.getSignalStrength=function(){return this._playerInterface&&"function"==typeof this._playerInterface.getSignalStrength?this._playerInterface.getSignalStrength():g.DEFAULT_SIGNAL_STRENGTH},this.getRenderedFrameRate=function(){return this._playerInterface&&"function"==typeof this._playerInterface.getRenderedFrameRate?this._playerInterface.getRenderedFrameRate():g.DEFAULT_RENDERED_FRAME_RATE},this.setDuration=function(t){n._released||n._exceptionCatcher.runProtected("PlayerStateManager.setDuration",function(){var e=W.sanitizeSpecialIntegerValue(t);-1<=e&&(n._duration=e,null!=n._monitorNotifier&&n._monitorNotifier.onContentLengthChange(n._duration))})},this.getStreamUrl=function(){return n._streamUrl},this.setStreamUrl=function(e){n._released||n._exceptionCatcher.runProtected("PlayerStateManager.setStreamUrl",function(){null!=e&&(n._streamUrl=e,null!=n._monitorNotifier&&n._monitorNotifier.onStreamUrlChange(n._streamUrl))})},this.getPlayerType=function(){return n._playerType},this.setPlayerType=function(e){n._released||n._exceptionCatcher.runProtected("PlayerStateManager.setPlayerType",function(){n._playerType=e,null!=n._monitorNotifier&&n._monitorNotifier.onPlayerTypeChange(n._playerType)})},this.getPlayerVersion=function(){return n._playerVersion},this.setPlayerVersion=function(e){n._released||n._exceptionCatcher.runProtected("PlayerStateManager.setPlayerVersion",function(){n._playerVersion=e,null!=n._monitorNotifier&&n._monitorNotifier.onPlayerVersionChange(n._playerVersion)})},this.setMonitoringNotifier=function(e,t){return n._released?void 0:null==n._monitorNotifier&&(n._monitorNotifier=e,n._logger.setSessionId(t),!0)},this.removeMonitoringNotifier=function(){n._released||(n._monitorNotifier=null,n._logger.setSessionId(null))},this.pushCurrentState=function(){n.setPlayerState(n.getPlayerState()),n.setBitrateKbps(n.getBitrateKbps()),n.setDuration(n.getDuration()),n.setEncodedFrameRate(n.getEncodedFrameRate()),n.setStreamUrl(n.getStreamUrl()),n.setPlayerType(n.getPlayerType()),n.setPlayerVersion(n.getPlayerVersion());for(var e=0;e<n._pendingErrors.length;e++){var t=n._pendingErrors[e];n.setError(t)}n._pendingErrors=[]},this.getPlayerState=function(){return n._playerState},this.setPlayerState=function(e){n._released||n._exceptionCatcher.runProtected("PlayerStateManager.setPlayerState",function(){g.isValidPlayerState(e)?(n._playerState=e,null!=n._monitorNotifier&&n._monitorNotifier.onPlayerStateChange(n._playerState)):n._logger.error("PlayerStateManager.SetPlayerState(): invalid state: "+e)})},this.getBitrateKbps=function(){return n._bitrateKbps},this.setBitrateKbps=function(t){n._released||n._exceptionCatcher.runProtected("PlayerStateManager.setBitrateKbps",function(){var e=W.sanitizeSpecialIntegerValue(t);-1<=e&&(n._bitrateKbps=e,null!=n._monitorNotifier&&n._monitorNotifier.onBitrateChange(n._bitrateKbps))})},this.setPlayerSeekStart=function(e){n._released||n._exceptionCatcher.runProtected("PlayerStateManager.setPlayerSeekStart()",function(){null!=n._monitorNotifier&&n._monitorNotifier.onSeekEvent(g.SEEK_ACTIONS_TYPE.SEEK_START,e)})},this.setPlayerSeekEnd=function(){n._released||n._exceptionCatcher.runProtected("PlayerStateManager.setPlayerSeekEnd()",function(){null!=n._monitorNotifier&&n._monitorNotifier.onSeekEvent(g.SEEK_ACTIONS_TYPE.SEEK_END,-1)})},this.setUserSeekButtonUp=function(){n._released||n._exceptionCatcher.runProtected("PlayerStateManager.setUserSeekButtonUp()",function(){null!=n._monitorNotifier&&n._monitorNotifier.onSeekEvent(g.SEEK_ACTIONS_TYPE.BUTTON_UP,-1)})},this.setUserSeekButtonDown=function(){n._released||n._exceptionCatcher.runProtected("PlayerStateManager.setUserSeekButtonDown()",function(){null!=n._monitorNotifier&&n._monitorNotifier.onSeekEvent(g.SEEK_ACTIONS_TYPE.BUTTON_DOWN,-1)})},this.setVideoResolutionWidth=function(t){n._released||n._exceptionCatcher.runProtected("PlayerStateManager.setVideoResolutionWidth()",function(){var e=W.sanitizeSpecialIntegerValue(t);0<=e&&(n._width=e),null!=n._monitorNotifier&&n._monitorNotifier.onStreamResolutionWidthChange(n._width)})},this.setVideoResolutionHeight=function(t){n._released||n._exceptionCatcher.runProtected("PlayerStateManager.setVideoResolutionHeight()",function(){var e=W.sanitizeSpecialIntegerValue(t);0<=e&&(n._height=e),null!=n._monitorNotifier&&n._monitorNotifier.onStreamResolutionHeightChange(n._height)})},this.setConnectionType=function(e){n._released||n._exceptionCatcher.runProtected("PlayerStateManager.setConnectionType()",function(){n._connectionType=e,null!=n._monitorNotifier&&n._monitorNotifier.onConnectionTypeChange(n._connectionType)})},this.setSSID=function(e){n._released||n._exceptionCatcher.runProtected("PlayerStateManager.setSsid()",function(){n._ssid=e,null!=n._monitorNotifier&&n._monitorNotifier.onSsidChange(n._ssid)})},this.setLinkEncryption=function(e){n._released||n._exceptionCatcher.runProtected("PlayerStateManager.setLinkEncryption()",function(){n._linkEncryption=e,null!=n._monitorNotifier&&n._monitorNotifier.onLinkEncryptionChange(n._linkEncryption)})},this.setSignalStrength=function(e){},this.setError=function(e){if(n._lastError=e,null!=n._monitorNotifier){var t=e.errorCode,i=e.severity;n._monitorNotifier.onError(t,i)}else n._pendingErrors.push(e)},this.sendError=function(t,i){n._released||n._exceptionCatcher.runProtected("PlayerStateManager.sendError",function(){var e=new z.PrivateLoader.StreamerError(t,i);n.setError(e)})},this.updateContentMetadata=function(e){n._released||n._exceptionCatcher.runProtected("PlayerStateManager.updateContentMetadata()",function(){n._updatedMetadata=e,null!=n._monitorNotifier&&n._monitorNotifier.onMetadataChange(n._updatedMetadata)})},this.reset=function(){n._released||n._exceptionCatcher.runProtected("PlayerStateManager.reset",function(){n._bitrateKbps=-2,n._playerState=g.PlayerState.UNKNOWN,n._currentMetadata={},n._renderedFrameRate=-1,n._encodedFrameRate=-1,n._duration=-1,n._playerVersion=null,n._playerType=null,n._streamUrl=null,n._lastError=null,n._pendingErrors=[]})},this.getError=function(){return n._lastError},function(e){n._systemFactory=e,n._logger=n._systemFactory.buildLogger(),n._logger.setModuleName("PlayerStateManager"),n._exceptionCatcher=n._systemFactory.buildExceptionCatcher()}.apply(n,arguments),g.DEFAULT_SIGNAL_STRENGTH=1e3,g.DEFAULT_RENDERED_FRAME_RATE=-1};g.PlayerState={STOPPED:"STOPPED",PLAYING:"PLAYING",BUFFERING:"BUFFERING",PAUSED:"PAUSED",UNKNOWN:"UNKNOWN",NOT_MONITORED:"NOT_MONITORED"},g.isValidPlayerState=function(e){return e===g.PlayerState.STOPPED||e===g.PlayerState.PLAYING||e===g.PlayerState.BUFFERING||e===g.PlayerState.PAUSED||e===g.PlayerState.UNKNOWN||e===g.PlayerState.NOT_MONITORED},g.SEEK_ACTIONS_TYPE={SEEK_START:"pss",SEEK_END:"pse",BUTTON_UP:"bu",BUTTON_DOWN:"bd"};var o=(z.ClientMeasureInterface=function(){this.getPHT=function(){},this.getBufferLength=function(){},this.getSignalStrength=function(){},this.getRenderedFrameRate=function(){}},z.HttpInterface=function(){this.makeRequest=function(e,t,i,n,r,s){},this.release=function(){}}),l=z.LoggingInterface=function(){this.consoleLog=function(e,t){},this.release=function(){}},c=z.MetadataInterface=function(){this.getBrowserName=function(){},this.getBrowserVersion=function(){},this.getDeviceBrand=function(){},this.getDeviceManufacturer=function(){},this.getDeviceModel=function(){},this.getDeviceType=function(){},this.getDeviceVersion=function(){},this.getFrameworkName=function(){},this.getFrameworkVersion=function(){},this.getOperatingSystemName=function(){},this.getOperatingSystemVersion=function(){},this.release=function(){}},u=z.StorageInterface=function(){this.saveData=function(e,t,i,n){},this.loadData=function(e,t,i){},this.release=function(){}},r=z.SystemInterface=function(e,t,i,n,r,s){(function(e,t,i,n,r,s){B.validateInterface(e,new h,"TimeInterface"),B.validateInterface(t,new p,"TimerInterface"),B.validateInterface(i,new o,"HttpInterface"),B.validateInterface(n,new u,"StorageInterface"),B.validateInterface(r,new c,"MetadataInterface"),B.validateInterface(s,new l,"LoggingInterface"),this._timeInterface=e,this._timerInterface=t,this._httpInterface=i,this._storageInterface=n,this._metadataInterface=r,this._loggingInterface=s}).apply(this,arguments),this.release=function(){this._timeInterface.release(),this._timeInterface=null,this._timerInterface.release(),this._timerInterface=null,this._httpInterface.release(),this._httpInterface=null,this._storageInterface.release(),this._storageInterface=null,this._metadataInterface.release(),this._metadataInterface=null,this._loggingInterface.release(),this._loggingInterface=null}},h=z.TimeInterface=function(){this.getEpochTimeMs=function(){},this.release=function(){}},p=z.TimerInterface=function(){this.createTimer=function(e,t,i){},this.release=function(){}},f=t.JSON2={};!function(){function e(e){return e<10?"0"+e:e}function u(e){return t.lastIndex=0,t.test(e)?'"'+e.replace(t,function(e){var t=i[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}var t,d,h,i,g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),"function"!=typeof f.stringify&&(t=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},f.stringify=function(e,t,i){var n;if(h=d="","number"==typeof i)for(n=0;n<i;n+=1)h+=" ";else"string"==typeof i&&(h=i);if((g=t)&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON2.stringify");return function e(t,i){var n,r,s,o,a,l=d,c=i[t];switch(c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(t)),"function"==typeof g&&(c=g.call(i,t,c)),typeof c){case"string":return u(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(d+=h,a=[],Object.prototype.toString.apply(c)===Object.prototype.toString.apply([])){for(o=c.length,n=0;n<o;n+=1)a[n]=e(n,c)||"null";return s=0===a.length?"[]":d?"[\n"+d+a.join(",\n"+d)+"\n"+l+"]":"["+a.join(",")+"]",d=l,s}if(g&&"object"==typeof g)for(o=g.length,n=0;n<o;n+=1)"string"==typeof g[n]&&(s=e(r=g[n],c))&&a.push(u(r)+(d?": ":":")+s);else for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(s=e(r,c))&&a.push(u(r)+(d?": ":":")+s);return s=0===a.length?"{}":d?"{\n"+d+a.join(",\n"+d)+"\n"+l+"}":"{"+a.join(",")+"}",d=l,s}}("",{"":e})})}();var _,m,v,C,A,E,I,e,y,b,S=t.JsonParse=(A={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},E=function(e){throw{name:"SyntaxError",message:e,at:_,text:v}},I=function(e){return e&&e!==m&&E("Expected '"+e+"' instead of '"+m+"'"),m=v.charAt(_),_+=1,m},e=function(){var e,t="";for("-"===m&&I(t="-");"0"<=m&&m<="9";)t+=m,I();if("."===m)for(t+=".";I()&&"0"<=m&&m<="9";)t+=m;if("e"===m||"E"===m)for(t+=m,I(),("-"===m||"+"===m)&&(t+=m,I());"0"<=m&&m<="9";)t+=m,I();return e=+t,isNaN(e)?void E("Bad number"):e},y=function(){var e,t,i,n="";if('"'===m)for(;I();){if('"'===m)return I(),n;if("\\"===m)if(I(),"u"===m){for(t=i=0;t<4&&(e=parseInt(I(),16),isFinite(e));t+=1)i=16*i+e;n+=String.fromCharCode(i)}else{if("string"!=typeof A[m])break;n+=A[m]}else n+=m}E("Bad string")},b=function(){for(;m&&m<=" ";)I()},C=function(){switch(b(),m){case"{":return function(){var e,t={};if("{"===m){if(I("{"),b(),"}"===m)return I("}"),t;for(;m;){if(e=y(),b(),I(":"),Object.hasOwnProperty.call(t,e)&&E('Duplicate key "'+e+'"'),t[e]=C(),b(),"}"===m)return I("}"),t;I(","),b()}}E("Bad object")}();case"[":return function(){var e=[];if("["===m){if(I("["),b(),"]"===m)return I("]"),e;for(;m;){if(e.push(C()),b(),"]"===m)return I("]"),e;I(","),b()}}E("Bad array")}();case'"':return y();case"-":return e();default:return"0"<=m&&m<="9"?e():function(){switch(m){case"t":return I("t"),I("r"),I("u"),I("e"),!0;case"f":return I("f"),I("a"),I("l"),I("s"),I("e"),!1;case"n":return I("n"),I("u"),I("l"),I("l"),null}E("Unexpected '"+m+"'")}()}},function(e,o){var t;return v=e,_=0,m=" ",t=C(),b(),m&&E("Syntax error"),"function"==typeof o?function e(t,i){var n,r,s=t[i];if(s&&"object"==typeof s)for(n in s)Object.hasOwnProperty.call(s,n)&&(void 0!==(r=e(s,n))?s[n]=r:delete s[n]);return o.call(t,i,s)}({"":t},""):t}),T=t.CwsProtocol=function(){this.generateEvent=function(e,t,i,n){return n.seq=e,n.st=t,n.t=i,n},this.generateSessionEndEvent=function(e,t){var i=T.EVENT_TYPE_SESSION_END;return this.generateEvent(e,t,i,{})}};T.version="2.4",T.gatewayPath="/0/wsg",T.DEFAULT_CLIENT_ID="0",T.DEFAULT_MAX_HEARTBEAT_INFOS=0,T.DEFAULT_PLAYHEAD_TIME=-1,T.DEFAULT_BUFFER_LENGTH=-1,T.DEFAULT_SIGNAL_STRENGTH=1e3,T.SDK_METADATA_SCHEMA="sdk.js.1",T.EVENT_TYPE_STATE_CHANGE="CwsStateChangeEvent",T.EVENT_TYPE_ERROR="CwsErrorEvent",T.EVENT_TYPE_SESSION_END="CwsSessionEndEvent",T.EVENT_TYPE_CUSTOM="CwsCustomEvent",T.EVENT_TYPE_SEEK="CwsSeekEvent",T.EVENT_TYPE_DATA_SAMPLE="CwsDataSamplesEvent",T.RESPONSE_STATUS_NO_ERRORS="ok",T.RESPONSE_KEY_STATUS="err",T.RESPONSE_KEY_CLIENT_ID="clid",T.RESPONSE_KEY_CONFIG="cfg",T.RESPONSE_KEY_EVENTS="evs",T.RESPONSE_CONFIG_KEY_MAX_HEARTBEAT_INFOS="maxhbinfos",T.RESPONSE_CONFIG_KEY_SEND_LOGS="slg",T.RESPONSE_CONFIG_KEY_HEARTBEAT_INTERVAL="hbi",T.RESPONSE_CONFIG_KEY_GATEWAY_URL="gw",T.MESSAGE_TYPE_SESSION_HEARTBEAT="CwsSessionHb",T.REQUEST_KEY_MESSAGE_TYPE="t",T.REQUEST_KEY_SESSION_TIME="st",T.REQUEST_KEY_SESSION_START_TIME="sst",T.REQUEST_KEY_IS_LIVE="lv",T.REQUEST_KEY_SEQUENCE_NUMBER="seq",T.REQUEST_KEY_CUSTOMER_KEY="cid",T.REQUEST_KEY_CLIENT_ID="clid",T.REQUEST_KEY_CLIENT_VERSION="clv",T.REQUEST_KEY_PROTOCOL_VERSION="pver",T.REQUEST_KEY_INSTANCE_ID="iid",T.REQUEST_KEY_SESSION_ID="sid",T.REQUEST_KEY_VIEWER_ID="vid",T.REQUEST_KEY_ASSET_NAME="an",T.REQUEST_KEY_PLAYER_NAME="pn",T.REQUEST_KEY_TAGS="tags",T.REQUEST_KEY_SESSION_FLAGS="sf",T.REQUEST_KEY_EVENTS="evs",T.REQUEST_KEY_LOGS="lg",T.REQUEST_KEY_HEARTBEAT_INFOS="hbinfos",T.REQUEST_KEY_IS_SDK_CLIENT="sdk",T.REQUEST_KEY_PAUSE_JOIN="pj",T.REQUEST_KEY_PLAYER_STATE="ps",T.REQUEST_KEY_BITRATE="br",T.REQUEST_KEY_CONTENT_LENGTH="cl",T.REQUEST_KEY_ENCODED_FRAME_RATE="efps",T.REQUEST_KEY_AVERAGE_FRAME_RATE="afps",T.REQUEST_KEY_RESOURCE="rs",T.REQUEST_KEY_PLAYHEAD_TIME="pht",T.REQUEST_KEY_BUFFER_LENGTH="bl",T.REQUEST_KEY_STREAM_URL="url",T.REQUEST_KEY_CAPABILITIES="caps",T.REQUEST_KEY_PLATFORM_METADATA="pm",T.REQUEST_KEY_VIDEO_WIDTH="w",T.REQUEST_KEY_VIDEO_HEIGHT="h",T.REQUEST_KEY_CONNECTION_TYPE="ct",T.REQUEST_KEY_LINK_ENCRYPTION="le",T.REQUEST_KEY_SSID="ssid",T.REQUEST_KEY_SIGNAL_STRENGTH="ss",T.REQUEST_KEY_STREAM_METADATA_CHANGE="strmetadata",T.REQUEST_PLATFORM_METADATA_KEY_SCHEMA="sch",T.REQUEST_PLATFORM_METADATA_KEY_BROWSER_NAME="br",T.REQUEST_PLATFORM_METADATA_KEY_BROWSER_VERSION="brv",T.REQUEST_PLATFORM_METADATA_KEY_DEVICE_BRAND="dvb",T.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MANUFACTURER="dvma",T.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MODEL="dvm",T.REQUEST_PLATFORM_METADATA_KEY_DEVICE_TYPE="dvt",T.REQUEST_PLATFORM_METADATA_KEY_DEVICE_VERSION="dvv",T.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_NAME="fw",T.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_VERSION="fwv",T.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_NAME="os",T.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_VERSION="osv",T.REQUEST_KEY_PROTOCOL_CAPP="caps",T.REQUEST_EVENT_KEY_TYPE="t",T.REQUEST_EVENT_KEY_SEQUENCE_NUMBER="seq",T.REQUEST_EVENT_KEY_SESSION_TIME="st",T.REQUEST_EVENT_KEY_SEEK_ACT_TYPE="act",T.REQUEST_EVENT_KEY_SEEK_TO_POS="skto",T.REQUEST_ERROR_EVENT_KEY_MESSAGE="err",T.REQUEST_ERROR_EVENT_KEY_FATAL="ft",T.REQUEST_STATE_CHANGE_EVENT_KEY_NEW="new",T.REQUEST_STATE_CHANGE_EVENT_KEY_OLD="old",T.REQUEST_CUSTOM_EVENT_KEY_NAME="name",T.REQUEST_CUSTOM_EVENT_KEY_ATTRIBUTES="attr",T.REQUEST_HEARTBEAT_INFO_KEY_SEQUENCE_NUMBER="seq",T.REQUEST_HEARTBEAT_INFO_KEY_STATUS="err",T.REQUEST_HEARTBEAT_INFO_KEY_ROUNDTRIP_TIME="rtt",T.REQUEST_KEY_IS_AD_SESSION="ad",T.convertPlayerState=function(e){switch(e){case g.PlayerState.STOPPED:return T.eStopped;case g.PlayerState.PLAYING:return T.ePlaying;case g.PlayerState.BUFFERING:return T.eBuffering;case g.PlayerState.PAUSED:return T.ePaused;case g.PlayerState.NOT_MONITORED:return T.eNotMonitored;default:return T.eUnknown}},T.eStopped=1,T.ePlaying=3,T.eBuffering=6,T.ePaused=12,T.eNotMonitored=98,T.eUnknown=100,T.SessionFlags={GLOBAL:0,VIDEO:1,QUALITY_METRICS:2,BITRATE_METRICS:4},T.Capabilities={INSIGHTS:0};var w=(t.JSONInterface=function(){this.encode=function(e){},this.decode=function(e){}},t.LibJSONInterface=function(){this.encode=function(e){var t=null;try{t=f.stringify(e)}catch(e){}return t},this.decode=function(e){var t=null;try{t=S(e)}catch(e){}return B.isObject(t)||(t=null),t}}),P=t.CwsHeartbeat=function(){this._data={},function(){}.apply(this,arguments),this.get=function(){return this._data},this.setField=function(e,t){this._data[e]=t},this.setInnerField=function(e,t,i){this._data[e]||(this._data[e]={}),this._data[e][t]=i},this.setMessageType=function(e){this.setField(T.REQUEST_KEY_MESSAGE_TYPE,e)},this.setSessionTime=function(e){this.setField(T.REQUEST_KEY_SESSION_TIME,e)},this.setSessionStartTime=function(e){this.setField(T.REQUEST_KEY_SESSION_START_TIME,e)},this.setIsLive=function(e){this.setField(T.REQUEST_KEY_IS_LIVE,e)},this.setSequenceNumber=function(e){this.setField(T.REQUEST_KEY_SEQUENCE_NUMBER,e)},this.setCustomerKey=function(e){this.setField(T.REQUEST_KEY_CUSTOMER_KEY,e)},this.setClientId=function(e){this.setField(T.REQUEST_KEY_CLIENT_ID,e)},this.setClientVersion=function(e){this.setField(T.REQUEST_KEY_CLIENT_VERSION,e)},this.setProtocolVersion=function(e){this.setField(T.REQUEST_KEY_PROTOCOL_VERSION,e)},this.setCapfield=function(e){this.setField(T.REQUEST_KEY_PROTOCOL_CAPP,e)},this.setSessionId=function(e){this.setField(T.REQUEST_KEY_SESSION_ID,e)},this.setInstanceId=function(e){this.setField(T.REQUEST_KEY_INSTANCE_ID,e)},this.setViewerId=function(e){this.setField(T.REQUEST_KEY_VIEWER_ID,e)},this.setAssetName=function(e){this.setField(T.REQUEST_KEY_ASSET_NAME,e)},this.setPlayerName=function(e){this.setField(T.REQUEST_KEY_PLAYER_NAME,e)},this.setTags=function(e){this.setField(T.REQUEST_KEY_TAGS,e)},this.setSessionFlags=function(e){this.setField(T.REQUEST_KEY_SESSION_FLAGS,e)},this.setCapabilities=function(e){this.setField(T.REQUEST_KEY_CAPABILITIES,e)},this.setEvents=function(e){this.setField(T.REQUEST_KEY_EVENTS,e)},this.setIsSdkClient=function(e){this.setField(T.REQUEST_KEY_IS_SDK_CLIENT,e)},this.setLogs=function(e){this.setField(T.REQUEST_KEY_LOGS,e)},this.setHeartbeatInfos=function(e){this.setField(T.REQUEST_KEY_HEARTBEAT_INFOS,e)},this.setPlayerState=function(e){this.setField(T.REQUEST_KEY_PLAYER_STATE,e)},this.setPauseJoin=function(e){this.setField(T.REQUEST_KEY_PAUSE_JOIN,e)},this.setContentLength=function(e){this.setField(T.REQUEST_KEY_CONTENT_LENGTH,e)},this.setBitrate=function(e){this.setField(T.REQUEST_KEY_BITRATE,e)},this.setResource=function(e){this.setField(T.REQUEST_KEY_RESOURCE,e)},this.setEncodedFrameRate=function(e){this.setField(T.REQUEST_KEY_ENCODED_FRAME_RATE,e)},this.setAverageFrameRate=function(e){this.setField(T.REQUEST_KEY_AVERAGE_FRAME_RATE,e)},this.setPlatformMetadataSchema=function(e){this.setInnerField(T.REQUEST_KEY_PLATFORM_METADATA,T.REQUEST_PLATFORM_METADATA_KEY_SCHEMA,e)},this.setBrowserName=function(e){this.setInnerField(T.REQUEST_KEY_PLATFORM_METADATA,T.REQUEST_PLATFORM_METADATA_KEY_BROWSER_NAME,e)},this.setBrowserVersion=function(e){this.setInnerField(T.REQUEST_KEY_PLATFORM_METADATA,T.REQUEST_PLATFORM_METADATA_KEY_BROWSER_VERSION,e)},this.setDeviceBrand=function(e){this.setInnerField(T.REQUEST_KEY_PLATFORM_METADATA,T.REQUEST_PLATFORM_METADATA_KEY_DEVICE_BRAND,e)},this.setDeviceManufacturer=function(e){this.setInnerField(T.REQUEST_KEY_PLATFORM_METADATA,T.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MANUFACTURER,e)},this.setDeviceModel=function(e){this.setInnerField(T.REQUEST_KEY_PLATFORM_METADATA,T.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MODEL,e)},this.setDeviceType=function(e){this.setInnerField(T.REQUEST_KEY_PLATFORM_METADATA,T.REQUEST_PLATFORM_METADATA_KEY_DEVICE_TYPE,e)},this.setDeviceVersion=function(e){this.setInnerField(T.REQUEST_KEY_PLATFORM_METADATA,T.REQUEST_PLATFORM_METADATA_KEY_DEVICE_VERSION,e)},this.setFrameworkName=function(e){this.setInnerField(T.REQUEST_KEY_PLATFORM_METADATA,T.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_NAME,e)},this.setFrameworkVersion=function(e){this.setInnerField(T.REQUEST_KEY_PLATFORM_METADATA,T.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_VERSION,e)},this.setOperatingSystemName=function(e){this.setInnerField(T.REQUEST_KEY_PLATFORM_METADATA,T.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_NAME,e)},this.setOperatingSystemVersion=function(e){this.setInnerField(T.REQUEST_KEY_PLATFORM_METADATA,T.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_VERSION,e)},this.setPlayheadTime=function(e){this.setField(T.REQUEST_KEY_PLAYHEAD_TIME,e)},this.setBufferLength=function(e){this.setField(T.REQUEST_KEY_BUFFER_LENGTH,e)},this.setStreamUrl=function(e){this.setField(T.REQUEST_KEY_STREAM_URL,e)},this.setStreamWidth=function(e){this.setField(T.REQUEST_KEY_VIDEO_WIDTH,e)},this.setStreamHeight=function(e){this.setField(T.REQUEST_KEY_VIDEO_HEIGHT,e)},this.setConnectionType=function(e){this.setField(T.REQUEST_KEY_CONNECTION_TYPE,e)},this.setSsid=function(e){this.setField(T.REQUEST_KEY_SSID,e)},this.setLinkEncryption=function(e){this.setField(T.REQUEST_KEY_LINK_ENCRYPTION,e)},this.setIsAdSession=function(){this.setField(T.REQUEST_KEY_IS_AD_SESSION,!0)}},D=t.CwsSession=function(e,t,i,n,r,s,o,a,l,c,u){var p=this;p._heartbeatTimerCancel=null,p._startTimeMs=0,p._heartbeatSequenceNumber=0,p._sessionFlags=T.SessionFlags.GLOBAL,p._capabilities=T.Capabilities.INSIGHTS,p._heartbeatInfos=[],p._lastRequestSentMs=-1,p._bitrateKbps=-2,p._resource=null,p._playerState=g.PlayerState.NOT_MONITORED,p._encodedFrameRate=-1,p._contentLengthSec=-1,p._streamUrl=null,p._width=-1,p._height=-1,p._playerStateManager=null,p._assetName=null,p._viewerId=null,p._playerName=null,p._isLive=null,p._tags={},p._browserName=null,p._browserVersion=null,p._deviceBrand=null,p._deviceManufacturer=null,p._deviceModel=null,p._deviceType=null,p._deviceVersion=null,p._frameworkName=null,p._frameworkVersion=null,p._operatingSystemName=null,p._operatingSystemVersion=null,p._connectionType=null,p._linkEncryption=null,p._ssid=null,p._pauseJoin=!1,p._hasJoined=!1,p._cleanedUp=!1,p._willEndSoon=!1,p._playingFpsObservationCount=0,p._playingFpsTotal=0,function(e,t,i,n,r,s,o,a,l,c,u){this._eventQueue=e,this._client=t,this._clientSettings=i,this._logger=n,this._logger.setModuleName("CwsSession"),this._exceptionCatcher=r,this._timer=s,this._gatewayControl=o,this._cwsProtocol=a,this._time=l,this._logBuffer=c,this._clientConfig=u}.apply(this,arguments),this.cleanup=function(){this._clientConfig=null,this._logBuffer=null,this._systemSettings=null,this._time=null,this._cwsProtocol=null,this._gatewayControl=null,this._timer=null,this._exceptionCatcher=null,this._logger=null,this._clientSettings=null,this._client=null,this._eventQueue.flush(),this._eventQueue=null,this._cleanedUp=!0},this.start=function(e){this._session=e,this._global=this._session._global,this._logger.setSessionId(this._session._id),this._startTimeMs=this._time.current(),(this.isVideoSession()||this.isAdSession())&&(this._sessionFlags+=D.DEFAULT_VIDEO_SESSION_FLAGS)},this.willEndSoon=function(){this._willEndSoon=!0},this.initialize=function(){this._logger.debug("initialize()")},this.end=function(){(this.isVideoSession()||this.isAdSession())&&(this._logger.debug("end(): schedule the last hb before session cleanup"+p.sessionTypeTag()),this.enqueueSessionEndEvent()),this.cancelHeartbeatTimer(),this.sendHeartbeat()},this.startSendingHeartbeats=function(){this._willEndSoon||(this.sendHeartbeat(),this.resetHeartbeatTimer())},this.setBrowserName=function(e){p._logger.debug("setBrowserName(): "+e);var t=p._browserName;t!==e&&null!=e&&(p._logger.debug("Change browserName from "+t+" to "+e),p._browserName=e)},this.setBrowserVersion=function(e){p._logger.debug("setBrowserVersion(): "+e);var t=p._browserVersion;t!==e&&null!=e&&(p._logger.debug("Change browserVersion from "+t+" to "+e),p._browserVersion=e)},this.setDeviceBrand=function(e){p._logger.debug("setDeviceBrand(): "+e);var t=p._deviceBrand;t!==e&&null!=e&&(p._logger.debug("Change deviceBrand from "+t+" to "+e),p._deviceBrand=e)},this.setDeviceManufacturer=function(e){p._logger.debug("setDeviceManufacturer(): "+e);var t=p._deviceManufacturer;t!==e&&null!=e&&(p._logger.debug("Change deviceManufacturer from "+t+" to "+e),p._deviceManufacturer=e)},this.setDeviceModel=function(e){p._logger.debug("setDeviceModel(): "+e);var t=p._deviceModel;t!==e&&null!=e&&(p._logger.debug("Change deviceModel from "+t+" to "+e),p._deviceModel=e)},this.setDeviceType=function(e){p._logger.debug("setDeviceBrand(): "+e);var t=p._deviceType;t!==e&&null!=e&&(p._logger.debug("Change deviceType from "+t+" to "+e),p._deviceType=e)},this.setDeviceVersion=function(e){p._logger.debug("setDeviceVersion(): "+e);var t=p._deviceVersion;t!==e&&null!=e&&(p._logger.debug("Change deviceVersion from "+t+" to "+e),p._deviceVersion=e)},this.setOperatingSystemName=function(e){p._logger.debug("setOperatingSystemName(): "+e);var t=p._operatingSystemName;t!==e&&null!=e&&(p._logger.debug("Change operatingSystemName from "+t+" to "+e),p._operatingSystemName=e)},this.setOperatingSystemVersion=function(e){p._logger.debug("setOperatingSystemVersion(): "+e);var t=p._operatingSystemVersion;t!==e&&null!=e&&(p._logger.debug("Change operatingSystemVersion from "+t+" to "+e),p._operatingSystemVersion=e)},this.getFrameworkName=function(){return p._frameworkName},this.setFrameworkName=function(e){p._logger.debug("setFrameworkName(): "+e);var t=p._frameworkName;t!==e&&null!=e&&(p._logger.debug("Change frameworkName from "+t+" to "+e),p._frameworkName=e)},this.getFrameworkVersion=function(){return p._frameworkVersion},this.setFrameworkVersion=function(e){p._logger.debug("setFrameworkVersion(): "+e);var t=p._frameworkVersion;t!==e&&null!=e&&(p._logger.debug("Change frameworkVersion from "+t+" to "+e),p._frameworkVersion=e)},this.setStreamUrl=function(e){p._logger.debug("setStreamUrl(): "+e);var t=p._streamUrl;t!==e&&null!=e&&(p._logger.debug("Change stream url from "+t+" to "+e),p._streamUrl=e)},this.setBitrateKbps=function(e){p._logger.debug("setBitrateKbps(): "+e);var t=p._bitrateKbps;t!==e&&-1<=e&&(p._logger.info("Change bitrate from "+t+" to "+e),p.enqueueBitrateChangeEvent(t,e),p._bitrateKbps=e)},this.setResource=function(e){p._logger.debug("setResource(): "+e);var t=p._resource;t!==e&&null!=e&&(p._logger.info("Change resource from "+t+" to "+e),p._resource=e)},this.setAssetName=function(e){p._logger.debug("setAssetName(): "+e),p._assetName!==e&&null!=e&&(p._logger.info("Change assetName from "+p._assetName+" to "+e),p._assetName=e)},this.setIsLive=function(e){p._logger.debug("setIsLive(): "+e);var t=p._isLive;t!==e&&null!=e&&(p._logger.info("Change isLive from "+t+" to "+e),p._isLive=e)},this.setViewerId=function(e){p._logger.debug("setViewerId(): "+e);var t=p._viewerId;t!==e&&null!=e&&(p._logger.info("Change viewerId from "+t+" to "+e),p._viewerId=e)},this.setPlayerName=function(e){p._logger.debug("setPlayerName(): "+e);var t=p._playerName;t!==e&&null!=e&&(p._logger.info("Change playerName from "+t+" to "+e),p._playerName=e)},this.setTags=function(e){p._logger.debug("setTags()");var t=p._tags;B.ObjectShallowEquals(t,e)||null==e||(p._logger.info("Change tags from "+B.ObjectToString(t)+" to "+B.ObjectToString(e)),p._tags=e)},this.setEncodedFrameRate=function(e){p._logger.debug("setEncodedFrameRate(): "+e),p._encodedFrameRate=e},this.setContentLength=function(e){p._logger.debug("setContentLength(): "+e),p._contentLengthSec=e},this.setPlayerState=function(e){p._logger.debug("setPlayerState(): "+e),p._hasJoined||e!=g.PlayerState.PLAYING||(p.togglePauseJoin(!1),p._hasJoined=!0);var t=p._playerState;p._logger.info("setPlayerState(): changing player state from "+t+" to "+e),p.enqueuePlayerStateChangeEvent(t,e),p._playerState=e},this.setStreamResolutionWidth=function(e){p._logger.debug("setStreamResolutionWidth(): "+e);var t=p._width;t!==e&&-1<e&&(p._logger.debug("Change stream resolution width from "+t+" to "+e),p.enqueueResolutionWidthChangeEvent(t,e),p._width=e)},this.setStreamResolutionHeight=function(e){p._logger.debug("setStreamResolutionHeight(): "+e);var t=p._height;t!==e&&-1<e&&(p._logger.debug("Change stream resolution height from "+t+" to "+e),p.enqueueResolutionHeightChangeEvent(t,e),p._height=e)},this.setConnectionType=function(e){p._logger.debug("setConnectionType(): "+e);var t=p._connectionType;t!==e&&null!=e&&(p._logger.debug("Change network connection type from "+t+" to "+e),p.enqueueConnectionTypeChangeEvent(t,e),p._connectionType=e)},this.setSsid=function(e){p._logger.debug("setSsid(): "+e);var t=p._ssid;t!==e&&null!=e&&(p._logger.debug("Change network SSID from "+t+" to "+e),p.enqueueSsidChangeEvent(t,e),p._ssid=e)},this.setLinkEncryption=function(e){p._logger.debug("setLinkEncryption(): "+e);var t=p._linkEncryption;t!==e&&null!=e&&(p._logger.debug("Change network link encryption from "+t+" to "+e),p.enqueueLinkEncryptionChangeEvent(t,e),p._linkEncryption=e)},this.togglePauseJoin=function(e){if(p._logger.debug("togglePauseJoin()"),p._pauseJoin!==e){var t=p._pauseJoin,i=!p._pauseJoin;p.enqueuePauseJoinChangeEvent(t,i),p._pauseJoin=!p._pauseJoin}else p._logger.debug("togglePauseJoin(): same value, ignoring")},this.sendError=function(e,t){p.enqueueErrorEvent(e,t)},this.enqueueEvent=function(e,t){t[T.REQUEST_EVENT_KEY_TYPE]=e,t[T.REQUEST_EVENT_KEY_SESSION_TIME]=this.getSessionTime(),t[T.REQUEST_EVENT_KEY_SEQUENCE_NUMBER]=this._eventQueue.getNumber(),this._playerStateManager?(t[T.REQUEST_KEY_PLAYHEAD_TIME]=W.Integer(this._playerStateManager.getPHT(),0,null,-1),t[T.REQUEST_KEY_BUFFER_LENGTH]=W.Integer(this._playerStateManager.getBufferLength(),0,null,-1)):(t[T.REQUEST_KEY_PLAYHEAD_TIME]=T.DEFAULT_PLAYHEAD_TIME,t[T.REQUEST_KEY_BUFFER_LENGTH]=T.DEFAULT_BUFFER_LENGTH),this._eventQueue.enqueue(t)},this.setPlayerStateManager=function(e){p._playerStateManager=e},this.enqueueSessionEndEvent=function(){var e=this.getSessionTime(),t=this.getNextEventNumber(),i=this._cwsProtocol.generateSessionEndEvent(t,e);this._eventQueue.enqueue(i)},this.enqueueTagsChangeEvent=function(e,t){var i=null;0<B.dictCount(e)&&((i={})[T.REQUEST_KEY_TAGS]=e);var n={};n[T.REQUEST_KEY_TAGS]=t,this.declareStateChange(n,i)},this.enqueueAssetNameChangeEvent=function(e,t){var i={};i[T.REQUEST_KEY_ASSET_NAME]=t,this.declareStateChange(i,null)},this.enqueueErrorEvent=function(e,t){var i={};i[T.REQUEST_ERROR_EVENT_KEY_MESSAGE]=e,i[T.REQUEST_ERROR_EVENT_KEY_FATAL]=t,this.enqueueEvent(T.EVENT_TYPE_ERROR,i)},this.enqueueBitrateChangeEvent=function(e,t){if(!(e<=-1)){var i={},n={};n[T.REQUEST_KEY_BITRATE]=e,i[T.REQUEST_KEY_BITRATE]=t,this.declareStateChange(i,n)}},this.enqueueSeekEvent=function(e,t){var i={};i[T.REQUEST_EVENT_KEY_SEEK_ACT_TYPE]=e,0<=t&&(i[T.REQUEST_EVENT_KEY_SEEK_TO_POS]=t),this.enqueueEvent(T.EVENT_TYPE_SEEK,i)},this.enqueueResourceChangeEvent=function(e,t){var i={},n={};null!==e&&(n[T.REQUEST_KEY_RESOURCE]=e),i[T.REQUEST_KEY_RESOURCE]=t,this.declareStateChange(i,n)},this.enqueueStreamUrlChangeEvent=function(e,t){var i={},n={};null!==e&&(n[T.REQUEST_KEY_STREAM_URL]=e),i[T.REQUEST_KEY_STREAM_URL]=t,this.declareStateChange(i,n)},this.enqueueResolutionWidthChangeEvent=function(e,t){var i={},n={};-1!==e&&(n[T.REQUEST_KEY_VIDEO_WIDTH]=e),i[T.REQUEST_KEY_VIDEO_WIDTH]=t,this.declareStateChange(i,n)},this.enqueueResolutionHeightChangeEvent=function(e,t){var i={},n={};-1!==e&&(n[T.REQUEST_KEY_VIDEO_HEIGHT]=e),i[T.REQUEST_KEY_VIDEO_HEIGHT]=t,this.declareStateChange(i,n)},this.enqueueConnectionTypeChangeEvent=function(e,t){var i={},n={};null!==e&&(n[T.REQUEST_KEY_CONNECTION_TYPE]=e),i[T.REQUEST_KEY_CONNECTION_TYPE]=t,this.declareStateChange(i,n)},this.enqueueSsidChangeEvent=function(e,t){var i={},n={};null!==e&&(n[T.REQUEST_KEY_SSID]=e),i[T.REQUEST_KEY_SSID]=t,this.declareStateChange(i,n)},this.enqueueLinkEncryptionChangeEvent=function(e,t){var i={},n={};null!==e&&(n[T.REQUEST_KEY_LINK_ENCRYPTION]=e),i[T.REQUEST_KEY_LINK_ENCRYPTION]=t,this.declareStateChange(i,n)},this.enqueuePauseJoinChangeEvent=function(e,t){var i={},n={};n[T.REQUEST_KEY_PAUSE_JOIN]=e,i[T.REQUEST_KEY_PAUSE_JOIN]=t,this.declareStateChange(i,n)},this.enqueuePlayerStateChangeEvent=function(e,t){var i={},n={};i[T.REQUEST_KEY_PLAYER_STATE]=T.convertPlayerState(t),n[T.REQUEST_KEY_PLAYER_STATE]=T.convertPlayerState(e),this.declareStateChange(i,n)},this.enqueueDataSamplesEvent=function(){var e={};p._playerStateManager?e[T.REQUEST_KEY_SIGNAL_STRENGTH]=p._playerStateManager.getSignalStrength():e[T.REQUEST_KEY_SIGNAL_STRENGTH]=T.DEFAULT_SIGNAL_STRENGTH,this.enqueueEvent(T.EVENT_TYPE_DATA_SAMPLE,e)},this.declareStateChange=function(e,t){var i={};i[T.REQUEST_STATE_CHANGE_EVENT_KEY_NEW]=e,null!=t&&0<B.dictCount(t)&&(i[T.REQUEST_STATE_CHANGE_EVENT_KEY_OLD]=t),this.enqueueEvent(T.EVENT_TYPE_STATE_CHANGE,i)},this.enqueueCustomEvent=function(e,t){var i={};i[T.REQUEST_CUSTOM_EVENT_KEY_NAME]=e,i[T.REQUEST_CUSTOM_EVENT_KEY_ATTRIBUTES]=t,this.enqueueEvent(T.EVENT_TYPE_CUSTOM,i)},this.cancelHeartbeatTimer=function(){null!=p._heartbeatTimerCancel&&(p._heartbeatTimerCancel(),p._heartbeatTimerCancel=null)},this.resetHeartbeatTimer=function(){p.cancelHeartbeatTimer();var e=1e3*p._clientSettings.heartbeatInterval;p._heartbeatTimerCancel=p._timer.create(p.sendHeartbeat,e,"Session.sendHeartbeat")},this.createHeartbeatInfo=function(){var e={err:"pending"};e.seq=p._heartbeatSequenceNumber-1,e.sentAt=p.getSessionTime(),e.rtt=-1,p._heartbeatInfos.push(e)},this.updateHeartbeatInfoOnFailure=function(e,t){for(var i=0;i<p._heartbeatInfos.length;i++){var n=p._heartbeatInfos[i];n.seq===e&&(n.rtt=p.getSessionTime()-n.sentAt,n.err=t)}},this.updateHeartbeatInfoOnSuccess=function(e){for(var t=0;t<p._heartbeatInfos.length;t++){var i=p._heartbeatInfos[t];i.seq===e&&(i.rtt=p.getSessionTime()-i.sentAt,i.err="ok")}},this.removeOutdatedHeartbeatInfos=function(){for(var e=p._clientConfig.get(L.CONFIG_KEY_MAX_HEARTBEAT_INFOS),t=[],i=0;i<p._heartbeatInfos.length;i++)p._heartbeatInfos[i].seq<p._heartbeatSequenceNumber-e&&t.push(i);for(var n=[],r=0;r<p._heartbeatInfos.length;r++)p._heartbeatInfos[r].seq,t.indexOf(r)<0&&n.push(p._heartbeatInfos[r]);p._heartbeatInfos=n},this.compileHeartbeatInfos=function(){p.removeOutdatedHeartbeatInfos();for(var e=[],t=0;t<p._heartbeatInfos.length;t++){var i=p._heartbeatInfos[t],n={};n[T.REQUEST_HEARTBEAT_INFO_KEY_SEQUENCE_NUMBER]=i.seq,n[T.REQUEST_HEARTBEAT_INFO_KEY_ROUNDTRIP_TIME]=i.rtt,n[T.REQUEST_HEARTBEAT_INFO_KEY_STATUS]=i.err,e.push(n)}return e},this.makeHeartbeat=function(){var e=new P;if(e.setMessageType(T.MESSAGE_TYPE_SESSION_HEARTBEAT),e.setCustomerKey(p._clientSettings.customerKey),e.setClientId(p._clientConfig.get(L.CONFIG_KEY_CLIENT_ID)),e.setSessionId(p._session._id),e.setSequenceNumber(p._heartbeatSequenceNumber),e.setProtocolVersion(T.version),e.setClientVersion(d.version),e.setInstanceId(p._client.getId()),e.setCapfield(0),null!=p._connectionType&&e.setConnectionType(p._connectionType),null!=p._ssid&&e.setSsid(p._ssid),null!=p._linkEncryption&&e.setLinkEncryption(p._linkEncryption),e.setPlatformMetadataSchema(T.SDK_METADATA_SCHEMA),null!=p._browserName&&e.setBrowserName(p._browserName),null!=p._browserVersion&&e.setBrowserVersion(p._browserVersion),null!=p._deviceBrand&&e.setDeviceBrand(p._deviceBrand),null!=p._deviceManufacturer&&e.setDeviceManufacturer(p._deviceManufacturer),null!=p._deviceModel&&e.setDeviceModel(p._deviceModel),null!=p._deviceType&&e.setDeviceType(p._deviceType),null!=p._deviceVersion&&e.setDeviceVersion(p._deviceVersion),null!=p._frameworkName&&e.setFrameworkName(p._frameworkName),null!=p._frameworkVersion&&e.setFrameworkVersion(p._frameworkVersion),null!=p._operatingSystemName&&e.setOperatingSystemName(p._operatingSystemName),null!=p._operatingSystemVersion&&e.setOperatingSystemVersion(p._operatingSystemVersion),null!=p._viewerId&&e.setViewerId(p._viewerId),null!=p._playerName&&e.setPlayerName(p._playerName),0<B.dictCount(p._tags)&&e.setTags(p._tags),p.isVideoSession()||p.isAdSession()){p.isAdSession()&&e.setIsAdSession(),null!=p._assetName&&e.setAssetName(p._assetName),null!=p._isLive&&e.setIsLive(p._isLive),e.setSessionFlags(p._sessionFlags);var t=T.convertPlayerState(p._playerState);if(e.setPlayerState(t),e.setPauseJoin(p._pauseJoin),0<p._contentLengthSec&&e.setContentLength(p._contentLengthSec),0<p._bitrateKbps&&e.setBitrate(p._bitrateKbps),null!==p._resource&&e.setResource(p._resource),0<p._encodedFrameRate&&e.setEncodedFrameRate(p._encodedFrameRate),p._playerStateManager){e.setPlayheadTime(W.Integer(p._playerStateManager.getPHT(),0,null,-1)),e.setBufferLength(W.Integer(p._playerStateManager.getBufferLength(),0,null,-1));var i=p.updateAverageFrameRate();0<=i&&e.setAverageFrameRate(i),p._playerStateManager.getSignalStrength()<=0&&p.enqueueDataSamplesEvent()}else e.setPlayheadTime(T.DEFAULT_PLAYHEAD_TIME),e.setBufferLength(T.DEFAULT_BUFFER_LENGTH);null!=p._streamUrl&&e.setStreamUrl(p._streamUrl),-1<p._width&&e.setStreamWidth(p._width),-1<p._height&&e.setStreamHeight(p._height)}else e.setSessionFlags(T.SessionFlags.GLOBAL);e.setCapabilities(p._capabilities);var n=p._eventQueue.flush();if(p.isGlobalSession()&&0===n.length)return null;if(e.setEvents(n),e.setIsSdkClient(!0),p._clientConfig.get(L.CONFIG_KEY_SEND_LOGS)&&e.setLogs(p._logBuffer.flush()),0<p._clientConfig.get(L.CONFIG_KEY_MAX_HEARTBEAT_INFOS)){var r=p.compileHeartbeatInfos();0<r.length&&e.setHeartbeatInfos(r)}return e.setSessionStartTime(p._startTimeMs),e.setSessionTime(p.getSessionTime()),p._heartbeatSequenceNumber++,e.get()},this.sendHeartbeat=function(){if(!p._cleanedUp){var e=p.makeHeartbeat();null!=e&&p.postHeartbeat(e)}},this.updateAverageFrameRate=function(){if(p._playerState!==g.PlayerState.PLAYING)return-1;var e=p._playerStateManager.getRenderedFrameRate();return 0<=e?(p._playingFpsTotal+=e,p._playingFpsObservationCount++,B.Int32.Cast(1*p._playingFpsTotal/p._playingFpsObservationCount)):-1},this.postHeartbeat=function(e){p.createHeartbeatInfo();var i=p._heartbeatSequenceNumber-1;p._logger.info("postHeartbeat(): Send HB["+i+"]"+p.sessionTypeTag()),p._gatewayControl.send(e,function(e,t){p.onHeartbeatResponse(e,t,i)})},this.onHeartbeatResponse=function(d,h,g){p._cleanedUp||p._exceptionCatcher.runProtected("onHeartbeatResponse",function(){if(d){var e=h;if(null!=e){p._logger.debug("onHeartbeatResponse(): received valid response for HB["+g+"]"),p.updateHeartbeatInfoOnSuccess(g);var t=e[T.RESPONSE_KEY_CLIENT_ID];null!=t&&t!=p._clientConfig.get(L.CONFIG_KEY_CLIENT_ID)&&(p._logger.debug("onHeartbeatResponse(): setting the client id to "+t+" (from gateway)"),p._clientConfig.set(L.CONFIG_KEY_CLIENT_ID,t),p._clientConfig.save());var i=e[T.RESPONSE_KEY_STATUS];null!=i&&i!=T.RESPONSE_STATUS_NO_ERRORS&&p._logger.error("onHeartbeatResponse(): error from gateway: "+i);var n=e[T.RESPONSE_KEY_CONFIG];if("object"==typeof n){var r=n[T.RESPONSE_CONFIG_KEY_MAX_HEARTBEAT_INFOS];null!=r&&p._clientConfig.get(L.CONFIG_KEY_MAX_HEARTBEAT_INFOS)!==r&&(p._logger.debug("onHeartbeatResponse(): setting Maximum Heartbeat Infos to "+r+" (from gateway)"),p._clientConfig.set(L.CONFIG_KEY_MAX_HEARTBEAT_INFOS,r));var s=n[T.RESPONSE_CONFIG_KEY_SEND_LOGS],o=null!=s&&B.AsBoolean(s);o!==p._clientConfig.get(L.CONFIG_KEY_SEND_LOGS)&&(p._logger.debug("onHeartbeatResponse(): turning "+(o?"on":"off")+" sending of logs"),p._clientConfig.set(L.CONFIG_KEY_SEND_LOGS,o));var a=n[T.RESPONSE_CONFIG_KEY_HEARTBEAT_INTERVAL];if(null!=a){var l=B.Int32.Cast(a);l!=p._clientSettings.heartbeatInterval&&(p._logger.debug("onHeartbeatResponse(): received hbIntervalMs from gateway: "+l),p._clientSettings.heartbeatInterval=l,null!=p._heartbeatTimerCancel&&p.resetHeartbeatTimer())}var c=n[T.RESPONSE_CONFIG_KEY_GATEWAY_URL];null!=c&&c!=p._clientSettings.gatewayUrl&&(p._logger.debug("onHeartbeatResponse(): received gatewayUrl from gateway: "+c),p._clientSettings.gatewayUrl=c)}}else p._logger.warning("onHeartbeatResponse(): decoded heartbeat response is null.")}else{var u=h;B.isValidString(u)?B.stringStartsWith(u,"HTTP timeout")?p._logger.warning("onHeartbeatResponse(): "+u):p._logger.error("onHeartbeatResponse(): failed to send heartbeat: "+u):(u=k.DEFAULT_HEARTBEAT_ERROR_MESSAGE,p._logger.error("onHeartbeatResponse(): "+u)),p.updateHeartbeatInfoOnFailure(g,u)}})},this.getSessionTime=function(){return B.Int32.Cast(p._time.current()-p._startTimeMs)},this.getNextEventNumber=function(){return this._eventQueue.getNumber()},this.sessionTypeTag=function(){return this.isGlobalSession()?" (global session)":""},this.isGlobalSession=function(){return this._global==D.SESSION_TYPE.GLOBAL},this.isVideoSession=function(){return this._global==D.SESSION_TYPE.VIDEO},this.isAdSession=function(){return this._global==D.SESSION_TYPE.AD}};D.DEFAULT_VIDEO_SESSION_FLAGS=T.SessionFlags.VIDEO+T.SessionFlags.QUALITY_METRICS+T.SessionFlags.BITRATE_METRICS,D.SESSION_TYPE={VIDEO:"Video",GLOBAL:"Global",AD:"Ad"};var k=(t.IMonitor=function(){this.onPlayerStateChange=function(e){},this.onBitrateChange=function(e){},this.onSeekEvent=function(e,t){},this.onEncodedFrameRateChange=function(e){},this.onRenderedFrameRateChange=function(e){},this.onContentLengthChange=function(e){},this.onPlayheadTimeChange=function(e){},this.onStreamUrlChange=function(e){},this.onBufferLengthChange=function(e){},this.onPlayerTypeChange=function(e){},this.onPlayerVersionChange=function(e){},this.onStreamResolutionWidthChange=function(e){},this.onStreamResolutionHeightChange=function(e){},this.onConnectionTypeChange=function(e){},this.onSsidChange=function(e){},this.onLinkEncryptionChange=function(e){},this.onSignalStrengthChange=function(e){},this.onMetadataChange=function(e){},this.onError=function(e,t){},this.onRelease=function(){}},t.Session=function(){var h=this;h._contentMetadata=null,h._playerStateManager=null,h._id=0,h._global=D.SESSION_TYPE.VIDEO,h._cleaningUp=!1,h._cleanedUp=!1,h._adPlaying=!1,h._adStream=null,h._adPlayer=null,h._adPosition=null,h._ignorePlayerState=!1,h._pooledPlayerState=g.PlayerState.NOT_MONITORED,h._ignoreBitrateAndResource=!1,h._ignorePlayheadTimeandBufferLength=!1,h._ignoreEncodedFrameRateAndDuration=!1,h._ignoreError=!1,function(e,t,i,n,r,s,o,a){this._id=e,this._global=t,this._contentMetadata=i,this._clientConfig=n,this._systemMetadata=r,this._cwsSession=s,this._exceptionCatcher=o,this._logger=a,this._logger.setModuleName("Session"),this._logger.setSessionId(B.ToString(this._id))}.apply(h,arguments),this.start=function(){h.isVideoSession()||h.isAdSession()?h._logger.info("start(): assetName="+h._contentMetadata.assetName):h._logger.info("start()"+h.sessionTypeTag()),h._cwsSession.start(this),h._clientConfig.isReady()?h.initiateSession():h._clientConfig.register(function(){h.initiateSession()})},this.cleanup=function(){h._logger.info("cleanup()"+h.sessionTypeTag()),h._cleaningUp=!0,h._cwsSession.willEndSoon(),h._clientConfig.isReady()?h.endCwsSessionAndCleanupAll():h._clientConfig.register(function(){h.endCwsSessionAndCleanupAll()})},this.cleanupAll=function(){h._logger.debug("cleanupAll()"+h.sessionTypeTag()),(h.isVideoSession()||h.isAdSession())&&null!=h._playerStateManager&&h.detachPlayer(),h._contentMetadata=null,h._logger.setSessionId(null),h._logger=null,h._exceptionCatcher=null,h._client=null,h._clientConfig=null,h._systemMetadata=null,h._cwsSession.cleanup(),h._cwsSession=null,h._cleanedUp=!0},this.endCwsSessionAndCleanupAll=function(){h._cwsSession.end(),h.cleanupAll()},this.initiateSession=function(){h._cwsSession.initialize(),h.setStatesFromSystemMetadata(),(h.isVideoSession()||h.isAdSession())&&(h.setStatesFromContentMetadata(),0<h._contentMetadata.defaultBitrateKbps&&h._cwsSession._bitrateKbps<0&&h._cwsSession.setBitrateKbps(h._contentMetadata.defaultBitrateKbps)),h._cwsSession.startSendingHeartbeats()},this.setStatesFromSystemMetadata=function(){h._logger.debug("setStatesFromSystemMetadata()");var e=h._systemMetadata.get(),t=e[G.BROWSER_NAME];null!=t&&h._cwsSession.setBrowserName(t);var i=e[G.BROWSER_VERSION];null!=i&&h._cwsSession.setBrowserVersion(i);var n=e[G.DEVICE_BRAND];null!=n&&h._cwsSession.setDeviceBrand(n);var r=e[G.DEVICE_MANUFACTURER];null!=r&&h._cwsSession.setDeviceManufacturer(r);var s=e[G.DEVICE_MODEL];null!=s&&h._cwsSession.setDeviceModel(s);var o=e[G.DEVICE_TYPE];null!=o&&h._cwsSession.setDeviceType(o);var a=e[G.DEVICE_VERSION];null!=a&&h._cwsSession.setDeviceVersion(a);var l=e[G.FRAMEWORK_NAME];null!=l&&h._cwsSession.setFrameworkName(l);var c=e[G.FRAMEWORK_VERSION];null!=c&&h._cwsSession.setFrameworkVersion(c);var u=e[G.OPERATING_SYSTEM_NAME];null!=u&&h._cwsSession.setOperatingSystemName(u);var d=e[G.OPERATING_SYSTEM_VERSION];null!=d&&h._cwsSession.setOperatingSystemVersion(d)},this.setStatesFromContentMetadata=function(){if(h._logger.debug("setStatesFromContentMetadata()"),null!=h._contentMetadata.defaultResource&&h._cwsSession.setResource(h._contentMetadata.defaultResource),null!=h._contentMetadata.streamUrl&&h._cwsSession.setStreamUrl(h._contentMetadata.streamUrl),0<h._contentMetadata.duration&&h._cwsSession.setContentLength(h._contentMetadata.duration),0<h._contentMetadata.encodedFrameRate&&h._cwsSession.setEncodedFrameRate(h._contentMetadata.encodedFrameRate),h._contentMetadata.streamType!==a.StreamType.UNKNOWN){var e=h._contentMetadata.streamType===a.StreamType.LIVE;h._cwsSession.setIsLive(e)}null!=h._contentMetadata.assetName&&h._cwsSession.setAssetName(h._contentMetadata.assetName),null!=h._contentMetadata.viewerId&&h._cwsSession.setViewerId(h._contentMetadata.viewerId),null!=h._contentMetadata.applicationName&&h._cwsSession.setPlayerName(h._contentMetadata.applicationName),0<B.dictCount(h._contentMetadata.custom)&&h._cwsSession.setTags(h._contentMetadata.custom)},this.onPlayerStateChange=function(e){return h._logger.debug("onPlayerStateChange(): "+e),h._cwsSession._playerState!=e?(h._cwsSession._playerState==g.PlayerState.NOT_MONITORED&&e!=g.PlayerState.NOT_MONITORED&&(h._pooledPlayerState=e),h._ignorePlayerState?void h._logger.debug("onPlayerStateChange(): "+e+" (pooled, "+(h._adPlaying?"ad playing":"preloading")+")"):void h._cwsSession.setPlayerState(e)):void 0},this.onBitrateChange=function(e){return h._logger.debug("onBitrateChange(): "+e),h._ignoreBitrateAndResource?void h._logger.info("onBitrateChange(): ignored"):void h._cwsSession.setBitrateKbps(e)},this.onSeekEvent=function(e,t){null==t||B.isInteger(t)||(h._logger.error("onSeekEvent(): Ignored non-integer seekToPosition data: "+t),t=-1),h._cwsSession.enqueueSeekEvent(e,t)},this.onEncodedFrameRateChange=function(e){h._logger.debug("onEncodedFrameRateChange(): "+e),0<h._contentMetadata.encodedFrameRate||(0<e?h._ignoreEncodedFrameRateAndDuration?h._logger.info("onEncodedFrameRateChange(): Ignored encoded frame rate data: "+e+" (ads)"):(h._cwsSession.setEncodedFrameRate(e),h._logger.info("onEncodedFrameRateChange(): Received encoded frame rate data: "+e)):h._logger.warning("onEncodedFrameRateChange(): Ignored invalid encoded frame rate data: "+e))},this.onContentLengthChange=function(e){h._logger.debug("onContentLengthChange(): "+e),0<h._contentMetadata.duration||(0<e?h._ignoreEncodedFrameRateAndDuration?h._logger.info("setContentLength(): Ignored content length data: "+e+" (ads)"):(h._cwsSession.setContentLength(e),h._logger.info("setContentLength(): Received content length data: "+e)):h._logger.warning("setContentLength(): Ignored invalid content length data: "+e))},this.onStreamUrlChange=function(e){h._logger.debug("onStreamUrlChange(): "+e),null==h._contentMetadata.streamUrl&&h._cwsSession.setStreamUrl(e)},this.onMetadataChange=function(e){h.updateContentMetadata(e)},this.onStreamResolutionWidthChange=function(e){h._logger.debug("onStreamResolutionWidthChange(): "+e),h._cwsSession.setStreamResolutionWidth(e)},this.onStreamResolutionHeightChange=function(e){h._logger.debug("onStreamResolutionHeightChange(): "+e),h._cwsSession.setStreamResolutionHeight(e)},this.onConnectionTypeChange=function(e){h._logger.debug("onConnectionTypeChange(): "+e),h._cwsSession.setConnectionType(e)},this.onSsidChange=function(e){h._logger.debug("onSsidChange(): "+e),h._cwsSession.setSsid(e)},this.onLinkEncryptionChange=function(e){h._logger.debug("onLinkEncryptionChange(): "+e),h._cwsSession.setLinkEncryption(e)},this.onPlayerTypeChange=function(e){h._logger.debug("onPlayerTypeChange(): "+e),null==h._cwsSession.getFrameworkName()&&h._cwsSession.setFrameworkName(e)},this.onPlayerVersionChange=function(e){h._logger.debug("onPlayerVersionChange(): "+e),null==h._cwsSession.getFrameworkVersion()&&h._cwsSession.setFrameworkVersion(e)},this.onError=function(e,t){h._logger.debug("onError(): "+e+" ("+t+")"),h.reportError(e,t)},this.onRelease=function(){h._logger.debug("onRelease()"),h.detachPlayer()},this.adStart=function(e,t,i){return h._logger.debug("adStart(): adStream="+e+" adPlayer="+t+" adPosition="+i),h._adPlaying?void h._logger.warning("adStart(): multiple adStart calls, ignoring"):(h._adPlaying=!0,h._adStream=e,h._adPlayer=t,h._adPosition=i,h._cwsSession._hasJoined||h._cwsSession.togglePauseJoin(!0),void(h._adStream==z.Client.AdStream.CONTENT||h._adPlayer==z.Client.AdPlayer.SEPARATE?(h._cwsSession._playerState!==g.PlayerState.NOT_MONITORED&&(h._pooledPlayerState=h._cwsSession._playerState),h._cwsSession.setPlayerState(g.PlayerState.NOT_MONITORED),h._ignorePlayerState=!0):h._adStream==z.Client.AdStream.SEPARATE&&h._adPlayer==z.Client.AdPlayer.CONTENT&&(h._cwsSession._playerState!==g.PlayerState.NOT_MONITORED&&(h._pooledPlayerState=h._cwsSession._playerState),h._cwsSession.setPlayerState(g.PlayerState.NOT_MONITORED),h._ignorePlayerState=!0,h._ignoreBitrateAndResource=!0,h._ignoreEncodedFrameRateAndDuration=!0,h._ignorePlayheadTimeandBufferLength=!0,h._ignoreError=!0)))},this.adEnd=function(){return h._logger.debug("adEnd()"),h._adPlaying?(h._cwsSession._hasJoined||h._cwsSession.togglePauseJoin(!1),h._adStream==z.Client.AdStream.CONTENT||h._adPlayer==z.Client.AdPlayer.SEPARATE?h._preloading||(h._ignorePlayerState=!1,h._cwsSession.setPlayerState(h._pooledPlayerState)):h._adStream==z.Client.AdStream.SEPARATE&&h._adPlayer==z.Client.AdPlayer.CONTENT&&(h._ignoreBitrateAndResource=!1,h._ignoreEncodedFrameRateAndDuration=!1,h._ignorePlayheadTimeandBufferLength=!1,h._ignoreError=!1,h._preloading||(h._ignorePlayerState=!1,h._cwsSession.setPlayerState(h._pooledPlayerState))),h._adPlaying=!1,void(h._adStream=h._adPlayer=h._adPosition=null)):void h._logger.debug("adEnd(): called before adStart, ignoring")},this.detachPlayer=function(){h._logger.debug("detachPlayer()"),null!==h._playerStateManager&&(h._exceptionCatcher.runProtected("Session.detachPlayer",function(){h._playerStateManager.removeMonitoringNotifier()}),h._playerStateManager=null,h._cwsSession.setPlayerStateManager(null),h._cwsSession.setPlayerState(g.PlayerState.NOT_MONITORED))},this.attachPlayer=function(e){return h._logger.debug("attachPlayer()"),null!=h._playerStateManager?void h._logger.error("attachPlayer(): detach current PlayerStateManager first"):void h._exceptionCatcher.runProtected("Session.attachPlayer()",function(){e.setMonitoringNotifier(h,h._id)?(e.pushCurrentState(),h._playerStateManager=e,h._cwsSession.setPlayerStateManager(h._playerStateManager)):h._logger.error("attachPlayer(): instance of PlayerStateManager is already attached to a session")})},this.getPlayerStateManager=function(){return h._logger.debug("getPlayerStateManager()"),h._playerStateManager},this.contentPreload=function(){return h._logger.debug("contentPreload()"),h._preloading?void h._logger.debug("contentPreload(): called twice, ignoring"):(h._preloading=!0,void(h._ignorePlayerState=!0))},this.contentStart=function(){return h._logger.debug("contentStart()"),h._preloading?(h._preloading=!1,void(h._adPlaying||(h._ignorePlayerState=!1,h._cwsSession.setPlayerState(h._pooledPlayerState)))):void h._logger.warning("contentStart(): called without contentPreload, ignoring")},this.reportError=function(e,t){if(h._logger.info("reportError(): "+e),B.isValidString(e))if(t===z.Client.ErrorSeverity.FATAL||t===z.Client.ErrorSeverity.WARNING)if(h._ignoreError)h._logger.debug("reportError(): ignored");else{var i=t===z.Client.ErrorSeverity.FATAL;h._cwsSession.sendError(e,i)}else h._logger.error("reportError(): invalid error severity: "+t);else h._logger.error("reportError(): invalid error message string: "+e)},this.updateContentMetadata=function(e){h._logger.debug("updateContentMetadata(): enter"),h._exceptionCatcher.runProtected("Session.updateContentMetadata",function(){h.mergeContentMetadata(e),h.setStatesFromContentMetadata()})},this.sendCustomEvent=function(e,t){h._logger.info("sendEvent(): eventName="+e+h.sessionTypeTag()),h._cwsSession.enqueueCustomEvent(e,t)},this.mergeContentMetadata=function(e){var t={},i={};if(B.isValidString(e.assetName)&&(h._contentMetadata.assetName!=e.assetName?(t[T.REQUEST_KEY_ASSET_NAME]=h._contentMetadata.assetName,i[T.REQUEST_KEY_ASSET_NAME]=e.assetName,h._contentMetadata.assetName=e.assetName):h._logger.warning("mergeContentMetadata(): assetName was not changed.")),B.isValidString(e.applicationName)&&(h._contentMetadata.applicationName!=e.applicationName?(void 0===t[T.REQUEST_KEY_STREAM_METADATA_CHANGE]&&void 0===i[T.REQUEST_KEY_STREAM_METADATA_CHANGE]&&(t[T.REQUEST_KEY_STREAM_METADATA_CHANGE]={},i[T.REQUEST_KEY_STREAM_METADATA_CHANGE]={}),t[T.REQUEST_KEY_STREAM_METADATA_CHANGE][T.REQUEST_KEY_PLAYER_NAME]=h._contentMetadata.applicationName,i[T.REQUEST_KEY_STREAM_METADATA_CHANGE][T.REQUEST_KEY_PLAYER_NAME]=e.applicationName,h._contentMetadata.applicationName=e.applicationName):h._logger.warning("mergeContentMetadata(): applicationName was not changed.")),B.isValidString(e.streamUrl)&&(h._contentMetadata.streamUrl!=e.streamUrl?(t[T.REQUEST_KEY_STREAM_URL]=h._contentMetadata.streamUrl,i[T.REQUEST_KEY_STREAM_URL]=e.streamUrl,h._contentMetadata.streamUrl=e.streamUrl):h._logger.warning("mergeContentMetadata(): streamUrl was not changed.")),B.isValidString(e.viewerId)&&(h._contentMetadata.viewerId!=e.viewerId?(void 0===t[T.REQUEST_KEY_STREAM_METADATA_CHANGE]&&void 0===i[T.REQUEST_KEY_STREAM_METADATA_CHANGE]&&(t[T.REQUEST_KEY_STREAM_METADATA_CHANGE]={},i[T.REQUEST_KEY_STREAM_METADATA_CHANGE]={}),t[T.REQUEST_KEY_STREAM_METADATA_CHANGE][T.REQUEST_KEY_VIEWER_ID]=h._contentMetadata.viewerId,i[T.REQUEST_KEY_STREAM_METADATA_CHANGE][T.REQUEST_KEY_VIEWER_ID]=e.viewerId,h._contentMetadata.viewerId=e.viewerId):h._logger.warning("mergeContentMetadata(): viewerId was not changed.")),B.isValidString(e.defaultResource)&&(h._contentMetadata.defaultResource!=e.defaultResource?(t[T.REQUEST_KEY_RESOURCE]=h._contentMetadata.defaultResource,i[T.REQUEST_KEY_RESOURCE]=e.defaultResource,h._contentMetadata.defaultResource=e.defaultResource):h._logger.warning("mergeContentMetadata(): defaultResource was not changed.")),B.isInteger(e.duration)&&0<e.duration&&(h._contentMetadata.duration!=e.duration?(t[T.REQUEST_KEY_CONTENT_LENGTH]=h._cwsSession._contentLengthSec,i[T.REQUEST_KEY_CONTENT_LENGTH]=e.duration,h._contentMetadata.duration=e.duration):h._logger.warning("mergeContentMetadata(): duration was not changed.")),B.isInteger(e.encodedFrameRate)&&0<e.encodedFrameRate&&(h._contentMetadata.encodedFrameRate!=e.encodedFrameRate?(t[T.REQUEST_KEY_ENCODED_FRAME_RATE]=h._contentMetadata.encodedFrameRate,i[T.REQUEST_KEY_ENCODED_FRAME_RATE]=e.encodedFrameRate,h._contentMetadata.encodedFrameRate=e.encodedFrameRate):h._logger.warning("mergeContentMetadata(): encodedFrameRate was not changed.")),e.streamType!=a.StreamType.UNKNOWN&&(h._contentMetadata.streamType!=e.streamType?(h._contentMetadata.streamType==z.ContentMetadata.StreamType.LIVE?t[T.REQUEST_KEY_IS_LIVE]=!0:t[T.REQUEST_KEY_IS_LIVE]=!1,e.streamType==z.ContentMetadata.StreamType.LIVE?i[T.REQUEST_KEY_IS_LIVE]=!0:i[T.REQUEST_KEY_IS_LIVE]=!1,h._contentMetadata.streamType=e.streamType):h._logger.warning("mergeContentMetadata(): streamType was not changed.")),0<B.dictCount(e.custom)){var n={};for(var r in e.custom)h._contentMetadata.custom[r]!=e.custom[r]?n[r]=e.custom[r]:h._logger.info("mergeContentMetadata(): custom."+r+" was not changed.");if(0<B.dictCount(n)){var s={};for(r in h._contentMetadata.custom)s[r]=h._contentMetadata.custom[r];for(r in n)s[r]=n[r];0<B.dictCount(h._contentMetadata.custom)&&(t[T.REQUEST_KEY_TAGS]=h._contentMetadata.custom),i[T.REQUEST_KEY_TAGS]=s,h._contentMetadata.custom=s}else h._logger.warning("mergeContentMetadata(): custom was not changed.")}0<B.dictCount(i)&&h._cwsSession.declareStateChange(i,t)},this.isGlobalSession=function(){return h._global==D.SESSION_TYPE.GLOBAL},this.isVideoSession=function(){return h._global==D.SESSION_TYPE.VIDEO},this.isAdSession=function(){return h._global==D.SESSION_TYPE.AD},this.sessionTypeTag=function(){return h.isGlobalSession()?" (global session)":""}});k.DEFAULT_HEARTBEAT_ERROR_MESSAGE="received no response (or a bad response) to heartbeat POST request";var O=t.SessionFactory=function(){var o=this;o._logger=null,o._logBuffer=null,o._nextSessionKey=0,o._sessionsByKey=null,function(e,t,i,n){o._client=e,o._clientSettings=t,o._clientConfig=i,o._systemFactory=n,o._logger=o._systemFactory.buildLogger(),o._logger.setModuleName("SessionFactory"),o._nextSessionKey=0,o._sessionsByKey={}}.apply(o,arguments),this.cleanup=function(){for(var e in o._logger=null,o._logBuffer=null,o._sessionsByKey)o._sessionsByKey[e].cleanup();o._sessionsByKey=null,o._nextSessionKey=0},this.newSessionKey=function(){var e=o._nextSessionKey;return o._nextSessionKey++,e},this.makeVideoSession=function(e,t){return null==e&&(e=new a),o.makeSession(e,t)},this.makeGlobalSession=function(e){return o.makeSession(e,D.SESSION_TYPE.GLOBAL)},this.generateSessionId=function(){return V.integer32()},this.makeSession=function(e,t){var i=e.clone(),n=o.generateSessionId(),r=o._systemFactory.buildSession(o._client,o._clientSettings,o._clientConfig,n,t,i),s=o.newSessionKey();return o.addSession(s,r),r.start(),s},this.getSession=function(e){var t=o._sessionsByKey[e];return null==t&&o._logger.error("Client: invalid sessionKey. Did you cleanup that session previously?"),t},this.getVideoSession=function(e){var t=this.getSession(e);return null!=t&&(t.isVideoSession()||t.isAdSession()||(o._logger.error("Client: invalid sessionKey. Did you cleanup that session previously?"),t=null)),t},this.addSession=function(e,t){o._sessionsByKey[e]=t},this.removeSession=function(e){delete o._sessionsByKey[e]},this.cleanupSession=function(e){var t=o.getSession(e);o.removeSession(e),t.cleanup()}},R=t.CallbackWithTimeout=function(e){this._timer=e,this.getWrapperCallback=function(i,e,t){var n=!1;return this._timer.createOnce(function(){n||i(!(n=!0),t+" ("+e+" ms)")},e,"CallbackWithTimeout.wrap"),function(e,t){n||(n=!0,i(e,t))}}},L=t.Config=function(e,t,i){var n=this;this._logger=e,this._logger.setModuleName("Config"),this._storage=t,this._jsonInterface=i,this._defaultConfig={clientId:T.DEFAULT_CLIENT_ID,sendLogs:!1,maxHbInfos:T.DEFAULT_MAX_HEARTBEAT_INFOS},this._config=B.ObjectShallowCopy(this._defaultConfig),this._loaded=!1,this._loadedEmpty=!1,this._waitingConsumers=[],this.isReady=function(){return this._loaded},this.load=function(){this._storage.load(L.STORAGE_KEY,function(e,t){e?(n._parse(t),n._logger.debug("load(): configuration successfully loaded from local storage"+(n._loadedEmpty?" (was empty)":"")+".")):n._logger.error("load(): error loading configuration from local storage: "+t),n._loaded=!0,n._notify()})},this._parse=function(e){var t=this._jsonInterface.decode(e);if(null!=t){var i=t[L.CONFIG_STORAGE_KEY_CLIENT_ID];null!=i&&i!=T.DEFAULT_CLIENT_ID&&""!=i&&"null"!=i&&(this._config[L.CONFIG_KEY_CLIENT_ID]=i,this._logger.debug("parse(): loaded clientId="+i+" (from local storage)"))}else this._loadedEmpty=!0},this._marshall=function(){var e={};return e[L.CONFIG_STORAGE_KEY_CLIENT_ID]=this._config.clientId,this._logger.debug("_marshall(): saving clientId="+this._config.clientId+" (to local storage)"),this._jsonInterface.encode(e)},this.save=function(){this._storage.save(L.STORAGE_KEY,this._marshall(),function(e,t){e?n._logger.debug("save(): configuration successfully saved to local storage."):n._logger.error("save(): error saving configuration to local storage: "+t)})},this.register=function(e){return this.isReady()?void e():void this._waitingConsumers.push(e)},this.get=function(e){return this._loaded?this._config[e]:null},this.set=function(e,t){this._loaded&&(this._config[e]=t)},this._notify=function(){for(var e;null!=(e=this._waitingConsumers.shift());)e()}};L.STORAGE_KEY="sdkConfig",L.CONFIG_STORAGE_KEY_CLIENT_ID="clId",L.CONFIG_KEY_CLIENT_ID="clientId",L.CONFIG_KEY_SEND_LOGS="sendLogs",L.CONFIG_KEY_MAX_HEARTBEAT_INFOS="maxHbInfos";var x=t.EventQueue=function(){this._events=[],this._nextEventNumber=0,this.enqueue=function(e){this._events.push(e)},this.getNumber=function(){var e=this._nextEventNumber;return this._nextEventNumber++,e},this.flush=function(){var e=this._events;return this._events=[],e}},N=t.ExceptionCatcher=function(e,t,i){this._logger=e,this._logger.setModuleName("ExceptionCatcher"),this._ping=t,this._systemSettings=i,this.runProtected=function(t,e,i){try{e()}catch(e){if(null!=i)i(e);else{if(this._systemSettings.allowUncaughtExceptions)throw e;this.onUncaughtException(t,e)}}},this.onUncaughtException=function(e,t){var i="Uncaught exception: "+e+": "+t.toString();if(null!=this._ping)try{this._ping.send(i)}catch(e){this._logger.error("Caught exception while sending ping: "+e.toString())}this._logger.error(i)}},M=t.GatewayControl=function(e,t,i,n){var r=this;this._clientSettings=e,this._logger=t,this._logger.setModuleName("GatewayControl"),this._httpClient=i,this._jsonInterface=n,this.send=function(e,n){var t=this._jsonInterface.encode(e),i=this._clientSettings.gatewayUrl+T.gatewayPath;this._httpClient.request("POST",i,t,"application/json",function(e,t){if(e){var i=r._jsonInterface.decode(t);n(e,i)}else n(e,t)})}},B=t.Lang={};B.isMeaningfulString=function(e){return B.isValidString(e)&&null!=e&&"undefined"!=e&&"null"!=e},B.sanitizeStringToStringObject=function(e){var t={};for(var i in e)if(B.isMeaningfulString(i)){var n=e[i];B.isMeaningfulString(n)&&(t[i]=n)}return t},B.validateInterface=function(e,t,i){if(null==e)throw new Error("Expected "+i+" implementation is null.");for(var n in t)if("function"!=typeof e[n])throw new Error("Expected method "+n+" in "+i+" implementation.")},B.dictCount=function(e){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i},B.ToString=function(e){return""+e},B.NumberToInt=function(e){return Math.floor(e)},B.NumberToUnsignedInt=function(e){return Math.abs(B.NumberToInt(e))},B.AsBoolean=function(e){return Boolean(e)},B.isValidString=function(e){return"string"==typeof e&&""!==e},B.stringStartsWith=function(e,t){return"string"==typeof e&&"string"==typeof t&&"function"==typeof e.indexOf&&0===e.indexOf(t)},B.isBoolean=function(e){return"boolean"==typeof e},B.UrlEncodeString=function(e){return escape(e)},B.isObject=function(e){return"object"==typeof e},B.ObjectToString=function(e){var t="";for(var i in e)t+=i+"="+e[i];return"Object{"+t+"}"},B.ObjectShallowCopyOmitNull=function(e){var t=B.ObjectShallowCopy(e);for(var i in t)null==t[i]&&delete t[i];return t},B.ObjectShallowCopy=function(e){var t={};for(var i in e)t[i]=e[i];return t},B.ObjectShallowEquals=function(e,t){if(typeof e!=typeof t)return!1;if(e instanceof Object&&t instanceof Object){if(B.dictCount(e)!==B.dictCount(t))return!1;for(var i in e)if(e[i]!==t[i])return!1;return!0}return e===t},B.isInteger=function(e){return"number"==typeof e&&Math.round(e)===e},B.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},B.ArrayEquals=function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var i=0;i<e.length;++i)if(B.isArray(e[i])&&B.isArray(t[i])){if(!B.ArrayEquals(e[i],t[i]))return!1}else if(e[i]!==t[i])return!1;return!0},B.isObjectDefinePropertyPresent=function(){return void 0!==Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}()},B.defGet=function(e,t,i){if(B.isObjectDefinePropertyPresent())Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:i});else{if(void 0===e.__defineGetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineGetter__");e.__defineGetter__(t,i)}},B.defSet=function(e,t,i){if(B.isObjectDefinePropertyPresent())Object.defineProperty(e,t,{configurable:!0,set:i});else{if(void 0===e.__defineSetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineSetter__");e.__defineSetter__(t,i)}},function(){var i={two32:4294967296};i.MaxValue=i.two32-1,i.MinValue=0,B.UInt32=i,B.UInt32.Cast=function(e){var t=parseInt(e,10);return t>i.MaxValue?t%=i.two32:t<i.MinValue&&(t=-t%i.two32,t=i.two32-t),t},B.UInt32.InRange=function(e){var t=parseInt(e,10);return t<=i.MaxValue&&t>=i.MinValue};var n={MaxValue:2147483647,MinValue:-2147483648};B.Int32=n,B.Int32.Cast=function(e){var t=parseInt(e,10);return t>n.MaxValue?t%=n.MaxValue:t<n.MinValue&&(t=-t%n.MaxValue,t=n.MaxValue-t),t},B.Int32.InRange=function(e){var t=parseInt(e,10);return t<=n.MaxValue&&t>=n.MinValue}}();var F=t.LogBuffer=function(){this._buffer=[],this.add=function(e){32<=this._buffer.length&&this._buffer.shift(),this._buffer.push(e)},this.flush=function(){var e=this._buffer;return this._buffer=[],e}},U=t.Ping=function(e,t,i){this._isSendingPing=!1,this._cachedBasePingUrl=null,this._logger=e,this._logger.setModuleName("Ping"),this._httpClient=t,this._clientSettings=i,this.send=function(e){if(!this._isSendingPing){this._isSendingPing=!0;var t=this.getBasePingUrl()+"&d="+B.UrlEncodeString(e.toString());this._logger.error("send(): "+t),this._httpClient.request("GET",t,null,null,null),this._isSendingPing=!1}},this.getBasePingUrl=function(){if(!this._cachedBasePingUrl){var e=U.SERVICE_URL+"?comp="+U.COMPONENT_NAME+"&clv="+d.version;if(this._clientSettings&&(e+="&cid="+this._clientSettings.customerKey),e+="&sch="+T.SDK_METADATA_SCHEMA,!this._clientSettings)return e;this._cachedBasePingUrl=e}return this._cachedBasePingUrl}};U.COMPONENT_NAME="sdkjs",U.SERVICE_URL="https://pings.conviva.com/ping.ping";var V=t.Random={};V.maxUInt32=4294967295,V.maxInt32=2147483647,V.minInt32=-2147483648,V.integer32=function(){return Math.floor(Math.random()*V.maxUInt32)+V.minInt32},V.uinteger32=function(){return Math.floor(Math.random()*V.maxUInt32)};var W=t.Sanitize={};W.Integer=function(e,t,i,n){if(isNaN(e))return n;if("number"!=typeof e)return n;if(e==n)return n;var r=B.NumberToInt(e);return W.EnforceBoundaries(r,t,i)},W.EnforceBoundaries=function(e,t,i){return null!=i&&i<e?e=i:null!=t&&e<t&&(e=t),e},W.sanitizeSpecialIntegerValue=function(e){return-1==e||-2==e?e:e=W.Integer(e,0,null,-1)};var H=(t.StreamerError=function(){var i=this;i.errorCode=null,i.severity=d.ErrorSeverity.FATAL,function(e,t){i.errorCode=e,i.severity=t}.apply(i,arguments)},t.HttpClient=function(e,t,i,n){this._logger=e,this._logger.setModuleName("HttpClient"),this._httpInterface=t,this._callbackWithTimeout=i,this._systemSettings=n,this.request=function(e,t,i,n,r){var s=1e3*this._systemSettings.httpTimeout,o=this._callbackWithTimeout.getWrapperCallback(r,s,"HTTP timeout");this._logger.debug("request(): calling HttpInterface.makeRequest"),this._httpInterface.makeRequest(e,t,i,n,s,o)}}),Y=t.Logger=function(e,t,i,n,r){this._loggingInterface=e,this._timeInterface=t,this._settings=i,this._logBuffer=n,this._packageName=r,this.debug=function(e){this.log(e,s.LogLevel.DEBUG)},this.info=function(e){this.log(e,s.LogLevel.INFO)},this.warning=function(e){this.log(e,s.LogLevel.WARNING)},this.error=function(e){this.log(e,s.LogLevel.ERROR)},this.log=function(e,t){var i=this.formatMessage(e,t);this._logBuffer.add(i),this._settings.logLevel<=t&&this._loggingInterface.consoleLog(i,t)},this.prependModuleName=function(e){var t=e;return"["+this._moduleName+"] "+t},this.prependPackageName=function(e){var t=e;return"["+this._packageName+"] "+t},this.prependConvivaNamespace=function(e){return"[Conviva] "+e},this.prependTime=function(e){return"["+(this._timeInterface.getEpochTimeMs()/1e3).toFixed(3).toString()+"] "+e},this.prependLogLevel=function(e,t){return"["+Y.getLogLevelString(t)+"] "+e},this.prependSessionId=function(e){var t=e;return null!=this._sessionId&&(t="sid="+this._sessionId+" "+t),t},this.setSessionId=function(e){this._sessionId=e},this.setModuleName=function(e){this._moduleName=e},this.formatMessage=function(e,t){return this.prependConvivaNamespace(this.prependTime(this.prependLogLevel(this.prependPackageName(this.prependModuleName(this.prependSessionId(e))),t)))}};Y.getLogLevelString=function(e){var t;switch(e){case s.LogLevel.ERROR:t="ERROR";break;case s.LogLevel.WARNING:t="WARNING";break;case s.LogLevel.INFO:t="INFO";break;case s.LogLevel.DEBUG:t="DEBUG"}return t};var K=t.Storage=function(e,t,i,n){this._logger=e,this._logger.setModuleName("Storage"),this._storageInterface=t,this._callbackWithTimeout=i,this._systemSettings=n,this.load=function(e,t){var i=this._callbackWithTimeout.getWrapperCallback(t,1e3*this._systemSettings.storageTimeout,"storage load timeout");this._logger.debug("load(): calling StorageInterface.loadData"),this._storageInterface.loadData(K.STORAGE_SPACE,e,i)},this.save=function(e,t,i){var n=this._callbackWithTimeout.getWrapperCallback(i,1e3*this._systemSettings.storageTimeout,"storage save timeout");this._logger.debug("save(): calling StorageInterface.saveData"),this._storageInterface.saveData(K.STORAGE_SPACE,e,t,n)}};K.STORAGE_SPACE="Conviva";var G=t.SystemMetadata=function(e,t,i){this._logger=e,this._logger.setModuleName("SystemMetadata"),this._metadataInterface=t,this._exceptionCatcher=i,this._cachedMetadata=null,this.get=function(){return this._cachedMetadata||this.retrieve(),this._cachedMetadata},this.retrieve=function(){function e(t,i){n._exceptionCatcher.runProtected("Session.getSystemMetadataSchema(): "+t,function(){var e=i[t];i[t]=e.call(n._metadataInterface)})}var t={};t[G.BROWSER_NAME]=this._metadataInterface.getBrowserName,t[G.BROWSER_VERSION]=this._metadataInterface.getBrowserVersion,t[G.DEVICE_BRAND]=this._metadataInterface.getDeviceBrand,t[G.DEVICE_MANUFACTURER]=this._metadataInterface.getDeviceManufacturer,t[G.DEVICE_MODEL]=this._metadataInterface.getDeviceModel,t[G.DEVICE_TYPE]=this._metadataInterface.getDeviceType,t[G.DEVICE_VERSION]=this._metadataInterface.getDeviceVersion,t[G.FRAMEWORK_NAME]=this._metadataInterface.getFrameworkName,t[G.FRAMEWORK_VERSION]=this._metadataInterface.getFrameworkVersion,t[G.OPERATING_SYSTEM_NAME]=this._metadataInterface.getOperatingSystemName,t[G.OPERATING_SYSTEM_VERSION]=this._metadataInterface.getOperatingSystemVersion;var n=this;for(var i in this._logger.debug("retrieve(): calling MetadataInterface methods"),t)e(i,t),B.isValidString(t[i])||delete t[i];t[G.DEVICE_TYPE]!==d.DeviceType.DESKTOP&&t[G.DEVICE_TYPE]!==d.DeviceType.CONSOLE&&t[G.DEVICE_TYPE]!==d.DeviceType.SETTOP&&t[G.DEVICE_TYPE]!==d.DeviceType.MOBILE&&t[G.DEVICE_TYPE]!==d.DeviceType.TABLET&&t[G.DEVICE_TYPE]!==d.DeviceType.SMARTTV&&delete t[G.DEVICE_TYPE],this._cachedMetadata=B.ObjectShallowCopyOmitNull(t)}};G.BROWSER_NAME="browserName",G.BROWSER_VERSION="browserVersion",G.DEVICE_BRAND="deviceBrand",G.DEVICE_MANUFACTURER="deviceManufacturer",G.DEVICE_MODEL="deviceModel",G.DEVICE_TYPE="deviceType",G.DEVICE_VERSION="deviceVersion",G.FRAMEWORK_NAME="frameworkName",G.FRAMEWORK_VERSION="frameworkVersion",G.OPERATING_SYSTEM_NAME="operatingSystemName",G.OPERATING_SYSTEM_VERSION="operatingSystemVersion";var j=t.Time=function(e,t){this._timeInterface=e,this._logger=t,this._logger.setModuleName("Time"),this.current=function(){var e=this._timeInterface.getEpochTimeMs();return B.isInteger(e)||this._logger.error("current(): TimeInterface.getEpochTimeMs() did not return an integer ("+e+")"),e}},q=t.Timer=function(e,t,i){var s=this;this._logger=e,this._logger.setModuleName("Timer"),this._timerInterface=t,this._exceptionCatcher=i,this.create=function(e,t,i){return this.createTimer(function(){s._exceptionCatcher.runProtected(i,function(){e()})},t,i)},this.createOnce=function(e,t,i){var n={cancel:null},r=this.createTimer(function(){s._exceptionCatcher.runProtected(i,function(){n&&"function"==typeof n.cancel&&(n.cancel(),n.cancel=null,n=null),e()})},t,i);return n.cancel=r},this.createTimer=function(e,t,i){return this._logger.debug("createTimer(): calling TimerInterface.create"),this._timerInterface.createTimer(e,t,i)}}}(),z}),Conviva}),define("rofl/lib/analytics/npaw",["rofl/lib/utils","rofl/components/statistics","rofl/lib/analytics/npaw/npaw-components"],function(e,t,n){"use strict";return t.extend({init:function(){var e=this.getCurrentApplication(),t=e.getDevice(),i=e.getConfiguration();i.statistics&&i.statistics.npaw?(i.statistics.npaw.user&&(this._user=i.statistics.npaw.user),i.statistics.npaw.pass&&(this._pass=i.statistics.npaw.pass),i.statistics.npaw.system&&(this._system=i.statistics.npaw.system)):system.error("No config data for NPAW stats plugin"),this._targetDevice=t.getBrand(),this._service="http://nqs.nice264.com",this.data=n.data,this.data.setAccountCode(this._system),this.data.setService(this._service),this.data.setUsername(this._user),this.api=new n.api(this._system,this._service,{},"1.3.0",this._targetDevice)},join:function(e,t){this.api.sendJoin(e,t)},start:function(e,t,i,n,r,s,o){this.api.sendStart(e,t,i,n,r,s,o)},pause:function(){this.api.sendPause()},resume:function(){this.api.sendResume()},ping:function(e,t){this.api.sendPingTotalBitrate(e,t)},stop:function(){this.api.sendStop()},getPingTime:function(){return this.api.getPingTime()},error:function(e,t){this.api.sendError(e,t)}})}),define("rofl/lib/analytics/npaw/npaw-components",["rofl/lib/analytics/npaw/npaw-data"],function(youboraData){"use strict";function YouboraCommunication(e,t,i,n,r){try{this.system=e,this.service=t,this.bandwidth=i,this.pluginVersion=n,this.targetDevice=r,this.outputFormat="xml",this.xmlHttp=null,this.isXMLReceived=!1,this.pamBufferUnderrunUrl="",this.pamJoinTimeUrl="",this.pamStartUrl="",this.pamStopUrl="",this.pamPauseUrl="",this.pamResumeUrl="",this.pamPingUrl="",this.pamErrorUrl="",this.pamCode="",this.pamCodeOrig="",this.pamCodeCounter=0,this.pamPingTime=5e3,this.lastPingTime=0,this.diffTime=0,this.canSendEvents=!1,this.eventQueue=[],this.startSent=!1,this.fastDataValid=!1,this.debug=youboraData.getDebug(),this.debugHost="";var s=this;this.concurrencyTimer="",this.resumeInterval="",this.currentTime=0,this.wasResumed=0,this.balancedUrlsCallback=function(){},this.balancedCallback=function(){},this.l3dataStart={host:"",type:""},this.l3dataPing={host:"",type:""},this.l3types={UNKNOWN:0,TCP_HIT:1,TCP_MISS:2,TCP_MEM_HIT:3,TCP_IMS_HIT:4},this.l3IsNodeSend=!1,this.resourcePath,this.protocol="http://",1==youboraData.getHttpSecure()&&(this.protocol="https://"),void 0!==youboraData?(youboraData.concurrencyProperties.enabled?(this.concurrencyTimer=setInterval(function(){s.checkConcurrencyWork()},1e4),this.debug&&console.log("YouboraCommunication :: Concurrency :: Enabled")):this.debug&&console.log("YouboraCommunication :: Concurrency :: Disabled"),youboraData.resumeProperties.resumeEnabled?(this.checkResumeState(),this.debug&&console.log("YouboraCommunication :: Resume :: Enabled")):this.debug&&console.log("YouboraCommunication :: Resume :: Disabled"),1==youboraData.cdn_node_data?this.debug&&console.log("YouboraCommunication :: Level3 :: Enabled"):this.debug&&console.log("YouboraCommunication :: Level3 :: Disabled"),youboraData.getBalanceEnabled()?this.debug&&console.log("YouboraCommunication :: Balancer :: Enabled"):this.debug&&console.log("YouboraCommunication :: Balancer :: Disabled")):this.debug&&console.log("YouboraCommunication :: Unable to reach youboraData :: Concurrency / Resume / Level3 :: Disabled"),1==youboraData.getHttpSecure()&&(this.protocol="https://"),this.init()}catch(e){this.debug&&console.log("YouboraCommunication :: Error: "+e)}}function YouboraCommunicationURL(e,t){this.params=t,this.eventType=e}if(YouboraCommunication.prototype.getLevel3Header=function(){if(void 0!==youboraData&&this.fastDataValid){if(0<youboraData.getMediaResource().length)try{this.xmlHttp=new XMLHttpRequest,(this.xmlHttp.context=this).xmlHttp.addEventListener("load",function(e){try{var t=e.target.getResponseHeader("X-WR-DIAG").toString();this.context.parseL3Header(t,1)}catch(e){this.context.debug&&console.log("YouboraCommunication :: Level3 :: Error parsing header"+e)}},!0),this.xmlHttp.addEventListener("error",function(e){this.context.getAkamaiHeader()},!0),this.xmlHttp.open("head",youboraData.getMediaResource(),!0),this.xmlHttp.setRequestHeader("X-WR-Diag","host"),this.xmlHttp.send(),this.debug&&console.log("YouboraCommunication :: HTTP LEVEL3 Header Request :: "+youboraData.getMediaResource())}catch(e){youboraData.setCDNNodeData(!1),this.debug&&console.log("YouboraCommunication :: Level3 :: Error with header, disabling header check")}else youboraData.setCDNNodeData(!1),this.debug&&console.log("YouboraCommunication :: Level3 :: No mediaResource specified, disabling first header check")}},YouboraCommunication.prototype.getAkamaiHeader=function(){try{this.xmlHttp=new XMLHttpRequest,(this.xmlHttp.context=this).xmlHttp.addEventListener("load",function(e){try{this.context.parseAkamaiHeader(e.target.getResponseHeader("X-Cache"))}catch(e){console.log("YouboraCommunication :: Akamai :: Error parsing header"+e)}},!0),this.xmlHttp.open("head",youboraData.getMediaResource(),!0),this.xmlHttp.send()}catch(e){youboraData.setCDNNodeData(!1),console.log("YouboraCommunication :: Akamai :: Error with header, disabling header check")}},YouboraCommunication.prototype.checkResumeState=function(){var e=youboraData.getResumeService(),t=youboraData.getContentId(),i=youboraData.getUsername();if(e=this.protocol+e.split("//")[1],youboraData.getResumeEnabled())if(0<t.length)if(0<i.length)try{this.xmlHttp=new XMLHttpRequest,(this.xmlHttp.context=this).xmlHttp.addEventListener("load",function(e){this.context.validateResumeStatus(e)},!1);var n=e+"?contentId="+t+"&userId="+i+"&random="+Math.random();this.xmlHttp.open("GET",n,!0),this.xmlHttp.send(),this.debug&&(console.log("YouboraCommunication :: checkResumeState :: HTTP Reusme Request :: "+n),console.log("YouboraCommunication :: checkResumeState :: Resume :: Enabled"))}catch(e){clearInterval(this.resumeInterval),this.debug&&console.log("YouboraCommunication :: checkResumeState :: Error while performig resume petition ::"+e)}else this.debug&&console.log("YouboraCommunication :: checkResumeState :: Resume enabled without username defined :: Resume Disabled");else this.debug&&console.log("YouboraCommunication :: checkResumeState :: Resume enabled without contentId defined :: Resume Disabled");else this.debug&&console.log("YouboraCommunication :: checkResumeState :: Resume disabled in data. ")},YouboraCommunication.prototype.validateResumeStatus=function(httpEvent){try{if(4==httpEvent.target.readyState){var response=httpEvent.target.response.toString();if(0<response){var resumeCallback=youboraData.getResumeCallback();this.debug&&console.log("YouboraCommunication :: Resume :: Available ::"),"function"==typeof resumeCallback?(this.wasResumed=1,resumeCallback(response),this.debug&&console.log("YouboraCommunication :: Resume :: Executed Function")):"string"==typeof resumeCallback?eval(resumeCallback):this.debug&&console.log("YouboraCommunication :: Unable to determine callback type!")}else"0"==response?this.debug&&console.log("YouboraCommunication :: Resume :: No previous state..."):(clearInterval(this.resumeInterval),this.debug&&console.log("YouboraCommunication :: Resume :: Empty response... stoping rsume."))}}catch(e){clearInterval(this.resumeInterval),this.debug&&console.log("YouboraCommunication :: validateResumeStatus :: Error: "+e)}},YouboraCommunication.prototype.sendPlayTimeStatus=function(){var t=this,e=youboraData.getPlayTimeService(),i=youboraData.getContentId(),n=youboraData.getUsername();e=this.protocol+e.split("//")[1];try{if(youboraData.getResumeEnabled()){this.xmlHttp=new XMLHttpRequest,this.xmlHttp.addEventListener("load",function(e){},!1);var r=e+"?contentId="+i+"&userId="+n+"&playTime="+Math.round(this.currentTime)+"&random="+Math.random();this.xmlHttp.open("GET",r,!0),this.xmlHttp.send(),t.debug&&console.log("YouboraCommunication :: HTTP Resume Request :: "+r)}else t.debug&&console.log("YouboraCommunication :: sendPlayTimeStatus :: Resume disabled in data.")}catch(e){clearInterval(this.resumeInterval),t.debug&&console.log("YouboraCommunication :: sendPlayTimeStatus :: Error: "+e)}},YouboraCommunication.prototype.enableResume=function(){try{youboraData.setResumeEnabled(!0);var e=this;clearInterval(this.resumeInterval),this.resumeInterval=setInterval(function(){e.sendPlayTimeStatus()},6e3),this.checkResumeState(),this.debug&&console.log("YouboraCommunication :: enableResume :: Resume is now enabled")}catch(e){clearInterval(this.resumeInterval),this.debug&&console.log("YouboraCommunication :: enableResume :: Error: "+error)}},YouboraCommunication.prototype.disableResume=function(){try{youboraData.setResumeEnabled(!1),clearInterval(this.resumeInterval),this.debug&&console.log("YouboraCommunication :: disableResume :: Resume is now disabled")}catch(e){clearInterval(this.resumeInterval),this.debug&&console.log("YouboraCommunication :: disableResume :: Error: "+error)}},YouboraCommunication.prototype.getPingTime=function(){return this.pamPingTime},YouboraCommunication.prototype.parseL3Header=function(e,t){try{var i=e;return(i=i.split(" ")).host=i[0].replace("Host:",""),i.type=i[1].replace("Type:",""),"TCP_HIT"==i.type?i.type=this.l3types.TCP_HIT:"TCP_MISS"==i.type?i.type=this.l3types.TCP_MISS:"TCP_MEM_HIT"==i.type?i.type=this.l3types.TCP_MEM_HIT:"TCP_IMS_HIT"==i.type?i.type=this.l3types.TCP_IMS_HIT:(this.debug&&console.log("YouboraCommunication :: Level3 :: Unknown type received: "+i.type),i.type=this.l3types.UNKNOWN),1==t?(this.l3dataStart.host=i.host,this.l3dataStart.type=i.type,this.debug&&console.log("YouboraCommunication :: Level3 :: onLoad :: Host: "+this.l3dataStart.host+" :: Type: "+this.l3dataStart.type)):(this.l3dataPing.host=i.host,this.l3dataPing.type=i.type,this.debug&&console.log("YouboraCommunication :: Level3 :: beforeStart :: Host: "+this.l3dataPing.host+" :: Type: "+this.l3dataPing.type)),!0}catch(e){return youboraData.setCDNNodeData(!1),this.context.debug&&console.log("YouboraCommunication :: Level3 :: Error with header, disabling header check"+e),!1}},YouboraCommunication.prototype.parseAkamaiHeader=function(e){try{var t=e;return(t=t.split(" ")).type=t[0].replace("Type:",""),t.host=t[3].split("/")[1].replace(")",""),"TCP_HIT"==t.type?t.type=this.l3types.TCP_HIT:"TCP_MISS"==t.type?t.type=this.l3types.TCP_MISS:"TCP_MEM_HIT"==t.type?t.type=this.l3types.TCP_MEM_HIT:"TCP_IMS_HIT"==t.type?t.type=this.l3types.TCP_IMS_HIT:(console.log("YouboraCommunication :: Akamai :: Unknown type received: "+t.type),t.type=this.l3types.UNKNOWN),this.l3dataStart.host=t.host,this.l3dataStart.type=t.type,this.l3dataPing.host=t.host,this.l3dataPing.type=t.type,console.log("YouboraCommunication :: Akamai :: onLoad :: Host: "+this.l3dataStart.host+" :: Type: "+this.l3dataStart.type),!0}catch(e){return youboraData.setCDNNodeData(!1),console.log("YouboraCommunication :: Akamai :: Error with header, disabling header check"+e),!1}},YouboraCommunication.prototype.sendStartL3=function(e,t,i,n,r,s,o){try{null!=o&&"undefined"!=o&&""!=o||(o=youboraData.getTransaction()),null!=s&&"undefined"!=s||(s=0),this.bandwidth.username=youboraData.getUsername();var a=new Date,l="?pluginVersion="+this.pluginVersion+"&pingTime="+this.pamPingTime/1e3+"&totalBytes="+e+"&referer="+encodeURIComponent(t)+"&user="+this.bandwidth.username+"&properties="+encodeURIComponent(JSON.stringify(youboraData.getProperties()))+"&live="+n+"&transcode="+o+"&system="+this.system+"&resource="+encodeURIComponent(r)+"&duration="+s;if(l+=this.getExtraParamsUrl(youboraData.getExtraParams()),1==youboraData.cdn_node_data&&this.fastDataValid&&(this.l3dataStart.host==this.l3dataPing.host?l+="&nodeHost="+this.l3dataPing.host+"&nodeType="+this.l3dataStart.type:l+="&nodeHost="+this.l3dataPing.host+"&nodeType="+this.l3dataPing.type),youboraData.isBalanced?l+="&isBalanced=1":l+="&isBalanced=0",youboraData.hashTitle?l+="&hashTitle=true":l+="&hashTitle=false",""!=youboraData.getCDN()&&(l+="&cdn="+youboraData.getCDN()),""!=youboraData.getISP()&&(l+="&isp="+youboraData.getISP()),""!=youboraData.getIP()&&(l+="&ip="+youboraData.getIP()),l+="&isResumed="+this.wasResumed,this.canSendEvents?this.sendAnalytics(this.pamStartUrl,l,!1):this.addEventToQueue(YouboraCommunicationEvents.START,l),youboraData.getResumeEnabled()){var c=this;c.debug&&console.log("YouboraCommunication :: Resume :: Enabled"),this.sendPlayTimeStatus(),this.resumeInterval=setInterval(function(){c.sendPlayTimeStatus()},6e3)}this.startSent=!0,this.lastPingTime=a.getTime()}catch(e){this.debug&&console.log("YouboraCommunication :: sendStartL3 :: Error: "+e)}},YouboraCommunication.prototype.sendStart=function(i,n,r,s,o,a,l){if(1==youboraData.cdn_node_data&&this.fastDataValid)try{this.xmlHttp=new XMLHttpRequest,(this.xmlHttp.context=this).xmlHttp.addEventListener("load",function(e){try{var t=e.target.getResponseHeader("X-WR-DIAG").toString();this.context.parseL3Header(t,2)||this.context.debug&&console.log("YouboraCommunication :: Level3 :: Error parsing header"),this.context.sendStartL3(i,n,r,s,o,a,l)}catch(e){youboraData.setCDNNodeData(!1),this.debug&&console.log("YouboraCommunication :: Level3 :: Error with header, disabling header check")}},!0),this.xmlHttp.addEventListener("error",function(e){this.context.getAkamaiHeader(),this.context.sendStartL3(i,n,r,s,o,a,l)},!0),this.xmlHttp.open("HEAD",o,!0),this.xmlHttp.setRequestHeader("X-WR-DIAG","host"),this.xmlHttp.send()}catch(e){youboraData.setCDNNodeData(!1),this.debug&&console.log("YouboraCommunication :: Level3 :: Error with header, disabling header check")}else try{null!=l&&"undefined"!=l&&""!=l||(l=youboraData.getTransaction()),null!=a&&"undefined"!=a||(a=0),this.bandwidth.username=youboraData.getUsername();var e=new Date,t="?pluginVersion="+this.pluginVersion+"&pingTime="+this.pamPingTime/1e3+"&totalBytes="+i+"&referer="+encodeURIComponent(n)+"&user="+this.bandwidth.username+"&properties="+encodeURIComponent(JSON.stringify(youboraData.getProperties()))+"&live="+s+"&transcode="+l+"&system="+this.system+"&resource="+encodeURIComponent(o)+"&duration="+a;if(t+=this.getExtraParamsUrl(youboraData.getExtraParams()),youboraData.isBalanced?t+="&isBalanced=1":t+="&isBalanced=0",youboraData.hashTitle?t+="&hashTitle=true":t+="&hashTitle=false",""!=youboraData.getCDN()&&(t+="&cdn="+youboraData.getCDN()),""!=youboraData.getISP()&&(t+="&isp="+youboraData.getISP()),""!=youboraData.getIP()&&(t+="&ip="+youboraData.getIP()),t+="&isResumed="+this.wasResumed,this.canSendEvents?this.sendAnalytics(this.pamStartUrl,t,!1):this.addEventToQueue(YouboraCommunicationEvents.START,t),youboraData.getResumeEnabled()){var c=this;c.debug&&console.log("YouboraCommunication :: Resume :: Enabled"),this.sendPlayTimeStatus(),this.resumeInterval=setInterval(function(){c.sendPlayTimeStatus()},6e3)}this.startSent=!0,this.lastPingTime=e.getTime()}catch(e){this.debug&&console.log("YouboraCommunication :: sendStart :: Error: "+e)}},YouboraCommunication.prototype.sendError=function(e,t){try{if(void 0!==e&&0<=parseInt(e)){var i="?errorCode="+e+"&msg="+t;this.sendAnalytics(this.pamErrorUrl,i,!1)}else{i="?errorCode=9000&msg="+t;this.sendAnalytics(this.pamErrorUrl,i,!1)}}catch(e){this.debug&&console.log("YouboraCommunication :: Error Msg: "+e)}},YouboraCommunication.prototype.sendErrorWithParameters=function(e,t,i,n,r,s,o,a,l){try{(void 0===e||parseInt(e)<0)&&(e=9e3);var c="?errorCode="+e+"&msg="+t;null!=l&&"undefined"!=l||(l=youboraData.getTransaction()),null!=a&&"undefined"!=a||(a=0);new Date;c+="&pluginVersion="+this.pluginVersion+"&pingTime="+this.pamPingTime/1e3+"&totalBytes="+i+"&referer="+encodeURIComponent(n)+"&user="+this.bandwidth.username+"&properties="+encodeURIComponent(JSON.stringify(youboraData.getProperties()))+"&live="+s+"&transcode="+l+"&system="+this.system+"&resource="+encodeURIComponent(o)+"&duration="+a,c+=this.getExtraParamsUrl(youboraData.getExtraParams()),1==youboraData.cdn_node_data&&this.fastDataValid&&(this.l3dataStart.host==this.l3dataPing.host?c+="&nodeHost="+this.l3dataPing.host+"&nodeType="+this.l3dataStart.type:c+="&nodeHost="+this.l3dataPing.host+"&nodeType="+this.l3dataPing.type),youboraData.isBalanced?c+="&isBalanced=1":c+="&isBalanced=0",youboraData.hashTitle?c+="&hashTitle=true":c+="&hashTitle=false",""!=youboraData.getCDN()&&(c+="&cdn="+youboraData.getCDN()),""!=youboraData.getISP()&&(c+="&isp="+youboraData.getISP()),""!=youboraData.getIP()&&(c+="&ip="+youboraData.getIP()),this.sendAnalytics(this.pamErrorUrl,c,!1)}catch(e){this.debug&&console.log("YouboraCommunication :: Error Msg: "+e)}},YouboraCommunication.prototype.sendPingTotalBytes=function(e,t){try{if(0==this.startSent)return;0<t&&(this.currentTime=t);var i=new Date;0!=this.lastPingTime&&(this.diffTime=i.getTime()-this.lastPingTime),this.lastPingTime=i.getTime();var n="?diffTime="+this.diffTime+"&totalBytes="+e+"&pingTime="+this.pamPingTime/1e3+"&dataType=0&time="+t;1==youboraData.cdn_node_data&&this.fastDataValid&&0==this.l3IsNodeSend&&(this.l3dataStart.host==this.l3dataPing.host?n+="&nodeHost="+this.l3dataPing.host+"&nodeType="+this.l3dataStart.type:n+="&nodeHost="+this.l3dataPing.host+"&nodeType="+this.l3dataPing.type,this.l3IsNodeSend=!0),this.canSendEvents?this.sendAnalytics(this.pamPingUrl,n,!0):this.addEventToQueue(YouboraCommunicationEvents.PING,n)}catch(e){this.debug&&console.log("YouboraCommunication :: Error Msg: "+e)}},YouboraCommunication.prototype.sendPingTotalBitrate=function(e,t){try{if(0==this.startSent)return;0<t&&(this.currentTime=t);var i=new Date;0!=this.lastPingTime&&(this.diffTime=i.getTime()-this.lastPingTime),this.lastPingTime=i.getTime();var n="?diffTime="+this.diffTime+"&bitrate="+e+"&pingTime="+this.pamPingTime/1e3+"&time="+t;1==youboraData.cdn_node_data&&this.fastDataValid&&0==this.l3IsNodeSend&&(this.l3dataStart.host==this.l3dataPing.host?n+="&nodeHost="+this.l3dataPing.host+"&nodeType="+this.l3dataStart.type:n+="&nodeHost="+this.l3dataPing.host+"&nodeType="+this.l3dataPing.type,this.l3IsNodeSend=!0),this.canSendEvents?this.sendAnalytics(this.pamPingUrl,n,!0):this.addEventToQueue(YouboraCommunicationEvents.PING,n)}catch(e){this.debug&&console.log("YouboraCommunication :: Error Msg: "+e)}},YouboraCommunication.prototype.sendJoin=function(e,t){try{0<e&&(this.currentTime=e);var i="?eventTime="+e+"&time="+t;this.canSendEvents?this.sendAnalytics(this.pamJoinTimeUrl,i,!1):this.addEventToQueue(YouboraCommunicationEvents.JOIN,i)}catch(e){this.debug&&console.log("YouboraCommunication :: Error Msg: "+e)}},YouboraCommunication.prototype.sendBuffer=function(e,t){try{if(0==this.startSent)return;0<e&&(this.currentTime=e);try{e<10&&youboraData.getLive()&&(e=10)}catch(e){}var i="?time="+e+"&duration="+t;this.canSendEvents?this.sendAnalytics(this.pamBufferUnderrunUrl,i,!1):this.addEventToQueue(YouboraCommunicationEvents.BUFFER,i)}catch(e){this.debug&&console.log("YouboraCommunication :: Error Msg: "+e)}},YouboraCommunication.prototype.sendResume=function(){try{if(0==this.startSent)return;this.canSendEvents?this.sendAnalytics(this.pamResumeUrl,"",!1):this.addEventToQueue(YouboraCommunicationEvents.RESUME,"")}catch(e){this.debug&&console.log("YouboraCommunication :: Error Msg: "+e)}},YouboraCommunication.prototype.sendPause=function(){try{if(0==this.startSent)return;this.canSendEvents?this.sendAnalytics(this.pamPauseUrl,"",!1):this.addEventToQueue(YouboraCommunicationEvents.PAUSE,""),youboraData.getResumeEnabled()&&this.sendPlayTimeStatus()}catch(e){this.debug&&console.log("YouboraCommunication :: Error Msg: "+e)}},YouboraCommunication.prototype.sendStop=function(){try{if(0==this.startSent)return;this.currentTime=0,youboraData.getResumeEnabled()&&this.sendPlayTimeStatus(),clearInterval(this.resumeInterval);var e="?diffTime="+this.diffTime;this.canSendEvents?this.sendAnalytics(this.pamStopUrl,e,!1):this.addEventToQueue(YouboraCommunicationEvents.STOP,e),this.reset()}catch(e){this.debug&&console.log("YouboraCommunication :: Error Msg: "+e)}},YouboraCommunication.prototype.sendStopResumeSafe=function(){try{if(0==this.startSent)return;clearInterval(this.resumeInterval);var e="?diffTime="+this.diffTime;this.canSendEvents?this.sendAnalytics(this.pamStopUrl,e,!1):this.addEventToQueue(YouboraCommunicationEvents.STOP,e),this.reset()}catch(e){this.debug&&console.log("YouboraCommunication :: Error Msg: "+e)}},YouboraCommunication.prototype.addEventToQueue=function(e,t){try{var i=new YouboraCommunicationURL(e,t);this.eventQueue.push(i)}catch(e){this.debug&&console.log("YouboraCommunication :: Error Msg: "+e)}},YouboraCommunication.prototype.init=function(){try{this.xmlHttp=new XMLHttpRequest,(this.xmlHttp.context=this).xmlHttp.addEventListener("load",function(e){this.context.loadAnalytics(e)},!1),1==youboraData.getHttpSecure()&&(this.service=this.protocol+this.service.split("//")[1]);var e=this.service+"/data?system="+this.system+"&pluginVersion="+this.pluginVersion+"&targetDevice="+this.targetDevice+"&outputformat="+this.outputFormat;1==youboraData.getNqsDebugServiceEnabled()&&(e+="&nqsDebugServiceEnabled=true"),this.xmlHttp.open("GET",e,!1),this.xmlHttp.send(),this.debug&&console.log("YouboraCommunication :: HTTP Fastdata Request :: "+e)}catch(e){this.debug&&console.log("YouboraCommunication :: Error Msg: "+e)}},YouboraCommunication.prototype.getLevel3Node=function(e){this.xmlHttp=new XMLHttpRequest,(this.xmlHttp.context=this).xmlHttp.addEventListener("load",function(e){this.context.loadAnalytics(e)},!1);var t=this.service+"/data?system="+this.system+"&pluginVersion="+this.pluginVersion+"&targetDevice="+this.targetDevice+"&outputformat="+this.outputFormat;this.xmlHttp.open("GET",t,!0),this.xmlHttp.send()},YouboraCommunication.prototype.checkConcurrencyWork=function(){try{var t=this,e=youboraData.getConcurrencyCode(),i=youboraData.getAccountCode(),n=youboraData.getConcurrencyService(),r=youboraData.getConcurrencySessionId(),s=youboraData.getConcurrencyMaxCount(),o=youboraData.getConcurrencyIpMode(),a="";if(n=this.protocol+n.split("//")[1],youboraData.getConcurrencyEnabled()){if(o){var l=this;this.xmlHttp=new XMLHttpRequest,this.xmlHttp.addEventListener("load",function(e){l.validateConcurrencyResponse(e)},!1),a=n+"?concurrencyCode="+e+"&accountCode="+i+"&concurrencyMaxCount="+s+"&random="+Math.random(),this.xmlHttp.open("GET",a,!0),this.xmlHttp.send()}else{l=this;this.xmlHttp=new XMLHttpRequest,this.xmlHttp.addEventListener("load",function(e){l.validateConcurrencyResponse(e)},!1),a=n+"?concurrencyCode="+e+"&accountCode="+i+"&concurrencySessionId="+r+"&concurrencyMaxCount="+s+"&random="+Math.random(),this.xmlHttp.open("GET",a,!0),this.xmlHttp.send()}t.debug&&console.log("YouboraCommunication :: HTTP Concurrency Request :: "+a)}else t.debug&&console.log("YouboraCommunication :: HTTP Concurrency Request :: "+a)}catch(e){t.debug&&console.log("YouboraCommunication :: startConcurrencyWork :: Disabled in data.")}},YouboraCommunication.prototype.validateConcurrencyResponse=function(e){try{if(4==e.target.readyState){var t=this,i=e.target.response;if("1"==i){this.sendError(14e3,"CC_KICK");var n=youboraData.getConcurrencyRedirectUrl();"function"==typeof n?(t.debug&&console.log("YouboraCommunication :: Concurrency :: Executed function"),n()):(t.debug&&console.log("YouboraCommunication :: Concurrency :: 1 :: Redirecting to: "+n),window.location=n)}else"0"==i?t.debug&&console.log("YouboraCommunication :: Concurrency :: 0 :: Continue..."):(t.debug&&console.log("YouboraCommunication :: Concurrency :: Empty response... stoping validation."),clearInterval(this.concurrencyTimer))}}catch(e){t.debug&&console.log("YouboraCommunication :: validateConcurrencyResponse :: Error: "+e)}},YouboraCommunication.prototype.enableConcurrency=function(){try{youboraData.setConcurrencyEnabled(!0);var e=this;clearInterval(this.concurrencyTimer),this.concurrencyTimer=setInterval(function(){e.checkConcurrencyWork()},1e4),this.checkConcurrencyWork(),this.debug&&console.log("YouboraCommunication :: enableConcurrency :: Concurrency is now enabled")}catch(e){clearInterval(this.resumeInterval),this.debug&&console.log("YouboraCommunication :: enableConcurrency :: Error: "+error)}},YouboraCommunication.prototype.disableConcurrency=function(){try{youboraData.setConcurrencyEnabled(!1),clearInterval(this.concurrencyTimer),this.debug&&console.log("YouboraCommunication :: disableConcurrency :: Concurrency is now disabled")}catch(e){clearInterval(this.resumeInterval),this.debug&&console.log("YouboraCommunication :: disableConcurrency :: Error: "+error)}},YouboraCommunication.prototype.loadAnalytics=function(e){var t=this;try{if(4==e.target.readyState){t.debug&&console.log("YouboraCommunication :: Loaded XML FastData");var i=e.target.responseXML;try{var n=i.getElementsByTagName("h")[0].childNodes[0].nodeValue}catch(e){this.debug&&console.log("YouboraCommunication :: loadAnalytics :: Invalid Fast-Data Response!")}null!=n&&""!=n&&(this.pamBufferUnderrunUrl=this.protocol+n+"/bufferUnderrun",this.pamJoinTimeUrl=this.protocol+n+"/joinTime",this.pamStartUrl=this.protocol+n+"/start",this.pamStopUrl=this.protocol+n+"/stop",this.pamPauseUrl=this.protocol+n+"/pause",this.pamResumeUrl=this.protocol+n+"/resume",this.pamPingUrl=this.protocol+n+"/ping",this.pamErrorUrl=this.protocol+n+"/error");try{this.pamCode=i.getElementsByTagName("c")[0].childNodes[0].nodeValue,this.pamCodeOrig=this.pamCode,this.pamPingTime=1e3*i.getElementsByTagName("pt")[0].childNodes[0].nodeValue,this.isXMLReceived=!0,this.enableAnalytics=!0,t.debug&&console.log("YouboraCommunication :: Mandatory :: Analytics Enabled")}catch(e){this.enableAnalytics=!1,t.debug&&console.log("YouboraCommunication :: Mandatory :: Analytics Disabled")}try{this.enableBalancer=i.getElementsByTagName("b")[0].childNodes[0].nodeValue,1==this.enableBalancer?(this.enableBalancer=!0,t.debug&&console.log("YouboraCommunication :: Mandatory :: Balancer Enabled")):(this.enableBalancer=!1,t.debug&&console.log("YouboraCommunication :: Mandatory :: Balancer Disabled"))}catch(e){t.debug&&console.log("YouboraCommunication :: Mandatory :: Balancer Disabled"),this.enableBalancer=!1}youboraData.enableAnalytics&&(this.canSendEvents=!0),null!=n&&""!=n&&null!=this.pamCode&&""!=this.pamCode&&(this.fastDataValid=!0),this.sendEventsFromQueue();try{t.debug=i.getElementsByTagName("db")[0].childNodes[0].nodeValue}catch(e){}try{t.debugHost=i.getElementsByTagName("dh")[0].childNodes[0].nodeValue}catch(e){t.debugHost=""}0<t.debugHost.length&&(t.debug&&console.log("YouboraCommunication :: replaceConsoleEvents :: Binding to: "+this.debugHost),this.replaceConsoleEvents(),youboraData.setDebug(!0)),youboraData.cdn_node_data&&this.fastDataValid&&this.getLevel3Header(),youboraData.concurrencyProperties.enabled&&this.fastDataValid&&this.checkConcurrencyWork()}}catch(e){t.debug&&console.log("YouboraCommunication :: loadAnalytics :: Error: "+e)}},YouboraCommunication.prototype.cPing=function(){try{this.xmlHttp=new XMLHttpRequest,(this.xmlHttp.context=this).xmlHttp.addEventListener("load",function(e){this.context.loadAnalytics(e)},!1);var e=this.service+"/data?system="+this.system+"&pluginVersion="+this.pluginVersion+"&targetDevice="+this.targetDevice+"&outputformat="+this.outputFormat;this.xmlHttp.open("GET",e,!0),this.xmlHttp.send(),this.debug&&console.log("YouboraCommunication :: HTTP Request :: "+e)}catch(e){this.debug&&console.log("YouboraCommunication :: cPing :: Erro: "+e)}},YouboraCommunication.prototype.replaceConsoleEvents=function(){try{var r=this;console={log:function(e){try{var t,i=new Date,n="["+i.getHours()+":"+i.getMinutes()+":"+i.getSeconds()+"]";(t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).open("GET",r.debugHost+encodeURIComponent(n)+" |> "+e),t.send()}catch(e){}}},this.debug&&console.log("YouboraCommunication :: replaceConsoleEvents :: Done ::")}catch(e){this.debug&&console.log("YouboraCommunication :: replaceConsoleEvents :: Error: "+e)}},YouboraCommunication.prototype.sendEventsFromQueue=function(){try{if(1==this.canSendEvents)for(var e,t,i=this.eventQueue.pop();null!=i;)(t=i.getEventType())==YouboraCommunicationEvents.START?e=this.pamStartUrl:t==YouboraCommunicationEvents.JOIN?e=this.pamJoinTimeUrl:t==YouboraCommunicationEvents.BUFFER?e=this.pamBufferUnderrunUrl:t==YouboraCommunicationEvents.PAUSE?e=this.pamPauseUrl:t==YouboraCommunicationEvents.RESUME?e=this.pamResumeUrl:t==YouboraCommunicationEvents.PING?e=this.pamPingUrl:t==YouboraCommunicationEvents.STOP?e=this.pamStopUrl:t==YouboraCommunicationEvents.ERROR&&(e=this.pamErrorUrl),null!=e&&this.sendAnalytics(e,i.getParams(),!1),i=this.eventQueue.pop()}catch(e){this.debug&&console.log("YouboraCommunication :: Error Msg: "+e)}},YouboraCommunication.prototype.getBalancerUrls=function(e,t){var a=this;if(this.balancedUrlsCallback=t,youboraData.enableBalancer){if(void 0!==youboraData){var i=youboraData.getBalanceService(),n=youboraData.getBalanceType(),r=youboraData.getBalanceZoneCode(),s=youboraData.getBalanceOriginCode(),o=youboraData.getAccountCode(),l=(youboraData.getBalanceToken(),this.pluginVersion,youboraData.getBalanceNVA()),c=youboraData.getBalanceNVB(),u=youboraData.getLive();try{this.xmlHttp=new XMLHttpRequest;var d=i+"?type="+n+"&systemcode="+o+"&zonecode="+r+"&session="+(this.xmlHttp.context=this).pamCode+"&origincode="+s+"&resource="+encodeURIComponent(e)+"&niceNva="+l+"&niceNvb="+c+"&live="+u+"&token="+youboraData.getBalanceToken();try{1==u&&(d+="&live=true")}catch(e){}this.xmlHttp.addEventListener("load",function(e){var t=e.target.response.toString(),i="",n=!1;try{i=JSON.parse(t)}catch(e){n=!0}if(0==n)try{var r,s=[],o=0;for(r in t)try{o++,s[r]=i[o].URL}catch(e){}a.balancedUrlsCallback(s)}catch(e){a.balancedUrlsCallback(!1)}else a.balancedUrlsCallback(!1)},!1),this.xmlHttp.open("GET",d,!0),this.xmlHttp.send(),a.debug&&console.log("YouboraCommunication :: HTTP GetBalancerUrls Request :: "+d)}catch(e){a.debug&&console.log("YouboraCommunication :: getBalancerUrls :: Error: "+e)}}}else a.balancedUrlsCallback(!1)},YouboraCommunication.prototype.getBalancedResource=function(e,t,i){if(youboraData.enableBalancer){this.balancedCallback=t;var r=this,n=youboraData.getBalanceService(),s=youboraData.getBalanceType(),o=youboraData.getBalanceZoneCode(),a=youboraData.getBalanceOriginCode(),l=youboraData.getAccountCode(),c=(youboraData.getBalanceToken(),this.pluginVersion,youboraData.getBalanceNVA()),u=youboraData.getBalanceNVB(),d=youboraData.getLive();this.resourcePath=e;try{this.xmlHttp=new XMLHttpRequest;var h=n+"?type="+s+"&systemcode="+l+"&session="+(this.xmlHttp.context=this).pamCode+"&zonecode="+o+"&origincode="+a+"&resource="+encodeURIComponent(e)+"&niceNva="+c+"&niceNvb="+u+"&token="+youboraData.getBalanceToken();try{1==d&&(h+="&live=true")}catch(e){}this.xmlHttp.addEventListener("load",function(e){var t=e.target.response.toString(),i="",n=!1;try{i=JSON.parse(t)}catch(e){r.debug,n=!0}0==n?(youboraData.extraParams.param13=!0,r.balancedCallback(i)):r.balancedCallback(!1)},!1),this.xmlHttp.open("GET",h,!0),this.xmlHttp.send(),r.debug&&console.log("YouboraCommunication :: HTTP Balance Request :: "+h)}catch(e){r.debug&&console.log("YouboraCommunication :: getBalancedResource :: Error: "+e)}}else r.balancedCallback(!1)},YouboraCommunication.prototype.validateBalanceResponse=function(e){try{e.target.readyState}catch(e){this.debug&&console.log("YouboraCommunication :: validateBalanceResponse :: Error: "+e)}},YouboraCommunication.prototype.sendAnalytics=function(e,t,i){try{if(this.canSendEvents&&this.fastDataValid){this.xmlHttp=new XMLHttpRequest,this.xmlHttp.context=this,i?this.xmlHttp.addEventListener("load",function(e){this.context.parseAnalyticsResponse(e)},!1):this.xmlHttp.addEventListener("load",function(e){this.context.parseAnalyticsResponse(e)},!1),this.xmlHttp.addEventListener("error",function(){this.context.sendAnalyticsFailed()},!1);var n="";n=""!=t?e+t+"&code="+this.pamCode+"&random="+Math.random():e+"?code="+this.pamCode+"&random="+Math.random(),this.debug&&console.log("YouboraCommunication :: HTTP Request :: "+n),this.xmlHttp.open("GET",n,!0),this.xmlHttp.send()}}catch(e){this.debug&&console.log("YouboraCommunication :: Error Msg: "+e)}},YouboraCommunication.prototype.parseAnalyticsResponse=function(e){try{e.target.readyState}catch(e){this.debug&&console.log("YouboraCommunication :: parseAnalyticsResponse :: Error: "+e)}},YouboraCommunication.prototype.sendAnalyticsFailed=function(){try{this.debug&&console.log("YouboraCommunication :: Failed communication with nQs Service")}catch(e){this.debug&&console.log("YouboraCommunication :: sendAnalyticsFailed :: Error: "+e)}},YouboraCommunication.prototype.updateCode=function(){try{this.pamCodeCounter++,this.pamCode=this.pamCodeOrig+"_"+this.pamCodeCounter}catch(e){this.debug&&console.log("YouboraCommunication :: updateCode :: Error: "+e)}},YouboraCommunication.prototype.reset=function(){try{this.lastPingTime=0,this.diffTime=0,this.startSent=!1,this.updateCode()}catch(e){this.debug&&console.log("YouboraCommunication :: reset Error: "+e)}},YouboraCommunication.prototype.getResourcePath=function(e){var t=e.split("//")[1],i=t.indexOf("/");return t.substring(i,e.length)},YouboraCommunication.prototype.getExtraParamsUrl=function(e){var t="";return null!=e&&(null!=e.extraparam1&&(t+="&param1="+e.extraparam1),null!=e.extraparam2&&(t+="&param2="+e.extraparam2),null!=e.extraparam3&&(t+="&param3="+e.extraparam3),null!=e.extraparam4&&(t+="&param4="+e.extraparam4),null!=e.extraparam5&&(t+="&param5="+e.extraparam5),null!=e.extraparam6&&(t+="&param6="+e.extraparam6),null!=e.extraparam7&&(t+="&param7="+e.extraparam7),null!=e.extraparam8&&(t+="&param8="+e.extraparam8),null!=e.extraparam9&&(t+="&param9="+e.extraparam9),null!=e.extraparam10&&(t+="&param10="+e.extraparam10)),t},YouboraCommunicationURL.prototype.getParams=function(){return this.params},YouboraCommunicationURL.prototype.getEventType=function(){return this.eventType},void 0===console)var console=function(){};var YouboraCommunicationEvents={START:0,JOIN:1,BUFFER:2,PING:3,PAUSE:4,RESUME:5,STOP:6,ERROR:7};return{api:YouboraCommunication,data:youboraData}}),define("rofl/lib/analytics/npaw/npaw-data",[],function(){"use strict";var e=null;function t(){try{this.debug=!1,this.accountCode="demosite",this.service="http://nqs.nice264.com",this.username="default",this.mediaResource="",this.transaction="",this.live=!1,this.contentId="",this.isBalanced=!1,this.properties={filename:"",content_id:"",content_metadata:{title:"",genre:"",language:"",year:"",cast:"",director:"",owner:"",duration:"",parental:"",price:"",rating:"",audioType:"",audioChannels:""},transaction_type:"",quality:"",content_type:"",device:{manufacturer:"",type:"",year:"",firmware:""}},this.concurrencySessionId=Math.random(),this.concurrencyProperties={enabled:!1,concurrencyService:"http://pc.youbora.com/cping/",concurrencyCode:"",concurrencyMaxCount:0,concurrencyRedirectUrl:"",concurrencyIpMode:!1},this.resumeProperties={resumeEnabled:!1,resumeService:"http://pc.youbora.com/resume/",playTimeService:"http://pc.youbora.com/playTime/",resumeCallback:function(){console.log("YouboraData :: Default Resume Callback")}},this.balanceProperties={balanceType:"balance",enabled:!1,service:"http://smartswitch.youbora.com/",zoneCode:"",originCode:"",niceNVA:"",niceNVB:"",token:"",niceTokenIp:null,live:!1},this.extraParams={extraparam1:void 0,extraparam2:void 0,extraparam3:void 0,extraparam4:void 0,extraparam5:void 0,extraparam6:void 0,extraparam7:void 0,extraparam8:void 0,extraparam9:void 0,extraparam10:void 0},this.jwplayerOverlayText="",this.jwplayerOverlayEnabled=!1,this.jwplayerOverlayTime=9e4,this.jwplayerOverlayDuration=5e3,this.jwplayerOverlayTextColor=void 0,this.jwplayerOverlayBackgroundColor=void 0,this.jwplayerStreamMode=!1,this.silverlightMediaElementName=void 0,this.silverlightPlayer=void 0,this.enableAnalytics=!0,this.enableBalancer=!0,this.cdn_node_data=!1,this.hashTitle=!0,this.text_cdn="",this.text_ip="",this.text_isp="",this.nqsDebugServiceEnabled=!1,this.httpSecure=!1,this.init()}catch(e){this.debug&&console.log("YouboraData :: Error [Function] :: "+err)}}return t.prototype.init=function(){try{return this.debug&&console.log("YouboraData :: Initialized"),this.collectParams(),!0}catch(e){this.debug&&console.log("YouboraData :: Init Error: "+e)}},t.prototype.collectParams=function(){try{for(var e=document.getElementsByTagName("script"),t=0,i=0;i<e.length;i++)-1!=e[i].src.indexOf("youbora-data")&&(t=i);var n=e[t].src.replace(/^[^\?]+\??/,"").split(/[;&]/);for(i=0;i<n.length;i++){var r=n[i].split("=");if(r&&2==r.length){var s=unescape(r[0]),o=unescape(r[1]);"true"==(o=o.replace(/\+/g," "))&&(o=!0),"false"==o&&(o=!1),"debug"==s&&this.setDebug(o),"accountCode"==s&&this.setAccountCode(o),"service"==s&&this.setService(o),"username"==s&&this.setUsername(o),"mediaResource"==s&&this.setMediaResource(o),"transaction"==s&&this.setTransaction(o),"live"==s&&this.setLive(o),"contentId"==s&&this.setContentId(o),"hashTitle"==s&&this.setHashTitle(o),"cdn"==s&&this.setCDN(o),"isp"==s&&this.setISP(o),"ip"==s&&this.setIP(o),"properties"==s&&this.setProperties(o),"propertyFileName"==s&&this.setPropertyFileName(o),"propertyContentId"==s&&this.setPropertyContentId(o),"propertyTransactionType"==s&&this.setPropertyTransactionType(o),"propertyQuality"==s&&this.setPropertyQuality(o),"propertyContentType"==s&&this.setPropertyContentType(o),"propertyDeviceManufacturer"==s&&this.setPropertyDeviceManufacturer(o),"propertyDeviceType"==s&&this.setPropertyDeviceType(o),"propertyDeviceYear"==s&&this.setPropertyDeviceYear(o),"propertyDeviceFirmware"==s&&this.setPropertyDeviceFirmware(o),"propertyMetaTitle"==s&&this.setPropertyMetaTitle(o),"propertyMetaGenre"==s&&this.setPropertyMetaGenre(o),"propertyMetaLanguage"==s&&this.setPropertyMetaLanguage(o),"propertyMetaYear"==s&&this.setPropertyMetaYear(o),"propertyMetaCast"==s&&this.setPropertyMetaCast(o),"propertyMetaDirector"==s&&this.setPropertyMetaDirector(o),"propertyMetaOwner"==s&&this.setPropertyMetaOwner(o),"propertyMetaDuration"==s&&this.setPropertyMetaDuration(o),"propertyMetaParental"==s&&this.setPropertyMetaParental(o),"propertyMetaPrice"==s&&this.setPropertyMetaPrice(o),"propertyMetaRating"==s&&this.setPropertyMetaRating(o),"propertyMetaAudioType"==s&&this.setPropertyMetaAudioType(o),"propertyMetaAudioChannels"==s&&this.setPropertyMetaAudioChannels(o),"concurrencyProperties"==s&&this.setConcurrencyProperties(o),"concurrencyEnabled"==s&&this.setConcurrencyEnabled(o),"concurrencyCode"==s&&this.setConcurrencyCode(o),"concurrencyService"==s&&this.setConcurrencyService(o),"concurrencyMaxCount"==s&&this.setConcurrencyMaxCount(o),"concurrencyRedirectUrl"==s&&this.setConcurrencyRedirectUrl(o),"concurrencyIpMode"==s&&this.setConcurrencyIpMode(o),"resumeProperties"==s&&this.setResumeProperties(o),"resumeEnabled"==s&&this.setResumeEnabled(o),"resumeCallback"==s&&this.setResumeCallback(o),"resumeService"==s&&this.setResumeService(o),"playTimeService"==s&&this.setPlayTimeService(o),"balanceProperties"==s&&this.setBalanceProperties(o),"balanceEnabled"==s&&this.setBalanceEnabled(o),"balanceType"==s&&this.setBalanceType(o),"balanceService"==s&&this.setBalanceService(o),"balanceZoneCode"==s&&this.setBalanceZoneCode(o),"balanceOriginCode"==s&&this.setBalanceOriginCode(o),"balanceNVA"==s&&this.setBalanceNVA(o),"balanceNVB"==s&&this.setBalanceNVB(o),"balanceToken"==s&&this.setBalanceToken(o),"balanceLive"==s&&this.setBalanceLive(o),"extraparam1"==s&&this.setExtraParam(1,o),"extraparam2"==s&&this.setExtraParam(2,o),"extraparam3"==s&&this.setExtraParam(3,o),"extraparam4"==s&&this.setExtraParam(4,o),"extraparam5"==s&&this.setExtraParam(5,o),"extraparam6"==s&&this.setExtraParam(6,o),"extraparam7"==s&&this.setExtraParam(7,o),"extraparam8"==s&&this.setExtraParam(8,o),"extraparam9"==s&&this.setExtraParam(9,o),"extraparam10"==s&&this.setExtraParam(10,o),"jwplayerOverlayText"==s&&this.setJwplayerOverlayText(o),"jwplayerOverlayEnabled"==s&&this.setJwplayerOverlayEnabled(o),"jwplayerOverlayTime"==s&&this.setJwplayerOverlayTime(o),"jwplayerOverlayDuration"==s&&this.setJwplayerOverlayDuration(o),"cdnNodeData"==s&&this.setCDNNodeData(o),"nqsDebugServiceEnabled"==s&&this.setNqsDebugServiceEnabled(o),"httpSecure"==s&&this.setHttpSecure(o),this.debug&&console.log("YouboraData :: collectParams :: "+s+" = "+o)}}}catch(e){this.debug&&console.log("YouboraData :: collectParams :: Error :: "+e)}},t.prototype.setAccountCode=function(e){try{void 0!==e&&1<e.length&&(this.accountCode=e)}catch(e){this.debug&&console.log("YouboraData :: Error [setAccountCode] :: "+e)}},t.prototype.getAccountCode=function(){try{return this.accountCode}catch(e){this.debug&&console.log("YouboraData :: Error [getAccountCode] :: "+e)}},t.prototype.setService=function(e){try{void 0!==e&&1<e.length&&(this.service=e)}catch(e){this.debug&&console.log("YouboraData :: Error [setService] :: "+e)}},t.prototype.getService=function(){try{return this.service}catch(e){this.debug&&console.log("YouboraData :: Error [getService] :: "+e)}},t.prototype.setMediaResource=function(e){try{void 0!==e&&1<e.length&&(this.mediaResource=e)}catch(e){this.debug&&console.log("YouboraData :: Error [setMediaResource] :: "+e)}},t.prototype.getMediaResource=function(){try{return this.mediaResource}catch(e){this.debug&&console.log("YouboraData :: Error [getMediaResource] :: "+e)}},t.prototype.setTransaction=function(e){try{void 0!==e&&1<e.length&&(this.transaction=e)}catch(e){this.debug&&console.log("YouboraData :: Error [setTransaction] :: "+e)}},t.prototype.getTransaction=function(){try{return this.transaction}catch(e){this.debug&&console.log("YouboraData :: Error [getTransaction] :: "+error)}},t.prototype.setUsername=function(e){try{void 0!==e&&1<e.length&&(this.username=e)}catch(e){this.debug&&console.log("YouboraData :: Error [setUserName] :: "+e)}},t.prototype.getUsername=function(){try{return this.username}catch(e){this.debug&&console.log("YouboraData :: Error [getUserName] :: "+error)}},t.prototype.setLive=function(e){try{void 0===e||1!=e&&0!=e||(this.live=e)}catch(e){this.debug&&console.log("YouboraData :: Error [setLive] :: "+e)}},t.prototype.getLive=function(){try{return this.live}catch(e){this.debug&&console.log("YouboraData :: Error [getLive] :: "+e)}},t.prototype.setResume=function(e){try{void 0===e||1!=e&&0!=e||(this.resume=e)}catch(e){this.debug&&console.log("YouboraData :: Error [setResume] :: "+e)}},t.prototype.getResume=function(){try{return this.resume}catch(e){this.debug&&console.log("YouboraData :: Error [getResume] :: "+e)}},t.prototype.setContentId=function(e){try{void 0!==e&&1<e.length&&(this.contentId=e)}catch(e){this.debug&&console.log("YouboraData :: Error [setContentId] :: "+e)}},t.prototype.getContentId=function(){try{return this.contentId}catch(e){this.debug&&console.log("YouboraData :: Error [getContentId] :: "+e)}},t.prototype.setProperties=function(e){try{"string"==typeof e&&(e=JSON.parse(e)),"object"==typeof e&&(this.properties=e)}catch(e){this.debug&&console.log("YouboraData :: Error [setProperties] :: "+e)}},t.prototype.getProperties=function(){try{return this.properties}catch(e){this.debug&&console.log("YouboraData :: Error [getProperties] :: "+e)}},t.prototype.getPropertiesString=function(){try{return this.properties}catch(e){this.debug&&console.log("YouboraData :: Error [getProperties] :: "+e)}},t.prototype.setPropertyFileName=function(e){try{this.properties.filename=e}catch(e){this.debug&&console.log("YouboraData :: Error [setPropertyFileName] :: "+e)}},t.prototype.getPropertyFileName=function(){try{return this.properties.filename}catch(e){this.debug&&console.log("YouboraData :: Error [getPropertyFileName] :: "+e)}},t.prototype.setPropertyContentId=function(e){try{this.properties.content_id=e}catch(e){this.debug&&console.log("YouboraData :: Error [setPropertyContentId] :: "+e)}},t.prototype.getPropertyContentId=function(){try{return this.properties.content_id}catch(e){this.debug&&console.log("YouboraData :: Error [getPropertyContentId] :: "+e)}},t.prototype.setPropertyTransactionType=function(e){try{this.properties.transaction_type=e}catch(e){this.debug&&console.log("YouboraData :: Error [setPropertyTransactionType] :: "+e)}},t.prototype.getPropertyTransactionType=function(){try{return this.properties.transaction_type}catch(e){this.debug&&console.log("YouboraData :: Error [getPropertyTransactionType] :: "+e)}},t.prototype.setPropertyQuality=function(e){try{this.properties.quality=e}catch(e){this.debug&&console.log("YouboraData :: Error [setPropertyQuality] :: "+e)}},t.prototype.getPropertyQuality=function(){try{return this.properties.transaction_type}catch(e){this.debug&&console.log("YouboraData :: Error [getPropertyQuality] :: "+e)}},t.prototype.setPropertyContentType=function(e){try{this.properties.content_type=e}catch(e){this.debug&&console.log("YouboraData :: Error [setPropertyContentType] :: "+e)}},t.prototype.getPropertyContentType=function(){try{return this.properties.transaction_type}catch(e){this.debug&&console.log("YouboraData :: Error [getPropertyContentType] :: "+e)}},t.prototype.setPropertyDeviceManufacturer=function(e){try{this.properties.device.manufacturer=e}catch(e){this.debug&&console.log("YouboraData :: Error [setPropertyDeviceManufacturer] :: "+e)}},t.prototype.getPropertyDeviceManufacturer=function(){try{return this.properties.device.manufacturer}catch(e){this.debug&&console.log("YouboraData :: Error [getPropertyDeviceManufacturer] :: "+e)}},t.prototype.setPropertyDeviceType=function(e){try{this.properties.device.type=e}catch(e){this.debug&&console.log("YouboraData :: Error [setPropertyDeviceType] :: "+e)}},t.prototype.getPropertyDeviceType=function(){try{return this.properties.device.type}catch(e){this.debug&&console.log("YouboraData :: Error [getPropertyDeviceType] :: "+e)}},t.prototype.setPropertyDeviceYear=function(e){try{this.properties.device.year=e}catch(e){this.debug&&console.log("YouboraData :: Error [setPropertyDeviceYear] :: "+e)}},t.prototype.getPropertyDeviceYear=function(){try{return this.properties.device.year}catch(e){this.debug&&console.log("YouboraData :: Error [getPropertyDeviceYear] :: "+e)}},t.prototype.setPropertyDeviceFirmware=function(e){try{this.properties.device.firmware=e}catch(e){this.debug&&console.log("YouboraData :: Error [setPropertyDeviceFirmware] :: "+e)}},t.prototype.getPropertyDeviceFirmware=function(){try{return this.properties.device.firmware}catch(e){this.debug&&console.log("YouboraData :: Error [getPropertyDeviceFirmware] :: "+e)}},t.prototype.setPropertyMetaTitle=function(e){try{this.properties.content_metadata.title=e}catch(e){this.debug&&console.log("YouboraData :: Error [setPropertyMetaTitle] :: "+e)}},t.prototype.getPropertyMetaTitle=function(){try{return this.properties.content_metadata.title}catch(e){this.debug&&console.log("YouboraData :: Error [getPropertyMetaTitle] :: "+e)}},t.prototype.setPropertyMetaGenre=function(e){try{this.properties.content_metadata.genre=e}catch(e){this.debug&&console.log("YouboraData :: Error [setPropertyMetaGenre] :: "+e)}},t.prototype.getPropertyMetaGenre=function(){try{return this.properties.content_metadata.genre}catch(e){this.debug&&console.log("YouboraData :: Error [getPropertyMetaGenre] :: "+e)}},t.prototype.setPropertyMetaLanguage=function(e){try{this.properties.content_metadata.language=e}catch(e){this.debug&&console.log("YouboraData :: Error [setPropertyMetaLanguage] :: "+e)}},t.prototype.getPropertyMetaLanguage=function(){try{return this.properties.content_metadata.language}catch(e){this.debug&&console.log("YouboraData :: Error [getPropertyMetaLanguage] :: "+e)}},t.prototype.setPropertyMetaYear=function(e){try{this.properties.content_metadata.year=e}catch(e){this.debug&&console.log("YouboraData :: Error [setPropertyMetaYear] :: "+e)}},t.prototype.getPropertyMetaYear=function(){try{return this.properties.content_metadata.year}catch(e){this.debug&&console.log("YouboraData :: Error [getPropertyMetaYear] :: "+e)}},t.prototype.setPropertyMetaCast=function(e){try{this.properties.content_metadata.cast=e}catch(e){this.debug&&console.log("YouboraData :: Error [setPropertyMetaCast] :: "+e)}},t.prototype.getPropertyMetaCast=function(){try{return this.properties.content_metadata.cast}catch(e){this.debug&&console.log("YouboraData :: Error [getPropertyMetaCast] :: "+e)}},t.prototype.setPropertyMetaDirector=function(e){try{this.properties.content_metadata.director=e}catch(e){this.debug&&console.log("YouboraData :: Error [setPropertyMetaDirector] :: "+e)}},t.prototype.getPropertyMetaDirector=function(){try{return this.properties.content_metadata.director}catch(e){this.debug&&console.log("YouboraData :: Error [getPropertyMetaDirector] :: "+e)}},t.prototype.setPropertyMetaOwner=function(e){try{this.properties.content_metadata.owner=e}catch(e){this.debug&&console.log("YouboraData :: Error [setPropertyMetaOwner] :: "+e)}},t.prototype.getPropertyMetaOwner=function(){try{return this.properties.content_metadata.owner}catch(e){this.debug&&console.log("YouboraData :: Error [getPropertyMetaOwner] :: "+e)}},t.prototype.setPropertyMetaDuration=function(e){try{this.properties.content_metadata.duration=e}catch(e){this.debug&&console.log("YouboraData :: Error [setPropertyMetaDuration] :: "+e)}},t.prototype.getPropertyMetaDuration=function(){try{return this.properties.content_metadata.duration}catch(e){this.debug&&console.log("YouboraData :: Error [getPropertyMetaDuration] :: "+e)}},t.prototype.setPropertyMetaParental=function(e){try{this.properties.content_metadata.parental=e}catch(e){this.debug&&console.log("YouboraData :: Error [setPropertyMetaParental] :: "+e)}},t.prototype.getPropertyMetaParental=function(){try{return this.properties.content_metadata.parental}catch(e){this.debug&&console.log("YouboraData :: Error [getPropertyMetaParental] :: "+e)}},t.prototype.setPropertyMetaPrice=function(e){try{this.properties.content_metadata.price=e}catch(e){this.debug&&console.log("YouboraData :: Error [setPropertyMetaPrice] :: "+e)}},t.prototype.getPropertyMetaPrice=function(){try{return this.properties.content_metadata.price}catch(e){this.debug&&console.log("YouboraData :: Error [getPropertyMetaPrice] :: "+e)}},t.prototype.setPropertyMetaRating=function(e){try{this.properties.content_metadata.rating=e}catch(e){this.debug&&console.log("YouboraData :: Error [setPropertyMetaRating] :: "+e)}},t.prototype.getPropertyMetaRating=function(){try{return this.properties.content_metadata.rating}catch(e){this.debug&&console.log("YouboraData :: Error [getPropertyMetaRating] :: "+e)}},t.prototype.setPropertyMetaAudioType=function(e){try{this.properties.content_metadata.audioType=e}catch(e){this.debug&&console.log("YouboraData :: Error [setPropertyMetaAudioType] :: "+e)}},t.prototype.getPropertyMetaAudioType=function(){try{return this.properties.content_metadata.audioType}catch(e){this.debug&&console.log("YouboraData :: Error [getPropertyMetaAudioType] :: "+e)}},t.prototype.setPropertyMetaAudioChannels=function(e){try{this.properties.content_metadata.audioChannels=e}catch(e){this.debug&&console.log("YouboraData :: Error [setPropertyMetaAudioChannels] :: "+e)}},t.prototype.getPropertyMetaAudioChannels=function(){try{return this.properties.content_metadata.audioChannels}catch(e){this.debug&&console.log("YouboraData :: Error [getPropertyMetaAudioChannels] :: "+e)}},t.prototype.setJwplayerOverlayText=function(e){try{this.jwplayerOverlayText=e}catch(e){this.debug&&console.log("YouboraData :: Error [setJwplayerOverlayText] :: "+e)}},t.prototype.getJwplayerOverlayText=function(){try{return this.jwplayerOverlayText}catch(e){this.debug&&console.log("YouboraData :: Error [getJwplayerOverlayText] :: "+e)}},t.prototype.setJwplayerOverlayEnabled=function(e){try{void 0===e||1!=e&&0!=e||(this.jwplayerOverlayEnabled=e)}catch(e){console.log("YouboraData :: Error [setJwplayerOverlayEnabled] :: "+err)}},t.prototype.getJwplayerOverlayEnabled=function(){try{return this.jwplayerOverlayEnabled}catch(e){this.debug&&console.log("YouboraData :: Error [getJwplayerOverlayEnabled] :: "+e)}},t.prototype.setJwplayerOverlayTime=function(e){try{this.jwplayerOverlayTime=e}catch(e){this.debug&&console.log("YouboraData :: Error [setJwplayerOverlayTime] :: "+e)}},t.prototype.getJwplayerOverlayTime=function(){try{return this.jwplayerOverlayTime}catch(e){this.debug&&console.log("YouboraData :: Error [getJwplayerOverlayTime] :: "+e)}},t.prototype.setJwplayerOverlayDuration=function(e){try{this.jwplayerOverlayDuration=e}catch(e){this.debug&&console.log("YouboraData :: Error [setJwplayerOverlayDuration] :: "+e)}},t.prototype.getJwplayerOverlayDuration=function(){try{return this.jwplayerOverlayDuration}catch(e){this.debug&&console.log("YouboraData :: Error [getJwplayerOverlayDuration] :: "+e)}},t.prototype.setJwplayerOverlayTextColor=function(e){try{this.jwplayerOverlayTextColor=e}catch(e){this.debug&&console.log("YouboraData :: Error [setJwplayerOverlayTextColor] :: "+e)}},t.prototype.getJwplayerOverlayTextColor=function(){try{return this.jwplayerOverlayTextColor}catch(e){this.debug&&console.log("YouboraData :: Error [getjwplayerOverlayTextColor] :: "+e)}},t.prototype.setJwplayerOverlayBackgroundColor=function(e){try{this.jwplayerOverlayBackgroundColor=e}catch(e){this.debug&&console.log("YouboraData :: Error [setJwplayerOverlayBackgroundColor] :: "+e)}},t.prototype.getJwplayerOverlayBackgroundColor=function(){try{return this.jwplayerOverlayBackgroundColor}catch(e){this.debug&&console.log("YouboraData :: Error [getJwplayerOverlayBackgroundColor] :: "+e)}},t.prototype.setJwplayerStreamMode=function(e){try{this.jwplayerStreamMode=e}catch(e){this.debug&&console.log("YouboraData :: Error [setJwplayerStreamMode] :: "+e)}},t.prototype.getJwplayerStreamMode=function(){try{return this.jwplayerStreamMode}catch(e){this.debug&&console.log("YouboraData :: Error [setJwplayerStreamMode] :: "+e)}},t.prototype.setConcurrencyProperties=function(e){try{"string"==typeof e&&(e=JSON.parse(e)),void 0!==e&&(this.concurrencyProperties.enabled=!0,this.concurrencyProperties=e)}catch(e){this.debug&&console.log("YouboraData :: Error [setConcurrencyProperties] :: "+e)}},t.prototype.getConcurrencyProperties=function(){try{return this.concurrencyProperties}catch(e){this.debug&&console.log("YouboraData :: Error [getConcurrencyProperties] :: "+e)}},t.prototype.setConcurrencyEnabled=function(e){try{this.concurrencyProperties.enabled=e}catch(e){this.debug&&console.log("YouboraData :: Error [setConcurrencyEnabled] :: "+error)}},t.prototype.getConcurrencyEnabled=function(){try{return this.concurrencyProperties.enabled}catch(e){this.debug&&console.log("YouboraData :: Error [getConcurrencyEnabled] :: "+e)}},t.prototype.setConcurrencyCode=function(e){try{this.concurrencyProperties.enabled=!0,this.concurrencyProperties.concurrencyCode=e}catch(e){this.debug&&console.log("YouboraData :: Error [setConcurrencyCode] :: "+error)}},t.prototype.getConcurrencyCode=function(){try{return this.concurrencyProperties.concurrencyCode}catch(e){this.debug&&console.log("YouboraData :: Error [getConcurrencyCode] :: "+e)}},t.prototype.setConcurrencyService=function(e){try{this.concurrencyProperties.enabled=!0,this.concurrencyProperties.concurrencyService=e}catch(e){this.debug&&console.log("YouboraData :: Error [setConcurrencyService] :: "+error)}},t.prototype.getConcurrencyService=function(){try{return this.concurrencyProperties.concurrencyService}catch(e){this.debug&&console.log("YouboraData :: Error [getConcurrencyService] :: "+e)}},t.prototype.getConcurrencySessionId=function(){try{return this.concurrencySessionId}catch(e){this.debug&&console.log("YouboraData :: Error [getConcurrencySessionId] :: "+e)}},t.prototype.setConcurrencyMaxCount=function(e){try{this.concurrencyProperties.enabled=!0,this.concurrencyProperties.concurrencyMaxCount=e}catch(e){this.debug&&console.log("YouboraData :: Error [setConcurrencyMaxCount] :: "+e)}},t.prototype.getConcurrencyMaxCount=function(){try{return this.concurrencyProperties.concurrencyMaxCount}catch(e){this.debug&&console.log("YouboraData :: Error [getConcurrencyMaxCount] :: "+e)}},t.prototype.setConcurrencyRedirectUrl=function(e){try{this.concurrencyProperties.enabled=!0,this.concurrencyProperties.concurrencyRedirectUrl=e}catch(e){this.debug&&console.log("YouboraData :: Error [setConcurrencyRedirectUrl] :: "+e)}},t.prototype.getConcurrencyRedirectUrl=function(){try{return this.concurrencyProperties.concurrencyRedirectUrl}catch(e){this.debug&&console.log("YouboraData :: Error [getConcurrencyRedirectUrl] :: "+e)}},t.prototype.setConcurrencyIpMode=function(e){try{this.concurrencyProperties.enabled=!0,this.concurrencyProperties.concurrencyIpMode=e}catch(e){this.debug&&console.log("YouboraData :: Error [setConcurrencyIpMode] :: "+e)}},t.prototype.getConcurrencyIpMode=function(){try{return this.concurrencyProperties.concurrencyIpMode}catch(e){this.debug&&console.log("YouboraData :: Error [getConcurrencyIpMode] :: "+e)}},t.prototype.setBalanceProperties=function(e){try{"string"==typeof e&&(e=JSON.parse(e)),void 0!==e&&(this.balanceProperties=e)}catch(e){this.debug&&console.log("YouboraData :: Error [setBalanceProperties] :: "+e)}},t.prototype.getBalanceProperties=function(){try{return this.balanceProperties}catch(e){this.debug&&console.log("YouboraData :: Error [getBalanceProperties] :: "+e)}},t.prototype.setBalanceLive=function(e){try{this.balanceProperties.live=e}catch(e){this.debug&&console.log("YouboraData :: Error [setBalanceLive] :: "+e)}},t.prototype.getBalanceLive=function(){try{return this.balanceProperties.live}catch(e){this.debug&&console.log("YouboraData :: Error [getBalanceLive] :: "+e)}},t.prototype.setBalanceType=function(e){try{this.balanceProperties.balanceType=e}catch(e){this.debug&&console.log("YouboraData :: Error [setBalanceType] :: "+e)}},t.prototype.getBalanceType=function(){try{return this.balanceProperties.balanceType}catch(e){this.debug&&console.log("YouboraData :: Error [getBalanceType] :: "+e)}},t.prototype.setBalanceEnabled=function(e){try{this.balanceProperties.enabled=e}catch(e){this.debug&&console.log("YouboraData :: Error [setBalanceEnabled] :: "+e)}},t.prototype.getBalanceEnabled=function(){try{return this.balanceProperties.enabled}catch(e){this.debug&&console.log("YouboraData :: Error [getBalanceEnabled] :: "+e)}},t.prototype.setBalanceService=function(e){try{this.balanceProperties.service=e}catch(e){this.debug&&console.log("YouboraData :: Error [setBalanceService] :: "+e)}},t.prototype.getBalanceService=function(){try{return this.balanceProperties.service}catch(e){this.debug&&console.log("YouboraData :: Error [getBalanceService] :: "+e)}},t.prototype.setBalanceZoneCode=function(e){try{this.balanceProperties.zoneCode=e}catch(e){this.debug&&console.log("YouboraData :: Error [setBalanceZoneCode] :: "+e)}},t.prototype.getBalanceZoneCode=function(){try{return this.balanceProperties.zoneCode}catch(e){this.debug&&console.log("YouboraData :: Error [getBalanceZoneCode] :: "+e)}},t.prototype.setBalanceOriginCode=function(e){try{this.balanceProperties.originCode=e}catch(e){this.debug&&console.log("YouboraData :: Error [setBalanceOriginCode] :: "+e)}},t.prototype.getBalanceOriginCode=function(){try{return this.balanceProperties.originCode}catch(e){this.debug&&console.log("YouboraData :: Error [getBalanceOriginCode] :: "+e)}},t.prototype.setBalanceNVA=function(e){try{this.balanceProperties.niceNVA=e}catch(e){this.debug&&console.log("YouboraData :: Error [setBalanceNVA] :: "+e)}},t.prototype.getBalanceNVA=function(){try{return this.balanceProperties.niceNVA}catch(e){this.debug&&console.log("YouboraData :: Error [getBalanceNVA] :: "+e)}},t.prototype.setBalanceNVB=function(e){try{this.balanceProperties.niceNVB=e}catch(e){this.debug&&console.log("YouboraData :: Error [setBalanceNVB] :: "+e)}},t.prototype.getBalanceNVB=function(){try{return this.balanceProperties.niceNVB}catch(e){this.debug&&console.log("YouboraData :: Error [getBalanceNVB] :: "+e)}},t.prototype.setBalanceToken=function(e){try{this.balanceProperties.token=e}catch(e){this.debug&&console.log("YouboraData :: Error [setBalanceToken] :: "+e)}},t.prototype.getBalanceToken=function(){try{return this.balanceProperties.token}catch(e){this.debug&&console.log("YouboraData :: Error [getBalanceToken] :: "+e)}},t.prototype.setResumeProperties=function(e){try{"string"==typeof e&&(e=JSON.parse(e)),void 0!==e&&(this.resumeProperties=e)}catch(e){this.debug&&console.log("YouboraData :: Error [setResumeProperties] :: "+e)}},t.prototype.getResumeProperties=function(){try{return this.resumeProperties}catch(e){this.debug&&console.log("YouboraData :: Error [getResumeProperties] :: "+e)}},t.prototype.setResumeEnabled=function(e){try{this.resumeProperties.resumeEnabled=e}catch(e){this.debug&&console.log("YouboraData :: Error [setResumeEnabled] :: "+e)}},t.prototype.getResumeEnabled=function(){try{return this.resumeProperties.resumeEnabled}catch(e){this.debug&&console.log("YouboraData :: Error [getResumeEnabled] :: "+e)}},t.prototype.setResumeCallback=function(e){try{this.resumeProperties.resumeCallback=e}catch(e){this.debug&&console.log("YouboraData :: Error [setResumeCallback] :: "+e)}},t.prototype.getResumeCallback=function(){try{return this.resumeProperties.resumeCallback}catch(e){this.debug&&console.log("YouboraData :: Error [getResumeCallback] :: "+e)}},t.prototype.setResumeService=function(e){try{this.resumeProperties.resumeService=e}catch(e){this.debug&&console.log("YouboraData :: Error [setResumeService] :: "+e)}},t.prototype.getResumeService=function(){try{return this.resumeProperties.resumeService}catch(e){this.debug&&console.log("YouboraData :: Error [getResumeService] :: "+e)}},t.prototype.setPlayTimeService=function(e){try{this.resumeProperties.playTimeService=e}catch(e){this.debug&&console.log("YouboraData :: Error [setPlayTimeService] :: "+e)}},t.prototype.getPlayTimeService=function(){try{return this.resumeProperties.playTimeService}catch(e){this.debug&&console.log("YouboraData :: Error [getPlayTimeService] :: "+e)}},t.prototype.setDebug=function(e){try{this.debug=e}catch(e){this.debug&&console.log("YouboraData :: Error [setDebug] :: "+e)}},t.prototype.getDebug=function(){try{return this.debug}catch(e){this.debug&&console.log("YouboraData :: Error [getDebug] :: "+e)}},t.prototype.setZoneCode=function(e){try{this.zoneCode=e}catch(e){this.debug&&console.log("YouboraData :: Error [setZoneCode] :: "+e)}},t.prototype.getZoneCode=function(){try{return this.zoneCode}catch(e){this.debug&&console.log("YouboraData :: Error [getZoneCode] :: "+e)}},t.prototype.setOriginCode=function(e){try{this.originCode=e}catch(e){this.debug&&console.log("YouboraData :: Error [setOriginCode] :: "+e)}},t.prototype.getOriginCode=function(){try{return this.originCode}catch(e){this.debug&&console.log("YouboraData :: Error [getOriginCode] :: "+e)}},t.prototype.setCDNNodeData=function(e){try{this.cdn_node_data=e}catch(e){this.debug&&console.log("YouboraData :: Error [setCDNNodeData] :: "+e)}},t.prototype.getCDNNodeData=function(){try{return this.cdn_node_data}catch(e){this.debug&&console.log("YouboraData :: Error [getCDNNodeData] :: "+e)}},t.prototype.setCDN=function(e){try{this.text_cdn=e}catch(e){this.debug&&console.log("YouboraData :: Error [setCDN] :: "+e)}},t.prototype.getCDN=function(){try{return this.text_cdn}catch(e){this.debug&&console.log("YouboraData :: Error [getCDN] :: "+e)}},t.prototype.setISP=function(e){try{this.text_isp=e}catch(e){this.debug&&console.log("YouboraData :: Error [setISP] :: "+e)}},t.prototype.getISP=function(){try{return this.text_isp}catch(e){this.debug&&console.log("YouboraData :: Error [getISP] :: "+e)}},t.prototype.setIP=function(e){try{this.text_ip=e}catch(e){this.debug&&console.log("YouboraData :: Error [setIP] :: "+e)}},t.prototype.getIP=function(){try{return this.text_ip}catch(e){this.debug&&console.log("YouboraData :: Error [getIP] :: "+e)}},t.prototype.setHashTitle=function(e){try{this.hashTitle=e}catch(e){this.debug&&console.log("YouboraData :: Error [setHashTitle] :: "+e)}},t.prototype.getHashTitle=function(){try{return this.hashTitle}catch(e){this.debug&&console.log("YouboraData :: Error [getHashTitle] :: "+e)}},t.prototype.setNiceTokenIp=function(e){try{this.balanceProperties.niceTokenIp=e}catch(e){this.debug&&console.log("YouboraData :: Error [niceTokenIp] :: "+e)}},t.prototype.getNiceTokenIp=function(){try{return this.balanceProperties.niceTokenIp}catch(e){this.debug&&console.log("YouboraData :: Error [getNiceTokenIp] :: "+e)}},t.prototype.setExtraParam=function(e,t){try{switch(e){case 1:this.extraParams.extraparam1=t;break;case 2:this.extraParams.extraparam2=t;break;case 3:this.extraParams.extraparam3=t;break;case 4:this.extraParams.extraparam4=t;break;case 5:this.extraParams.extraparam5=t;break;case 6:this.extraParams.extraparam6=t;break;case 7:this.extraParams.extraparam7=t;break;case 8:this.extraParams.extraparam8=t;break;case 9:this.extraParams.extraparam9=t;break;case 10:this.extraParams.extraparam10=t}}catch(e){this.debug&&console.log("YouboraData :: Error [setExtraParam] :: "+e)}},t.prototype.getExtraParam=function(e){try{switch(e){case 1:return this.extraParams.extraparam1;case 2:return this.extraParams.extraparam2;case 3:return this.extraParams.extraparam3;case 4:return this.extraParams.extraparam4;case 5:return this.extraParams.extraparam5;case 6:return this.extraParams.extraparam6;case 7:return this.extraParams.extraparam7;case 8:return this.extraParams.extraparam8;case 9:return this.extraParams.extraparam9;case 10:return this.extraParams.extraparam10}}catch(e){this.debug&&console.log("YouboraData :: Error [getExtraParam] :: "+e)}},t.prototype.getExtraParams=function(){try{return this.extraParams}catch(e){this.debug&&console.log("YouboraData :: Error [getExtraParams] :: "+e)}},t.prototype.setEnableAnalytics=function(e){try{this.enableAnalytics=e}catch(e){this.debug&&console.log("YouboraData :: Error [setEnableAnalytics] :: "+e)}},t.prototype.getEnableAnalytics=function(){try{return this.enableAnalytics}catch(e){this.debug&&console.log("YouboraData :: Error [getEnableAnalytics] :: "+e)}},t.prototype.setEnableBalancer=function(e){try{this.enableBalancer=e}catch(e){this.debug&&console.log("YouboraData :: Error [setEnableBalancer] :: "+e)}},t.prototype.getEnableBalancer=function(e){try{return this.enableBalancer}catch(e){this.debug&&console.log("YouboraData :: Error [getEnableBalancer] :: "+e)}},t.prototype.getBalancedResource=function(){try{return this.isBalanced}catch(e){this.debug&&console.log("YouboraData :: Error [getBalancedResource] :: "+e)}},t.prototype.setBalancedResource=function(e){try{this.isBalanced=e}catch(e){this.debug&&console.log("YouboraData :: Error [setBalancedResource] :: "+e)}},t.prototype.setSilverlightMediaElementName=function(e){try{this.silverlightMediaElementName=e}catch(e){this.debug&&console.log("YouboraData :: Error [setSilverlightMediaElementName] :: "+e)}},t.prototype.getSilverlightMediaElementName=function(){try{return this.silverlightMediaElementName}catch(e){this.debug&&console.log("YouboraData :: Error [getSilverlightMediaElementName] :: "+e)}},t.prototype.setSilverlightPlayer=function(e){try{this.silverlightPlayer=e}catch(e){this.debug&&console.log("YouboraData :: Error [setSilverlightMediaElementName] :: "+e)}},t.prototype.getSilverlightPlayer=function(){try{return this.silverlightPlayer}catch(e){this.debug&&console.log("YouboraData :: Error [getSilverlightPlayer] :: "+e)}},t.prototype.getNqsDebugServiceEnabled=function(){try{return this.nqsDebugServiceEnabled}catch(e){this.debug&&console.log("YouboraData :: Error [GET nqsDebugServiceEnabled] :: "+e)}},t.prototype.setNqsDebugServiceEnabled=function(e){try{this.nqsDebugServiceEnabled=e}catch(e){this.debug&&console.log("YouboraData :: Error [SET nqsDebugServiceEnabled] :: "+e)}},t.prototype.getHttpSecure=function(){try{return this.httpSecure}catch(e){this.debug&&console.log("YouboraData :: Error [GET nqsDebugServiceEnabled] :: "+e)}},t.prototype.setHttpSecure=function(e){try{this.httpSecure=e}catch(e){this.debug&&console.log("YouboraData :: Error [SET nqsDebugServiceEnabled] :: "+e)}},e=e||new t}),define("rofl/lib/base64",[],function(){"use strict";var u={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,i,n,r,s,o,a,l="",c=0;for(e=u._utf8_encode(e);c<e.length;)r=(t=e.charCodeAt(c++))>>2,s=(3&t)<<4|(i=e.charCodeAt(c++))>>4,o=(15&i)<<2|(n=e.charCodeAt(c++))>>6,a=63&n,isNaN(i)?o=a=64:isNaN(n)&&(a=64),l=l+this._keyStr.charAt(r)+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(a);return l},decode:function(e){if("function"==typeof atob)return atob(e);var t,i,n,r,s,o,a="",l=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)t=this._keyStr.indexOf(e.charAt(l++))<<2|(r=this._keyStr.indexOf(e.charAt(l++)))>>4,i=(15&r)<<4|(s=this._keyStr.indexOf(e.charAt(l++)))>>2,n=(3&s)<<6|(o=this._keyStr.indexOf(e.charAt(l++))),a+=String.fromCharCode(t),64!=s&&(a+=String.fromCharCode(i)),64!=o&&(a+=String.fromCharCode(n));return a=u._utf8_decode(a)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):(127<n&&n<2048?t+=String.fromCharCode(n>>6|192):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128)),t+=String.fromCharCode(63&n|128))}return t},_utf8_decode:function(e){var t,i,n,r="",s=0;for(t=i=n=0;s<e.length;)(t=e.charCodeAt(s))<128?(r+=String.fromCharCode(t),s++):191<t&&t<224?(i=e.charCodeAt(s+1),r+=String.fromCharCode((31&t)<<6|63&i),s+=2):(i=e.charCodeAt(s+1),n=e.charCodeAt(s+2),r+=String.fromCharCode((15&t)<<12|(63&i)<<6|63&n),s+=3);return r}};return{decode:function(e){return u.decode(e)},decodeUTF16:function(e){return function(e){for(var t=[],i=0;i<e.length;i+=2)t.push(e.charCodeAt(i)|e.charCodeAt(i+1)<<8);return String.fromCharCode.apply(String,t)}(u.decode(e))},encode:function(e){return u.encode(e)}}}),define("rofl/lib/date.format",["antie/runtimecontext","rofl/lib/utils","rofl/lib/l10n"],function(o,a,l){"use strict";var c,u;Date.prototype.format=function(e){var t,i=0,n=e.length,r=Date.replaceChars,s="";for(c=o.getCurrentApplication(),u=a.isFunction(a.getNested(c,"getMultilanguageModule"))&&c.getMultilanguageModule()||l.getInstance();i<n;i++)t=e.charAt(i),0<=i-1&&"\\"===e.charAt(i-1)?s+=t:r[t]?s+=r[t].call(this):"\\"!==t&&(s+=t);return s},Date.replaceChars={shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],specials:{today:"Today",yesterday:"Yesterday",tomorow:"Tomorrow",now:"now",minute:"minute",minutes:"minutes",hour:"hour",hours:"hours",day:"day",days:"days",week:"week",weeks:"weeks",month:"month",months:"months",year:"year",years:"years"},d:function(){return(this.getDate()<10?"0":"")+this.getDate()},D:function(){return u.get("dates.short."+Date.replaceChars.shortDays[this.getDay()])},j:function(){return this.getDate()},l:function(){return u.get("dates.full."+Date.replaceChars.longDays[this.getDay()])},N:function(){return this.getDay()+1},S:function(){var e="th";return this.getDate()%10==1&&11!==this.getDate()?e="st":this.getDate()%10==2&&12!==this.getDate()?e="nd":this.getDate()%10==3&&13!==this.getDate()&&(e="rd"),e},w:function(){return this.getDay()},z:function(){var e=new Date(this.getFullYear(),0,1),t=new Date(this.getFullYear(),this.getMonth(),this.getDate());return Math.ceil((t-e)/864e5)},W:function(){var e=new Date(this.getFullYear(),0,1);return Math.ceil(((this-e)/864e5+e.getDay()+1)/7)},F:function(){return u.get("dates.full."+Date.replaceChars.longMonths[this.getMonth()])},m:function(){return(this.getMonth()<9?"0":"")+(this.getMonth()+1)},M:function(){return u.get("dates.short."+Date.replaceChars.shortMonths[this.getMonth()])},n:function(){return this.getMonth()+1},t:function(){var e=new Date;return new Date(e.getFullYear(),e.getMonth(),0).getDate()},L:function(){var e=this.getFullYear();return e%400==0||e%100!=0&&e%4==0},o:function(){var e=new Date(this.valueOf());return e.setDate(e.getDate()-(this.getDay()+6)%7+3),e.getFullYear()},Y:function(){return this.getFullYear()},y:function(){return(""+this.getFullYear()).substr(2)},a:function(){return this.getHours()<12?"am":"pm"},A:function(){return this.getHours()<12?"AM":"PM"},B:function(){return Math.floor(1e3*((this.getUTCHours()+1)%24+this.getUTCMinutes()/60+this.getUTCSeconds()/3600)/24)},g:function(){return this.getHours()%12||12},G:function(){return this.getHours()},h:function(){return((this.getHours()%12||12)<10?"0":"")+(this.getHours()%12||12)},H:function(){return(this.getHours()<10?"0":"")+this.getHours()},i:function(){return(this.getMinutes()<10?"0":"")+this.getMinutes()},s:function(){return(this.getSeconds()<10?"0":"")+this.getSeconds()},u:function(){var e=this.getMilliseconds();return e<10?"00"+e:e<100?"0"+e:""+e},e:function(){return"Not Yet Supported"},I:function(){return"Not Yet Supported"},O:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+"00"},P:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+":00"},T:function(){var e,t=this.getMonth();return this.setMonth(0),e=this.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1"),this.setMonth(t),e},Z:function(){return 60*-this.getTimezoneOffset()},c:function(){return this.format("Y-m-d\\TH:i:sP")},r:function(){return this.toString()},U:function(){return this.getTime()/1e3},R:function(){var e,t=(new Date).format("z");return t===(e=this.format("z"))?u.get("dates."+Date.replaceChars.specials.today):t-e==1?u.get("dates."+Date.replaceChars.specials.yesterday):t-e==-1?u.get("dates."+Date.replaceChars.specials.tomorow):this.format("l")},b:function(){var e=(new Date).format("z")-this.format("z"),t=Math.floor(((new Date).format("u")-this.format("u"))/1e3);return 0===e&&(t<60&&u.get("dates."+Date.replaceChars.specials.now)||t<120&&"1 "+u.get("dates."+Date.replaceChars.specials.minute)||t<3600&&Math.floor(t/60)+" "+u.get("dates."+Date.replaceChars.specials.minutes)||t<7200&&"1 "+u.get("dates."+Date.replaceChars.specials.hour)||t<86400&&Math.floor(t/3600)+" "+u.get("dates."+Date.replaceChars.specials.hours)||1===e&&u.get("dates."+Date.replaceChars.specials.yesterday)||e<7&&e+" "+u.get("dates."+Date.replaceChars.specials.days)||e<8&&"1 "+u.get("dates."+Date.replaceChars.specials.week)||e<14&&e+" "+u.get("dates."+Date.replaceChars.specials.days)||e<30&&Math.ceil(e/7)+" "+u.get("dates."+Date.replaceChars.specials.weeks)||e<32&&"1 "+u.get("dates."+Date.replaceChars.specials.month)||e<363&&Math.ceil(e/31)+" "+u.get("dates."+Date.replaceChars.specials.months)||e<=380&&"1 "+u.get("dates."+Date.replaceChars.specials.year)||380<e&&Math.ceil(e/365)+" "+u.get("dates."+Date.replaceChars.specials.years))}}}),define("rofl/lib/date",[],function(){"use strict";var n=null,r=0,s=0;return{setValues:function(e){n=e,r=Math.max(new Date(e.timestamp)-new Date,0)},getValues:function(){return n},getClientServerTimezoneDifference:function(){return s},getClientServerTimestampDifference:function(){return r},getDate:function(){var e,t,i=function(e,t,i,n,r,s,o){var a;switch(arguments.length){case 0:a=new Date;break;case 1:a=new Date(e);break;default:i=i||0,n=n||0,r=r||0,s=s||0,o=o||0,a=new Date(e,t,i,n,r,s,o)}return a}.apply(null,arguments);return n&&(i.setTime(i.getTime()+r),e=i.getTimezoneOffset(),0!==(t=n.timezone_offset/1e3/60)&&(t*=-1),e!==t&&(s=(t-e)/60,i.setHours(i.getHours()-s))),i}}}),define("rofl/lib/date.parse",function(){"use strict";var o=Date.parse,a=[1,4,5,6,7,10,11];Date.parse=function(e){var t,i,n=0;if(i=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(e)){for(var r,s=0;r=a[s];++s)i[r]=+i[r]||0;i[2]=(+i[2]||1)-1,i[3]=+i[3]||1,"Z"!==i[8]&&void 0!==i[9]&&(n=60*i[10]+i[11],"+"===i[9]&&(n=0-n)),t=Date.UTC(i[1],i[2],i[3],i[4],i[5]+n,i[6],i[7])}else t=o?o(e):NaN;return t}}),define("rofl/lib/imageloader",["rofl/lib/utils","rofl/lib/promise","antie/runtimecontext"],function(n,r,o){"use strict";var i={_createImage:function(e,t,i,n){var r,s;s=t?function(){i()}:function(){i(r)},r=o.getDevice().createImage(null,null,e,null,s,n)},_loadMultiple:function(e,t){var i=[];return n.each(e,function(e){i.push(this.load(e,t))},this),r.all(i)},load:function(e,t){return n.isArray(e)?this._loadMultiple(e,t):new r(n.bind(this._createImage,this,e,t))}};return function(e,t){return i.load(e,t)}}),define("rofl/lib/l10n",["rofl/models/model","rofl/lib/utils","rofl/lib/promise","antie/runtimecontext"],function(e,a,l,c){"use strict";var n,i,r,s,o,t,u,d={chinese:function(){return 0},german:function(e){return 1!==e?1:0},french:function(e){return 1<e?1:0},russian:function(e){return e%10==1&&e%100!=11?0:2<=e%10&&e%10<=4&&(e%100<10||20<=e%100)?1:2},czech:function(e){return 1===e?0:2<=e&&e<=4?1:2},polish:function(e){return 1===e?0:2<=e%10&&e%10<=4&&(e%100<10||20<=e%100)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0}},h={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};return n=function(e,t,i){var n;return null!==i&&e?((n=e.split("||||"))[r(t,i)]||n[0]).trim():e},i=function(e){var t=s(h);return t[e]||t.en},r=function(e,t){return d[i(e)](t)},s=function(e){var t,i,n,r={};for(t in e)if(e.hasOwnProperty(t))for(n in i=e[t])i.hasOwnProperty(n)&&(r[i[n]]=t);return r},o=function(e){var t,i,n=[],r={};return(t=function(e){for(i in e)e.hasOwnProperty(i)&&(n.push(i),a.isArray(e[i])?r[n.join(".")]=e[i]:"object"==typeof e[i]?t(e[i]):r[n.join(".")]=e[i],n.pop())})(e),r},t=e.extend({setLanguage:function(n){var e,t=c.getCurrentApplication().getConfiguration(),r=this,i=t.l10n,s=this._templatePath||i.templatePath||"application/appui/nls/{{lang}}/ui",o={};return n=n||i.default||"en-US",o.lang=n,e=a.formatTemplate(s,o),new l(function(t,i){require([e],function(e){r.setTranslation(e,n),t(n)},function(e){i(e.requireType+" - loading language "+e.requireModules[0])})})},getLanguage:function(){return this._languageKey},setTranslation:function(e,t){this._languageKey=t,this.set(o(e))},setTemplatePath:function(e){this._templatePath=e},get:function(e,t){var i=this._super(e,e);return"number"==typeof(t=a.isUndefined(t)?{}:t)&&(t={smart_count:t},i=n(i,this.getLanguage().split("-")[0],t.smart_count)),a.isArray(i)?i:a.formatTemplate(i,t)}}),{getInstance:function(){return u||(u=new t),u}}}),define("rofl/lib/object.extend",function(){"use strict";Object.deepExtend=function e(t,i){var n;for(n in i)i[n]&&i[n].constructor&&i[n].constructor===Object?(t[n]=t[n]||{},e(t[n],i[n])):t[n]=i[n];return t}}),define("rofl/lib/promise",["rofl/lib/utils","rofl/lib/queue","rofl/logger"],function(l,n,c){"use strict";var u,d="_settled",h=window.requestAnimationFrame||function(e){setTimeout(e,0)};return(u=function(e){var t,r,i,s="pending",o=this,a=n();if(t=function(e,t){"pending"===s&&(s=e,r=t,a.pause(!1))},i=function(i,n){return i=i||u.resolve,n=n||function(i){return new u(function(e,t){t(i)})},new u(function(e,t){a.push(function(){if(r instanceof u&&!o[d])r.then(i,n).then(e,t);else try{e("fulfilled"===s?i(r):n(r)),o[d]=!0}catch(e){return console&&console.error&&console.error(e),c.onAppError(e.message),o[d]=!0,t(e)}})})},!l.isFunction(e))throw new TypeError("Argument 1 of Promise.constructor is not callable.");if(!(this instanceof u))return new u(e);a.pause(!0),this.then=i,this.catch=l.bind(i,o,null),h(function(){try{e.call(o,l.bind(t,o,"fulfilled"),l.bind(t,o,"rejected"))}catch(e){t("rejected",e)}})}).resolve=function(i){return new u(function(e,t){i instanceof u?i.then(e,t):e(i)})},u.reject=function(i){return new u(function(e,t){this[d]=!0,t(i)})},u.all=function(e){if(!l.isArray(e))throw new TypeError("Promise.all accepts only an Array.");return u(function(i,t){var n,r,s=[],o=e.length;0!==o?(r=function(e,t){this[e]=t,0==--o&&i(s)},n=function(e){t(e)},l.each(e,function(e,t){e instanceof u?e.then(l.bind(r,s,t),n):r.call(s,t,e)})):i(s)})},u}),define("rofl/lib/pubsub",["rofl/lib/utils"],function(l){"use strict";var c={},u={},d={};return{sub:function(e,t,i){var n,r,s,o,a;if(l.isString(e)&&l.isFunction(t))for(r=0,s=(a=e.split("|")).length;r<s;r++)n=!1,/^!/.test(a[r])&&(a[r]=a[r].substr(1),n=!0),c[a[r]]||(c[a[r]]=[]),c[a[r]].push([t,i]),n&&0<=(o=l.indexOf(d[a[r]],i))&&t.call(i||{},u[a[r]][o])},pub:function(e,t,i){var n,r,s,o,a=(c[e]||[]).concat(c["*"]||[]);if(s=function(e,t,i,n){e.call({scope:i,type:n,callee:e,data:t},t)},d[e]||(d[e]=[],u[e]=[]),(o=l.indexOf(d[e],i))<0?(d[e].push(i),u[e].push(t)):u[e][o]=t,a)for(n=0,r=a.length;n<r;n++)a[n][1]&&a[n][1]!==i&&"--all"!==a[n][1]||s(a[n][0],t,i,e)},unsub:function(e,i,n){var r=c[e];r&&r.length&&l.each(r,function(e,t){e[1]&&e[1]===n&&e[0]===i&&r.splice(t,1)})}}}),define("rofl/lib/queue",["rofl/lib/utils"],function(a){"use strict";return function(){var n,r=!1,s=[],o=!1;return n={next:function(){var e;r||((e=s.shift())?(o=!0,e.call.apply(void 0,e.arg),n.next()):o=!1)},push:function(e,t,i){s.push({call:e,arg:a.isArray(t)?t:[],opt:i}),r||o||n.next()},pause:function(e){(r=a.isBool(e)?e:!r)||o||n.next()}}}}),define("rofl/lib/sanitize.encoding",["rofl/lib/utils","rofl/data/encoding.map"],function(n,e){"use strict";var t=/&([0-9a-zA-Z]+);|&(Aacute|iacute|Uacute|plusmn|otilde|Otilde|Agrave|agrave|yacute|Yacute|oslash|Oslash|Atilde|atilde|brvbar|Ccedil|ccedil|ograve|curren|divide|Eacute|eacute|Ograve|oacute|Egrave|egrave|ugrave|frac12|frac14|frac34|Ugrave|Oacute|Iacute|ntilde|Ntilde|uacute|middot|Igrave|igrave|iquest|aacute|laquo|THORN|micro|iexcl|icirc|Icirc|Acirc|ucirc|ecirc|Ocirc|ocirc|Ecirc|Ucirc|aring|Aring|aelig|AElig|acute|pound|raquo|acirc|times|thorn|szlig|cedil|COPY|Auml|ordf|ordm|uuml|macr|Uuml|auml|Ouml|ouml|para|nbsp|Euml|quot|QUOT|euml|yuml|cent|sect|copy|sup1|sup2|sup3|Iuml|iuml|shy|eth|reg|not|yen|amp|AMP|REG|uml|ETH|deg|gt|GT|LT|lt)?/g,r=e;return{decode:function(e){return e.replace(t,function(e,t){var i;return(i=t)?(i=t,n.hasop(r,i)?r[i]:e):e})}}}),define("rofl/lib/speedtest",["antie/class","antie/application","antie/iterator","rofl/lib/promise"],function(e,n,c,u){"use strict";return m=function(){null!==p&&(clearTimeout(p),p=null)},(r=e.extend({init:function(){this.reset()},reset:function(){m(),p=g=h=d=null,_=f=!1},setSources:function(e){d=e},abort:function(){null!==h&&(f=!0,h.abort())},isAborted:function(){return!0===f},setTimeLimit:function(e){g=e},execute:function(){return u(function(t,i){var r,e,s,o,a,l;(a=n.getCurrentApplication().getDevice(),l=0,u(function(t,i){var n=function(){e=(e=r.next())+"?cachebuster="+(new Date).getTime(),h=a.loadURL(e,{responseType:"any",onLoad:function(){var e=h.getResponseHeader("Content-Length");e?null!==l&&(l+=parseInt(e,10)):(l=null,a.getLogger().warn('Unable to parse the "Content-Length" header, please check the speedtest file request for CORS or other issues.')),r.hasNext()&&!f?n():(o=(new Date).getTime(),h=null,m(),f?i({exceeded:_,aborted:f}):t({time:o-s,fileSize:l}))},onError:function(){h=null,m(),i({exceeded:_,aborted:f})}})};r=new c(d),s=(new Date).getTime(),null!==g&&(p=setTimeout(function(){null!==h&&(_=f=!0,h.abort())},g)),n()})).then(function(e){t(e)},function(e){i(e)})})},calculateSpeed:function(e,t,i){var n=0;for(i||(i=r.UNITS.BYTE),i===r.UNITS.BIT&&(t*=8);t>i.SIZE;)t/=i.SIZE,n++;return{speed:t/(e/1e3),extension:i.ABBREVIATION[n]+"/s"}}})).UNITS={BIT:{SIZE:1e3,ABBREVIATION:["b","kb","Mb","Gb"]},BYTE:{SIZE:1024,ABBREVIATION:["B","kB","MB","GB"]}},r;var d,h,g,p,f,_,r,m}),define("rofl/lib/streamsense",function(){"use strict";var v,C,A,E,I,e,re=re||{};return re.PlatformAPIs=re.PlatformAPIs||{Standard:0,Trilithium:1,AppleTV:2,Chromecast:3},re.Utils=re.Utils||{uid:(e=1,function(){return+new Date+"_"+e++}),filter:function(e,t){var i={};for(var n in t)t.hasOwnProperty(n)&&e(t[n])&&(i[n]=t[n]);return i},extend:function(e){var t,i=arguments.length;e=e||{};for(var n=1;n<i;n++)if(t=arguments[n])for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},getString:function(e,t){var i=String(e);return null==e?t||"na":i},getLong:function(e,t){var i=Number(e);return null==e||isNaN(i)?t||0:i},getInteger:function(e,t){var i=Number(e);return null==e||isNaN(i)?t||0:i},getBoolean:function(e,t){var i="true"==String(e).toLowerCase();return null==e?t||!1:i},isNotEmpty:function(e){return void 0!==e&&null!=e&&void 0!==e.length&&0<e.length},indexOf:function(i,e){var n=-1;return this.forEach(e,function(e,t){e==i&&(n=t)}),n},forEach:function(e,t,i){try{if("function"==typeof t)if(i=void 0!==i?i:null,"number"!=typeof e.length||void 0===e[0]){var n=void 0!==e.__proto__;for(var r in e)e.hasOwnProperty(r)&&(!n||n&&void 0===e.__proto__[r])&&"function"!=typeof e[r]&&t.call(i,e[r],r)}else for(var s=0,o=e.length;s<o;s++)t.call(i,e[s],s)}catch(e){}},regionMatches:function(e,t,i,n,r){if(t<0||n<0||t+r>e.length||n+r>i.length)return!1;for(;0<=--r;)if(e.charAt(t++)!=i.charAt(n++))return!1;return!0},size:function(e){var t=0;for(var i in e)e.hasOwnProperty(i)&&t++;return t},log:function(e,t){if(void 0!==t&&t&&"undefined"!=typeof console&&console){var i=new Date,n=i.getHours()+":"+i.getMinutes()+":"+i.getSeconds();console.log(n,e)}},isTrue:function(e){return void 0!==e&&("string"==typeof e?"true"===(e=e.toLowerCase())||"1"===e||"on"===e:!!e)},toString:function(e){if(void 0===e)return"undefined";if("string"==typeof e)return e;if("[object Array]"===Object.prototype.toString.call(e))return e.join(",");if(0<this.size(e)){var t="";for(var i in e)e.hasOwnProperty(i)&&(t+=i+":"+e[i]+";");return t}return e.toString()},exists:function(e){return void 0!==e&&null!=e},firstGreaterThan0:function(){for(var e=0,t=arguments.length;e<t;e++){var i=arguments[e];if(0<i)return i}return 0},cloneObject:function(e){return null==e||"object"!=typeof e?e:function(){function i(){}function t(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}function n(){this.copiedObjects=[];var t=this;this.recursiveDeepCopy=function(e){return t.deepCopy(e)},this.depth=0}function e(e,t){var i=new n;return t&&(i.maxDepth=t),i.deepCopy(e)}var r=[];return t.prototype={constructor:t,canCopy:function(){return!1},create:function(e){},populate:function(e,t,i){}},n.prototype={constructor:n,maxDepth:256,cacheResult:function(e,t){this.copiedObjects.push([e,t])},getCachedResult:function(e){for(var t=this.copiedObjects,i=t.length,n=0;n<i;n++)if(t[n][0]===e)return t[n][1]},deepCopy:function(e){if(null===e)return null;if("object"!=typeof e)return e;var t=this.getCachedResult(e);if(t)return t;for(var i=0;i<r.length;i++){var n=r[i];if(n.canCopy(e))return this.applyDeepCopier(n,e)}throw new Error("Unable to clone the following object "+e)},applyDeepCopier:function(e,t){var i=e.create(t);if(this.cacheResult(t,i),this.depth++,this.depth>this.maxDepth)throw new Error("Maximum recursion depth exceeded.");return e.populate(this.recursiveDeepCopy,t,i),this.depth--,i}},e.DeepCopier=t,e.deepCopiers=r,e.register=function(e){e instanceof t||(e=new t(e)),r.unshift(e)},e.register({canCopy:function(){return!0},create:function(e){return e instanceof e.constructor?"object"==typeof(t=e.constructor.prototype)?(i.prototype=t,new i):t:{};var t},populate:function(e,t,i){for(var n in t)t.hasOwnProperty(n)&&(i[n]=e(t[n]));return i}}),e.register({canCopy:function(e){return e instanceof Array},create:function(e){return new e.constructor},populate:function(e,t,i){for(var n=0;n<t.length;n++)i.push(e(t[n]));return i}}),e.register({canCopy:function(e){return e instanceof Date},create:function(e){return new Date(e)}}),e.register({canCopy:function(e){return t=e,"undefined"!=typeof window&&window&&window.Node?t instanceof Node:t===document||"number"==typeof t.nodeType&&t.attributes&&t.childNodes&&t.cloneNode;var t},create:function(e){return e===document?document:e.cloneNode(!1)},populate:function(e,t,i){if(t===document)return document;if(t.childNodes&&t.childNodes.length)for(var n=0;n<t.childNodes.length;n++){var r=e(t.childNodes[n]);i.appendChild(r)}}}),{deepCopy:e}}().deepCopy(e)},safeGet:function(e,t){return t=this.exists(t)?t:"",this.exists(e)?e:t},getBrowserName:function(){if("undefined"==typeof navigator||!navigator.hasOwnProperty("userAgent")||!navigator.hasOwnProperty("appName"))return"";var e,t,i=navigator.userAgent,n=navigator.appName;return-1!=(t=i.indexOf("Opera"))||-1!=(t=i.indexOf("OPR/"))?n="Opera":-1!=(t=i.indexOf("Android"))?n="Android":-1!=(t=i.indexOf("Chrome"))?n="Chrome":-1!=(t=i.indexOf("Safari"))?n="Safari":-1!=(t=i.indexOf("Firefox"))?n="Firefox":-1!=(t=i.indexOf("IEMobile"))?n="Internet Explorer Mobile":"Microsoft Internet Explorer"==n||"Netscape"==n?n="Internet Explorer":(e=i.lastIndexOf(" ")+1)<(t=i.lastIndexOf("/"))&&(n=i.substring(e,t)).toLowerCase()==n.toUpperCase()&&(n=navigator.appName),n},getBrowserFullVersion:function(){if("undefined"==typeof navigator||!navigator.hasOwnProperty("userAgent")||!navigator.hasOwnProperty("appName")||!navigator.hasOwnProperty("appVersion"))return"";var e,t,i,n=navigator.userAgent,r=navigator.appName,s=""+parseFloat(navigator.appVersion);return-1!=(t=n.indexOf("Opera"))?(s=n.substring(t+6),-1!=(t=n.indexOf("Version"))&&(s=n.substring(t+8))):-1!=(t=n.indexOf("OPR/"))?s=n.substring(t+4):-1!=(t=n.indexOf("Android"))?s=n.substring(t+11):-1!=(t=n.indexOf("Chrome"))?s=n.substring(t+7):-1!=(t=n.indexOf("Safari"))?(s=n.substring(t+7),-1!=(t=n.indexOf("Version"))&&(s=n.substring(t+8))):-1!=(t=n.indexOf("Firefox"))?s=n.substring(t+8):"Microsoft Internet Explorer"==r?null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(n)&&(s=parseFloat(RegExp.$1)):"Netscape"==r?null!=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(n)&&(s=parseFloat(RegExp.$1)):n.lastIndexOf(" ")+1<(t=n.lastIndexOf("/"))&&(s=n.substring(t+1)),-1!=(i=(s=s.toString()).indexOf(";"))&&(s=s.substring(0,i)),-1!=(i=s.indexOf(" "))&&(s=s.substring(0,i)),-1!=(i=s.indexOf(")"))&&(s=s.substring(0,i)),e=parseInt(""+s,10),isNaN(e)&&(s=""+parseFloat(navigator.appVersion)),s},browserAcceptsLargeURLs:function(){return"undefined"!=typeof window&&null===window.ActiveXObject||!0}},re.StreamSense=re.StreamSense||function(){var l,o,c,u,d,h,J=re.Utils,r=function(){var i="undefined"!=typeof localStorage?localStorage:{};J.extend(this,{get:function(e){return i["cs_"+e]},set:function(e,t){i["cs_"+e]=t},has:function(e){return"cs_"+e in i},remove:function(e){delete i["cs_"+e]},clear:function(){for(var e in i)i.hasOwnProperty(e)&&delete i[e]}})},s=function(){var i="undefined"!=typeof atv&&void 0!==atv.localStorage&&atv.localStorage||null;J.extend(this,{get:function(e){return i&&e&&i.getItem("cs_"+e)||null},set:function(e,t){i&&e&&(i["cs_"+e]=t)},has:function(e){return i&&e&&null!=i.getItem("cs_"+e)||!1},remove:function(e){i&&e&&i.removeItem("cs_"+e)},clear:function(){}})},e=function(e,t){if("undefined"!=typeof Image){var i=new Image;i.onload=function(){t&&t(200),i=null},i.onerror=function(){t&&t(),i=null},i.src=e}},t=function(e,t,i){"undefined"!=typeof XMLHttpRequest&&i&&"undefined"!=typeof setTimeout&&setTimeout(i,0);var n=new XMLHttpRequest;n.open("POST",e,!0),n.onreadystatechange=function(){4===n.readyState&&(i&&i(n.status),n=null)},n.send(t)},a=function(e,t,i){i&&"undefined"!=typeof setTimeout&&setTimeout(i,0)},g=(l="undefined"!=typeof encodeURIComponent?encodeURIComponent:escape,o="undefined"!=typeof decodeURIComponent?decodeURIComponent:unescape,c="cs_dir_",u="cs_file_",d="undefined"!=typeof localStorage?localStorage:{},h={},{dir:function(e){var t=c+e,i=h[t];if(i)return i.slice();var n=d[t];if(n){i=[];for(var r=0,s=(n=n.split("|")).length;r<s;r++)0<n[r].length&&i.push(o(n[r]));return(h[t]=i).slice()}return null},append:function(e,t,i){var n=g.read(e,t);n?n+=i:n=i,g.write(e,t,n)},write:function(e,t,i){var n,r,s,o,a=g.dir(e);a||(d[o=c+e]="",h[o]=[],a=[]),-1==J.indexOf(t,a)&&(r=t,d[s=c+e]+="|"+l(r),h[s].push(r)),n=i,d[u+e+t]=n},deleteFile:function(e,t){var i=g.dir(e);return!!i&&-1!=J.indexOf(t,i)&&(function(e,t){var i=c+e,n=h[i];n.splice(J.indexOf(t,n),1);for(var r=[],s=0,o=n.length;s<o;s++)r.push(l(n[s]));d[i]=r.join("|"),delete d[u+e+t]}(e,t),!0)},read:function(e,t){var i=g.dir(e);return i?-1==J.indexOf(t,i)?null:d[u+e+t]:null}}),p={dir:function(){return null},append:function(e,t,i){},write:function(e,t,i){},deleteFile:function(){return!1},read:function(){return null}},f=function(e,t){"undefined"!=typeof engine&&t&&"undefined"!=typeof setTimeout&&setTimeout(t,0),engine.createHttpClient().createRequest("GET",e,null).start(),t&&setTimeout(t,0)},_=function(e,t){if("undefined"!=typeof atv&&"function"==typeof atv.setTimeout){"undefined"!=typeof XMLHttpRequest&&t&&atv.setTimeout(t,0);var i=new XMLHttpRequest;i.open("GET",e,!0),i.onreadystatechange=function(){4===i.readyState&&(t&&t(i.status),i=null)},i.send()}},m=function(e,t,i){if("undefined"!=typeof atv&&"function"==typeof atv.setTimeout){"undefined"!=typeof XMLHttpRequest&&i&&atv.setTimeout(i,0);var n=new XMLHttpRequest;n.open("POST",e,!0),n.onreadystatechange=function(){4===n.readyState&&(i&&i(n.status),n=null)},n.send(t)}},Z={PLATFORM:"generic",httpGet:e,httpPost:a,Storage:r,IO:p,getCrossPublisherId:function(){return null},getAppName:function(){return Constants.UNKNOWN_VALUE},getAppVersion:function(){return Constants.UNKNOWN_VALUE},getVisitorId:function(){return this.getDeviceName()+ +new Date+~~(1e3*Math.random())},getVisitorIdSuffix:function(){return"72"},getDeviceName:function(){return""},getPlatformVersion:function(){return""},getPlatformName:function(){return"js"},getRuntimeName:function(){return""},getRuntimeVersion:function(){return""},getResolution:function(){return""},getLanguage:function(){return""},getPackageName:function(){return""},isConnectionAvailable:function(){return!0},isCompatible:function(){return!0},autoSelect:function(){},setPlatformAPI:function(){},isCrossPublisherIdChanged:function(){return!1},setTimeout:function(e,t,i){return setTimeout(e,t,i)},clearTimeout:function(e){return clearTimeout(e)},getDeviceArchitecture:function(){return Constants.UNKNOWN_VALUE},getConnectionType:function(){return Constants.UNKNOWN_VALUE},getDeviceJailBrokenFlag:function(){return Constants.UNKNOWN_VALUE}},i=function(){function e(){if(null==t){var e=J.isNotEmpty(engine.stats.device.id)?engine.stats.device.id:J.isNotEmpty(engine.stats.network.mac)?engine.stats.network.mac:null;n=null!=e?(i="31",t=e):(t=+new Date+~~(1e3*Math.random()),i="72",null)}}var t=null,i=null,n=null;return{PLATFORM:"trilithium",httpGet:f,httpPost:a,Storage:r,IO:p,getCrossPublisherId:function(){return e(),n},getAppName:function(){return J.isNotEmpty(engine.stats.application.name)?engine.stats.application.name:Constants.UNKNOWN_VALUE},getAppVersion:function(){return J.isNotEmpty(engine.stats.application.version)?engine.stats.application.version:Constants.UNKNOWN_VALUE},getVisitorId:function(){return e(),t},getVisitorIdSuffix:function(){return i},getDeviceName:function(){return J.safeGet(engine.stats.device.platform,"")},getPlatformVersion:function(){return J.safeGet(engine.stats.device.version,"")},getPlatformName:function(){return"js"},getRuntimeName:function(){return"trilithium"},getRuntimeVersion:function(){return""},getResolution:function(){return"undefined"!=typeof screen&&void 0!==screen.height&&void 0!==screen.width?screen.height+"x"+screen.width:""},getLanguage:function(){return""},getPackageName:function(){return""},isConnectionAvailable:function(){return!0},isCompatible:function(){return"undefined"!=typeof engine&&void 0!==engine.stats}}}(),n=function(){function e(){null==t&&(i="undefined"!=typeof atv&&void 0!==atv.device&&atv.device.idForVendor?(t=J.safeGet(atv.device.idForVendor,""),"62"):(t=+new Date+~~(1e3*Math.random()),"72"),n=null)}var t=null,i=null,n=null;return{PLATFORM:"atv",httpGet:_,httpPost:m,Storage:s,IO:p,getCrossPublisherId:function(){return e(),n},getAppName:function(){return Constants.UNKNOWN_VALUE},getAppVersion:function(){return Constants.UNKNOWN_VALUE},getVisitorId:function(){return e(),t},getVisitorIdSuffix:function(){return i},getDeviceName:function(){return"Apple TV"},getPlatformVersion:function(){return"undefined"!=typeof atv&&void 0!==atv.device&&J.safeGet(atv.device.softwareVersion,"")},getPlatformName:function(){return"js"},getRuntimeName:function(){return"atv"},getRuntimeVersion:function(){return"undefined"!=typeof atv&&void 0!==atv.device&&J.safeGet(atv.device.softwareVersion,"")},getResolution:function(){return void 0!==atv.device&&void 0!==atv.device.screenFrame&&void 0!==atv.device.screenFrame.height&&void 0!==atv.device.screenFrame.width?atv.device.screenFrame.height+"x"+atv.device.screenFrame.width:""},getLanguage:function(){return"undefined"!=typeof atv&&void 0!==atv.device&&J.safeGet(atv.device.language,"")},getPackageName:function(){return""},isConnectionAvailable:function(){return!0},setTimeout:function(e,t,i){return"undefined"!=typeof atv&&void 0!==atv.setTimeout&&atv.setTimeout(e,t,i)},clearTimeout:function(e){return"undefined"!=typeof atv&&void 0!==atv.clearTimeout&&atv.clearTimeout(e)},isCompatible:function(){return"undefined"==typeof window&&"undefined"!=typeof atv}}}(),v={PLATFORM:"chromecast",httpGet:e,httpPost:t,Storage:r,IO:g,getCrossPublisherId:function(){return null},getAppName:function(){return"undefined"!=typeof document&&document.title||Constants.UNKNOWN_VALUE},getAppVersion:function(){return Constants.UNKNOWN_VALUE},getVisitorId:function(){return+new Date+~~(1e3*Math.random())},getVisitorIdSuffix:function(){return"72"},getDeviceName:function(){return"chromecast"},getPlatformVersion:function(){return"5"},getPlatformName:function(){return"js"},getRuntimeName:function(){return"html"},getRuntimeVersion:function(){return J.safeGet(J.getBrowserName()+" "+J.getBrowserFullVersion(),Constants.UNKNOWN_VALUE)},getResolution:function(){var e="undefined"!=typeof window&&J.exists(window.screen)&&J.exists(window.screen.availWidth)?window.screen.availWidth:0,t="undefined"!=typeof window&&J.exists(window.screen)&&J.exists(window.screen.availHeight)?window.screen.availHeight:0;return 0<e&&0<t?e+"x"+t:""},getLanguage:function(){return"undefined"!=typeof window&&J.exists(window.navigator)&&J.safeGet(window.navigator.language,"")||""},getPackageName:function(){return"undefined"!=typeof castReceiverManager&&castReceiverManager.getApplicationData&&"function"==typeof castReceiverManager.getApplicationData&&castReceiverManager.getApplicationData().namespaces&&castReceiverManager.getApplicationData().namespaces[0]||""},isConnectionAvailable:function(){return"undefined"!=typeof window&&J.exists(window.navigator)&&J.safeGet(window.navigator.onLine,!0)||!0},isCompatible:function(){return"undefined"!=typeof window&&"undefined"!=typeof document},getConnectionType:function(){return Constants.UNKNOWN_VALUE}};Z.autoSelect=function(){i.isCompatible()?re.Utils.extend(Z,i):n.isCompatible()&&re.Utils.extend(Z,n)},Z.setPlatformAPI=function(e){var t=!1;switch(e){case re.PlatformAPIs.Trilithium:re.Utils.extend(Z,i),t=!0;break;case re.PlatformAPIs.AppleTV:re.Utils.extend(Z,n),t=!0;break;case re.PlatformAPIs.Chromecast:J.extend(Z,v),t=!0}t&&(Z.autoSelect=function(){})};var X,$,C="undefined"!=typeof window&&"undefined"!=typeof document;$=C?(X=window,document):(X={},{location:{href:""},title:"",URL:"",referrer:"",cookie:""}),(J=J||{}).filterMap=function(e,t){for(var i in e)e.hasOwnProperty(i)&&-1==J.indexOf(i,t)&&delete e[i]},J.getKeys=function(e,t){var i,n=[];for(i in e)(!t||t.test(i))&&e.hasOwnProperty(i)&&(n[n.length]=i);return n};var A,E,I,ee=(I=["play","pause","end","buffer","keep-alive","hb","custom","ad_play","ad_pause","ad_end","ad_click"],{PLAY:0,PAUSE:1,END:2,BUFFER:3,KEEP_ALIVE:4,HEART_BEAT:5,CUSTOM:6,AD_PLAY:7,AD_PAUSE:8,AD_END:9,AD_CLICK:10,toString:function(e){return I[e]}}),te=(E=[ee.END,ee.PLAY,ee.PAUSE,ee.BUFFER],{IDLE:0,PLAYING:1,PAUSED:2,BUFFERING:3,toEventType:function(e){return E[e]}}),y={ADPLAY:ee.AD_PLAY,ADPAUSE:ee.AD_PAUSE,ADEND:ee.AD_END,ADCLICK:ee.AD_CLICK},ie={STREAMSENSE_VERSION:"4.1505.18",DEFAULT_PLAYERNAME:"streamsense",DEFAULT_HEARTBEAT_INTERVAL:[{playingtime:6e4,interval:1e4},{playingtime:null,interval:6e4}],DEFAULT_KEEP_ALIVE_INTERVAL:12e5,DEFAULT_PAUSED_ON_BUFFERING_INTERVAL:500,C1_VALUE:"19",C10_VALUE:"js",NS_AP_C12M_VALUE:"1",NS_NC_VALUE:"1",PAGE_NAME_LABEL:"name",RESTRICTED_URL_LENGTH_LIMIT:2048,URL_LENGTH_LIMIT:4096,LABELS_ORDER:["c1","c2","ca2","cb2","cc2","cd2","ns_site","ca_ns_site","cb_ns_site","cc_ns_site","cd_ns_site","ns_vsite","ca_ns_vsite","cb_ns_vsite","cc_ns_vsite","cd_ns_vsite","ns_ap_an","ca_ns_ap_an","cb_ns_ap_an","cc_ns_ap_an","cd_ns_ap_an","ns_ap_pn","ns_ap_pv","c12","ca12","cb12","cc12","cd12","ns_ak","ns_ap_hw","name","ns_ap_ni","ns_ap_ec","ns_ap_ev","ns_ap_device","ns_ap_id","ns_ap_csf","ns_ap_bi","ns_ap_pfm","ns_ap_pfv","ns_ap_ver","ca_ns_ap_ver","cb_ns_ap_ver","cc_ns_ap_ver","cd_ns_ap_ver","ns_ap_sv","ns_ap_cv","ns_type","ca_ns_type","cb_ns_type","cc_ns_type","cd_ns_type","ns_radio","ns_nc","ns_ap_ui","ca_ns_ap_ui","cb_ns_ap_ui","cc_ns_ap_ui","cd_ns_ap_ui","ns_ap_gs","ns_st_sv","ns_st_pv","ns_st_it","ns_st_id","ns_st_ec","ns_st_sp","ns_st_sq","ns_st_cn","ns_st_ev","ns_st_po","ns_st_cl","ns_st_el","ns_st_pb","ns_st_hc","ns_st_mp","ca_ns_st_mp","cb_ns_st_mp","cc_ns_st_mp","cd_ns_st_mp","ns_st_mv","ca_ns_st_mv","cb_ns_st_mv","cc_ns_st_mv","cd_ns_st_mv","ns_st_pn","ns_st_tp","ns_st_pt","ns_st_pa","ns_st_ad","ns_st_li","ns_st_ci","ns_ap_jb","ns_ap_res","ns_ap_sd","ns_ap_po","ns_ap_ot","ns_ap_c12m","cs_c12u","ns_ap_install","ns_ap_updated","ns_ap_lastrun","ns_ap_cs","ns_ap_runs","ns_ap_usage","ns_ap_fg","ns_ap_ft","ns_ap_dft","ns_ap_bt","ns_ap_dbt","ns_ap_dit","ns_ap_as","ns_ap_das","ns_ap_it","ns_ap_uc","ns_ap_aus","ns_ap_daus","ns_ap_us","ns_ap_dus","ns_ap_ut","ns_ap_oc","ns_ap_uxc","ns_ap_uxs","ns_ap_lang","ns_ap_ar","ns_ap_miss","ns_ts","ns_st_ca","ns_st_cp","ns_st_er","ca_ns_st_er","cb_ns_st_er","cc_ns_st_er","cd_ns_st_er","ns_st_pe","ns_st_ui","ca_ns_st_ui","cb_ns_st_ui","cc_ns_st_ui","cd_ns_st_ui","ns_st_bc","ns_st_bt","ns_st_bp","ns_st_pc","ns_st_pp","ns_st_br","ns_st_ub","ns_st_vo","ns_st_ws","ns_st_pl","ns_st_pr","ns_st_ep","ns_st_ty","ns_st_ct","ns_st_cs","ns_st_ge","ns_st_st","ns_st_dt","ns_st_de","ns_st_pu","ns_st_cu","ns_st_fee","ns_ap_i1","ns_ap_i2","ns_ap_i3","ns_ap_i4","ns_ap_i5","ns_ap_i6","ns_ap_referrer","ns_clid","ns_campaign","ns_source","ns_mchannel","ns_linkname","ns_fee","gclid","utm_campaign","utm_source","utm_medium","utm_term","utm_content","c3","ca3","cb3","cc3","cd3","c4","ca4","cb4","cc4","cd4","c5","ca5","cb5","cc5","cd5","c6","ca6","cb6","cc6","cd6","c10","c11","c13","c14","c15","c16","c7","c8","c9","ns_ap_er"]},b=function(){function n(e,t){var i=t[e];null!=i&&(r[e]=i)}var t,r,s=this,o=0,a=0,l=0,i=0,c=0,u=0;J.extend(this,{reset:function(e){null!=e&&0<e.length?J.filterMap(r,e):r={},r.hasOwnProperty("ns_st_cl")||(r.ns_st_cl="0"),r.hasOwnProperty("ns_st_pn")||(r.ns_st_pn="1"),r.hasOwnProperty("ns_st_tp")||(r.ns_st_tp="1"),s.setPauses(0),s.setStarts(0),s.setBufferingTime(0),s.setBufferingTimestamp(-1),s.setPlaybackTime(0),s.setPlaybackTimestamp(-1)},setLabels:function(e,t){null!=e&&J.extend(r,e),s.setRegisters(r,t)},getLabels:function(){return r},setLabel:function(e,t){var i={};i[e]=t,s.setLabels(i,null)},getLabel:function(e){return r[e]},getClipId:function(){return(void 0===t||null==t)&&s.setClipId("1"),t},setClipId:function(e){t=e},setRegisters:function(e,t){var i=e.ns_st_cn;null!=i&&(s.setClipId(i),delete e.ns_st_cn),null!=(i=e.ns_st_bt)&&(l=Number(i),delete e.ns_st_bt),n("ns_st_cl",e),n("ns_st_pn",e),n("ns_st_tp",e),n("ns_st_ub",e),n("ns_st_br",e),t!=te.PLAYING&&null!=t||null!=(i=e.ns_st_sq)&&(a=Number(i),delete e.ns_st_sq),t!=te.BUFFERING&&null!=(i=e.ns_st_pt)&&(c=Number(i),delete e.ns_st_pt),t!=te.PAUSED&&t!=te.IDLE&&null!=t||null!=(i=e.ns_st_pc)&&(o=Number(i),delete e.ns_st_pc)},createLabels:function(e,t){var i=t||{};return i.ns_st_cn=s.getClipId(),i.ns_st_bt=String(s.getBufferingTime()),e!=ee.PLAY&&null!=e||(i.ns_st_sq=String(a)),e!=ee.PAUSE&&e!=ee.END&&e!=ee.KEEP_ALIVE&&e!=ee.HEART_BEAT&&null!=e||(i.ns_st_pt=String(s.getPlaybackTime()),i.ns_st_pc=String(o)),J.extend(i,s.getLabels()),i},incrementPauses:function(){o++},incrementStarts:function(){a++},getBufferingTime:function(){var e=l;return 0<=i&&(e+=+new Date-i),e},setBufferingTime:function(e){l=e},getPlaybackTime:function(){var e=c;return 0<=u&&(e+=+new Date-u),e},setPlaybackTime:function(e){c=e},getPlaybackTimestamp:function(){return u},setPlaybackTimestamp:function(e){u=e},getBufferingTimestamp:function(){return i},setBufferingTimestamp:function(e){i=e},getPauses:function(){return o},setPauses:function(e){o=e},getStarts:function(){return a},setStarts:function(e){a=e}}),r={},s.reset()},ne=function(){var n,i,r=this,s=null,o=0,a=0,l=0,c=0,u=0,t=0,d=!1;J.extend(this,{reset:function(e){null!=e&&0<e.length?J.filterMap(i,e):i={},r.setPlaylistId(+new Date+"_"+t),r.setBufferingTime(0),r.setPlaybackTime(0),r.setPauses(0),r.setStarts(0),r.setRebufferCount(0),d=!1},setLabels:function(e,t){null!=e&&J.extend(i,e),r.setRegisters(i,t)},getLabels:function(){return i},setLabel:function(e,t){var i={};i[e]=t,r.setLabels(i,null)},getLabel:function(e){return i[e]},getClip:function(){return s},getPlaylistId:function(){return n},setPlaylistId:function(e){n=e},setRegisters:function(e,t){var i=e.ns_st_sp;null!=i&&(o=Number(i),delete e.ns_st_sp),null!=(i=e.ns_st_bc)&&(l=Number(i),delete e.ns_st_bc),null!=(i=e.ns_st_bp)&&(c=Number(i),delete e.ns_st_bp),null!=(i=e.ns_st_id)&&(n=i,delete e.ns_st_id),t!=te.BUFFERING&&null!=(i=e.ns_st_pa)&&(u=Number(i),delete e.ns_st_pa),t!=te.PAUSED&&t!=te.IDLE&&null!=t||null!=(i=e.ns_st_pp)&&(a=Number(i),delete e.ns_st_pp)},createLabels:function(e,t){var i=t||{};return i.ns_st_bp=String(r.getBufferingTime()),i.ns_st_sp=String(o),i.ns_st_id=String(n),0<l&&(i.ns_st_bc=String(l)),e!=ee.PAUSE&&e!=ee.END&&e!=ee.KEEP_ALIVE&&e!=ee.HEART_BEAT&&null!=e||(i.ns_st_pa=String(r.getPlaybackTime()),i.ns_st_pp=String(a)),e!=ee.PLAY&&null!=e||r.didFirstPlayOccurred()||(i.ns_st_pb="1",r.setFirstPlayOccurred(!0)),J.extend(i,r.getLabels()),i},incrementStarts:function(){o++},incrementPauses:function(){a++,s.incrementPauses()},setPlaylistCounter:function(e){t=e},incrementPlaylistCounter:function(){t++},addPlaybackTime:function(e){if(0<=s.getPlaybackTimestamp()){var t=e-s.getPlaybackTimestamp();s.setPlaybackTimestamp(-1),s.setPlaybackTime(s.getPlaybackTime()+t),r.setPlaybackTime(r.getPlaybackTime()+t)}},addBufferingTime:function(e){if(0<=s.getBufferingTimestamp()){var t=e-s.getBufferingTimestamp();s.setBufferingTimestamp(-1),s.setBufferingTime(s.getBufferingTime()+t),r.setBufferingTime(r.getBufferingTime()+t)}},getBufferingTime:function(){var e=c;return 0<=s.getBufferingTimestamp()&&(e+=+new Date-s.getBufferingTimestamp()),e},setBufferingTime:function(e){c=e},getPlaybackTime:function(){var e=u;return 0<=s.getPlaybackTimestamp()&&(e+=+new Date-s.getPlaybackTimestamp()),e},setPlaybackTime:function(e){u=e},getStarts:function(){return o},setStarts:function(e){o=e},getPauses:function(){return a},setPauses:function(e){a=e},getRebufferCount:function(){return l},incrementRebufferCount:function(){l++},setRebufferCount:function(e){l=e},didFirstPlayOccurred:function(){return d},setFirstPlayOccurred:function(e){d=e}}),s=new b,i={},r.reset()},S=(function(e){function n(e,t){return s[a]||i(e,t)}function r(){a=-1;for(var e=0;e<=o;e++)if(s.hasOwnProperty(String(e))){a=e;break}return re.StreamSense.activeIndex=a}function i(e,t){return t=t||null,(e=e||null)&&"object"==typeof e&&(t=e,e=null),s[++o]=new re.StreamSense(t,e),r(),s[o]}function t(){var e=!1,t=a;if("number"==typeof arguments[0]&&isFinite(arguments[0]))t=arguments[0];else if(arguments[0]instanceof re.StreamSense)for(var i in s)if(s.hasOwnProperty(i)&&s[i]===arguments[0]){t=i;break}return s.hasOwnProperty(String(t))&&(e=s[t],delete s[t],e.reset(),r()),e}var s={},o=-1,a=-1;J.extend(e,{activeIndex:a,newInstance:i,new:i,destroyInstance:t,destroy:t,newPlaylist:function(e){return e=e||{},n().setPlaylist(e),n().getPlaylist()},newClip:function(e,t,i){return e=e||{},"number"==typeof t&&(e.ns_st_cn=t),n().setClip(e,i),n().getClip()},notify:function(e,t,i){return void 0!==e&&(i=i||null,t=t||{},n().notify(e,t,i))},setLabels:function(e){void 0!==e&&n().setLabels(e)},getLabels:function(){return n().getLabels()},setPlaylistLabels:function(e){void 0!==e&&n().getPlaylist().setLabels(e)},getPlaylistLabels:function(){return n().getPlaylist().getLabels()},setClipLabels:function(e){void 0!==e&&n().getClip().setLabels(e)},getClipLabels:function(){return n().getClip().getLabels()},resetInstance:function(e){return n().reset(e||{})},resetPlaylist:function(e){return n().getPlaylist().reset(e||{})},resetClip:function(e){return n().getClip().reset(e||{})},viewEvent:function(e){return e=e||{},n().viewNotify(null,e)},customEvent:function(e,t){return 2<arguments.length&&(e=arguments[1],t=arguments[2]),e=e||{},"number"==typeof t&&(e.ns_st_po=t),n().customNotify(e,t)},exportState:function(){return n().exportState()},importState:function(e){n().importState(e)}})}(A=function(e,t,i){function n(e){var t=0;if(null!=m)for(var i=0;i<m.length;i++){var n=m[i],r=n.playingtime;if(!r||e<r){t=n.interval;break}}return t}function C(){s();var e=n(Y.getClip().getPlaybackTime());if(0<e){var t=0<j?j:e;d=Z.setTimeout(r,t)}j=0}function A(){s();var e=n(Y.getClip().getPlaybackTime());j=e-Y.getClip().getPlaybackTime()%e,null!=d&&s()}function E(){q=j=0}function r(){q++,D(L(ee.HEART_BEAT,null)),j=0,C()}function s(){null!=d&&(Z.clearTimeout(d),d=null)}function I(){y(),c=Z.setTimeout(o,v)}function o(){D(L(ee.KEEP_ALIVE,null)),H++,I()}function y(){null!=c&&(Z.clearTimeout(c),c=null)}function b(){B==te.PLAYING&&(Y.incrementRebufferCount(),Y.incrementPauses(),D(L(ee.PAUSE,null)),H++,B=te.PAUSED)}function S(){null!=M&&(Z.clearTimeout(M),M=null)}function l(e){return e==te.PLAYING||e==te.PAUSED}function T(){x&&(Z.clearTimeout(x),x=null)}function w(e,t,i){if(T(),i)x=Z.setTimeout((m=e,v=t,function(){w(m,v)}),i);else if(null!=(_=e)&&R()!=_){var n=R(),r=V,s=O(t),o=0<=r?s-r:0;(function(e,t){var i=O(t);if(e==te.PLAYING)Y.addPlaybackTime(i),A(),y();else if(e==te.BUFFERING)Y.addBufferingTime(i),S();else if(e==te.IDLE){var n=J.getKeys(Y.getClip().getLabels());Y.getClip().reset(n)}})(R(),t),d=e,g=O(h=t),f=-1,(p=h).hasOwnProperty("ns_st_po")&&(f=J.getInteger(p.ns_st_po)),W=f,d==te.PLAYING?(C(),I(),Y.getClip().setPlaybackTimestamp(g),k(d)&&(Y.getClip().incrementStarts(),Y.getStarts()<1&&Y.setStarts(1))):d==te.PAUSED?k(d)&&Y.incrementPauses():d==te.BUFFERING?(Y.getClip().setBufferingTimestamp(g),K&&(S(),U.isPauseOnBufferingEnabled()&&k(te.PAUSED)&&(M=Z.setTimeout(b,G)))):d==te.IDLE&&E(),u=R(),u,N=e,V=+new Date;for(var a=0,l=F.length;a<l;a++)F[a](n,e,t,o);P(t),Y.setRegisters(t,e),Y.getClip().setRegisters(t,e);var c=L(te.toEventType(e),t);J.extend(c,t),k(N)&&(D(c),B=N,H++)}var u,d,h,g,p,f,_,m,v}function P(e){var t=e.ns_st_mp;null!=t&&(h=t,delete e.ns_st_mp),null!=(t=e.ns_st_mv)&&(g=t,delete e.ns_st_mv),null!=(t=e.ns_st_ec)&&(H=Number(t),delete e.ns_st_ec)}function D(e,t){var i;void 0===t&&(t=!0),t&&(i=e,p=L(null),J.extend(p,i));var n,r,s,o=U.getPixelURL();if(u){if(n=u.getAppContext(),r=u.getSalt(),s=u.getPixelURL(),null!=n&&null!=r&&0!=r.length&&null!=s&&0!=s.length){var a=Q.am,l=Q.et,c=a.newApplicationMeasurement(u,l.HIDDEN,e,o);u.getQueue().offer(c)}}else o&&Z.httpGet(function(e,t){for(var i,n=X.encodeURIComponent||escape,r=[],s=ie.LABELS_ORDER,o=e.split("?"),a=o[0],l=o[1].split("&"),c=0,u=l.length;c<u;c++){var d=l[c].split("="),h=unescape(d[0]),g=unescape(d[1]);h&&(t[h]=g)}for(var p={},f=0,_=s.length;f<_;f++){var m=s[f];if(t.hasOwnProperty(m)){var v=t[m];void 0!==v&&null!=v&&(p[m]=!0,r.push(n(m)+"="+n(t[m])))}}for(var C in t)if(t.hasOwnProperty(C)){if(p[C])continue;var A=t[C];void 0!==A&&null!=A&&r.push(n(C)+"="+n(t[C]))}i=(i=a+"?"+r.join("&"))+(i.indexOf("&c8=")<0?"&c8="+n($.title):"")+(i.indexOf("&c7=")<0?"&c7="+n($.URL):"")+(i.indexOf("&c9=")<0?"&c9="+n($.referrer):"");var E=J.browserAcceptsLargeURLs()?ie.URL_LENGTH_LIMIT:ie.RESTRICTED_URL_LENGTH_LIMIT;if(i.length>E&&0<i.indexOf("&")){var I=i.substr(0,E-8).lastIndexOf("&");i=(i.substring(0,I)+"&ns_cut="+n(i.substring(I+1))).substr(0,E)}return i}(o,e))}function k(e){return(e!=te.PAUSED&&e!=te.IDLE||B!=te.IDLE&&null!=B)&&(e!=te.BUFFERING&&B!=e)}function O(e){var t=-1;return e.hasOwnProperty("ns_ts")&&(t=Number(e.ns_ts)),t}function R(){return N}function L(){var e,t;t=1==arguments.length?(e=te.toEventType(N),arguments[0]):(e=arguments[0],arguments[1]);var i={};if("undefined"!=typeof document){var n=document;i.c7=n.URL,i.c8=n.title,i.c9=n.referrer}return null!=t&&J.extend(i,t),i.hasOwnProperty("ns_ts")||(i.ns_ts=String(+new Date)),null!=e&&!i.hasOwnProperty("ns_st_ev")&&(i.ns_st_ev=ee.toString(e)),J.extend(i,U.getLabels()),function(e,t){var i=t||{};if(i.ns_st_ec=String(H),!i.hasOwnProperty("ns_st_po")){var n=W,r=O(i);(e==ee.PLAY||e==ee.KEEP_ALIVE||e==ee.HEART_BEAT||null==e&&N==te.PLAYING)&&(n+=r-Y.getClip().getPlaybackTimestamp()),i.ns_st_po=J.getInteger(n)}e==ee.HEART_BEAT&&(i.ns_st_hc=String(q))}(e,i),Y.createLabels(e,i),Y.getClip().createLabels(e,i),i.hasOwnProperty("ns_st_mp")||(i.ns_st_mp=h),i.hasOwnProperty("ns_st_mv")||(i.ns_st_mv=g),i.hasOwnProperty("ns_st_ub")||(i.ns_st_ub="0"),i.hasOwnProperty("ns_st_br")||(i.ns_st_br="0"),i.hasOwnProperty("ns_st_pn")||(i.ns_st_pn="1"),i.hasOwnProperty("ns_st_tp")||(i.ns_st_tp="1"),i.hasOwnProperty("ns_st_it")||(i.ns_st_it="c"),i.ns_st_sv=ie.STREAMSENSE_VERSION,i.ns_type="hidden",i}var a,x,N,u,M,c,d,B,h,g,p,F,U=this,f=500,_=null,V=0,W=0,H=0,Y=null,K=!0,m=ie.DEFAULT_HEARTBEAT_INTERVAL,v=ie.DEFAULT_KEEP_ALIVE_INTERVAL,G=ie.DEFAULT_PAUSED_ON_BUFFERING_INTERVAL,j=0,q=0,z=!1,Q={};i?Z.setPlatformAPI(i):Z.autoSelect(),J.extend(this,{reset:function(e){Y.reset(e),Y.setPlaylistCounter(0),Y.setPlaylistId(+new Date+"_1"),Y.getClip().reset(e),null==e||e.isEmpty()?a={}:J.filterMap(a,e),H=1,q=0,A(),E(),y(),S(),T(),N=te.IDLE,V=-1,B=null,h=ie.DEFAULT_PLAYERNAME,g=ie.STREAMSENSE_VERSION,p=null},setPauseOnBufferingInterval:function(e){G=e},getPauseOnBufferingInterval:function(){return G},setKeepAliveInterval:function(e){v=e},getKeepAliveInterval:function(){return v},setHeartbeatIntervals:function(e){m=e},notify:function(){var e,t,i,n;if(t=arguments[0],n=3==arguments.length?(i=arguments[1],arguments[2]):(i={},arguments[1]),ee.toString(t)){var r;e=(r=t)==ee.PLAY?te.PLAYING:r==ee.PAUSE?te.PAUSED:r==ee.BUFFER?te.BUFFERING:r==ee.END?te.IDLE:null;var s,o=J.extend({},i);if(O(s=o)<0&&(s.ns_ts=String(+new Date)),o.hasOwnProperty("ns_st_po")||(o.ns_st_po=J.getInteger(n).toString()),t==ee.PLAY||t==ee.PAUSE||t==ee.BUFFER||t==ee.END)U.isThrottlingEnabled()&&l(N)&&l(e)&&(N!=te.PLAYING||e!=te.PAUSED||x)?w(e,o,f):w(e,o);else{var a=L(t,o);J.extend(a,o),D(a,!1),H++}}},getLabels:function(){return a},getState:function(){return N},setLabels:function(e){for(var t in e)e.hasOwnProperty(t)&&U.setLabel(t,e[t])},getLabel:function(e){return a[e]},setLabel:function(e,t){null==t?delete a[e]:a[e]=t},setPixelURL:function(e){if(null==e||0==e.length)return null;var t=decodeURIComponent||unescape,i=e.indexOf("?");if(0<=i){if(i<e.length-1){for(var n=e.substring(i+1).split("&"),r=0,s=n.length;r<s;r++){var o=n[r].split("=");2==o.length?U.setLabel(o[0],t(o[1])):1==o.length&&U.setLabel(ie.PAGE_NAME_LABEL,t(o[0]))}e=e.substring(0,i+1)}}else e+="?";return _=e},getPixelURL:function(){return _||("undefined"!=typeof ns_p&&"string"==typeof ns_p.src?_=ns_p.src.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):"string"==typeof ns_pixelUrl?_=ns_pixelUrl.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):null)},isPauseOnBufferingEnabled:function(){return K},setPauseOnBufferingEnabled:function(e){K=e},isThrottlingEnabled:function(){return z},setThrottlingEnabled:function(e){z=e},setThrottlingDelay:function(e){e&&0<e&&(f=e)},getThrottlingDelay:function(){return f},setClip:function(e,t){var i=!1;return N==te.IDLE&&(Y.getClip().reset(),Y.getClip().setLabels(e,null),t&&Y.incrementStarts(),i=!0),i},setPlaylist:function(e){var t=!1;return N==te.IDLE&&(Y.incrementPlaylistCounter(),Y.reset(),Y.getClip().reset(),Y.setLabels(e,null),t=!0),t},importState:function(e){reset();var t=J.extend({},e);Y.setRegisters(t,null),Y.getClip().setRegisters(t,null),P(t),H++},exportState:function(){return p},getVersion:function(){return ie.STREAMSENSE_VERSION},addListener:function(e){F.push(e)},removeListener:function(e){F.splice(J.indexOf(e,F),1)},getClip:function(){return Y.getClip()},getPlaylist:function(){return Y},setHttpGet:function(e){"function"==typeof e&&(Z.httpGet=e)},setHttpPost:function(e){"function"==typeof e&&(Z.httpPost=e)}}),J.extend(this,{adNotify:function(e,t,i){(t=t||{}).ns_st_ad=1,e>=ee.AD_PLAY&&e<=ee.AD_CLICK&&U.notify(e,t,i)},customNotify:function(e,t){U.notify(ee.CUSTOM,e,t)},viewNotify:function(e,t){(e=e||U.getPixelURL())&&function(e,t){var i=e||"",n=X.comScore||X.sitestat||function(e){var t,i,n,r,s,o="comScore=",a=$.cookie,l="",c=J.browserAcceptsLargeURLs()?ie.URL_LENGTH_LIMIT:ie.RESTRICTED_URL_LENGTH_LIMIT,u=X.encodeURIComponent||escape;if(a.indexOf(o)+1)for(r=0,s=(n=a.split(";")).length;r<s;r++)(i=n[r].indexOf(o))+1&&(l="&"+unescape(n[r].substring(i+o.length)));(e+="&ns__t="+ +new Date+"&ns_c="+($.characterSet||$.defaultCharset||"")+l).length>c&&0<e.indexOf("&")&&(t=e.substr(0,c-8).lastIndexOf("&"),e=(e.substring(0,t)+"&ns_cut="+u(e.substring(t+1))).substr(0,c)),Z.httpGet(e),"undefined"==typeof ns_p&&(ns_p={src:e}),ns_p.lastMeasurement=e};if(void 0!==t){var r=[],s=X.encodeURIComponent||escape;for(var o in t)t.hasOwnProperty(o)&&r.push(s(o)+"="+s(t[o]));/[\?\&]$/.test(i)||(i+="&"),i+=r.join("&")}n(i)}(e,t)}}),re.comScore&&(Q=re.comScore.exports,u=Q.c()),a={},H=1,N=te.IDLE,Y=new ne,K=!(M=null),d=null,q=0,E(),z=!1,B=x=c=null,W=0,F=[],U.reset(),e&&U.setLabels(e),t&&U.setPixelURL(t)}),A);return S.AdEvents=y,S.PlayerEvents=ee,S.InternalStates=te,S.getPlatformAPI=function(){return Z},S}(),re.StreamingTag=re.StreamingTag||(v=re.Utils,C=re.StreamSense,A=re.StreamSense.PlayerEvents,re.StreamSense.AdEvents,E=re.StreamSense.InternalStates||null,I=null!=re.StreamSense.InternalStates,function(t){function r(e){return v.exists(e)||(e={}),v.exists(e.ns_st_ci)||(e.ns_st_ci="0"),v.exists(e.c3)||(e.c3="*null"),v.exists(e.c4)||(e.c4="*null"),v.exists(e.c6)||(e.c6="*null"),e}function i(e){return 0<u&&u<=e?d+=e-u:d=0,d}function n(e){p.getState()!=E.IDLE&&p.getState()!=E.PAUSED?p.notify(A.END,i(e)):p.getState()==E.PAUSED&&p.notify(A.END,d)}function s(e,t,i){if(v.exists(e)&&v.exists(t)&&v.exists(i)){var n=t[e],r=i[e];return v.exists(n)&&v.exists(r)&&n===r}return!1}function o(e,t){n(e);var i={ns_st_cn:++c,ns_st_pn:"1",ns_st_tp:"0"};v.extend(i,t),p.setClip(i),h=t,u=e,d=0,p.notify(A.PLAY,d)}function a(e){var t=+new Date;n(t),c++,e=r(e);var i={ns_st_cn:c,ns_st_pn:"1",ns_st_tp:"1",ns_st_ad:"1"};v.extend(i,e),p.setClip(i),d=0,p.notify(A.PLAY,d),u=t,g=!1}function l(e,t){var i,n=+new Date;e=r(e),m==_.None&&(m=t),g&&m==t&&s("ns_st_ci",h,i=e)&&s("c3",h,i)&&s("c4",h,i)&&s("c6",h,i)?(p.getClip().setLabels(e),p.getState()!=E.PLAYING&&(u=n,p.notify(A.PLAY,d))):o(n,e),g=!0,m=t}var c=0,u=0,d=0,h=null,g=!1,p=null,f=!1,_={None:0,AudioContent:1,VideoContent:2},m=_.None;v.extend(this,{playAdvertisement:function(){p&&(f&&console&&console.warn("Calling deprecated function 'playAdvertisement'. Please call 'playVideoAdvertisement' or 'playAudioAdvertisement' functions instead."),a({ns_st_ct:"va"}))},playVideoAdvertisement:function(e){if(p){var t={ns_st_ct:"va"};e&&v.extend(t,e),a(t)}},playAudioAdvertisement:function(e){if(p){var t={ns_st_ct:"aa"};e&&v.extend(t,e),a(t)}},playContentPart:function(e){if(p){f&&console&&console.warn("Calling deprecated function 'playContentPart'. Please call 'playVideoContentPart' or 'playAudioContentPart' functions instead.");var t={ns_st_ct:"vc"};e&&v.extend(t,e),l(t,_.VideoContent)}},playVideoContentPart:function(e){if(p){var t={ns_st_ct:"vc"};e&&v.extend(t,e),l(t,_.VideoContent)}},playAudioContentPart:function(e){if(p){var t={ns_st_ct:"ac"};e&&v.extend(t,e),l(t,_.AudioContent)}},stop:function(){if(p){var e=+new Date;p.notify(A.PAUSE,i(e))}}}),function(){if(I)if(re.comScore)(p=new C).setLabel("ns_st_it","r");else if(v.exists(t))if(f=v.isTrue(t.debug),v.exists(t.customerC2)&&0<t.customerC2.length){var e=t.secure?"https://sb":"http"+("s"==document.location.href.charAt(4)?"s://sb":"://b");(p=new C).setPixelURL(e+".scorecardresearch.com/p?c1=2"),p.setLabel("c2",t.customerC2),p.setLabel("ns_st_it","r")}else f&&console&&console.log("Warning: customerC2 is not provided (or incorrect) in the StreamingTag configuration.")}()}),re}),define("rofl/lib/string.clean",["rofl/lib/utils","antie/application","rofl/lib/sanitize.encoding"],function(a,l,c){"use strict";var u=[[/…/g,"..."],[/&#13;&#10;/g,"<br />"],[/\n/g,""]],d=[[/<\/?blockquote[^>]*>/g,""],[/<\/?script[^>]*>/g,""],[/<\/?iframe[^>]*>/g,""],[/<\/?a[^>]*>/g,""],[/<\/?span[^>]*>/g,""],[/(<br\s?\/?>\s*)+/g,"<br />"],[/<p>\s*<\/p>/g,""]],h=[[/<p[^>]*>/g,""],[/<\/p[^>]*>/g,"<br/><br/>"],[/(<br\s?\/?>\s*)+$/g,""]],g=!1,t={convert:function(e,t){var i,n,r,s,o;for(!1===g&&(s=!(o=l.getCurrentApplication().getDevice().getConfig()).content||!o.content.validation||!0!==o.content.validation.strict,g={useStrictHTML:!s,convertParagraphsToBr:!1}),t=a.extend(g,t),i=0,n=u.length;i<n;i++)r=u[i],e=e.replace(r[0],r[1]);for(e=e.replace(/[^\x00-\xFD]/g,""),i=0,n=d.length;i<n;i++)r=d[i],e=e.replace(r[0],r[1]);if(t.useStrictHTML&&(e=c.decode(e)),t.convertParagraphsToBr)for(i=0,n=h.length;i<n;i++)r=h[i],e=e.replace(r[0],r[1]);return e.replace("&","&amp;")}};return String.prototype.clean=function(e){return t.convert(this,e)},t}),define("rofl/lib/string.format",["rofl/lib/utils"],function(i){"use strict";String.prototype.format=function(e){var t=Array.prototype.slice.call(arguments);return t.unshift(this),i.formatString.apply(null,t)}}),define("rofl/lib/string.truncate",function(){"use strict";String.prototype.truncate=function(e,t){var i=this.length>e,n=i?this.substr(0,e-1):this;return n=t&&i?n.substr(0,n.lastIndexOf(" ")):n,i?n+"...":n}}),define("rofl/lib/utils",function(){"use strict";var r=Array.prototype,e=Object.prototype,o=r.forEach,t=r.filter,a=r.map,s=Function.prototype.bind,i=e.keys,n=e.toString,l=r.slice,c=Array.from,u={isObject:function(e,t){return Object(e)===e&&(!t||e.constructor===Object)},isBool:function(e){return!0===e||!1===e||"[object Boolean]"===n.call(e)},isUndefined:function(e){return void 0===e},isArray:r.isArray||function(e){return"[object Array]"===n.call(e)},isString:function(e){return"[object String]"===n.call(e)},isFunction:function(e){return"[object Function]"===n.call(e)},isNumber:function(e){return"[object Number]"===n.call(e)},hasop:function(e,t){return e.hasOwnProperty(t)},isArguments:function(){var e=function(e){return"[object Arguments]"===n.call(e)};return e(arguments)?e:function(e){return!(!e||!u.hasop(e,"callee"))}}(),each:function(e,t,i){var n,r,s;if(null!==e&&!u.isUndefined(e))if(o&&e.forEach===o)e.forEach(t,i);else if(u.isArray(e)||u.isArguments(e))for(n=0,r=e.length;n<r;n++)t.call(i,e[n],n,e);else for(s in e)u.hasop(e,s)&&t.call(i,e[s],s,e)},filter:function(i,n,r){var s=[];return u.isArray(i)?t&&i.filter===t?i.filter(n,r):(u.each(i,function(e,t){n.call(r,e,t,i)&&s.push(e)}),s):s},map:function(e,t,i){var n,r,s,o=0;if(!u.isFunction(t))throw new TypeError(t+" is not a function");if(a&&e.map===a)return e.map(t,i);for(r=(s=Object(e)).length>>>0,n=new Array(r);o<r;)o in s&&(n[o]=t.call(i,s[o],o,s)),o++;return n},indexOf:function(e,t,i){var n;if(!u.isArray(e))return-1;if(e.indexOf===r.indexOf)return e.indexOf(t,i);for(n=e.length,i=+i||0,Math.abs(i)===1/0&&(i=0),i<0&&(i+=n)<0&&(i=0);i<n;i++)if(e[i]===t)return i;return-1},bind:function(t,i){var n,e,r;if(s&&t.bind===s)return s.apply(t,l.call(arguments,1));if(!u.isFunction(t))throw new TypeError;return n=l.call(arguments,2),e=function(){var e=this instanceof r&&i?this:i;return t.apply(e,n.concat(l.call(arguments)))},(r=function(){}).prototype=t.prototype,e.prototype=new r,e},extend:function(){var e=l.call(arguments),i=e.shift(),n=!0===e[e.length-1];return n&&e.pop(),u.isObject(i)&&u.each(e,function(e){u.isObject(e)||(e={}),u.each(e,function(e,t){n&&u.isObject(i[t])?u.extend(i[t],e,!0):i[t]=e})}),i},now:Date.now||function(){return+new Date},once:function(e){var t,i=!1;return function(){return i||(i=!0,t=e.apply(this,arguments),e=null),t}},keys:i||function(e){var t,i=[];if(!u.isObject(e))throw new TypeError(e+" is not an object");for(t in e)u.hasop(e,t)&&i.push(t);return i},serialize:function(e,t){var i,n,r,s=[];for(n in e)u.hasop(e,n)&&(i=t?t+"["+n+"]":n,r=e[n],s.push("object"==typeof r?u.serialize(r,i):encodeURIComponent(i)+"="+encodeURIComponent(r)));return s.join("&")},addToQueryStringOfURL:function(e,t){return e+=(~e.indexOf("?")?"&":"?")+u.serialize(t)},isEmpty:function(e){var t;if(""===e||0===e||null===e||!1===e||u.isUndefined(e))return!0;if(u.isArray(e)&&0===e.length)return!0;if(u.isObject(e)){for(t in e)if(u.hasop(e,t))return!1;return!0}return!1},clone:function(e){return u.isObject(e)?u.isArray(e)?e.slice():u.extend({},e):e},hasNested:function(e){var t,i,n=l.call(arguments,1),r=function(e){return!u.isUndefined(e)};for(u.isFunction(n[n.length-1])&&(r=n.pop()),t=0,i=n.length;t<i;t++)e=(e=e||{})[n[t]];return r(e)},getNested:function(){var e=l.call(arguments);return e.push(function(e){return e}),u.hasNested.apply(null,e)},createGuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},formatString:function(e){var i=l.call(arguments,1);return e.replace(/{(\d+)}/g,function(e,t){return u.isUndefined(i[t])?e:i[t]})},formatTemplate:function(e,r){return r?e.replace(/{{([a-z0-9_\. ]+)}}/gi,function(e,t){var i,n;return t=t.trim(),n=r[t],u.isUndefined(n)&&~t.indexOf(".")&&((i=t.split(".")).unshift(r),n=u.getNested.apply(null,i)),u.isUndefined(n)?e:n}):e},values:function(e){var t,i=[];if(!u.isObject(e))throw new TypeError(e+" is not an object");for(t in e)u.hasop(e,t)&&i.push(e[t]);return i},contains:function(e,t,i){return this.isArray(e)||(e=this.values(e)),"number"!=typeof i&&(i=0),0<=this.indexOf(e,t,i)},arrayFrom:function(e,t){var i,n,r,s,o=0;if(c&&e.from===c)return c(e,t);for(r=Object(e),n=e.length,i=new Array(n);o<n;)s=r[o],i[o]=t?t(s,o):s,o+=1;return i.length=n,i}};return u}),define("rofl/lib/xml",["rofl/application"],function(a){"use strict";var c=null;function i(e,t){var l={toObj:function(e){var t={};if(1==e.nodeType){if(e.attributes.length)for(var i=0;i<e.attributes.length;i++)t["@"+e.attributes[i].nodeName]=(e.attributes[i].nodeValue||"").toString();if(e.firstChild){for(var n=0,r=0,s=!1,o=e.firstChild;o;o=o.nextSibling)1==o.nodeType?s=!0:3==o.nodeType&&o.nodeValue.match(/[^ \f\n\r\t\v]/)?n++:4==o.nodeType&&r++;if(s)if(n<2&&r<2){l.removeWhite(e);for(o=e.firstChild;o;o=o.nextSibling)3==o.nodeType?t["#text"]=l.escape(o.nodeValue):4==o.nodeType?t["#cdata"]=l.escape(o.nodeValue):t[o.nodeName]?t[o.nodeName]instanceof Array?t[o.nodeName][t[o.nodeName].length]=l.toObj(o):t[o.nodeName]=[t[o.nodeName],l.toObj(o)]:t[o.nodeName]=l.toObj(o)}else e.attributes.length?t["#text"]=l.escape(l.innerXml(e)):t=l.escape(l.innerXml(e));else if(n)e.attributes.length?t["#text"]=l.escape(l.innerXml(e)):t=l.escape(l.innerXml(e));else if(r)if(1<r)t=l.escape(l.innerXml(e));else for(o=e.firstChild;o;o=o.nextSibling)t["#cdata"]=l.escape(o.nodeValue)}e.attributes.length||e.firstChild||(t=null)}else 9==e.nodeType?t=l.toObj(e.documentElement):(null===c&&(c=a.getCurrentApplication().getDevice().getLogger()),c).log("unhandled node type: "+e.nodeType);return t},toJson:function(e,t,i){var n=t?'"'+t+'"':"";if(e instanceof Array){for(var r=0,s=e.length;r<s;r++)e[r]=l.toJson(e[r],"",i+"\t");n+=(t?":[":"[")+(1<e.length?"\n"+i+"\t"+e.join(",\n"+i+"\t")+"\n"+i:e.join(""))+"]"}else if(null==e)n+=(t&&":")+"null";else if("object"==typeof e){var o=[];for(var a in e)o[o.length]=l.toJson(e[a],a,i+"\t");n+=(t?":{":"{")+(1<o.length?"\n"+i+"\t"+o.join(",\n"+i+"\t")+"\n"+i:o.join(""))+"}"}else n+="string"==typeof e?(t&&":")+'"'+e.toString()+'"':(t&&":")+e.toString();return n},innerXml:function(e){var t="";if("innerHTML"in e)t=e.innerHTML;else for(var r=function(e){var t="";if(1==e.nodeType){t+="<"+e.nodeName;for(var i=0;i<e.attributes.length;i++)t+=" "+e.attributes[i].nodeName+'="'+(e.attributes[i].nodeValue||"").toString()+'"';if(e.firstChild){t+=">";for(var n=e.firstChild;n;n=n.nextSibling)t+=r(n);t+="</"+e.nodeName+">"}else t+="/>"}else 3==e.nodeType?t+=e.nodeValue:4==e.nodeType&&(t+="<![CDATA["+e.nodeValue+"]]>");return t},i=e.firstChild;i;i=i.nextSibling)t+=r(i);return t},escape:function(e){return e.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(e){e.normalize();for(var t=e.firstChild;t;)if(3==t.nodeType)if(t.nodeValue.match(/[^ \f\n\r\t\v]/))t=t.nextSibling;else{var i=t.nextSibling;e.removeChild(t),t=i}else t=(1==t.nodeType&&l.removeWhite(t),t.nextSibling);return e}};9==e.nodeType&&(e=e.documentElement);var i=l.toJson(l.toObj(l.removeWhite(e)),e.nodeName,"\t");return"{\n"+t+(t?i.replace(/\t/g,t):i.replace(/\t|\n/g,""))+"\n}"}return{json2xml:function(e,t){return function(e,t){var l=function(e,t,i){var n="";if(e instanceof Array)for(var r=0,s=e.length;r<s;r++)n+=i+l(e[r],t,i+"\t")+"\n";else if("object"==typeof e){var o=!1;for(var a in n+=i+"<"+t,e)"@"==a.charAt(0)?n+=" "+a.substr(1)+'="'+e[a].toString()+'"':o=!0;if(n+=o?">":"/>",o){for(var a in e)"#text"==a?n+=e[a]:"#cdata"==a?n+="<![CDATA["+e[a]+"]]>":"@"!=a.charAt(0)&&(n+=l(e[a],a,i+"\t"));n+=("\n"==n.charAt(n.length-1)?i:"")+"</"+t+">"}}else n+=i+"<"+t+">"+e.toString()+"</"+t+">";return n},i="";for(var n in e)i+=l(e[n],n,"");return t?i.replace(/\t/g,t):i.replace(/\t|\n/g,"")}(e,t)},xml2json:function(e,t){return i(e,t)}}}),define("rofl/logger",["rofl/lib/utils"],function(t){"use strict";var r,s=[],e=["onAppSessionStart","onAppSessionEnd","onPlaybackStart","onPlaybackEnd","onAppError","onAppNotice","onPlaybackError","onApiError"];return r=function(e){for(var t,i=Array.prototype.slice.call(arguments,1),n=0,r=s.length;n<r;n++){t=s[n];try{t[e].apply(t,i)}catch(e){}}},{install:function(){t.each(e,function(e){this[e]=t.bind(r,null,e)},this),window.onerror=this._onJavaScriptError},uninstall:function(){window.onerror=null},addLogger:function(e){s.push(e)},getLoggers:function(){return s},_onJavaScriptError:function(e,t,i,n){r("onAppError",e+"\n\n"+t+" - "+i+":"+n)}}}),define("rofl/logging/graylog",["antie/class","antie/application","rofl/session","rofl/lib/promise","rofl/lib/utils","rofl/logging/graylog/pixel","rofl/logging/graylog/xhr"],function(e,r,t,i,n,s,o){"use strict";var a=null,l=!1,c=null,u=null,d=!1,h=function(e){if(d)return e.application_session=t.getId(),n.extend(e,c),l?o.getInstance().report(e):s.getInstance().report(e)},g=e.extend({init:function(){var e,t,i,n;if(u)throw new Error("Graylog::init called for a second time");if(e=(t=(a=r.getCurrentApplication()).getConfiguration()).graylog,i=a.getDevice(),!e)throw new Error("Your Application config must have 'graylog' configuration");d=e.enabled,(n=i.getConfig()).networking&&n.networking.supportsCORS&&(l=!0),c={application:a.getId(),application_version:t.version||"n/a",device_ua:navigator.userAgent,device_brand:i.getBrand(),device_type:i.getModel(),device_model:i.getExtendedModel(),device_firmware:i.getFirmware(),device_os:i.getOperatingSystem(),platform:"smarttv"}},onAppSessionStart:function(){return h({component:"application",type:"notice",short_message:"started"})},onAppSessionEnd:function(){return h({component:"application",type:"notice",short_message:"ended"})},onPlaybackStart:function(e,t,i){return h({component:"player",type:"notice",short_message:"started",stream_url:e,stream_position:t,drm_type:i})},onPlaybackEnd:function(e,t,i){return h({component:"player",type:"notice",short_message:"ended",stream_url:e,stream_position:t,drm_type:i})},onAppError:function(e){return h({component:"application",type:"error",short_message:e})},onAppNotice:function(e){return h({component:"application",type:"notice",short_message:e})},onPlaybackError:function(e,t,i,n){return h({component:"player",type:"error",short_message:n,stream_url:e,stream_position:t,drm_type:i})},onApiError:function(e,t,i,n){return h({component:"api",type:"error",short_message:n,api_url:e,api_method:t,status_code:i})}});return{getInstance:function(){return null===u&&(u=new g),u}}}),define("rofl/logging/graylog/abstract",["antie/class"],function(e){"use strict";return e.extend({init:function(){throw new Error("Cannot create instance of abstract class")},report:function(e){throw new Error("Not implemented yet.")}})}),define("rofl/logging/graylog/pixel",["rofl/application","rofl/lib/promise","rofl/lib/utils","rofl/logging/graylog/abstract"],function(t,i,n,e){"use strict";var r=null,s=null,o={application:"an",application_session:"sid",device_brand:"db",device_type:"dt",device_model:"dm",device_firmware:"fw",device_ua:"ua",component:"c",type:"t",short_message:"m",url:"url",position:"pos",drm_type:"drm",method:"rm",status_code:"sc"},a=function(e){var r={};return n.each(e,function(e,t){var i,n;r[(i=t,n=o[i],n||i)]=e}),r},l=e.extend({init:function(){var e;if(r)throw new Error("Graylog::Pixel::init called for a second time");if(!(e=t.getCurrentApplication().getConfiguration().graylog))throw new Error("Your Application config must have `graylog` configuration");if(!e.endpoint)throw new Error("Your Application config must have `endpoint` configuration for `graylog`");s=e.endpoint},report:function(e){var t;return e.device_ua&&delete e.device_ua,e=a(e),t=e,(new Image).src=s+"?"+n.serialize(t),i.resolve(e)}});return{getInstance:function(){return null===r&&(r=new l),r}}}),define("rofl/logging/graylog/xhr",["rofl/application","rofl/lib/promise","rofl/logging/graylog/abstract"],function(i,e,t){"use strict";var n=null,r=null,s=null,o=t.extend({init:function(){var e,t;if(n)throw new Error("Graylog::Xhr::init called for a second time");if(!(t=(e=i.getCurrentApplication()).getConfiguration().graylog))throw new Error("Your Application config must have `graylog` configuration");if(!t.endpoint)throw new Error("Your Application config must have `endpoint` configuration for `graylog`");s=t.endpoint,r=e.getDevice()},report:function(n){return e(function(t,i){var e={method:"POST",onLoad:function(e){t(e)},onError:function(e){i(e)}};e.data=r.encodeJson(n),r.loadURL(s,e)})}});return{getInstance:function(){return null===n&&(n=new o),n}}}),define("rofl/media/drm/agent",["antie/class"],function(e){"use strict";return e.extend({_drmItem:null,init:function(e){void 0!==(e=e||{}).drmItem&&this.setDrmItem(e.drmItem)},setDrmItem:function(e){this._drmItem=e},getDrmItem:function(){return this._drmItem},hasDrmItem:function(){return null!==this._drmItem},prepare:function(e){throw new Error("Must be implemented")}})}),define("rofl/media/drm/agent/alliance",["antie/devices/device","rofl/media/drm/agent","rofl/media/drm/agent/alliance/playready","rofl/media/drm/item","rofl/lib/promise"],function(e,t,i,n,r){"use strict";var s,o,a=null,l=document.getElementById("oipfdrmagent");return s=t.extend({prepare:function(e){var t,i;if(i=(e=e||this.getDrmItem()).getType(),!l)throw new Error("The oipfdrmagent plugin is required");switch(this.setDrmItem(e),i){case n.TYPES.PLAYREADY:t=this.playReady(e);break;default:t=r.reject("Unsupported DRM type")}return t},playReady:function(e){return e.prepare().then(function(){return i.prepare(e)})}}),o={getInstance:function(){return null===a&&(a=new s),a}},e.prototype.getDrmAgent=function(){return o.getInstance()},o}),define("rofl/media/drm/agent/alliance/playready",["antie/class","rofl/lib/promise","rofl/lib/utils"],function(e,r,s){"use strict";var o=document.getElementById("oipfdrmagent"),a={1:"Unknown error",2:"Cannot process request",3:"Unknown MIME type",4:"User consent needed",5:"Client revoked",6:"Server revoked",7:"Server certificate revoked"};return{prepare:function(e){var t,i=this;return e.hasEmbeddedLicense()?(t=r.resolve(),e.hasLicenseOverrideUri()&&(t=t.then(function(){return i._setLicenseOverrideUri(e.getLicenseOverrideUri())})),e.hasCustomData()&&(t=t.then(function(){return i._setCustomData(e.getCustomData())})),t):this._playReadyPreDelivery(e.getInitiatorMessage())},_onDrmMessageResult:function(e,t,i,n,r){0===r?e():t({type:"DRM_ERROR",code:r,message:a[r]||a[1],result:n,identifier:i})},_embedDrmMessage:function(i){var n=this;return new r(function(e,t){o.onDRMRightsError=t,o.onDRMMessageResult=s.bind(n._onDrmMessageResult,n,e,t),o.sendDRMMessage("application/vnd.ms-playready.initiator+xml",i,"urn:dvb:casystemid:19219")})},_playReadyPreDelivery:function(e){return this._embedDrmMessage(e)},_setLicenseOverrideUri:function(e){return this._embedDrmMessage('<?xml version="1.0" encoding="utf-8"?><PlayReadyInitiator xmlns="http://schemas.microsoft.com/DRM/2007/03/protocols/"><LicenseServerUriOverride><LA_URL>'+e+"</LA_URL></LicenseServerUriOverride></PlayReadyInitiator>")},_setCustomData:function(e){return this._embedDrmMessage('<?xml version="1.0" encoding="utf-8"?><PlayReadyInitiator xmlns="http://schemas.microsoft.com/DRM/2007/03/protocols/"><SetCustomData><CustomData>'+e+"</CustomData></SetCustomData></PlayReadyInitiator>")}}}),define("rofl/media/drm/agent/android",["rofl/media/drm/agent","rofl/media/drm/item","antie/devices/device"],function(e,n,t){"use strict";var i,r,s=null;return i=e.extend({prepare:function(e){var t,i;if(i=(e=e||this.getDrmItem()).getType(),!e)throw new Error("No DrmItem has been set on the DrmAgent");switch(this.setDrmItem(e),i){case n.TYPES.WIDEVINE:t=e.prepare();break;default:throw new Error("The selected DRM type is not implemented for `android`")}return t}}),r={getInstance:function(){return null===s&&(s=new i),s}},t.prototype.getDrmAgent=function(){return r.getInstance()},r}),define("rofl/media/drm/agent/playstation",["rofl/media/drm/agent","rofl/media/drm/item","antie/runtimecontext","rofl/devices/mediaplayer/playstation","rofl/devices/device","rofl/lib/promise"],function(e,n,t,i,r,s){"use strict";var o,a,l=null;return a=e.extend({prepare:function(e){var t,i;if(!(e=e||this.getDrmItem()))throw new Error("DRMItem not present");switch(i=e.getType(),this.setDrmItem(e),i){case n.TYPES.PLAYREADY:t=this.playReady(e);break;default:t=s.reject("Unsupported DRM type")}return t},playReady:function(e){return e.prepare().then(function(){t.getDevice().nativeCommand(i.Commands.LOAD,{contentUri:e.getMediaSource().getMediaUrl(),licenseUri:e.getLicenseOverrideUri(),customData:e.getCustomData()})})}}),o={getInstance:function(){return null===l&&(l=new a),l}},r.prototype.getDrmAgent=function(){return o.getInstance()},o}),define("rofl/media/drm/agent/samsung/avplay",["rofl/media/drm/agent","rofl/media/drm/item","rofl/lib/promise","antie/devices/device","antie/runtimecontext"],function(e,n,t,i,s){"use strict";var r,o,a=document.getElementById("pluginObjectSef"),l=null;return r=e.extend({prepare:function(e){var t,i;if(i=(e=e||this.getDrmItem()).getType(),!e)throw new Error("No DrmItem has been set on the DrmAgent");switch(this.setDrmItem(e),i){case n.TYPES.PLAYREADY:t=this.playReady(e);break;case n.TYPES.VERIMATRIX:t=this.verimatrix(e);break;case n.TYPES.AES128:t=this.advancedEncryption(e);break;default:throw new Error("The selected DRM type is not implemented for `samsung/avplay`")}return t},playReady:function(r){return new t(function(n,e){r.prepare().then(function(){var e=s.getDevice().getMediaPlayer().getAVPlay(),t=r.getLicenseOverrideUri(),i=r.getCustomData();t&&e.setPlayerProperty(4,t,t.length),i&&e.setPlayerProperty(3,i,i.length),n()}).catch(e)})},advancedEncryption:function(e){return t.resolve()},verimatrix:function(i){return new t(function(t,e){i.prepare().then(function(){var e=i.getLicenseServer();a.Open("DRM","1.000","DRM"),a.Execute("Initialize","3","Verimatrix","i=|w="+e),a.Close(),t()}).catch(e)})}}),o={getInstance:function(){return null===l&&(l=new r),l}},i.prototype.getDrmAgent=function(){return o.getInstance()},o}),define("rofl/media/drm/agent/samsung/maple",["rofl/media/drm/agent","rofl/media/drm/item","rofl/lib/promise","antie/devices/device","antie/runtimecontext"],function(e,n,t,i,o){"use strict";var r,s,a=document.getElementById("pluginObjectSef"),l=null;return r=e.extend({prepare:function(e){var t,i;if(i=(e=e||this.getDrmItem()).getType(),!e)throw new Error("No DrmItem has been set on the DrmAgent");switch(this.setDrmItem(e),i){case n.TYPES.PLAYREADY:t=e.hasEmbeddedLicense()?this.playReadyEmbedded(e):this.playReadyPredelivery(e);break;case n.TYPES.VERIMATRIX:t=this.verimatrix(e);break;case n.TYPES.AES128:t=this.advancedEncryption(e);break;case n.TYPES.WIDEVINE:t=this.wideVine(e);break;default:throw new Error("The selected DRM type is not implemented for `samsung/maple`")}return t},playReadyEmbedded:function(i){var n,r,s=o.getDevice().getMediaPlayer().getPlayerElement();return new t(function(e,t){i.prepare().then(function(){(n=i.getLicenseOverrideUri())&&s.SetPlayerProperty(4,n,n.length),(r=i.getCustomData())&&s.SetPlayerProperty(3,r,r.length),e()},t)})},playReadyPredelivery:function(r){return new t(function(n,e){r.prepare().then(function(){var e,t=r.getInitiatorMessage(),i=document.getElementById("PluginSefPlayReady");i||((e=document.createElement("object")).setAttribute("id","PluginSefPlayReady"),e.setAttribute("classid","clsid:SAMSUNG-INFOLINK-SEF"),e.setAttribute("border",0),document.body.appendChild(e),i=e),i.Open("PlayReadyDrm","1.000","PlayReadyDrm"),i.Execute("ProcessInitiatorsFromXml",t,t.length),i.Close(),n()},e)})},advancedEncryption:function(e){return t.resolve()},wideVine:function(e){return t.resolve()},verimatrix:function(i){return new t(function(t,e){i.prepare().then(function(){var e=i.getLicenseServer();a.Open("DRM","1.000","DRM"),a.Execute("Initialize","3","Verimatrix","i=|w="+e),a.Close(),t()}).catch(e)})}}),s={getInstance:function(){return null===l&&(l=new r),l}},i.prototype.getDrmAgent=function(){return s.getInstance()},s}),define("rofl/media/drm/agent/samsung/tizen",["rofl/media/drm/agent","rofl/media/drm/item","rofl/lib/promise","antie/devices/device","antie/runtimecontext"],function(e,n,t,i,o){"use strict";var r,s,a=null;return r=e.extend({prepare:function(e){var t,i;if(i=(e=e||this.getDrmItem()).getType(),!e)throw new Error("No DrmItem has been set on the DrmAgent");switch(this.setDrmItem(e),i){case n.TYPES.PLAYREADY:t=this.playReady(e);break;case n.TYPES.VERIMATRIX:t=this.verimatrix(e);break;case n.TYPES.AES128:t=this.advancedEncryption(e);break;default:throw new Error("The selected DRM type is not implemented for `samsung/tizen`")}return t},playReady:function(s){return new t(function(r,e){s.prepare().then(function(){var e=window.webapis.avplay,t=s.getLicenseOverrideUri(),i=s.getCustomData(),n={DeleteLicenseAfterUse:!0};t&&(n.LicenseServer=t),i&&(n.CustomData=i),e.setDrm("PLAYREADY","SetProperties",o.getDevice().encodeJson(n)),r()}).catch(e)})},verimatrix:function(n){return new t(function(i,e){n.prepare().then(function(){var e=webapis.avplay,t={};t.CompanyName=n.getClientId(),t.IPTV=n.getIPTVParameter(),t.Web=n.getLicenseServer(),e.setDrm("VERIMATRIX","Initialize",o.getDevice().encodeJson(t)),i()}).catch(e)})},advancedEncryption:function(e){return t.resolve()}}),s={getInstance:function(){return null===a&&(a=new r),a}},i.prototype.getDrmAgent=function(){return s.getInstance()},s}),define("rofl/media/drm/agent/simple",["rofl/media/drm/agent","antie/devices/device","rofl/lib/promise"],function(e,t,i){"use strict";var n=e.extend({prepare:function(e){return this.setDrmItem(e),i.resolve()}}),r=new n;return t.prototype.getDrmAgent=function(){return r},n}),define("rofl/media/drm/agent/sony",["rofl/media/drm/agent","rofl/media/drm/item","rofl/lib/promise","rofl/lib/utils","antie/devices/device","antie/runtimecontext"],function(e,n,s,t,i,o){"use strict";var r,a,l=null;return r=e.extend({prepare:function(e){var t,i;switch(i=(e=e||this.getDrmItem()).getType(),this.setDrmItem(e),i){case n.TYPES.PLAYREADY:t=this.playReady(e);break;default:t=s.reject("Unsupported DRM type")}return t},playReady:function(n){var r=this;return new s(function(i,e){n.prepare().then(function(){var e=n.getInitiatorMessage(),t=o.getDevice().getMediaPlayer();t.reset(),t.setSource(r._drmItem.getMediaSource().getMediaType(),"playready-initiator.php?content="+encodeURIComponent(e),"application/vnd.ms-playready.initiator+xml"),i()},e)})}}),a={getInstance:function(){return null===l&&(l=new r),l}},i.prototype.getDrmAgent=function(){return a.getInstance()},a}),define("rofl/media/drm/agent/vewd",["rofl/media/drm/agent","rofl/media/drm/item","rofl/lib/promise","antie/devices/device","antie/runtimecontext","rofl/lib/base64"],function(e,n,s,t,o,a){"use strict";var i,r,l=null;return i=e.extend({prepare:function(e){var t,i;switch(i=(e=e||this.getDrmItem()).getType(),this.setDrmItem(e),i){case n.TYPES.PLAYREADY:t=this.playReady(e);break;default:t=s.reject("Unsupported DRM type")}return t},playReady:function(n){var r=this;return new s(function(i,e){n.prepare().then(function(){var e="data:application/vnd.ms-playready.initiator+xml;base64,",t=o.getDevice().getMediaPlayer();e+=a.encode(n.getInitiatorMessage()),t.reset(),t.setSource(r._drmItem.getMediaSource().getMediaType(),e,""),i()},e)})}}),r={getInstance:function(){return null===l&&(l=new i),l}},t.prototype.getDrmAgent=function(){return r.getInstance()},r}),define("rofl/media/drm/agent/webos",["antie/runtimecontext","antie/devices/device","rofl/media/drm/agent","rofl/media/drm/agent/webos/playready","rofl/media/drm/item","rofl/lib/promise","vendor/webos/webOS"],function(e,t,i,n,r,o,a){"use strict";var s,l,c=null;return s=i.extend({_activeDrmClient:null,_activeDrmClientId:null,serviceRequestCall:function(n,r){var s=this;return(r=r||{}).appId||(r.appId=e.getCurrentApplication().getId()),new o(function(t,i){"load"!==n||s.getActiveDrmClientType()?"load"===n&&r.drmType&&r.drmType!==s.getActiveDrmClientType()?s.serviceRequestCall("unload",{clientId:s.getActiveClientId()}).then(s.serviceRequestCall(n,r).then(t,i)):a.service.request("luna://com.webos.service.drm",{method:n,parameters:r,onSuccess:function(e){e&&!0===e.returnValue?t(e):i(e)},onError:i}):s.serviceRequestCall("isLoaded").then(function(e){s.setActiveClient(r.drmType,e.clientId),s.serviceRequestCall(n,r).then(t)}).catch(i)})},getActiveDrmClientType:function(){return this._activeDrmClient},getActiveClientId:function(){return this._activeDrmClientId},setActiveClient:function(e,t){this._activeDrmClient=e,this._activeDrmClientId=t},prepare:function(e){var t,i;switch(i=(e=e||this.getDrmItem()).getType(),this.setDrmItem(e),i){case r.TYPES.PLAYREADY:t=this.playReady(e);break;default:t=o.reject("Unsupported DRM type")}return t},playReady:function(e){return e.prepare().then(function(){return n.prepare(e)})}}),l={getInstance:function(){return null===c&&(c=new s),c}},t.prototype.getDrmAgent=function(){return l.getInstance()},l}),define("rofl/media/drm/agent/webos/playready",["antie/runtimecontext","rofl/lib/promise"],function(s,o){"use strict";return{prepare:function(e){var t,i=this,n=s.getDevice().getDrmAgent();return t=new o(function(t,e){n.serviceRequestCall("load",{drmType:"playready"}).then(function(e){n.setActiveClient("playready",e.clientId),t()}).catch(e)}),e.hasEmbeddedLicense()||(t=t.then(function(){return i._playReadyPreDelivery(e.getInitiatorMessage())})),e.hasLicenseOverrideUri()&&(t=t.then(function(){return i._setLicenseOverrideUri(e.getLicenseOverrideUri())})),e.hasCustomData()&&(t=t.then(function(){return i._setCustomData(e.getCustomData())})),t},_embedDrmMessage:function(i){var n=s.getDevice().getDrmAgent(),r=n.getActiveClientId();return new o(function(e,t){r?n.serviceRequestCall("sendDrmMessage",{clientId:r,msgType:"application/vnd.ms-playready.initiator+xml",msg:i,drmSystemId:"urn:dvb:casystemid:19219"}).then(e,t):t()})},_playReadyPreDelivery:function(e){return this._embedDrmMessage(e)},_setLicenseOverrideUri:function(e){return this._embedDrmMessage('<?xml version="1.0" encoding="utf-8"?><PlayReadyInitiator xmlns="http://schemas.microsoft.com/DRM/2007/03/protocols/"><LicenseServerUriOverride><LA_URL>'+e+"</LA_URL></LicenseServerUriOverride></PlayReadyInitiator>")},_setCustomData:function(e){return this._embedDrmMessage('<?xml version="1.0" encoding="utf-8"?><PlayReadyInitiator xmlns="http://schemas.microsoft.com/DRM/2007/03/protocols/"><SetCustomData><CustomData>'+e+"</CustomData></SetCustomData></PlayReadyInitiator>")}}}),define("rofl/media/drm/agent/xboxone",["antie/devices/device","rofl/media/drm/agent","rofl/media/drm/item","rofl/lib/promise","antie/runtimecontext","rofl/lib/utils"],function(e,t,n,r,s,i){"use strict";var o,a,l=null,c=!1;return o=t.extend({init:function(){this._super(),this._serviceRequestBound=i.bind(this._serviceRequest,this)},setSoftwareDRMState:function(e){i.isBool(e)&&(c=e)},prepare:function(e){var t,i;if(!(e=e||this.getDrmItem()))throw new Error("DRMItem not present");switch(i=e.getType(),this.setDrmItem(e),i){case n.TYPES.PLAYREADY:t=this.playReady(e);break;default:t=r.reject("Unsupported DRM type")}return t},getSRType:function(e){return void 0===e?"( Service Request Object Undefined )":null===e?"( Service Request Object NULL )":window.Windows.Media.Protection.PlayReady.PlayReadyStatics.licenseAcquirerServiceRequestType===e.type?"PlayReadyLicenseAcquirerServiceRequest":window.Windows.Media.Protection.PlayReady.PlayReadyStatics.individualizationServiceRequestType===e.type?"IndividualizationServiceRequest":window.Windows.Media.Protection.PlayReady.PlayReadyStatics.domainJoinServiceRequestType===e.type?"PlayReadyDomainJoinServiceRequest":window.Windows.Media.Protection.PlayReady.PlayReadyStatics.domainLeaveServiceRequestType===e.type?"PlayReadyDomainLeaveServiceRequest":window.Windows.Media.Protection.PlayReady.PlayReadyStatics.meteringReportServiceRequestType===e.type?"PlayReadyMeteringServiceRequest":window.Windows.Media.Protection.PlayReady.PlayReadyStatics.secureStopServiceRequestType===e.type?"PlayReadySecureStopServiceRequest":"( UNKNOWN TYPE! )"+e.type},playReady:function(e){var t=this,i=s.getDevice(),n=i.getLogger(),r=i.getMediaPlayer().getMediaElement&&i.getMediaPlayer().getMediaElement();return e=e||this.getDrmItem(),this._prepareMediaProtectionManager(),e.prepare().then(function(){t._mediaProtectionManager.addEventListener("servicerequested",t._serviceRequestBound,!1),r?r.msSetMediaProtectionManager(t.getMediaProtectionManager()):n.error("No media element present"),t._mediaProtectionManager.addEventListener("componentloadfailed",t._componentLoadFailed,!1)}).catch(function(e){n.error("Error preparing DRM item: "+e)})},_componentLoadFailed:function(e){s.getDevice().getLogger().error("DRM service request failed: "+e)},_serviceRequest:function(e){var t=s.getDevice().getLogger(),i=e.completion;t.debug("DRM service request type: "+this.getSRType(e.request)),e.request.type!==window.Windows.Media.Protection.PlayReady.PlayReadyStatics.individualizationServiceRequestType&&(e.request.uri=window.Windows.Foundation.Uri(this.getDrmItem().getLicenseOverrideUri()),t.debug("DRM service request URI: "+e.request.uri)),e.request.beginServiceRequest().then(function(){t.debug("DRM service request finished"),i.complete(!0)},function(e){t.error("DRM service request error: "+e),i.complete(!1)})},destroyDrmManager:function(){var e=s.getDevice(),t=e.getMediaPlayer().getMediaElement&&e.getMediaPlayer().getMediaElement();t&&this.getMediaProtectionManager()&&(t.msSetMediaProtectionManager(null),this.getMediaProtectionManager().removeEventListener("servicerequested",this._serviceRequestBound),this.getMediaProtectionManager().removeEventListener("componentloadfailed",this._componentLoadFailed),this._mediaProtectionManager=null)},_prepareMediaProtectionManager:function(){var e=window.Windows.Storage.ApplicationData.current.localSettings.createContainer("PlayReady",window.Windows.Storage.ApplicationDataCreateDisposition.always),t=this._mediaProtectionManager=new window.Windows.Media.Protection.MediaProtectionManager,i=new window.Windows.Foundation.Collections.PropertySet;e.values.SoftwareOverride=c,t.properties["Windows.Media.Protection.MediaProtectionContainerGuid"]="{9A04F079-9840-4286-AB92-E65BE0885F95}",i["{F4637010-03C3-42CD-B932-B48ADF3A6A54}"]="Windows.Media.Protection.PlayReady.PlayReadyWinRTTrustedInput",t.properties["Windows.Media.Protection.MediaProtectionSystemIdMapping"]=i,t.properties["Windows.Media.Protection.MediaProtectionSystemId"]="{F4637010-03C3-42CD-B932-B48ADF3A6A54}",t.properties["Windows.Media.Protection.UseSoftwareProtectionLayer"]=c,s.getDevice().getLogger().debug("DRM Media Protection Manager prepared")},getMediaProtectionManager:function(){return this._mediaProtectionManager}}),a={getInstance:function(){return null===l&&(l=new o),l}},e.prototype.getDrmAgent=function(){return a.getInstance()},a}),define("rofl/media/drm/item",["antie/class","rofl/lib/promise"],function(e,t){"use strict";var i=e.extend({type:null,licenseOverrideUri:null,mediaSource:null,init:function(e){(e=e||{}).licenseOverrideUri&&this.setLicenseOverrideUri(e.licenseOverrideUri)},getType:function(){if(null===this.type)throw new Error("A DrmItem should always have a type");return this.type},getLicenseOverrideUri:function(){return this.licenseOverrideUri},setLicenseOverrideUri:function(e){this.licenseOverrideUri=e},hasLicenseOverrideUri:function(){return null!==this.licenseOverrideUri},getMediaSource:function(){return this.mediaSource},setMediaSource:function(e){this.mediaSource=e},hasMediaSource:function(){return null!==this.mediaSource},getInitiatorMessage:function(){throw new Error("getInitiatorMessage should be in the specific DrmItem implementation")},prepare:function(){return t.resolve(this)}});return i.TYPES={AES128:0,PLAYREADY:1,WIDEVINE:2,VERIMATRIX:3},i}),define("rofl/media/drm/item/playready",["rofl/media/drm/item","rofl/lib/utils","antie/runtimecontext","rofl/lib/promise","rofl/lib/xml","rofl/lib/base64"],function(e,a,t,r,n,l){"use strict";var c=t.getDevice(),u="9a04f079-9840-4286-ab92-e65be0885f95",d=function(e,t,i){var n,r=new RegExp("<"+e+">(.*)</"+e+">","i").exec(t);if(a.isArray(r)&&!a.isUndefined(r[1]))return r[1];if(!i)try{return n="",a.each(t,function(e){/[a-zA-Z0-9<>=\/!?&_-]/.test(e)&&(n+=e)}),d(e,n,!0)}catch(e){}return!1};return e.extend({type:e.TYPES.PLAYREADY,customDataUri:null,customData:null,embeddedLicense:!1,protectionHeaderUTF16:!1,kid:null,checksum:null,getCustomDataUri:function(){return this.customDataUri},setCustomDataUri:function(e){this.customDataUri=e},hasCustomDataUri:function(){return null!==this.customDataUri},getCustomData:function(){return this.customData},setCustomData:function(e){this.customData=e},hasCustomData:function(){return null!==this.customData},setEmbeddedLicense:function(e){this.embeddedLicense=e},hasEmbeddedLicense:function(){return this.embeddedLicense},getKID:function(){return this.kid},setKID:function(e){this.kid=e},getProtectionHeaderUTF16:function(){return this.protectionHeaderUTF16},setProtectionHeaderUTF16:function(e){this.protectionHeaderUTF16=e},hasKID:function(){return null!==this.kid},getChecksum:function(){return this.checksum},setChecksum:function(e){this.checksum=e},hasChecksum:function(){return null!==this.checksum},getInitiatorMessage:function(){var e={PlayReadyInitiator:{"@xmlns":"http://schemas.microsoft.com/DRM/2007/03/protocols/",LicenseAcquisition:{Header:{WRMHEADER:{"@xmlns":"http://schemas.microsoft.com/DRM/2007/03/PlayReadyHeader","@version":"4.0.0.0",DATA:{PROTECTINFO:{KEYLEN:16,ALGID:"AESCTR"}}}}}}},t=e.PlayReadyInitiator.LicenseAcquisition,i=t.Header.WRMHEADER.DATA;return this.hasKID()&&(i.KID=this.getKID()),this.hasChecksum()&&(i.CHECKSUM=this.getChecksum()),this.hasLicenseOverrideUri()&&(i.LA_URL=this.getLicenseOverrideUri()),this.hasCustomData()&&(t.CustomData=this.getCustomData()),this.hasMediaSource()&&(t.Content=this.getMediaSource().getMediaUrl()),n.json2xml(e)},prepare:function(){return new r(a.bind(function(e,t){var i=this.getMediaSource(),n=[];this.hasCustomDataUri()&&n.push(new r(a.bind(function(t,i){c.loadURL(this.getCustomDataUri(),{responseType:"text",onLoad:a.bind(function(e){this.setCustomData(e),t(this)},this),onError:function(e){i(e)}})},this))),"application/vnd.ms-sstr+xml"===i.getMediaMimetype()?n.push(new r(a.bind(function(s,t){c.loadURL(i.getMediaUrl(),{responseType:"xml",onLoad:a.bind(function(e){var t,i,n,r=function(e){var t,i,n=e.querySelectorAll("ProtectionHeader");for(i=n.length-1;0<=i;i--)if((t=n[i]).getAttribute("SystemID").toLowerCase()===u)return t.textContent;return!1}(e);if(!r)return c.getLogger().log("Error reading protection header"),void s(this);t=this.protectionHeaderUTF16?l.decodeUTF16(r):l.decode(r),(n=d("kid",t))&&this.setKID(n),(i=d("checksum",t))&&this.setChecksum(i),n&&i||c.getLogger().log("Could not find the KID or the checksum"),s(this)},this),onError:function(e){t(e)}})},this))):"application/dash+xml"===i.getMediaMimetype()&&n.push(new r(a.bind(function(o,t){c.loadURL(i.getMediaUrl(),{responseType:"text",onLoad:a.bind(function(e){var t,i,n,r,s=function(e){var t;e&&(window.DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e)));return t}(e);if(s&&(t=function(e){var t,i,n,r,s=e.querySelectorAll("ContentProtection");for(n=s.length-1;0<=n;n--)if((i=(t=s[n]).getAttribute("schemeIdUri"))&&-1<i.toLowerCase().indexOf(u))return(r=t.textContent&&t.textContent.trim?t.textContent.trim():"").indexOf("\n")&&(r=r.split?r.split("\n")[0]:r),r;return!1}(s)),!t)return c.getLogger().log("Error reading protection header"),void o(this);i=this.protectionHeaderUTF16?l.decodeUTF16(t):l.decode(t),(r=d("kid",i))&&this.setKID(r),(n=d("checksum",i))&&this.setChecksum(n),r&&n||c.getLogger().log("Could not find the KID or the checksum"),o(this)},this),onError:function(e){t(e)}})},this))),r.all(n).then(e,t)},this))}})}),define("rofl/media/drm/item/verimatrix",["rofl/media/drm/item"],function(e){"use strict";return e.extend({type:e.TYPES.VERIMATRIX,clientId:null,licenseServer:null,IPTVParameter:"",init:function(e){(e=e||{}).clientId&&(this.clientId=e.clientId),e.licenseServer&&(this.licenseServer=e.licenseServer),e.IPTVParameter&&(this.IPTVParameter=e.IPTVParameter)},setClientId:function(e){return this.clientId=e,this},getClientId:function(){return this.clientId||""},setLicenseServer:function(e){return this.licenseServer=e,this},getLicenseServer:function(){return this.licenseServer},setIPTVParameter:function(e){return this.IPTVParameter=e,this},getIPTVParameter:function(){return this.IPTVParameter}})}),define("rofl/media/drm/item/widevine",["rofl/media/drm/item"],function(e){"use strict";return e.extend({type:e.TYPES.WIDEVINE})}),define("rofl/media/source",["antie/class","rofl/lib/promise","rofl/lib/utils","antie/runtimecontext","antie/devices/mediaplayer/mediaplayer"],function(e,t,i,n,r){"use strict";var s,o={SD:"sd",HD:"hd",UHD:"uhd"},a={m3u8:"application/vnd.apple.mpegurl",m3u:"application/vnd.apple.mpegurl",mp4:"video/mp4",pyv:"video/x-ms-wmv",ism:"application/vnd.ms-sstr+xml",ssm:"application/vnd.ms-sstr+xml",mpd:"application/dash+xml",mp3:"audio/mpeg"};return(s=e.extend({mediaUrl:null,mediaType:null,mediaMimetype:null,drmItem:null,quality:null,bitRate:null,startBitRate:null,init:function(e,t,i,n){this.mediaUrl=e,this.mediaType=t||r.TYPE.VIDEO,this.mediaMimetype=i||(e?this.resolveMimeType(e):""),this.language=n},getMediaUrl:function(){return this.mediaUrl},getMediaType:function(){return this.mediaType},getMediaMimetype:function(){return this.mediaMimetype},hasQuality:function(){return null!==this.quality},getQuality:function(){return this.quality},setQuality:function(e){if(!i.contains(o,e))throw new Error("The given quality is unknown");this.quality=e},getBitRate:function(){return this.bitRate},setBitRate:function(e,t){i.isNumber(e)||(e=parseInt(e)||0),i.isNumber(t)||(t=parseInt(t)||0),this.bitRate=t?{min:e,max:t}:e},getStartBitRate:function(){return this.startBitRate},setStartBitRate:function(e){this.startBitRate=e},hasDrmItem:function(){return null!==this.drmItem},getDrmItem:function(){return this.drmItem},setDrmItem:function(e){e.setMediaSource(this),this.drmItem=e},getLanguage:function(){return this.language},isAdaptive:function(){switch(this.getMediaMimetype()){case a.mpd:case a.m3u:case a.m3u8:case a.ism:case a.ssm:return!0}return!1},resolveMimeType:function(e){var t=e.split("?").shift().match(/(\.[A-Z0-9]+)/gi).pop().replace(".","");return s.MIME_TYPES[t]||s.MIME_TYPES.mp4},prepare:function(){var e=n.getDevice();return this.hasDrmItem()?e.getDrmAgent().prepare(this.getDrmItem()):t.resolve()}})).Qualities=o,s.MIME_TYPES=a,s}),define("rofl/media/subtitles/format",["rofl/media/subtitles/formats/srt","rofl/media/subtitles/formats/ttml","rofl/media/subtitles/formats/vtt","rofl/lib/utils"],function(e,t,i,n){"use strict";var r={srt:e,xml:t,dfxp:t,vtt:i};return{getParser:function(e){var t;if(t=e.format?e.format:e.source.match(/(\.[A-Z0-9]+)/gi).pop().replace(".",""),n.isUndefined(r[t]))throw new Error(n.formatString("The subtitle format {0} is not yet supported",t));return r[t]}}}),define("rofl/media/subtitles/formats/srt",function(){"use strict";return{responseType:"text",parse:function(e){for(var t,i,n,r,s=e.split(/\n\r|\r\n|\n|\r/),o=[],a=0,l=1,c=0,u=s.length-1,d=function(e){var t,i,n,r=0;if(e)for(i=0,n=(t=e.split(":")).length;i<n;i++)r=60*r+parseFloat(t[i].replace(",","."));return r};c<u;){if(t=s[c].replace(/^\s+|\s+$/g,""),!isNaN(t)&&parseInt(t,10)===l){for(l=parseInt(t,10)+1,n=s[c+=1].split("--\x3e"),o[a]={},o[a].start=d(n[0]),o[a].end=d(n[1]),o[a].text="",i=s[c+(r=1)];i&&""!==i.replace(/^\s+|\s+$/g,"");)1<r&&(o[a].text+="<br />"),o[a].text+=s[c+r],i=s[c+(r+=1)];a+=1,c+=r-1}c+=1}return o}}}),define("rofl/media/subtitles/formats/ttml",[],function(){"use strict";return{responseType:"xml",parse:function(e){var t,i,n,r,s,o=[],a=function(e){var t,i,n,r=0;if(e)for((t=e.split(":")).splice(3,1),i=0,n=t.length;i<n;i++)r=60*r+parseFloat(t[i]);return r};for(n=0,r=(t=e.getElementsByTagName("p")).length;n<r;n++)s=(i=t[n]).innerHTML||i.textContent,o[n]={start:a(i.getAttribute("begin")),end:a(i.getAttribute("end")),text:s.replace(/(\r\n|\n|\r)/gm,"")};return o}}}),define("rofl/media/subtitles/formats/vtt",function(){"use strict";return{responseType:"text",parse:function(e){for(var t,i,n=e.split(/\n\r\n\r|\r\n\r\n|\n\n|\r\r/),r=[],s=0,o=n.length,a=[],l=0,c=0,u="",d="",h="";s<o;){if(2<=(l=(a=n[s].split(/\n\r|\r\n|\n|\r/)).length)){for(c=0;c<l;c++)-1<a[c].indexOf("--\x3e")?(u=(t=a[c].split(" --\x3e "))[0],d=1<(i=t[1].split(" ")).length?i[0]:t[1]):u&&(h.length&&a[c]&&(h+="<br />"),h+=a[c].replace(/<\/?[^>]+(>|$)/g,"").replace(/^\s+|\s+$/g,""));r.push({start:this._timeToSecs(u),end:this._timeToSecs(d),text:h})}h=u=d="",s+=1}return r},_timeToSecs:function(e){var t,i,n,r=0;if(e)for(i=0,n=(t=e.split(":")).length;i<n;i++)r=60*r+parseFloat(t[i].replace(",","."));return r}}}),define("rofl/media/subtitles/manager",["rofl/class","rofl/lib/utils","rofl/lib/promise","rofl/application","rofl/media/subtitles/format","rofl/media/subtitles/player"],function(e,n,r,t,s,i){"use strict";var o,a,l=t.getCurrentApplication(),c=null,u=null,d=null,h=[];return a=e.extend({getSources:function(){return h},setSources:function(e){n.isArray(e)||(e=[e]),h=e},addSources:function(e){n.isArray(e)||(e=[e]),h=h.concat(e)},load:function(){var i=[],t=[];return n.each(h,function(e){i.push(e.lang),t.push(this._getSubtitlePromise(e,s.getParser(e)))},this),r.all(t).then(function(e){return o={},n.each(e,function(e,t){o[i[t]]=e}),i})},clear:function(){h=[],(o=c=null)!==d&&(d.stop(),d=null)},setLanguage:function(e){var t;if(!o)throw new Error("Subtitles aren't loaded yet");if(!1===e)return c=null,void(d&&d.setSubtitle(!1));if(!(t=o[e]))throw new Error("Subtitle language "+e+" is not available");c=t,d&&d.setSubtitle(c.content)},onTimeUpdate:function(e){null===d&&(d=new i,c&&d.setSubtitle(c.content),d.play()),d.onTimeUpdate(e)},getPlayer:function(){return d},_getSubtitlePromise:function(s,o){return new r(function(t,i){var n,r,e=l.getDevice();r=function(e){try{n={content:o.parse(e)},t(n)}catch(e){i(e)}},s.content?r(s.content):e.loadURL(s.source,{method:"GET",responseType:o.responseType||"html",onLoad:function(e){r(e)},onError:function(e){i(e)}})})}}),{getInstance:function(){return u||(u=new a),u}}}),define("rofl/media/subtitles/player",["rofl/class","rofl/lib/utils","antie/runtimecontext"],function(e,o,t){"use strict";var a=t.getDevice();return e.extend({_subtitle:null,_interval:null,_element:null,_slotIndex:0,_subtitleStyleClassname:"",init:function(e){e&&this.setSubtitle(e)},getSubtitle:function(){return this._subtitle},setSubtitle:function(e){if(!o.isArray(e)&&!1!==e)throw new Error("Subtitle needs to be an array or false");this._element&&a.setElementContent(this._element,""),this._subtitle=e},play:function(){this._createElement()},stop:function(){this._removeElement()},_createElement:function(){var e;null===this._element&&(e=a.createContainer(null,["subtitle-player"]),a.addClassToElement(e,this._subtitleStyleClassname),this._element=e,a.appendChildElement(document.body,e))},_removeElement:function(){null!==this._element&&(a.removeElement(this._element),this._element=null)},getElement:function(){return this._element},onTimeUpdate:function(e){this._subtitle&&this._setSubtitleTime(e)},_setSubtitleTime:function(t){var e,i,n=this.getElement(),r=o.filter(this._subtitle,function(e){return e.start<=t&&e.end>=t}),s=r.length;if(n)if(0<s){for(i="",e=0;e<s;e++)i+=r[e].text,e<s-1&&(i+="<br/>");a.setElementContent(n,i)}else""!==n.innerHTML&&a.setElementContent(n,"")},setSubtitleStyleClassname:function(e){var t=this._element,i=this._subtitleStyleClassname;this._subtitleStyleClassname=e||"",t&&(a.removeClassFromElement(t,i),a.addClassToElement(t,this._subtitleStyleClassname))}})}),define("rofl/media/subtitlesource",["rofl/class"],function(e){"use strict";return e.extend({init:function(e){this._id=e.id||"",this._title=e.title||"",this._language=e.language||"",this._url=e.url||"",this._format=e.format||"",this._cc=e.cc||!1,this._rawContent="",this._parsedContent=[]},getId:function(){return this._id},getTitle:function(){return this._title},getLanguage:function(){return{id:this._language,title:this._title}},getURL:function(){return this._url},getFormat:function(){return this._format},isCC:function(){return this._cc},setRawContent:function(e){this._rawContent=e},getRawContent:function(){return this._rawContent},setParsedContent:function(e){this._parsedContent=e},getParsedContent:function(){return this._parsedContent}})}),define("rofl/models/api/abstract",["antie/class","rofl/lib/promise"],function(e,t){"use strict";var i=function(){throw new Error("Not implemented yet.")},n=function(e){return e instanceof t?e:t.resolve(e)};return e.extend({resolveEndpoint:i,resolveCreateEndpoint:function(e){return this.resolveEndpoint(e)},resolveReadEndpoint:function(e){return this.resolveEndpoint(e)},resolveUpdateEndpoint:function(e){return this.resolveEndpoint(e)},resolveDestroyEndpoint:function(e){return this.resolveEndpoint(e)},hasLocalData:function(e){return!1},getLocalData:i,validateResponse:function(e){return!0},validateCreateResponse:function(e){return this.validateResponse(e)},validateReadResponse:function(e){return this.validateResponse(e)},validateUpdateResponse:function(e){return this.validateResponse(e)},validateDestroyResponse:function(e){return this.validateResponse(e)},transformFrom:n,transformFromCreate:function(e){return this.transformFrom(e)},transformFromRead:function(e){return this.transformFrom(e)},transformFromUpdate:function(e){return this.transformFrom(e)},transformFromDestroy:function(e){return this.transformFrom(e)},transformTo:n,transformToCreate:function(e){return this.transformTo(e)},transformToUpdate:function(e){return this.transformTo(e)},isCacheable:function(){return!1}})}),define("rofl/models/audiotrack",["antie/class"],function(e){"use strict";return e.extend({init:function(e,t,i,n,r){this._id=e,this._title=t,this._language=i,this._active=n,this._extraData=r||{}},getId:function(){return this._id},getTitle:function(){return this._title},getLanguage:function(){return this._language},setActive:function(e){this._active=e},getActive:function(){return!!this._active},getExtraData:function(){return this._extraData}})}),define("rofl/models/model",["antie/class","rofl/lib/utils"],function(e,n){"use strict";return e.extend({init:function(e){this._attributes={},n.isObject(e)&&this.set(e)},set:function(e,t){var i;if(n.isObject(e))for(i in e)e.hasOwnProperty(i)&&this.set(i,e[i]);else this._attributes[e]=t},unset:function(e){delete this._attributes[e]},get:function(e,t){return e?this.has(e)?this._attributes[e]:t:this._attributes},has:function(e){return this._attributes.hasOwnProperty(e)},clear:function(){this._attributes={}},keys:function(){return n.keys(this._attributes)}})}),define("rofl/models/subtitle",["antie/class"],function(e){"use strict";return e.extend({init:function(e,t,i){this._id=e,this._title=t,this._language=i},getId:function(){return this._id},getTitle:function(){return this._title},getLanguage:function(){return this._language},setActive:function(e){this._active=e},getActive:function(){return!!this._active}})}),define("rofl/router",["antie/class","antie/runtimecontext","rofl/lib/utils","rofl/lib/object.extend"],function(e,r,s){"use strict";var o,a,l,t,i,n=null;return l=function(e,t,i,n){if(!e||!t||!i)throw new Error("Missing argument(s) in route");n=n||{},o[e+"Component"](t,i,n)},i=function(e){for(var t,i,n,r={},s=0,o=e.length,a=o-o%2;s<a;s++)t=e[s],i=e[++s],n=parseFloat(i),isNaN(n)||(i=n),r[t]=i;return r},t=e.extend({init:function(){var e;if(n)throw new Error("Router::init called for a second time");if(e=(o=r.getCurrentApplication()).getConfiguration(),!(a=e.route))throw new Error("Your Application config should have a 'route' configuration");n=this},route:function(e,t){var i,n=a[e||"_default"];return t=t||{},n?(i=n.method||"show",s.isArray(n)?void s.each(n,function(e){e.args&&(t=s.extend({},e.args,t,!0)),l(e.method,e.container,e.component,t)}):(n.args&&(t=s.extend({},n.args,t,!0)),l(i,n.container,n.component,t),!0)):(r.getDevice().getLogger().warn("Trying to access a non-existing route"),!1)},deeplink:function(e){var t=e.shift().replace(/#/,"");return this.route(t,i(e))}}),{getInstance:function(){return null===n&&(n=new t),n}}}),define("rofl/services/adobepass",["antie/runtimecontext","rofl/datasources/api","rofl/models/model","rofl/lib/utils","rofl/lib/promise","vendor/crypto-js/hmac-sha1","vendor/crypto-js/enc-base64"],function(e,t,i,l,c,n,r){"use strict";var s,o,u,a,d,h,g,p,f,_={datasource:"rofl/datasources/restful",modelPath:"rofl/services/adobepass/models/",endpoint:{url:"http://api.auth.adobe.com/"}},m="time",v="authString",C="signature",A="code",E="adobeDeviceId";return p=i.extend({_getApi:function(){return h||(h=new t(a)),h},_buildAuthorizeHeader:function(){var e,t=u.authString||"POST requestor_id={{requestorId}}, nonce={{deviceId}}, signature_method=HMAC-SHA1, request_time={{time}}, request_uri={{requestURI}}",i=u.authHeaderTemplate||"{{authString}}, public_key={{publicKey}}, signature={{signature}}";return this.set(m,l.now()),e=l.formatTemplate(t,this.get()),this.set(v,e),this.set(C,n(e,this.get("privateKey")).toString(r)),l.formatTemplate(i,this.get())},init:function(){if(this._super(),s=e.getCurrentApplication(),o=s.getConfiguration(),u=o.adobepass||{},a=l.extend(_,u.api||{}),d=u.urls||{},this.set(u.params),!this.has("publicKey")||!this.has("privateKey"))throw"public and private key are required";this.set("deviceId",e.getDevice().getUdid())},getMVPDList:function(){var e=l.extend(u.params,this.get());return e.endpointTemplate=d.mvpds||"",this._getApi().read("mvpds",{params:e})},getCode:function(){var e=l.extend(u.params,this.get());return e.endpointTemplate=d.register||"",this._getApi().create("register",{asQuery:!0,headers:{Authorization:this._buildAuthorizeHeader()},params:e,data:{deviceId:this.get("deviceId"),deviceType:this.get("deviceType")}}).then(l.bind(function(e){if(!(e=e||{}).code||!e.info||!e.info.deviceId)throw"response must include code and deviceId";return this.set(A,e.code),this.set(E,e.info.deviceId),e.code},this))},checkAuth:function(){var n=this,e=u.checkAuth||{},r=0,s=l.isUndefined(e.retries)?5:e.retries,o=e.timeout||3e4,a=l.extend(u.params,this.get());return a.endpointTemplate=d.checkauth||"",clearTimeout(g),new c(function(t,e){var i=function(){n._getApi().read("checkauth",{params:a}).then(function(e){clearTimeout(g),t(e)}).catch(function(){++r!==s?g=setTimeout(i,o):e("max number of retries reached")})};i()})},getAuthN:function(){var t=this,e=l.extend(u.params,this.get());return e.endpointTemplate=d.authn||"",clearTimeout(g),this._getApi().read("authn",{headers:{Authorization:this._buildAuthorizeHeader()},params:e}).then(function(e){return t.set("mvpd",e.mvpd),t.set("userId",e.userId),e})},getUserMetadata:function(){var t=this,e=l.extend(u.params,this.get());return e.endpointTemplate=d.usermetadata||"",this._getApi().read("usermetadata",{headers:{Authorization:this._buildAuthorizeHeader()},params:e}).then(function(e){return t.set("userMetaData",e.data),e})},authorize:function(e){var t=l.extend(u.params,this.get());return e?(t.endpointTemplate=d.authorize||"",t.resource=e,this._getApi().read("authorize",{headers:{Authorization:this._buildAuthorizeHeader()},params:t})):c.reject("resource identifier needed")},getAuthZ:function(e){var t=l.extend(u.params,this.get());return e?(t.endpointTemplate=d.authz||"",t.resource=e,this._getApi().read("authz",{headers:{Authorization:this._buildAuthorizeHeader()},params:t})):c.reject("resource identifier needed")},getMediaToken:function(e){var t=l.extend(u.params,this.get());return e?(t.endpointTemplate=d.media||"",t.resource=e,this._getApi().read("mediatoken",{headers:{Authorization:this._buildAuthorizeHeader()},params:t})):c.reject("resource identifier needed")},authorizeMedia:function(e){return this.authorize(e).then(l.bind(this.getAuthZ,this,e)).then(l.bind(this.getMediaToken,this,e))},logout:function(){var e=l.extend(u.params,this.get());return e.endpointTemplate=d.logout||"",this._getApi().destroy("logout",{headers:{Authorization:this._buildAuthorizeHeader()},params:e})},reset:function(){clearTimeout(g),this.unset(m),this.unset(v),this.unset(C),this.unset(A)}}),{getInstance:function(){return f||(f=new p),f}}}),define("rofl/services/adobepass/models/authn",["rofl/models/api/abstract","rofl/lib/utils"],function(e,i){"use strict";return e.extend({init:function(){},resolveEndpoint:function(e){var t=e.endpointTemplate||"api/v1/tokens/authn?requestor={{requestorId}}&deviceId={{deviceId}}&format=json";return i.formatTemplate(t,e)},validateReadResponse:function(e){return(e=e||{}).mvpd&&e.requestor&&e.userId&&e.expires}})}),define("rofl/services/adobepass/models/authorize",["rofl/models/api/abstract","rofl/lib/utils"],function(e,i){"use strict";return e.extend({init:function(){},resolveEndpoint:function(e){var t=e.endpointTemplate||"api/v1/authorize?requestor={{requestorId}}&deviceId={{deviceId}}&resource={{resource}}&format=json";return i.formatTemplate(t,e)}})}),define("rofl/services/adobepass/models/authz",["rofl/models/api/abstract","rofl/lib/utils"],function(e,i){"use strict";return e.extend({init:function(){},resolveEndpoint:function(e){var t=e.endpointTemplate||"api/v1/tokens/authz?requestor={{requestorId}}&deviceId={{deviceId}}&resource={{resource}}&format=json";return i.formatTemplate(t,e)}})}),define("rofl/services/adobepass/models/checkauth",["rofl/models/api/abstract","rofl/lib/utils"],function(e,i){"use strict";return e.extend({init:function(){},resolveEndpoint:function(e){var t=e.endpointTemplate||"api/v1/checkauthn/{{code}}?requestor={{requestorId}}&format=json";return i.formatTemplate(t,e)}})}),define("rofl/services/adobepass/models/logout",["rofl/models/api/abstract","rofl/lib/utils"],function(e,i){"use strict";return e.extend({init:function(){},resolveEndpoint:function(e){var t=e.endpointTemplate||"api/v1/logout?deviceId={{deviceId}}&format=json";return i.formatTemplate(t,e)}})}),define("rofl/services/adobepass/models/mediatoken",["rofl/models/api/abstract","rofl/lib/utils"],function(e,i){"use strict";return e.extend({init:function(){},resolveEndpoint:function(e){var t=e.endpointTemplate||"api/v1/tokens/media?requestor={{requestorId}}&deviceId={{deviceId}}&resource={{resource}}&format=json";return i.formatTemplate(t,e)}})}),define("rofl/services/adobepass/models/mvpds",["rofl/models/api/abstract","rofl/lib/utils"],function(e,i){"use strict";return e.extend({init:function(){},resolveEndpoint:function(e){var t=e.endpointTemplate||"api/v1/config/nuvotvauth?format=json";return i.formatTemplate(t,e)}})}),define("rofl/services/adobepass/models/register",["rofl/models/api/abstract","rofl/lib/utils","rofl/lib/promise"],function(e,i,t){"use strict";return e.extend({init:function(){},resolveEndpoint:function(e){var t=e.endpointTemplate||"reggie/v1/{{requestorId}}/regcode?registrationURL=%3B{{virtualId}}&format=json";return i.formatTemplate(t,e)},transformToCreate:function(e){return t.resolve({deviceId:e.deviceId,deviceType:e.deviceType})},validateCreateResponse:function(e){return(e=e||{}).code&&e.id&&i.hasNested(e,"info","deviceId")}})}),define("rofl/services/adobepass/models/usermetadata",["rofl/models/api/abstract","rofl/lib/utils"],function(e,i){"use strict";return e.extend({init:function(){},resolveEndpoint:function(e){var t=e.endpointTemplate||"api/v1/tokens/usermetadata?requestor={{requestorId}}&deviceId={{deviceId}}&format=json";return i.formatTemplate(t,e)}})}),define("rofl/services/bootparams",function(){"use strict";var e,t={NONE:"none",COLLECTION:"collection",BROWSE:"browse",LIVE:"live",MOVIE:"movie",PLAYBACK:"playback",SERIES:"series",OTHER:"other"};return(e={_category:t.NONE,_identifier:null,_params:null,getCategory:function(){return this._category},setCategory:function(e){this._category=e},getIdentifier:function(){return this._identifier},setIdentifier:function(e){this._identifier=e},getParam:function(e,t){return null===this._params?t:this._params[e]||t},getParams:function(){return this._params},setParams:function(e){this._params=e},hasData:function(){return this._category!==t.NONE},setParser:function(e){this.parse=e},parse:function(e){var t=e.split(this.DELIMITER),i={};if(0!==t.length){for(this.setCategory(t.shift()),this.setIdentifier(t.shift()||null);0<t.length;)i[t.shift()]=t.shift();this.setParams(i)}}}).ParamCategories=t,e.DELIMITER="/",e}),define("rofl/services/bootparams/abstract",["antie/class"],function(e){"use strict";return e.extend({initialise:function(){throw new Error("Not implemented")}})}),define("rofl/services/bootparams/eden",["antie/runtimecontext","rofl/bootloader","rofl/lib/utils","rofl/services/bootparams","rofl/services/bootparams/abstract"],function(r,e,s,o,t){"use strict";var i=t.extend({initialise:function(){var e,i,t=tizen.application.getCurrentApplication().getRequestedAppControl(),n=r.getDevice();null!==t&&(e=t.appControl.data||[],s.each(e,function(e){var t;"PAYLOAD"===e.key&&(t=n.decodeJson(e.value[0]),i=t.values)}),i&&o.setParams(i))}});return e.register(s.bind((new i).initialise,{})),i}),define("rofl/services/bootparams/playstation",["antie/runtimecontext","rofl/bootloader","rofl/lib/promise","rofl/lib/utils","rofl/services/bootparams","rofl/services/bootparams/abstract"],function(n,e,t,r,s,i){"use strict";var o,a,l="getExternalParameter";return o=new(a=i.extend({_addListener:function(){var e=n.getDevice();e.addNativeEventListener&&e.addNativeEventListener(l,this._boundHandler)},_removeListener:function(){var e=n.getDevice();e.removeNativeEventListener&&e.removeNativeEventListener(l,this._boundHandler)},_eventHandler:function(e,t,i){this._removeListener(),"ok"===i.status?(s.parse(i.value||""),e()):t("No boot param values found")},initialise:function(){var i=this;return new t(function(e,t){i._boundHandler||(i._boundHandler=r.bind(i._eventHandler,i,e,t)),this._addListener(),n.getDevice().nativeCommand(l)}).catch(function(e){n.getDevice().getLogger().log("Playstation boot service: "+e)})}})),e.register(r.bind(o.initialise,o)),a}),define("rofl/services/presence",["rofl/lib/utils"],function(s){"use strict";var e,o={BROWSING:"browsing",WATCHING:"watching"};return(e={_implementations:[],register:function(e){this._implementations.push(e)},setStatus:function(e,t){var i=this._implementations,n=0,r=i.length;if(!s.contains(o,e))throw new Error("Unknown status type given");for(;n<r;n++)i[n].setStatus(e,t)}}).Types=o,e}),define("rofl/services/presence/abstract",["antie/class"],function(e){"use strict";return e.extend({setStatus:function(){throw new Error("Not implemented")}})}),define("rofl/services/presence/playstation",["antie/runtimecontext","rofl/services/presence","rofl/services/presence/abstract"],function(i,e,t){"use strict";var n;return n=t.extend({setStatus:function(e,t){if(128<t.length)throw new Error("Presence length cannot exceed 128 bytes.");i.getDevice().nativeCommand("setPsnPresenceInfo",{presenceInfo:t})}}),e.register(new n),n}),define("rofl/session",["antie/storageprovider","rofl/application","rofl/lib/utils"],function(t,i,e){"use strict";var n,r;return{getId:function(){return r||(r=e.createGuid()),r},getStorage:function(e){return(n||(n=i.getCurrentApplication().getDevice()),n).getStorage(t.STORAGE_TYPE_SESSION,e||"session")}}}),define("rofl/timelinemanager",["rofl/class","rofl/lib/utils","rofl/lib/promise","rofl/lib/pubsub","antie/runtimecontext","rofl/devices/mediaplayer/mediaplayer","rofl/media/source","rofl/timelinemanager/timeline","rofl/timelinemanager/queue","rofl/timelinemanager/timelineevents","rofl/logger","rofl/timelinemanager/timeline/adbreak"],function(e,l,s,i,t,a,n,r,o,c,u,d){"use strict";var h=t.getDevice(),g=h.getMediaPlayer(),p={ON_INTERRUPT:"on-interrupt",ON_AD_BREAK_READY:"on-ad-break-ready",ON_AD_BREAK_START:"on-ad-break-start",ON_AD_START:"on-ad-start",ON_AD_END:"on-ad-end",ON_AD_BREAK_END:"on-ad-break-end",ON_RESUME:"on-resume",ON_AD_SKIP:"on-ad-skip"},f=e.extend({setPreferredFormat:function(e){this._preferredFormat=e},getPreferredFormat:function(){return this._preferredFormat},setLowerBitrate:function(e){this._lowerBitrate=e},getSeekTime:function(){return this._seekTime},isAdActive:function(){return this.isAdBreakActive()&&0!==this._adQueue.getQueueLength()},isAdBreakActive:function(){return null!==this._activeAdBreak},_resumeTimeline:function(){var e,t,i,n,r=0,s=this._seekTime;this._seekTime=null;try{t=(e=this.getTimeline()).getLastMediaSource(),i=e.getLastPlayerStatus(),n=e.getWatchedSeconds(),this._clearPlayer(),t||i&&i.currentTime?(i&&(r=Math.round(i.currentTime||0)),this._publish(p.ON_RESUME,{mediaSource:t,playerStatus:i,watchedSeconds:n,seekTime:s}),this._handleEvent(c.PLAYBACK.RESUME,{currentTime:r,duration:i.duration})):this._publish(p.ON_RESUME,{})}catch(e){u.onAppError("resume_timeline_error: "+e.name+": "+e.message)}},_onInterruption:function(){var e=g.getMediaSource(),t=this.getTimeline();t.setLastMediaSource(e),this._publish(p.ON_INTERRUPT,{mediaSource:e,playerStatus:t.getLastPlayerStatus(),watchedSeconds:t.getWatchedSeconds()}),this._handleEvent(c.PLAYBACK.INTERRUPT,{})},_clearPlayer:function(){var e=g.getState();e!==a.STATE.EMPTY&&(e!==a.STATE.STOPPED&&e!==a.STATE.ERROR&&g.stop(),g.reset())},_prepareForPlayback:function(e){return this._clearPlayer(),g.setMediaSource(e),this._handleEvent(c.LINEAR_CREATIVE.SHOW,null).then(l.bind(e.prepare,e))},_resetAdQueue:function(){this._adQueue.reset(),this._activeAdBreak=null},_onAfterAd:function(){this._popTimeline(),this._adQueue.onEndActiveAd()},_onAdError:function(e,t){return h.getLogger().log("Error occurred on playing an ad."),h.getLogger().log(e+": "+t),e=e||c.AD.ERROR,t=t||c.AD.ERRORS.GENERAL_LINEAR_ERROR,this._handleEvent(e,{error:t}).then(l.bind(this._onAfterAd,this))},_onAdFinished:function(){return this._handleEvent(c.PLAYBACK.END,null).then(l.bind(function(){this._publish(p.ON_AD_END,{adCount:this._adQueue.getQueueLength(),adIndex:this._adQueue.getActiveAdIndex(),ad:this._adQueue.getActiveAd()})},this)).then(l.bind(this._handleEvent,this,c.AD.END)).then(l.bind(this._onAfterAd,this))},_startLinearSource:function(e){var t=new n(e.url,a.TYPE.VIDEO,e.mimetype);return this._prepareForPlayback(t).then(l.bind(g.beginPlaybackFrom,g,0)).catch(l.bind(this._onAdError,this,c.AD.ERROR,c.AD.ERRORS.GENERAL_LINEAR_ERROR))},_onAdStart:function(e,t,i){this._publish(p.ON_AD_START,{adCount:this._adQueue.getQueueLength(),adIndex:this._adQueue.getActiveAdIndex(),ad:e,linear:t,source:i})},_onAdBreakStart:function(){this._publish(p.ON_AD_BREAK_START,{adCount:this._adQueue.getQueueLength(),adIndex:this._adQueue.getActiveAdIndex()})},_showAd:function(){var i,n=this._adQueue.next(),e=this._adQueue.getActiveAdIndex(),r=n.getCreative("linear");return 0===e&&this._onAdBreakStart(),new s(l.bind(function(e,t){this._addTimeline([n,r],null,null),this._handleEvent(c.AD.START,null),this._adQueue.onShowActiveAd(e,t),r?(i=r.getSource(this._preferredFormat,this._lowerBitrate),this._onAdStart(n,r,i),this._startLinearSource(i)):this._onAdError(c.AD_BREAK.ERROR,c.AD_BREAK.ERRORS.UNSUPPORTED_AD_TYPE_ERROR)},this))},_onPlayAdBreakError:function(e){h.getLogger().log("Uncaught ad break error, this should never happen!"),h.getLogger().log(e)},_createQueueChain:function(e){var t,i;return e?(t=e.getAds(),i=s.resolve(null),l.each(t,function(e){this._adQueue.add(e),i=i.then(l.bind(this._showAd,this))},this),i.catch(l.bind(this._onPlayAdBreakError,this))):s.resolve(null)},_createAdQueue:function(e){return this._addTimeline([e],null,null),this._handleEvent(c.AD_BREAK.START,null).then(l.bind(this._createQueueChain,this,e))},_onAdBreakFinished:function(e){return this._publish(p.ON_AD_BREAK_END,{adBreak:e,adCount:this.getTotalAdCount(),adIndex:null}),this._handleEvent(c.AD_BREAK.END,null).then(l.bind(function(){e&&e.updateLastShownTimestamp((new Date).getTime()),this._resetAdQueue(),this._popTimeline(),this._resumeTimeline()},this))},_onPrepareAdBreakError:function(e){h.getLogger().log("Error on preparing ad break. Should be handled before."),h.getLogger().log(e)},startAdBreak:function(e){var t=this;return e?this.isAdBreakActive()?s.reject("ad_break_in_progress"):(g.getMediaSource()&&this._onInterruption(),this._activeAdBreak=e,(l.isArray(e)?s.all(l.map(e,function(e){return e.updateLastShownTimestamp((new Date).getTime()),e.prepare().catch(t._onPrepareAdBreakError)})).then(l.bind(this._mergeAdBreaks,this)):(e.updateLastShownTimestamp((new Date).getTime()),e.prepare().catch(this._onPrepareAdBreakError))).then(function(e){return t._createAdQueue(e).then(l.bind(t._onAdBreakFinished,t,e)).catch(l.bind(t._onStartAdBreakError,t,e))})):s.reject("missing_ad_break")},_mergeAdBreaks:function(e){var t=new d;return t.setOriginalAdBreaks(e),l.each(e,function(e){e&&(!t.trigger&&e.trigger&&(t.trigger=e.trigger),!t.interval&&e.interval&&(t.interval=e.interval),!t.position&&e.position&&(t.position=e.position),l.each(e.getAds(),l.bind(t.addAd,t)))}),t},_onFireTrackingEventError:function(e){h.getLogger().log("Firing event failed"),h.getLogger().log(e)},_expandFireOptions:function(e){var t=this.getTimeline(),i=e.currentTime;try{return t&&(e.playerStatus=t.getLastPlayerStatus(),e.mediaSource=t.getLastMediaSource()),!i&&0!==i&&e.playerStatus?e.currentTime=e.playerStatus.currentTime:isNaN(i)&&(e.currentTime=0),!e.duration&&e.playerStatus&&(e.duration=e.playerStatus.duration),this.isAdActive()&&(e.ad=this._adQueue.getActiveAd(),e.adBreak=this._activeAdBreak),e}catch(e){u.onAppError("expand_fire_options_error: "+e.name+": "+e.message)}},_fireTrackingEvents:function(e,t){t=this._expandFireOptions(t),e&&l.each(e,function(e){e.fire(t).catch(this._onFireTrackingEventError)},this)},_onStartAdBreakError:function(e,t){return h.getLogger().log("Starting ad break failed."),h.getLogger().log(t),this._onAdBreakFinished(e)},_fireTimelineEvents:function(e,t){var i,n=l.isUndefined(t.seekTime)||null===t.seekTime?null:Math.round(t.seekTime);return e.events&&this._fireTrackingEvents(e.events,t),null===e.adBreak||this.isAdBreakActive()?null!==n&&this._publish(p.ON_RESUME,{seekTime:n}):(null!==n&&(this._seekTime=n),i=e.adBreak,this._publish(p.ON_AD_BREAK_READY,{adBreak:i})),s.resolve("nothing_to_handle")},_combineResults:function(e,t){return t&&t.length&&(e=e?e.concat(t):t),e},_traverseTimelines:function(r){var s=this._timelineStack.length-1,o=null,a=null;return l.each(this._timelineStack,function(e,t){var i,n=l.clone(r);n.depth=s-t,i=e.getEvents(n),o=this._combineResults(o,i.events),!a&&i.adBreak&&(l.isArray(i.adBreak)?a=l.filter(i.adBreak,function(e){return e.wasShown&&!e.wasShown()}):i.adBreak.wasShown&&!i.adBreak.wasShown()&&(a=i.adBreak))},this),{events:o,adBreak:a}},_handleEvent:function(e,t){var i,n,r,s,o=this.getTimeline();switch(t=t||{},e){case a.EVENT.STATUS:i=c.TIME_LINE.PARSE_OFFSETS;break;case a.EVENT.PLAYING:i=c.PLAYBACK.START;break;case a.EVENT.BUFFERING:i=c.PLAYBACK.BUFFERING;break;case a.EVENT.STOPPED:i=c.PLAYBACK.CLOSE;break;case a.EVENT.ERROR:if(this.isAdBreakActive())return this._onAdError(c.AD.ERROR,c.AD.ERRORS.PROBLEM_DISPLAYING_MEDIA_FILE);i=c.PLAYBACK.ERROR;break;case a.EVENT.COMPLETE:if(this.isAdBreakActive())return this._onAdFinished();i=c.PLAYBACK.END;break;default:i=e}return!isNaN(t.duration)&&t.duration&&(r=Math.round(t.duration)),o&&(s=Math.round(o.getWatchedSeconds())),n=this._traverseTimelines({eventTrigger:i,currentTime:Math.round(t.currentTime),duration:r,watched:s||0,seekTime:l.isUndefined(t.seekTime)||null===t.seekTime?null:Math.round(t.seekTime)}),this._fireTimelineEvents(n,t)},_countWatchedSeconds:function(e,t){var i=this.getTimeline(),n=e.currentTime-t.currentTime;0<n&&n<=3&&i.addWatchedSeconds(n)},_onPlayerEvent:function(t){var e,i;try{return(e=this.getTimeline())&&((i=e.getLastPlayerStatus())&&this._countWatchedSeconds(t,i),t.state!==a.STATE.STOPPED&&t.state!==a.STATE.BUFFERING&&e.setLastPlayerStatus(t)),this._handleEvent(t.type,t)}catch(e){u.onAppError('on_player_event "'+t.type+'": '+e.name+": "+e.message)}},skipAd:function(){return this._handleEvent(c.PLAYBACK.END,null).then(l.bind(function(){this._publish(p.ON_AD_SKIP,{adCount:this._adQueue.getQueueLength(),adIndex:this._adQueue.getActiveAdIndex(),ad:this._adQueue.getActiveAd()})},this)).then(l.bind(this._handleEvent,this,c.AD.END)).then(l.bind(this._onAfterAd,this))},onUserEvent:function(t,e){var i,n;try{return i=this.getTimeline(),e=e||{},i&&(n=i.getLastPlayerStatus()),n&&(e.currentTime=n.currentTime,e.duration=n.duration),this._handleEvent(t,e)}catch(e){u.onAppError('on_user_event "'+t+'": '+e.name+": "+e.message)}},getTotalAdCount:function(){return this._adQueue.getQueueLength()},getActiveAdIndex:function(){return this._adQueue.getActiveAdIndex()},startPostRolls:function(){return this._handleEvent(c.AD_BREAK.POST_ROLLS,null)},startPreRolls:function(){return this._handleEvent(c.AD_BREAK.PRE_ROLLS,null)},_publish:function(e,t){i.pub(e,t,this)},subscribe:function(e,t){i.sub(e,t,this)},unsubscribe:function(e,t){i.unsub(e,t,this)},_popTimeline:function(){this._timelineStack.pop()},getTimeline:function(){return this._timelineStack[this._timelineStack.length-1]},getBaseTimeline:function(){return this._timelineStack[0]},_addTimeline:function(e,t,i){this._timelineStack.push(new r(e,t,i))},_removeEventListeners:function(){g.removeEventCallback(this,this._onPlayerEvent)},_setEventListeners:function(){g.addEventCallback(this,this._onPlayerEvent)},init:function(e,t,i){this._seekTime=null,this._activeAdBreak=null,this._activeAdIndex=null,this._adQueue=new o,this._timelineStack=[],this._setEventListeners(),this._addTimeline(e||[],t,i)},destroy:function(){this._seekTime=null,this._adQueue.reset(),this._timelineStack.length=0,this._removeEventListeners()}});return f.MANAGER_EVENTS=p,f}),define("rofl/timelinemanager/queue",["rofl/class"],function(e){"use strict";return e.extend({_removeAdQueueEntryByAd:function(e){var t,i,n;for(t=0,i=this._entries.length;t<i;t++)if((n=this._entries[t]).ad===e)return this._entries.splice(t,1),n;return null},_getAdQueueEntryByAd:function(e){var t,i,n;for(t=0,i=this._entries.length;t<i;t++)if((n=this._entries[t]).ad===e)return n;return null},onEndActiveAd:function(){var e=this._entries[this._activeAdIndex];if(e)return e.resolve()},onShowActiveAd:function(e,t){var i=this._entries[this._activeAdIndex];return i&&(i.resolve=e,i.reject=t),this},next:function(){var e=this._entries[++this._activeAdIndex];if(e)return e.ad},getActiveAd:function(){return this._entries[this._activeAdIndex].ad},getActiveAdIndex:function(){return this._activeAdIndex},getQueueLength:function(){return this._entries.length},remove:function(e){return this._removeAdQueueEntryByAd(e),this},add:function(e){return this._entries.push({ad:e,resolve:null,reject:null}),this},reset:function(){return this._activeAdIndex=-1,this._entries.length=0,this},init:function(){this._activeAdIndex=-1,this._entries=[]}})}),define("rofl/timelinemanager/timeline",["rofl/class","antie/runtimecontext","rofl/lib/utils","rofl/timelinemanager/timelineevents","rofl/timelinemanager/timeline/offsetparser"],function(e,t,l,a,i){"use strict";var n=t.getDevice(),r=i.getInstance();return e.extend({getLastMediaSource:function(){return this._lastMediaSource},setLastMediaSource:function(e){this._lastMediaSource=e},getLastPlayerStatus:function(){return this._lastPlayerStatus},setLastPlayerStatus:function(e){this._lastPlayerStatus=e},getWatchedSeconds:function(){return this._watchedSeconds},addWatchedSeconds:function(e){this._watchedSeconds+=e},_isValidEvent:function(e,t){return!(t.isDeep&&!e.isDeep)},_filterEvents:function(e,t){var i,n,r,s=[];for(i=0,n=e.length;i<n;i++)r=e[i],this._isValidEvent(r,t)&&(s.push(r),("function"!=typeof r.isPersistent||r.isPersistent())&&r.isPersistent||(e.splice(i--,1),n--));return s},_isDeepFilter:function(e){var t=e.depth;return l.isNumber(t)&&0!==t},_getEventsByCollectionTrigger:function(e,t,i){var n,r={isDeep:this._isDeepFilter(i)},s=e[t];return n=this._filterEvents(s,r),s.length||delete e[t],n},_getParsedEventTrigger:function(t,e){try{return r.getAppliedOffset({offset:t,currentTime:e.currentTime,duration:e.duration})}catch(e){return n.getLogger().log("Error on parsing offset: "+t),n.getLogger().log(e),"-error-parsing-offset-"}},_appendParsedTrigger:function(e,t){l.isArray(t)?l.each(t,l.bind(this._appendParsedTrigger,this,e)):t.parsedTrigger=e},_findEvents:function(t,i){var n,r,s=i.eventTrigger,e=l.keys(t),o=null;return i.currentTime&&(n=i.currentTime.toString()),l.each(e,function(e){s===a.TIME_LINE.PARSE_OFFSETS?(r=this._getParsedEventTrigger(e,i))===n&&(o=this._getEventsByCollectionTrigger(t,e,i),this._appendParsedTrigger(r,o)):s===e&&(o=this._getEventsByCollectionTrigger(t,e,i))},this),o},_findSkippedAdBreak:function(e){var t,i,n,r,s=e.currentTime,o=e.seekTime||0,a=null;if(o<=s)return a;for(t=0,i=this._playlist.length;t<i;t++)if(r=(n=this._playlist[t]).adBreak,l.isArray(r)&&(r=r[0]),this._adCanBeShown(t,s,o)){if(!this._adCanBeShown(t+1,s,o)){a=n.adBreak;break}r.updateLastShownTimestamp()}return a},_adCanBeShown:function(e,t,i){var n,r,s=this._playlist[e];return!!s&&(n=s.offset,r=s.adBreak,l.isArray(r)&&(r=r[0]),n!==a.AD_BREAK.PRE_ROLLS&&n!==a.AD_BREAK.POST_ROLLS&&t<n&&n<=i&&(!r.wasShown()||r.isPersistent()&&!r.wasRecentlyShown()))},_filterAdBreakByOffset:function(e){var t,i,n,r;for(t=0,i=this._playlist.length;t<i;t++)if(r=(n=this._playlist[t]).adBreak,l.isArray(r)&&(r=r[0]),e===n.offset&&(!r.wasShown()||r.isPersistent()&&!r.wasRecentlyShown()))return n.adBreak;return null},_findAdBreak:function(e){var t,i,n=e.eventTrigger;return!(i=this._filterAdBreakByOffset(n))&&e.currentTime&&(t=e.currentTime.toString(),i=this._filterAdBreakByOffset(t)),i},getEvents:function(e){return(e=e||{}).eventTrigger===a.USER_EVENTS.RESUME?{adBreak:this._findSkippedAdBreak(e),events:this._findEvents(this._events,e)}:{adBreak:this._findAdBreak(e),events:this._findEvents(this._events,e)}},getPostRolls:function(){return this._adBreaks[a.AD_BREAK.POST_ROLLS]},hasPostRolls:function(){return void 0!==this._adBreaks[a.AD_BREAK.POST_ROLLS]},getPreRolls:function(){return this._adBreaks[a.AD_BREAK.PRE_ROLLS]},hasPreRolls:function(){return void 0!==this._adBreaks[a.AD_BREAK.PRE_ROLLS]},getMidRollCount:function(){var e;return this._duration?(e=this._playlist.length,this.hasPreRolls()&&e--,this.hasPostRolls()&&e--,e):null},getMidRolls:function(){var e,t=0;return this.hasPreRolls()&&t++,e=t+this.getMidRollCount(),this._playlist.slice(t,e)},_getUnParsedMidRollCount:function(){var e;return this._duration?(e=l.keys(this._adBreaks).length,this.hasPreRolls()&&e--,this.hasPostRolls()&&e--,e):null},hasMidRolls:function(){return this._duration?0<this._getUnParsedMidRollCount():null},getSegmentCount:function(){return(this.getMidRollCount()||0)+1},getCurrentSegment:function(e){var t,i,n,r=this.getSegmentCount(),s=1,o=this.getMidRolls();if(1===r)return r;for(t=0,i=o.length;t<i;t++)n=o[t],parseInt(n.offset,10)<e&&s++;return s},getPlaylistLength:function(){return this._playlist.length},getPlaylist:function(){return this._playlist},_updatePlaylist:function(){var e,n=[],t=0;this.hasPreRolls()&&t++,l.each(this._adBreaks,function(t,e){var i;e!==a.AD_BREAK.PRE_ROLLS&&e!==a.AD_BREAK.POST_ROLLS&&(i=r.getAppliedOffset({offset:e,duration:this._duration}),l.isArray(i)?l.each(i,function(e){n.push({offset:e,adBreak:t})}):n.push({offset:i,adBreak:t}))},this),n.sort(function(e,t){return e.offset-t.offset<=0?-1:1}),e=[t,0].concat(n),Array.prototype.splice.apply(this._playlist,e)},getDuration:function(){return this._duration},setDuration:function(e){this._duration=e,this.hasMidRolls()&&this._updatePlaylist()},setPrePostPlaylist:function(){this.getPlaylistLength()||(this.hasPreRolls()&&this._playlist.push({offset:a.AD_BREAK.PRE_ROLLS,adBreak:this.getPreRolls()}),this.hasPostRolls()&&this._playlist.push({offset:a.AD_BREAK.POST_ROLLS,adBreak:this.getPostRolls()}),this._duration&&this.hasMidRolls()&&this._updatePlaylist())},_addEvents:function(e){l.each(e,function(e,t){var i,n=this._events[t];for(n||(n=[]),i=n.length-1;0<=i;i--)e.unshift(n[i]);this._events[t]=e},this)},_addAdBreak:function(e){var t;l.isArray(e)?l.each(e,this._addAdBreak,this):e&&((t=this._adBreaks[e.trigger])?l.isArray(t)?this._adBreaks[e.trigger].push(e):this._adBreaks[e.trigger]=[this._adBreaks[e.trigger],e]:this._adBreaks[e.trigger]=e)},isEmpty:function(){return!l.keys(this._adBreaks).length&&!l.keys(this._events).length},init:function(e,t,i){this._duration=i||null,this._playlist=[],this._events={},this._adBreaks={},this._lastPlayerStatus=null,this._lastMediaSource=null,this._watchedSeconds=0,e&&(l.isArray(e)||(e=[e]),l.each(e,function(e){e&&this._addEvents(e.getEvents())},this)),t&&(this._addAdBreak(t),this.setPrePostPlaylist())}})}),define("rofl/timelinemanager/timeline/adbreak",["rofl/timelinemanager/timeline/eventsource","rofl/timelinemanager/timelineevents","antie/runtimecontext","rofl/lib/utils","rofl/lib/promise"],function(e,n,t,r,s){"use strict";var i=t.getCurrentApplication().getConfiguration().advertisement,o=i&&i.adBreak&&void 0!==i.adBreak.recentlyShownBoundary?i.adBreak.recentlyShownBoundary:1e4;return e.extend({wasRecentlyShown:function(){var e=o;return null!==this.lastShownTimestamp&&(void 0!==this.interval&&(e=Math.min(1e3*this.interval-1e3,o)),(new Date).getTime()-this.lastShownTimestamp<e)},wasShown:function(){return null!==this.lastShownTimestamp},updateLastShownTimestamp:function(t){var e=this._originalAdBreaks;return this.lastShownTimestamp=t||(new Date).getTime(),e&&r.each(e,function(e){e&&e.updateLastShownTimestamp(t)}),this.lastShownTimestamp},fireErrorEvent:function(t){var e=this._events[n.AD_BREAK.ERROR],i=s.resolve();return r.each(e,function(e){i=i.then(r.bind(e.fire,e,t))}),i},_isPlayableAd:function(e){var t;return null!=e&&(t=e.getCreative("linear"),Boolean(t&&t.isUsable()))},_filterSequencedAds:function(e){return r.isArray(e)?r.filter(e,function(e){return e&&null!==e.sequence&&this._isPlayableAd(e)},this):null!==e.sequence&&this._isPlayableAd(e)?[e]:[]},_filterUnSequencedAds:function(e){return r.isArray(e)?r.filter(e,function(e){return e&&null===e.sequence&&this._isPlayableAd(e)},this):null===e.sequence&&this._isPlayableAd(e)?[e]:[]},getAds:function(){var e,t,i=[];return e=this._filterSequencedAds(this._ads),t=this._filterUnSequencedAds(this._ads),e=e.sort(function(e,t){return e.sequence-t.sequence}),i=(i=i.concat(e,t)).sort(function(e,t){return e.position-t.position})},addAd:function(e){this._ads.push(e)},isPersistent:function(){return!!this.interval},prepare:function(){return this._source?(this._ads.length=0,this._source.prepare(this)):s.resolve(this)},setOriginalAdBreaks:function(e){this._originalAdBreaks=e},init:function(e,t,i,n,r){this._super(),this.trigger=e,this._type=t,this._source=i,this.interval=n,this.position=r,this._ads=[],this.lastShownTimestamp=null}})}),define("rofl/timelinemanager/timeline/adbreak/ad",["rofl/timelinemanager/timeline/eventsource","rofl/timelinemanager/timelineevents","rofl/lib/utils","rofl/lib/promise"],function(e,n,r,s){"use strict";return e.extend({fireErrorEvent:function(t){var e=this._events[n.AD.ERROR],i=s.resolve();return r.each(e,function(e){i=i.then(r.bind(e.fire,e,t))}),i},getCreative:function(t){return r.filter(this.creatives,function(e){return e.type===t}).pop()},addCreative:function(e){this.creatives.push(e)},init:function(e,t,i){this._super(),this.id=e||"",this.sequence=t?+t:t,this.position=i,this.creatives=[]}})}),define("rofl/timelinemanager/timeline/adbreak/ad/linear",["rofl/timelinemanager/timeline/eventsource","rofl/media/source","rofl/lib/utils"],function(e,r,s){"use strict";var o="DASH",a="SSTR",l="MPEGURL",c="MP4";return e.extend({_orderHigherSource:function(e,t){return t.bitRate-e.bitRate},_orderLowerSource:function(e,t){return e.bitRate-t.bitRate},getSource:function(e,t){var i=[],n="";if(this._lowerBitrate=t,this.sources.sort(this._lowerBitrate?this._orderLowerSource:this._orderHigherSource),e){switch(e){case r.MIME_TYPES.mpd:n=o;break;case r.MIME_TYPES.ism:case r.MIME_TYPES.ssm:n=a;break;case r.MIME_TYPES.m3u8:case r.MIME_TYPES.m3u:n=l;break;case r.MIME_TYPES.mp4:n=c}i=s.filter(this.sources,function(e){return-1<e.type.toUpperCase().indexOf(n)})}return 0<i.length?i[0]:this.sources[0]},isUsable:function(){return this.sources&&0!==this.sources.length},setSkipOffset:function(e){this.skipOffset=e},setSources:function(e){this.sources=e},setDuration:function(e){this.duration=e},setSequence:function(e){this.sequence=e||null},init:function(){this._super(),this.type="linear",this.sequence=null,this.duration=null,this.sources=[],this.skipOffset=null}})}),define("rofl/timelinemanager/timeline/eventsource",["rofl/class","rofl/lib/utils"],function(e,n){"use strict";return e.extend({getEvents:function(){return this._events},removeEvent:function(e){var t,i=this._events[e.trigger];i&&0<=(t=n.indexOf(i,e,0))&&i.splice(t,1)},addEvent:function(e){var t=this._events[e.trigger]||[];e&&e.trigger&&(t.push(e),this._events[e.trigger]=t)},init:function(){this._events={}}})}),define("rofl/timelinemanager/timeline/offsetparser",[],function(){"use strict";var e,t=/^[0-9]+$/,i=/#/,n=/%/,r=/repeat-/,s=/watched-/,o=/:/,a=/\./,l=/([0-9:]*)/,c=/([0-9]{1,2})/g,u={undefined_offset:"Offset cannot be undefined.",unknown_offset_type:"Unknown offset type.",undefined_duration:"Duration cannot be undefined"},d={SECONDS:"seconds",POSITION:"position",PERCENTAGE:"percentage",HMS:"HMS",REPEATABLE:"repeatable",WATCHED:"watched"},h=function(){return this};return h.prototype={OFFSET_TYPES:d,onError:function(e){throw u[e]},normalizeHMSOffset:function(e){return"string"==typeof e&&o.test(e)&&a.test(e)&&(e=e.match(l)[0]),e},getOffsetType:function(e){return void 0===e&&this.onError("undefined_offset"),r.test(e)?d.REPEATABLE:s.test(e)?d.WATCHED:t.test(e)?d.SECONDS:i.test(e)?d.POSITION:n.test(e)?d.PERCENTAGE:o.test(e)?d.HMS:null},HMSToSeconds:function(e){var t,i,n=e.match(c).reverse(),r=0;for(t=0,i=n.length;t<i;t++)r+=Math.pow(60,t)*parseInt(n[t],10);return r},repeatToSeconds:function(e,t){var i,n,r,s=e.match(/repeat-([\S]+)-([\S]+)/),o=t.duration,a=[];for(i=this.getAppliedOffset({offset:s[1],duration:t.duration}),n=s[2],r=parseInt(i,10);r<o;)a.push(r.toString()),r+=parseInt(n,10);return a},isWatched:function(e,t){var i=e.match(/watched-([\S]+)/);return e=this.getAppliedOffset({offset:i[1],currentTime:t.currentTime,duration:t.duration}),(t.watched||0)-e==0},getAppliedOffset:function(e){var t=e||{},i=t.offset,n=t.currentTime,r=t.duration;switch(this.getOffsetType(i)){case d.SECONDS:return i.toString();case d.POSITION:return!1;case d.PERCENTAGE:return void 0===r&&this.onError("undefined_duration"),Math.floor(parseInt(i,10)/100*r).toString();case d.REPEATABLE:return this.repeatToSeconds(i,t);case d.WATCHED:return this.isWatched(i,t)?n.toString():i.toString();case d.HMS:return this.HMSToSeconds(this.normalizeHMSOffset(i)).toString();default:return i.toString()}}},{OFFSET_TYPES:d,getInstance:function(){return e||(e=new h),e}}}),define("rofl/timelinemanager/timeline/trackingevent",["rofl/class","rofl/lib/utils","rofl/lib/imageloader"],function(e,t,i){"use strict";var n={fire:function(e){return e=e||this.url,this.isPersistent&&(e=t.addToQueryStringOfURL(e,{cache_buster:Math.floor(1e3*Math.random()+1)})),this.parsedTrigger=null,new i(e,!0)},init:function(e,t,i){i=i||{},this.trigger=e,this.parsedTrigger=null,this.url=t,this.options=i,this.isDeep=i.isDeep||!1,this.isPersistent=i.isPersistent||!1}};return e.extend(n)}),define("rofl/timelinemanager/timeline/trackingevent/macroevent",["rofl/lib/utils","rofl/timelinemanager/timeline/trackingevent"],function(s,e){"use strict";var t={_encodeMacroValue:function(e){if(!s.isString(e))try{e=e.toString()}catch(e){return null}return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})},_getMacroValue:function(){throw"No _getMacroValue defined."},_replaceMacros:function(i,n){for(var e,t=[],r=new RegExp("\\[([A-Z0-9_-]+)\\]","g");null!==(e=r.exec(i));)t.push(e[1]);return s.each(t,function(e){var t=this._encodeMacroValue(this._getMacroValue(e,n));null!==t&&(i=i.replace("["+e+"]",t))},this),i},fire:function(e){return this._super(this._replaceMacros(this.url,e))}};return e.extend(t)}),define("rofl/timelinemanager/timelineevents",[],function(){"use strict";return{TIME_LINE:{PARSE_OFFSETS:"parse-offsets"},USER_EVENTS:{RESUME:"resume",PAUSE:"pause",REWIND:"rewind",SKIP:"skip",ENTER_FULLSCREEN:"enter-fullscreen",EXIT_FULLSCREEN:"exit-fullscreen",MUTE:"mute",UN_MUTE:"un-mute",ACCEPT:"accept-ad",CLOSE:"close"},PLAYBACK:{START:"playback-start",BUFFERING:"playback-buffering",BUFFER_END:"playback-buffer-end",WATCHED:"playback-watched-",END:"playback-end",INTERRUPT:"playback-interrupt",RESUME:"playback-resume",ERROR:"playback-error"},AD_BREAK:{PRE_ROLLS:"adbreak-pre-rolls",POST_ROLLS:"adbreak-post-rolls",REPEAT:"adbreak-repeat-",START:"adbreak-start",END:"adbreak-end",ERROR:"adbreak-error",ERRORS:{UNDEFINED_ERROR:"adbreak-undefined-error",SCHEMA_ERROR:"adbreak-schema-error",UNSUPPORTED_RESPONSE_ERROR:"adbreak-unsupported-response-error",SCHEMA_PARSING_ERROR:"adbreak-schema-parsing-error",UNSUPPORTED_AD_BREAK_ERROR:"adbreak-unsupported-ad-break-error",GENERAL_AD_RESPONSE_ERROR:"adbreak-general-ad-response-error",UNSUPPORTED_AD_TYPE_ERROR:"adbreak-unsupported-ad-type-error",AD_PARSING_ERROR:"adbreak-ad-parsing-error",AD_REQUEST_TIMEOUT:"adbreak-ad-request-timeout-error",AD_REQUEST_ERROR:"adbreak-ad-request-error"}},AD:{START:"ad-start",END:"ad-end",ERROR:"ad-error",ERRORS:{NON_DISPLAYABLE_AD:"ad-non-displayable-ad",WRONG_LINEARITY:"ad-wrong-linearity-error",WRONG_DURATION:"ad-wrong-duration-error",WRONG_SIZE:"ad-wrong-size-error",GENERAL_LINEAR_ERROR:"ad-linear-error",MEDIA_FILE_NOT_FOUND:"ad-media-file-not-found",MEDIA_FILE_TIMEOUT:"ad-media-file-timeout",NO_SUPPORTED_MEDIA_FILES:"ad-no-supported-media-files",PROBLEM_DISPLAYING_MEDIA_FILE:"ad-problem-displaying-media-file",UNDEFINED_ERROR:"ad-undefined-error"}},LINEAR_CREATIVE:{SHOW:"linear-creative-show",ACCEPT:"linear-creative-accept"}}}),define("rofl/urlbuilder",["antie/urlbuilder"],function(e){"use strict";return e.extend({getURL:function(e,t){return this._super(e,t).replace(/%25/g,"%").replace(/%5B/g,"[").replace(/%5D/g,"]")}})}),define("rofl/widgets/button",["antie/widgets/button","rofl/lib/utils","rofl/events/pointerselectevent"],function(e,n,i){"use strict";return e.extend({_getEventCoordinates:function(e){var t={x:null,y:null};return e.pageX&&e.pageY?(t.x=e.pageX,t.y=e.pageY):e.clientX&&e.clientY&&(t.x=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,t.y=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),t},_onClickEvent:function(e){var t;this._disabled||(t=this._getEventCoordinates(e),this.focus(),this.bubbleEvent(new i(this,t.x,t.y)))},_onClickIsSupported:function(){return void 0!==document.onclick},_setOnClickEvent:function(){this._unsetOnClickEvent(),this._onClickIsSupported()&&this.isRendered()&&(this._onClickHandler=n.bind(this._onClickEvent,this),this.outputElement.onclick=this._onClickHandler)},_unsetOnClickEvent:function(){this._onClickHandler&&this.isRendered()&&(this.outputElement.onclick=null,this._onClickHandler=null)},hasFocusDelay:function(){return!1},render:function(e){var t=this.getAttributes(),i=this._super(e);return void 0!==t&&n.each(t,function(e,t){i.setAttribute(t,e)},this),this._setOnClickEvent(),i},init:function(e,t){this._onClickHandler=null,this._super(e,t)},dispose:function(){this._unsetOnClickEvent()}})}),define("rofl/widgets/carousel",["antie/widgets/carousel","rofl/decorators/continuouslistener","antie/widgets/carousel/strips/wrappingstrip","rofl/widgets/carousel/orientations/horizontalrtl","rofl/lib/utils","antie/runtimecontext"],function(e,n,s,t,i,o){"use strict";var r,a=i.extend({},e.orientations,{HORIZONTAL_RTL:t}),l={LTR:"ltr",RTL:"rtl"};return(r=e.extend({init:function(e,t,i){i===l.RTL&&(t=a.HORIZONTAL_RTL),this._direction=null,this.setDirection(i),this._super(e,t),this.decorate([n])},dispose:function(){this._removeContinuousListener(),this._super()},getChildWidgetByIndex:function(e){return this._widgetStrip.getChildWidgetByIndex(e)},focus:function(){var e=this.getActiveChildWidget();return!!e&&e.focus()},getIndexOfChildWidget:function(e){return this._widgetStrip.getIndexOfChildWidget(e)},setAligner:function(e){this._aligner=e},getMask:function(){return this._mask},getCurrentScrollOffset:function(){var e=this.orientation().edge(),t=parseInt(this._widgetStrip.outputElement.style[e],10)||0;return this.getDirection()===l.RTL?t:-t},getWidgetIndexAtOffset:function(e){for(var t=0,i=this._widgetStrip.getChildWidgetCount();t<i-1&&!(this.getItemOffset(t+1)>e);)t++;return t},getInnerLength:function(e){var t,i,n,r=0,s=0;return e._length?r=e._length:e.outputElement&&(t=o.getDevice(),i=e.outputElement,n=this.orientation().dimension(),r=t.getElementSize(i)[n],"height"===n?s=(parseInt(window.getComputedStyle(i,null).getPropertyValue("padding-top"),10)||0)+(parseInt(window.getComputedStyle(i,null).getPropertyValue("padding-bottom"),10)||0):"width"===n&&(s=(parseInt(window.getComputedStyle(i,null).getPropertyValue("padding-left"),10)||0)+(parseInt(window.getComputedStyle(i,null).getPropertyValue("padding-right"),10)||0))),r-s},getItemOffset:function(e){var t,i=this._mask._getAlignmentPoint(),n=this._mask._getWidgetAlignmentPoint(e),r=this._widgetStrip.getChildWidgetCount()-1,s=this._widgetStrip.getLengthToIndexIncludingWidget(r),o=Math.max(0,s-this.getInnerLength(this._mask));return(t=this._widgetStrip.getLengthToIndex(e)-i+n)<0&&(t=0),o<t&&(t=o),parseInt(t,10)||0},getMaximumOffset:function(){return this.getItemOffset(this._widgetStrip.getChildWidgetCount()-1)},scrollToPixel:function(e,t){var i=this.getDirection()===l.RTL?e:-e;this._mask._moveContentsTo(i,t)},scrollByPixels:function(e,t){var i=this.getDirection()===l.RTL,n=this.orientation().edge(),r=this.getCurrentScrollOffset(),s=Math.max(0,r+e),o=this.getMaximumOffset(),a={up:!1,down:!1,left:!1,right:!1};if(t=t||{skipAnim:!0},o<=s)switch(s=o,n){case"left":a.right=!i,a.left=i;break;case"top":a.down=!0}if(s<=0)switch(s=0,n){case"left":a.left=!i,a.right=i;break;case"top":a.up=!0}return this.scrollToPixel(s,t),a},scrollByItems:function(e,t){var i,n=this.getWidgetIndexAtOffset(this.getCurrentScrollOffset())+e,r=this._widgetStrip.getChildWidgetCount();this._widgetStrip instanceof s?n=(r+n)%r:n<0?n=0:r-1<n&&(n=r-1),i=this.getItemOffset(n),this.scrollToPixel(i,t)},canScroll:function(){var e=this._widgetStrip.getChildWidgetCount();return this._widgetStrip instanceof s||0<this.getItemOffset(e-1)},setWidgetStrip:function(e){this._widgetStrip=new e(this.id+"_WidgetStrip",this._orientation,this._direction),this._navigator&&this._navigator.setContainer(this._widgetStrip),this._mask&&this._mask.setWidgetStrip(this._widgetStrip)},setDirection:function(e){if(e){if(this._outputElement)throw"Set direction before rendering an output element.";this._direction=e}},getDirection:function(){return this._direction||null},render:function(e){var t=this._super(e);return this._direction&&this.setStyleTo("direction",this._direction),t}})).orientations=a,r.directions=l,r}),define("rofl/widgets/carousel/aligners/basic",["antie/widgets/carousel/aligners/aligner","rofl/lib/utils"],function(s,o){"use strict";return s.extend({_align:function(e,t,i){var n,r;n=this._mask.getWidgetStrip().getActiveChildWidgetIndex(),r=t===s.directions.FORWARD?e.indexAfter(n):e.indexBefore(n),o.isNumber(r)&&(this._informMaskBeforeAlign(r),this._isWrap(n,r,t)?this._wrap(n,r,e,t,i):this._moveNormally(r,i))},_getWidgetStripOffset:function(){var e=this._mask.getWidgetStrip(),t=e.hasClass("horizontal")?"left":"top";return parseInt(e.outputElement.style[t],10)||0}})}),define("rofl/widgets/carousel/aligners/natural",["antie/widgets/carousel/aligners/aligner","rofl/lib/utils"],function(c,u){"use strict";return c.extend({setNumberOfItemsVisibleOnScreen:function(e){this._itemsOnScreen=e},_align:function(e,t,i){var n,r,s,o=this._mask.getWidgetStrip().getActiveChildWidgetIndex(),a=t===c.directions.FORWARD?e.indexAfter(o):e.indexBefore(o),l=this._itemsOnScreen-1;if(u.isNumber(a)){if(this._isWrap(o,a,t))throw new Error("Wrapping is not supported in the NaturalAligner");this._informMaskBeforeAlign(a),s=this._mask.getWidgetStrip().lengthOfWidgetAtIndex(a),n=this._getWidgetStripOffset(),l<(r=a-Math.abs(Math.floor(n/s)))?(this._mask.setAlignPoint(l*s),this._moveNormally(a,i)):r<0&&(this._mask.setAlignPoint(0),this._moveNormally(a,i)),r<=l&&0<=r&&this._informMaskAfterAlign(a)}},_getWidgetStripOffset:function(){var e=this._mask.getWidgetStrip(),t=e.hasClass("horizontal")?"left":"top";return parseInt(e.outputElement.style[t],10)||0}})}),define("rofl/widgets/carousel/aligners/naturaldynamic",["rofl/widgets/carousel/aligners/natural","antie/widgets/carousel/aligners/aligner","antie/runtimecontext","rofl/lib/utils"],function(e,g,t,p){"use strict";var f=t.getCurrentApplication().getLayout().requiredScreenSize.width;return e.extend({_align:function(e,t,i){var n,r,s,o,a,l,c=this._mask.getWidgetStrip().getActiveChildWidgetIndex(),u=t===g.directions.FORWARD?e.indexAfter(c):e.indexBefore(c),d=this._itemsOnScreen-1,h=this._getLeftOffsetScreen();if(p.isNumber(u)){if(this._isWrap(c,u,t))throw new Error("Wrapping is not supported in the NaturalDynamicAligner");this._informMaskBeforeAlign(u),s=this._mask.getWidgetStrip().lengthOfWidgetAtIndex(u),n=Math.abs(this._getWidgetStripOffset()),r=u-Math.abs(Math.floor(n/s)),a=this._mask.getWidgetStrip().getChildWidgetCount(),l=Math.abs(this._mask.getWidgetStrip().getLengthToIndex(a)-n-f+h),d<r?(o=d*s,l<=s&&a>this._itemsOnScreen+1&&(0<l?o+=Math.abs(this._mask.getWidgetStrip().getLengthToIndex(a-1)-n-f+h):o=f-s-h-(u===a-1?0:s)),this._updatePositions(o,u,i)):r<=0&&this._updatePositions(0,u,i),r<=d&&0<=r&&this._informMaskAfterAlign(u)}},_updatePositions:function(e,t,i){this._mask.setAlignPoint(e),this._moveNormally(t,i)},_getLeftOffsetScreen:function(){var e=0;return this._mask.outputElement.getBoundingClientRect()&&(e=this._mask.outputElement.getBoundingClientRect().left||this._mask.outputElement.getBoundingClientRect().x||0),e}})}),define("rofl/widgets/carousel/orientations/horizontalrtl",["antie/class","antie/events/keyevent"],function(e,t){"use strict";return new(e.extend({dimension:function(){return"width"},edge:function(){return"left"},styleClass:function(){return"horizontal"},defaultKeys:function(){return{PREVIOUS:t.VK_RIGHT,NEXT:t.VK_LEFT}}}))}),define("rofl/widgets/carousel/strips/cullingstrip",["antie/widgets/carousel/strips/cullingstrip","antie/widgets/carousel/strips/widgetstrip"],function(e,r){"use strict";return e.extend({append:function(e,t){var i=r.prototype.append.call(this,e,t);return this._widgetContexts.push(this.createContext(e,this)),i},insert:function(e,t,i){var n=r.prototype.insert.call(this,e,t,i);return this._widgetContexts.splice(e,0,this.createContext(t,this)),n},removeAll:function(){return this._widgetContexts=[],r.prototype.removeAll.call(this)}})}),define("rofl/widgets/carousel/strips/widgetstrip",["antie/widgets/carousel/strips/widgetstrip"],function(e){"use strict";return e.extend({init:function(e,t,i){this._super(e,t),this._direction=i},_getElementOffset:function(e){var t="rtl"===this._direction;return this._getDevice().getElementOffset(e,t)[this._getEdge()]},getFullWidgetLength:function(e){var t=e.outputElement,i=this._getDevice(),n=this._getDimension(),r=0,s=0;return t&&(r=i.getElementSize(t)[n],"height"===n?s=(parseInt(window.getComputedStyle(t,null).getPropertyValue("margin-top"),10)||0)+(parseInt(window.getComputedStyle(t,null).getPropertyValue("margin-bottom"),10)||0):"width"===n&&(s=(parseInt(window.getComputedStyle(t,null).getPropertyValue("margin-left"),10)||0)+(parseInt(window.getComputedStyle(t,null).getPropertyValue("margin-right"),10)||0))),r+s},getLengthToIndexIncludingWidget:function(e){var t=this.getChildWidgets(),i=this._getDevice(),n=t.length,r=0;return 0<n&&(e<0&&(e=0),n-1<e&&(e=n-1),r=(t[e].outputElement?i.getElementOffset(t[e].outputElement)[this._getEdge()]:0)+this.getFullWidgetLength(t[e])),r}})}),define("rofl/widgets/carousel/strips/wrappingstrip",["antie/widgets/carousel/strips/wrappingstrip","antie/widgets/carousel/strips/widgetstrip"],function(e,r){"use strict";return e.extend({append:function(e,t){var i=r.prototype.append.call(this,e,t);return this._recalculateIfAuto(),i},insert:function(e,t,i){var n=r.prototype.insert.call(this,e,t,i);return this._recalculateIfAuto(),n},remove:function(e,t){var i=r.prototype.remove.call(this,e,t);return this._recalculateIfAuto(),i},_lengthOfWidgetAtIndexUsingSuppliedValues:function(e){return this._lengths[e]||null},getFullWidgetLength:function(e){var t=e.outputElement,i=this._getDevice(),n=this._getDimension(),r=0,s=0;return t&&(r=i.getElementSize(t)[n],"height"===n?s=(parseInt(window.getComputedStyle(t,null).getPropertyValue("margin-top"),10)||0)+(parseInt(window.getComputedStyle(t,null).getPropertyValue("margin-bottom"),10)||0):"width"===n&&(s=(parseInt(window.getComputedStyle(t,null).getPropertyValue("margin-left"),10)||0)+(parseInt(window.getComputedStyle(t,null).getPropertyValue("margin-right"),10)||0))),r+s},getLengthToIndexIncludingWidget:function(e){var t=this.getChildWidgets(),i=this._getDevice(),n=t.length,r=0;return 0<n&&(e<0&&(e=0),n-1<e&&(e=n-1),r=(t[e].outputElement?i.getElementOffset(t[e].outputElement)[this._getEdge()]:0)+this.getFullWidgetLength(t[e])),r}})}),define("rofl/widgets/component",["antie/widgets/component","rofl/lib/utils"],function(e,i){"use strict";var t=function(){};return e.extend({onBeforeRender:t,onBeforeShow:t,onAfterShow:t,onBeforeHide:t,onAfterHide:t,init:function(e){var t=this;this._super(e),this.addEventListener("beforerender",function(e){t.onBeforeRender&&i.isFunction(t.onBeforeRender)&&t.onBeforeRender(e),e.stopPropagation()}),this.addEventListener("beforeshow",function(e){t.onBeforeShow&&i.isFunction(t.onBeforeShow)&&t.onBeforeShow(e),e.stopPropagation()}),this.addEventListener("aftershow",function(e){t.onAfterShow&&i.isFunction(t.onAfterShow)&&t.onAfterShow(e),e.stopPropagation()}),this.addEventListener("beforehide",function(e){t.onBeforeHide&&i.isFunction(t.onBeforeHide)&&t.onBeforeHide(e),e.stopPropagation()}),this.addEventListener("afterhide",function(e){t.onAfterHide&&i.isFunction(t.onAfterHide)&&t.onAfterHide(e),e.stopPropagation()})}})}),define("rofl/widgets/componentcontainer",["antie/widgets/componentcontainer"],function(e){"use strict";var t=e.extend({pushComponent:function(e,t){var i;i=!(!1===(t=t||{}).keepHistory),this.show(e,t,i)},pop:function(){return this._historyStack.pop()},reload:function(e){this._currentComponent&&this.show(this.getCurrentModule(),this.getCurrentArguments(),!1,this._currentComponent.getCurrentState(),!0,!1!==e&&this._previousFocus)},getHistoryStack:function(){return this._historyStack}});return t.destroy=e.destroy,t}),define("rofl/widgets/container",["antie/widgets/container","antie/widgets/widget","rofl/lib/pubsub","rofl/events/broadcastevent","rofl/lib/utils"],function(e,i,t,n,r){"use strict";return e.extend({getChildWidgetByIndex:function(e){return this._childWidgetOrder[e]},getActiveChildWidgetIndex:function(){return this.getIndexOfChildWidget(this.getActiveChildWidget())},unsetActiveChildWidget:function(){this._activeChildWidget&&(this._activeChildWidget.removeClass("active"),this._setActiveChildFocussed(!1)),this._activeChildWidget=null},setActiveChildWidget:function(e){var t;if(!e)return!1;if(this.hasChildWidget(e.id)){if((t=this)._activeChildWidget&&this._activeChildWidget!==e&&(this._activeChildWidget.removeClass("active"),this._setActiveChildFocussed(!1),this._activeChildWidget=null),e.isFocusable()){if(e.addClass("active"),this._activeChildWidget=e,null===this.getCurrentApplication().getFocussedWidget())for(;null!==t.parentWidget;)(t.parentWidget._activeChildWidget=t)._isFocussed=!0,t=t.parentWidget;this._isFocussed&&this._setActiveChildFocussed(!0)}return!0}return!1},isFocusable:function(){var e,t;for(e=0,t=this._childWidgetOrder.length;e<t;e++)if(this._childWidgetOrder[e]&&this._childWidgetOrder[e].isFocusable())return null===this._activeChildWidget&&this.setActiveChildWidget(this._childWidgetOrder[e]),!0;return!1},broadcastEvent:function(e){e=n.convert(e),t.pub(e.type,e.data||{},this)},removeChildWidget:function(e,t){e instanceof i&&e.dispose(),this._super(e,t)},render:function(e){var t,i=this._super(e);return void 0!==(t=this.getAttributes())&&r.each(t,function(e,t){i.setAttribute(t,e)}),i}})}),define("rofl/widgets/grid",["antie/widgets/grid","rofl/decorators/continuouslistener","rofl/events/keyevent","rofl/events/grid/selecteditemchange"],function(e,t,o,i){"use strict";return e.extend({init:function(){this._super.apply(this,arguments),this.decorate([t])},dispose:function(){this._removeContinuousListener(),this._super()},setWidgetAt:function(e,t,i){i?this._super(e,t,i):this._childWidgetOrder[this._cols*t+e]=i},setCols:function(e){this._cols=e},getCols:function(){return this._cols},getSelectedCol:function(){return this._selectedCol},setRows:function(e){this._rows=e},getRows:function(){return this._rows},getSelectedRow:function(){return this._selectedRow},_onKeyDown:function(e){var t,i,n,r,s;if(e.keyCode===o.VK_UP||e.keyCode===o.VK_DOWN||e.keyCode===o.VK_LEFT||e.keyCode===o.VK_RIGHT){t=this._selectedCol,n=this._selectedRow,r=null;do{if(e.keyCode===o.VK_UP?n--:e.keyCode===o.VK_DOWN?n++:e.keyCode===o.VK_LEFT?t--:e.keyCode===o.VK_RIGHT&&t++,t<0||t>=this._cols)break;if(n<0||n>=this._rows)break;if(i=n*this._cols+t,(s=this._childWidgetOrder[i])&&s.isFocusable()){r=s;break}}while(null===r);r?(this.setActiveChildWidget(r),e.stopPropagation()):(e.keyCode===o.VK_DOWN?this._selectedRow<this._rows-1&&(s=this.getLastFocusableWidgetOnRow(this._selectedRow+1))&&(r=s):e.keyCode===o.VK_UP&&0<this._selectedRow&&(s=this.getLastFocusableWidgetOnRow(this._selectedRow-1))&&(r=s),r&&(this.setActiveChildWidget(r),e.stopPropagation()))}},removeChildWidgets:function(){for(var e,t=0,i=this._childWidgetOrder,n=i.length;t<n;t++)(e=i[t])&&(e.parentWidget=null);this._childWidgetOrder=[],this._super()},setActiveChildWidget:function(e){this._super(e),this.bubbleEvent(new i(this,e,this._selectedCol,this._selectedRow))},getLastFocusableWidgetOnRow:function(e){for(var t,i=this._childWidgetOrder.slice(e*this._cols,e*this._cols+this._cols),n=i.length-1;0<=n;n--)if((t=i[n])&&t.isFocusable())return t}})}),define("rofl/widgets/horizontallist",["antie/widgets/horizontallist","rofl/widgets/list"],function(e,n){"use strict";return e.extend({init:function(e,t,i){this._super(e,t,i),this._orientation=n.orientations.HORIZONTAL}})}),define("rofl/widgets/image",["antie/widgets/image","antie/runtimecontext","rofl/lib/utils"],function(e,i,t){"use strict";var n=e.extend({init:function(e,t,i,n){n=n||{},this._super(e,t,i,n.renderMode),this._onLoad=n.onLoad,this._onError=n.onError,this._bindListenersOnRender=!1!==n.bindListenersOnRender},setSize:function(e){var t=i.getDevice();this._size=e,this.outputElement&&this._imageElement&&(t.setElementSize(this._imageElement,e),t.setElementSize(this.outputElement,e))},setSrc:function(e){this._super(e),this.outputElement&&this._imageElement&&this._bindListeners()},render:function(e){return this._super(e),this._bindListenersOnRender&&this._bindListeners(),this.outputElement},_bindListeners:function(){t.isFunction(this._onLoad)&&(this._imageElement.onload=this._onLoad),t.isFunction(this._onError)&&(this._imageElement.onerror=this._onError)},setOnLoadCallback:function(e){this._onLoad=e},setOnErrorCallback:function(e){this._onError=e}});return n.RENDER_MODE_IMG=e.RENDER_MODE_IMG,n.RENDER_MODE_CONTAINER=e.RENDER_MODE_CONTAINER,n}),define("rofl/widgets/input",["rofl/lib/utils","rofl/widgets/input/text","rofl/widgets/input/password"],function(i,e,t){"use strict";var n,r={text:e,password:t};return(n=function(e,t){if(!e)throw new Error("You need to specify an input type");if(i.isUndefined(r[e]))throw new Error("Input type `"+e+"` is not known");return new r[e](t)}).TYPES={TEXT:"text",PASSWORD:"password"},n}),define("rofl/widgets/input/password",["antie/runtimecontext","rofl/widgets/input/text"],function(s,e){"use strict";return e.extend({_maskCharacter:"*",_overflowPrefix:"",_maskedCharacterLength:1,init:function(e){e=e||{},this._super(e),e.maskCharacter&&this.setMaskCharacter(e.maskCharacter)},displayValue:function(e){var t=s.getDevice(),i=this.outputElement,n=this._overflowLength,r=this._overflowPrefix;i&&(e?(this._removePlaceholder(),n&&e.length>n&&(e=e.slice(-n+r.length)),t.setElementContent(i,r+this._maskValue(e))):this._showPlaceholder())},setMaskCharacter:function(e){this._maskCharacter=e},_maskValue:function(e){for(var t="",i=e.length;0<i;)t+=this._maskCharacter,i--;return t}})}),define("rofl/widgets/input/text",["rofl/widgets/widget","rofl/decorators/focus","antie/runtimecontext","rofl/lib/utils","rofl/events/keyevent","antie/events/selectevent","rofl/events/pointerselectevent"],function(e,i,s,t,n,r,o){"use strict";return e.extend({_value:"",_placeholder:"",_keyboard:null,_onKeyboardTextChangeBound:null,_overflowPrefix:"...",_overflowLength:!1,init:function(e){var t=this;e=e||{},this._super(e.id),e.value&&this.setValue(e.value),e.placeholder&&(this._placeholder=e.placeholder),this._disabled=!1,this.addClass(["input","text"]),this.decorate([i]),this.addEventListener("keydown",function(e){e.keyCode===n.VK_ENTER&&(t.select(),e.stopPropagation())})},render:function(e){return this.outputElement||(this.outputElement=e.createContainer(this.getId(),this.getClasses())),this.displayValue(this._value),this._setOnClickEvent(),this.outputElement},getValue:function(){return this._value},setValue:function(e){var t=this._keyboard;e=e||"",this.displayValue(e),t&&t.setText(e,!0),this._value=e},displayValue:function(e){var t=s.getDevice(),i=this.outputElement,n=this._overflowLength,r=this._overflowPrefix;i&&(e?(this._removePlaceholder(),n&&e.length>n&&(e=r+e.slice(-n+r.length)),t.setElementContent(i,e)):this._showPlaceholder())},setOverflowLength:function(e){var t=this.getValue();this._overflowLength=e,t.length>e&&this.setValue(t)},setOverflowPrefix:function(e){var t=this.getValue(),i=this._overflowLength;this._overflowPrefix=e,i&&t.length>i&&this.setValue(t)},_showPlaceholder:function(){var e=this.outputElement;this.addClass("placeholder"),s.getDevice().setElementContent(e,this._placeholder)},_removePlaceholder:function(){this.removeClass("placeholder")},setKeyboard:function(e){(this._keyboard=e).setText(this.getValue(),!0),null===this._onKeyboardTextChangeBound&&(this._onKeyboardTextChangeBound=t.bind(this._onKeyboardTextChange,this)),e.addEventListener("textchange",this._onKeyboardTextChangeBound)},unsetKeyboard:function(){var e=this._keyboard;if(!e)throw new Error("Trying to unset keyboard while none is set");e.removeEventListener("textchange",this._onKeyboardTextChangeBound),this._keyboard=null,this._onKeyboardTextChangeBound=null},_onKeyboardTextChange:function(e){this.setValue(e.text)},setDisabled:function(e){(this._disabled=e)?this.addClass("inputDisabled"):this.removeClass("inputDisabled")},_getEventCoordinates:function(e){var t={x:null,y:null};return e.pageX&&e.pageY?(t.x=e.pageX,t.y=e.pageY):e.clientX&&e.clientY&&(t.x=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,t.y=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),t},_onClickEvent:function(e){var t;this._disabled||(t=this._getEventCoordinates(e),this.focus(),this.bubbleEvent(new o(this,t.x,t.y)))},_onClickIsSupported:function(){return void 0!==document.onclick},_setOnClickEvent:function(){this._unsetOnClickEvent(),this._onClickIsSupported()&&this.isRendered()&&(this._onClickHandler=t.bind(this._onClickEvent,this),this.outputElement.onclick=this._onClickHandler)},_unsetOnClickEvent:function(){this._onClickHandler&&this.isRendered()&&(this.outputElement.onclick=null,this._onClickHandler=null)},select:function(){this.bubbleEvent(new r(this))},dispose:function(){this._unsetOnClickEvent()}})}),define("rofl/widgets/keyboard",["antie/widgets/keyboard","antie/widgets/button","antie/widgets/label","antie/events/keyevent","antie/events/textchangeevent"],function(e,s,o,n,r){"use strict";var t=e.extend({_backspaceOnBack:!1,setBackspaceOnBack:function(e){this._backspaceOnBack=e},setText:function(e,t){var i=this.getText();0<this._maximumLength&&(e=e.substr(0,this._maximumLength)),this._super(e),t||i===e||this.bubbleEvent(new r(this,this._currentText,null,!1))},addCustomKey:function(e,t,i){var n=new s(this.id+"_custom_"+e+"_"+t),r=new o("");i=i||{},n.setDataItem(i.label),n.addClass(["key"+i.key,"keyboardButton"]),i.label&&r.setText(i.label),i.labelClass&&r.addClass(i.labelClass),n.appendChildWidget(r),i.callback&&n.addEventListener("select",function(e){i.callback(e),e.stopPropagation()}),this.setWidgetAt(e,t,n),this._letterButtons[i.key]=n},_onKeyDownHandler:function(e){var t,i=this._currentText;if(this._backspaceOnBack&&i.length&&e.keyCode===n.VK_BACK&&(e.keyCode=n.VK_BACK_SPACE),e.keyCode!==n.VK_SPACE)return!e.keyChar||(e.stopPropagation(),this._multitapConfig&&this._multiTap&&/[0-9]/.test(e.keyChar))?void this._super(e):((t=this._letterButtons[e.keyChar.toUpperCase()])||(t=this._letterButtons[e.keyChar.toLowerCase()]),void(t&&(this._focussedCharacter=t.getDataItem(),t.focus(),t.select())));0<i.length&&" "!==i.slice(-1)&&(this._appendCharacter(" "),this._updateClasses(),this.bubbleEvent(new r(this,i,null,!1)))},setKeyboardKeys:function(e){if(e.length!==this._cols*this._rows)throw Error("Amount of keyboard keys is not the same, try updating the number of cols/rows first.");this._letterButtons=[],this._keys=e,this._focussedCharacter=e[0],this._populateTheGridWithKeyButtons("",this._cols,this._rows)}});return t.LAST_WORD_REGEXP=/([^\s]+)$/,t.SHORT_WORD_REGEXP=/^(to|is|in|on|it|and|at|by|a|an|of|if)$/i,t.CAPITALISATION_UPPER=0,t.CAPITALISATION_LOWER=1,t.CAPITALISATION_TITLE=2,t}),define("rofl/widgets/keyboard/multi",["rofl/widgets/container","antie/widgets/verticallist","antie/widgets/horizontallist","rofl/widgets/keyboard","rofl/widgets/keyboard/multi/swapkey","rofl/widgets/keyboard/multi/keysets/default","rofl/lib/utils","antie/runtimecontext"],function(e,s,o,a,r,l,c,u){"use strict";var d;return(d=e.extend({_containerList:null,_swapList:null,_orientation:null,_keysetCollection:null,_activeKeyset:null,_keyboard:null,init:function(e){var t,i,n,r=new a(null,0,0);e=e||{},r.setCapitalisation(a.CAPITALISATION_LOWER),n=(i=e.orientation||d.orientations.VERTICAL)===d.orientations.VERTICAL?(t=new s,new o):(t=new o,new s),e.swapListOrientation&&(n=e.swapListOrientation===d.orientations.VERTICAL?new s:new o),this._orientation=i,this._containerList=t,this._swapList=n,this._keyboard=r,this.setKeysetCollection(e.keysets||l),this._super(e.id),this.addClass("keyboard-container"),this._onSwapKeysetBound=c.bind(this._onSwapKeyset,this),this.addEventListener("swapkeyset",this._onSwapKeysetBound),t.appendChildWidget(r),t.appendChildWidget(n),this.appendChildWidget(t)},getContainerList:function(){return this._containerList},getKeyboard:function(){return this._keyboard},getSwapList:function(){return this._swapList},setText:function(e){this._keyboard.setText(e)},getText:function(){return this._keyboard.getText()},getKeysetCollection:function(){return this._keysetCollection},setKeysetCollection:function(e){var t=this._swapList;this._keysetCollection=e,this.setActiveKeysetByIndex(0),t.removeChildWidgets(),c.each(this._createSwapKeys(e),function(e){t.appendChildWidget(e)})},getActiveKeyset:function(){return this._activeKeyset},setActiveKeysetByIndex:function(e){var t;if(e>this._keysetCollection.length-1)throw Error("The keyset you're trying to activate doesn't exist");(t=this._keysetCollection[e])!==this._activeKeyset?(this._activeKeyset=t,this._populateKeyboardWithKeyset(t)):t.capitalise&&this.toggleCapitalisation()},toggleCapitalisation:function(){var e=this._keyboard;e.getCapitalisation()===a.CAPITALISATION_LOWER?(e.setCapitalisation(a.CAPITALISATION_UPPER),this.addClass("capitalised")):(e.setCapitalisation(a.CAPITALISATION_LOWER),this.removeClass("capitalised"))},setActiveKeysetBySwapKey:function(e){for(var t=this._keysetCollection,i=t.length,n=0;n<i;n++)if(t[n].swap===e)return this.setActiveKeysetByIndex(n),!0;return!1},_createSwapKeys:function(e){for(var t=[],i=e.length,n=0;n<i;n++)t.push(new r({swap:e[n].swap}));return t},_onSwapKeyset:function(e){this.setActiveKeysetBySwapKey(e.swapTo)},_populateKeyboardWithKeyset:function(e){var t=e.custom,i=this._keyboard,n=e.keys,r=n.length,s=1;c.isArray(n)&&(r=n[0].length,s=n.length,n=n.join("")),i.removeChildWidgets(),i.setCols(r),i.setRows(s),i.setKeyboardKeys(n),t&&c.each(t,function(e){i.addCustomKey(e.columnIndex,e.rowIndex||0,{label:e.character,callback:e.callback,key:e.key})}),i.render(u.getDevice())}})).orientations={VERTICAL:"vertical",HORIZONTAL:"horizontal"},d}),define("rofl/widgets/keyboard/multi/keysets/default",["rofl/widgets/keyboard/multi/keysets/default/alphabetic","rofl/widgets/keyboard/multi/keysets/default/numeric","rofl/widgets/keyboard/multi/keysets/default/special"],function(e,t,i){"use strict";return[e,t,i]}),define("rofl/widgets/keyboard/multi/keysets/default/alphabetic",function(){"use strict";return{keys:"abcdefghijklmnopqrstuvwxyz -",swap:"abc",capitalise:!0}}),define("rofl/widgets/keyboard/multi/keysets/default/numeric",function(){"use strict";return{keys:"0123456789 -",swap:"123"}}),define("rofl/widgets/keyboard/multi/keysets/default/special",function(){"use strict";return{keys:".,_!@#$%^&*()_+? -",swap:"#+-",custom:[{columnIndex:2,character:"_"},{columnIndex:13,character:"-"}]}}),define("rofl/widgets/keyboard/multi/swapkey",["rofl/widgets/button","rofl/widgets/label","rofl/lib/utils","rofl/events/keyboard/swapkeyset"],function(e,t,i,n){"use strict";return e.extend({_label:null,_swap:null,init:function(e){if(!(e=e||{}).swap)throw Error("You must define a swap value for a SwapKey");this._super(e.id),this.addClass("swapButton"),this._swap=e.swap,this._label=this.appendChildWidget(new t(e.swap)),this._onSelectBound=i.bind(this._onSelect,this),this.addEventListener("select",this._onSelectBound)},dispose:function(){this.removeEventListener("select",this._onSelectBound)},getSwapText:function(){return this._swap},_onSelect:function(){var e=new n(this._swap);this.bubbleEvent(e)}})}),define("rofl/widgets/label",["antie/widgets/label","rofl/lib/utils"],function(e,r){"use strict";var t=e.extend({init:function(e,t,i){var n=Array.prototype.slice.call(arguments);1===n.length?this._super(e):2===n.length?r.isArray(t)?(this._super(e),this.addClass(t)):this._super(e,t):3===n.length?(this._super(e,t),r.isArray(i)||(i=[].concat(i)),this.addClass(i)):this._super()},isTruncable:function(){var e=this.getCurrentApplication().getDevice();return e.getTextHeight("fW",this._width,this.getClasses())*this._maxLines<e.getTextHeight(this._text,this._width,this.getClasses())},setMaximumLines:function(e){this._super(e),this.outputElement&&this.render(this.getCurrentApplication().getDevice())},render:function(e){var t,i=this._super(e);return void 0!==(t=this.getAttributes())&&r.each(t,function(e,t){i.setAttribute(t,e)},this),i}});return t.TRUNCATION_MODE_NONE=e.TRUNCATION_MODE_NONE,t.TRUNCATION_MODE_RIGHT_ELLIPSIS=e.TRUNCATION_MODE_RIGHT_ELLIPSIS,t}),define("rofl/widgets/list",["antie/widgets/list","rofl/decorators/continuouslistener","antie/runtimecontext","rofl/lib/utils","antie/widgets/carousel/orientations/vertical","antie/widgets/carousel/orientations/horizontal"],function(e,t,i,a,n,r){"use strict";var s=e.extend({init:function(){this._super.apply(this,arguments),this.decorate([t]),this._orientation=s.orientations.VERTICAL},dispose:function(){this._removeContinuousListener(),this._super()},bindProgressIndicator:function(a,l){var c=this;this._updateProgressHandler=function(e){var t,i,n,r,s,o;if(e.target===c)if("beforedatabind"!==e.type){(i=c._childWidgetOrder.length-c._totalDataItems)<0&&(i=0);try{t=c.getActiveChildWidget(),n=c._dataBound&&t&&void 0!==t._listIndex?t._listIndex:c._selectedIndex-i,s=c._childWidgetOrder.length-i,n<0||s<1?r=0:1===s?r=1:(r=n/(s-1))<0&&(r=0)}catch(e){r=0}"function"==typeof a.setTotal&&a.setTotal(s),l&&("string"==typeof(o=l(n+1,s))?a.setText(o):(a.setText(o.text),r=o.pos)),a.setValue(r)}else a.setText("")},this.addEventListener("selecteditemchange",this._updateProgressHandler),this.addEventListener("focus",this._updateProgressHandler),this.addEventListener("blur",this._updateProgressHandler),this.addEventListener("beforedatabind",this._updateProgressHandler),this.addEventListener("databound",this._updateProgressHandler)},_getDevice:function(){return i.getCurrentApplication().getDevice()},orientation:function(){return this._orientation},getCurrentScrollOffset:function(){var e=this.orientation().edge();return-parseInt(this.outputElement.style[e],10)||0},getInnerLength:function(e){var t,i,n,r=0,s=0;return e._length?r=e._length:e.outputElement&&(t=this._getDevice(),i=e.outputElement,n=this.orientation().dimension(),r=t.getElementSize(i)[n],"height"===n?s=(parseInt(window.getComputedStyle(i,null).getPropertyValue("padding-top"),10)||0)+(parseInt(window.getComputedStyle(i,null).getPropertyValue("padding-bottom"),10)||0):"width"===n&&(s=(parseInt(window.getComputedStyle(i,null).getPropertyValue("padding-left"),10)||0)+(parseInt(window.getComputedStyle(i,null).getPropertyValue("padding-right"),10)||0))),r-s},getFullWidgetLength:function(e){var t=e.outputElement,i=this._getDevice(),n=this.orientation().dimension(),r=0,s=0;return t&&(r=i.getElementSize(t)[n],"height"===n?s=(parseInt(window.getComputedStyle(t,null).getPropertyValue("margin-top"),10)||0)+(parseInt(window.getComputedStyle(t,null).getPropertyValue("margin-bottom"),10)||0):"width"===n&&(s=(parseInt(window.getComputedStyle(t,null).getPropertyValue("margin-left"),10)||0)+(parseInt(window.getComputedStyle(t,null).getPropertyValue("margin-right"),10)||0))),r+s},getLengthToIndexIncludingWidget:function(e){var t=this.getChildWidgets(),i=this._getDevice(),n=t.length,r=0;return 0<n&&(e<0&&(e=0),n-1<e&&(e=n-1),r=(t[e].outputElement?i.getElementOffset(t[e].outputElement)[this.orientation().edge()]:0)+this.getFullWidgetLength(t[e])),r},getMaximumOffset:function(){return this.getLengthToIndexIncludingWidget(this.getChildWidgetCount()-1)-this.getInnerLength(this._scrollContainer)},scrollToPixel:function(e,t){var i,n=this.orientation().edge(),r=this._getDevice(),s={},o=this;s[n]=-e,(i=a.extend({},this._scrollAnimationOptions,this._animationOptions,{el:this.outputElement,to:s},t)).skipAnim?this._animation||r.moveElementTo(i):(this._animation&&r.stopAnimation(this._animation),i.onComplete=function(){o._animation=null},this._animation=r.moveElementTo(i))},scrollByPixels:function(e,t){var i=this.orientation().edge(),n=this.getCurrentScrollOffset(),r=Math.max(0,n+e),s=this.getMaximumOffset(),o={up:!1,down:!1,left:!1,right:!1};if(t=t||{skipAnim:!0},s<=r)switch(r=s,i){case"left":o.right=!0;break;case"top":o.down=!0}if(r<=0)switch(r=0,i){case"left":o.left=!0;break;case"top":o.up=!0}return this.scrollToPixel(r,t),o}});return s.orientations={VERTICAL:n,HORIZONTAL:r},s}),define("rofl/widgets/loader",["rofl/widgets/button"],function(e){"use strict";var r={skipAnim:!0},s=function(e){return e+"px"};return e.extend({_size:{width:0,height:0},_url:"",_frames:1,_fps:10,_preventNavigation:!1,_interval:null,init:function(e){if(this._super(""),e=e||{},this._size=e.size,this._url=e.url,this._frames=e.frames||1,this._fps=e.fps||10,this._preventNavigation=e.preventNavigation||!1,!e.url)throw new Error("Parameter 'url' is not defined");if(!e.size)throw new Error("Parameter 'size' is not defined");e.preventNavigation&&(this.addEventListener("keydown",this._onLoaderPreventNavigation),this.addEventListener("select",this._onLoaderPreventNavigation))},_onLoaderPreventNavigation:function(e){e.stopPropagation()},render:function(e){var t=this._size,i=this._super(e);return this.setStylesTo({position:"absolute",top:"0",right:"0",bottom:"0",left:"0",margin:"auto",zIndex:"500",backgroundImage:"url("+this._url+")",height:s(t.height),width:s(t.width)}),this.hide(),i},isFocusable:function(){return!(!this.isVisible()||!this._preventNavigation)&&this._super()},show:function(e){var t=this,i=this._frames,n=0;this._super(e||r),1<i&&(this._interval&&this.clearInterval(),this._interval=setInterval(function(){++n>=i&&(n=0),t.setStyleTo("backgroundPosition",s(t._size.width*n*-1))},1e3/this._fps)),this._preventNavigation&&this.focus()},hide:function(e){this.clearInterval(),this._super(e||r)},clearInterval:function(){clearInterval(this._interval),this._interval=null},dispose:function(){this.clearInterval(),this._preventNavigation&&(this.removeEventListener("keydown",this._onLoaderPreventNavigation),this.removeEventListener("select",this._onLoaderPreventNavigation)),this._super()}})}),define("rofl/widgets/pointerbutton",["rofl/widgets/button","rofl/events/pointerselectevent"],function(e,i){"use strict";return e.extend({isFocusable:function(){return!1},_onClickEvent:function(e){var t;this._disabled||(t=this._getEventCoordinates(e),this.bubbleEvent(new i(this,t.x,t.y)))}})}),define("rofl/widgets/pointerdecoratedbutton",["rofl/widgets/pointerbutton","rofl/decorators/pointer"],function(e,i){"use strict";return e.extend({init:function(e,t){this._super(e,t),this.decorate([i])},render:function(e){var t=this._super(e);return this.initPointerHandlers(),t},dispose:function(){this.destroyPointerHandlers(),this._super()}})}),define("rofl/widgets/pointerfocusablebutton",["rofl/widgets/button","rofl/lib/utils","rofl/devices/input/pointer"],function(e,t,i){"use strict";var n;return e.extend({removeMouseOverHandler:function(){this.outputElement&&(this.outputElement.onmouseover=null)},mouseOverHandler:function(){n.pointerIsOn()&&this.parentWidget.setActiveChildWidget(this)},addMouseOverHandler:function(){this.outputElement&&(this.outputElement.onmouseover=t.bind(this.mouseOverHandler,this))},render:function(e){var t=this._super(e);return this.addMouseOverHandler(),t},dispose:function(){this.removeMouseOverHandler(),this._super()},init:function(e,t){n||(n=i.getInstance()),this._super(e,t)}})}),define("rofl/widgets/pointerstrip",["rofl/lib/utils","rofl/devices/input/pointer","rofl/widgets/pointerbutton","rofl/widgets/container","antie/runtimecontext"],function(n,r,e,i,s){"use strict";var o,a,l,c,u,d={HORIZONTAL:"horizontal",VERTICAL:"vertical"},h={TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},t=e.extend({_action:null,disabled:!0,onPointerOn:null,onPointerOff:null,helper:null,icon:null,render:function(e){var t=this._super(e);return u.pointerIsOn()&&!this.disabled||this.onPointerOffHandler(),t},disable:function(){!0!==this.disabled&&(this.disabled=!0,this.onPointerOffHandler(),this.removeEventListeners())},enable:function(){!1!==this.disabled&&(this.disabled=!1,this.setEventListeners(),u.pointerIsOn()&&this.onPointerOnHandler())},onPointerOffHandler:function(){this.isRendered()&&this.hide({duration:c,skipAnim:!c})},onPointerOnHandler:function(){!this.disabled&&this.isRendered()&&this.show({duration:l,skipAnim:!l})},createIcon:function(){var e=new i,t=new i;e.addClass("v-align-helper"),t.addClass(["pointer-strip-icon","v-align-target"]),this.helper=e,this.icon=t,this.appendChildWidget(e),this.appendChildWidget(t)},removeEventListeners:function(){this.removeEventListener("select",this._action),u.unsubscribe(r.EVENTS.POINTER_ON,this.onPointerOn),u.unsubscribe(r.EVENTS.POINTER_OFF,this.onPointerOff)},setEventListeners:function(){this.addEventListener("select",this._action),u.subscribe(r.EVENTS.POINTER_ON,this.onPointerOn),u.subscribe(r.EVENTS.POINTER_OFF,this.onPointerOff)},init:function(e,t){var i;switch(this.onPointerOn=n.bind(this.onPointerOnHandler,this),this.onPointerOff=n.bind(this.onPointerOffHandler,this),this._super(),this._action=t,n.isUndefined(o)&&(o=s.getCurrentApplication()),n.isUndefined(a)&&(a=o.getConfiguration().pointerStrip||{}),n.isUndefined(l)&&(l=a.showAnimationDuration||0),n.isUndefined(c)&&(c=a.hideAnimationDuration||0),u||(u=r.getInstance()),e){case h.LEFT:case h.RIGHT:i=d.HORIZONTAL;break;case h.TOP:case h.BOTTOM:i=d.VERTICAL;break;default:throw"No orientation found for side: "+e}this.addClass(["pointer-strip",i,e]),this.createIcon()},dispose:function(){this.removeEventListeners(),this.onPointerOn=null,this.onPointerOff=null,this._action=null,this.helper=null,this.icon=null,this._super&&this._super()}});return t.ORIENTATIONS=d,t.SIDES=h,t}),define("rofl/widgets/verticallist",["antie/widgets/verticallist","rofl/widgets/list"],function(e,n){"use strict";return e.extend({init:function(e,t,i){this._super(e,t,i),this._orientation=n.orientations.VERTICAL}})}),define("rofl/widgets/widget",["antie/widgets/widget","rofl/events/broadcastevent","rofl/lib/pubsub","rofl/lib/utils","antie/runtimecontext","rofl/logger"],function(e,i,n,r,s,o){"use strict";return e.extend({init:function(e){this._super(e),this._pointerMoveDisabled=!0,this._displayAnimation=null},dispose:function(){},getId:function(){return this.id},addEventListener:function(e,t){~r.indexOf(i.LOCAL_BROADCAST_EVENTS,e)||"$"===e.charAt(0)?n.sub(e.replace("$",""),t,this):this._super(e,t)},removeEventListener:function(e,t){~r.indexOf(i.LOCAL_BROADCAST_EVENTS,e)||"$"===e.charAt(0)?n.unsub(e.replace("$",""),t,this):this._super(e,t)},fireEvent:function(t){var i,n,r=this._eventListeners[t.type];if(r)for(n in r)if(r.hasOwnProperty(n))try{r[n](t)}catch(e){i="Error in "+t.type+" event listener on widget "+this.id+": "+e.message,this.getCurrentApplication().getDevice().getLogger().error(i,e,r[n]),o.onAppError(i)}},broadcastEvent:function(e){e=i.convert(e),n.pub(e.type,e.data,this)},setStyleTo:function(e,t){if(!this.isRendered())throw new Error("Widget::setStyleTo called - the current widget has not yet been rendered.");this.outputElement.style[e]=t},setStylesTo:function(e){var t;if(!this.isRendered())throw new Error("Widget::setStyleTo called - the current widget has not yet been rendered.");for(t in e)e.hasOwnProperty(t)&&"string"==typeof e[t]&&(this.outputElement.style[t]=e[t])},addClass:function(e){var t,i;if(r.isArray(e))for(i=e.length,t=0;t<i;++t)this._classNames[e[t]]||(this._classNames[e[t]]=!0);else this._classNames[e]=!0;this.isRendered()&&this.getCurrentApplication().getDevice().setElementClasses(this.outputElement,this.getClasses())},removeClass:function(e){var t,i;if(r.isArray(e))for(i=e.length,t=0;t<i;++t)this._classNames[e[t]]&&delete this._classNames[e[t]];else delete this._classNames[e];this.isRendered()&&this.getCurrentApplication().getDevice().setElementClasses(this.outputElement,this.getClasses())},setClasses:function(e){var t,i;if(!this.isRendered())throw new Error("Widget::setClasses called - the current widget has not yet been rendered.");for(this._classNames={},t=0,i=e.length;t<i;t++)this._classNames[e[t]]=!0;this.setAttributeTo("class",e.join(" "))},setAttributeTo:function(e,t){if(!this.isRendered())throw new Error("Widget::setAttributeTo called - the current widget has not yet been rendered.");this.outputElement.setAttribute(e,t),this._attributes=this._attributes||{},this._attributes[e]=t},removeClassByPrefix:function(e){var t,i=this._classNames;for(t in i)i.hasOwnProperty(t)&&0===t.indexOf(e)&&this.removeClass(t)},setAttributes:function(e){this._attributes=e},getAttributes:function(){return this._attributes},setPointerMoveDisabled:function(e){this._pointerMoveDisabled=e},isRendered:function(){return!!this.outputElement},isVisible:function(){var e;return(!this.isRendered()||"hidden"!==(e=this.outputElement.style).visibility&&"0"!==e.opacity&&"none"!==e.display)&&(!this.hasClass("visibility-hidden")&&!this.hasClass("display-none"))},show:function(e){var t=s.getDevice();if(e=e||{},!this.outputElement)throw new Error("Widget::show called - the current widget has not yet been rendered.");this._stopCurrentAnimation(),e.el=this.outputElement,this._displayAnimation={options:e},this._displayAnimation.animation=t.showElement(e)},hide:function(e){var t=s.getDevice();if(e=e||{},!this.outputElement)throw new Error("Widget::hide called - the current widget has not yet been rendered.");this._stopCurrentAnimation(),e.el=this.outputElement,this._displayAnimation={options:e},this._displayAnimation.animation=t.hideElement(e)},_stopCurrentAnimation:function(){var e,t,i,n=this._displayAnimation;n&&(e=n.animation,t=(i=n.options).stopAnimOptions,e&&(i&&t?(t.skipToEnd?e.stop(t.skipToEnd):e.stop(),t.executeCallback&&r.isFunction(i.onComplete)&&i.onComplete()):e.stop()))},setAnimation:function(e){this._animation=e},getAnimation:function(){return this._animation}})}),define("product-layer/collection/data/manager",["antie/class","rofl/lib/promise","rofl/lib/utils"],function(e,l,t){"use strict";var i,a={MODE_LINEAR:0,MODE_CIRCULAR:1};return(i=e.extend({_dataChunkSize:24,_maxItemAmount:0,_mode:a.MODE_LINEAR,_slots:{},init:function(){throw new Error("Cannot create instance of abstract class")},getDataChunkSize:function(){return this._dataChunkSize},setDataChunkSize:function(e,t){t||e===this._dataChunkSize||this.purge(),this._dataChunkSize=e},getMaxItemAmount:function(){return this._maxItemAmount},setMaxItemAmount:function(e,t){t||e===this._maxItemAmount||this.purge(),this._maxItemAmount=e},getMode:function(){return this._mode},setMode:function(e){this._mode=e},hasSlot:function(e){return void 0!==this._slots[e]},load:function(e,t){throw new Error("Not implemented yet")},loadData:function(e){var t,i=this.getDataChunkSize(),n=this._slots;return e=this._regulateIndex(e),t=this._regulateOffset(e),this.load(t,i).then(function(e){return n[t]=e})},getItem:function(e){var t,i=this;return e=this._regulateIndex(e),t=this._regulateOffset(e),e-=t,this._loadMissingData(t).then(function(){return i._slots[t][e]})},getItems:function(t,i){var e,n,r,s=this,o=this.getDataChunkSize(),a=[];for(t=this._regulateIndex(t),n=this._regulateOffset(t),e=t+i,r=n+o,t-=n,a.push(this._loadMissingData(n));r<e;)a.push(this._loadMissingData(this._regulateIndex(r))),r+=o;return l.all(a).then(function(){var e=s._fetchItems(n,t,i);return l.resolve(e)})},_fetchItems:function(e,t,i){for(var n,r=this.getDataChunkSize(),s=this.getMode()===a.MODE_CIRCULAR,o=[];i--&&(r<=t&&(t%=r,e+=r),!(n=this._slots[e][t])&&s&&(t=e=0,n=this._slots[e][t]),n);)o.push(n),t++;return o},clear:function(e){var t=this._regulateOffset(e);return!!this.hasSlot(t)&&delete this._slots[t]},purge:function(){t.each(this._slots,function(e,t){delete this._slots[t]},this)},_regulateIndex:function(e){var t=this.getMaxItemAmount(),i=this.getMode()===a.MODE_CIRCULAR&&0<t;for(e=e||0;i&&e<0;)e+=t;for(;i&&t<=e;)e-=t;if(e<0)throw new Error("Unable to regulate the index");return e},_regulateOffset:function(e){return(e=e||0)-e%this.getDataChunkSize()},_loadMissingData:function(e){var t=this.getMaxItemAmount();return e=this._regulateOffset(e),this.hasSlot(e)?l.resolve({}):0<t&&t<e?l.resolve({}):this.loadData(e)}})).MODES=a,i}),define("product-layer/decorators/partialcontent",["rofl/lib/promise","rofl/lib/utils"],function(t,i){"use strict";return{_partialsEnabled:!1,_partialLoadingOffset:0,offset:0,_fetchingData:!1,initialize:function(){var e=this._opts.getApiData();this._onAfterAlignBound=i.bind(this._onAfterAlign,this),e&&e.partials&&this.enablePartials()},enablePartials:function(e){this._partialsEnabled=!1!==e,this.isPartialsEnabled()?this._addPartialListener():this._removePartialListener()},isPartialsEnabled:function(){return this._partialsEnabled},isFetchingData:function(){return this._fetchingData},setPartialLoadingOffset:function(e){this._partialLoadingOffset=e},_addPartialListener:function(){this.addEventListener("afteralign",this._onAfterAlignBound)},_removePartialListener:function(){this.isPartialsEnabled()&&this.removeEventListener("afteralign",this._onAfterAlignBound)},_onAfterAlign:function(e){var t=this,i=t.getCarousel().getChildWidgetCount();i>=this._partialLoadingOffset&&e.alignedIndex>=i-this._partialLoadingOffset&&this.loadData().catch(function(){t._removePartialListener()})},loadData:function(){var n=this.getCarousel(),e=n.getChildWidgetCount(),r=this;return this.isFetchingData()||!e?t.resolve("List is already fetching new data"):this._opts.getApiData()?(this._fetchingData=!0,new t(function(t,i){r.fetchData().then(function(e){r._fetchingData=!1,r.updateData(e,n.getActiveChildWidget().id,!0),t(e)}).catch(function(e){r._fetchingData=!1,i(e)})})):t.reject("Unable to load items")}}}),define("product-layer/dialog/component",["rofl/events/keyevent","antie/widgets/component","antie/widgets/widget","rofl/lib/utils","rofl/widgets/container","rofl/widgets/label","product-layer/dialog/widgets/commandlist"],function(i,e,r,s,o,a,t){"use strict";return e.extend({_title:null,_content:null,_defaultCommandIndex:0,_cancelCommandIndex:null,_commandList:null,init:function(e,t,i){var n;i=i||{},this._super(i.id||"dialog"),this._onBeforeRenderBound=s.bind(this._onBeforeRender,this),this._onBeforeShowBound=s.bind(this._onBeforeShow,this),this._onAfterHideBound=s.bind(this._onAfterHide,this),this.addClass("dialog"),this.addEventListener("beforerender",this._onBeforeRenderBound),this.addEventListener("beforeshow",this._onBeforeShowBound),this.addEventListener("afterhide",this._onAfterHideBound),this.setIsModal(!0),n=this.appendChildWidget(new o),e&&e instanceof r||(e=new a("",e)),e.addClass("dialog_content"),t&&(!t||t instanceof r)||(t=new a("",t)),t&&(t.addClass("dialog_title"),n.appendChildWidget(t)),n.appendChildWidget(e),this._title=t,this._content=e,this._container=n},_onBeforeRender:function(e){var t=e.args;if(void 0===t.cancelCommandIndex)throw new Error("Missing `cancelCommandIndex` in arguments.");this.setCancelCommandIndex(t.cancelCommandIndex),this._title.setText(t.title),this._content.setText(t.content),t.commands&&(s.isArray(t.commands)?s.each(t.commands,function(e){this.appendCommand(e)},this):this.appendCommand(t.commands))},_onBeforeShow:function(){var e;this._onInvokeBound=s.bind(function(e){this._removeEventListeners(),this._onInvoke(e)},this),this._onKeyDownBound=s.bind(function(e){this._onKeyDown(e)},this),this.addEventListener("select",this._onInvokeBound),this.addEventListener("keydown",this._onKeyDownBound),e=this.getCommandList(),null!==this._cancelCommandIndex&&e.setActiveChildIndex(this._cancelCommandIndex),e.focus()},_onAfterHide:function(){this.getCommandList().removeChildWidgets()},_removeEventListeners:function(){this.removeEventListener("select",this._onInvokeBound),this.removeEventListener("keydown",this._onKeyDownBound)},_onInvoke:function(e){var t=e.target;t.hasAction()&&(e.stopPropagation(),t.execute(e))},_onKeyDown:function(e){var t;e.keyCode===i.VK_BACK&&(this._removeEventListeners(),null!==this._cancelCommandIndex&&(t=this.getCommandList().getChildWidgetByIndex(this._cancelCommandIndex))&&t.hasAction()&&(e.stopPropagation(),t.execute(e)))},show:function(e){this.getCommandList().setActiveChildIndex(this._defaultCommandIndex),this._super(e)},getCommandList:function(){return null===this._commandList&&(this._commandList=new t,this._container.appendChildWidget(this._commandList)),this._commandList},getCancelCommandIndex:function(){return this._cancelCommandIndex},setCancelCommandIndex:function(e){this._cancelCommandIndex=e},prependCommand:function(e){this.getCommandList().prepend(e)},appendCommand:function(e){this.getCommandList().append(e)}})}),define("product-layer/dialog/widgets/command",["antie/widgets/widget","rofl/lib/utils","rofl/widgets/button","rofl/widgets/label"],function(t,n,e,i){"use strict";return e.extend({_label:null,_action:null,_setOption:function(e,t){switch(t){case"class":this.addClass(e)}},init:function(e,t,i){this._super(),this.addClass("dialog_command"),e&&this.setLabel(e),t&&this.setAction(t),n.each(i||{},this._setOption,this)},getLabel:function(){return this._label},setLabel:function(e){e instanceof t||(e=new i("",e)),this._label=e},getAction:function(){return this._action},setAction:function(e){if(!n.isFunction(e))throw new Error("Action should be invokable");this._action=e},hasAction:function(){return null!==this._action},execute:function(e){this.hasAction()&&this._action(e)},render:function(e){var t=this._super(e);return this.appendChildWidget(this._label),t}})}),define("product-layer/dialog/widgets/commandlist",["antie/widgets/horizontallist","rofl/lib/utils","product-layer/dialog/widgets/command"],function(e,t,i){"use strict";return e.extend({init:function(){this._super(),this.addClass("dialog_command_list")},prepend:function(e){if(!(e instanceof i))throw new Error("Need a Command Widget to add the option");this.insertChildWidget(0,e)},append:function(e){if(!(e instanceof i))throw new Error("Need a Command Widget to add the option");this.appendChildWidget(e)}})}),define("product-layer/epg/data/manager",["antie/class","rofl/lib/promise","rofl/lib/utils"],function(e,f,_){"use strict";var r=7200,t=0,m={"all channels":"please"},v={},l={},o=function(){return Math.round((new Date).getTime()/1e3)},C=function(e){return(e=e||o())-(e-t)%r},A=function(e){if(e===m)return e;if(_.isArray(e))return e;if(_.isString(e)||_.isNumber(e))return[e];throw new Error("Unknown channel ID format")},c=function(e,t){var i=v[t];return void 0!==i&&i[e]},E=function(e,t){var i=v[t];return void 0!==i&&i[e]?i[e]:null},a=function(e,t){for(var i,n=C(t),r=E(e,n),s=0,o=r&&r.length,a={};s<o;s++){if(i=r[s],a.item||i.getStartTime()>t){a.next=i;break}i.getStartTime()<=t&&i.getEndTime()>t&&(a.item=i)}return a},I=function(e,t,i){for(var n,r=[],s=t+i,o=0,a=e.length;o<a;o++)((n=e[o]).getStartTime()>=t&&n.getStartTime()<=s||n.getEndTime()>=t&&n.getEndTime()<=s||n.getStartTime()<t&&n.getEndTime()>s)&&r.push(n);return r},i=e.extend({init:function(){throw new Error("Cannot create instance of abstract class")},getDataChunkTimeSpan:function(){return r},setDataChunkTimeSpan:function(e){r=e},getDataChunkTimeOffset:function(){return t},setDataChunkTimeOffset:function(e){t=e},load:function(e,t){throw new Error("Not implemented yet")},loadData:function(t,e){var i=C(e);return this.load(t,i).then(function(e){return v[i]||(v[i]={},l[i]={}),_.extend(v[i],e),l[i].allChannels|=t===m,f.resolve(e)})},getItem:function(e,r){var t,s=A(e);if(e===m)throw new Error("Not implemented (yet).");return r=r||o(),t=C(r),this._loadMissingData(s,t).then(function(){for(var e,t={},i=0,n=s.length;i<n;i++)t[e=s[i]]=a(e,r);return f.resolve(t)})},getItems:function(e,c,u){var d=A(e),h=C(c),g=h+r,t=[],p=g<c+u;return t.push(this._loadMissingData(d,h)),p&&t.push(this._loadMissingData(d,g)),f.all(t).then(function(){var e,t,i,n,r,s,o,a,l={};for(d===m&&(d=_.keys(v[h])),e=0,t=d.length;e<t;e++)i=d[e],n=E(i,h),r=I(n,c,u),l[i]=r;if(p)for(d===m&&(d=_.keys(v[g])),e=0,t=d.length;e<t;e++)r=l[i=d[e]]||[],n=E(i,g)||[],s=I(n,c,u),o=r[r.length-1],a=s[0],o&&a&&o.getId()===a.getId()&&r.splice(-1,1),l[i]=r.concat(s);return f.resolve(l)})},getCurrentItem:function(e){var t=A(e);return this.getItem(t).then(function(e){var i={};return _.each(e,function(e,t){i[t]=e.item||null}),f.resolve(i)})},getNextItem:function(e){var t=this,i=A(e),n=o();return this.getItem(i,n).then(function(e){return _.bind(t._fillMissingNexts,t)(C(n+r),e).then(function(e){var i={};return _.each(e,function(e,t){i[t]=e.next}),f.resolve(i)})})},getNowNext:function(e){var t=this,i=A(e),n=o();return this.getItem(i,n).then(function(e){return _.bind(t._fillMissingNexts,t)(C(n+r),e).then(function(e){var i={};return _.each(e,function(e,t){i[t]={now:e.item,next:e.next}}),f.resolve(i)})})},clear:function(e,t){var i=C(t);return!!c(e,i)&&delete v[i]},purge:function(){var i=C(),n=i+r;_.each(v,function(e,t){t!==i&&t!==n&&delete v[t]})},_loadMissingData:function(e,t){var i,n,r,s,o,a;if(e===m)a=_.getNested(l,t,"allChannels")?f.resolve({}):this.loadData(e,t);else{for(i=A(e),s=[],r=e.length,n=0;n<r;n++)o=i[n],c(o,t)||s.push(o);a=s.length?this.loadData(s,t):f.resolve({})}return a},_fillMissingNexts:function(l,c){var u=[];return _.each(c,function(e,t){e.next||u.push(t)}),this._loadMissingData(u,l).then(function(){for(var e,t,i,n,r,s,o=0,a=u.length;o<a;o++){for(e=u[o],t=E(e,l),i=c[e].item,r=0,s=t.length;r<s&&(n=t[r],i&&i.getId()===n.getId());r++);c[e].next=n||null}return f.resolve(c)})}});return i.ALL_CHANNELS=m,i}),define("product-layer/events/carousel/empty-carousel",["antie/events/event"],function(e){"use strict";var t=e.extend({init:function(e){this.target=e,this._super(t.EVENT_NAME)}});return t.EVENT_NAME="empty.carousel",t}),define("product-layer/models/carousel/striplist",["rofl/models/api/abstract"],function(e){"use strict";return e.extend({_id:null,_title:null,_icon:null,_channelImage:null,_items:null,_totalCount:null,_api:null,_formatter:null,init:function(e){this._id=e.id||"",this._title=e.title||"",this._icon=e.icon||"",this._channelImage=e.channelImage||"",this._items=e.items||[],this._totalCount=e.count||0,this._api=e.api,this._formatter=e.formatter},getId:function(){return this._id},getTitle:function(){return this._title},getIcon:function(){return this._icon},getChannelImage:function(){return this._channelImage},getItems:function(){return this._items},getTotalCount:function(){return this._totalCount},getApiData:function(){return this._api},setApiData:function(e){this._api=e},getFormatter:function(){return this._formatter}})}),define("product-layer/models/collection/item",["rofl/models/api/abstract"],function(e){"use strict";return e.extend({init:function(){throw new Error("Cannot create instance of abstract class")},getId:function(){throw new Error("Not implemented yet")}})}),define("product-layer/models/epg/channel",["rofl/models/api/abstract"],function(e){"use strict";return e.extend({getId:function(){throw new Error("Not implemented yet")},getName:function(){throw new Error("Not implemented yet")}})}),define("product-layer/models/epg/item",["rofl/models/api/abstract","rofl/lib/utils"],function(e,r){"use strict";return e.extend({init:function(){throw new Error("Cannot create instance of abstract class")},getId:function(){throw new Error("Not implemented yet")},getTitle:function(){throw new Error("Not implemented yet")},getStartTime:function(){throw new Error("Not implemented yet")},getEndTime:function(){throw new Error("Not implemented yet")},getStartDate:function(){return new Date(1e3*this.getStartTime())},getEndDate:function(){return new Date(1e3*this.getEndTime())},getChannel:function(){throw new Error("Not implemented yet")},shallowCopy:function(){throw new Error("Not implemented yet")},compareTo:function(e){var t,i=this.getStartDate(),n=this.getEndDate();if(r.isNumber(e)&&(e=new Date(e)),e instanceof Date)return n<(t=e)?-2:i<=t&&t<=n?0:2;throw new Error("Can not compare EpgItem with "+typeof e)}})}),define("product-layer/player/action-enum",[],function(){"use strict";return{FORWARD:"forward",MORE:"more_options",NEXT_ITEM:"next_item",PAUSE:"pause",PLAY:"play",PLAY_PAUSE:"play-pause",PREVIOUS_ITEM:"previous_item",REWIND:"rewind",STOP:"stop",SUBTITLES:"subtitles",CLOSED_CAPTIONS:"closed_captions"}}),define("product-layer/player/formatters/controls",["antie/formatter","rofl/widgets/button","rofl/widgets/label","product-layer/player/widgets/play-pause","product-layer/player/action-enum","antie/runtimecontext","rofl/lib/utils","rofl/lib/l10n"],function(e,r,s,o,a,t,i,n){"use strict";var l,c={};return e.extend({init:function(e){this._super(e),i.hasNested(t.getCurrentApplication().getConfiguration(),"iconFont","characters")?c=t.getCurrentApplication().getConfiguration().iconFont.characters:t.getDevice().getLogger().warn("Missing configuration for `iconFont.characters`."),l=n.getInstance()},format:function(e){var t=e.next(),i=new r(t.action),n=t.action===a.PLAY_PAUSE;return n&&(i=new o(t.action),t={action:t.initialAction,text:t.initialAction===a.PAUSE?c.pause||l.get("player.controls.pause")||"pause":c.play||l.get("player.controls.play")||"play",callback:t.callback}),i.appendChildWidget(new s(null,t.text,["icon-font"])),i.setDataItem(t),i.addClass(["control",n?a.PLAY_PAUSE:t.action]),i}})}),define("product-layer/player/widgets/controls",["antie/widgets/horizontallist","product-layer/player/formatters/controls","product-layer/player/action-enum","antie/runtimecontext","antie/devices/mediaplayer/mediaplayer","product-layer/player/widgets/seeker","antie/events/keyevent","antie/events/event","rofl/lib/utils","rofl/lib/l10n"],function(n,r,s,e,o,t,i,a,l,c){"use strict";var u,d=e.getDevice(),h=d.getMediaPlayer(),g=new t,p=l.hasNested(e.getCurrentApplication().getConfiguration(),"iconFont","characters")?e.getCurrentApplication().getConfiguration().iconFont.characters:{},f=c.getInstance(),_=[{text:p.subtitles||f.get("player.controls.subtitles")||"subtitles",action:s.SUBTITLES},{text:p.previousItem||f.get("player.controls.previous-item")||"previous item",action:s.PREVIOUS_ITEM},{text:p.rewind||f.get("player.controls.rewind")||"rewind",action:s.REWIND},{text:p.pause||f.get("player.controls.play-pause")||"play/pause",action:s.PLAY_PAUSE,initialAction:s.PAUSE},{text:p.fastForward||f.get("player.controls.forward")||"forward",action:s.FORWARD},{text:p.nextItem||f.get("player.controls.next-item")||"next item",action:s.NEXT_ITEM},{text:p.moreOptions||f.get("player.controls.more")||"more",action:s.MORE}];return(u=n.extend({_onSelectBound:null,init:function(e,t,i){l.isEmpty(p)&&d.getLogger().warn("Missing configuration for `iconFont.characters`."),e=e||"player-controls",t=t||new r,i=i||_,this._super(e,t,i),this.setWrapMode(n.WRAP_MODE_WRAP),this._onSelectBound=l.bind(this._onSelect,this),this.addEventListener("select",this._onSelectBound)},getSeeker:function(){return g},setSeeker:function(e){g=e},_isPlayerVisible:function(){var e=this.getComponent();return!l.isFunction(e.isPlayerVisible)||e.isPlayerVisible()},_isKeyNavigation:function(e){return-1<[i.VK_LEFT,i.VK_RIGHT,i.VK_UP,i.VK_DOWN,i.VK_ENTER].indexOf(e)},_onKeyDown:function(e){if(this._isPlayerVisible())return this._super(e);this._isKeyNavigation(e.keyCode)&&e.stopPropagation()},_onSelect:function(e){var t,i=e.target.getDataItem();if(null!==i&&i.action){switch(i.action){case s.PLAY:h.getState()===o.STATE.STOPPED?h.beginPlaybackFrom(0):g.isActive()?g.confirm():h.resume();break;case s.PAUSE:h.getState()!==o.STATE.STOPPED&&this._isPlayerVisible()&&(g.isActive()?(g.confirm(),this._pausePlayerWhenReady()):h.getState()!==o.STATE.EMPTY&&h.getState()!==o.STATE.COMPLETE?h.pause():this._pausePlayerWhenReady());break;case s.STOP:h.stop();break;case s.REWIND:g.rewind();break;case s.FORWARD:g.fastForward();break;case s.NEXT_ITEM:case s.PREVIOUS_ITEM:(t=new a("player.changeItem")).target=e.target,this.bubbleEvent(t);break;case s.SUBTITLES:(t=new a("player.toggleSubtitles")).target=e.target,this.bubbleEvent(t)}l.isFunction(i.callback)&&i.callback(e.target)}else d.getLogger().log("no action to perform")},_pausePlayerWhenReady:function(){var e=this.getComponent();l.isFunction(e.pauseWhenReady)?e.pauseWhenReady():h.pause()},dispose:function(){this.removeEventListener("select",this._onSelectBound)}})).getDefaultDataSource=function(){return l.clone(_)},u}),define("product-layer/player/widgets/play-pause",["rofl/widgets/button","product-layer/player/action-enum","rofl/devices/mediaplayer/mediaplayer","antie/runtimecontext","rofl/lib/utils","rofl/lib/l10n"],function(e,n,t,i,r,s){"use strict";var o,a=i.getDevice().getMediaPlayer(),l={};return e.extend({init:function(e){this._super(e||"play-pause-control"),r.hasNested(i.getCurrentApplication().getConfiguration(),"iconFont","characters")?l=i.getCurrentApplication().getConfiguration().iconFont.characters:i.getDevice().getLogger().warn("Missing configuration for `iconFont.characters`."),o=s.getInstance(),a.addEventCallback(this,this._onMediaEvent)},dispose:function(){a.removeEventCallback(this,this._onMediaEvent)},_onMediaEvent:function(e){if(e.type!==t.EVENT.STATUS)switch(e.type){case t.EVENT.PLAYING:case t.EVENT.PAUSED:this._toggle()}},select:function(e){e&&(this.getDataItem().action=e),this._super(),this._toggle()},_isInPauseState:function(){return this.getDataItem().action===n.PAUSE},_shouldToggle:function(){return a.getState()===t.STATE.PLAYING&&!this._isInPauseState()||a.getState()===t.STATE.PAUSED&&this._isInPauseState()},_toggle:function(){var e,t,i;this._shouldToggle()&&(i=this._isInPauseState(),(e=this.getDataItem()).action=i?n.PLAY:n.PAUSE,this.setDataItem(e),(t=this.getChildWidgets()[0]).setText(i?l.play||o.get("player.controls.play")||"play":l.pause||o.get("player.controls.pause")||"pause"),t.removeClass([n.PLAY,n.PAUSE]),t.addClass(e.action))}})}),define("product-layer/player/widgets/seeker",["rofl/lib/utils","antie/runtimecontext","rofl/devices/mediaplayer/mediaplayer"],function(e,t,i){"use strict";var n,r=t.getCurrentApplication().getConfiguration().seeker||{},s=t.getDevice().getMediaPlayer(),o=r.interval||500,a=o/1e3,l=r.steps||["2","4","8","16","32"],c=function(){this._playerStatus=null,this._onSpeedChanged=null,this._onCurrentTimeUpdated=null,this._steps=l,this._interval=null,this._currentTime=null,this._speed=null};return c.prototype={_onPlayerEvent:function(e){this._playerStatus=e},_stopListening:function(){s.removeEventCallback(this,this._onPlayerEvent)},_startListening:function(){s.addEventCallback(this,this._onPlayerEvent)},_getSpeedStep:function(){return this._steps[Math.abs(this._speed)-1]*(this._speed<0?-1:1)},_onSpeedChange:function(){var e=this._speed?this._getSpeedStep():null;if(!this._onSpeedChanged)throw"No _onSpeedChanged method defined.";this._onSpeedChanged(e)},_onCurrentTimeChange:function(){if(!this._onCurrentTimeUpdated)throw"No _onCurrentTimeUpdated method defined.";this._onCurrentTimeUpdated(this._currentTime)},_stopInterval:function(){this._interval&&(clearInterval(this._interval),this._interval=null)},_onStopSeeking:function(){this._stopInterval(),this._speed=null,this._onSpeedChange(),this._onCurrentTimeChange(),this._currentTime=null},_normalizeCurrentTime:function(){var e=s.getSeekableRange();e&&(this._currentTime=Math.max(e.start,Math.min(this._currentTime,e.end)))},_onInterval:function(){this._speed&&(this._currentTime+=Math.round(a*this._getSpeedStep()),this._normalizeCurrentTime(),this._onCurrentTimeChange())},_startInterval:function(){this._interval=setInterval(e.bind(this._onInterval,this),o)},_onStartSeeking:function(){this._playerStatus.state===i.STATE.COMPLETE&&s.playFrom(this._playerStatus.duration-1),s.pause(),this._currentTime=this._playerStatus.currentTime,this._startInterval()},_onAfterSpeedMutation:function(){Math.abs(this._speed)<=this._steps.length&&0!==this._speed?this._onSpeedChange():this.confirm()},_onBeforeSpeedMutation:function(){null===this._speed&&(this._speed=0,this._onStartSeeking())},setSpeedSteps:function(e){this._steps=e||l},cancel:function(){this._onStopSeeking(),s.resume()},confirm:function(e){var t=e||this._currentTime;this._onSeek(this._currentTime),this._onStopSeeking(),s.playFrom(t)},rewind:function(){this.canSeek()&&this._playerStatus.state!==i.STATE.BUFFERING?(this._onBeforeSpeedMutation(),this._speed--,this._onAfterSpeedMutation()):this._stopInterval()},fastForward:function(){this.canSeek()&&this._playerStatus.state!==i.STATE.BUFFERING?(this._onBeforeSpeedMutation(),this._speed++,this._onAfterSpeedMutation()):this._stopInterval()},isActive:function(){return!!this._interval},canSeek:function(){return!!s.getSeekableRange()},detach:function(){this._stopListening(),this._stopInterval(),this._playerStatus=null,this._onSpeedChanged=null,this._onCurrentTimeUpdated=null,this._steps=null,this._interval=null,this._currentTime=null,this._duration=null,this._speed=null},attach:function(e,t,i,n){this._onSpeedChanged=e,this._onCurrentTimeUpdated=t,this._onSeek=i,this.setSpeedSteps(n),this._startListening()}},function(){return n||(n=new c),n}}),define("product-layer/widgets/carousel-container",["antie/widgets/container","rofl/widgets/verticallist","product-layer/decorators/partialcontent","product-layer/events/carousel/empty-carousel","product-layer/widgets/culling-carousel","product-layer/widgets/pointer-container","rofl/lib/utils","rofl/widgets/label"],function(o,e,a,l,c,u,d,h){"use strict";return e.extend({_opts:null,_headerContainer:null,_carousel:null,_formatter:null,_onEmptyCarouselEventBound:null,_offset:null,init:function(e){var t,i=this._headerContainer=new o,n=new h(!1,e.getTitle()),r=this._carousel=new c(null,e.orientation||c.orientations.HORIZONTAL),s=e.getId();this._opts=e,d.isNumber(s)&&(s=s.toString()),this._super(s),this.addClass("carouselContainer"),i.addClass("header"),i.appendChildWidget(n),this.appendChildWidget(i),t=new u(r,{orientation:r.orientation().styleClass(),pointerIcons:e.pointerIcons}),this._pointerContainer=this.appendChildWidget(t),this.decorate([a]),this._onEmptyCarouselEventBound=d.bind(this._onEmptyCarouselEvent,this),this.addListeners(),(e.getItems()&&e.getItems().length||e.getApiData())&&this.updateData(e.getItems())},enable:function(){this.getPointerContainer().enable()},disable:function(){this.getPointerContainer().disable()},getHeaderContainer:function(){return this._headerContainer},resetOffset:function(){this._offset=null},getPointerContainer:function(){return this._pointerContainer},getCarousel:function(){return this._carousel},removeData:function(){this.getCarousel().removeChildWidgets()},fetchData:function(){throw new Error("fetchData must be overwritten")},updateData:function(e,t,i){var n=this._opts.getApiData(),r=this.getCarousel(),s=0;i||(r.getChildWidgets().length&&(r.getActiveChildWidget()&&(null===t?(s=r.getActiveIndex(),t=r.getActiveChildWidget().id):r.alignToIndex(0)),this.removeData()),this._offset=0,n&&n.partials&&this.enablePartials()),this.formatData(e),i?e.length&&(this._offset+=e.length):this._offset=e.length,e.length?this.alignCarousel({id:t,index:s}):this.bubbleEvent(new l(this))},alignCarousel:function(e){var t,i=this.getCarousel();e&&(t=i.getChildWidget(e.id)?i.getIndexOfChildWidget(i.getChildWidget(e.id)):Math.min(e.index,i.getChildWidgetCount()-1),d.isNumber(t)&&i.alignToIndex(t))},formatData:function(){throw new Error("formatData must be overwritten")},_onEmptyCarouselEvent:function(e){e.target=this},addListeners:function(){this.addEventListener(l.EVENT_NAME,this._onEmptyCarouselEventBound)},removeListeners:function(){this.removeEventListener(l.EVENT_NAME,this._onEmptyCarouselEventBound)},dispose:function(){this._super(),this.removeListeners(),this.disable()}})}),define("product-layer/widgets/carousel/aligners/alignpoint",["antie/widgets/carousel/aligners/aligner"],function(e){"use strict";return e.extend({_alignPoints:null,init:function(e,t){this._super(e),t&&(t.alignPoint&&(t.alignPoint.normalised?e.setNormalisedAlignPoint(t.alignPoint.initialValue):e.setAlignPoint(t.alignPoint.initialValue)),t.widgetAlignPoint&&e.setNormalisedWidgetAlignPoint(t.widgetAlignPoint.initialValue)),this._alignPoints=t},_align:function(e,t,i){var n=this.indexOfLastAlignRequest(),r=this._subsequentIndexInDirection(e,t);if(this._isWrap(n,r,t))throw new Error("Wrapping is not supported in the NaturalAligner");null!==r&&(this._informMaskBeforeAlign(r),this._moveNormally(r,i))},_moveNormally:function(e,t){var i=this._mask,n=this._alignPoints;e>=n.scrollIndex?(n.alignPoint.normalised?i.setNormalisedAlignPoint(n.alignPoint.scrollValue):i.setAlignPoint(n.alignPoint.scrollValue),n.widgetAlignPoint&&i.setNormalisedWidgetAlignPoint(n.widgetAlignPoint.scrollValue),this._super(e,t)):0===e&&(n.alignPoint.normalised?i.setNormalisedAlignPoint(n.alignPoint.initialValue):i.setAlignPoint(n.alignPoint.initialValue),n.widgetAlignPoint&&i.setNormalisedWidgetAlignPoint(n.widgetAlignPoint.initialValue),this._super(e,t))}})}),define("product-layer/widgets/culling-carousel",["antie/runtimecontext","antie/widgets/carousel/keyhandlers/activatefirsthandler","antie/widgets/carousel/strips/cullingstrip","product-layer/events/carousel/empty-carousel","rofl/lib/utils","rofl/widgets/carousel"],function(e,n,r,i,s,t){"use strict";var o,a=e.getCurrentApplication().getConfiguration();return(o=t.extend({init:function(e,t){var i=new n;this._super(e,t),this.setContinuousListener(!0),i.setAnimationOptions(a.animationOptions||{skipAnim:!0}),i.attach(this),this.setWidgetStrip(r),this._onFocusEventBound=s.bind(this._onFocusEvent,this),this.addEventListener("focus",this._onFocusEventBound)},_onFocusEvent:function(e){this.getActiveChildWidget()&&this.getActiveChildWidget().isRendered()||this.alignToIndex(this.getActiveChildIndex()||0),this.removeEventListener("focus",this._onFocusEventBound),e.stopPropagation()},render:function(e){var t=this;return this._super(e),this.getChildWidgetCount()&&setTimeout(function(){t.alignToIndex(t.getActiveChildIndex()||0)},0),this.outputElement},removeChildWidget:function(e,t){this._super(e,t),this.getChildWidgetCount()||this.bubbleEvent(new i(this))},dipose:function(){this._super(),this.removeEventListener("focus",this._onFocusEventBound)}})).orientations=t.orientations,o}),define("product-layer/widgets/pointer-container",["antie/runtimecontext","rofl/lib/utils","rofl/widgets/container","rofl/widgets/label","rofl/widgets/pointerstrip"],function(e,a,t,s,l){"use strict";var i,c={HORIZONTAL:"horizontal",VERTICAL:"vertical"},o="&#x25b2;",u="&#x25b6;",d="&#x25bc;",h="&#x25c0;";return(i=t.extend({_list:null,_opts:null,_pointerButtons:null,_pointerIcons:null,_scrollAmount:1,init:function(e,t){var i,n=this,r={},s=l.SIDES;for(i in t=t||{},this._super(t.id),this._list=e,this._opts=t,this._pointerIcons=t.pointerIcons,this.addClass("pointer-container"),t.orientation!==c.VERTICAL&&(r[s.LEFT]=new l(s.LEFT,function(e){n._selectPointerEvent(e,s.LEFT)}),r[s.RIGHT]=new l(s.RIGHT,function(e){n._selectPointerEvent(e,s.RIGHT)})),t.orientation!==c.HORIZONTAL&&(r[s.TOP]=new l(s.TOP,function(e){n._selectPointerEvent(e,s.TOP)}),r[s.BOTTOM]=new l(s.BOTTOM,function(e){n._selectPointerEvent(e,s.BOTTOM)})),r)r[i]&&this.appendChildWidget(r[i]);this._pointerButtons=r,this.setPointerIconLabels(),this._onAfterAlignEventBound=a.bind(this._onAfterAlignEvent,this),this.appendChildWidget(e),e.addEventListener("afteralign",this._onAfterAlignEventBound)},getList:function(){return this._list},getPointerButtons:function(){return this._pointerButtons},setPointerIconLabels:function(){var e=this.getPointerButtons(),i=this._pointerIcons,n=l.SIDES,r="";a.each(e,function(e,t){switch(t){case n.LEFT:r=i&&i[t]||h;break;case n.RIGHT:r=i&&i[t]||u;break;case n.TOP:r=i&&i[t]||o;break;case n.BOTTOM:r=i&&i[t]||d}r&&e.icon.appendChildWidget(new s(r))})},setScrollAmount:function(e){this._scrollAmount=e},_selectPointerEvent:function(e,t){var i,n=l.SIDES,r=this.getList(),s=this._opts,o=this._scrollAmount;if(r.focus(),!o)throw new Error("scrollAmount isn\t set correctly");switch(t){case n.LEFT:case n.TOP:s.wrap&&this.getActiveListIndex()-o<0?i=r.getChildWidgetCount()-1:1===o?r.alignPrevious():i=Math.max(0,this.getActiveListIndex()-o);break;case n.RIGHT:case n.BOTTOM:s.wrap&&this.getActiveListIndex()+o>r.getChildWidgetCount()-1?i=0:1===o?r.alignNext():i=Math.min(r.getChildWidgetCount()-1,this.getActiveListIndex()+o)}0<=i&&r.alignToIndex(i),e.stopPropagation()},_onAfterAlignEvent:function(e){e.target===this.getList()&&this.checkControls()},getActiveListIndex:function(){var e=this.getList();return e.getActiveIndex?e.getActiveIndex():e.getIndexOfChildWidget(e.getActiveChildWidget())},checkControls:function(){var t=this.getList(),i=this._opts,e=i.orientation,n=this.getActiveListIndex(),r=this.getPointerButtons(),s={start:[],end:[]},o=l.SIDES;t.getChildWidgetCount()<=1?a.each(r,function(e){e.disable()}):(e!==c.VERTICAL&&(s.start.push(r[o.LEFT]),s.end.push(r[o.RIGHT])),e!==c.HORIZONTAL&&(s.start.push(r[o.TOP]),s.end.push(r[o.BOTTOM])),a.each(s.start,function(e){n||i.wrap?e.enable():e.disable()}),a.each(s.end,function(e){n!==t.getChildWidgetCount()-1||i.wrap?e.enable():e.disable()}))},enable:function(){this.checkControls()},disable:function(){a.each(this.getPointerButtons(),function(e){e.disable()})},dispose:function(){this.getList().removeEventListener("afteralign",this._onAfterAlignEventBound),this.disable(),this._super()}})).Orientations=c,i}),define("smart-ott/api",["rofl/datasources/api"],function(e){"use strict";return e.extend({init:function(e){this._super(e),this.getSupportedMediaTypes=e.getSupportedMediaTypes,this.getVersion=e.getVersion},getSupportedMediaTypes:function(){return{}},getVersion:function(){return""}})}),define("smart-ott/bootstrap",["antie/runtimecontext","rofl/lib/promise","rofl/lib/utils","smart-ott/config","rofl/lib/l10n"],function(e,r,n,s,t){"use strict";var i,o=null,a=t.getInstance();return i=function(){return o||(o=e.getDevice()),o},{loadStyleSheet:function(t){return new r(function(e){i().loadStyleSheet(t,e)})},_loadStyleSheets:function(){for(var e=s.getStyleSheets(),t=0,i=e.length,n=[];t<i;t++)n.push(this.loadStyleSheet(e[t]));return r.all(n)},_loadLanguage:function(){return s.getLocalisation()?new r(function(t,e){i().loadURL(application.localisation,{headers:{"Content-Type":"application/json"},onLoad:function(e){a.setTranslation(e,application.language),t()},onError:e})}):r.resolve()},run:function(e,t,i){return e&&s.setConfigUrl(e,t,i),s.prepare(e).then(n.bind(this._loadStyleSheets,this)).then(n.bind(this._loadLanguage,this))}}}),define("smart-ott/config",["antie/runtimecontext","rofl/lib/utils","rofl/lib/promise"],function(s,o,e){"use strict";var t,a=null,l=null,c=null,u=null,d=null,i={stars:"stars",likes:"likes",none:"none"};return(t={setConfigUrl:function(e,t,i){a=e,l=t,c=i},prepare:function(i){var n,r;return i=i||{},u||(u=new e(function(t,e){s.getDevice().loadURL(i.url||a,{responseType:"json",onLoad:function(e){n=o.getNested(e,"all","features")||o.getNested(e,"features"),r=o.getNested(e,"theming")||o.getNested(e,"smarttv","theming"),d=e,n&&l&&o.extend(n,l),r&&c&&o.extend(r,c),t(d)},onError:e,headers:i.headers||{}})})),u},_getAll:function(){return d.all||d||{}},_getSmartTV:function(){return d.smarttv||{}},_getAPI:function(){return this._getAll().api||{}},getApplication:function(){return this._getAll().application||{}},getApplicationName:function(){return this.getApplication().appname||this.getApplication().name},isApplicationEnabled:function(){var e=this._getSmartTV().enabled;return void 0===e||e},getNamespace:function(){return this._getSmartTV().namespace||this.getApplication().namespace||this.getApi().namespace||"smart-ott-kaltura-tvinci"},getFeatures:function(){return o.extend({},this._getAll().features||{},this._getSmartTV().features||{})},getFeature:function(e){return"accounts"===e?(this.getFeatures().authentication||this.getFeatures()).accounts:this.getFeatures()[e]},hasFeature:function(e){return!!this.getFeature(e)},getTheming:function(){return this._getSmartTV().theming||this._getAll().theming||{}},getLogos:function(){return this.getTheming().logo?o.isArray(this.getTheming().logo)?this.getTheming().logo:[this.getTheming().logo]:[]},getLogo:function(e){var t,i=this.getLogos();return(t=i[e=o.isNumber(e)?e:0]||i[0]||!1).url||t},getBackground:function(e){return e=o.isNumber(e)?e:0,o.isArray(this.getTheming().bckgrnd)?!!this.getTheming().bckgrnd[e]&&this.getTheming().bckgrnd[e].url:o.isArray(this.getTheming().background)?!!this.getTheming().background[e]&&this.getTheming().background[e].url:this.getTheming().bckgrnd||this.getTheming().background||!1},getBackgrounds:function(){return o.isArray(this.getTheming().bckgrnd)?this.getTheming().bckgrnd:o.isArray(this.getTheming().background)?this.getTheming().background:[{url:this.getTheming().bckgrnd||this.getTheming().background}]},getStyleSheets:function(){return this.getTheming().stylesheets||[]},getApi:function(){return this._getAll().api||{}},getApiConfig:function(e){return this.getApi()[e]||!1},getPages:function(){return d.pages||[]},getLocalisation:function(e){return this.getLocalisations()[e]||!1},getLocalisations:function(){return this._getAll().localisations||{}},getItemRatingType:function(){var e=this.getFeature("item_rating")||{};return e.enabled?e.type||i.stars:i.none},getItemRatingTypeDetail:function(){var e=this.getFeature("item_rating")||{};return e.enabledDetail?e.type||i.stars:i.none},getItemRatingCount:function(){return(this.getFeature("item_rating")||{}).count||0},getDisableNativeSubtitles:function(){return d.disableNativeSubtitles||!0},getBackstageAPI:function(){return this._getAPI().backstage||{}},getExternalServiceAPI:function(e){return o.getNested(this._getAPI(),"backstage","externalServices",e)},LoginConfig:{disabled:"disabled",optional:"optional",mandatory:"mandatory"},ProfileCode:{disabled:"disabled",password:"password",pin:"pin"}}).ItemRatingType=i,t.RecordFilters=["alpha"],t}),define("smart-ott/resolver",["rofl/lib/promise","smart-ott/config"],function(t,e){"use strict";var i,n,r,s;return{getNamespace:function(){return i||(i=e.getNamespace()),i},retrieveApi:function(){var e=this;return s?t.resolve(s):new t(function(t,i){require([e.getNamespace()+"/api"],function(e){(s=e.prepare()).then(t,i)},i)})},retrieveModel:function(i){var n=this;return new t(function(t,e){require([n.getNamespace()+"/models/"+i],function(e){t(e)},e)})},retrieveAuthenticator:function(){var i=this;return n?t.resolve(n):new t(function(t,e){require([i.getNamespace()+"/authenticator"],function(e){t(n=e)},e)})},retrieveEPGManager:function(){var i=this;return r?t.resolve(r):new t(function(t,e){require([i.getNamespace()+"/managers/epg/manager"],function(e){r=new e,t(r)},e)})}}}),define("smart-ott-models/account",["rofl/models/api/abstract"],function(e){"use strict";return e.extend({init:function(){this._id=null,this._username=null,this._initials=null,this._firstName=null,this._lastName=null,this._email=null,this._facebookId=null,this._mainAccount=!1,this._avatarUrl=null},getId:function(){return this._id},getUsername:function(){return this._username},getInitials:function(){return this._initials},getFirstName:function(){return this._firstName},getLastName:function(){return this._lastName},getEmail:function(){return this._email},getFacebookId:function(){return this._facebookId},isMainAccount:function(){return this._mainAccount},getAvatarUrl:function(){return this._avatarUrl}})}),define("smart-ott-models/account/favourites",["smart-ott-models/browse"],function(e){"use strict";return e.extend({_items:[],getItems:function(){return this._items}})}),define("smart-ott-models/account/records",["smart-ott-models/browse"],function(e){"use strict";return e.extend({_items:[],getItems:function(){return this._items}})}),define("smart-ott-models/account/recordsspace",["rofl/models/api/abstract","rofl/lib/promise"],function(e,t){"use strict";return e.extend({_total:0,_available:0,_used:0,getTotalSpace:function(){return this._total},getAvailableSpace:function(){return this._available},getUsedSpace:function(){return this._used},getSpaces:function(){return t.resolve()}})}),define("smart-ott-models/account/watchlist",["smart-ott-models/browse"],function(e){"use strict";return e.extend({_items:[],getItems:function(){return this._items}})}),define("smart-ott-models/accounts",["rofl/models/api/abstract","smart-ott-models/account","rofl/lib/utils"],function(e,t,n){"use strict";return e.extend({init:function(){this._accounts=[]},getAccounts:function(){return this._accounts},getAccountById:function(t){var i=null;return n.each(this._accounts,function(e){e.getId()===t&&(i=e)}),i}})}),define("smart-ott-models/action/action",["antie/class","rofl/lib/promise"],function(e,t){"use strict";return e.extend({init:function(e){e=e||{},this._route=e.route||null,this._args=e.args||{}},getRoute:function(){return this._route},getArguments:function(){return this._args},prepare:function(){return t.resolve(this)}})}),define("smart-ott-models/action/item",["antie/class","smart-ott-models/action/action"],function(e,t){"use strict";return e.extend({init:function(e){this._id=e.id,this._label=e.label,this._action=new t(e.action)},getId:function(){return this._id},getLabel:function(){return this._label},getIcon:function(){return this._icon},getAction:function(){return this._action}})}),define("smart-ott-models/assets/broadcast",["smart-ott-models/assets/playable","rofl/lib/promise","rofl/lib/utils"],function(e,t,r){"use strict";return e.extend({_type:e.Types.BROADCAST,init:function(){this._super(),this._channel=null,this._startTime=null,this._endTime=null,this._startDate=null,this._endDate=null,this._hasTimeshift=!1,this._hasStartOver=!1},getChannel:function(){return this._channel},getStartDate:function(){return null===this._startDate&&(this._startDate=new Date(1e3*this.getStartTime())),this._startDate},getStartTime:function(){return null===this._startTime&&(this._startTime=this.getStartDate().getTime()/1e3),this._startTime},getEndDate:function(){return null===this._endDate&&(this._endDate=new Date(1e3*this.getEndTime())),this._endDate},getEndTime:function(){return null===this._endTime&&(this._endTime=this.getEndDate().getTime()/1e3),this._endTime},getDuration:function(){return this.getEndTime()-this.getStartTime()},getImage:function(){return this._image?t.resolve(this._image):t.reject("No image was set")},prepareStream:function(){if(!this._channel)throw Error("A channel needs to be set to prepare the stream");return this._channel.prepareStream()},getBrowseSubtitle:function(){var e=this.getChannel().getLabel(),t=this.getStartDate(),i=this.getEndDate();function n(e){return 10<=e?""+e:"0"+e}return r.formatString("{0}:{1} - {2}:{3}",n(t.getHours()),n(t.getMinutes()),n(i.getHours()),n(i.getMinutes()))+" on "+e},getProgress:function(){var e=(Math.floor(r.now()/1e3)-this.getStartTime())/(this.getDuration()/100);return e<0?e=0:100<e&&(e=100),e},hasTimeshift:function(){return this._hasTimeshift},hasStartOver:function(){return this._hasStartOver}})}),define("smart-ott-models/assets/episode",["smart-ott-models/assets/playable"],function(e){"use strict";return e.extend({_type:e.Types.SERIES_EPISODE,_tags:e.Tags,init:function(){this._super(),this._serie=null,this._season=null,this._episodeNumber=null},getSerie:function(){return this._serie},getSeason:function(){return this._season},getEpisodeNumber:function(){return this._episodeNumber}})}),define("smart-ott-models/assets/genre",["rofl/models/api/abstract","rofl/lib/promise"],function(e,t){"use strict";return e.extend({init:function(){this._id=null,this._label="",this._image=null},getId:function(){return this._id},getLabel:function(){return this._label},getImage:function(){return this._image?t.resolve(this._image):t.reject()}})}),define("smart-ott-models/assets/image",["rofl/models/api/abstract","rofl/lib/promise"],function(e,t){"use strict";return e.extend({init:function(e){this._imageUrl=e||null},getImageUrl:function(){return t.resolve(this._imageUrl)}})}),define("smart-ott-models/assets/media",["rofl/models/api/abstract","rofl/lib/promise","rofl/lib/utils","rofl/media/source","smart-ott-models/assets/subtitlesource","rofl/lib/l10n"],function(e,t,r,i,n,s){"use strict";var o=s.getInstance();return e.extend({init:function(e){this._sources=[],this._subtitles=[],this._defaultSubtitlesIndex=-1,this._emptySource=new i("",null,null,{id:"",title:o.get("player.language-menu.none")}),this._emptySubtitle=new n({title:o.get("player.language-menu.none")}),this._asset=e||null},getAsset:function(){return this._asset},getEmptySource:function(){return this._emptySource},getEmptySubtitle:function(){return this._emptySubtitle},getSources:function(i){var n=[];return i=i||{},r.each(this._sources,function(e){var t=!0;i.language&&e.getLanguage().id!==i.language.id&&e.getLanguage().title!==i.language.title&&(t=!1),t&&n.push(e)}),n},getSubtitles:function(i){var n=[];return i=i||{},r.each(this._subtitles,function(e){var t=!0;i.language&&e.getLanguage()!==i.language.id&&e.getTitle()!==i.language.title&&(t=!1),t&&n.push(e)}),n},getDefaultSubtitlesIndex:function(){return this._defaultSubtitlesIndex},load:function(){return t.reject("Should be implemented")},loadSource:function(){return t.reject("Should be implemented")}})}),define("smart-ott-models/assets/media/source",["rofl/media/source"],function(e){"use strict";var t=e.extend({init:function(){this.offset=null,this._super.apply(this,arguments)},getStreamOffset:function(){return this.offset},setStreamOffset:function(e){this.offset=e}});return t.Qualities=e.Qualities,t.MIME_TYPES=e.MIME_TYPES,t}),define("smart-ott-models/assets/movie",["rofl/lib/promise","smart-ott-models/assets/playable"],function(e,t){"use strict";return t.extend({_type:t.Types.MOVIE,_tags:t.Tags,init:function(){this._super(),this._still=null},getStill:function(){return e.resolve(this._still)}})}),define("smart-ott-models/assets/playable",["rofl/models/api/abstract","rofl/lib/promise","rofl/lib/utils"],function(e,t,i){"use strict";var n,r={BROADCAST:"broadcast",MOVIE:"movie",PLAYABLE:"playable",SERIES_EPISODE:"episode"};return(n=e.extend({_type:r.PLAYABLE,init:function(){this._id=null,this._label=null,this._description=null,this._image=null,this._atmosphericImage=null,this._duration=0,this._categories=[],this._parentalRating=null,this._streamSenseLabels=null},getId:function(){return this._id},getType:function(){return this._type},getLabel:function(){return this._label},getDescription:function(){return this._description},getImage:function(){return t.resolve(this._image)},getAtmosphericImage:function(){return t.resolve(this._atmosphericImage)},getDuration:function(){return this._duration},getCategories:function(){return this._categories},prepareStream:function(){return t.reject()},getMediaType:function(){throw new Error("Not implemented yet")},getBrowseSubtitle:function(){return this.getDuration()},getPosition:function(){return this._position},getProgress:function(){var e;if(!i.isUndefined(this._position)&&this.getDurationSeconds())return(e=Math.floor(100*this._position/this.getDurationSeconds()))<0?e=0:100<e&&(e=100),e},getParentalRating:function(){return this._parentalRating},getStreamSenseLabels:function(){return this._streamSenseLabels},getAds:function(){return[]}})).Types=r,n.Tags={PARENTAL_RATING:"Parental Rating",GENRE:"Genre",TRAILERS:"Trailer"},n}),define("smart-ott-models/assets/record",["smart-ott-models/assets/playable","rofl/lib/promise","smart-ott/config"],function(e,t,i){"use strict";var n;return(n=e.extend({init:function(){this._recordId="",this._programId="",this._title="",this._startDate=null,this._endDate=null,this._genres=[],this._duration=0,this._status="",this._type="",this._image=null,this._isWatched=!1,this._channelId=0,this._categories=""},getId:function(){return this._recordId},getRecordId:function(){return this._recordId},getProgramId:function(){return this._programId},getTitle:function(){return this._title},getLabel:function(){return this._title},getImage:function(){var e=this._image;return e?t.resolve(e):this.getFallbackImage()},getStartDate:function(){return this._startDate},getEndDate:function(){return this._endDate},getGenres:function(){return this._genres},getDuration:function(){var e,t,i=this._duration;return i&&"0"!==i||(e=this.getEndDate(),(t=this.getStartDate())&&e&&(i=e.getTime()-t.getTime(),i/=1e3)),i},getStatus:function(){return this._status},getType:function(){return this._type},getChannelId:function(){return this._channelId},isWatched:function(){return this._isWatched},getFallbackImage:function(){return t.resolve(i.getLogo())},getCategories:function(){return this._categories}})).STATUS={RECORDED:"recorded",RECORDING:"recording",ERROR:"recording_failed"},n}),define("smart-ott-models/assets/serie",["rofl/models/api/abstract","rofl/lib/promise","rofl/lib/utils"],function(e,t,i){"use strict";return e.extend({_tags:{PARENTAL_RATING:"Parental Rating",GENRE:"Genre"},init:function(){this._id=null,this._label=null,this._description=null,this._image=null,this._categories=[],this._parentalRating=null},getId:function(){return this._id},getLabel:function(){return this._label},getDescription:function(){return this._description},getImage:function(){return t.resolve(this._image)},getCategories:function(){return this._categories},getDuration:function(){return 0},getBrowseSubtitle:function(){return""},getProgress:function(){var e;if(!i.isUndefined(this._position)&&this.getDurationSeconds())return(e=Math.floor(100*this._position/this.getDurationSeconds()))<0?e=0:100<e&&(e=100),e},getParentalRating:function(){return this._parentalRating}})}),define("smart-ott-models/assets/subtitlesource",["rofl/media/subtitlesource","rofl/lib/utils"],function(e,t){"use strict";return e.extend({init:function(e){this._super(e),this._isLoading=!1},isLoading:function(e){return t.isUndefined(e)||(this._isLoading=!!e),this._isLoading}})}),define("smart-ott-models/bookmarking/readbookmark",["rofl/models/api/abstract"],function(e){"use strict";return e.extend({_asset:null,init:function(){this._position="",this._mediaID=""},getAsset:function(){return this._asset},getVideoPosition:function(){return this._position},getMediaID:function(){return this._mediaID}})}),define("smart-ott-models/bookmarking/watchhistory",["rofl/models/api/abstract"],function(e){"use strict";return e.extend({init:function(){this._asset={},this._history=[]},getLastAssetWatched:function(){return this._asset},getHistory:function(){return this._history}})}),define("smart-ott-models/browse",["rofl/models/api/abstract","rofl/lib/promise"],function(e,t){"use strict";return e.extend({init:function(){this._sections=[]},getSections:function(){return this._sections},prepare:function(){return t.reject(new Error("Needs to be implemented."))}})}),define("smart-ott-models/browse/section",["rofl/models/api/abstract"],function(e){"use strict";var t;return(t=e.extend({init:function(){this._items=[],this._label=null,this._type=null,this._hasMoreItems=!1,this._isGettingMoreItems=!1},getItems:function(){return this._items},getLabel:function(){return this._label},getType:function(){return this._type},hasMoreItems:function(){return this._hasMoreItems},isGettingMoreItems:function(){return this._isGettingMoreItems},setLabel:function(e){this._label=e}})).Type={SINGLE:"single",SINGLE_NO_TITLE:"single_no_title",DOUBLE:"doublesimple",DOUBLE_HIGHLIGHTED:"double",GRID:"grid",SLIDER:"slider",HIGHLIGHT:"highlight",FRIEND:"friend"},t}),define("smart-ott-models/channel",["rofl/models/api/abstract","rofl/lib/promise"],function(e,t){"use strict";return e.extend({init:function(){this._id=null,this._label=null,this._description=null,this._image=null,this._items=[],this._number=null},getId:function(){return this._id},getLabel:function(){return this._label},getDescription:function(){return this._description},getImage:function(){return t.resolve(this._image)},prepareStream:function(){return t.reject()},getItems:function(){return this._items},getNumber:function(){return this._number}})}),define("smart-ott-models/channels",["rofl/models/api/abstract","rofl/lib/utils"],function(e,i){"use strict";return e.extend({init:function(){this._channels=[]},getAllChannels:function(){return this._channels},getChannelById:function(t){var e=i.filter(this._channels,function(e){return e.getId()===t});return 0<e.length&&e[0]}})}),define("smart-ott-models/connectcode",["rofl/lib/promise"],function(e){"use strict";return{getConnectCode:function(){return e.resolve({code:"DUMMY1"})},isConnected:function(){return e.resolve(!1)}}}),define("smart-ott-models/detail",["rofl/models/api/abstract"],function(e){"use strict";return e.extend({init:function(){this._assets=[]},getAssets:function(){return this._assets}})}),define("smart-ott-models/detail/favorite",["rofl/models/api/abstract"],function(e){"use strict";return e.extend({init:function(){}})}),define("smart-ott-models/device",["rofl/models/api/abstract","rofl/lib/promise"],function(e,t){"use strict";var i=e.extend({init:function(){this._activationDate=null,this._brandName="",this._brandId=0,this._deviceFamilyName="",this._deviceFamilyId=0,this._householdId=0,this._name="",this._id="",this._pin="",this._state=i.State.UNKNOWN,this._responseStatus=i.ResponseStatus.UNKNOWN},getActivationDate:function(){return this._activationDate},getBrandName:function(){return this._brandName},getBrandId:function(){return this._brandId},getDeviceFamilyName:function(){return this._deviceFamilyName},getDeviceFamilyId:function(){return this._deviceFamilyId},getHouseholdId:function(){return this._householdId},getName:function(){return this._name},getId:function(){return this._id},getPin:function(){return this._pin},getState:function(){return this._state},getResponseStatus:function(){return this._responseStatus},isDeviceOnDomain:function(){return t.resolve(!1)}});return i.State={UNKNOWN:0,ERROR:1,NONEXISTENT:2,PENDING:3,ACTIVATED:4,UNACTIVATED:5},i.ResponseStatus={UNKNOWN:0,ERROR:1,DUPLICATEPIN:2,NONEXISTENT:3,OK:4},i}),define("smart-ott-models/device/addremove",["rofl/models/api/abstract"],function(e){"use strict";var t=e.extend({init:function(){this._responseStatus=t.State.Unknown,this._domain={}},getResponseStatus:function(){return this._responseStatus},getDomain:function(){return this._domain}});return t.State={Unknown:"Unknown",OK:"OK",ExceededLimit:"ExceededLimit",DeviceTypeNotAllowed:"DeviceTypeNotAllowed",DeviceAlreadyExists:"DeviceAlreadyExists",Error:"Error",DomainNotExists:"DomainNotExists",DeviceExistsInOtherDomains:"DeviceExistsInOtherDomains",DeviceNotConfirmed:"DeviceNotConfirmed",DomainSuspended:"DomainSuspended"},t}),define("smart-ott-models/device/family",["rofl/models/api/abstract"],function(e){"use strict";return e.extend({init:function(){this._id=0,this._name="",this._deviceLimit=0,this._streamLimit=0,this._devices=[]},getId:function(){return this._id},getName:function(){return this._name},getDeviceLimit:function(){return this._deviceLimit},getStreamLimit:function(){return this._streamLimit},getDevices:function(){return this._devices}})}),define("smart-ott-models/event",["rofl/models/api/abstract"],function(e){"use strict";return e.extend({track:function(e){throw"Track method was not implemented by event model"}})}),define("smart-ott-models/friends",["rofl/models/api/abstract"],function(e){"use strict";return e.extend({init:function(){this._mediasID=null,this._mediaInfo=null,this._updateDate=null},getMedias:function(){return this._mediasID},getMediaInfo:function(){return this._mediaInfo},getIdentity:function(){return this._identity},setMediaInfo:function(e){this._mediaInfo=e}})}),define("smart-ott-models/history",["rofl/models/api/abstract"],function(e){"use strict";return e.extend({init:function(){this._assets=[]},getAssets:function(){return this._assets}})}),define("smart-ott-models/household",["rofl/models/api/abstract"],function(e){"use strict";return e.extend({init:function(){this._id="",this._name="",this._description="",this._mainUserIds=[],this._userIDs=[],this._userLimit=0,this._deviceFamilies=[],this._deviceLimit=0},getId:function(){return this._id},getName:function(){return this._name},getDescription:function(){return this._description},getMainUserIds:function(){return this._mainUserIds},getUserIDs:function(){return this._userIDs},getUserLimit:function(){return this._userLimit},getDeviceFamilies:function(){return this._deviceFamilies},getDeviceLimit:function(){return this._deviceLimit}})}),define("smart-ott-models/menu",["rofl/models/api/abstract","rofl/lib/utils"],function(e,i){"use strict";return e.extend({init:function(){this._items=[]},getItems:function(){return this._items},getItemByType:function(t){if(!i.isEmpty(this._items)&&t)return i.filter(this._items,function(e){return e.getType()===t})[0]}})}),define("smart-ott-models/menu/action",["antie/class","rofl/lib/promise"],function(e,t){"use strict";return e.extend({init:function(e){e=e||{},this._route=e.route||null,this._args=e.args||{}},getRoute:function(){return this._route},getArguments:function(){return this._args},prepare:function(){return t.resolve(this)}})}),define("smart-ott-models/menu/actions/account",["rofl/lib/promise","application/managers/session","smart-ott-models/menu/action","smart-ott/config"],function(e,t,i,n){"use strict";var r=n.getFeature("connect")||{default:"login"};return i.extend({prepare:function(){return t.hasSession()&&t.isLoggedIn()?(this._route="account",this._args={facebookId:t.getSession()._identity.getFacebookId()}):this._route="connectcode"===r.default?"connect":r.default,e.resolve(this)}})}),define("smart-ott-models/menu/actions/browse",["smart-ott-models/menu/action"],function(e){"use strict";return e.extend({init:function(e){(e=e||{}).route="browse",e.args=e.args||{},e.args.sections=e.args.sections||[],this._super(e)}})}),define("smart-ott-models/menu/actions/epg",["rofl/lib/promise","smart-ott-models/menu/action","smart-ott/config"],function(e,t,i){"use strict";var n=i.getFeature("fullEpg"),r={channels:{route:"epgModal"},guide:{route:n&&n.enabled?"epg":"epgModal"}};return t.extend({prepare:function(){return this._route=r[this._args].route,e.resolve(this)}})}),define("smart-ott-models/menu/actions/records",["rofl/lib/promise","smart-ott-models/menu/action"],function(e,t){"use strict";return t.extend({prepare:function(){return this._route="records",e.resolve(this)}})}),define("smart-ott-models/menu/actions/search",["rofl/lib/promise","smart-ott-models/menu/action"],function(e,t){"use strict";return t.extend({prepare:function(){return this._route="search",e.resolve(this)}})}),define("smart-ott-models/menu/actions/settings",["rofl/lib/promise","smart-ott-models/menu/action"],function(e,t){"use strict";return t.extend({prepare:function(){return this._route="faq",e.resolve(this)}})}),define("smart-ott-models/menu/actions/watchlist",["rofl/lib/promise","application/managers/session","smart-ott-models/menu/action"],function(e,t,i){"use strict";return i.extend({prepare:function(){return t.hasSession()&&t.isLoggedIn()?this._route="watchlist":this._route="login",e.resolve(this)}})}),define("smart-ott-models/menu/item",["antie/class","rofl/lib/promise"],function(e,t){"use strict";var i=e.extend({init:function(){this._id=null,this._label=null,this._icon=null,this._type=null,this._action=null,this._children=[]},getId:function(){return this._id},getLabel:function(){return this._label},getIcon:function(){return this._icon},getAction:function(){return this._action},getType:function(){return this._type},hasChildren:function(){return 0<this._children.length},getChildren:function(){return t.resolve(this._children)},hasSubmenu:function(){return this.getType()===i.Types.SUBMENU}});return i.Types={ACCOUNT:"account",CHANNELS:"channels",DASHBOARD:"dashboard",GUIDE:"guide",SEARCH:"search",SETTINGS:"settings",VOD:"vod",WATCHLIST:"watchlist",SUBMENU:"submenu",RECORDS:"records"},i}),define("smart-ott-models/parentalcontrol",["rofl/models/api/abstract"],function(e){"use strict";return e.extend({init:function(){this._hasParentalRules=!1},hasParentalRules:function(){return this._hasParentalRules},isPinValid:function(){return this._isValid},getMessage:function(){return this._message}})}),define("smart-ott-models/parentalpin",["rofl/models/api/abstract"],function(e){"use strict";var t=e.extend({init:function(){this._state=t.States.WAITING},getState:function(){return this._state}});return t.LengthLimits={min:0,max:0},t.States={WAITING:0,ERROR:1,UNSET:2,INCORRECT:3,OK:4},t}),define("smart-ott-models/profiles",["rofl/models/api/abstract","rofl/lib/utils"],function(e,n){"use strict";return e.extend({init:function(){this._profiles=[]},getProfiles:function(){return this._profiles},getProfileById:function(t){var i=null;return n.each(this._profiles,function(e){e.getId()===t&&(i=e)}),i}})}),define("smart-ott-models/purchasehistory/purchasehistory",["rofl/models/api/abstract"],function(e){"use strict";return e.extend({init:function(){this._assets=[],this._sections=[]},getAssets:function(){return this._assets},getSections:function(){return this._sections}})}),define("smart-ott-models/quickactions/action",["antie/class","rofl/lib/promise","antie/runtimecontext"],function(e,t,i){"use strict";var n=i.getCurrentApplication();return e.extend({retrieve:function(){return t.resolve(this)},validate:function(){return t.resolve(!0)},run:function(){var e=this,t=n.getComponent("modal");this.validate().then(function(){t.hide(),n.route(e.getRoute(),{action:e.getActionId(),asset:e.getAsset()})})},getActionId:function(){return this._actionId},getTitle:function(){return this._title},getIcon:function(){return this._icon},getRoute:function(){return this._route},getAsset:function(){return this._asset}})}),define("smart-ott-models/quickactions/continuewatching",["smart-ott-models/quickactions/action","rofl/lib/l10n"],function(e,t){"use strict";var i=t.getInstance();return e.extend({init:function(e){this._actionId="continuewatching",this._title=i.get("quickmenu.actions.continuewatching"),this._icon="play",this._route="player",this._asset=e}})}),define("smart-ott-models/quickactions/detail",["smart-ott-models/quickactions/action","rofl/lib/l10n"],function(e,t){"use strict";var i=t.getInstance();return e.extend({init:function(e){this._actionId="detail",this._title=i.get("quickmenu.actions.detail"),this._icon="detail-page",this._route="detail",this._asset=e}})}),define("smart-ott-models/quickactions/epg",["smart-ott-models/quickactions/action","smart-ott/config","rofl/lib/l10n"],function(e,i,t){"use strict";var n=t.getInstance();return e.extend({init:function(e){var t=i.getFeature("fullEpg");this._actionId="epg",this._title=n.get("quickmenu.actions.epg"),this._icon="guide",this._route=t&&t.enabled?"epg":"epgModal",this._asset=e}})}),define("smart-ott-models/quickactions/favorites",["smart-ott-models/quickactions/action","application/managers/personal/favourite","rofl/lib/l10n","rofl/lib/promise"],function(e,r,t,i){"use strict";var n="addFavorites",s="removeFavorites",o="favorites",a="add-favorites",l=t.getInstance();return e.extend({init:function(e){this._actionId="favorites",this._title="",this._icon="",this._route="favourites",this._asset=e,this._present=!1},retrieve:function(){var t=this,e=this._asset;return r.isPartOf(e.getId()).then(function(e){return(t._present=e)?(t._actionId=s,t._title=l.get("quickmenu.actions.remove_favorite"),t._icon=o):(t._actionId=n,t._title=l.get("quickmenu.actions.add_favorite"),t._icon=a),i.resolve(t)}).catch(function(){return t._actionId=n,t._icon=a,i.reject(t)})},run:function(e){var t=this,i=this._present,n=this._asset;i?r.removeItem(n).then(function(){e.setTitle(l.get("quickmenu.actions.add_favorite")),e.toggleIconClass(a),t._present=!1}):r.addItem(n).then(function(){e.setTitle(l.get("quickmenu.actions.remove_favorite")),e.toggleIconClass(o),t._present=!0})}})}),define("smart-ott-models/quickactions/play",["smart-ott-models/quickactions/action","rofl/lib/l10n","rofl/lib/promise","rofl/lib/utils","product-layer/dialog/widgets/command","application/managers/session","application/managers/entitlement","antie/runtimecontext"],function(e,t,o,n,a,l,c,i){"use strict";var u="parental-pin",d="entitlement",h=t.getInstance(),g=i.getCurrentApplication(),r=g.getDevice().getLogger();return e.extend({init:function(e){this._actionId="play",this._title=h.get("quickmenu.actions.play"),this._icon="play",this._route="player",this._asset=e},retrieve:function(){var e=this,t=this._asset;return c.validate(t).then(function(e){t.entitlement=e},function(e){t.entitlement=e}).then(function(){return n.hasNested(t.entitlement,"entitled")?e._icon=t.entitlement.entitled?"play":"restricted":e._icon="restricted",e})},validate:function(){var e,t=g.getComponent("modal"),i=this._asset,n=i.getRatingId(),r=[],s="";if(!i.entitlement||i.entitlement.entitled)return l.getSession().retrieveIdentity().then(function(e){if(e.getLevels()<n)return o.reject({type:u})});switch(i.entitlement.reason){case c.Reasons.GEOBLOCK:e=0,s="geoblock_content",r.push(new a(h.get("back"),function(){t.hide()}));break;case c.Reasons.SUBSCRIPTION:e=0,s="subscribe_content",r.push(new a(h.get("back"),function(){t.hide()}));break;default:l.isLoggedIn()?l.hasSession()&&l.isLoggedIn()&&(e=0,s="subscribe_content",r.push(new a(h.get("back"),function(){t.hide()}))):(s="log_in_content",r.push(new a(h.get("restriction.dialog.log_in_now"),function(){g.route("login")})),r.push(new a(h.get("restriction.dialog.log_in_later"),function(){t.hide()})),e=1)}return r.length?(t.hide(),o.reject({type:d,commands:r,content:h.get("restriction.dialog."+s),cancelIndex:e})):o.resolve()},run:function(){var t=this,i=g.getComponent("modal");this.validate().then(function(){i.hide(),g.route(t.getRoute(),{action:t.getActionId(),asset:t.getAsset()})}).catch(function(e){i.hide(),n.hasNested(e,"type")?e.type===u?t._showPinPopup():e.type===d&&t._showEntitlementDialog(e):r.error(err)})},_showEntitlementDialog:function(e){g.route("dialog",{title:h.get("restriction.dialog.title"),content:e.content,commands:e.commands,cancelCommandIndex:e.cancelIndex})},_showPinPopup:function(){g.route("pindialog",{isParentalCheck:!0,onPinValidated:n.bind(this._onPinValidated,this),assetLabel:this.getAsset().getLabel()})},_onPinValidated:function(){g.route(this.getRoute(),{action:this.getActionId(),asset:this.getAsset()})}})}),define("smart-ott-models/quickactions/record",["smart-ott-models/quickactions/action","application/managers/personal/records","rofl/lib/l10n","rofl/lib/promise","rofl/lib/utils","antie/runtimecontext"],function(e,t,i,n,r,s){"use strict";var o="addRecord",a="deleteRecord",l="record",c="trash",u=i.getInstance(),d=s.getCurrentApplication().getDevice().getLogger(),h=t.getInstance();return e.extend({init:function(e){this._actionId="",this._title="",this._icon="",this._route="records",this._asset=e},retrieve:function(){var t=this,e=this._asset;return h.isPartOf(e.getId()).then(function(e){return e?(t._actionId=a,t._title=u.get("quickmenu.actions.delete_record"),t._icon=c):(t._actionId=o,t._title=u.get("quickmenu.actions.add_record"),t._icon=l),n.resolve(t)}).catch(function(){return t._actionId=o,t._title=u.get("quickmenu.actions.add_record"),t._icon=l,n.reject(t)})},run:function(t){var i=this._asset,n=[];h.getRecordsByProgramId(i.getId()).then(function(e){e.length?(r.each(e,function(e){n.push(e.getRecordId())}),h.removeItems(n).then(function(){t.setTitle(u.get("quickmenu.actions.add_record")),t.toggleIconClass(l)}).catch(function(e){return d.error("Program couldn't be removed ["+i.getId()+"]",e),result})):h.addItem(i).then(function(){t.setTitle(u.get("quickmenu.actions.delete_record")),t.toggleIconClass(c)}).catch(function(e){return d.error("Program couldn't be recorded ["+i.getId()+"]",e),result})})}})}),define("smart-ott-models/quickactions/watchlist",["smart-ott-models/quickactions/action","application/managers/personal/watchlist","rofl/lib/l10n","rofl/lib/promise"],function(e,i,t,n){"use strict";var r="addWatchlist",s="removeWatchlist",o="less",a="plus",l=t.getInstance();return e.extend({init:function(e){this._actionId="",this._title="",this._icon="",this._route="watchlist",this._asset=e},retrieve:function(){var t=this,e=this._asset;return i.isPartOf(e.getId()).then(function(e){return e?(t._actionId=s,t._title=l.get("quickmenu.actions.remove_watchlist"),t._icon=o):(t._actionId=r,t._title=l.get("quickmenu.actions.add_watchlist"),t._icon=a),n.resolve(t)}).catch(function(){return t._actionId=r,t._icon=a,n.reject(t)})}})}),define("smart-ott-models/recordfilters/alpha",["smart-ott-models/recordfilters/recordfilter","rofl/lib/promise","rofl/lib/l10n"],function(e,t,i){"use strict";var n,r={NONE:"",A_TO_Z:"atoz",Z_TO_A:"ztoa"},s=i.getInstance();return(n=e.extend({init:function(e){this._filterId="alpha",this._title=s.get("records.filters.alphabetically"),this._description="Sort the items alphabetically",this._items=e,this._value=r.NONE,this._exclusive=!0},getOptions:function(){return t.resolve([])}})).ORDERS=r,n.TYPES=e.TYPES,n}),define("smart-ott-models/recordfilters/filters",["antie/class","smart-ott/config","smart-ott/resolver","rofl/lib/promise","rofl/lib/utils"],function(e,t,i,n,r){"use strict";return e.extend({init:function(){this._super(),this._filters=t.RecordFilters},getFilters:function(){var t=[];return r.each(this._filters,function(e){t.push(i.retrieveModel("recordfilters/"+e))}),n.all(t)}})}),define("smart-ott-models/recordfilters/recordfilter",["antie/class","rofl/lib/promise","rofl/lib/l10n","rofl/lib/utils"],function(e,t,i,n){"use strict";var r;return(r=e.extend({getValue:function(){return this._value},setValue:function(e){this._value=e},addValue:function(e){n.isArray(this._value)&&this._value.getValue().push(e)},removeValue:function(t){var e,i=this._value;n.isArray(i)&&((e=n.filter(i,function(e){return e.getValue()!==t.getValue()},this)).length?this.setValue(e):this.setValue(null))},getFilterId:function(){return this._filterId},getTitle:function(){return this._title},getItems:function(){return this._items},isExclusive:function(){return this._exclusive},getOptions:function(){return t.resolve([])}})).TYPES={FILTER:"FILTER",ORDER:"ORDER"},r}),define("smart-ott-models/recordfilters/status",["smart-ott-models/recordfilters/recordfilter","rofl/lib/promise","rofl/lib/l10n"],function(e,t,i){"use strict";var n,r={ALL:"all",RECORDING:"recording",RECORDED:"recorded"},s=i.getInstance();return(n=e.extend({init:function(e){this._filterId="status",this._title=s.get("records.filters.status"),this._description="Filter the items already recorded or in recording/scheduled status",this._items=e,this._value=r.ALL,this._exclusive=!0},getOptions:function(){return t.resolve([])}})).STATUS=r,n.TYPES=e.TYPES,n}),define("smart-ott-models/recordfilters/watched",["smart-ott-models/recordfilters/recordfilter","rofl/lib/promise","rofl/lib/l10n"],function(e,t,i){"use strict";var n,r={ALL:"all",WATCHED:"watched",UNWATCHED:"unwatched"},s=i.getInstance();return(n=e.extend({init:function(e){this._filterId="state",this._title=s.get("records.filters.watched"),this._description="Filter the items watched/unwatched",this._items=e,this._value=r.ALL,this._exclusive=!0},getOptions:function(){return t.resolve([])}})).STATES=r,n.TYPES=e.TYPES,n}),define("smart-ott-models/search",["rofl/models/api/abstract"],function(e){"use strict";var t=e.extend({init:function(){this._assets=[],this._hasMoreItems=!1,this._isGettingMoreItems=!1},getAssets:function(){return this._assets},hasMoreItems:function(){return this._hasMoreItems},isGettingMoreItems:function(){return this._isGettingMoreItems}});return t.Types={BROADCAST:"broadcast",MOVIE:"movie",EPISODE:"episode",SERIE:"serie"},t}),define("smart-ott-models/season",["rofl/models/api/abstract","rofl/lib/promise"],function(e,t){"use strict";return e.extend({init:function(){this._id=null,this._label=null,this._description=null,this._image=null,this._seasonNumber=[],this._parentalRating=null},getId:function(){return this._id},getLabel:function(){return this._label},getDescription:function(){return this._description},getImage:function(){return t.resolve(this._image)},getSeasonNumber:function(){return this._seasonNumber},getEpisodes:function(){return t.resolve([])},getDuration:function(){return 0},getCategories:function(){return[]},getSerie:function(){return this._serie},getParentalRating:function(){return this._parentalRating}})}),define("smart-ott-models/series",["rofl/models/api/abstract","rofl/lib/promise"],function(e,t){"use strict";return e.extend({init:function(){this._id=null,this._label=null,this._description=null,this._image=null},getId:function(){return this._id},getLabel:function(){return this._label},getDescription:function(){return this._description},getImage:function(){return t.resolve(this._image)},getSeasons:function(){return t.resolve([])}})}),define("smart-ott-models/session",["rofl/models/api/abstract","rofl/lib/promise"],function(e,t){"use strict";return e.extend({init:function(e){this._identity=null,this._sessionVars=e||null},getIdentity:function(){return this._identity},getSessionVars:function(){return this._sessionVars},retrieveIdentity:function(){return t.reject("Should be implemented")},switchHouseholdAccount:function(e){return t.reject("Should be implemented")},regularLogin:function(e){return t.resolve(this)},refreshSession:function(e){return t.resolve(this)},anonymousLogin:function(){return t.resolve(this)}})}),define("smart-ott-appcore-api-rte-fincons/api",["smart-ott/api","rofl/lib/promise","rofl/lib/utils","smart-ott/config","smart-ott-appcore-api-rte-fincons/config","application/managers/channel","smart-ott-appcore-api-rte-fincons/apis/userprofile","antie/application","smart-ott-appcore-api-rte-fincons/managers/authentication"],function(i,n,r,e,t,s,o,a,l){"use strict";return{getApiConfig:function(){return{datasource:e.getNamespace()+"/datasources/fincons",modelPath:e.getNamespace()+"/models/",withCredentials:!1,endpoint:{url:""},getSupportedMediaTypes:t.getMediaTypes}},_prepareChannelManager:function(e){return r.isEmpty(s.getAllChannels())?e.read("channels").then(function(e){return s.setChannels(e.getAllChannels()),n.resolve()}):n.resolve()},prepare:function(){var e,t=i.extend({create:function(e,n){var r=this;return"bookmarking/bookmark"===e?(n.data=n.params,n.headers={Accept:"application/json","Content-Type":"application/json"},r.read("detail",{params:{mediaID:n.data.mediaID}}).then(function(i){return r.read("bookmarking/readbookmark",{params:{mediaID:n.data.mediaID,asset:i}}).then(function(e){var t;return n.data.bookmarksListId=e._listId,t=(parseInt(n.data.location)||0)/i.getDurationSeconds(),t=Math.min(t,1),n.data.description=(Math.round(100*t)/100).toString(),e.getBookmarkId()?(n.data.bookmarkId=e.getBookmarkId(),n.data.mediahit&&"mediahit"===n.data.mediahit?r.create("bookmarking/addbookmark",{headers:{"Content-Type":"application/json"},data:n.data}):o.getInstance().update("bookmark",n)):o.getInstance().create("bookmark",n)})})):("account/favourites"===e&&(n.data=n.params,n.headers=o.getInstance().getHeaders()),r._proxy("create",e,n))},read:function(e,t){return t=t||{},"parentalcontrol/validatepin"===e||"parentalpin"===e?(t=r.extend(t,{headers:{"Content-Type":"application/json"},data:{mpx_token:l.getInstance().mpxToken,deviceId:a.getCurrentApplication().getDevice().getUdid(),pin:t.data.pin}}),this._proxy("create",e,t)):("account/favourites"!==e&&"bookmarking/readbookmark"!==e||(t.data=t.params,t.headers=o.getInstance().getHeaders()),"userprofile/userprofile"===e?o.getInstance().read("userprofile",t):this._proxy("read",e,t))},destroy:function(e,t){return t=t||{},"account/favourites"===e&&(t.data=t.params,t.headers=o.getInstance().getHeaders()),this._proxy("destroy",e,t)}});return e=new t(this.getApiConfig()),n.all([this._prepareChannelManager(e)]).then(function(){return e})}}}),define("smart-ott-appcore-api-rte-fincons/apis/login",["rofl/datasources/api","rofl/lib/utils","smart-ott/config"],function(e,i,n){"use strict";var t,r=e.extend({init:function(){var e=n.getApi(),t={datasource:n.getNamespace()+"/datasources/fincons",modelPath:n.getNamespace()+"/apis/login/",withCredentials:!1,endpoint:{url:i.getNested(e,"fincons","base_url_login")}};this._super(t)}});return{getInstance:function(){return t||(t=new r),t}}}),define("smart-ott-appcore-api-rte-fincons/apis/servicelayer",["rofl/datasources/api","rofl/lib/utils","smart-ott/config"],function(e,n,r){"use strict";var t,i=e.extend({init:function(){var e=r.getApi(),t=n.getNested(e,"fincons","base_url_sl"),i={datasource:r.getNamespace()+"/datasources/fincons",modelPath:r.getNamespace()+"/apis/servicelayer/",withCredentials:!1,endpoint:{url:t}};this._super(i),this._url=t},getEndpointUrl:function(){return this._url}});return{getInstance:function(){return t||(t=new i),t}}}),define("smart-ott-appcore-api-rte-fincons/apis/servicelayer/anonymouslogin",["rofl/models/api/abstract","smart-ott-appcore-api-rte-fincons/config","rofl/lib/utils","smart-ott-appcore-api-rte-fincons/managers/authentication"],function(e,t,i,n){"use strict";return e.extend({init:function(){},resolveEndpoint:function(e){var t=i.getNested(e,"isocode");return"ctv/anonymouslogin"+(t?"?isocode="+t:"")},validateReadResponse:function(e){return i.getNested(e,"status")===t.getLoginStatus().OK},transformFromRead:function(e){var t=n.getInstance();return t.mpxToken=i.getNested(e,"mpx_token"),t.zones=i.getNested(e,"zones"),t.geoTagsZones=i.getNested(e,"geoTagsZones"),t}})}),define("smart-ott-appcore-api-rte-fincons/apis/servicelayer/autologin",["antie/runtimecontext","rofl/models/api/abstract","smart-ott-appcore-api-rte-fincons/config","rofl/lib/utils","rofl/lib/promise"],function(i,e,t,n,r){"use strict";return e.extend({init:function(){},resolveEndpoint:function(e){var t=n.getNested(e,"isocode");return"idm/account/ctv/autologin"+(t?"?isocode="+t:"")},validateReadResponse:function(e){return n.getNested(e,"status")===t.getLoginStatus().OK},transformToCreate:function(e){var t=i.getDevice();return r.resolve({deviceId:t.getUdid(),mpx_token:e.mpxToken})},transformFromCreate:function(e){return!(!e||0!==n.getNested(e,"status"))&&{mpxToken:e.mpx_token,zones:e.zones,geoTagsZones:e.geoTagsZones}}})}),define("smart-ott-appcore-api-rte-fincons/apis/servicelayer/connectcode",["rofl/models/api/abstract","rofl/lib/utils","smart-ott-appcore-api-rte-fincons/config","antie/runtimecontext","rofl/lib/promise","smart-ott-appcore-api-rte-fincons/managers/authentication"],function(e,i,t,n,r,s){"use strict";return e.extend({init:function(){},resolveEndpoint:function(e){var t=i.getNested(e,"isocode");return"idm/account/ctv/login"+(t?"?isocode="+t:"")},transformToCreate:function(){var e=n.getDevice();return r.resolve({deviceId:e.getUdid()})},validateCreateResponse:function(e){return i.getNested(e,"status")===t.getLoginStatus().OK},transformFromCreate:function(e){var t=s.getInstance();return e.associationCode&&(t.connectcode=e.associationCode),t.connectcode}})}),define("smart-ott-appcore-api-rte-fincons/apis/servicelayer/connectcodelogin",["antie/runtimecontext","rofl/models/api/abstract","smart-ott-appcore-api-rte-fincons/config","rofl/lib/utils","rofl/lib/promise","smart-ott-appcore-api-rte-fincons/managers/authentication","smart-ott-appcore-api-rte-fincons/models/session"],function(t,e,i,n,r,s,o){"use strict";return e.extend({init:function(){},resolveEndpoint:function(e){var t=n.getNested(e,"isocode");return"idm/account/ctv/login"+(t?"?isocode="+t:"")},validateCreateResponse:function(e){return n.getNested(e,"status")===i.getLoginStatus().OK},transformToCreate:function(){var e=t.getDevice();return r.resolve({deviceId:e.getUdid()})},transformFromCreate:function(e){var t=s.getInstance();return n.getNested(e,"associationCode")||!1===n.getNested(e,"activated")?(t.connectcode=n.getNested(e,"associationCode"),{code:t.connectcode,activated:!1}):(t.mpxToken=e.mpx_token,t.zones=e.zones,t.geoTagsZones=e.geoTagsZones,new o(e))}})}),define("smart-ott-appcore-api-rte-fincons/apis/servicelayer/logout",["antie/runtimecontext","rofl/models/api/abstract","smart-ott-appcore-api-rte-fincons/config","rofl/lib/utils","rofl/lib/promise"],function(i,e,t,n,r){"use strict";return e.extend({resolveEndpoint:function(){return"idm/account/ctv/logout"},validateCreateResponse:function(e){return n.getNested(e,"status")===t.getLoginStatus().OK},transformToCreate:function(e){var t=i.getDevice();return r.resolve({deviceId:t.getUdid(),mpx_token:e.mpxToken})},transformFromCreate:function(e){return!!e}})}),define("smart-ott-appcore-api-rte-fincons/apis/userprofile",["rofl/datasources/api","rofl/lib/utils","smart-ott/config","rofl/lib/base64","smart-ott-appcore-api-rte-fincons/managers/authentication","smart-ott-appcore-api-rte-fincons/managers/api"],function(e,n,r,s,o,a){"use strict";var t,i;return i=e.extend({init:function(){var e=r.getApi(),t=n.getNested(e,"fincons","mpx_config","account_id"),i={datasource:r.getNamespace()+"/datasources/fincons",modelPath:r.getNamespace()+"/apis/userprofile/",withCredentials:!1,headers:{"Content-Type":"application/json",Authorization:"Basic "+s.encode(t+":"+o.getInstance().mpxToken)},endpoint:{url:a.getUserListsUrl()}};this._super(i),this._url=i.endpoint.url,this._config=i,this._accountId=t},getHeaders:function(){return{"Content-Type":"application/json",Authorization:"Basic "+s.encode(this._accountId+":"+o.getInstance().mpxToken)}},getEndpointUrl:function(){return this._url},getApiConfig:function(){return this._config}}),{getInstance:function(){return t||(t=new i),t}}}),define("smart-ott-appcore-api-rte-fincons/apis/userprofile/bookmark",["smart-ott-models/bookmarking/readbookmark","rofl/lib/promise"],function(e,t){"use strict";return e.extend({resolveEndpoint:function(e){return"UserListItem?schema=1.0&form=json"},transformToCreate:function(e){return t.resolve({$xmlns:{pluserlistitem:"http://xml.theplatform.com/userprofile/data/UserListItem"},title:"user_bookmarking_item",description:e.description,pluserlistitem$userListId:"https://data.userprofile.community.theplatform.eu/userprofile/data/UserList/"+e.bookmarksListId,pluserlistitem$aboutId:e.mediaID})},transformToUpdate:function(e){return t.resolve({$xmlns:{pluserlistitem:"http://xml.theplatform.com/userprofile/data/UserListItem"},id:e.bookmarkId,title:"user_bookmarking_item",description:e.description,pluserlistitem$userListId:"https://data.userprofile.community.theplatform.eu/userprofile/data/UserList/"+e.bookmarksListId,pluserlistitem$aboutId:e.mediaID})}})}),define("smart-ott-appcore-api-rte-fincons/apis/userprofile/userlists",["rofl/models/api/abstract","rofl/lib/utils"],function(e,t){"use strict";return e.extend({init:function(){this._lists=[]},getBookmarksListId:function(){var e=t.filter(this._lists,function(e){return"user_bookmarkings"===e.title});return t.isEmpty(e)?null:e[0].id||null},getFavouritesListId:function(){var e=t.filter(this._lists,function(e){return"user_favourites"===e.title});return t.isEmpty(e)?null:e[0].id||null},resolveEndpoint:function(){return t.addToQueryStringOfURL("UserList",{schema:"1.0",form:"json",fields:"id,title"})},validateReadResponse:function(e){return e=e||{},!!t.getNested(e,"entries")},transformFromRead:function(e){return t.map(e.entries,function(e){var t=/\/(\d.*)$/.exec(e.id)[1];this._lists.push({id:t,title:e.title})},this),this}})}),define("smart-ott-appcore-api-rte-fincons/apis/userprofile/userprofile",["rofl/models/api/abstract","rofl/lib/utils"],function(e,t){"use strict";return e.extend({resolveEndpoint:function(){return"UserProfile?schema=2.15.0&form=json"},transformFromRead:function(e){return(t.getNested(e,"entries")[0]||{}).pluserprofile$privateDataMap||{}}})}),define("smart-ott-appcore-api-rte-fincons/apis/userprofile/watchlistbase",["smart-ott-models/account/watchlist","rofl/lib/utils"],function(e,t){"use strict";return e.extend({resolveEndpoint:function(e){return e=e||{},t.addToQueryStringOfURL("UserList/"+(e.id||""),{schema:"1.0",form:"json"})},validateReadResponse:function(e){return e=e||{},"user_bookmarkings"===t.getNested(e,"title")}})}),define("smart-ott-appcore-api-rte-fincons/config",["antie/runtimecontext","smart-ott/config","rofl/lib/utils","application/managers/session"],function(e,t,a,l){"use strict";var i={SERIE:{type:"series",id:1},MOVIE:{type:"movie",id:2},CLIP:{type:"clip",id:3},EPISODE:{type:"episode",id:4},EXTRA:{type:"extra",id:5},GENRE:{types:["other","subCategory"]},SUBCATEGORY:{type:"subCategory"}},n={listing:{startTime:"pllisting$startTime",endTime:"pllisting$endTime",stationId:"pllisting$stationId",mediaPid:"rtelisting$mediaPid"},station:{id:"id",guid:"guid",callSign:"plstation$callSign",isVirtual:"plstation$isVirtual",thumbnails:"plstation$thumbnails",thumbnailsUrl:"plstation$url",thumbnailsTitleCardUrl:"title card",title:"description"},program:{id:"pl$id",guid:"pl$guid",title:"plprogram$secondaryTitle",type:"plprogram$programType",thumbnails:"plprogram$thumbnails",published:"plprogram$pubDate",thumbnailsUrl:"plprogram$url",thumbnailsTitleCardUrl:"title card",programType:"plprogram$programType"},virtual:{id:"id",programId:"programId",title:"programTitle",thumbnails:"programThumbnails",thumbnailsUrl:"url",startTime:"startTime",endTime:"endTime",episodeNumber:"programTvSeasonEpisodeNumber",programRatings:"programRatings",mediaPid:"rtelisting$mediaPid",stationId:"stationId",channelInfo:"channelInfo"},id:"pl$id",guid:"pl$guid",title:"pl$title",listings:"plchannelschedule$listings",listingProgram:"pllisting$program",virtualCurrentListing:"currentListing",virtualNextListing:"nextListing",maxListings:"10"},r={Episodes:"tvSeasonEpisodeNumber|asc"},s={api:{adapter:"application/managers/event/adapter/api",options:{}}},o={OK:0,CODE_EXPIRED:7401},c=function(e,t,i){this.template=t||"",this.mainsection="DETAIL",this.parentalrating="MA",this.length=i||10,this.platform="bigscreen",this.uxplatform="CTV",this.contentType="VIDEO_CONTENT",this.location="IE",this.contentId=e||""},u=t.getFeature("ads")&&t.getFeature("ads").google||{},d="/3014/RTE.ie_Shortform_Desktop/Registered",h="/3014/RTE.ie_Shortform_Desktop/Not_Registered",g="{platform}",p="{type}",f=e.getDevice().getOperatingSystem().toLowerCase(),_=e.getDevice().getBrand().toLowerCase();return{getMediaTypes:function(){return i},getRecommendedParams:function(e,t,i){return new c(e,t,i)},getScheduleApiMappings:function(){return n},getSorts:function(){return r},getDataChunkTimeSpan:function(){return 86400},getTrackingConfigurations:function(){return s},getDefaultAssetSize:function(){return Math.round(480*(e.getCurrentApplication().getLayout().modifier||1))},getLoginStatus:function(){return o},getIUDFP:function(e){var t,i,n,r,s,o=u.ad_unit;return o&&(t=o.platform,i=o.type,n=l.isLoggedIn()?o.logged:o.not_logged,r=-1<f.indexOf("vewd")?["vewd"]:a.filter(Object.keys(t),function(e){return-1!==_.indexOf(e.toLowerCase())}),s=e?i.liveChannels:i.VOD,n=1===r.length?(r=t[r[0]],(n=n.replace(g,r)).replace(p,s)):l.isLoggedIn()?d:h),n}}}),define("smart-ott-appcore-api-rte-fincons/datasources/adapter/rest",["rofl/datasources/adapter/rest","rofl/lib/promise","rofl/lib/utils","smart-ott-appcore-api-rte-fincons/managers/authentication","antie/application","rofl/logger","smart-ott-appcore-api-rte-fincons/managers/api"],function(e,t,a,i,n,l,c){"use strict";var u=n.getCurrentApplication().getDevice(),r="GET",s="POST";return e.extend({call:function(s,o,e){return t(function(n,r){u.loadURL(s,a.extend({method:o,withCredentials:!1,onLoad:function(e){n(e)},onError:function(e,t){var i=e;a.isObject(i)&&(i=u.encodeJson(i)),s.match("ctv/pinCheck")&&n(e),-1!==s.indexOf(c.getMediaFeedUrl())?r({responseData:e,httpStatus:t,errorMsg:i,url:s}):(l.onApiError(s,o,t,i),r(e))}},e||{}))})},read:function(e,t){return e.match("getRecommendations")?this.call(e,s,a.extend(t,{headers:{"Content-Type":"application/json"},data:{mpx_token:i.getInstance().mpxToken}})):this.call(e,r,t)}})}),define("smart-ott-appcore-api-rte-fincons/datasources/fincons",["rofl/datasources/abstract","smart-ott-appcore-api-rte-fincons/datasources/adapter/rest","rofl/models/api/abstract","rofl/lib/promise","rofl/lib/utils"],function(e,t,r,s,o){"use strict";return e.extend({init:function(e){this.setModelPath(e.modelPath),this.setApiEndpoint(e.endpoint.url),this.setAdapter(new t)},fetchModel:function(i){var n=this;return i instanceof r?s.resolve(i):new s(function(t,e){require([n._modelPath+i],function(e){if(o.isFunction(e.prototype.customPrepare))return(new e).customPrepare().then(function(e){t(e)});t(new e)},e)})}})}),define("smart-ott-appcore-api-rte-fincons/managers/analytics/atinternet/smarttag",[],function(){"use strict";(function(){var e,a={site:592983,log:"",logSSL:"",domain:"",collectDomain:"logw309.ati-host.net",collectDomainSSL:"logws1309.ati-host.net",secure:!0,pixelPath:"/hit.xiti",disableCookie:!1,cookieSecure:!0,cookieDomain:".rte.ie",preview:!1,plgs:["Campaigns","Clicks","ClientSideUserId","ContextVariables","IdentifiedVisitor","InternalSearch","MvTesting","Offline","OnSiteAds","Page","RichMedia"],lazyLoadingPath:"",documentLevel:"document",redirect:!1,activateCallbacks:!0,medium:"",ignoreEmptyChapterValue:!0,base64Storage:!1};(e=window).ATInternet=e.ATInternet||{},e.ATInternet.Tracker=e.ATInternet.Tracker||{},e.ATInternet.Tracker.Plugins=e.ATInternet.Tracker.Plugins||{};window.ATInternet.Utils=new function(){function i(e){return null===e?"":(e+"").replace(t,"")}var c=this,n=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g,t=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g");c.Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,i,n,r,s,o,a="",l=0;for(e=c.Base64._utf8_encode(e);l<e.length;)r=(t=e.charCodeAt(l++))>>2,t=(3&t)<<4|(i=e.charCodeAt(l++))>>4,s=(15&i)<<2|(n=e.charCodeAt(l++))>>6,o=63&n,isNaN(i)?s=o=64:isNaN(n)&&(o=64),a=a+this._keyStr.charAt(r)+this._keyStr.charAt(t)+this._keyStr.charAt(s)+this._keyStr.charAt(o);return a},decode:function(e){var t,i,n,r,s,o="",a=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");a<e.length;)t=(t=this._keyStr.indexOf(e.charAt(a++)))<<2|(i=this._keyStr.indexOf(e.charAt(a++)))>>4,i=(15&i)<<4|(r=this._keyStr.indexOf(e.charAt(a++)))>>2,n=(3&r)<<6|(s=this._keyStr.indexOf(e.charAt(a++))),o+=String.fromCharCode(t),64!=r&&(o+=String.fromCharCode(i)),64!=s&&(o+=String.fromCharCode(n));return c.Base64._utf8_decode(o)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):(127<n&&n<2048?t+=String.fromCharCode(n>>6|192):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128)),t+=String.fromCharCode(63&n|128))}return t},_utf8_decode:function(e){for(var t,i,n,r="",s=0;s<e.length;)(t=e.charCodeAt(s))<128?(r+=String.fromCharCode(t),s++):191<t&&t<224?(i=e.charCodeAt(s+1),r+=String.fromCharCode((31&t)<<6|63&i),s+=2):(i=e.charCodeAt(s+1),n=e.charCodeAt(s+2),r+=String.fromCharCode((15&t)<<12|(63&i)<<6|63&n),s+=3);return r}},c.loadScript=function(e,n){var r;n=n||function(){},(r=document.createElement("script")).type="text/javascript",r.src=e.url,r.async=!1,r.defer=!1,r.onload=r.onreadystatechange=function(e){("load"===(e=e||window.event).type||/loaded|complete/.test(r.readyState)&&(!document.documentMode||document.documentMode<9))&&(r.onload=r.onreadystatechange=r.onerror=null,n(null,e))},r.onerror=function(e,t,i){r.onload=r.onreadystatechange=r.onerror=null,n({msg:"script not loaded",event:e})};var t=document.head||document.getElementsByTagName("head")[0];t.insertBefore(r,t.lastChild)},c.cloneSimpleObject=function e(t,i){if("object"!=typeof t||null===t||t instanceof Date)return t;var n,r=new t.constructor;for(n in t)t.hasOwnProperty(n)&&(void 0===n||i&&void 0===t[n]||(r[n]=e(t[n])));return r},c.jsonSerialize=function(e){try{return"undefined"!=typeof JSON&&JSON.stringify?JSON.stringify(e):function e(t){var i=typeof t;if("object"!==i||null===t)return"string"===i&&(t='"'+t+'"'),String(t);var n,r,s=[],o=t&&t.constructor===Array;for(n in t)t.hasOwnProperty(n)&&"function"!=(i=typeof(r=t[n]))&&"undefined"!==i&&("string"===i?r='"'+r.replace(/[^\\]"/g,'\\"')+'"':"object"===i&&null!==r&&(r=e(r)),s.push((o?"":'"'+n+'":')+String(r)));return(o?"[":"{")+String(s)+(o?"]":"}")}(e)}catch(e){return null}},c.jsonParse=function(e){try{return"undefined"!=typeof JSON&&JSON.parse?JSON.parse(e+""):(s=null,(t=i((t=e)+""))&&!i(t.replace(n,function(e,t,i,n){return r&&t&&(s=0),0===s?e:(r=i||t,s+=!n-!i,"")}))?Function("return "+t)():null)}catch(e){return null}var t,r,s},c.arrayIndexOf=function(e,t){return Array.indexOf?e.indexOf(t):function(e){if(null==this)throw new TypeError;var t=Object(this),i=t.length>>>0;if(0===i)return-1;var n=0;if(1<arguments.length&&((n=Number(arguments[1]))!=n?n=0:0!=n&&1/0!=n&&-1/0!=n&&(n=(0<n||-1)*Math.floor(Math.abs(n)))),i<=n)return-1;for(n=0<=n?n:Math.max(i-Math.abs(n),0);n<i;n++)if(n in t&&t[n]===e)return n;return-1}.apply(e,[t])},c.uuid=function(){return{v4:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},num:function(e){var t,i=new Date,n=function(e){return(e-=100*Math.floor(e/100))<10?"0"+e:String(e)};return n(i.getHours())+""+n(i.getMinutes())+n(i.getSeconds())+(t=e-6,Math.floor((9*Math.random()+1)*Math.pow(10,t-1)))}}},c.getObjectKeys=function(e){var t,i=[];for(t in e)e.hasOwnProperty(t)&&i.push(t);return i},c.completeFstLevelObj=function(e,t,i){if(e){if(t)for(var n in t)!t.hasOwnProperty(n)||e[n]&&!i||(e[n]=t[n])}else e=t;return e},c.isPreview=function(){return window.navigator&&"preview"===window.navigator.loadPurpose},c.isPrerender=function(t){var i,e=!1,n=["webkit","ms"];if("prerender"===document.visibilityState)i="visibilitychange";else for(var r=0;r<n.length;r++)"prerender"===document[n[r]+"VisibilityState"]&&(i=n[r]+"visibilitychange");if(void 0!==i){var s=function(e){t(e),c.removeEvtListener(document,i,s)};c.addEvtListener(document,i,s),e=!0}return e};var r=c.addEvtListener=function(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&e.attachEvent("on"+t,i)},s=c.removeEvtListener=function(e,t,i){e.removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent&&e.detachEvent("on"+t,i)};c.hashcode=function(e){var t=0;if(0===e.length)return t;for(var i=0;i<e.length;i++)t=0|(t=(t<<5)-t+e.charCodeAt(i));return t},c.setLocation=function(e){var t=e.location;e=window[e.target]||window,t&&(e.location.href=t)},c.dispatchCallbackEvent=function(e){var t;if("function"==typeof window.Event)t=new Event("ATCallbackEvent");else try{(t=document.createEvent("Event")).initEvent&&t.initEvent("ATCallbackEvent",!0,!0)}catch(e){}t&&"function"==typeof document.dispatchEvent&&(t.name=e,document.dispatchEvent(t))},c.addCallbackEvent=function(e){r(document,"ATCallbackEvent",e)},function(){function e(e,t){var i;t=t||{bubbles:!1,cancelable:!1,detail:void 0};try{(i=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail)}catch(e){}return i}if("function"==typeof window.CustomEvent)return window.ATCustomEvent=window.CustomEvent;e.prototype=window.Event.prototype,window.ATCustomEvent=e}(),c.addOptOutEvent=function(e,t){c.ATOptOutEvent=new ATCustomEvent("ATOptOutEvent",{detail:{name:"clientsideuserid",id:t}}),r(document,"ATOptOutEvent",e)},c.removeOptOutEvent=function(e){s(document,"ATOptOutEvent",e)},c.dispatchOptOutEvent=function(e){c.optedOut=e,c.ATOptOutEvent=c.ATOptOutEvent||new ATCustomEvent("ATOptOutEvent",{detail:{name:"clientsideuserid",id:-1}});try{document.dispatchEvent(c.ATOptOutEvent)}catch(e){}},c.userOptedOut=function(){c.dispatchOptOutEvent(!0)},c.userOptedIn=function(){c.dispatchOptOutEvent(!1)},c.isOptedOut=function(){var e;return null===c.optedOut&&(e=!(!(e=(e=/(?:^| )atoptedout=([^;]+)/.exec(document.cookie)||null)?decodeURIComponent(e[1]):null)||!(e=c.jsonParse(e)||c.jsonParse(c.Base64.decode(e)))||!e.val),c.optedOut=e),!!c.optedOut},c.optedOut=null,c.ATOptOutEvent=null};var l=function(l){var r=this,d=function(e,t,i){return{param:e="&"+e+"=",paramSize:e.length,str:t,strSize:t.length,truncate:i}},h=function(e,t){var i,n="",r=0,s=!0;for(i in e)if(e.hasOwnProperty(i)){var o=e[i];if(o){s=!1;var a=t-r;if(!(o.strSize+o.paramSize<a)){o.truncate?(n+=o.param+o.str.substr(0,a),e[i].str=o.str.substr(a,o.strSize-1),e[i].strSize=e[i].str.length):o.strSize+o.paramSize>t&&(l.emit("Tracker:Hit:Build:Error",{lvl:"ERROR",msg:'Too long parameter "'+o.param+'"',details:{value:o.str}}),e[i].str=e[i].str.substr(0,t-o.paramSize-1),e[i].strSize=e[i].str.length);break}n+=o.param+o.str,r+=o.strSize+o.paramSize,s=!(e[i]=void 0)}else s=!0}return[n,s?null:e]},g=["ati","atc","pdtl","stc","dz"],i=function(t,i,s){!function(e){var t=l.getConfig("secure"),i="https:"===document.location.protocol,n=t||i,r=(i="",i=n?l.getConfig("logSSL"):l.getConfig("log"),l.getConfig("domain"));i=i&&r?i+"."+r:n?l.getConfig("collectDomainSSL"):l.getConfig("collectDomain"),n=l.getConfig("baseURL");(r=l.getConfig("pixelPath"))&&"/"!==r.charAt(0)&&(r="/"+r);var s=l.getConfig("site");(n||i&&r)&&s?e&&e(null,(n||(t?"https://":"//")+i+r)+"?s="+s):e&&e({message:"Config error"})}(function(e,r){e?s&&s(e):function(e,t,i){var n,r=function(e){if(e==={})return"";var t,i,n,r,s=[],o=0,a=!(t={}),l=void 0;for(r in e)if(e.hasOwnProperty(r)){var c=e[r].value;"function"==typeof c&&(c=c()),c=c instanceof Array?c.join(e[r].options.separator||","):"object"==typeof c?window.ATInternet.Utils.jsonSerialize(c):void 0===c?"undefined":c.toString(),e[r].options.encode&&(c=encodeURIComponent(c));var u=d(r,c,-1<window.ATInternet.Utils.arrayIndexOf(g,r));if(o+=u.paramSize+u.strSize,e[r].options.last)1490<c.length&&c.substr(0,1490),i=r,n=u;else if(t[r]=u,1500<t[r].paramSize+t[r].strSize&&!t[r].truncate){a=!0,l=r;break}}if(i&&(t[i]=n),e=(t=[t,o,a,l])[0],t[2])(e=e[t=t[3]]).str=e.str.substr(0,1450),e.strSize=1450,(o={}).mherr=d("mherr","1",!1),o[t]=e,s.push(h(o,1500)[0]);else if(null===(t=h(e,1500))[1])s=t[0];else for(s.push(t[0]);null!==t[1];)t=h(e,1500),s.push(t[0]);return s},s="";if(l.buffer.presentInFilters(t,"hitType")||(t=l.buffer.addInFilters(t,"hitType",["page"])),t=l.buffer.addInFilters(t,"hitType",["all"]),e){for(n in t=l.buffer.addInFilters(t,"permanent",!0),t=l.buffer.get(t,!0),e)e.hasOwnProperty(n)&&(t[n]={value:e[n],options:{}});s=r(t)}else for(n in s=r(t=l.buffer.get(t,!0)),t)t.hasOwnProperty(n)&&!t[n].options.permanent&&l.buffer.del(n);i&&i(s)}(t,i,function(e){var t=[],i=ATInternet.Utils.uuid().num(13);if(e instanceof Array)if(1===e.length)t.push(r+"&mh=1-2-"+i+e[0]);else for(var n=1;n<=e.length;n++)t.push(r+"&mh="+n+"-"+e.length+"-"+i+e[n-1]);else t.push(r+e);s&&s(null,t)})})};r.send=function(e,t,n){i(e,t,function(e,t){if(e)l.emit("Tracker:Hit:Build:Error",{lvl:"ERROR",msg:e.message,details:{hits:t}});else for(var i=0;i<t.length;i++)r.sendUrl(t[i],n)})},r.sendUrl=function(e,n){var t=function(t,i){return function(e){l.emit(t,{lvl:-1===t.indexOf("Error")?"INFO":"ERROR",details:{hit:i,event:e}}),n&&n()}},i=new Image;i.onload=t("Tracker:Hit:Sent:Ok",e),i.onerror=t("Tracker:Hit:Sent:Error",e),i.src=e}},c=function(){function o(e,t,i){for(var n=[],r=0;r<e.length;r++)e[r].callback(t,i),e[r].singleUse||n.push(e[r]);return n}var n={};this.on=function(e,t,i){return i=i||!1,function e(t,i,n,r){var s=t.shift();return"*"===s?(i["*"]=i["*"]||[],i["*"].push({callback:n,singleUse:r}),i["*"].length-1):0===t.length?e([s,"*"],i,n,r):(i["*"]=i["*"]||[],i[s]=i[s]||{},e(t,i[s],n,r))}(e.split(":"),n,t,i)},this.emit=function(e,t){n["*"]&&(n["*"]=o(n["*"],e,t)),function e(t,i,n,r){var s=i.shift();"*"!==s&&(0===i.length?e(t,[s,"*"],n,r):n[s]&&(n[s]["*"]=o(n[s]["*"],t,r),e(t,i,n[s],r)))}(e,e.split(":"),n,t)}},u=function(a){var l={},i={},n=0,c={},u=0,r=this.unload=function(e){return l[e]?(l[e]=void 0,a.emit("Tracker:Plugin:Unload:"+e+":Ok",{lvl:"INFO"})):a.emit("Tracker:Plugin:Unload:"+e+":Error",{lvl:"ERROR",msg:"not a known plugin"}),a},t=this.load=function(e,t){return"function"==typeof t?void 0===a.getConfig.plgAllowed||0===a.getConfig.plgAllowed.length||-1<a.getConfig.plgAllowed.indexOf(e)?(l[e]=new t(a),i[e]&&l[e]&&(i[e]=!1,n--,l[e+"_ll"]&&r(e+"_ll"),0===n&&a.emit("Tracker:Plugin:Lazyload:File:Complete",{lvl:"INFO",msg:"LazyLoading triggers are finished"})),a.emit("Tracker:Plugin:Load:"+e+":Ok",{lvl:"INFO"})):a.emit("Tracker:Plugin:Load:"+e+":Error",{lvl:"ERROR",msg:"Plugin not allowed",details:{}}):a.emit("Tracker:Plugin:Load:"+e+":Error",{lvl:"ERROR",msg:"not a function",details:{obj:t}}),a},d=this.isLazyloading=function(e){return e?!0===i[e]:0!==n},h=function(e){return!l[e]&&!d(e)&&!!l[e+"_ll"]},g=function(e){i[e]=!0,n++,ATInternet.Utils.loadScript({url:a.getConfig("lazyLoadingPath")+e+".js"})};this.isExecWaitingLazyloading=function(){return 0!==u},a.exec=this.exec=function(e,t,i,n){var r=null,s=function(e,t,i,n){t=t.split("."),l[e]&&l[e][t[0]]&&(r=1<t.length&&l[e][t[0]][t[1]]?l[e][t[0]][t[1]].apply(l[e],i):l[e][t[0]].apply(l[e],i)),n&&n(r)},o=function(t,e,i,n){var r;c[r=t]?c[r]++:c[r]=1,u++,a.onTrigger("Tracker:Plugin:Load:"+t+":Ok",function(){s(t,e,i,function(e){c[t]--,0===--u&&a.emit("Tracker:Plugin:Lazyload:Exec:Complete",{lvl:"INFO",msg:"All exec waiting for lazyloading are done"}),n&&n(e)})},!0)};h(e)?(o(e,t,i,n),g(e)):d(e)?o(e,t,i,n):s(e,t,i,n)},this.waitForDependencies=function(e,r){var t,s=function(e){for(var t={mcount:0,plugins:{}},i=0;i<e.length;i++)l.hasOwnProperty(e[i])||(t.mcount++,t.plugins[e[i]]=!0);return t}(e);if(0===s.mcount)a.emit("Tracker:Plugin:Dependencies:Loaded",{lvl:"INFO",details:{dependencies:e}}),r();else for(var i in s.plugins)s.plugins.hasOwnProperty(i)&&(a.emit("Tracker:Plugin:Dependencies:Error",{lvl:"WARNING",msg:"Missing plugin "+i}),a.onTrigger("Tracker:Plugin:Load:"+i,function(e,t){var i=e.split(":"),n=i[3];"Ok"===i[4]&&(s.plugins[n]=!1,s.mcount--,0===s.mcount&&r())},!0),h(t=i)&&g(t))},this.init=function(){for(var e in ATInternet.Tracker.pluginProtos)ATInternet.Tracker.pluginProtos.hasOwnProperty(e)&&t(e,ATInternet.Tracker.pluginProtos[e])}},d=function(i){var r={},s=this.load=function(e,t){return"function"==typeof t?(new t(i),i.emit("Tracker:Callback:Load:"+e+":Ok",{lvl:"INFO",details:{obj:t}})):i.emit("Tracker:Callback:Load:"+e+":Error",{lvl:"ERROR",msg:"not a function",details:{obj:t}}),i};this.init=function(){if(i.getConfig("activateCallbacks")){var n=i.getConfig("callbacks");!function(){if(void 0!==n&&n.include instanceof Array)for(var e=0;e<n.include.length;e++)ATInternet.Callbacks&&ATInternet.Callbacks.hasOwnProperty(n.include[e])&&(r[n.include[e]]={function:ATInternet.Callbacks[n.include[e]]},ATInternet.Tracker.callbackProtos[n.include[e]]||(ATInternet.Tracker.callbackProtos[n.include[e]]=r[n.include[e]]));else for(e in ATInternet.Callbacks)ATInternet.Callbacks.hasOwnProperty(e)&&(r[e]={function:ATInternet.Callbacks[e]},ATInternet.Tracker.callbackProtos[e]||(ATInternet.Tracker.callbackProtos[e]=r[e]));if(void 0!==n&&n.exclude instanceof Array)for(e=0;e<n.exclude.length;e++)r[n.exclude[e]]&&(r[n.exclude[e]]=void 0);for(var t in r)r.hasOwnProperty(t)&&r[t]&&s(t,r[t].function)}(),ATInternet.Utils.addCallbackEvent(function(e){if(e.name){var t=!0;if(void 0!==n&&(n.include instanceof Array&&-1===ATInternet.Utils.arrayIndexOf(n.include,e.name)&&(t=!1),n.exclude instanceof Array&&-1!==ATInternet.Utils.arrayIndexOf(n.exclude,e.name)&&(t=!1)),ATInternet.Callbacks&&ATInternet.Callbacks.hasOwnProperty(e.name)){var i={};i[e.name]={function:ATInternet.Callbacks[e.name]},t&&s(e.name,i[e.name].function),ATInternet.Tracker.callbackProtos[e.name]||(ATInternet.Tracker.callbackProtos[e.name]=i[e.name])}}})}}},h=function(e){var c={};this.set=function(e,t,i){(i=i||{}).hitType=i.hitType||["page"],c[e]={value:t,options:i}};var s=function(e,t,i){return(e=window.ATInternet.Utils.cloneSimpleObject(e[t]))&&!i?e.value:e};this.get=function(e,t){var i={};if("string"==typeof e)i=s(c,e,t);else for(var n=function e(t,i){if(!(t&&i instanceof Array&&t instanceof Array))return[];if(0===t.length)return i;var n,r=t[0],s=[],o=window.ATInternet.Utils.cloneSimpleObject(t);o.shift();for(var a=0;a<i.length;a++)if("object"!=typeof r[1])c[i[a]]&&c[i[a]].options[r[0]]===r[1]&&s.push(i[a]);else{n=r[1].length;for(var l=0;l<n;l++)if(c[i[a]]&&c[i[a]].options[r[0]]instanceof Array&&0<=window.ATInternet.Utils.arrayIndexOf(c[i[a]].options[r[0]],r[1][l])){s.push(i[a]);break}}return e(o,s)}(e,window.ATInternet.Utils.getObjectKeys(c)),r=0;r<n.length;r++)i[n[r]]=s(c,n[r],t);return i},this.presentInFilters=function e(t,i){return!(!t||0===t.length)&&(t[0][0]===i||e(t.slice(1),i))},this.addInFilters=function e(t,i,n,r){if(!t||0===t.length)return r?[]:[[i,n]];var s=t[0][0],o=t[0][1];return s===i&&(o instanceof Array&&!(-1<window.ATInternet.Utils.arrayIndexOf(o,n[0]))&&o.push(n[0]),r=!0),[[s,o]].concat(e(t.slice(1),i,n,r))},this.del=function(e){c[e]=void 0},this.clear=function(){c={}}};ATInternet.Tracker.Tag=function(e,t,i){t=t||{};var r=this;r.version="5.13.3";var n=window.ATInternet.Utils.cloneSimpleObject(t);r.triggers=new c(r),r.emit=r.triggers.emit,r.onTrigger=r.triggers.on;var s,o=window.ATInternet.Utils.cloneSimpleObject(a)||{};for(s in e)e.hasOwnProperty(s)&&(o[s]=e[s]);r.getConfig=function(e){return o[e]},r.setConfig=function(e,t,i){void 0!==o[e]&&i||(r.emit("Tracker:Config:Set:"+e,{lvl:"INFO",details:{bef:o[e],aft:t}}),o[e]=t)},r.configPlugin=function(e,t,i){for(var n in o[e]=o[e]||{},t)t.hasOwnProperty(n)&&void 0===o[e][n]&&(o[e][n]=t[n]);return i&&(i(o[e]),r.onTrigger("Tracker:Config:Set:"+e,function(e,t){i(t.details.aft)})),o[e]},r.getContext=function(e){return n[e]},r.setContext=function(e,t){r.emit("Tracker:Context:Set:"+e,{lvl:"INFO",details:{bef:n[e],aft:t}}),n[e]=t},r.delContext=function(e,t){if(r.emit("Tracker:Context:Deleted:"+e+":"+t,{lvl:"INFO",details:{key1:e,key2:t}}),e)n.hasOwnProperty(e)&&(t?n[e]&&n[e].hasOwnProperty(t)&&(n[e][t]=void 0):n[e]=void 0);else if(t)for(var i in n)n.hasOwnProperty(i)&&n[i]&&n[i].hasOwnProperty(t)&&(n[i][t]=void 0)},r.plugins=new u(r),r.buffer=new h(r),r.setParam=r.buffer.set,r.getParams=function(e){return r.buffer.get(e,!1)},r.getParam=r.buffer.get,r.delParam=r.buffer.del,r.builder=new l(r),r.sendHit=r.builder.send,r.sendUrl=r.builder.sendUrl,r.callbacks=new d(r),r.setParam("ts",function(){return(new Date).getTime()},{permanent:!0,hitType:["all"]}),r.getConfig("disableCookie")&&r.setParam("idclient","Consent-NO",{permanent:!0,hitType:["all"]}),r.getConfig("medium")&&r.setParam("medium",r.getConfig("medium"),{permanent:!0,hitType:["all"]}),r.plugins.init(),r.callbacks.init(),ATInternet.Tracker.instances.push(r),r.emit("Tracker:Ready",{lvl:"INFO",msg:"Tracker initialized",details:{tracker:r,args:{config:e,context:t,callback:i}}}),i&&i(r)},ATInternet.Tracker.instances=[],ATInternet.Tracker.pluginProtos={},ATInternet.Tracker.addPlugin=function(e,t){if(t=t||ATInternet.Tracker.Plugins[e],!ATInternet.Tracker.pluginProtos[e]){ATInternet.Tracker.pluginProtos[e]=t;for(var i=0;i<ATInternet.Tracker.instances.length;i++)ATInternet.Tracker.instances[i].plugins.load(e,t)}},ATInternet.Tracker.delPlugin=function(e){if(ATInternet.Tracker.pluginProtos[e]){ATInternet.Tracker.pluginProtos[e]=void 0;for(var t=0;t<ATInternet.Tracker.instances.length;t++)ATInternet.Tracker.instances[t].plugins.unload(e)}},ATInternet.Tracker.callbackProtos={}}).call(window),function(){var e={lifetime:30,lastPersistence:!0,listEventsForExec:[],domainAttribution:!0,info:!0},t=30,T=30;window.ATInternet.Tracker.Plugins.Campaigns=function(r){r.setConfig("visitLifetime",t,!0),r.setConfig("redirectionLifetime",T,!0);var s,o,a={};r.configPlugin("Campaigns",e,function(e){a=e});var l,c,u,d,h,g,p,f,_,m,v,C,A,i,n=function(e,t,i){var n=null;return r.plugins.exec(e,t,i,function(e){n=e}),n},E=function(e,t){return n("Cookies",e,t)},I=function(e,t){return n("Utils",e,t)},y=function(e,t){var i=E(o,[e]);return null!==i?"object"==typeof i&&!(i instanceof Array):(E(s,[e,{},t]),!0)},b=function(e,t){var i=r.getContext("campaigns")||{};i[e]=t,r.setContext("campaigns",i)},S=function(e){s="set"+(a.domainAttribution?"":"Private"),o="get"+(a.domainAttribution?"":"Private"),l=E(o,[["atredir","gopc"]]),c=E(o,[["atredir","gopc_err"]]),u=E(o,[["atredir","camp"]]),E("del",[["atredir","gopc"]]),E("del",[["atredir","gopc_err"]]),E("del",[["atredir","camp"]]),d=E(o,[["atsession","histo_camp"]]),h=E(o,[["atreman","camp"]]),g=E(o,[["atreman","date"]]);var t,i=I("getLocation",[]);if(p=I("getQueryStringValue",["xtor",i]),f=I("getQueryStringValue",["xtdt",i]),_=I("getQueryStringValue",["xts",i]),m=r.getContext("forcedCampaign"),v=!!r.getConfig("redirect"),(C=!!(p&&f&&_))&&(i=(new Date).getTime()/6e4,A=!v&&_!==r.getConfig("site")||i-f<0||i-f>=r.getConfig("visitLifetime")),i=m||u||p,v&&i&&y("atredir",{path:"/",end:r.getConfig("redirectionLifetime")})){E(s,[["atredir","camp"],i]);var n=i=!1;m||(u?(i=l,n=c):(C&&(i=!0),A&&(n=!0))),E(s,[["atredir","gopc"],i]),E(s,[["atredir","gopc_err"],n])}(!v&&h&&(b("xtor",h),i=(new Date).getTime()/36e5,i=Math.floor(i-g),b("roinbh",0<=i?i:0)),v||(i=void 0,i=u?l?m||i:m||u:C?m||i:m||p||i,d&&d instanceof Array&&-1<d.indexOf(i)&&(i=void 0),i&&b("xto",i)),v||m)||(u?c&&(t=u):A&&(t=p),t&&b("pgt",t));v||!(t=u?m||u:m||p||void 0)||!m&&!u&&C&&A||!m&&u&&l&&c||((!d||d instanceof Array&&d.indexOf(t)<0)&&y("atsession",{path:"/",session:60*r.getConfig("visitLifetime")})&&E(s,[["atsession","histo_camp"],d&&d.push(t)?d:[t]]),h&&!a.lastPersistence||!y("atreman",{path:"/",session:86400*a.lifetime})||(E(s,[["atreman","camp"],t]),E(s,[["atreman","date"],(new Date).getTime()/36e5]))),r.emit("Campaigns:"+e,{lvl:"INFO"})};i=["Cookies","Utils"],-1===ATInternet.Utils.arrayIndexOf(r.getConfig("plgs"),"BackwardCompat")?r.plugins.waitForDependencies(i,function(){S("process2:done")}):r.onTrigger("BackCampaigns:process2:done",function(e,t){r.plugins.waitForDependencies(i,function(){S("process1:done")})},!0)},window.ATInternet.Tracker.addPlugin("Campaigns")}.call(window),function(){window.ATInternet.Tracker.Plugins.Clicks=function(n){var r=function(e){var t="";switch(e){case"exit":t="S";break;case"download":t="T";break;case"action":t="A";break;case"navigation":t="N"}return t},s=function(e){var t=e.name;return n.exec("Utils","manageChapters",[e,"chapter",3],function(e){t=e+(t||"")}),t},o=function(e){var t={p:s(e),s2:e.level2||"",click:r(e.type)||""},i=n.getContext("page")||{};t.pclick=s(i),t.s2click=i.level2||"",e.customObject&&n.exec("Utils","customObjectToString",[e.customObject],function(e){t.stc=e}),n.sendHit(t,[["hitType",["click"]]],e.callback)};n.click={},n.clickListener=this.clickListener={},n.click.send=this.send=function(e){var t=!0;return n.plugins.exec("TechClicks","manageClick",[e.elem,e.event],function(e){t=e}),o(e),t},n.clickListener.send=this.clickListener.send=function(t){var i;t.elem&&(n.plugins.exec("TechClicks","isFormSubmit",[t.elem],function(e){i=e?"submit":"click"}),ATInternet.Utils.addEvtListener(t.elem,i,function(e){n.plugins.exec("TechClicks","manageClick",[t.elem,e]),o(t)}))},n.click.set=this.set=function(e){n.dispatchSubscribe("click"),n.setContext("click",{name:s(e),level2:e.level2||"",customObject:e.customObject}),n.setParam("click",r(e.type)||"",{hitType:["click"]})},n.click.onDispatch=this.onDispatch=function(e){var t={hitType:["click"]};n.setParam("p",n.getContext("click").name,t),n.setParam("s2",n.getContext("click").level2,t);var i=n.getContext("click").customObject;i&&n.setParam("stc",i,{hitType:["click"],encode:!0}),i=n.getContext("page")||{},n.setParam("pclick",s(i),t),n.setParam("s2click",i.level2||"",t),n.sendHit(null,[["hitType",["click"]]],e),n.setContext("click",void 0)}},window.ATInternet.Tracker.addPlugin("Clicks")}.call(window),function(){var e={clientSideMode:"required",userIdCookieDuration:"182",userIdExpirationMode:"fixed",optOut:"OPT-OUT",userIdCookieName:"atuserid",optOutCookieName:"atoptedout",info:!0};window.ATInternet.Tracker.Plugins.ClientSideUserId=function(a){var l={},c=void 0,u=null,t=-1,d=!1;a.configPlugin("ClientSideUserId",e,function(e){l=e});var h=function(e,t,i){a.setParam("idclient",e,{permanent:!0,hitType:["all"]}),function(e,t,i){if("relative"===l.userIdExpirationMode||"fixed"===l.userIdExpirationMode&&null===u||i){var n=new Date;n.setTime(n.getTime()+864e5*l.userIdCookieDuration),a.exec("Cookies","set",[e,t,{end:n,path:"/"}]),a.exec("Cookies","get",[e,!0],function(e){i||t===e||a.setParam("idclient",t+"-NO",{permanent:!0,hitType:["all"]})})}}(i,e,t)},i=function(){c=a.getContext("userIdentifier"),a.exec("Cookies","get",["atuserid"],function(e){u=e});var e,t,i,n,r=!1;if("required"===l.clientSideMode?(e=navigator.userAgent,(/Safari/.test(e)&&!/Chrome/.test(e)||/iPhone|iPod|iPad/.test(e))&&(r=!0)):"always"===l.clientSideMode&&(r=!0),e=r,r=void 0!==c,i=null,(t=!1)===(n=ATInternet.Utils.optedOut)&&(a.exec("Cookies","set",["atoptedout",null,{path:"/"}]),a.getParam("idclient")===l.optOut&&a.delParam("idclient")),a.exec("Cookies","get",["atoptedout",!0],function(e){i=e}),!0!==n&&i!==l.optOut||(t=!0),t&&(ATInternet.Utils.optedOut=!0),d=t,e||r||d){var s="";e=!1;var o=l.userIdCookieName;d?(s=l.optOut,e=!0,o=l.optOutCookieName):a.getConfig("disableCookie")?(s=a.getParam("idclient"),e=!0):r?(s=c,e=!0):s=null!==u?u:ATInternet.Utils.uuid().v4(),h(s,e,o)}a.emit("ClientSideUserId:Ready",{lvl:"INFO",details:{clientSideMode:l.clientSideMode,userIdCookieDuration:l.userIdCookieDuration,userIdExpirationMode:l.userIdExpirationMode,userIdFromContext:c,userIdFromCookie:u,userId:s}})},n=function(e){e&&(e=e.detail)&&"clientsideuserid"===e.name&&e.id===t&&i()};a.plugins.waitForDependencies(["Cookies"],function(){var e=ATInternet.Utils.uuid();t=parseInt(e.num(8)),ATInternet.Utils.removeOptOutEvent(n),ATInternet.Utils.addOptOutEvent(n,t),i()}),a.clientSideUserId={},a.clientSideUserId.set=function(e){var t=l.userIdCookieName;d&&(e=l.optOut,t=l.optOutCookieName),h(e,!0,t)}},window.ATInternet.Tracker.addPlugin("ClientSideUserId")}.call(window),function(){var e={domainAttribution:!0,info:!0},t=30;window.ATInternet.Tracker.Plugins.ContextVariables=function(o){var n,r="",s=null,a="",l="",c={};o.configPlugin("ContextVariables",e,function(e){c=e}),o.setConfig("redirectionLifetime",t,!0);var u=function(e,t){return i="Utils",n=e,r=t,s=null,o.plugins.exec(i,n,r,function(e){s=e}),s;var i,n,r,s},d=function(e,t){var i=null;return o.plugins.exec("Cookies",e,t,function(e){i=e}),i};o.plugins.waitForDependencies(["Cookies","Utils"],function(){a="set"+(c.domainAttribution?"":"Private"),l="get"+(c.domainAttribution?"":"Private");var e=u("getLocation",[]);if(void 0===(r=u("getQueryStringValue",["xtref",e]))&&(r=""),n=o.getContext("forcedReferer"),o.getConfig("redirect")){var t;e=u("getDocumentLevel",[]);if(t=e=n||(null!==r?r:e.referrer||"acc_dir")){t={path:"/",end:o.getConfig("redirectionLifetime")};var i=d(l,["atredir"]);t=null!==i?"object"==typeof i&&!(i instanceof Array):(d(a,["atredir",{},t]),!0)}t&&d(a,[["atredir","ref"],e])}else{s=d(l,[["atredir","ref"]]),d("del",[["atredir","ref"]]),o.setParam("vtag",o.version,{permanent:!0,hitType:["all"]}),o.setParam("ptag","js",{permanent:!0,hitType:["all"]}),e="";try{e+=window.screen.width+"x"+window.screen.height+"x"+window.screen.pixelDepth+"x"+window.screen.colorDepth}catch(e){}o.setParam("r",e,{permanent:!0,hitType:["all"]}),e="",window.innerWidth?e+=window.innerWidth+"x"+window.innerHeight:document.body&&document.body.offsetWidth&&(e+=document.body.offsetWidth+"x"+document.body.offsetHeight),o.setParam("re",e,{permanent:!0,hitType:["all"]}),o.setParam("hl",function(){var e=new Date;return e.getHours()+"x"+e.getMinutes()+"x"+e.getSeconds()},{permanent:!0,hitType:["all"]}),o.setParam("lng",navigator.language||navigator.userLanguage,{permanent:!0,hitType:["all"]}),e=ATInternet.Utils.uuid().num(13),o.setParam("idp",e,{permanent:!0,hitType:["page","clickzone"]}),o.setParam("jv",navigator.javaEnabled()?"1":"0",{hitType:["page"]}),e=u("getDocumentLevel",[]),o.setParam("ref",(n||("acc_dir"===r?"":null!==r?r:"acc_dir"===s?"":s||e.referrer)).replace(/[<>]/g,"").substring(0,1600).replace(/&/g,"$"),{permanent:!0,last:!0,hitType:["page"]})}o.emit("ContextVariables:Ready",{lvl:"INFO"})})},window.ATInternet.Tracker.addPlugin("ContextVariables")}.call(window),function(){window.ATInternet.Tracker.Plugins.Cookies=function(o){var s={},i=this.getCookie=function(e){return!o.getConfig("disableCookie")&&e&&"string"==typeof e&&(e=RegExp("(?:^| )"+e+"=([^;]+)").exec(document.cookie)||null)?(e=e[1],e=o.getConfig("base64Storage")?ATInternet.Utils.Base64.decode(e):decodeURIComponent(e)):null},n=this.setCookie=function(e,t,i){if(o.getConfig("disableCookie")||!e||"string"!=typeof e||"string"!=typeof t)return null;var n=o.getConfig("cookieDomain");if(t=(e+="=")+(t=o.getConfig("base64Storage")?ATInternet.Utils.Base64.encode(t):encodeURIComponent(t)),e=!1,i){e=i.secure;var r=i.end,s=i.domain;i=i.path,r&&("function"==typeof r.toGMTString?t+=";expires="+r.toGMTString():"number"==typeof r&&(t+=";max-age="+r.toString())),s?t+=";domain="+s:n&&(t+=";domain="+n),i&&"string"==typeof i&&(t+=";path="+i)}return n=o.getConfig("cookieSecure")||e,document.cookie=t+(n&&"boolean"==typeof n?";secure":""),!0},a=function(e){var t=null;return(e=i(e))&&(t=ATInternet.Utils.jsonParse(e)),t},l=function(e){return n(e.name,ATInternet.Utils.jsonSerialize(e),e.options)?e:null},r=function(e,t,i){var n=null;return!i&&s[e]?n=s[e]:(n=a(e))&&(n.options.session&&l(n),s[e]=n),n?t?(e=null,!n||"object"!=typeof n.val||n.val instanceof Array||void 0===n.val[t]||(e=n.val[t]),e):n.val:null},c=function(e,t,i,n){var r=null;return t?(r=a(e))&&((r=!(n=r)||"object"!=typeof n.val||n.val instanceof Array?null:(n.val[t]=i,n))&&(r=l(r))):(t=n=n||{},(n={}).name=e,n.val=i,t.session&&"number"==typeof t.session&&(t.end=t.session),n.options=t,r=l(n)),r&&(s[e]=r),r?r.val:null},t=function(e,t){t?c(e,t,void 0):(s[e]=void 0,n(e,"",{end:0}))};o.cookies={};var u=o.cookies.get=this.get=function(e,t){return t=t||!1,e instanceof Array&&2===e.length?r(e[0],e[1],t):r(e,void 0,t)};o.cookies.getPrivate=this.getPrivate=function(e,t){return t=t||!1,e instanceof Array?e[0]+=o.getConfig("site"):e+=o.getConfig("site"),u(e,t)};var d=o.cookies.set=this.set=function(e,t,i){return e instanceof Array?c(e[0],e[1],t):c(e,null,t,i)};o.cookies.setPrivate=this.setPrivate=function(e,t,i){return e instanceof Array?e[0]+=o.getConfig("site"):e+=o.getConfig("site"),d(e,t,i)};var h=o.cookies.del=this.del=function(e){return e instanceof Array?t(e[0],e[1]):t(e)};o.cookies.delPrivate=this.delPrivate=function(e){return e instanceof Array?e[0]+=o.getConfig("site"):e+=o.getConfig("site"),h(e)},o.cookies.cacheInvalidation=this.cacheInvalidation=function(){s={}}},window.ATInternet.Tracker.addPlugin("Cookies")}.call(window),function(){var e={lifetime:182,domainAttribution:!0,info:!0},v=30;window.ATInternet.Tracker.Plugins.IdentifiedVisitor=function(o){var n=null,r=null,s=null,t=null,a="",l="",c=null,u=null,d="",h="",i={};o.configPlugin("IdentifiedVisitor",e,function(e){i=e}),o.setConfig("redirectionLifetime",v,!0);var g=function(e,t){return i="Utils",n=e,r=t,s=null,o.plugins.exec(i,n,r,function(e){s=e}),s;var i,n,r,s},p=function(e,t){var i=null;return o.plugins.exec("Cookies",e,t,function(e){i=e}),i},f=function(e,t){var i=p(h,[e]);return null!==i?"object"==typeof i&&!(i instanceof Array):(p(d,[e,{},t]),!0)},_=function(e,t){f("atidvisitor",{path:"/",session:86400*i.lifetime})&&p(d,[["atidvisitor",e],t])},m=function(e,t){o.setParam(e,t,{hitType:["all"],permanent:!0}),_(e,t)};o.plugins.waitForDependencies(["Cookies","Utils"],function(){d="set"+(i.domainAttribution?"":"Private"),h="get"+(i.domainAttribution?"":"Private");var e=g("getLocation",[]);a=g("getQueryStringValue",["xtat",e]),l=g("getQueryStringValue",["xtan",e]),o.getConfig("redirect")?(a||l)&&f("atredir",{path:"/",end:o.getConfig("redirectionLifetime")})&&(l&&p(d,[["atredir","an"],l]),a&&p(d,[["atredir","at"],a])):(c=p(h,[["atredir","at"]]),u=p(h,[["atredir","an"]]),p("del",[["atredir","at"]]),p("del",[["atredir","an"]]),n=p(h,[["atidvisitor","at"]]),r=p(h,[["atidvisitor","an"]]),s=p(h,[["atidvisitor","ac"]]),t=p(h,[["atidvisitor","vrn"]]),function(){var e=function(e,t){/-/.test(t)?(e.category=t.split("-")[0],e.id=t.split("-")[1]):e.id=t},t={category:"",id:""};e(t,l||u);var i={category:"",id:""};e(i,a||c),i.id?(i.category&&m("ac",i.category),m("at",i.id)):n&&(o.setParam("at",n,{hitType:["all"],permanent:!0}),s&&o.setParam("ac",s,{hitType:["all"],permanent:!0})),t.id?(t.category&&m("ac",t.category),m("an",t.id)):r&&o.setParam("anc",s+"-"+r,{hitType:["all"],permanent:!0})}(),e="-"+o.getConfig("site")+"-",RegExp(e).test(t)||(_("vrn",t=(t||"")+e),(e=o.getContext("page")||{}).vrn=1,o.setContext("page",e))),o.emit("IdentifiedVisitor:Ready",{lvl:"INFO",details:{cookieRedirectTextual:c,cookieRedirectNumeric:u,cookieTextual:n,cookieNumeric:r,cookieCategory:s,cookieVrn:t}})}),o.identifiedVisitor={},o.identifiedVisitor.set=this.set=function(e){var t=e.id;e=e.category,"number"==typeof t?m("an",t.toString()):m("at",t),void 0!==e&&m("ac",e)},o.identifiedVisitor.unset=this.unset=function(){for(var e=["an","at","ac"],t=0;t<e.length;t++)o.exec("Cookies","set",[["atidvisitor",e[t]],void 0]),o.delParam(e[t]);o.delParam("anc")}},window.ATInternet.Tracker.addPlugin("IdentifiedVisitor")}.call(window),function(){var e={urlKeyword:"",urlResultPageNumber:"",urlResultPosition:"",info:!0};window.ATInternet.Tracker.Plugins.InternalSearch=function(r){var n={};r.configPlugin("InternalSearch",e,function(e){n=e});r.internalSearch={},r.internalSearch.set=this.set=function(e){var t={},i=t;e.hasOwnProperty("keyword")&&(i.keyword=e.keyword),i=t,e.hasOwnProperty("resultPageNumber")&&(i.resultPageNumber=e.resultPageNumber),e=r.getContext("InternalSearch")||{},void 0===(t=ATInternet.Utils.completeFstLevelObj(t,e)).resultPageNumber&&(t.resultPageNumber="1"),r.setContext("InternalSearch",t)},r.internalSearch.send=this.send=function(e){var t,i,n=!0;return r.plugins.exec("TechClicks","manageClick",[e.elem,e.event],function(e){n=e}),i={np:void 0!==(t=e).resultPageNumber?t.resultPageNumber:"1",click:"IS"},t.hasOwnProperty("keyword")&&(i.mc=t.keyword),t.hasOwnProperty("resultPosition")&&(i.mcrg=t.resultPosition),r.sendHit(i,[["hitType",["InternalSearch"]]],t.callback),n},r.plugins.waitForDependencies(["Utils"],function(){var t;if(n.urlKeyword){var i=document.location.href;t={},r.plugins.exec("Utils","getQueryStringValue",[n.urlKeyword,i],function(e){e&&(t.keyword=e),n.urlResultPageNumber&&r.plugins.exec("Utils","getQueryStringValue",[n.urlResultPageNumber,i],function(e){t.resultPageNumber=e||"1"})})}t&&r.setContext("InternalSearch",t),r.emit("InternalSearch:Ready",{lvl:"INFO",details:{config:{urlKeyword:n.urlKeyword,urlResultPageNumber:n.urlResultPageNumber},url:i,data:t}})})},window.ATInternet.Tracker.addPlugin("InternalSearch")}.call(window),function(){window.ATInternet.Tracker.Plugins.MvTesting=function(r){var i=0,n=function(e,t){var i="";return e.hasOwnProperty(t)&&(i=void 0===(i=e[t])?"":i+""),i},s=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},o=function(e){return"object"==typeof e&&!(e instanceof Array)};r.mvTesting={},r.mvTesting.set=function(e){if(o(e)&&!s(e)){r.dispatchSubscribe("mvTesting");var t=n(e,"test"),i=n(e,"waveId");e=n(e,"creation"),r.setParam("abmvc",t+"-"+i+"-"+e,{hitType:["mvtesting"]})}},r.mvTesting.add=function(e){if(o(e)&&!s(e)){r.dispatchSubscribe("mvTesting");var t=n(e,"variable");e=n(e,"version"),i++,r.setParam("abmv"+i,t+"-"+e,{hitType:["mvtesting"]})}},r.mvTesting.onDispatch=function(e){var t,i,n=r.getContext("page")||{};r.setParam("p",(i=(t=n).name,r.exec("Utils","manageChapters",[t,"chapter",3],function(e){i=e+(i||"")}),i),{hitType:["mvtesting"]}),r.setParam("s2",n.level2||"",{hitType:["mvtesting"]}),r.setParam("type","mvt",{hitType:["mvtesting"]}),r.sendHit(null,[["hitType",["mvtesting"]]],e)}},window.ATInternet.Tracker.addPlugin("MvTesting")}.call(window),function(){var e={storageCapacity:1,storageMode:"required",timeout:500,info:!0};window.ATInternet.Tracker.Plugins.Offline=function(s){var o={};s.configPlugin("Offline",e,function(e){o=e});var a=function(){var e=localStorage.getItem("ATOffline"),t={hits:[],length:0};if(e){var i=ATInternet.Utils.jsonParse(e)||{hits:[]};t.hits=i.hits,t.length=e.length}return t},l=function(e){try{localStorage.setItem("ATOffline",ATInternet.Utils.jsonSerialize(e))}catch(e){}},c=function(){return a().hits},u=function(e){if(e){e=e.split(/&ref=\.*/i);var t="&cn=offline&olt="+String(Math.floor((new Date).getTime()/1e3));e=e[0]+t+"&ref="+(e[1]||"")}return e},d=function(e){var t=a(),i=e.length,n=!0;if(4*((t.length||11)+i)>1048576*o.storageCapacity){n=!1;var r=t.hits.shift();if(void 0!==r){n=!0;for(var s=r.length;s<i;){if(void 0===(r=t.hits.shift())){n=!1;break}s+=r.length}}}n&&(t.hits.push(e),l({hits:t.hits}))},h=function(e,t){if(navigator.onLine){var i=c();if(0<i.length){var n=i.shift();l({hits:i}),s.onTrigger("Tracker:Hit:Sent:Ok",function(){h(e,t)},!0),s.onTrigger("Tracker:Hit:Sent:Error",function(){h(e,t)},!0),s.sendUrl(n)}else if(e){var r=null;s.plugins.exec("Utils","getQueryStringValue",["a",e],function(e){r=e}),r?setTimeout(function(){s.sendUrl(e,t)},o.timeout):s.sendUrl(e,t)}}else e&&(d(u(e)),t&&t())},i=function(i){s.builder.sendUrl=function(e,t){i||!navigator.onLine?(d(u(e)),t&&t()):h(e,t)}};s.offline={},s.offline.getLength=function(){return 4*a().length},s.offline.remove=function(){l({hits:[]})},s.offline.get=c,s.offline.send=function(){h(null,null)},s.plugins.waitForDependencies(["Utils"],function(){var t;try{var e=window.localStorage;e.setItem("__storage_test__","__storage_test__"),e.removeItem("__storage_test__"),t=!0}catch(e){t=!1}e=navigator.onLine,t&&void 0!==e&&("required"===o.storageMode?i(!1):"always"===o.storageMode&&i(!0)),s.emit("Offline:Ready",{lvl:"INFO",details:{isLocalStorageAvailable:t,storageMode:o.storageMode,isOnline:e}})})},window.ATInternet.Tracker.addPlugin("Offline")}.call(window),function(){window.ATInternet.Tracker.Plugins.OnSiteAds=function(s){var e="",o=function(e){var t=e.name;return s.exec("Utils","manageChapters",[e,"chapter",3],function(e){t=e+(t||"")}),t},a=function(e,t){return e[t]?e[t]:""},l=function(e,t){if(n=a(e,t)){var i=a(e,"prefix");if(n.campaignId){i=i||"PUB";var n,r=a(n,"campaignId"),s=a(n,"creation");return i+"-"+r+"-"+s+"-"+a(n,"variant")+"-"+a(n,"format")+"-"+a(n,"generalPlacement")+"-"+a(n,"detailedPlacement")+"-"+a(n,"advertiserId")+"-"+(n=a(n,"url"))}if(n.adId)return(i=i||"INT")+"-"+(r=a(n,"adId"))+"-"+(s=a(n,"format"))+"||"+(n=a(n,"productId"))}return""},t=function(e,t){var i=s.buffer.get("ati",!0)||{};i.value="string"==typeof i.value?[i.value]:i.value||[],i.options=i.options||{hitType:[t,"page"]},i.value.push(e),s.buffer.set("ati",i.value,i.options)},i=function(e,t){if(e.click?s.setParam("atc",l(e,"click"),{hitType:[t,"page"]}):e.impression&&s.setParam("ati",l(e,"impression"),{hitType:[t,"page"]}),e.customObject){s.setContext("onsiteads",{customObject:e.customObject});var i=s.getContext("page")||{};i.customObject=ATInternet.Utils.completeFstLevelObj(i.customObject,e.customObject,!1),s.setContext("page",i)}s.dispatchSubscribe("onSiteAds")};s.selfPromotion=this.selfPromotion={},s.publisher=this.publisher={},s.publisher.set=this.publisher.set=function(e){i(e,"publisher")},s.selfPromotion.set=this.selfPromotion.set=function(e){i(e,"selfPromotion")},s.publisher.add=this.publisher.add=function(e){t(l(e,"impression"),"publisher"),s.dispatchSubscribe("onSiteAds")},s.selfPromotion.add=this.selfPromotion.add=function(e){t(l(e,"impression"),"selfPromotion"),s.dispatchSubscribe("onSiteAds")};var n=this.advertEvent=function(e){var t,i,n,r=!0;return s.exec("TechClicks","manageClick",[e.elem,e.event],function(e){r=e}),e.click?(i=e,n=s.getContext("page")||{},s.sendHit({atc:l(i,"click"),type:"AT",patc:o(n),s2atc:n.level2||"",stc:i.customObject||""},[["hitType",["onSiteAdsClick"]]],i.callback)):e.impression&&(t=e,s.sendHit({ati:l(t,"impression"),type:"AT",stc:t.customObject||""},[["hitType",["onSiteAdsImpression"]]],t.callback)),r};s.publisher.send=this.publisher.send=function(e){return n(e)},s.selfPromotion.send=this.selfPromotion.send=function(e){return n(e)},s.onSiteAds={},s.onSiteAds.onDispatch=this.onDispatch=function(e){if(!s.dispatchSubscribed("page")){var t=s.getContext("page")||{};s.setParam("type","AT",{hitType:["publisher","selfPromotion"]}),s.getParam("atc")&&(s.setParam("patc",o(t),{hitType:["publisher","selfPromotion"]}),s.setParam("s2atc",t.level2||"",{hitType:["publisher","selfPromotion"]})),(t=s.getContext("onsiteads"))&&t.customObject&&s.setParam("stc",t.customObject,{encode:!0,hitType:["publisher","selfPromotion"]}),s.sendHit(null,[["hitType",["publisher","selfPromotion"]]],e)}},s.plugins.waitForDependencies(["Utils","TechClicks"],function(){e=document.location.href,s.plugins.exec("Utils","getQueryStringValue",["xtatc",e],function(e){e&&s.setParam("atc",e,{hitType:["publisher","selfPromotion","page"]})}),s.emit("OnSiteAds:Ready",{lvl:"INFO",details:{href:e}})})},window.ATInternet.Tracker.addPlugin("OnSiteAds")}.call(window),function(){window.ATInternet.Tracker.Plugins.Page=function(a){var r=["pageId","chapterLabel","update"],s=["pid","pchap","pidt"],o=["page","site"],l=["f","x"],c=function(e){var t=e.name;return a.exec("Utils","manageChapters",[e,"chapter",3],function(e){t=e+(t||"")}),t},u=function(e,t,i){return t?e=t:e||void 0===i||(e=i),e},d=function(e,t,i){t.hasOwnProperty(i)&&(e[i]=u(e[i],t[i]))},h=function(t){ATInternet.Utils.isPreview()&&!a.getConfig("preview")||ATInternet.Utils.isPrerender(function(e){t(e)})||t()},g=function(e,t,i){if(t)for(var n=0;n<o.length;n++)if(t.hasOwnProperty(o[n])&&t[o[n]])for(var r in t[o[n]])t[o[n]].hasOwnProperty(r)&&(i?e[l[n]+r]=t[o[n]][r]:a.setParam(l[n]+r,t[o[n]][r]))},p=function(e,t,i){if(t){a.exec("Utils","manageChapters",[t,"chapter",3],function(e){e&&(t.chapterLabel=e.replace(/::$/gi,""))});for(var n=0;n<s.length;n++)t.hasOwnProperty(r[n])&&(i?e[s[n]]=t[r[n]]:a.setParam(s[n],t[r[n]]))}},f=function(e,t,i){if(t&&t.keywords instanceof Array){var n=t.keywords.length;if(0<n){for(var r="",s=0;s<n;s++)r+="["+t.keywords[s]+"]"+(s<n-1?"|":"");i?e.tag=r:a.setParam("tag",r)}}},_=function(e,t,i){if(t){var n,r=function(e){return e||"0"};n=r(t.category1)+"-",n+=r(t.category2)+"-",n+=r(t.category3),i?e.ptype=n:a.setParam("ptype",n)}},m=function(e,t,i){if(t)for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&(i?e[n]=t[n]:a.setParam(n,t[n]))};a.customVars=this.customVars={},a.customVars.set=this.customVars.set=function(e){var t=a.getContext("page")||{},i=t.customVars;if(i){if(e)for(var n in e)e.hasOwnProperty(n)&&(i[n]=ATInternet.Utils.completeFstLevelObj(i[n],e[n],!0))}else i=e;t.customVars=i,a.setContext("page",t)},a.dynamicLabel=this.dynamicLabel={},a.dynamicLabel.set=this.dynamicLabel.set=function(e){var t=a.getContext("page")||{};t.dynamicLabel=ATInternet.Utils.completeFstLevelObj(t.dynamicLabel,e,!0),a.setContext("page",t)},a.tags=this.tags={},a.tags.set=this.tags.set=function(e){var t=a.getContext("page")||{};t.tags=ATInternet.Utils.completeFstLevelObj(t.tags,e,!0),a.setContext("page",t)},a.customTreeStructure=this.customTreeStructure={},a.customTreeStructure.set=this.customTreeStructure.set=function(e){var t=a.getContext("page")||{};t.customTreeStructure=ATInternet.Utils.completeFstLevelObj(t.customTreeStructure,e,!0),a.setContext("page",t)},a.page={},a.page.reset=this.reset=function(){a.setContext("page",void 0)},a.page.set=this.set=function(e){a.dispatchSubscribe("page");var t=a.getContext("page")||{};t.name=u(t.name,e.name,""),t.level2=u(t.level2,e.level2,""),d(t,e,"chapter1"),d(t,e,"chapter2"),d(t,e,"chapter3"),t.customObject=ATInternet.Utils.completeFstLevelObj(t.customObject,e.customObject,!0),a.setContext("page",t)},a.page.send=this.send=function(e){var t={p:c(e),s2:e.level2||""},i=!0,n=e.customObject;if(n){var r=a.getParam("stc",!0);if(r&&r.options.permanent){var s=r.options.hitType||[],o=ATInternet.Utils.arrayIndexOf;-1===o(s,"page")&&-1===o(s,"all")||(n=ATInternet.Utils.completeFstLevelObj(r.value||{},n,!0))}a.exec("Utils","customObjectToString",[n],function(e){t.stc=e})}return(n=a.getContext("page")||{}).vrn&&(t.vrn=n.vrn,n.vrn=void 0,a.setContext("page",n)),void 0!==(r=a.getContext("InternalSearch")||{}).keyword&&(t.mc=ATInternet.Utils.cloneSimpleObject(r.keyword),void 0!==r.resultPageNumber&&(t.np=ATInternet.Utils.cloneSimpleObject(r.resultPageNumber)),a.setContext("InternalSearch",void 0)),ATInternet.Utils.isPreview()&&a.getConfig("preview")&&(t.pvw=1),g(t,e.customVars,!0),p(t,e.dynamicLabel,!0),f(t,e.tags,!0),_(t,e.customTreeStructure,!0),r=a.getContext("campaigns")||{},m(t,r,!0),a.setContext("campaigns",void 0),a.exec("TechClicks","manageClick",[e.elem,e.event],function(e){i=e}),h(function(){a.sendHit(t,null,e.callback)}),n.name=u(n.name,e.name,""),n.level2=u(n.level2,e.level2,""),d(n,e,"chapter1"),d(n,e,"chapter2"),d(n,e,"chapter3"),a.setContext("page",n),i},a.page.onDispatch=this.onDispatch=function(e){var t=a.getContext("page")||{},i=a.getContext("InternalSearch")||{};a.setParam("p",c(t)),a.setParam("s2",t.level2||""),t.vrn&&(a.setParam("vrn",t.vrn),t.vrn=void 0,a.setContext("page",t)),void 0!==i.keyword&&(a.setParam("mc",ATInternet.Utils.cloneSimpleObject(i.keyword)),void 0!==i.resultPageNumber&&a.setParam("np",ATInternet.Utils.cloneSimpleObject(i.resultPageNumber)),a.setContext("InternalSearch",void 0)),ATInternet.Utils.isPreview()&&a.getConfig("preview")&&a.setParam("pvw",1),g(null,t.customVars,!1),p(null,t.dynamicLabel,!1),f(null,t.tags,!1),_(null,t.customTreeStructure,!1),i=a.getContext("campaigns")||{},m(null,i,!1),a.setContext("campaigns",void 0);t=t.customObject;var n=[["hitType",["page"]]];if(t)if(i=a.getParam("stc",!0)){var r=i.options.hitType||[],s=-1!==(s=ATInternet.Utils.arrayIndexOf)(r,"page")||-1!==s(r,"all");r=i.options.permanent;s?((s=ATInternet.Utils.cloneSimpleObject(i)).value=ATInternet.Utils.completeFstLevelObj(s.value||{},t,!0),a.setParam("stc",s.value,{encode:!0}),h(function(){a.sendHit(null,n,e)}),r&&a.setParam("stc",i.value,i.options)):(a.setParam("stc",t,{encode:!0}),h(function(){a.sendHit(null,n,e)}),a.setParam("stc",i.value,i.options))}else a.setParam("stc",t,{encode:!0}),h(function(){a.sendHit(null,n,e)});else h(function(){a.sendHit(null,n,e)})}},window.ATInternet.Tracker.addPlugin("Page")}.call(window),function(){window.ATInternet.Tracker.Plugins.RichMedia=function(l){var c=function(e,t){var i=parseInt(e,10);return i?Math.max(i,t):0},s=new function(){this._timeout={},this.setTimeout=function(e,t,i){this._timeout[e]=this._timeout[e]||{},window.clearTimeout(this._timeout[e][t]),this._timeout[e][t]=window.setTimeout(function(){l.richMedia.send({action:"refresh",playerId:e,mediaLabel:t})},1e3*i)},this.setTimeoutObject=function(e,t,i,n){if(this._timeout[e]=this._timeout[e]||{},void 0===this._timeout[e][t]){var r,s=[];for(r in i)i.hasOwnProperty(r)&&s.push({delay:c(r,0),refresh:c(i[r],5)});s.sort(function(e,t){return e.delay<t.delay?-1:e.delay>t.delay?1:0}),this._timeout[e][t]={arrObj:s,arrObjSave:ATInternet.Utils.cloneSimpleObject(s)}}if(0<(i=this._timeout[e][t]).arrObj.length&&(s=i.arrObj[0].delay,r=i.arrObj[0].refresh,"number"==typeof s&&"number"==typeof r&&0<r)){i[s]=i[s]||{};var o=void 0;void 0!==i.arrObj[1]&&(o=i.arrObj[1].delay);var a=0;void 0===o?a=1:"number"==typeof i[s].num?a="refresh"===n?Math.max(i[s].num-1,0):i[s].num:"number"==typeof o&&(a=Math.floor(60*(o-s)/r)-1),i[s].num=a,window.clearTimeout(i[s].timeout),0<a?i[s].timeout=window.setTimeout(function(){l.richMedia.send({action:"refresh",playerId:e,mediaLabel:t})},1e3*r):(i[s].num=void 0,i[s].timeout=void 0,i.arrObj.splice(0,1),window.setTimeout(function(){l.richMedia.send({action:"refresh",playerId:e,mediaLabel:t})},1e3*r)),this._timeout[e][t]=i}},this.clearTimeout=function(e,t,i){if(this._timeout[e]=this._timeout[e]||{},"object"==typeof this._timeout[e][t]){for(var n in this._timeout[e][t])if(this._timeout[e][t].hasOwnProperty(n)){var r=this._timeout[e][t][n].num;void 0!==r&&0<r&&(window.clearTimeout(this._timeout[e][t][n].timeout),this._timeout[e][t][n].timeout=void 0)}i&&(this._timeout[e][t].arrObj=ATInternet.Utils.cloneSimpleObject(this._timeout[e][t].arrObjSave))}else window.clearTimeout(this._timeout[e][t])},this.removePlayer=function(e){for(var t in this._timeout[e])this._timeout[e].hasOwnProperty(t)&&(this.clearTimeout(e,t,!1),l.richMedia.send({action:"stop",playerId:e,mediaLabel:t}));this._timeout[e]={}},this.removeAll=function(){for(var e in this._timeout)this._timeout.hasOwnProperty(e)&&this.removePlayer(e);this._timeout={}}},o=new function(){this._media=function(){this.type=void 0,this.plyr=0,this.clnk=this.s2=void 0,this.p="",this.m9=this.m6=this.m5=this.m1=this.rfsh=this.buf=this.a=void 0},this._mediaAll={},this.setMediaProperty=function(e,t,i,n){this._mediaAll[e]=this._mediaAll[e]||{},this._mediaAll[e][t]=this._mediaAll[e][t]||new this._media,this._mediaAll[e][t][i]=n},this.getMediaProperty=function(e,t,i){if(this._mediaAll[e]&&this._mediaAll[e][t])return this._mediaAll[e][t][i]},this.removePlayer=function(e){this._mediaAll[e]={}},this.removeAll=function(){this._mediaAll={}}},a=function(e,t,i){var n=e[i]||"";return l.exec("Utils","manageChapters",[e,t,3],function(e){n=e+n}),n},u=function(e,t,i,n){var r=e[t];return"boolean"==typeof e[t]&&(r=e[t]?n:i),r},d=function(e){var t=0;return/^(\-|\+)?([0-9]+)$/.test(e)&&(t=Number(e)),t},h=function(e,t,i,n,r){void 0!==(t=o.getMediaProperty(t,i,n))&&(e[n]=r?encodeURIComponent(t):t)},g=function(e,t,i){void 0!==i&&(e[t]=i)},r=function(e,t,i,n){void 0!==n&&o.setMediaProperty(e,t,i,n)};l.richMedia={},l.richMedia.add=this.add=function(e){var t=d((e=e||{}).playerId),i=a(e,"mediaTheme","mediaLabel"),n=u(e,"isEmbedded","int","ext");r(t,i,"plyr",t),r(t,i,"type",e.mediaType),r(t,i,"s2",e.mediaLevel2),r(t,i,"p",i),r(t,i,"clnk",e.linkedContent||e.previousMedia),r(t,i,"a",e.action),r(t,i,"rfsh",e.refreshDuration),r(t,i,"m1",e.duration),r(t,i,"m5",n),r(t,i,"m6",e.broadcastMode),r(t,i,"m9",e.webdomain)},l.richMedia.remove=this.remove=function(e){s.removePlayer(e),o.removePlayer(e)},l.richMedia.removeAll=this.removeAll=function(){s.removeAll(),o.removeAll()},l.richMedia.send=this.send=function(e){var t=d((e=e||{}).playerId),i=a(e,"mediaTheme","mediaLabel"),n={};if(n.plyr=t,n.p=i,e.action&&(n.a=e.action),h(n,t,i,"type",!1),h(n,t,i,"s2",!1),h(n,t,i,"m1",!1),h(n,t,i,"m5",!1),h(n,t,i,"m6",!1),"play"===n.a||"info"===n.a){e=u(e,"isBuffering","0","1"),g(n,"buf",e),e=l.getContext("page")||{};var r=a(e,"chapter","name")||void 0;g(n,"prich",r),g(n,"s2rich",e.level2||void 0),h(n,t,i,"clnk",!1),h(n,t,i,"m9",!0)}l.sendHit(n,[["hitType",["richmedia"]]]),"pause"===n.a?s.clearTimeout(t,i,!1):"stop"===n.a&&s.clearTimeout(t,i,!0),"play"!==n.a&&"refresh"!==n.a||("object"==typeof(e=o.getMediaProperty(t,i,"rfsh"))?s.setTimeoutObject(t,i,e,n.a):0!==(n=c(e,5))&&s.setTimeout(t,i,n))}},window.ATInternet.Tracker.addPlugin("RichMedia")}.call(window),function(){var e={clicksAutoManagementEnabled:!1,clicksAutoManagementTimeout:"500",info:!1};window.ATInternet.Tracker.Plugins.TechClicks=function(o){var a,l;o.configPlugin("TechClicks",e,function(e){a=e.clicksAutoManagementEnabled,l=e.clicksAutoManagementTimeout}),this.deactivateAutoManagement=function(){a=!1};var c=function(e){switch(e.target){case"_top":window.top.location.href=e.url;break;case"_parent":window.parent.location.href=e.url;break;default:window.location.href=e.url}},u=function(e){var t=e.timeout;e.mailto?setTimeout(function(){window.location.href=e.mailto},t):e.form?setTimeout(function(){e.form.submit()},t):e.url&&setTimeout(function(){c({url:e.url,target:e.target})},t)};this.manageClick=function(e,t){var i=!0;if(a&&e){var n;e:{for(n=e;n;){if("function"==typeof n.getAttribute&&("_blank"===n.getAttribute("target")||"no"===n.getAttribute("data-atclickmanagement"))){n=!0;break e}n=n.parentNode}n=e;for(var r,s=window.location.href;n;){if((r=n.href)&&0<=r.indexOf("#")&&s.substring(0,0<=s.indexOf("#")?s.indexOf("#"):s.length)===r.substring(0,r.indexOf("#"))){n=!0;break e}n=n.parentNode}n=!1}if(s=function(e){for(;e;){if(e.href){if(0<=e.href.indexOf("mailto:"))return"mailto";if(0===e.href.indexOf("http"))return"redirection"}else if("FORM"===e.nodeName)return"form";e=e.parentNode}return""}(e),!n&&s)switch(s){case"mailto":!function(e){var t=e;for(e=t.timeoutonly;t&&!(t.href&&0<=t.href.indexOf("mailto:"));)t=t.parentNode;t&&(e||o.onTrigger("Tracker:Hit:Sent:Ok",function(){window.location.href=t.href}),u({mailto:t.href,timeout:l}))}(e),i=!1;break;case"form":!function(e){var t=e;for(e=t.timeoutonly;t&&"FORM"!==t.nodeName;)t=t.parentNode;t&&(e||o.onTrigger("Tracker:Hit:Sent:Ok",function(){t.submit()}),u({form:t,timeout:l}))}(e),i=!1;break;case"redirection":(function(e){for(var t,i="_self",n=e.timeoutonly;e;){if(e.href&&0===e.href.indexOf("http")){t=e.href.split('"').join('\\"'),i=e.target?e.target:i;break}e=e.parentNode}t&&(n||o.onTrigger("Tracker:Hit:Sent:Ok",function(){c({url:t,target:i})}),u({url:t,target:i,timeout:l}))})(e),i=!1}}return t&&(n=t.defaultPrevented,"function"==typeof t.isDefaultPrevented&&(n=t.isDefaultPrevented()),n||t.preventDefault&&t.preventDefault()),i}},window.ATInternet.Tracker.addPlugin("TechClicks")}.call(window),function(){window.ATInternet.Tracker.Plugins.Utils=function(a){var e=this,s={};e.getQueryStringValue=function(e,t){var i=window.ATInternet.Utils.hashcode(t).toString();if(!s[i]){s[i]={};var n=RegExp("[&#?]{1}([^&=#?]*)=([^&#]*)?","g"),r=n.exec(t);if(null!==r)for(;null!==r;)s[i][r[1]]=r[2],r=n.exec(t)}return s[i].hasOwnProperty(e)?s[i][e]:null},e.customObjectToString=function(e){return encodeURIComponent(window.ATInternet.Utils.jsonSerialize(e))},e.manageChapters=function(e,t,i){var n=a.getConfig("ignoreEmptyChapterValue"),r="";if(e){i=parseInt(i,10);for(var s=1;s<i+1;s++){var o=e[t+s]||"";r=n?r+(o?o+"::":""):r+(e.hasOwnProperty(t+s)?o+"::":"")}}return r},e.getDocumentLevel=function(){var e=a.getConfig("documentLevel");return e.indexOf(".")<0?window[e]||document:(e=e.split("."),window[e[0]][e[1]]||document)},e.getLocation=function(){return e.getDocumentLevel().location.href},a.dispatchIndex={},a.dispatchStack=[],a.dispatchEventFor={};var n=0;a.dispatchSubscribe=function(e){return!a.dispatchIndex[e]&&(a.dispatchStack.push(e),a.dispatchIndex[e]=!0)},a.dispatchSubscribed=function(e){return!0===a.dispatchIndex[e]},a.addSpecificDispatchEventFor=function(e){return!a.dispatchEventFor[e]&&(a.dispatchEventFor[e]=!0,n++,!0)},a.processSpecificDispatchEventFor=function(e){a.dispatchEventFor[e]&&(a.dispatchEventFor[e]=!1,0===--n&&(a.dispatchEventFor={},a.emit("Tracker:Plugin:SpecificEvent:Exec:Complete",{lvl:"INFO"})))},a.dispatch=function(i){var e=function(){for(var e="",t=null;0<a.dispatchStack.length;)e=a.dispatchStack.pop(),0===a.dispatchStack.length&&(t=i),a[e].onDispatch(t);a.dispatchIndex={},a.delContext(void 0,"customObject")},t=function(){a.plugins.isExecWaitingLazyloading()?a.onTrigger("Tracker:Plugin:Lazyload:Exec:Complete",function(){e()},!0):e()};0===n?t():a.onTrigger("Tracker:Plugin:SpecificEvent:Exec:Complete",function(){t()},!0)},a.dispatchRedirect=function(e){var t=!0,i=null;return e&&(e.elem&&(e.elem.timeoutonly=!0,a.plugins.exec("TechClicks","manageClick",[e.elem,e.event],function(e){t=e})),i=e.callback),a.dispatch(i),t}},window.ATInternet.Tracker.addPlugin("Utils")}.call(window),"function"==typeof window.ATInternet.onTrackerLoad&&window.ATInternet.onTrackerLoad()}),define("smart-ott-appcore-api-rte-fincons/managers/api",["antie/runtimecontext","smart-ott/config","rofl/lib/utils","rofl/lib/promise","smart-ott-appcore-api-rte-fincons/managers/authentication","smart-ott/config"],function(i,t,n,e,r,s){"use strict";var o=n.getNested(t.getApiConfig("fincons"),"mpx_config","account_pid"),a=n.getNested(t.getApiConfig("fincons"),"mpx_config","pid"),l=n.getNested(t.getApiConfig("fincons"),"mpx_config","base_url"),c="https://watchlive.tv.theplatform.eu/w/"+o+"/",u="https://link.theplatform.eu/s/"+o+"/media/",d=s._getAll().highlights||{};return{_isocode:null,getBaseUrl:function(e){return t.getApiConfig("fincons")[e]},getFixedBaseUrl:function(){return l+o+"/"+a},getSuffixes:function(){return o+"/"+a},getUserListsUrl:function(){return"https://data.userprofile.community.theplatform.eu/userprofile/data/"},getWatchLiveUrlUrl:function(e){var t=c+e;return n.addToQueryStringOfURL(t,{schema:"1.0.0"})},getMediaFeedUrl:function(){return u},getScheduleUrl:function(e){var t=e.url||this.getFixedBaseUrl()+"-all-schedules",i={maxListings:e.maxListings||"",byCallSign:e.channelIDs?e.channelIDs.join("|"):"",byListingTime:1e3*e.startTime+"~"+1e3*e.endTime};return n.addToQueryStringOfURL(t,i)},getHighlightsUrl:function(e){var t,i=this.getHightlightParams();return t=i?(i=i.replace(/{now_epoch}/g,(new Date).getTime()),(-1<e.indexOf("?")?e:e+"?")+i):n.addToQueryStringOfURL(e,{byCustomValue:n.formatString("{broadcastDate}{0~{0}}",(new Date).getTime()),range:"0-40"}),-1===e.indexOf("byMediaAvailabilityTags")&&(t=n.addToQueryStringOfURL(t,{byMediaAvailabilityTags:r.getInstance().zones+",connectedTV"})),t},getHightlightParams:function(){var t="";return n.each(d,function(e){t+="&"+e.name+"="+e.value}),t},getRecommendationsUrl:function(e){return n.addToQueryStringOfURL(e,{platform:"bigscreen",uxplatform:"CTV",contentType:"VIDEO_CONTENT",byMediaAvailabilityTags:r.getInstance().zones+",connectedTV"})},getLanguage:function(){return"en_IE"},getLabels:function(){return new e(n.bind(function(e,t){i.getDevice().loadURL(this.getBaseUrl("base_url")+this.getLanguage()+"/label.json",{onLoad:e,onError:t,responseType:"json"})},this))},getIsocode:function(){var r=this;return this._isocode?e.resolve(this._isocode):new e(function(t,i){var n=new XMLHttpRequest;n.open("GET","https://www.rte.ie/whoami/",!0),n.send(),n.onreadystatechange=function(){if(this.readyState==this.HEADERS_RECEIVED){var e=n.getResponseHeader("X-Country-Code");e?(r._isocode=e,t(r._isocode)):i("")}}})}}}),define("smart-ott-appcore-api-rte-fincons/managers/assets/imageurlgetter",function(){"use strict";return{getUrlForAsset:function(e,t){return e=e||"",t?e.replace(/(\/\w+)(\.jpg)$/,"$1-"+t+"$2"):e}}}),define("smart-ott-appcore-api-rte-fincons/managers/authentication",["antie/class"],function(e){"use strict";var t,i=e.extend({init:function(){this.reset()},reset:function(){this.mpxToken=null,this.signature=null,this.timestamp=null,this.connectcode=null,this.zones=null}});return{getInstance:function(){return t||(t=new i),t}}}),define("smart-ott-appcore-api-rte-fincons/managers/entitlement",["antie/class","rofl/lib/promise","application/managers/entitlement"],function(e,t,i){"use strict";return e.extend({validate:function(e){return t.resolve({entitled:!0,type:i.Types.FREE})}})}),define("smart-ott-appcore-api-rte-fincons/managers/epg/manager",["product-layer/epg/data/manager","rofl/lib/promise","rofl/lib/utils","smart-ott/resolver","application/managers/channel","smart-ott-appcore-api-rte-fincons/config","smart-ott-appcore-api-rte-fincons/managers/api","rofl/logger"],function(e,r,s,l,t,i,n,o){"use strict";return e.extend({init:function(){this.setDataChunkTimeSpan(i.getDataChunkTimeSpan()),this._dataFetchUrl=null},load:function(t,i){var n,r,s,o=this,a={};return l.retrieveApi().then(function(e){return e.read("epg/data",{params:{url:o._dataFetchUrl,channelIDs:t,startTime:i,endTime:i+o.getDataChunkTimeSpan()}}).then(function(e){for(r=0,s=t.length;r<s;r++)n=t[r],a[n]=e[n]||[];return a})})},filterItems:function(e){var t=[];return s.each(e,function(i,n){i&&i.item&&s.isFunction(i.item.getChannel)&&i.item.getChannel().isVirtual()?t.push(new r(function(t,e){l.retrieveApi().then(function(e){e.read("epg/virtual",{params:i.item.getChannel()}).then(function(e){t({key:n,epgItem:e})})})})):t.push(r.resolve({key:n,epgItem:i}))}),r.all(t).then(function(e){var t={};return s.each(e,function(e){"EPG_ITEM_REJECTED"!==e&&(t[e.key]=e.epgItem)}),r.resolve(t)})},getItem:function(e,t){var i=this;return this._super(e,t).then(function(e){return i.filterItems(e)})},getItems:function(e,t,i){var n=this;return this._super(e,t,i).then(function(e){return n.filterItems(e)})},getCurrentItem:function(e,t){var i=this;return t&&(i._dataFetchUrl=t),this._super(e).then(function(e){return i.filterItems(e)})},getNextItem:function(e){var t=this;return this._super(e).then(function(e){return t.filterItems(e)})}})}),define("smart-ott-appcore-api-rte-fincons/menu/actions/account",["smart-ott-models/menu/actions/account","rofl/lib/promise","application/managers/session"],function(e,t,i){"use strict";return e.extend({prepare:function(){return i.hasSession()&&i.isLoggedIn()?(this._route="account",this._args={facebookId:i.getSession()._identity.getFacebookId()}):this._route="connectcode",t.resolve(this)}})}),define("smart-ott-appcore-api-rte-fincons/models/account",["smart-ott-models/account"],function(e){"use strict";return e.extend({init:function(e){this._super(),e&&this.transformFromCreate(e)},transformFromCreate:function(e){var t=e&&e.displayName||e.firstName||e.email||"User",i=t.match(/^(\S+)\s+(\S+)/);return e=e||{},this._id=e.id||null,this._username=e.username||"",this._initials=i&&i[1][0]+i[2][0]||t[0]+(t[1]&&t[1]||""),this._firstName=t,this._lastName=e.lastName||"",this._email=e.email||null,this._facebookId=e.facebookId||null,this._mainAccount=!1,this}})}),define("smart-ott-appcore-api-rte-fincons/models/account/favourites",["smart-ott-models/account/favourites","rofl/lib/utils","smart-ott-appcore-api-rte-fincons/apis/userprofile","rofl/lib/promise","smart-ott/resolver","smart-ott-appcore-api-rte-fincons/models/browse/section"],function(e,r,i,n,s,o){"use strict";var a=i.getInstance().getEndpointUrl();return e.extend({init:function(){this._super(),this._listId="",this._favouritesList=[]},resolveReadEndpoint:function(e){return(e=e||{}).self?r.addToQueryStringOfURL("UserList/"+(this._listId||""),{schema:"1.0",form:"json"}):r.addToQueryStringOfURL(a+"UserList/"+(this._listId||""),{schema:"1.0",form:"json"})},resolveCreateEndpoint:function(e){return e=e||{},r.addToQueryStringOfURL(a+"UserListItem/",{schema:"1.0",form:"json"})},resolveDestroyEndpoint:function(t){var e=this._favouritesList,i=(r.filter(e,function(e){return t=t||{},e.pluserlistitem$aboutId===t.item._id})[0]||{}).id.split("/");return r.addToQueryStringOfURL(a+"UserListItem/"+i[i.length-1],{schema:"1.0",form:"json"})||""},transformFromRead:function(e){var t=s.retrieveApi(),i=this,n=[];return r.each(e.pluserlist$items,function(e){var t=e.pluserlistitem$aboutId.split("/");n.push(t[t.length-1]),i._favouritesList.push(e)},this),r.isEmpty(n)?(i._items=[],i._sections.push(new o({items:i._items,label:"Favourites"})),i):t.then(function(e){return e.read("search",{params:{byId:n,mediaTypes:[],light:!0}}).then(function(e){var t=e.getAssets();return i._items=t,i._sections.push(new o({items:t,label:"Favourites"})),i})})},transformToCreate:function(e){var t;return t={$xmlns:{pluserlistitem:"http://xml.theplatform.com/userprofile/data/UserListItem"},title:"user_favourite_item",description:(e=e.item||{}).getDescription()||"",pluserlistitem$userListId:a+"UserList/"+this._listId,pluserlistitem$aboutId:e.getId()},n.resolve(t)},transformFromCreate:function(e){var t=s.retrieveApi(),i=[],n=e.pluserlistitem$aboutId.split("/");return i.push(n[n.length-1]),t.then(function(e){return e.read("search",{params:{byId:i,mediaTypes:[],light:!0}}).then(function(e){return e.getAssets()[0]})})},transformFromDestroy:function(e){return n.resolve(e)},validateReadResponse:function(e){return(r.getNested(e||{},"id")&&/\/(\d.*)$/.exec(r.getNested(e||{},"id"))[1])===this._listId},validateCreateResponse:function(e){return(e=e||{}).added},validateDestroyResponse:function(e){return(e=e||{}).totalResults},customPrepare:function(){return this.prepare()},prepare:function(){var e=i.getInstance(),t=this;return e.read("userlists").then(function(e){return t._listId=e.getFavouritesListId()}).then(function(){return e.read(t,{params:{self:!0}})})}})}),define("smart-ott-appcore-api-rte-fincons/models/ads",["rofl/models/api/abstract","antie/runtimecontext","rofl/lib/utils","smart-ott-appcore-api-rte-fincons/config","application/managers/session"],function(e,t,s,r,o){"use strict";var a,l,i=t.getCurrentApplication().getDevice(),c=i.getBrand().toLowerCase(),u=i.getOperatingSystem().toLowerCase();return e.extend({init:function(e,t){this._ads=e,this._asset=t},getFreewheelParameters:function(){var e,t=this._ads.site_section,i=t.platform,n=o.isLoggedIn()?t.logged:t.not_logged,r=-1<u.indexOf("vewd")?["vewd"]:s.filter(Object.keys(i),function(e){return-1!==c.indexOf(e.toLowerCase())});return this._asset.playAds&&(r=1===r.length?i[r[0]]:"Now TV App",n=n.replace("{platform}",r),l&&l===n||(l=n,a=s.now()),e={nw:this._ads.network_code,prof:this._ads.player_profile,csid:n,caid:this._asset.getGuid()||this._asset.getId(),vdur:this._asset.getDurationSeconds(),resp:"vmap1",pvrn:a,vprn:s.now(),metr:"1031",flag:"+amcb+emcr+sltp+play+slc"}),e},getGoogleParameters:function(){var e,t,i,n={};return this._asset.playAds&&(this._asset.adsURL&&((t=this._asset.adsURL).indexOf("?")&&(t=t.split("?")[1]),n=JSON.parse('{"'+t.replace(/&/g,'","').replace(/=/g,'":"')+'"}',function(e,t){return""===e?t:decodeURIComponent(t)})),i=r.getIUDFP(!1),e={correlator:n.correlator||s.now(),iu:n.iu||i,env:n.env||"vp",gdfp_req:n.gdfp_req||1,output:n.output||"vmap",sz:n.sz||"640x360",description_url:n.description_url||"https://www.rte.ie/player/",tfcd:n.tfcd||0,npa:n.npa||0,vpmute:n.vpmute||0,vpa:n.vpa||0,vad_format:n.vad_format||"linear",url:n.url||window.location,unviewed_position_start:n.unviewed_position_start||1,cmsid:n.cmsid||"2501691",vid:n.vid||this._asset.getGuid()||this._asset.getId()}),e}})}),define("smart-ott-appcore-api-rte-fincons/models/assets/broadcast",["smart-ott-models/assets/broadcast","rofl/lib/promise","smart-ott/resolver","smart-ott-appcore-api-rte-fincons/models/assets/media","smart-ott-appcore-api-rte-fincons/managers/api","smart-ott-appcore-api-rte-fincons/config","smart-ott-appcore-api-rte-fincons/managers/assets/imageurlgetter"],function(e,t,r,s,o,i,n){"use strict";var a=i.getDefaultAssetSize();return e.extend({init:function(e,t){this._super(),this.type="guide",this._id=e.id,this._guid=e.guid,this._fileID=e.guid,this._startTime=e.startTime/1e3,this._endTime=e.endTime/1e3,this._label=e.label,this._mediaPid=e.mediaPid,this._mediaType=e.mediaType,this._hasTimeshift=!0,this._hasStartOver=!0,this._image=e.image,t&&(this._channel=t)},getGuid:function(){return this._guid},prepareStream:function(){var t,i,n=this;if(this._channel&&this._channel.isVirtual()){if(this._guid)return r.retrieveApi().then(function(e){return e.read("assets/virtualmedia",{params:{guid:n._guid}}).then(function(e){return(i=new s(n,t=e)).prepare().then(function(){return i})})})}else if(this._mediaPid)return t=o.getMediaFeedUrl()+this._mediaPid,(i=new s(this,t)).prepare().then(function(){return i})},getMediaType:function(){return this._mediaType},getImage:function(e){return t.resolve(n.getUrlForAsset(this._image,e||a))}})}),define("smart-ott-appcore-api-rte-fincons/models/assets/episode",["smart-ott-models/assets/episode","rofl/lib/utils","rofl/lib/promise","smart-ott/resolver","smart-ott-appcore-api-rte-fincons/config","smart-ott-appcore-api-rte-fincons/models/assets/serie","smart-ott-appcore-api-rte-fincons/managers/assets/imageurlgetter","smart-ott-appcore-api-rte-fincons/models/assets/media","rofl/lib/l10n","rofl/lib/date.format"],function(e,i,t,r,n,s,o,a,l){"use strict";var c=n.getScheduleApiMappings().program,u=n.getDefaultAssetSize();return e.extend({_parseSerieGuid:function(e){var t;return e?(t=e.split("/"))[t.length-1]:""},init:function(e,t){if(this._super(),this._position=t||0,this._duration=e.duration||0,this._durationSeconds=e.plprogram$runtime||0,this._id=e.id,this._guid=e.guid,this._fileID=e.guid,this._label=e.title||0,this._longTitle=e.plprogram$longTitle,this._description=e.description,this._shortDescription=e.plprogram$shortDescription||"",this._longDescription=e.plprogram$longDescription||"",this._image=i.getNested(e,c.thumbnails,"default",c.thumbnailsUrl),this._imageTitleCard=i.getNested(e,c.thumbnails,c.thumbnailsTitleCardUrl,c.thumbnailsUrl),this._poster=e._isHighlight?i.getNested(e,c.thumbnails,"poster",c.thumbnailsUrl):null,this._episodeNumber=e.plprogram$tvSeasonEpisodeNumber,this._seasonNumber=e.plprogram$tvSeasonNumber||0,this._tvSeason=e.plprogram$tvSeasonId||"spoofed_season",this._parentalRating=i.getNested(e,"plprogram$ratings",0,"plprogram$rating")||"",this._serie=new s({episodeId:e.guid,title:e.title,guid:this._parseSerieGuid(e.plprogram$seriesId)}),this._subCategories=[],this._boxset=0,i.hasNested(e,"plprogramavailability$media",0,"plmedia$publicUrl")&&(this._mediaUrl=e.plprogramavailability$media[0].plmedia$publicUrl),e.plprogram$tags&&i.each(e.plprogram$tags,function(e){"category"===e.plprogram$scheme?this._categories.push(e.plprogram$title):"subCategory"===e.plprogram$scheme?this._subCategories.push(e.plprogram$title):"programSubType"===e.plprogram$scheme&&"boxset"===e.plprogram$title&&(this._boxset=1)},this),e.plprogram$pubDate&&(this._pubDate=e.plprogram$pubDate),e.rte$broadcastDate)try{this._broadcastDate=e.rte$broadcastDate,this._broadcastDateStr=new Date(this._broadcastDate).format("D d/m/y")}catch(e){}e.rte$producer&&(this._producer=e.rte$producer||""),e.rte$station&&(this._station=e.rte$station||""),e.collectionTitle&&(this._collectionTitle=e.collectionTitle||"")},getLongTitle:function(){return this._longTitle||""},getPublishDate:function(){return this._pubDate},getShortDescription:function(){return this._shortDescription||""},getLongDescription:function(){return this._longDescription||""},getBroadcastDate:function(){return this._broadcastDate},getBroadcastDateStr:function(){return this._broadcastDateStr||""},getDurationSeconds:function(){return this._durationSeconds},getRelatedRows:function(t){var i=this,n=l.getInstance();return r.retrieveApi().then(function(e){return e.read("browse/section",{params:{fromPlayer:t,related:!0,asset:i,label:n.get("episode.related"),type:"single"}}).then(function(e){return{getSections:function(){return[e]}}})})},getGuid:function(){return this._guid},getMediaType:function(){return n.getMediaTypes().EPISODE.type},getTvSeason:function(){return this._tvSeason},getSeasonNumber:function(){return this._seasonNumber||null},getProgress:function(){var e;if(!i.isUndefined(this.getPosition())&&this.getDurationSeconds())return(e=this.getDurationSeconds()?100*this.getPosition()/this.getDurationSeconds():0)<0?e=0:100<e&&(e=100),e},prepareStream:function(e,t){var i;if(this._mediaUrl)return(i=new a(this,this._mediaUrl,t)).prepare().then(function(){return i})},hasPoster:function(){return this._poster||!1},getPoster:function(e){return t.resolve(o.getUrlForAsset(this._poster,e||u))},getImage:function(e){return t.resolve(o.getUrlForAsset(this._image,e||u))},getImageTitleCard:function(e){return t.resolve(o.getUrlForAsset(this._imageTitleCard,e||u))},getSubCategories:function(){return this._subCategories},getProvider:function(){return this._producer||""},getStation:function(){return this._station||""},getCollectionTitle:function(){return this._collectionTitle||""},getBoxset:function(){return this._boxset||0},setPosition:function(e){this._position=parseInt(e,10)||null}})}),define("smart-ott-appcore-api-rte-fincons/models/assets/genre",["smart-ott-models/assets/genre","rofl/lib/utils","smart-ott-appcore-api-rte-fincons/config","antie/runtimecontext"],function(e,i,t,n){"use strict";var r=t.getScheduleApiMappings().program,s=n.getCurrentApplication().getLayout().modifier,o=Math.round(1280*(s||1));return e.extend({init:function(e){var t;this._super(),t=(t=i.getNested(e,r.thumbnails,"default",r.thumbnailsUrl)||"").replace(".jpg","-"+o+".jpg"),this._id=(e.rte$mpxFeed||e.id)+"|split|"+t,this._label=e.title,this._image=t,this._description=e.description||"",this._longTitle=e.plprogram$longTitle||"",this._shortDescription=e.plprogram$shortDescription||"",this._longDescription=e.plprogram$longDescription||"",e.rte$producer&&(this._producer=e.rte$producer||""),e.rte$station&&(this._station=e.rte$station||""),e.collectionTitle&&(this._collectionTitle=e.collectionTitle||"")},getLongTitle:function(){return this._longTitle||""},getDescription:function(){return this._description||""},getShortDescription:function(){return this._shortDescription||""},getLongDescription:function(){return this._longDescription||""},getMediaType:function(){return t.getMediaTypes().EPISODE.type},getBrowseSubtitle:function(){return""},getProgress:function(){return null},getRoutingParams:function(){return{label:this._label,genreID:this._id}},getProvider:function(){return this._producer||""},getStation:function(){return this._station||""},getCollectionTitle:function(){return this._collectionTitle||""}})}),define("smart-ott-appcore-api-rte-fincons/models/assets/media",["smart-ott-models/assets/media","smart-ott-appcore-api-rte-fincons/models/assets/media/source","antie/devices/mediaplayer/mediaplayer","smart-ott-appcore-api-rte-fincons/managers/authentication","rofl/lib/utils","rofl/lib/promise","rofl/lib/xml","smart-ott-models/assets/subtitlesource","antie/runtimecontext","smart-ott/config","smart-ott-models/assets/broadcast","smart-ott-appcore-api-rte-fincons/config"],function(e,h,g,p,f,a,l,c,s,t,o,_){"use strict";var i=s.getCurrentApplication().getDevice(),m=i.getBrand(),v=i.getOperatingSystem(),u="English",d="eng",C="vtt",A=((t.getFeature("ads")||{}).google||{}).ad_policy||"",n=e.extend({init:function(e,t,i){var n,r,s,o,a,l=h.MIME_TYPES.mpd,c="MPEG-DASH",u=e.getStartDate&&e.getEndDate,d=f.isFunction(e.getChannel)&&e.getChannel().isVirtual();(u&&-1===v.toLowerCase().indexOf("android")&&!d||-1<v.toLowerCase().indexOf("vewd")||-1<m.toLowerCase().indexOf("saorview"))&&(l=h.MIME_TYPES.ism,c="ISM"),r={auth:p.getInstance().mpxToken,sdk:"PDK%205.7.16",formats:c,format:"SMIL",embedded:!0,tracking:!0,policy:A},(o=_.getIUDFP(u&&!d))&&(r.iu=o),n=t+"?"+f.serialize(r)+(i||""),s=new h(n,u&&!d?g.TYPE.LIVE_VIDEO:g.TYPE.VIDEO,l),(a=e.getStartDate&&e.getStartDate())&&(d?s.setStreamOffset((f.now()-a)/1e3):s.setStreamOffset(f.now()-a)),this._super(e),this._sources.push(s)},prepare:function(){var t=this,i=this._sources[0];return new a(function(e){i.load().then(function(){t._asset.playAds=i.playAds,t._asset.adsURL=i.adsURL,t._processSubtitles(i).then(function(){e()})})})},loadSource:function(e){return a.resolve(e)},_processSubtitles:function(t){var i,e,n=this,r=this._asset instanceof o;if(t.subtitles)return this.addSubtitles([new c({title:u,language:d,url:t.subtitles,format:C})]),a.resolve();try{(e=JSON.parse(t.mediaUrl)).streamUrl&&(i=e.streamUrl)}catch(e){i=t.mediaUrl}return new a(function(t,e){i&&!r?(-1===m.toLowerCase().indexOf("samsung")&&i.indexOf("filter=")&&(i=i.split("filter=")[0]),s.getDevice().loadURL(i,{responseType:"xml",onLoad:f.bind(function(e){n._parseVodSubs(e,i).then(function(e){n.addSubtitles(e),t()})},this),onError:function(){e()}})):r?(n.addSubtitles([new c({title:u,live:!0})]),t()):e()})},_parseVodSubs:function(e,t){var i=l.xml2json(e,""),n=JSON.parse(i),r=f.getNested(n,"MPD","Period","AdaptationSet"),s=t.split(".mpd").shift()+"dash/",o=[];return r&&f.each(r,function(e){e&&"text"===f.getNested(e,"@contentType")&&"text/vtt"===f.getNested(e,"@mimeType")&&f.hasNested(e,"Representation","BaseURL")&&o.push(new c({title:u,language:d,url:s+f.getNested(e,"Representation","BaseURL"),format:C}))}),a.resolve(o)},addSubtitles:function(e){e instanceof Array?this._subtitles=this._subtitles.concat(e):this._subtitles.push(e)}});return n.addUrlSuffix=function(e){return e+"?formats=MPEG-DASH&auth="+p.getInstance().mpxToken},n}),define("smart-ott-appcore-api-rte-fincons/models/assets/media/source",["smart-ott-models/assets/media/source","smart-ott-appcore-api-rte-fincons/models/assets/media/source/smil","rofl/lib/utils","rofl/lib/promise"],function(e,t,i,n){"use strict";var r=e.extend({init:function(e){this.smilUrl=e,this._super.apply(this,arguments)},load:function(){return new t(this).prepare()},prepare:function(){return n.resolve(this).then(i.bind(this._super,this))}});return r.Qualities=e.Qualities,r.MIME_TYPES=e.MIME_TYPES,r}),define("smart-ott-appcore-api-rte-fincons/models/assets/media/source/smil",["rofl/models/api/abstract","antie/devices/device","smart-ott/resolver","rofl/media/drm/item/playready","rofl/media/drm/item/widevine","smart-ott/config","smart-ott-appcore-api-rte-fincons/managers/authentication","rofl/lib/utils","antie/runtimecontext"],function(e,D,t,k,O,R,L,x,i){"use strict";var N=i.getCurrentApplication().getDevice();return e.extend({init:function(e){this._source=e,this._subtitles=""},resolveEndpoint:function(){return this._source.smilUrl},transformFrom:function(e){var t,i,n,r,s,o,a,l=new RegExp('video src="([^"]+)'),c=new RegExp('textstream src="([^"]+)'),u=new RegExp('ref src="((.)+ads.freewheel.tv)(.)+tags="(preroll|midroll|postroll)"'),d=new RegExp('ref src="([^"]+)+"(.)+'),h=new RegExp("\\|pid=([^\\|]+)"),g=(x.getNested(l.exec(e),"1")||"").replace(/&amp;/g,"&"),p=(x.getNested(c.exec(e),"1")||"").replace(/&amp;/g,"&"),f=u.test(e),_=(x.getNested(d.exec(e),"1")||"").replace(/&amp;/g,"&"),m=x.getNested(h.exec(e),"1")||"",v=N.getBrand(),C=N.getOperatingSystem(),A=-1<v.toLowerCase().indexOf("philips"),E=-1<v.toLowerCase().indexOf("saorview"),I=A,y=C===D.OperatingSystems.WEB_OS,b=N.getOperatingSystem(),S=!!m,T='filter=(type=="audio"||type=="video")',w="filter=(type%3D%3D%22audio%22%7C%7Ctype%3D%3D%22video%22)",P="https://playready3.entitlement.eu.theplatform.com/playready/rightsmanager.asmx";if(-1===v.toLowerCase().indexOf("samsung")&&(A?g.indexOf("filter=")?g=g.split("filter=").join(w+"%26%26"):g+=w:g.indexOf("filter=")?g=g.split("filter=").join(T+"&&"):g+=T),S){i=R.getApi(),n=encodeURIComponent(x.getNested(i,"fincons","mpx_config","account_id")||""),t=L.getInstance();try{a="bridgeJavaScriptToAndroid_GetDeviceInfo"in JavaScriptBridge}catch(e){a=!1}-1!==b.toLowerCase().indexOf("android")&&a?(s=g,o="https://widevine.entitlement.theplatform.eu/wv/web/ModularDrm/getWidevineLicense?account="+n+"&"+x.serialize({form:"json",schema:"1.0",token:t.mpxToken,_releasePid:m}),r=new O({licenseOverrideUri:o}),g=JSON.stringify({streamUrl:decodeURIComponent(s),drmConfig:{drmSchemeUuid:"widevine",drmLicenseUrl:decodeURIComponent(r.getLicenseOverrideUri()),drmCustomData:{custom:"",data:""}}})):(o=E?P:P+"?account="+n+"&"+x.serialize({auth:t.mpxToken,releasePid:m,schema:"1.0"}),r=new k({licenseOverrideUri:o}),E&&r.setCustomData("account="+n+" auth="+t.mpxToken+" releasePid="+m+" schema=1.0"),r.setEmbeddedLicense(!I),r.setProtectionHeaderUTF16(!0)),this._source.setDrmItem(r)}return E&&(g+=("&"!==g[g.length-1]?"&":"")+x.serialize({svc:!0})),y&&(g+=("&"!==g[g.length-1]?"&":"")+x.serialize({mpd_minimum_fragment_length:8})),this._source.mediaUrl=g,this._source.subtitles=p,this._source.playAds=f||_,this._source.adsURL=_,this._source},prepare:function(){return t.retrieveApi().then(x.bind(function(e){return e.read(this,{responseType:"text"})},this))}})}),define("smart-ott-appcore-api-rte-fincons/models/assets/movie",["smart-ott-models/assets/movie","rofl/lib/utils","rofl/lib/promise","smart-ott-appcore-api-rte-fincons/config","smart-ott/resolver","smart-ott-appcore-api-rte-fincons/managers/assets/imageurlgetter","smart-ott-appcore-api-rte-fincons/models/assets/media","rofl/lib/l10n","antie/runtimecontext","rofl/lib/date.format"],function(e,i,t,n,r,s,o,a,l){"use strict";var c=n.getScheduleApiMappings().program,u=n.getDefaultAssetSize(),d=l.getCurrentApplication().getLayout().modifier,h={WIDTH:Math.round(1280*(d||1)),HEIGHT:Math.round(720*(d||1))};return e.extend({init:function(e,t){if(this._super(),this._position=t||0,this._duration=e.duration||0,this._durationSeconds=e.plprogram$runtime||0,this._id=e.id,this._guid=e.guid,this._fileID=e.guid,this._label=e.title||0,this._longTitle=e.plprogram$longTitle||"",this._description=e.description,this._shortDescription=e.plprogram$shortDescription||"",this._longDescription=e.plprogram$longDescription||"",this._seriesId=e.plprogram$seriesId||"",this._poster=e._isHighlight?i.getNested(e,c.thumbnails,"poster",c.thumbnailsUrl):null,this._parentalRating=i.getNested(e,"plprogram$ratings",0,"plprogram$rating")||"",this._image=i.getNested(e,c.thumbnails,"default",c.thumbnailsUrl),this._imageTitleCard=i.getNested(e,c.thumbnails,c.thumbnailsTitleCardUrl,c.thumbnailsUrl),this._subCategories=[],this._boxset=0,i.hasNested(e,"plprogramavailability$media",0,"plmedia$publicUrl")&&(this._mediaUrl=e.plprogramavailability$media[0].plmedia$publicUrl),e.plprogram$tags&&i.each(e.plprogram$tags,function(e){"category"===e.plprogram$scheme?this._categories.push(e.plprogram$title):"subCategory"===e.plprogram$scheme?this._subCategories.push(e.plprogram$title):"programSubType"===e.plprogram$scheme&&"boxset"===e.plprogram$title&&(this._boxset=1)},this),e.plprogram$pubDate&&(this._pubDate=e.plprogram$pubDate),e.rte$broadcastDate)try{this._broadcastDate=e.rte$broadcastDate,this._broadcastDateStr=new Date(this._broadcastDate).format("D d/m/y")}catch(e){}e.rte$producer&&(this._producer=e.rte$producer||""),e.rte$station&&(this._station=e.rte$station||""),e.collectionTitle&&(this._collectionTitle=e.collectionTitle||"")},getProgress:function(){var e;if(!i.isUndefined(this.getPosition())&&this.getDurationSeconds())return(e=this.getDurationSeconds()?100*this.getPosition()/this.getDurationSeconds():0)<0?e=0:100<e&&(e=100),e},getLongTitle:function(){return this._longTitle||""},getPublishDate:function(){return this._pubDate},getShortDescription:function(){return this._shortDescription||""},getLongDescription:function(){return this._longDescription||""},getBroadcastDate:function(){return this._broadcastDate},getBroadcastDateStr:function(){return this._broadcastDateStr||""},getDurationSeconds:function(){return this._durationSeconds},getRelatedRows:function(t){var i=this,n=a.getInstance();return r.retrieveApi().then(function(e){return e.read("browse/section",{params:{fromPlayer:t,related:!0,asset:i,label:n.get("movie.related"),type:"single"}}).then(function(e){return{getSections:function(){return[e]}}})})},getGuid:function(){return this._guid},getSeriesId:function(){return this._seriesId},getMediaType:function(){return n.getMediaTypes().MOVIE.type},prepareStream:function(e,t){var i;if(this._mediaUrl)return(i=new o(this,this._mediaUrl,t)).prepare().then(function(){return i})},getAtmosphericImage:function(){return this.getImage(h.WIDTH,h.HEIGHT)},hasPoster:function(){return this._poster||!1},getPoster:function(e){return t.resolve(s.getUrlForAsset(this._poster,e||u))},getImage:function(e){return t.resolve(s.getUrlForAsset(this._image,e||u))},getImageTitleCard:function(e){return t.resolve(s.getUrlForAsset(this._imageTitleCard,e||u))},getSubCategories:function(){return this._subCategories},getProvider:function(){return this._producer||""},getStation:function(){return this._station||""},getCollectionTitle:function(){return this._collectionTitle||""},getBoxset:function(){return this._boxset||0},setPosition:function(e){this._position=parseInt(e,10)||null}})}),define("smart-ott-appcore-api-rte-fincons/models/assets/season",["smart-ott-models/season","rofl/lib/utils","rofl/lib/promise","smart-ott/resolver","smart-ott-appcore-api-rte-fincons/managers/api"],function(e,u,t,o,i){"use strict";var d=e.extend({init:function(e){this._super(),e=e||{},this._id=e.plprogram$id,this._label=e.title,this._description=e.description,this._seasonNumber=e.plprogram$tvSeasonNumber,this._episodes=[]},getGuid:function(){return this._guid},getEpisodesList:function(){return this._episodes},getEpisodes:function(){return t.resolve(this._episodes)},setEpisodes:function(e){this._episodes=e},resolveEndpoint:function(e){return i.getFixedBaseUrl()+"-all-movies-series?byGuid="+e.guid},transformFrom:function(e){var t,i,n,r,s,o=[],a=[],l=[],c=!1;if(!u.hasNested(e,"entries",0,"id"))throw new Error("Missing data in series asset server response.");if(t=e.entries[0].id,i=e.entries[0].plprogram$seriesTvSeasons,n=e.entries[0].title,r=e.entries[0].description,s=e.entries[0],i)return c=0===i.length,i.push({plprogram$id:"spoofed_season",title:n,description:r,plprogram$tvSeasonNumber:null}),i.sort(function(e,t){return e.plprogram$tvSeasonNumber-t.plprogram$tvSeasonNumber}),u.each(i,function(e){var t;e.title=n,e.description=r,o.push(new d(e)),(t=(/TvSeason\/(.*)/.exec(e.plprogram$id)||[])[1])&&l.push(t)}),l=l.join("|"),this._getEpisodes(t,l).then(function(e){var t,i,n,r;for(u.each(e,function(e){var t=e.getTvSeason(),i=a[t];i||(i=a[t]=[]),i.push(e)}),t=0,i=o.length;t<i;t++)n=o[t],r=a[n.getId()]||[],c&&r.length&&r[0].getBroadcastDate()&&r.sort(function(e,t){return t.getBroadcastDate()-e.getBroadcastDate()}),r.length?n.setEpisodes(r):(o.splice(t--,1),--i);return{seriesInfo:s,seasons:o}})},_getEpisodes:function(t,i,n,r){var s=this;return n=n||[],r=r||1,o.retrieveApi().then(function(e){return e.read("episodes",{params:{seriesID:t,seasonsID:i,page:r}}).then(function(e){return(n=n.concat(e.episodes)).length===e.totalResults?n:s._getEpisodes(t,i,n,++r)})})}});return d}),define("smart-ott-appcore-api-rte-fincons/models/assets/selectorservice",["rofl/models/api/abstract","smart-ott-appcore-api-rte-fincons/managers/api","smart-ott-appcore-api-rte-fincons/models/assets/media"],function(e,t,i){"use strict";return e.extend({resolveEndpoint:function(e){return i.addUrlSuffix(e.mediaUrl)+"&format=preview&tracking=true"},transformFrom:function(e){return{duration:e.duration||1800}}})}),define("smart-ott-appcore-api-rte-fincons/models/assets/serie",["smart-ott-models/assets/serie","rofl/lib/utils","smart-ott-appcore-api-rte-fincons/config","smart-ott/resolver","smart-ott-appcore-api-rte-fincons/managers/assets/imageurlgetter","rofl/lib/promise","rofl/lib/l10n","antie/runtimecontext","rofl/lib/date.format"],function(e,t,i,s,n,r,o,a){"use strict";var l=i.getScheduleApiMappings().program,c=i.getDefaultAssetSize(),u=a.getCurrentApplication().getLayout().modifier,d={WIDTH:Math.round(1280*(u||1)),HEIGHT:Math.round(720*(u||1))};return e.extend({init:function(e){if(this._super(),this._id=e.id,this._label=e.title,this._longTitle=e.plprogram$longTitle,this._description=e.description,this._shortDescription=e.plprogram$shortDescription||"",this._longDescription=e.plprogram$longDescription||"",this._poster=e._isHighlight?t.getNested(e,l.thumbnails,"poster",l.thumbnailsUrl):null,this._parentalRating=t.getNested(e,"plprogram$ratings",0,"plprogram$rating")||"",this._image=t.getNested(e,l.thumbnails,"default",l.thumbnailsUrl),this._imageTitleCard=t.getNested(e,l.thumbnails,l.thumbnailsTitleCardUrl,l.thumbnailsUrl),this._guid=e.guid,this._fileID=e.guid,this._tvSeasonId=e.plprogram$tvSeasonNumber,this._tvSeasonEpisodeNumber=e.plprogram$tvSeasonEpisodeNumber,this._episodeId=e.episodeId,this._subCategories=[],this._boxset=0,e.plprogram$tags&&t.each(e.plprogram$tags,function(e){"category"===e.plprogram$scheme?this._categories.push(e.plprogram$title):"subCategory"===e.plprogram$scheme?this._subCategories.push(e.plprogram$title):"programSubType"===e.plprogram$scheme&&"boxset"===e.plprogram$title&&(this._boxset=1)},this),e.plprogram$pubDate&&(this._pubDate=e.plprogram$pubDate),e.rte$broadcastDate)try{this._broadcastDate=e.rte$broadcastDate,this._broadcastDateStr=new Date(this._broadcastDate).format("D d/m/y")}catch(e){}e.rte$producer&&(this._producer=e.rte$producer||""),e.rte$station&&(this._station=e.rte$station||""),e.collectionTitle&&(this._collectionTitle=e.collectionTitle||"")},getLongTitle:function(){return this._longTitle||""},getPublishDate:function(){return this._pubDate},getShortDescription:function(){return this._shortDescription||""},getLongDescription:function(){return this._longDescription||""},getBroadcastDate:function(){return this._broadcastDate},getBroadcastDateStr:function(){return this._broadcastDateStr||""},getRelatedRows:function(t){var i=this,n=o.getInstance();return s.retrieveApi().then(function(e){return e.read("browse/section",{params:{fromPlayer:t,related:!0,asset:i,label:n.get("serie.related"),type:"single"}}).then(function(e){return{getSections:function(){return[e]}}})})},getGuid:function(){return this._guid},getMediaType:function(){return i.getMediaTypes().SERIE.type},getAtmosphericImage:function(){return this.getImage(d.WIDTH,d.HEIGHT)},getSeasons:function(){var t=this._guid,i=this._tvSeasonId,n=this._tvSeasonEpisodeNumber,r=this;return s.retrieveApi().then(function(e){return e.read("assets/season",{params:{guid:t,tvSeasonId:i,tvSeasonEpisodeNumber:n}}).then(function(e){return e&&e.seriesInfo&&r.init(e.seriesInfo),e&&e.seasons})})},hasPoster:function(){return this._poster||!1},getPoster:function(e){return r.resolve(n.getUrlForAsset(this._poster,e||c))},getImage:function(e){return r.resolve(n.getUrlForAsset(this._image,e||c))},getImageTitleCard:function(e){return r.resolve(n.getUrlForAsset(this._imageTitleCard,e||c))},getEpisodeId:function(){return this._episodeId},getSubCategories:function(){return this._subCategories},getProvider:function(){return this._producer||""},getStation:function(){return this._station||""},getCollectionTitle:function(){return this._collectionTitle||""},getBoxset:function(){return this._boxset||0}})}),define("smart-ott-appcore-api-rte-fincons/models/assets/upnext",["smart-ott-models/assets/episode","rofl/lib/utils","smart-ott-appcore-api-rte-fincons/config","smart-ott-appcore-api-rte-fincons/managers/api"],function(e,t,i,n){"use strict";var r=i.getScheduleApiMappings().program;return e.extend({resolveEndpoint:function(e){return t.addToQueryStringOfURL(n.getBaseUrl("base_url_sl")+"mpx/upnext",{seriesGuid:e.seriesId,currentItemGuid:e.mediaGuid})},transformFromRead:function(e){return this._label=e.title,this._image=t.getNested(e,r.thumbnails,"default",r.thumbnailsUrl),this},getGuid:function(){return null},getMediaType:function(){return i.getMediaTypes().EPISODE.type}})}),define("smart-ott-appcore-api-rte-fincons/models/assets/virtualmedia",["rofl/models/api/abstract","smart-ott-appcore-api-rte-fincons/managers/api","rofl/lib/utils"],function(e,t,r){"use strict";return e.extend({resolveEndpoint:function(e){return r.addToQueryStringOfURL(t.getFixedBaseUrl()+"-all-programs",{fields:"media.publicUrl",byGuId:e.guid})},transformFrom:function(e){var t,i,n=e.entries||[];return 0<n.length&&(t=n[0],r.hasNested(t,"plprogramavailability$media",0,"plmedia$publicUrl")&&(i=t.plprogramavailability$media[0].plmedia$publicUrl)),i}})}),define("smart-ott-appcore-api-rte-fincons/models/bookmarking/addbookmark",["smart-ott-models/bookmarking/readbookmark","smart-ott/resolver","rofl/lib/promise","smart-ott-appcore-api-rte-fincons/managers/api","rofl/lib/utils","smart-ott-appcore-api-rte-fincons/managers/authentication"],function(e,i,t,n,r,s){"use strict";return e.extend({init:function(e){this._super(),e=e||{},this._position=e.description,this._mediaID=e.pluserlistitem$aboutId,this._asset=null},getAsset:function(){var t=this;return i.retrieveApi().then(function(e){return e.read("detail",{params:{mediaID:t.getMediaID()}})})},resolveEndpoint:function(){return r.addToQueryStringOfURL(n.getBaseUrl("base_url_sl")+"trackEvent",{schema:"1.0",form:"json"})},transformToCreate:function(e){return t.resolve({object:{itemType:"VIDEO_CONTENT",itemId:e.fileID},objectType:"ITEM",eventType:"View",playTime:e.location,visionFactor:e.description,platform:"CTV",mpx_token:s.getInstance().mpxToken})}})}),define("smart-ott-appcore-api-rte-fincons/models/bookmarking/readbookmark",["smart-ott-models/bookmarking/readbookmark","smart-ott/resolver","rofl/lib/promise","rofl/lib/utils","smart-ott-appcore-api-rte-fincons/apis/userprofile"],function(e,i,n,r,s){"use strict";var t=s.getInstance().getEndpointUrl();return e.extend({init:function(){this._super(),this._listId=""},getVideoPosition:function(){return this._duration?this._duration*this._visionFactor:0},getAsset:function(){var t=this;return i.retrieveApi().then(function(e){return e.read("detail",{params:{mediaID:t.getMediaID()}})})},resolveReadEndpoint:function(e){return(e=e||{})&&(this._mediaID=e.mediaID,this._asset=e.asset,this._duration=e.duration||this._asset&&this._asset.getDurationSeconds()||0),r.addToQueryStringOfURL(t+"UserList/"+(this._listId||""),{schema:"1.0",form:"json"})},transformFromRead:function(e){var t=this,i=r.filter(e.pluserlist$items,function(e){return e.pluserlistitem$aboutId===t.getMediaID()});return i=i.sort(function(e,t){return e.updated<t.updated}),r.isEmpty(i)||(t._visionFactor=i[0].description||0,t._position=Math.floor(t._visionFactor*this._duration),t._bookmarkId=i[0].id),n.resolve(t)},getBookmarkId:function(){return this._bookmarkId},validateReadResponse:function(e){return(r.getNested(e||{},"id")&&/\/(\d.*)$/.exec(r.getNested(e||{},"id"))[1])===this._listId},customPrepare:function(){return this.prepare()},prepare:function(){var e=s.getInstance(),t=this;return e.read("userlists").then(function(e){return t._listId=e.getBookmarksListId(),t})}})}),define("smart-ott-appcore-api-rte-fincons/models/browse",["smart-ott-models/browse","smart-ott/resolver","rofl/lib/utils","rofl/lib/promise","smart-ott-appcore-api-rte-fincons/managers/authentication","smart-ott-appcore-api-rte-fincons/models/browse/section","smart-ott-appcore-api-rte-fincons/managers/api"],function(e,t,s,n,o,a,l){"use strict";return e.extend({init:function(e){var t,i;i=(t=((e=e||{}).genreID||"").split("|split|"))[0],this._super(),this._genreId=i||null,i?(this._sections=[],this._data={reference:i,headerImage:t[1]}):(this._sections=e.sections,this._data=e.data,this._parentLabel=e.label),this._data.source=e.source},resolveEndpoint:function(){return this._appendGeoblockZones(this._data.reference)},transformFrom:function(r){var t,i=this;return r.hasOwnProperty("entries")?a.prototype.formatItems(r.entries,!0,!0).then(function(e){return e.length&&("subCategory"===e[0].pltag$scheme?s.each(e,function(e){var t=s.addToQueryStringOfURL(l.getFixedBaseUrl()+"-all-prog-light",{byTags:e.pltag$scheme+":"+e.title,byProgramType:"series|movie",byMediaAvailabilityTags:o.getInstance().zones+",connectedTV"});i._sections.push(new a({label:e.rte$displayName,type:a.Type.SINGLE,links:{sectionUrl:t}}))}):((t=s.getNested(i,"_data","headerImage"))&&i._sections.push(new a({label:r.title,source:s.getNested(i,"_data","source"),type:"header",links:{},image:s.getNested(i,"_data","headerImage")||""})),s.isString(r.title)&&-1<r.title.toLowerCase().indexOf("recomlist")&&(r.title="Recommended"),i._sections.push(new a({label:t?"":i._parentLabel||r.title,type:t?a.Type.SINGLE:a.Type.GRID,links:{},items:e})))),i}):(s.each(r,function(e){var t=e.type||1!==r.length?e.type:a.Type.GRID,i=s.getNested(e,"_links","items","href")||"",n=e.feedtype||s.getNested(e,"_links","items","feedtype")||"";this._sections.push(new a({label:e.label,type:t,feedType:n,links:{sectionUrl:i}}))},this),this)},prepare:function(){var i=this;return i._sections.length=0,t.retrieveApi().then(function(e){return s.getNested(i,"_data","reference")?e.read(i):n.resolve(i)}).then(function(){var t=[];return s.each(i.getSections(),function(e){t.push(e.prepare())}),n.all(t)}).then(function(){return i._sections=s.filter(i._sections,function(e){return e.getItems().length||"header"===e.getType()}),i})},_appendGeoblockZones:function(e){var t=o.getInstance();return e&&e.match("getRecommendations")&&-1===e.toLowerCase().indexOf("bymediaavailabilitytags")&&t.zones&&(e=e+"&byMediaAvailabilityTags="+t.zones),e}})}),define("smart-ott-appcore-api-rte-fincons/models/browse/section",["smart-ott-models/browse/section","smart-ott-appcore-api-rte-fincons/managers/api","smart-ott-appcore-api-rte-fincons/config","smart-ott/resolver","rofl/lib/utils","rofl/lib/promise","antie/runtimecontext","smart-ott-appcore-api-rte-fincons/models/assets/serie","smart-ott-appcore-api-rte-fincons/models/assets/episode","smart-ott-appcore-api-rte-fincons/models/assets/movie","smart-ott-appcore-api-rte-fincons/models/assets/genre","smart-ott-appcore-api-rte-fincons/managers/authentication","smart-ott-appcore-api-rte-fincons/apis/servicelayer","application/managers/channel"],function(i,s,o,l,c,u,n,d,h,g,p,a,f,_){"use strict";var e,r={content_row_normal:i.Type.SINGLE,content_row_LargeNoTitleCards:i.Type.SINGLE_NO_TITLE,content_row_single_highlight:i.Type.SLIDER,content_row_double_highlighted:i.Type.DOUBLE_HIGHLIGHTED,content_grid:i.Type.GRID,header:"header"},m=o.getMediaTypes();return(e=i.extend({init:function(e){this._super(),this._related=!1,this._isHighlightContent=!1,this._setDataBound=c.bind(this._setData,this),e&&this._setDataBound(e)},getLongTitle:function(){return this._longTitle||""},getImage:function(){return this._image},getDescription:function(){return this._description},getShortDescription:function(){return this._shortDescription||""},getLongDescription:function(){return this._longDescription||""},getCollectionDescription:function(){return this._collectionDescription||""},resolveEndpoint:function(e){var t,i,n=f.getInstance(),r=e&&e.asset?e.asset.getGuid():null;if(!e)return t=this._links.sectionUrl,"programavailability"===this._feedType.toLowerCase()&&a.getInstance().zones?t=c.addToQueryStringOfURL(t,{byMediaAvailabilityTags:a.getInstance().zones+",connectedTV"}):"all programmes - collections"!==this._label.toLowerCase()&&"program"!==this._feedType.toLowerCase()||!a.getInstance().geoTagsZones||(t=c.addToQueryStringOfURL(t,{byTags:a.getInstance().geoTagsZones})),/getRecommendations/.test(t)?s.getRecommendationsUrl(t):/highlights/.test(t)?(this._isHighlightContent=!0,s.getHighlightsUrl(t)):t;if(e.related){switch(this._setDataBound(e),i=e.fromPlayer,e.asset&&e.asset.getMediaType()){case"movie":t=i?c.addToQueryStringOfURL(n.getEndpointUrl()+"getRecommendations",o.getRecommendedParams(e.asset.getGuid(),"SIMILAR")):c.addToQueryStringOfURL(s.getFixedBaseUrl()+"-all-programs",{byProgramType:"extra",byCustomValue:"{relatedProgramGuid}{"+e.asset.getGuid()+"}"});break;case"series":t=e.asset.getId()&&!i?c.addToQueryStringOfURL(s.getFixedBaseUrl()+"-all-programs",{byProgramType:"extra",byCustomValue:"{relatedProgramGuid}{"+e.asset.getGuid()+"}"}):c.addToQueryStringOfURL(n.getEndpointUrl()+"getRecommendations",o.getRecommendedParams(e.asset.getEpisodeId()||e.asset.getGuid(),"SIMILAR"));break;default:t=c.addToQueryStringOfURL(n.getEndpointUrl()+"getRecommendations",o.getRecommendedParams(r,"SIMILAR"))}return t=c.addToQueryStringOfURL(t,{byMediaAvailabilityTags:a.getInstance().zones+",connectedTV",schema:"2.15"})}},formatItems:function(e,i,n){var r,s,o,a=[];return c.each(e,function(t){if(r=t.plprogram$programType||t.pltag$scheme,n&&r===m.SUBCATEGORY.type)a.push(u.resolve(t));else if(i)a.push(l.retrieveApi().then(function(e){return e.read("detail",{params:{mediaID:t.id,visionFactor:t.cw$visionFactor,playTime:t.cw$playTime}})}));else{switch(r=t.plprogram$programType||t.pltag$scheme,t._isHighlight=this._isHighlightContent,r){case m.SERIE.type:s=new d(t);break;case m.EPISODE.type:s=new h(t);break;case m.MOVIE.type:case m.CLIP.type:s=new g(t);break;case m.EXTRA.type:t.plprogram$programType="movie",s=new g(t);break;default:-1!==m.GENRE.types.indexOf(r)&&((o=c.getNested(this,"_links","genreUrl"))&&(t.id=o+t.title),c.isString(t.rte$mpxFeed)&&t.rte$mpxFeed.match(/feed.entertainment.tv.theplatform.eu/)&&(s=new p(t)))}s&&a.push(u.resolve(s))}},this),u.all(a)},_setData:function(e){var t=e.source;this._label=e.label,this._description=e.description||"",this._type=e.type&&(r[e.type]||i.Type[e.type.toUpperCase()])||i.Type.SINGLE,this._image=e.image||"",this._links=e.links,this._related=e.related,this._items=e.items||[],this._feedType=e.feedType||"",t&&(this._collectionDescription=t.getDescription&&t.getDescription(),this._longTitle=t.getLongTitle&&t.getLongTitle(),this._shortDescription=t.getShortDescription&&t.getShortDescription(),this._longDescription=t.getLongDescription&&t.getLongDescription())},transformFrom:function(e){var t=this;return this.formatItems(e.entries,e.title.match("CONTINUEWATCHING")).then(function(e){return t._items=e,t})},transformToCreate:function(){var e=a.getInstance(),t=n.getDevice();return u.resolve(t.encodeJson({mpx_token:e.mpxToken}))},prepare:function(){var r=this;return this._items.length||"header"===this._type?u.resolve(this):/rte-tst-int-all-schedules/.test(this._links.sectionUrl)||/rte-prd-prd-all-schedule/.test(this._links.sectionUrl)?l.retrieveEPGManager().then(function(e){var t=c.map(_.getAllChannels(),function(e){return e.getId()});return e.getCurrentItem(t,r._links.sectionUrl).then(function(i){var n=[];return c.each(t,function(e){var t=i[e];t&&n.push(t)}),r._items=n,u.resolve(this)})}):l.retrieveApi().then(function(e){return e.create(r)}).catch(function(){return this})}})).Type=i.Type,e}),define("smart-ott-appcore-api-rte-fincons/models/channel",["smart-ott-models/channel","rofl/lib/utils","rofl/lib/promise","smart-ott-appcore-api-rte-fincons/config"],function(e,i,t,n){"use strict";var r=n.getScheduleApiMappings().station;return e.extend({init:function(e,t){this._super(),this._id=e.id?/\/(\d.*)$/.exec(e.id)[1]:null,this._index=++t,this._callSign=e[r.callSign],this._isVirtual=e[r.isVirtual],this._label=e[r.title],this._image=i.getNested(e,r.thumbnails,"default",r.thumbnailsUrl),this._imageTitleCard=i.getNested(e,r.thumbnails,r.thumbnailsTitleCardUrl,r.thumbnailsUrl)},getCallSign:function(){return this._callSign||""},isVirtual:function(){return this._isVirtual},getCustomLabel:function(){return this._index||null}})}),define("smart-ott-appcore-api-rte-fincons/models/channels",["smart-ott-models/channels","rofl/lib/utils","smart-ott-appcore-api-rte-fincons/models/channel","smart-ott-appcore-api-rte-fincons/managers/api","smart-ott-appcore-api-rte-fincons/config"],function(e,t,n,i,r,s){"use strict";return e.extend({resolveEndpoint:function(){return i.getFixedBaseUrl()+"-all-stations"},validateCreateResponse:function(e){return!t.isEmpty(e.entries)},transformFrom:function(e){var i=r.getScheduleApiMappings().station.callSign;return t.each(e.entries,function(e,t){e[i]&&this._channels.push(new n(e,t))},this),this}})}),define("smart-ott-appcore-api-rte-fincons/models/connectcode",["antie/runtimecontext","rofl/lib/utils","smart-ott/config","smart-ott-appcore-api-rte-fincons/config","smart-ott-appcore-api-rte-fincons/managers/api","smart-ott-appcore-api-rte-fincons/apis/servicelayer"],function(e,t,i,n,r,s){"use strict";var o=e.getCurrentApplication().getConfiguration().title||"RTÉ Player",a=i._getAll().rte_ctv_remove_device_popup||"You need to remove the device from your RTE account before doing a new login";return{getConnectCode:function(){return r.getIsocode().then(t.bind(function(e){return s.getInstance().create("connectcode",{withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"},params:{isocode:e}}).then(function(e){return{code:e}})}))},isConnected:function(){return r.getIsocode().then(t.bind(function(e){return s.getInstance().create("connectcodelogin",{withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"},params:{isocode:e}}).catch(function(e){if(t.getNested(e,"status")===n.getLoginStatus().CODE_EXPIRED)return{title:o,error:a}})}))}}}),define("smart-ott-appcore-api-rte-fincons/models/detail",["smart-ott-models/detail","smart-ott-appcore-api-rte-fincons/managers/api","smart-ott-appcore-api-rte-fincons/config","smart-ott-appcore-api-rte-fincons/models/assets/movie","smart-ott-appcore-api-rte-fincons/models/assets/episode","smart-ott-appcore-api-rte-fincons/models/assets/serie","rofl/lib/utils","rofl/lib/promise","smart-ott/resolver","application/managers/session"],function(e,t,i,o,a,l,c,u,d,h){"use strict";var g=i.getMediaTypes();return e.extend({init:function(){this._super(),this._mediaId=null,this._mediaType=null},resolveEndpoint:function(e){return e.guid?(this._guid=e.guid,t.getFixedBaseUrl()+"-all-programs?byGuid="+e.guid):(this._mediaId=e.mediaID,this._mediaType=e.mediaType,h.isLoggedIn()&&(this._visionFactor=e.visionFactor,this._playTime=e.playTime),t.getFixedBaseUrl()+"-all-programs?byId="+e.mediaID)},transformFrom:function(e){var i,n=this,t=c.getNested(e,"entries")||[],r=c.getNested(e,"title")||"",s=/\/(\d+)/.exec(this._mediaId);if(!(i=this._guid&&1===t.length?t[0]:c.filter(t,function(e){return 0<=e.id.indexOf(this._mediaId)},this).pop()))throw new Error("The media ID "+s[1]+" cannot be loaded.");return i.collectionTitle=r,d.retrieveApi().then(function(e){var t;return c.hasNested(i,"plprogramavailability$media",0,"plmedia$publicUrl")?(t=i.plprogramavailability$media[0].plmedia$publicUrl,e.read("assets/selectorservice",{params:{mediaUrl:t}}).then(function(t){return(h.isLoggedIn()&&!n._visionFactor?e.read("bookmarking/readbookmark",{params:{mediaID:i.id,duration:i.plprogram$runtime||t.duration}}):u.resolve(null)).then(function(e){return n.createAsset(i,e,t)})})):n.createAsset(i)})},createAsset:function(e,t,i){var n,r=e.plprogram$programType,s=this._visionFactor&&e.plprogram$runtime&&this._visionFactor*e.plprogram$runtime||t&&t.getVideoPosition();switch(e.duration=Math.floor((e.plprogram$runtime||i.duration)/60),r){case g.SERIE.type:n=new l(e);break;case g.EPISODE.type:n=new a(e,s);break;case g.MOVIE.type:case g.CLIP.type:n=new o(e,s);break;case g.EXTRA.type:e.plprogram$programType="movie",n=new o(e,s,i.duration)}return n}})}),define("smart-ott-appcore-api-rte-fincons/models/device",["smart-ott-models/device","rofl/models/api/abstract","rofl/lib/promise","application/managers/session"],function(e,t,i,n){"use strict";return e.extend({isDeviceOnDomain:function(){return i.resolve(n.isLoggedIn())}})}),define("smart-ott-appcore-api-rte-fincons/models/epg/data",["rofl/models/api/abstract","smart-ott-appcore-api-rte-fincons/managers/api","rofl/lib/utils","application/managers/channel","smart-ott-appcore-api-rte-fincons/models/assets/broadcast","smart-ott-appcore-api-rte-fincons/config"],function(e,t,s,o,a,i){"use strict";var l=i.getScheduleApiMappings();return e.extend({init:function(){this._id=null,this._startTime=null,this._endTime=null,this._opts={}},resolveEndpoint:function(e){return e.channelIDs=s.map(e.channelIDs,function(e){return o.getChannelById(e).getCallSign()}),t.getScheduleUrl(e)},transformFrom:function(e){var t=this,i={},n=e.entries||[];return s.each(n,function(e){s.isArray(e[l.listings])&&s.each(e[l.listings],function(e){e[l.listingProgram]&&t._addListingToEpgData(i,e)})}),i},_addListingToEpgData:function(e,t){var i=/\/(\d.*)$/.exec(t[l.listing.stationId])[1],n=o.getChannelById(i),r={id:t[l.listingProgram][l.program.id],guid:t[l.listingProgram][l.program.guid],label:t[l.listingProgram][l.program.title],startTime:t[l.listing.startTime],endTime:t[l.listing.endTime],mediaPid:t[l.listing.mediaPid],mediaType:t[l.listingProgram][l.program.programType],image:s.getNested(t,l.listingProgram,l.program.thumbnails,"default",l.program.thumbnailsUrl)};return n&&(e[i]||(e[i]=[]),e[i].push(new a(r,n))),e}})}),define("smart-ott-appcore-api-rte-fincons/models/epg/epgverify",["rofl/models/api/abstract","smart-ott-appcore-api-rte-fincons/managers/api","smart-ott-appcore-api-rte-fincons/models/assets/media"],function(e,t,i){"use strict";return e.extend({resolveEndpoint:function(e){return i.addUrlSuffix(t.getMediaFeedUrl()+e.epgItem._mediaPid)},transformFrom:function(){return null}})}),define("smart-ott-appcore-api-rte-fincons/models/epg/virtual",["rofl/models/api/abstract","smart-ott-appcore-api-rte-fincons/managers/api","rofl/lib/utils","application/managers/channel","smart-ott-appcore-api-rte-fincons/models/assets/broadcast","smart-ott-appcore-api-rte-fincons/config"],function(e,t,l,c,u,i){"use strict";var d=i.getScheduleApiMappings();return e.extend({init:function(){this._id=null,this._startTime=null,this._endTime=null,this._opts={}},resolveEndpoint:function(e){return t.getWatchLiveUrlUrl(e.getCallSign())},transformFrom:function(e){var t,i,n,r,s,o,a={};return n=/\/(\d.*)$/.exec(e[d.virtual.stationId])[1],r=c.getChannelById(n),s=/([^/]+)\/?$/.exec(l.getNested(e,d.virtualCurrentListing,d.virtual.programId))[1],o=/([^/]+)\/?$/.exec(l.getNested(e,d.virtualNextListing,d.virtual.programId))[1],t=this._createListing(l.getNested(e,d.virtualCurrentListing),s),e[d.virtualNextListing]&&(i=this._createListing(l.getNested(e,d.virtualNextListing),o)),r&&(a={item:new u(t,r),next:i&&new u(i,r)}),a},_createListing:function(e,t){return{id:l.getNested(e,d.virtual.id),programId:l.getNested(e,d.virtual.programId),guid:t,label:l.getNested(e,d.virtual.title),startTime:l.getNested(e,d.virtual.startTime),endTime:l.getNested(e,d.virtual.endTime),episodeNumber:l.getNested(e,d.virtual.episodeNumber),programRatings:l.getNested(e,d.virtual.programRatings),image:l.getNested(e,d.virtual.thumbnails,"default",d.virtual.thumbnailsUrl)}}})}),define("smart-ott-appcore-api-rte-fincons/models/episodes",["rofl/models/api/abstract","smart-ott-appcore-api-rte-fincons/managers/api","smart-ott-appcore-api-rte-fincons/models/assets/episode","rofl/lib/utils","rofl/lib/promise","smart-ott/resolver","smart-ott-appcore-api-rte-fincons/config","application/managers/session"],function(e,o,n,a,r,s,t,l){"use strict";var c=t.getSorts();return e.extend({init:function(){},resolveEndpoint:function(e){var t=e.seasonsID,i=e.page||1,n=50*(i-1)+1,r=50*i,s={bySeriesId:e.seriesID,sort:c.Episodes,range:n+"-"+r,count:!0,byProgramType:"episode"};return t&&(e.bytvSeasonId=t),o.getFixedBaseUrl()+"-all-programs?"+a.serialize(s)},transformFrom:function(t){var e=a.map(t.entries,function(i){return s.retrieveApi().then(function(t){var e=a.getNested(i,"plprogramavailability$media",0,"plmedia$publicUrl");return e?t.read("assets/selectorservice",{params:{mediaUrl:e}}).then(function(e){return i.duration=Math.floor((i.plprogram$runtime||e.duration)/60),(l.isLoggedIn()?t.read("bookmarking/readbookmark",{params:{mediaID:i.id,duration:i.plprogram$runtime}}):r.resolve(null)).then(function(e){var t=e?e.getVideoPosition():null;return new n(i,t)})}):r.resolve(new n(i))})});return r.all(e).then(function(e){return{episodes:e,entryCount:t.entryCount,totalResults:t.totalResults,startIndex:t.startIndex}})}})}),define("smart-ott-appcore-api-rte-fincons/models/event",["smart-ott-models/event","antie/runtimecontext","rofl/lib/utils","rofl/lib/promise","application/managers/event/list","smart-ott-appcore-api-rte-fincons/apis/servicelayer","smart-ott-appcore-api-rte-fincons/managers/authentication"],function(e,a,l,c,u,i,d){"use strict";var h,g;return e.extend({resolveEndpoint:function(){return"trackEvent"},transformToCreate:function(e){return c.resolve(this._getTrackingData(e)||{})},_getPlayerEventTrackingData:function(e){var t;return{object:{itemType:"VIDEO_CONTENT",itemId:(t=(e=e||{}).asset).getId()},objectType:"ITEM",eventType:"View",trackId:t.getGuid(),visionFactor:e.visionFactor||"0.0",playTime:e.progress||"0"}},_getTrackingData:function(e){var t,i,n=d.getInstance(),r=a.getDevice(),s=e.params,o=c.reject("Unhandled tracking event.");switch(e.event){case u.PAGE.READY:if("player"!==s.pageName)return o;h=s.asset,t=this._getPlayerEventTrackingData({asset:h});break;case u.PLAYER.PAUSED:case u.PLAYER.COMPLETE:case u.PLAYER.STOPPED:if(!h||s.isTrailer||s.isAd)return o;if(!(i=.25*Math.floor(s.progress/s.duration/.25))||i===g)return o;g=i,t=this._getPlayerEventTrackingData({asset:h,progress:s.progress,visionFactor:g});break;default:return o}return l.extend(t,{mpx_token:n.mpxToken,sessionId:r.getUdid(),platform:"bigscreen"})},track:function(e){var t=i.getInstance();e&&t.create(this,{headers:{"Content-Type":"application/json"},data:e})}})}),define("smart-ott-appcore-api-rte-fincons/models/faq",["smart-ott-models/browse","rofl/lib/promise","smart-ott-appcore-api-rte-fincons/managers/api","rofl/lib/utils","smart-ott/resolver"],function(e,r,t,s,o){"use strict";var i=t.getLanguage();return e.extend({init:function(){this._super()},resolveEndpoint:function(){return t.getBaseUrl("base_url")+i+"/FAQ-sidebar.json"},validateReadResponse:function(e){return!s.isEmpty(e)},transformFromRead:function(e){var i=this,n=[];return o.retrieveApi().then(function(t){return s.each(e,function(e){n.push(t.read("faq/section",{params:{item:e}}).then(function(e){i._sections.push(e)}))}),r.all(n)}).then(function(){return i})},prepare:function(){return r.resolve(this)}})}),define("smart-ott-appcore-api-rte-fincons/models/faq/section",["rofl/models/api/abstract","rofl/lib/utils","rofl/lib/promise"],function(e,i,n){"use strict";return e.extend({resolveEndpoint:function(e){return i.getNested(e,"item","sub_sections")[0].ref_url},validateReadResponse:function(e){return!!e[0].title},transformFromRead:function(e){var t;return e=e.pop(),t=i.hasop(e,"sub_sections")?{key:e.title.toLowerCase(),name:e.title,questions:i.map(e.sub_sections,function(e){return{name:e.title,title:e.content.title,text:e.content.message}})}:{key:e.title.toLowerCase(),name:e.title,text:{title:e.content.title,text:e.content.message}},n.resolve(t)}})}),define("smart-ott-appcore-api-rte-fincons/models/menu",["smart-ott-models/menu","smart-ott-appcore-api-rte-fincons/managers/api","rofl/lib/utils","smart-ott-appcore-api-rte-fincons/models/menu/item","antie/runtimecontext","rofl/lib/l10n"],function(e,t,i,n,r,s){var o=t.getLanguage(),a=s.getInstance(),l=r.getCurrentApplication().getDevice().getBrand();return e.extend({resolveEndpoint:function(){return t.getBaseUrl("base_url")+o+(-1!==l.indexOf("saorview")?"/saorview_menu.json":"/bigscreen_menu_nolive.json")},transformFrom:function(e){var t=[];return i.each(e.items,function(e){t.push(new n(e))}),t.push(new n({icon:"account",label:a.get("account.log_in"),type:"account"})),this._items=t,this}})}),define("smart-ott-appcore-api-rte-fincons/models/menu/actions/epg",["rofl/lib/promise","smart-ott-models/menu/action"],function(e,t){"use strict";return t.extend({prepare:function(){return this._route="epgModal",e.resolve(this)}})}),define("smart-ott-appcore-api-rte-fincons/models/menu/item",["smart-ott-models/menu/item","smart-ott-models/menu/actions/browse","smart-ott-models/menu/actions/epg","smart-ott-models/menu/actions/search","smart-ott-models/menu/actions/settings","smart-ott-appcore-api-rte-fincons/menu/actions/account","rofl/lib/utils","smart-ott/resolver"],function(r,s,o,a,l,c,u,d){"use strict";var h,g={channels:r.Types.CHANNELS,page:r.Types.DASHBOARD,search:r.Types.SEARCH,submenu:r.Types.SUBMENU,settings:r.Types.SETTINGS,account:r.Types.ACCOUNT,epg:r.Types.CHANNELS};return(h=r.extend({init:function(t,e){var i,n=this;this._super(),this._icon=t.icon.toLowerCase(),this._label=t.label,this._parent=e,this._type=(i=t.type,g[i]),this._action=function(e,t,i){switch(e){case r.Types.CHANNELS:return new o({args:"guide"});case r.Types.DASHBOARD:return new s({args:{data:{reference:t.reference},label:t.label,parent:i}});case r.Types.SEARCH:return new a;case r.Types.SETTINGS:return new l;case r.Types.ACCOUNT:return new c}}(this._type,t,e),this._reference=t.reference,this._type===r.Types.SUBMENU&&t.items?this._children=u.map(t.items,function(e){return new h(e,n)}):this._type===r.Types.SUBMENU&&d.retrieveApi().then(function(e){return e.read("menu/reference",{params:{url:t.reference}})}).then(function(e){n._children=u.map(e,function(e){return e._parent=n,e.getAction()&&e.getAction()._args&&(e.getAction()._args.parent=e._parent),e})})},getReference:function(){return this._reference}})).Types=r.Types,h}),define("smart-ott-appcore-api-rte-fincons/models/menu/reference",["smart-ott-models/menu","rofl/lib/utils","rofl/lib/promise","smart-ott-appcore-api-rte-fincons/managers/api","smart-ott-appcore-api-rte-fincons/models/browse/section","smart-ott-appcore-api-rte-fincons/managers/authentication","smart-ott-appcore-api-rte-fincons/models/menu/reference/entry"],function(e,a,t,l,c,i,u){"use strict";return e.extend({resolveEndpoint:function(e){return e.url},transformFrom:function(e){var o=[];return a.each(e.entries,function(e){var t=e.id.split("/"),i=t[t.length-1],n=l.getFixedBaseUrl(),r=n+"-subcategory?byCustomValue={parentProgramTagId}{"+i+"}",s=n+"-all-prog-light?byTags=subCategory:";e.url=n+"-subcategory?"+a.serialize({byCustomValue:"{parentProgramTagId}{"+e.guid+"}"}),e.sections=[new c({label:e.title,links:{sectionUrl:r,subCategoryBaseUrl:s}})],o.push(new u(e))},this),t.resolve(o)}})}),define("smart-ott-appcore-api-rte-fincons/models/menu/reference/entry",["smart-ott-models/menu/item","smart-ott-models/menu/actions/browse"],function(t,i){"use strict";return t.extend({init:function(e){this._super(),this._icon=null,this._label=e.title,this._type=t.Types.VOD,this._action=new i({args:{data:{reference:e.url},label:e.title,sections:e.sections||[]}})}})}),define("smart-ott-appcore-api-rte-fincons/models/parentalcontrol/parentalmediarules",["smart-ott-models/parentalcontrol"],function(e){"use strict";return e.extend({hasLocalData:function(){return!0},getLocalData:function(e){return this._hasParentalRules="MA"===e.params.asset.getParentalRating(),this}})}),define("smart-ott-appcore-api-rte-fincons/models/parentalcontrol/validatepin",["smart-ott-models/parentalcontrol","smart-ott-appcore-api-rte-fincons/apis/servicelayer","rofl/lib/promise","rofl/lib/l10n"],function(e,t,i,n){"use strict";return e.extend({init:function(){this._super()},resolveEndpoint:function(){return t.getInstance().getEndpointUrl()+"idm/account/ctv/pinCheck"},validateCreateResponse:function(e){return!!e.message},transformFromCreate:function(e){var t=n.getInstance();return 0===e.status?(this._isValid=!0,this._message=""):(this._isValid=!1,this._message=t.get("account.incorrect_pin")),i.resolve(this)}})}),define("smart-ott-appcore-api-rte-fincons/models/parentalpin",["smart-ott-models/parentalpin","smart-ott-appcore-api-rte-fincons/apis/servicelayer","rofl/lib/promise"],function(i,e,n){"use strict";var r=0,s=7007,t=i.extend({init:function(){this._super(),this._pinOnCheck=!1},resolveEndpoint:function(){return e.getInstance().getEndpointUrl()+"idm/account/ctv/pinCheck"},transformToCreate:function(e){return""===e.pin&&(this._pinOnCheck=!0,e.pin="0000"),n.resolve(e)},validateCreateResponse:function(e){return!!e.message},transformFromCreate:function(e){var t=e.status;return this._pinOnCheck?this._state=t===s?i.States.UNSET:i.States.OK:this._state=t===r?i.States.OK:i.States.INCORRECT,n.resolve(this)}});return t.LengthLimits={min:1,max:4},t}),define("smart-ott-appcore-api-rte-fincons/models/search",["smart-ott-models/search","smart-ott-appcore-api-rte-fincons/managers/api","smart-ott-appcore-api-rte-fincons/config","smart-ott-appcore-api-rte-fincons/models/assets/episode","smart-ott-appcore-api-rte-fincons/models/assets/serie","smart-ott-appcore-api-rte-fincons/models/assets/movie","rofl/lib/utils","smart-ott-appcore-api-rte-fincons/managers/authentication","smart-ott/config"],function(e,n,t,r,s,o,a,l,i){"use strict";var c=t.getMediaTypes(),u=i._getAll().search_params||{};return e.extend({resolveEndpoint:function(e){var t,i="";return i=e.byId?(e.text="","&byId="+e.byId.join("|")):1===e.mediaTypes.length?this.getParams(e.mediaTypes[0]):this.getParams(),e.light?t="-all-prog-light?":-1<i.indexOf("{searchString}")?(t="-search?",i=i.replace(/{searchString}/g,e.text)):t="-search?q=*"+e.text+"*",a.addToQueryStringOfURL(n.getFixedBaseUrl()+t+i,{byMediaAvailabilityTags:l.getInstance().zones+",connectedTV"})},transformFrom:function(e){var i=[];return a.each(e.entries,function(e){var t=e.plprogram$programType;t===c.SERIE.type?i.push(new s(e)):t===c.EPISODE.type?i.push(new r(e)):t!==c.MOVIE.type&&t!==c.CLIP.type||i.push(new o(e))}),this._assets=i,this},getParams:function(t){var e,i="";return e=a.filter(a.keys(u),function(e){return-1<e.indexOf(t||"allVideos")}),a.isEmpty(e)?t&&(i="&byProgramType="+("serie"===t?"series":t)):a.each(u[e[0]],function(e){i+="&"+e.name+"="+e.value}),i}})}),define("smart-ott-appcore-api-rte-fincons/models/session",["rofl/lib/utils","rofl/lib/promise","smart-ott-models/session","smart-ott/resolver","smart-ott-appcore-api-rte-fincons/managers/api","smart-ott-appcore-api-rte-fincons/apis/servicelayer","smart-ott-appcore-api-rte-fincons/models/account","smart-ott-appcore-api-rte-fincons/managers/authentication"],function(n,r,e,t,s,o,i,a){"use strict";return e.extend({init:function(e){this._super(e),n.getNested(e,"activated")&&this.transformFromCreate(e)},transformFromCreate:function(e){var t;return t=(e=e||{}).mpx_token,this._identity=new i(e),this._sessionVars={mpxToken:t,isAnonymous:!1,accountData:e},this},regularLogin:function(e){return r.resolve(this)},refreshSession:function(e){return e&&!e.isAnonymous&&e.mpxToken&&e.accountData?(this._identity=new i(e.accountData),this._sessionVars=n.extend({},this._sessionVars,e),this.autologin()):r.resolve(this)},autologin:function(){var t={"Content-Type":"application/json"},i={mpxToken:this._sessionVars.mpxToken};return s.getIsocode().then(n.bind(function(e){return o.getInstance().create("autologin",{headers:t,data:i,params:{isocode:e}}).then(n.bind(function(e){var t=a.getInstance();return t.mpxToken=e.mpxToken,t.zones=e.zones,t.geoTagsZones=e.geoTagsZones,this._sessionVars.mpxToken=e.mpxToken,r.resolve(this)},this))},this))},doLogin:function(){return s.getIsocode().then(n.bind(function(e){return o.getInstance().create("connectcodelogin",{withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"},params:{isocode:e}})})).then(function(e){return!1===e.activated?r.reject():r.resolve(e)})},anonymousLogin:function(){return s.getIsocode().then(n.bind(function(e){return o.getInstance().read("anonymouslogin",{params:{isocode:e}}).then(n.bind(function(e){var t=a.getInstance();return t.mpxToken=e.mpxToken,t.zones=e.zones,t.geoTagsZones=e.geoTagsZones,this._sessionVars.mpxToken=e.mpxToken,this._sessionVars.isAnonymous=!0,this},this))},this))},retrieveIdentity:function(){return this._identity?r.resolve(this._identity):r.reject("No identity was set on the session.")},terminateSession:function(){var e,t,i=n.getNested(this,"_sessionVars","mpxToken");return i?(e={"Content-Type":"application/json"},t={mpxToken:i},o.getInstance().create("logout",{headers:e,data:t})):r.resolve(this)}})}),define("application/components/account",["antie/runtimecontext","antie/widgets/component","rofl/lib/utils","rofl/lib/l10n","application/managers/session","application/views/account","product-layer/dialog/widgets/command","smart-ott/config","application/managers/device","application/managers/localpreferences","antie/events/keyevent","application/managers/event"],function(e,t,i,n,r,s,o,a,l,c,u,d){"use strict";var h,g=e.getCurrentApplication(),p=new s("account"),f=a.getFeature("connect"),_=n.getInstance();return t.extend({init:function(){this._super(),this._setupView(),this._subtitlesStylePressedBound=i.bind(this._subtitlesStylePressed,this)},_setupView:function(){this._onBeforeShowBound=i.bind(this._onBeforeShow,this),this._onAfterHideBound=i.bind(this._onAfterHide,this),this._onKeyDownBound=i.bind(this._onKeyDown,this),this.addEventListener("beforeshow",this._onBeforeShowBound),this.addEventListener("afterhide",this._onAfterHideBound),this.addEventListener("keydown",this._onKeyDownBound),this.appendChildWidget(p)},_onBeforeShow:function(e){var t=p.getLogout(),i=p.getProfilesButton(),n=p.getFriendsButton(),r=p.getFavoritesButton(),s=p.getWatchlistButton(),o=p.getSubtitlesStyleButton(),a=p.getHistoryButton(),l=p.getPurchaseHistoryButton(),c=d.getInstance();this._update(),h=e.args.facebookId,t.focus(),p.prepareFocusOfLastFeature(),t.addEventListener("select",this._signoutPressed),i&&i.addEventListener("select",this._profilesPressed),n&&n.addEventListener("select",this._friendsPressed),r&&r.addEventListener("select",this._favoritesPressed),s&&s.addEventListener("select",this._watchlistPressed),o&&(this._updateSubtitlesStyleButton(),o.addEventListener("select",this._subtitlesStylePressedBound)),a&&a.addEventListener("select",this._historyPressed),l&&l.addEventListener("select",this._purchaseHistoryPressed),p.getHeader().show(),g.hideLoader(),c.publish(c.eventList.PAGE.SHOW,{pageName:"account"})},_onAfterHide:function(){var e=p.getProfilesButton(),t=p.getFriendsButton(),i=p.getFavoritesButton(),n=p.getWatchlistButton(),r=p.getSubtitlesStyleButton(),s=p.getHistoryButton(),o=p.getPurchaseHistoryButton();p.getHeader().hide(),p.getLogout().removeEventListener("select",this._signoutPressed),e&&e.removeEventListener("select",this._profilesPressed),t&&t.removeEventListener("select",this._friendsPressed),i&&i.removeEventListener("select",this._favoritesPressed),n&&n.removeEventListener("select",this._watchlistPressed),r&&r.removeEventListener("select",this._subtitlesStylePressedBound),s&&s.removeEventListener("select",this._historyPressed),o&&o.removeEventListener("select",this._purchaseHistoryPressed)},_signoutPressed:function(){var t={keepHistory:!1},e={title:_.get("signout.title"),content:_.get("signout.message"),commands:[new o(_.get("yes"),function(){r.clearSession().then(i.bind(r.anonymousLogin,r)).then(function(){f?l.isDeviceOnDomain().then(function(e){e?g.route("login",t):g.route("connect",t),g.getComponent("modal").hide()}).catch(function(){g.route("login",t),g.getComponent("modal").hide()}):g.route("login",t)})}),new o(_.get("no"),function(){g.getComponent("modal").hide()})],cancelCommandIndex:1};g.route("dialog",e)},_profilesPressed:function(){g.route("selectProfile")},_friendsPressed:function(){var e=a.getApplication().appname.replace(/\s+/g,"");h?g.route("friends",{facebookId:h}):g.route("dialog",{title:_.get("friends.create.title"),content:_.get("friends.create.content",{link:_.get("friends.create.link."+e)}),commands:new o(_.get("back"),function(){g.getComponent("main").focus(),g.getComponent("modal").back()}),cancelCommandIndex:0})},_favoritesPressed:function(){g.route("favourites",{label:"favourites"})},_watchlistPressed:function(){g.route("watchlist",{label:"watchlist"})},_subtitlesStylePressed:function(){var e=c.getForCurrentAccount();e.subtitlesStyle===c.SUBTITLES_STYLE_CUSTOM?e.subtitlesStyle=c.SUBTITLES_STYLE_DEFAULT:e.subtitlesStyle=c.SUBTITLES_STYLE_CUSTOM,c.setForCurrentAccount(e),this._updateSubtitlesStyleButton()},_updateSubtitlesStyleButton:function(){var e=p.getSubtitlesStyleButton();c.getForCurrentAccount().subtitlesStyle===c.SUBTITLES_STYLE_CUSTOM?(e.addClass(c.SUBTITLES_STYLE_CUSTOM),e.removeClass(c.SUBTITLES_STYLE_DEFAULT)):(e.addClass(c.SUBTITLES_STYLE_DEFAULT),e.removeClass(c.SUBTITLES_STYLE_CUSTOM))},_historyPressed:function(){g.route("history")},_purchaseHistoryPressed:function(){g.route("purchaseHistory")},_update:function(){var e,t=p.getName(),i=p.getEmail();r.isLoggedIn()&&(e=r.getSession().getIdentity(),t&&t.setText(e.getFirstName()+" "+e.getLastName()),i&&i.setText(e.getEmail()))},_onKeyDown:function(e){e.keyCode===u.VK_BACK&&this.parentWidget.back()}})}),define("application/components/browse",["rofl/widgets/component","application/views/browse","rofl/lib/utils","rofl/lib/promise","smart-ott/resolver","antie/runtimecontext","smart-ott-models/menu/item","application/widgets/browse/rows/grid","antie/events/keyevent","application/utils/routing","rofl/lib/l10n","product-layer/dialog/widgets/command","application/managers/channel","rofl/decorators/pointer","rofl/decorators/scrollable","application/widgets/browse/rows/slider","application/managers/error","application/managers/event","application/events/browsechangedevent"],function(e,t,u,i,o,n,c,d,r,s,a,l,h,g,p,f,_,m,v){"use strict";var C=n.getCurrentApplication(),A=C.getConfiguration().dashboardNames,E=a.getInstance(),I=C.getLayout().modifier,y=Math.round(15*(I||1)+26);return e.extend({_menuResponse:null,_pageName:null,init:function(){this._super(),this._view=this.appendChildWidget(new t),this._onSelectedItemChangedBound=u.bind(this._onSelectedItemChanged,this),this._onScrollChangedBound=u.bind(this._onScrollChanged,this),this._onBeforeRenderBound=u.bind(this._onBeforeRender,this),this._onBeforeShowBound=u.bind(this._onBeforeShow,this),this._onBeforeHideBound=u.bind(this._onBeforeHide,this),this._onSelectBound=u.bind(this._onSelect,this),this._onKeyDownBound=u.bind(this._onKeyDown,this),this._onBackPressedBound=u.bind(this._onBackPressed,this),this._onAfterShowBound=u.bind(this._onAfterShow,this),this._lastBrowseChangedEventTimestamp=null,this._hasBeenDisplayed=!1,this._scrollAnimationOptions={duration:250,easing:"easeInOut",skipAnim:!1,fps:60},this.addEventListener("beforerender",this._onBeforeRenderBound),this.addEventListener("beforeshow",this._onBeforeShowBound),this.addEventListener("beforehide",this._onBeforeHideBound),this.addEventListener("select",this._onSelectBound),this.addEventListener("keydown",this._onKeyDownBound),this.addEventListener("aftershow",this._onAfterShowBound),this.decorate([g,p]),this._onPagingLimitBound=u.bind(this._onPagingLimit,this),this.addEventListener("paginglimit",this._onPagingLimitBound)},_onBeforeRender:function(t){var e=this._view;if(t.fromBack)return this._onBrowseChangedBound=u.bind(function(e){this._lastBrowseChangedEventTimestamp!==e.timestamp&&(this._lastBrowseChangedEventTimestamp=e.timestamp,this._loadContent(t.args))},this),C.addEventListener("$!"+v.TYPE,this._onBrowseChangedBound),e.setStyleTo("display","block"),void e.addEventListeners();this._loadContent(t.args)},_loadContent:function(e){var s,t,n,r,o,a=this._view,l=this,c=e.id||"default";C.showLoader(),(s=a.getCarousel()).removeChildWidgets(),this.unsetPagingScrollOffset(),this._scrollOffsetHandler=s,this._getBrowsePage(u.clone(e)).then(function(e){return e.prepare()}).then(function(e){var i;if(C.hideLoader(),a.setStyleTo("display","block"),0<e.getSections().length)for(a.setBrowsePage(e,!0),a.hasAligner()&&l.scrollSetupSimple({container:l.parentWidget,carousel:s,clickScrollStep:2}),l.pixelScroll(0),(o=s.getChildWidgetByIndex(0))instanceof d?l._handleGridScroll(o):s.alignToIndex(0),i=!1,u.each(e.getSections(),function(e){var t=e.getItems();i=i||t&&0<t.length}),i||a.showError(E.get("browse.error."+c)),t=s.getChildWidgetCount(),r=function(r){r instanceof f||r.addEventListener("beforealign",function(){var e=s.getIndexOfChildWidget(r),t=s.getCurrentScrollOffset(),i=s.getWidgetIndexAtOffset(t),n=e-i!=0;a.hasAligner()&&!a.verticalAlignInProgress()&&n&&(1!==e||s.getChildWidgetByIndex(0).isFocusable()||(e-=1),l.itemScroll(e-i,l._scrollAnimationOptions))})},n=0;n<t;n++)r(s.getChildWidgetByIndex(n));else a.showError(E.get("browse.error."+c))}).catch(function(){C.hideLoader(),_.showErrorDialogAndReturnToMenu({alternativeActionLabel:"retry",alternativeActionCallback:function(){l._loadContent(e)}})})},_onBeforeShow:function(e){var t=this._view,i=t.getCarousel(),n=i.getChildWidgetByIndex(0),r=e.args||{},s=m.getInstance();this._pageName=r.analyticsPageName||r.label||"",this._parentPage=r.parent||"",this._showOrHideHeader(0<i.getActiveChildIndex()),this._hasToHideHeader=void 0,i.addEventListener("selecteditemchange",this._onSelectedItemChangedBound),t.getBackButton().addEventListener("select",this._onBackPressedBound),this.addEventListener("scrolllimit",this._onScrollChangedBound),this._hasBeenDisplayed||"favourites"===this._pageName||s.publish(s.eventList.PAGE.SHOW,{pageName:"Landing"}),this._pageName&&s.publish(s.eventList.PAGE.SHOW,{pageName:this._pageName,parentPage:this._parentPage}),this._hasBeenDisplayed=!0,n instanceof d&&this._handleGridScroll(n)},_handleGridScroll:function(i){this.pixelScrollHandler=function(e,t){return i.scrollByPixels(e,t)},this.itemScrollHandler=function(e,t){i.scrollByItems(e,t)},this.setScrollAnimHolder(i),this.initScrollContainer(i),this.pixelScroll(0),this.setPagingScrollOffset(300)},getCurrentScrollOffset:function(){return this._scrollOffsetHandler.getCurrentScrollOffset()},_onAfterShow:function(){this.showScrollArrows(!0)},getMaximumOffset:function(){return this._scrollOffsetHandler.getMaximumOffset()},_onPagingLimit:function(){var e=this;this._scrollOffsetHandler instanceof d&&!1===this._scrollOffsetHandler.getMoreItems({onComplete:function(){e.pixelScroll(-1)}})&&this.unsetPagingScrollOffset()},_onBeforeHide:function(){var e=this._view;e.setStyleTo("display","none"),e.getHeader().hide(),e.getCarousel().removeEventListener("selecteditemchange",this._onSelectedItemChangedBound),e.getBackButton().removeEventListener("select",this._onBackPressedBound),e.removeEventListeners(),this.removeEventListener("scrolllimit",this._onScrollChangedBound),this._onBrowseChangedBound&&(C.removeEventListener("$"+v.TYPE,this._onBrowseChangedBound),this._onBrowseChangedBound=null),this.scrollCleanup(),C.hideLoader()},_onBackPressed:function(){this._goBack()},_goBack:function(){var e,t;try{for(;!(t=(e=(e||this).getActiveChildWidget()).hasClass("no-results"))&&e;);}catch(e){t=!1}this.parentWidget&&this.parentWidget._historyStack.length?this.parentWidget.back():t?C.route("browse"):this._exitOnBack&&C.exit()},_onKeyDown:function(e){switch(e.keyCode){case r.VK_BACK:this._goBack()}},_onSelectedItemChanged:function(e){var t,i=this._view.getCarousel(),n=i.getActiveChildWidget();n instanceof d?(t=0<Math.floor(n.getActiveChildWidgetIndex()/d.DEFAULT_COLS)&&n.getRows()>d.VISIBLE_ROWS,this._showOrHideHeader(t)):e.target===i.getMask().getWidgetStrip()&&(t=this.hasToHideHeader()&&0<i.getActiveChildIndex(),this._showOrHideHeader(t))},hasToHideHeader:function(){return void 0===this._hasToHideHeader&&(this._hasToHideHeader=this._calculateHasToHideHeader()),this._hasToHideHeader},_calculateHasToHideHeader:function(){var e=this._view.getCarousel(),t=e.getCols?e.getCols():e.getChildWidgetCount(),i=e.getMask();return i.getLength()<i.getWidgetStrip().getLengthToIndexIncludingWidget(t-1)+y},_onScrollChanged:function(e){var t=this._view.getCarousel(),i=t.getChildWidgetByIndex(0);i instanceof d?this._showOrHideHeader(0<i.getCurrentScrollOffset()):e.target===this&&this._showOrHideHeader(0<t.getCurrentScrollOffset())},_onSelect:function(e){var t=e.target.getDataItem();s.routeToAsset(t)},_shouldFallBackToDashboard:function(e){var t,i=!!~A.indexOf(this._pageName.toLowerCase()),n=!u.isEmpty(e);return t=!!((e=e||{}).genreID||e.sections||e.data),i||!n||!t},_getBrowsePage:function(n){var r=this,s={};return new i(function(t,e){var i=function(){o.retrieveModel("browse").then(function(e){t(new e(n))},e)};r._shouldFallBackToDashboard(n)?(r._exitOnBack=!0,s={menuResponse:r._menuResponse,opts:n,browseModelFunction:i},r._menuResponse?r._buildDashboardSection(s):o.retrieveApi().then(function(e){return e.read("menu")}).then(function(e){r._menuResponse=e,s.addLiveRowSection=!0,s.menuResponse=r._menuResponse,r._buildDashboardSection(s)}).catch(e)):(r._exitOnBack=!0,i())})},_buildDashboardSection:function(e){var t,i,n=e.menuResponse,r=e.opts,s=e.browseModelFunction,o=e.addLiveRowSection,a=n.getItemByType(c.Types.CHANNELS),l=a?a.getId():null;if(t=u.filter(n.getItems(),function(e){return e.getType()===c.Types.DASHBOARD}),u.isEmpty(t))throw new Error("There is no route available for ID: "+r.id);i=t[0],u.extend(r,i.getAction().getArguments()),!l||!o&&r.sections.length?s():this._getDashboardLiveRowSection(l).then(function(e){e&&r.sections.unshift(e),s()}).catch(function(){C.hideLoader(),_.showErrorDialogAndReturnToMenu({title:E.get("browse.error.no_epg_data.title"),content:E.get("browse.error.no_epg_data.content"),alternativeActionLabel:E.get("continue"),alternativeActionCallback:function(){s()}},!0)})},_getDashboardLiveRowSection:function(t){var r;return o.retrieveApi().then(function(e){return i.all([e.read("channels",{data:{channelId:t}}),o.retrieveEPGManager()])}).then(function(e){var t=e[0],i=e[1];return h.setChannels(t.getAllChannels()),r=t.getAllChannels().map(function(e){return e.getId()}),i.getCurrentItem(r)}).then(function(i){var n=[];return u.each(r,function(e){var t=i[e];t&&n.push(t)}),!!n.length&&{label:"Now on Air",type:"double",items:n}})},_showOrHideHeader:function(e){var t=this._view;e?t.getHeader().hide():t.getHeader().show()}})}),define("application/components/browse/personal-list",["application/components/browse","smart-ott/resolver","rofl/lib/promise","rofl/lib/utils"],function(e,i,n,r){"use strict";var s="favourites",o="watchlist",a="favourites",l="watchlist";return e.extend({_onBeforeRender:function(e){var t=r.clone(e);t.fromBack=!1,this._super(t)},_getBrowsePage:function(t){var e;switch(t.id){case o:e=l;break;case s:e=a;break;default:return n.reject(new Error("Unsupported personal list id: "+t.id))}return i.retrieveModel("account/"+e).then(function(e){return n.resolve(new e(t))})}})}),define("application/components/connect",["rofl/widgets/component","rofl/events/keyevent","rofl/lib/utils","smart-ott/config","rofl/widgets/image","rofl/widgets/container","rofl/widgets/label","antie/widgets/verticallist","rofl/widgets/button","rofl/lib/l10n","antie/runtimecontext","application/managers/session","application/managers/event","application/managers/event/list"],function(e,t,i,n,r,s,o,a,l,c,u,d,h,g){"use strict";var p=u.getCurrentApplication(),f=n.getLogo(),_=c.getInstance(),m=n.getFeature("connect"),v=n.getApplication().appname.replace(/\s+/g,"");return e.extend({init:function(){this._super("connect"),this._onKeyDownBound=i.bind(this._onKeyDown,this),this._onSelectBound=i.bind(this._onSelect,this),this._eventManager=h.getInstance(),this._build()},_build:function(){var e=this._buildDescription(),t=this._buildLogo(),i=this._buildOptions(),n=new s;n.addClass("connect-container"),n.appendChildWidget(e),n.appendChildWidget(t),n.appendChildWidget(i),this.appendChildWidget(n)},_buildDescription:function(){var e=this._title=new o(_.get("connect.title."+v)),t=this._subtitle=new o(_.get("connect.subtitle."+v)),i=this._description=new s("description");return e.addClass("title"),t.addClass("subtitle"),i.appendChildWidget(e),i.appendChildWidget(t),i},_buildLogo:function(){var e=new r("logo",f);return e.addClass("logo"),e},_buildOptions:function(){var t=new a;return t.addClass("connect-options"),i.each(m.options,function(e){t.appendChildWidget(this._buildOption(e))},this),t},_buildOption:function(e){var t=new l(e),i=new o(_.get("connect.options."+e));return t.addClass("option"),t.appendChildWidget(i),t},onBeforeShow:function(){this.addEventListener("keydown",this._onKeyDownBound),this.addEventListener("select",this._onSelectBound),this.focus()},onBeforeHide:function(){this.removeEventListener("keydown",this._onKeyDownBound),this.removeEventListener("select",this._onSelectBound)},_onKeyDown:function(e){e.keyCode===t.VK_BACK&&this._goBack()},_onSelect:function(e){var t={keepHistory:!1},i=this;"anonymous"===e.target.id?d.anonymousLogin().then(function(){i._eventManager.publish(g.INPUT.SELECT,{button:e.target.id,pageName:"connect"}),p.route("browse",t)}):(i._eventManager.publish(g.INPUT.SELECT,{button:e.target.id,pageName:"connect"}),p.route(e.target.id))},_goBack:function(){this.parentWidget&&this.parentWidget._historyStack.length?this.parentWidget.back():p.exit()}})}),define("application/components/connectcode",["components/connect-code/src/js/component","rofl/events/keyevent","rofl/lib/utils","antie/runtimecontext","rofl/lib/promise","smart-ott/resolver","product-layer/dialog/widgets/command","rofl/lib/l10n","smart-ott/config","smart-ott-models/action/item","application/managers/session","application/managers/bookmarking/bookmark","application/managers/event"],function(e,t,s,i,n,r,o,a,l,c,u,d,h){"use strict";var g=l.getFeature("connectcode"),p=i.getCurrentApplication(),f=a.getInstance(),_=l.getApplication().appname.replace(/\s+/g,""),m={navigation:"vertical",cssClass:"connectcode",steps:{widget:null,config:{title:f.get("connectcode.steps.title."+_),subtitle:f.get("connectcode.steps.subtitle."+_),items:f.get("connectcode.steps.items."+_)}},code:{widget:null,generateCode:{func:null,buttonLabel:f.get("connectcode.code.regenerate"),hasVisibleButton:!1},checkDevice:{func:null,buttonLabel:f.get("connectcode.code.checkstatus"),manual:null,timeInterval:null,success:{message:f.get("connectcode.messages.success"),route:null},fail:{message:f.get("connectcode.messages.fail")}}},actions:{widget:null,navigation:"vertical",items:[]}};return e.extend({init:function(){var e=l.getFeature("connect")||{},t=(l.getFeature("accounts")||{}).profile_after_login||"",i=e.options||[];this._super(),this._currentCode=null,this._config=m,this._hasMoreConnectOptions=this._decideWhetherHasMoreConnectOptions(i),this._routeToProfileAfterConnect=t&&t!==l.LoginConfig.disabled,this.setConnectCodeParams(),this._onKeyDownBound=s.bind(this._onKeyDown,this)},_onBeforeRender:function(e){s.extend(e.args,m),this._super(e)},_onBeforeShow:function(e){var t=h.getInstance();s.extend(e.args,m),this._super(e),this.addEventListener("keydown",this._onKeyDownBound),this.dialogOnTop=!1,t.publish(t.eventList.PAGE.SHOW,{pageName:"connect"})},_onAfterHide:function(){this._super(),this.removeEventListener("keydown",this._onKeyDownBound)},_decideWhetherHasMoreConnectOptions:function(e){var t=e.length,i=!1;return s.each(e,function(e){"anonymous"===e&&(i=!0)}),2<=t&&(!i||2<t)},_onKeyDown:function(e){e.keyCode===t.VK_BACK&&this._goBack()},_goBack:function(){this.parentWidget&&this.parentWidget._historyStack.length?this.parentWidget.back():p.exit()},setConnectCodeParams:function(){var e=g||{},t=s.getNested(e,"polling")||{},i=m.code,n=i.checkDevice,r=i.generateCode;n.manual=!t.enabled,t.enabled&&(n.timeInterval=t.interval||5e3),r.hasVisibleButton=!1,m.actions.items.push(this._createCancelAction()),r.func=s.bind(this.getConnectCode,this),n.func=s.bind(this.isConnected,this),this._hasMoreConnectOptions&&m.actions.items.push(this._createConnectAction()),n.success.route=this._routeToProfileAfterConnect?"selectProfile":"browse"},getConnectCode:function(){var t=this;return this._getConnectCodeModel().then(function(e){return e.getConnectCode().then(function(e){return t._currentCode=e.code,e})})},isConnected:function(){var t=this,i=this._currentCode;return this._getConnectCodeModel().then(function(e){return e.isConnected(i).then(function(e){return e.error?(t.dialogOnTop||(p.route("dialog",{title:e.title,content:e.error,commands:new o(f.get("back"),function(){t._goBack(),p.getComponent("main").focus(),p.getComponent("modal").back()}),cancelCommandIndex:0}),t.dialogOnTop=!0),!1):e.code?(t._config.code.props.section._code.setText(e.code),t._currentCode=e.code,!1):!1!==e.activated&&(u.setSession(e,{action:"login",type:"connect-code"}),function(){for(var e,t=0,i=u.getBookmarkStorage(),n=Object.keys(i._valueCache);t<n.length;t++)/(bookmark-)/.test(n[t])&&(e=i.getItem(n[t]),d.saveCurrentPosition(e.mediaType,e.mediaID,e.fileID,e.nLocationSec),i.removeItem(n[t]))}(),!0)})})},_getConnectCodeModel:function(){return new n(function(t,e){r.retrieveModel("connectcode").then(function(e){t(e)}).catch(e)})},_createCancelAction:function(){return new c({id:"cancel",label:f.get("connectcode.actions.cancel"),action:{route:"browse"}})},_createConnectAction:function(){return new c({id:"connect",label:f.get("connectcode.actions.connect"),action:{route:"connect"}})}})}),define("application/components/detail",["antie/runtimecontext","application/managers/action","application/widgets/detail/actionmenu","application/formatters/detail/actionbutton","antie/widgets/component","antie/widgets/container","application/widgets/detail/info","rofl/lib/utils","antie/events/keyevent","application/widgets/header","smart-ott/resolver","application/views/browse","antie/widgets/verticallist","rofl/lib/promise","smart-ott/config","application/utils/routing","smart-ott-models/assets/broadcast","application/decorators/atmospheric","antie/widgets/label","antie/widgets/button","smart-ott-models/assets/serie","smart-ott-models/assets/episode","rofl/decorators/pointer","rofl/decorators/scrollable","rofl/lib/l10n","application/managers/error","application/managers/event","application/managers/features/deeplinking"],function(e,o,a,t,i,n,l,c,r,u,d,h,g,s,p,f,_,m,v,C,A,E,I,y,b,S,T,w){"use strict";var P=e.getCurrentApplication(),D="detailBrowse",k=T.getInstance(),O=P.getLayout().modifier,R={WIDTH:Math.round(480*(O||1)),HEIGHT:Math.round(270*(O||1))};return i.extend({_isActive:!1,_isLoading:!1,_info:null,_actionMenu:null,_formattedAsset:null,_asset:null,_scrollAnimation:null,init:function(){var e=this._detailContainer=new g,t=this._info=new l({showImage:!0}),i=this._actionMenu=new a,n=this._header=new u,r=this._related=new h({isStatic:!0,excludeHeader:!0,carouselId:D}),s=this;this._super("detail"),this.decorate([m,I,y]),this._downArrowClick=function(){s._scroll(155)},this._upArrowClick=function(){s._scroll(0)},e.appendChildWidget(n),e.appendChildWidget(t),e.appendChildWidget(i),e.appendChildWidget(r),this.appendChildWidget(e),this._onBeforeRenderBound=c.bind(this._onBeforeRender,this),this._onBeforeShowBound=c.bind(this._onBeforeShow,this),this._onAfterHideBound=c.bind(this._onAfterHide,this),this._onFocusBound=c.bind(this._onFocus,this),this._onKeyDownBound=c.bind(this._onKeyDown,this),this._onSelectedIndexChangeBound=c.bind(this._onSelectedIndexChange,this),this._onSelectBound=c.bind(this._onSelect,this),this._onGetMediaInfoSuccessBound=c.bind(this._onGetMediaInfoSuccess,this),this.addEventListener("beforerender",this._onBeforeRenderBound),this.addEventListener("beforeshow",this._onBeforeShowBound),this.addEventListener("afterhide",this._onAfterHideBound),this._isActive=!0},_onBeforeRender:function(e){this.addEventListener("focus",this._onFocusBound),this.addEventListener("keydown",this._onKeyDownBound),this.addEventListener("selecteditemchange",this._onSelectedIndexChangeBound),this.addEventListener("select",this._onSelectBound),this._info.destroy(),this._actionMenu.reset(),this._related.getCarousel().removeChildWidgets(),this._startLoading(),this._deeplinkingID=e.args.deeplinkingID,e.args.asset?this._onGetMediaInfoSuccess(e.args.asset):e.args.deeplinkingID?this._getDeeplinkingAssetInfo(e.args.deeplinkingID):this._getAssetInfo(e.args.mediaID,e.args.mediaType,e.args.visionFactor)},_onBeforeShow:function(){var e;this._isLoading&&this.getChildWidgets()[0].hide({skipAnim:!0}),this.initScrollContainer(this.parentWidget),this.initPointerHandlers(this.parentWidget),this.allowScrollDirections({down:!0,up:!0}),(e=this.getScrollArrows()).down.addEventListener("select",this._downArrowClick),e.up.addEventListener("select",this._upArrowClick),this.showScrollArrows(),this._header.show()},_onAfterHide:function(e){var t;e.args.serie||this.removeAtmosphericImage(),(t=this.getScrollArrows()).down.removeEventListener("select",this._downArrowClick),t.up.removeEventListener("select",this._upArrowClick),this.destroyPointerHandlers(),this.cleanScrollContainer(),this._scroll(0),this.removeEventListener("select",this._onSelectBound),this.removeEventListener("focus",this._onFocusBound),this.removeEventListener("keydown",this._onKeyDownBound),this.removeEventListener("selecteditemchange",this._onSelectedIndexChangeBound)},_onFocus:function(){this._isActive||(this.showComponents(),this._isActive=!0)},_getDeeplinkingAssetInfo:function(t){var e=this;d.retrieveApi().then(function(e){return e.read("detail",{params:{guid:t}})}).then(function(t){e._onGetMediaInfoSuccess(t).then(function(){var e;w.goToPlayer()&&w.shouldLoadDeeplinkingID()&&(w.deeplinkingIDLoaded(),"play",t instanceof E&&(e=t.getSerie()),o.execute("play",{asset:t,serieAsset:e,forceClose:!0}))}).catch(function(){w.deeplinkingIDLoaded(),e._finishLoading(),e._goBack()})}).catch(function(){w.deeplinkingIDLoaded(),e._finishLoading(),e._goBack()})},_getAssetInfo:function(t,i,n){var r=this,s=b.getInstance();d.retrieveApi().then(function(e){return e.read("detail",{params:{mediaID:t,mediaType:i,visionFactor:n}})}).then(r._onGetMediaInfoSuccessBound).catch(function(e){r._finishLoading(),S.showErrorDialogAndReturnToMenu({title:s.get("detail.error.media.title"),content:e.message})})},_getRelatedContent:function(i){var n=this._related;d.retrieveApi().then(function(e){var t=b.getInstance();e.read("browse/section",{params:{related:!0,id:i,label:t.get("detail.related"),type:"single"}}).then(function(e){0<e._items.length&&n.setBrowsePage({getSections:function(){return[e]}})})})},_onGetMediaInfoSuccess:function(e){var t,i,n;return t=this._asset=e,(n=this).hasAtmosphericImage()||this.addAtmosphericImage(t),c.isFunction(t.getRelatedRows)?(i=this._related,t.getRelatedRows().then(function(e){i.setBrowsePage(e)})):this._getRelatedContent(t.getId()),t.fallback=this.getFallback(t),this._info.setData({asset:t,truncation:{maximumLines:6,width:630}}),this._info.showInfo(),o.retrieve(t).then(function(e){if(k.publish(k.eventList.PAGE.SHOW,{pageName:"Detail",asset:t}),e&&0<e.length)return n._actionMenu.setDataSource(n.filterActions(e)),/(restart|resume)/.test(e[0].action)?n._actionMenu.hasClass("single")&&n._actionMenu.removeClass("single"):n._actionMenu.addClass("single"),n._finishLoading(),n._actionMenu.focus(),s.resolve()}).catch(function(){return n._finishLoading(),S.showErrorDialogAndReturnToMenu(),s.reject()})},getFallback:function(e){return e instanceof _?e.getChannel().getImage(R.WIDTH,R.HEIGHT):s.resolve(p.getLogo())},_onKeyDown:function(e){e.keyCode===r.VK_BACK&&this._goBack()},_scroll:function(e){var t=this._scrollAnimation,i=P.getDevice(),n=this;this.outputElement&&(null!==t&&i.stopAnimation(t),this._scrollAnimation=i.moveElementTo({el:this.outputElement,duration:250,to:{top:0-e},onComplete:function(){n._scrollAnimation=null}}),0===e?this._updateScrollLimits({up:!0,down:!1}):this._updateScrollLimits({up:!1,down:!0}),this.showScrollArrows())},_onSelectedIndexChange:function(e){var t;if(e.target===this._detailContainer){switch(e.index){case 2:t=0;break;case 3:t=155}(t||0===t)&&this._scroll(t)}else this._related.isFocussed()&&e.target.getId()===D+"_WidgetStrip"&&this._scroll(248*e.index+93)},hideComponents:function(){this._isActive=!1,this._info.hideInfo(),this._actionMenu.setStyleTo("display","none")},showComponents:function(){this._info.showInfo(),this._actionMenu.setStyleTo("display","block")},_onSelect:function(e){var t;"error"!==e.target.id&&(e.target.parentWidget===this._actionMenu?this.onAction(e):(t=e.target.getDataItem())&&(this._scroll(0),f.routeToAsset(t)))},_goBack:function(){var e=this.parentWidget._historyStack;if(this._deeplinkingID)P.route("initialisation",{keepHistory:!1});else{for(;0<e.length&&"application/components/player"===e[e.length-1].module;)e.pop();this.parentWidget.back()}},onAction:function(e){var t,i=this._asset,n=e.target.getDataItem(),r=e.target.id,s=n.position||null;~o.getPlayerActions().indexOf(r)&&P.showLoader(),"moreInfo"===r&&this.hideComponents(),i instanceof E&&(t=i.getSerie()),i instanceof A&&(t=i),i instanceof A&&"resume"===r&&(i=n.asset),i instanceof A&&"restricted"===r&&(i.entitlement=n.asset.entitlement),k.publish(k.eventList.INPUT.SELECT,{pageName:"Detail",button:r||""}),o.execute(r,{asset:i,evt:e,position:s,serieAsset:t})},filterActions:function(e){var t=0,i=e.length;if(this._info.isTruncated())return e;for(;t<i&&"moreInfo"!==e[t].action;t++);return e.splice(t,1),e},_startLoading:function(){this._isLoading=!0,P.showLoader()},_finishLoading:function(){this.getChildWidgets()[0].show(),P.hideLoader(),this._isLoading=!1}})}),define("application/components/dialog",["product-layer/dialog/component","antie/events/keyevent"],function(e,t){"use strict";return e.extend({init:function(){this._super(arguments),this.addEventListener("keydown",function(e){switch(e.keyCode){case t.VK_LEFT:case t.VK_RIGHT:case t.VK_UP:case t.VK_DOWN:e.stopPropagation()}})}})}),define("application/components/faq",["antie/widgets/component","antie/widgets/container","antie/widgets/label","antie/widgets/horizontallist","antie/widgets/verticallist","application/widgets/faq/item","rofl/lib/utils","application/widgets/header","smart-ott/resolver","antie/runtimecontext","smart-ott/config","rofl/lib/l10n","antie/events/keyevent","application/widgets/textscroller","application/managers/event"],function(e,a,l,c,u,o,d,h,t,g,p,i,n,f,r){"use strict";var s={SmartOTT:[{key:"faq",name:"FAQ",questions:[{name:"Devices",title:"What devices are supported as part of SmartOTT?",text:"24i SmartOTT is available on all brands of Smart TVs, streaming devices such as Roku, AppleTV and Amazon Fire, mobile devices (iOS, Android & Windows) and gaming consoles (PlayStation and XboX), as well as several STBs."},{name:"Universal DRM",title:"Do you support DRM across all devices?",text:"Yes, our apps support the required DRM for each specific device."},{name:"Business Models",title:"What business models do you support?",text:"The TV apps currently support AVOD and SVOD. Within a few months we will be able to offer all business models on all devices."},{name:"Freemium",title:"Can I launch a freemium service with SmartOTT?",text:"Yes, we support multi-tier services in which some content could be offered for free and the rest requires a subscription."},{name:"Time-to-Launch",title:"How long will it take me to launch with 24i SmartOTT?",text:"If you already have a working video backend service with one of our preintegrated OVP partners we can provide the apps within a few weeks, depending on other integrations and requirements and excluding the QA process by device manufacturers."},{name:"Customization",title:"Can I customize my apps?",text:"Yes, our template apps allow you to upload and edit your logo, colors and font, and depending on the device also the background image and splash screen; also you can edit the info pages, FAQ, contact, support etc."},{name:"Live content",title:"Do you support live?",text:"Yes, we support live (up to 4K) and an electronic program guide (EPG)."}]},{key:"text",name:"About SmartOTT",text:{title:"About SmartOTT",text:"24i SHOP Smart OTT is a multi-device TV Everywhere solution for broadcasters and channel networks. We provide video delivery applications with template designs, customizable to the broadcaster’s brand. Maximize reach and engagement, with a low cost of ownership, a fast time to market and growth-proof scalability. Smart OTT is available on most Smart TV brands, mobile devices, gaming consoles, set-top boxes and streaming devices such as Apple TV, Roku, Amazon Fire, and more."}},{key:"text",name:"About 24i",text:{title:"About 24i",text:"24i conceives, designs, develops, deploys and maintains high value apps for internet-connected TV screens, as well as companion devices. Founded in 2009, the company´s headquarters is located in Amsterdam, with development and sales offices in Madrid, Barcelona, Buenos Aires and Los Angeles. </br></br> All 24i apps are developed using our AppCore, our proprietary, state-of-the-art development and production framework. Because the AppCore contains all the knowledge of the different platforms and technologies the company works with (including the BBC’s leading TAL JavaScript library that 24i actively contributes to), 24i is able to develop and maintain an application once and seamlessly deploy it to all requested platforms."}},{key:"text",name:"Contact",text:{title:"Contact",text:"www.24i.com </br> info@24i.com"}},{key:"text",name:"About",text:{title:"About",text:"!version!"}}],MediaGo:[{key:"faq",name:"FAQ",questions:[{name:"Devices",title:"What devices are supported as part of MediaGo?",text:"MediaGo supports iOS and Android tablets and phones as well as connected devices: AppleTV, Roku, Chromecast and various connected TVs."},{name:"Universal DRM",title:"Do you support DRM across all devices?",text:"Yes, Kaltura provides a Universal DRM schema, which allows to stream content securely on any web browser, mobile or connected device."},{name:"Business Models",title:"What business models do you support?",text:"The TV apps currently support AVOD and SVOD. The mobile apps also support pay-per-view and rentals. Within a few months we will be able to offer all business models on all devices."},{name:"Freemium",title:"Can I launch a freemium service with Kaltura?",text:"Yes, we support multi-tier services in which some content could be offered for free and the rest requires a subscription."},{name:"Time-to-Launch",title:"How long will it take me to launch with Kaltura MediaGo?",text:"If you are an existing Kaltura customer we can provide the apps within a 2-3 weeks. If you haven’t launched yet, it could be up to 3 months to launch a full OTT service with all the apps."},{name:"Customization",title:"Can I deploy Kaltura on premise?",text:"Absolutely, Kaltura supports both cloud and on premise deployments."},{name:"Live content",title:"Do you support live?",text:"Yes, we support live and an electronic program guide (EPG)."}]},{key:"text",name:"About",text:{title:"About",text:"!version!"}}]},_=i.getInstance(),m=g.getCurrentApplication().getConfiguration(),v=r.getInstance();return e.extend({_type:null,_displayedText:null,init:function(){this._super("faq"),this._buildView(),this._onBeforeRenderBound=d.bind(this._onBeforeRender,this),this._onBeforeShowBound=d.bind(this._onBeforeShow,this),this._onAfterHideBound=d.bind(this._onAfterHide,this),this._onKeyDownBound=d.bind(this._onKeyDown,this),this.addEventListener("beforerender",this._onBeforeRenderBound),this.addEventListener("beforeshow",this._onBeforeShowBound),this.addEventListener("afterhide",this._onAfterHideBound),this.addEventListener("keydown",this._onKeyDownBound)},_buildView:function(){var e=this._container=new c,t=this._sectionsContainer=new u("sections"),i=this._textContainer=new a("text"),n=this._textTitle=new l(""),r=this._textText=new f(""),s=this._header=new h,o=this._versionLabel=new l("V. "+m.version);this._questionsContainer=new u("questions"),e.appendChildWidget(s),e.appendChildWidget(t),e.appendChildWidget(o),n.addClass("title"),o.addClass("version"),i.appendChildWidget(n),i.appendChildWidget(r),this.appendChildWidget(e)},_onKeyDown:function(e){e.keyCode===n.VK_BACK&&this.parentWidget.back()},_onBeforeRender:function(){var i=this,e=p.getApplication().appname.replace(/\s+/g,"");t.retrieveApi().then(function(t){return t.read("faq").then(function(e){i._formatSections(e.getSections(),t)}).catch(function(){i._formatSections(s[e],t)}).then(function(){i._sectionsContainer.focus(),v.publish(v.eventList.PAGE.SHOW,{pageName:"Settings"})})})},_onBeforeShow:function(){this._header.show()},_onAfterHide:function(){this.hideText(),this.hideQuestions(),this._header.hide()},_formatSections:function(e,t){var i=this._sectionsContainer,n=0,r=e.length,s=g.getCurrentApplication().getConfiguration();for(i.removeChildWidgets();n<r;n++)d.each(e[n],function(e){e.text&&-1!==e.text.indexOf("!version!")&&(e.text=e.text.replace("!version!",_.get("versionNumber")+": "+p.getApplication().appname+" "+t.getVersion()+"&emsp;"+_.get("build")+": "+s.version))}),i.appendChildWidget(new o(e[n],this))},getQuestionsContainer:function(){return this._questionsContainer},getTextContainer:function(){return this._textContainer},setText:function(e,t){this.showText(),this._textTitle.setText(e),this._displayedText===t?this._textText.focus():(this._displayedText=t,this._textText.setText(t,!0))},showText:function(){this._container.appendChildWidget(this._textContainer)},hideText:function(){this._container.removeChildWidget(this._textContainer)},showQuestions:function(){this._container.appendChildWidget(this._questionsContainer)},hideQuestions:function(){this._container.removeChildWidget(this._questionsContainer)},setType:function(e){var t=this.getTextContainer();this._type!==e&&(t.removeClass(this._type),t.addClass(e),this._type=e)}})}),define("application/components/friends",["rofl/lib/promise","smart-ott/resolver","antie/runtimecontext","antie/widgets/component","antie/widgets/image","rofl/lib/utils","rofl/lib/l10n","antie/events/keyevent","application/views/friends","smart-ott-models/assets/broadcast","smart-ott-models/assets/playable","product-layer/dialog/widgets/command","application/managers/action"],function(e,i,t,n,r,s,o,a,l,c,u,d,h){"use strict";var g=t.getCurrentApplication();return n.extend({init:function(){this._super("friends"),this._view=this.appendChildWidget(new l),this._onBeforeRenderBound=s.bind(this._onBeforeRender,this),this._onBeforeShowBound=s.bind(this._onBeforeShow,this),this._onBeforeHideBound=s.bind(this._onBeforeHide,this),this._onKeyDownBound=s.bind(this._onKeyDown,this),this._onSelectItemBound=s.bind(this._onSelectItem,this),this._onGetFriendsSuccessBound=s.bind(this._onGetFriendsSuccess,this),this._showErrorBound=s.bind(this._showError,this),this.addEventListener("beforerender",this._onBeforeRenderBound),this.addEventListener("beforeshow",this._onBeforeShowBound),this.addEventListener("beforehide",this._onBeforeHideBound)},_onBeforeRender:function(e){this._addListeners(),e.fromBack?this._view.setStyleTo("display","block"):(g.showLoader(),this._getFriends())},_onBeforeShow:function(){this._view.getHeader().show(),this._view.getCarousel().focus()},_onBeforeHide:function(){this._view.getHeader().hide(),this._view.setStyleTo("display","none"),this._removeListeners()},_onSelectItem:function(e){var t=e.target.getDataItem();t instanceof u?g.route("detail",{mediaID:t.getId(),mediaType:t.getMediaType()}):t instanceof c&&h.execute("play",{asset:t,serieAsset:t.getSerie?t.getSerie():null})},_addListeners:function(){this.addEventListener("keydown",this._onKeyDownBound),this._view.getCarousel().addEventListener("select",this._onSelectItemBound)},_removeListeners:function(){this.removeEventListener("keydown",this._onKeyDownBound),this._view.getCarousel().removeEventListener("select",this._onSelectItemBound)},_onGetFriendsSuccess:function(e){g.hideLoader(),this._view.setStyleTo("display","block"),this._view.setFriendsPage("",e,!0)},_getFriends:function(){var t=this;i.retrieveApi().then(function(e){e.read("friends").then(function(e){return e.prepare().then(t._onGetFriendsSuccessBound)}).catch(t._showErrorBound)})},_showError:function(){var e=o.getInstance(),t=this;g.hideLoader(),g.route("dialog",{title:e.get("friends.error.title"),content:e.get("friends.error.content"),commands:new d(e.get("back"),function(){t._goBack(),g.getComponent("main").focus(),g.getComponent("modal").back()}),cancelCommandIndex:0})},_goBack:function(){this.parentWidget&&this.parentWidget._historyStack.length&&this.parentWidget.back()},_onKeyDown:function(e){e.keyCode===a.VK_BACK&&this._goBack()}})}),define("application/components/history",["antie/widgets/component","application/views/history","rofl/lib/utils","rofl/lib/promise","rofl/widgets/button","rofl/widgets/label","smart-ott/resolver","antie/runtimecontext","application/widgets/browse/rows/grid","smart-ott-models/browse/section","antie/events/keyevent","application/utils/routing"],function(e,t,i,n,r,s,o,a,l,c,u,d){"use strict";var h=a.getCurrentApplication();return e.extend({init:function(){this._super(),this._view=this.appendChildWidget(new t),this._onBeforeRenderBound=i.bind(this._onBeforeRender,this),this._onBeforeShowBound=i.bind(this._onBeforeShow,this),this._onBeforeHideBound=i.bind(this._onBeforeHide,this),this._onSelectItemBound=i.bind(this._onSelectItem,this),this._onKeyDownBound=i.bind(this._onKeyDown,this),this.addEventListener("beforerender",this._onBeforeRenderBound),this.addEventListener("beforeshow",this._onBeforeShowBound),this.addEventListener("beforehide",this._onBeforeHideBound),this.addEventListener("keydown",this._onKeyDownBound)},_onBeforeRender:function(e){var t=this,i=this._view;h.showLoader(),this._getHistoryPage(e.args).then(function(e){return e.prepare()}).then(function(e){h.hideLoader(),i.setHistoryPage(e),i.setStyleTo("display","block"),t._view.getCarousel().addEventListener("select",t._onSelectItemBound)})},_onBeforeShow:function(){var e=this._view.getBackButton();this._view.setStyleTo("display","none"),this._showOrHideHeader(),this._onBackButton=i.bind(this._onBackPressed,this),e.addEventListener("select",this._onBackButton)},_onBeforeHide:function(){var e=this._view;e.setStyleTo("display","none"),e.getHeader().hide(),e.getBackButton().removeEventListener("select",this._onBackPressed),e.getCarousel().removeEventListener("selecteditemchange",this._onSelectedItemChangedBound)},_onBackPressed:function(){this._goBack()},_goBack:function(){this.parentWidget&&this.parentWidget._historyStack.length?this.parentWidget.back():this._exitOnBack&&h.exit()},_onKeyDown:function(e){switch(e.keyCode){case u.VK_BACK:this._goBack(),e.stopPropagation()}},_onSelectItem:function(e){this._showOrHideHeader(),d.routeToAsset(e.target.getDataItem())},_gridActiveChanged:function(){var e=this._view.getCarousel().getActiveChildWidget();return e instanceof l&&(0<Math.floor(e.getActiveChildWidgetIndex()/l.DEFAULT_COLS)&&e.getRows()>l.VISIBLE_ROWS)},_getHistoryPage:function(i){return new n(function(t,e){o.retrieveModel("history").then(function(e){t(new e(i))},e)})},_showOrHideHeader:function(){var e=this._view;e.getCarousel().getActiveChildIndex()||this._gridActiveChanged()?e.getHeader().hide():e.getHeader().show()}})}),define("application/components/initialisation",["antie/runtimecontext","antie/widgets/component","rofl/lib/utils","smart-ott/config","application/managers/session","application/managers/features/promo","application/managers/features/deeplinking","application/managers/device","smart-ott/resolver","application/formatters/menu/item","application/widgets/sidemenu/base","application/utils/routing","application/managers/showlogin"],function(e,t,r,d,h,g,p,f,i,s,o,_,m){"use strict";var v=e.getCurrentApplication();return t.extend({init:function(){var t=this;this._super("initialisation"),this.addEventListener("beforerender",function(e){t._onBeforeRender(e)})},_onBeforeRender:function(){var i,n,e=d.getFeature("accounts")||{},t=h.hasSession()&&h.isLoggedIn(),r=d.getFeature("connect"),s=e.login_at_startup||"",o=e.profile_after_login||"",a=s!==d.LoginConfig.disabled,l=null,c={keepHistory:!1},u=v.getCurrentAppURLParameters()&&v.getCurrentAppURLParameters()[v.getConfiguration().deeplinking.id];p.setDeeplinkingID(u),n=function(e){p.goToPlayer()||p.deeplinkingIDLoaded(),_.routeToAsset({deeplinkingID:e})},i=function(){p.shouldLoadDeeplinkingID()?n(p.getDeeplinkingID()):(c.analyticsPageName="Dashboard",v.route("browse",c))},e.profile_switch_code=e.profile_switch_code||d.ProfileCode.pin,s===d.LoginConfig.mandatory&&v.updateMenu({conditions:{login:!0}}),r||(r={default:"login"}),g.shouldShowPromo()?(c.promo=g.getPromoSettings(),v.route("promo",c)):(t?i():a?h.isLoggedIn({loginOnly:!0})&&o===d.LoginConfig.mandatory?p.shouldLoadDeeplinkingID()?n(p.getDeeplinkingID()):v.route("selectProfile",c):(l=h.anonymousLogin(),"connectcode"===r.default?(v.showLoader(),l.then(function(e){var t=e&&e.goBrowse;f.isDeviceOnDomain().then(function(e){t?p.shouldLoadDeeplinkingID()?n(p.getDeeplinkingID()):i():p.shouldLoadDeeplinkingID()?n(p.getDeeplinkingID()):e?v.route("login",c):m.showConnectComponent()?v.route("connect",c):i(),v.hideLoader()}).catch(function(){v.hideLoader(),p.shouldLoadDeeplinkingID()?n(p.getDeeplinkingID()):v.route("login",c)})})):p.shouldLoadDeeplinkingID()?n(p.getDeeplinkingID()):v.route(r.default,c)):(l=l||h.anonymousLogin()).then(i,i),t?this._getMenuItems():(l=l||h.anonymousLogin()).then(this._getMenuItems,this._getMenuItems)),v.getDevice().hideElement({el:document.getElementById("static-loading-screen"),duration:500})},_getMenuItems:function(){i.retrieveApi().then(function(e){return e.read("menu")}).then(function(e){var t=e.getItems(),i=r.filter(t,function(e){return"account"===e.getType()}),n={middle:{items:r.filter(t,function(e){return"account"!==e.getType()}),widget:o},bottom:{items:i,menuItemFormatter:s,widget:o}};v.route("menu",n)})}})}),define("application/components/login",["antie/widgets/component","antie/runtimecontext","rofl/lib/utils","antie/events/keyevent","smart-ott/resolver","application/managers/session","application/managers/event","application/views/login","rofl/lib/l10n","application/managers/bookmarking/bookmark","application/managers/device","smart-ott/config","application/managers/event/list"],function(e,t,n,r,i,s,o,a,l,c,u,d,h){"use strict";var g=t.getCurrentApplication(),p=t.getDevice(),f=new a("login"),_=l.getInstance(),m=null;return e.extend({init:function(){var e=d.getFeature("accounts")||{},t=e.login_at_startup||"",i=e.profile_after_login||"";this._super(),this._canSkip=t!==d.LoginConfig.mandatory,this._profileConfig=i,this._eventManager=o.getInstance(),this.appendChildWidget(f),this._onBeforeShowBound=n.bind(this._onBeforeShow,this),this._onAfterHideBound=n.bind(this._onAfterHide,this),this._onKeyDownBound=n.bind(this._onKeyDown,this),this._onInputSelectBound=n.bind(this._onInputSelect,this),this._onKeyboardKeyDownBound=n.bind(this._onKeyboardKeyDown,this),this._onFormSubmitBound=n.bind(this._onFormSubmit,this),this._onFormSkipBound=n.bind(this._onFormSkip,this),this.addEventListener("beforeshow",this._onBeforeShowBound),this.addEventListener("afterhide",this._onAfterHideBound),this.addEventListener("keydown",this._onKeyDownBound)},_goBack:function(){this.parentWidget&&this.parentWidget._historyStack.length?this.parentWidget.back():g.exit()},_onKeyDown:function(e){switch(e.keyCode){case r.VK_BACK:this._goBack();break;case r.VK_RIGHT:e.stopPropagation()}},_onBeforeShow:function(){var e=f.getUsername(),t=f.getSkip();f.getUsername().addEventListener("select",this._onInputSelectBound),f.getPassword().addEventListener("select",this._onInputSelectBound),f.getKeyboard().addEventListener("keydown",this._onKeyboardKeyDownBound),f.getSubmit().addEventListener("select",this._onFormSubmitBound),this._canSkip?(t.addEventListener("select",this._onFormSkipBound),t.setStyleTo("display","table-cell")):(t.setDisabled(!0),t.setStyleTo("display","none")),f.getHeader().show(),f.resetToInitialState(),e.focus()},_onAfterHide:function(){var e=f.getPassword();f.getHeader().hide(),f.getUsername().removeEventListener("select",this._onInputSelectBound),f.getKeyboard().removeEventListener("keydown",this._onKeyboardKeyDownBound),f.getSubmit().removeEventListener("select",this._onFormSubmitBound),this._canSkip&&f.getSkip().removeEventListener("select",this._onFormSkip),e.removeEventListener("select",this._onInputSelectBound),e.setValue("")},_onInputSelect:function(e){var t=e.target,i=f.getKeyboard();m&&(this._clearKeyboard(),p.hideElement({el:i.outputElement,skipAnim:!0})),t.setKeyboard(i),i.setText(t.getValue()),p.showElement({el:i.outputElement,duration:250,onComplete:function(){m=t,i.focus()}})},_onKeyboardKeyDown:function(e){var t,i=this;e.keyCode===r.VK_BACK&&m&&(e.stopPropagation(),t=f.getKeyboard(),p.hideElement({el:t.outputElement,duration:250,onComplete:function(){i._clearKeyboard(!0)}}))},_clearKeyboard:function(e){var t=f.getKeyboard();m.unsetKeyboard(t),t.setText(""),e&&m.focus(),m=null},_onFormSubmit:function(e){var t=this;this._eventManager.publish(h.INPUT.SELECT,{button:e.target.id,pageName:"login"}),s.regularLogin({userName:f.getUsername().getValue(),password:f.getPassword().getValue()}).then(function(e){s.setSession(e,{action:"login",type:"credentials"}),function(){for(var e,t=0,i=s.getBookmarkStorage(),n=Object.keys(i._valueCache);t<n.length;t++)/(bookmark-)/.test(n[t])&&(e=i.getItem(n[t]),c.saveCurrentPosition(e.mediaType,e.mediaID,e.fileID,e.nLocationSec),i.removeItem(n[t]))}()}).then(function(){f.getUsername().setValue(""),f.getPassword().setValue(""),f.setErrorMessage(""),g.updateMenu(),u.addDevice().then(function(){t._profileConfig&&t._profileConfig!==d.LoginConfig.disabled?g.route("selectProfile"):g.route("browse",{keepHistory:!1})})}).catch(function(){f.getPassword().setValue(""),f.setErrorMessage(_.get("login.error"))})},_onFormSkip:function(e){this._eventManager.publish(h.INPUT.SELECT,{button:e.target.id,pageName:"login"}),g.route("browse")}})}),define("application/components/menu",["antie/runtimecontext","antie/widgets/component","rofl/lib/utils","smart-ott/resolver","application/widgets/menu"],function(e,t,i,n,r){"use strict";var s=e.getCurrentApplication();return t.extend({_findMenuItem:function(e){var t,i,n,r=this._menu;for(t=0,n=r.getChildWidgetCount();t<n;t++)if((i=r.getChildWidgetByIndex(t)).getMenuItem().getAction().getArguments()===e)return i;return null},_setActiveMenuItem:function(e){var t=this._menu,i=this._findMenuItem(e.args);null!==i&&(t.setActiveChildWidget(i),t.setActivatedItem(i))},init:function(){this._super("menuComponent"),this._buildView(),this._onFocusBound=i.bind(this._onFocus,this),this._setActiveMenuItemBound=i.bind(this._setActiveMenuItem,this),this.addEventListener("focus",this._onFocusBound),s.addEventListener("aftershow",this._setActiveMenuItemBound)},_onFocus:function(e){e.target===this&&(s.isMenuAllowed()?s.updateMenu({show:!0}):s.getComponent("main").focus(),e.stopPropagation())},_buildView:function(){var t=this._menu=new r,i=this;this.appendChildWidget(t),n.retrieveApi().then(function(e){return e.read("menu")}).then(function(e){t.setDataSource(e.getItems()),i.parentWidget.setActiveChildWidget(i),s.updateMenu()})}})}),define("application/components/player",["antie/runtimecontext","antie/widgets/component","rofl/widgets/container","rofl/widgets/label","antie/widgets/scrubbar","antie/events/keyevent","rofl/lib/utils","application/managers/subtitles","product-layer/player/action-enum","product-layer/player/widgets/controls","product-layer/dialog/widgets/command","smart-ott-models/assets/broadcast","smart-ott-models/assets/playable","smart-ott-models/assets/episode","application/widgets/player/header","application/widgets/player/bingebar","application/widgets/player/upnext","rofl/devices/mediaplayer/mediaplayer","product-layer/player/widgets/seeker","application/widgets/player/liveseeker","antie/widgets/horizontallist","smart-ott/resolver","smart-ott/config","rofl/lib/l10n","application/managers/bookmarking/bookmark","rofl/lib/promise","antie/widgets/verticallist","application/managers/player","application/decorators/player/channelswitching","application/widgets/player/directdial","application/managers/event","application/managers/event/list","application/managers/personal/watchlist","application/managers/session","rofl/lib/date.format"],function(o,e,C,A,E,a,I,t,y,b,r,c,i,n,S,T,w,l,u,d,P,s,D,h,g,p,k,O,f,R,_,L,m,v){"use strict";var x=o.getCurrentApplication(),N=h.getInstance(),M=x.getConfiguration().iconFont,B=t.getInstance(),F="player",U="first_play",V="play",W="stop",H="pause",Y="finish",K="&assetTypes=isl:default",G="&assetTypes=default:isl",j="",q=function(e,t){return(new Array(t).join("0")+e).slice(-t)},z=function(e){var t,i,n,r,s,o,a=[];for(t=Math.floor(e/3600),i=Math.floor(e%3600/60),n=Math.floor(e%60),0<t&&a.push(t),a.push(i),a.push(n),r=0,s=a.length;r<s;r++)(o=a[r])<10&&(a[r]=q(o,2));return a.join(":")};return e.extend({init:function(){this._super(F),this._player=o.getDevice().getMediaPlayer(),this._buildView(),this._firstPlayback=!0,this._pauseOnPlay=!1,this._stopStreamData={stop:!1,reason:""},this._error=!1,this._isBuffering=!1,this._isSwitchingAudio=!1,this._canGoForward=!0,this._currentTimeOffset=0,this._onBeforeRenderBound=I.bind(this.onBeforeRender,this),this._onBeforeShowBound=I.bind(this.onBeforeShow,this),this._onBeforeHideBound=I.bind(this.onBeforeHide,this),this._onAfterHideBound=I.bind(this.onAfterHide,this),this._onKeyDownBound=I.bind(this.onKeyDown,this),this._onMediaEventBound=I.bind(this.onMediaEvent,this),this._onSelectBound=I.bind(this.onSelect,this),this._onFocusBound=I.bind(this.onFocus,this),this._updatePositionBound=I.bind(this._updatePosition,this),this._onStopStreamBound=I.bind(this._stopStreamEvent,this),this._eventManager=_.getInstance(),this.addEventListener("beforerender",this._onBeforeRenderBound),this.addEventListener("beforeshow",this._onBeforeShowBound),this.addEventListener("beforehide",this._onBeforeHideBound),this.addEventListener("afterhide",this._onAfterHideBound),this.addEventListener("keydown",this._onKeyDownBound),this.addEventListener("select",this._onSelectBound),this.addEventListener("focus",this._onFocusBound),this.decorate([f])},_onMoreOptionsSelect:function(){this._showMenu(!0),x.setActiveComponent("menu")},_onPlayPauseSelect:function(e){var t,i=this._controls,n=this._player,r=n.getState(),s=i.getChildWidget(y.FORWARD),o=i.getChildWidget(y.REWIND),a=this._asset instanceof c;r===l.STATE.PAUSED?(this._eventManager.publish(L.INPUT.PAUSE,{playerState:r}),this._pausedIndicator||(t=a?this._parseCurrentTime(n.getCurrentTime()):z(n.getCurrentTime()),this._pausedIndicator=e.appendChildWidget(new A("Paused "+t,["paused-indicator"])),s&&(s.hide({skipAnim:!0}),s.setDisabled(!0)),o&&(o.hide({skipAnim:!0}),o.setDisabled(!0))),this._updatePosition()):this._pausedIndicator&&(this._eventManager.publish(L.INPUT.RESUME,{playerState:r}),e.removeChildWidget(this._pausedIndicator),this._pausedIndicator=null,s&&(s.show({skipAnim:!0}),s.setDisabled(!1)),o&&(o.show({skipAnim:!0}),o.setDisabled(!1)))},_parseCurrentTime:function(e){var t=1e3*this._asset.getStartTime(),i=new Date(Math.floor(1e3*e)+t),n=i.getHours(),r=i.getMinutes(),s=i.getSeconds(),o=[];return o.push(n),o.push(r),o.push(s),I.each(o,function(e,t){e<10&&(o[t]=q(e,2))}),o.join(":")},_onSourcesSelect:function(){var i=this;x.route("mediaLanguageMenu",{media:this._mediaModel,activeSource:this._activeSource,activeSubtitle:B.getActiveSource()||this._mediaModel.getEmptySubtitle(),activeTrack:this._player.getCurrentAudioTrack(),tracks:this._player.getAudioTracks()||[],multiAudioInSources:!1,confirmHandler:function(e){var t=0;e.subtitle&&(B.updateSource(e.subtitle),i._activeSubtitle=e.subtitle),e.source&&i._mediaModel.loadSource(e.source).then(function(e){i._isSwitchingAudio=!0,i._activeSource=e,t=i._player.getCurrentTime(),i._player.stop(),i._player.reset(),i._player.setMediaSource(e),i._player.beginPlayback(),i._playFromTimeout=setTimeout(function(){i._videoPosition=t,i._player.playFrom(t),i._isSwitchingAudio=!1},0)}).catch(function(e){i._showError(e)}),e.track&&(i._player.setAudioTrack(e.track),i._activeTrack=e.track)}})},_buildView:function(){var e,t,i,n,r,s,o,a,l,c,u,d,h=new k,g=this._header=new S,p=this._footer=new C,f=this._directDial=new R,_=[{text:M.characters.moreOptions,action:y.MORE,callback:I.bind(this._onMoreOptionsSelect,this)},{text:M.characters.rewind,action:y.REWIND,callback:I.bind(function(){this._eventManager.publish(L.INPUT.REWIND,{playerState:this._player.getState()})},this)},{text:"play/pause",action:y.PLAY_PAUSE,initialAction:y.PAUSE,callback:I.bind(this._onPlayPauseSelect,this)},{text:M.characters.fastForward,action:y.FORWARD,callback:I.bind(function(){this._eventManager.publish(L.INPUT.FAST_FORWARD,{playerState:this._player.getState()})},this)},{text:M.characters.subtitles,action:y.SUBTITLES,callback:I.bind(this._onSourcesSelect,this)}],m=this._controls=new b(null,null,_),v=this._seeker=m.getSeeker();t=D.getFeature("binge_watching")||{},l=D.getFeature("continue_watching")||{},t.enabled&&(e=this._bingeBar=new T),l.enabled&&(a=this._upNext=new w),this._defaultControlsDataSource=_,this._onControlsKeyDownBound=I.bind(this.onControlsKeyDown,this),this._onSelectBingeBarBound=I.bind(this.onSelectBingeBar,this),this._onSelectUpNextBound=I.bind(this.onSelectUpNext,this),this._onCountDownFinishedBound=I.bind(this.onCountDownFinished,this),m.addEventListener("keydown",this._onControlsKeyDownBound),e&&e.addEventListener("select",this._onSelectBingeBarBound),a&&a.addEventListener("select",this._onSelectUpNextBound),this.addEventListener("countdown.finished",this._onCountDownFinishedBound),m.setWrapMode(P.WRAP_MODE_NONE),c=this._onSpeedChanged=I.bind(function(e){var t=0<e?"forward":"backward";this._seekerButton||(this._seekerButton=m.getChildWidget("forward"===t?y.FORWARD:y.REWIND)),null===e&&this._speedIndicator?(this._seekerButton.removeChildWidget(this._speedIndicator),this._seekerButton=null,this._speedIndicator=null):this._speedIndicator?this._speedIndicator.setText("X"+Math.abs(e)):(this._speedIndicator=new A("X"+Math.abs(e),["speed-indicator"]),"forward"===t?this._seekerButton.appendChildWidget(this._speedIndicator):this._seekerButton.insertChildWidget(0,this._speedIndicator))},this),u=this._onCurrentTimeUpdated=I.bind(this._updateScrubBar,this),d=this._onSeek=I.bind(function(e){O.onSeek(e),this._eventManager.publish(L.INPUT.SEEK,{seekTime:e})},this),v.attach(c,u,d),g.addClass("player-header"),p.addClass("player-footer"),m.addClass("player-controls"),i=this._currentTimeIndicator=new A("00:00",["time-indicator","current"]),s=this._totalTimeIndicator=new A("00:00",["time-indicator","total"]),(o=new C("time-indicators-container")).appendChildWidget(i),o.appendChildWidget(s),(n=this._scrubBar=new E).addClass("player-scrubbar"),(r=new C("scrub-bar-container")).appendChildWidget(o),r.appendChildWidget(n),p.appendChildWidget(r),p.appendChildWidget(m),h.appendChildWidget(g),e&&h.appendChildWidget(e),a&&h.appendChildWidget(a),h.appendChildWidget(p),this.appendChildWidget(h),this.appendChildWidget(f)},_showOrHideSourcesButton:function(e){var t,i=this._controls.getChildWidget(y.SUBTITLES),n=B.getSources(),r=this._mediaModel.getSources();i&&(t=r.length<2&&n.length<1,e&&(t=t&&(!this._player||!this._player.getAudioTracks()||this._player.getAudioTracks()<1)),t?i.hide({skipAnim:!0}):i.show({skipAnim:!0}),i.setDisabled(t))},_initSubtitles:function(e,t){var i,n=e.getSubtitles()||[],r=e.getDefaultSubtitlesIndex();i=I.isUndefined(t)?n[r]:I.filter(n,function(e){return e.getLanguage().id===t})[0],B.setSources(n),B.updateSource(i||null),this._showOrHideSourcesButton()},_removeFromWatchlist:function(t){var e=D.getFeature("watchlist")||{};t&&e.enabled&&m.isPartOf(t.getId()).then(function(e){e&&m.removeItem(t)})},onBeforeRender:function(e){this._eventManager.publish(L.PAGE.SHOW,{pageName:F,args:e.args}),this.play(e.args)},onBeforeShow:function(){x.hideLoader(),this._prepare(),this._header.show(),this._controls.setActiveChildWidget(this._controls.getChildWidget(y.PLAY_PAUSE)),this._controls.focus(),this._bingeBar&&this._bingeBar.hide({skipAnim:!0}),this._upNext&&this._upNext.hide({skipAnim:!0}),this._showMenu(!1),x.addEventListener("$stopStream",this._onStopStreamBound)},onBeforeHide:function(){this._unblockControls(),this._upNext&&this._upNext.hide({skipAnim:!0}),this._player.getState()===l.STATE.PLAYING&&this._saveCurrentState(H),x.removeEventListener("$stopStream",this._onStopStreamBound),this._stopStreamData={stop:!1,reason:""},this._player.removeEventCallback(this,this._onMediaEventBound),this._clearMediaHitInterval(),this._bingeBar&&this._bingeBar.destroy(),this._serieAsset=null,this._nextEpisode=null,B.clear(),O.destroy(),x.hideLoader(),this._eventManager.publish(L.PAGE.HIDE,{pageName:F}),this._publishPlayerEvent(L.PLAYER.COMPLETE),this._pauseOnPlay=!1},onAfterHide:function(){if(this._header.hide({skipAnim:!0}),this._player.getState()!==l.STATE.EMPTY){this._resetControls();try{this._player.stop()}catch(e){}}this._player.reset(),this._updateScrubBar(0,0,!0),this._restore(),this._showMenu(!0)},play:function(n){var r=this,s=n.asset,o=n.position,a=n.serieAsset||null,e=s instanceof c,l=n.isTrailer;if(this._errors=0,this._firstBookmarkSent=!1,this._seeker.detach(),e?(this._seeker=new d,this._seeker.attach({onSpeedChanged:this._onSpeedChanged,onSeek:this._onSeek,onCurrentTimeUpdated:this._onCurrentTimeUpdated}),this._seeker.setProgramTime(s.getStartTime(),s.getEndTime(),I.now()/1e3)):(this._seeker=new u,this._seeker.attach(this._onSpeedChanged,this._onCurrentTimeUpdated,this._onSeek)),this._controls.setSeeker(this._seeker),this._eventManager.publish(L.PAGE.LOAD,{pageName:F,args:n}),o&&0<o&&this._eventManager.publish(L.PERSONAL.CONTINUE_WATCHING,{item:n.asset}),x.showLoader(!0),this._upNextShown&&this._upNext&&this._upNext.hide(),this._fileID=s._fileID,this._mediaID=s._id,this._mediaGuid=s.getGuid(),this._mediaTypeID=s._mediaTypeID,this._serieAsset=a,this._upNextShown=!1,this._isTrailer=!!l,this._activeSource=null,this._activeSubtitle=null,this._activeTrack=null,this._currentTimeOffset=0,this._stopPlayback(),this._resetPlayer(),this._removeFromWatchlist(a),!(s instanceof i))throw Error("Unplayable asset sent to player");this.setControls(s),this._blockControls(),e?this._setBingeBarContent("",s,!0,!0):(a&&!a._episodeId&&(a._episodeId=s.getGuid(),a._id=null),this._setBingeBarContent(s.getId(),a||s,!a)),this._header.updateAsset(s),this._asset=s,this._player.addEventCallback(this,this._onMediaEventBound),this.resolveIslSettings().then(function(e){s.prepareStream(l,e).then(function(t){var i;r._mediaModel=t,r._initSubtitles(t,n.subtitlesLanguageId),r._player.reset(),(i=t.getSources(n.videoLanguageId?{language:{id:n.videoLanguageId}}:{})[0])||(i=t.getEmptySource()),r._mediaModel.loadSource(i).then(function(e){r._activeSource=e,r._eventManager.publish(L.PAGE.READY,{pageName:F,args:n,asset:s,trailer:l,series:a||null,mediaModel:t,source:i,loadedSource:e,position:o||0}),O.prepare(s,e,o)})}).catch(function(e){r._showError(e)})})},resolveIslSettings:function(){var i,e=v.hasSession(),n=v.isLoggedIn();return new p(function(t){e&&n?s.retrieveApi().then(function(e){e.read("userprofile/userprofile").then(function(e){i=I.getNested(e,"player-sign-lang"),t("on"===i?K:G)}).catch(t)}):t(j)})},setControls:function(e){var t,i=!!I.isFunction(e.hasStartOver)&&e.hasStartOver();e instanceof c?(t=[{text:M.characters.moreOptions,action:y.MORE,callback:I.bind(this._onMoreOptionsSelect,this)}],i&&t.push({text:M.characters.startOver,action:"_custom_",callback:I.bind(function(){var e=this._asset,t=Math.floor((new Date).getTime()/1e3);this._currentTimeOffset=e.getStartTime()-t,this._player.playFrom(this._currentTimeOffset),O.onSeek(this._currentTimeOffset)},this)}),e.hasTimeshift()&&(t.push({text:M.characters.rewind,action:y.REWIND,callback:I.bind(function(){this._eventManager.publish(L.INPUT.REWIND,{playerState:this._player.getState()})},this)}),t.push({text:"play/pause",action:y.PLAY_PAUSE,initialAction:y.PAUSE,callback:I.bind(this._onPlayPauseSelect,this)}),t.push({text:M.characters.fastForward,action:y.FORWARD,callback:I.bind(function(){this._eventManager.publish(L.INPUT.FAST_FORWARD,{playerState:this._player.getState()})},this)})),t.push({text:M.characters.subtitles,action:y.SUBTITLES,callback:I.bind(this._onSourcesSelect,this)}),this._controls.setDataSource(t)):this._controls.setDataSource(this._defaultControlsDataSource),this._controls.setActiveChildWidget(this._controls.getChildWidget(y.PLAY_PAUSE)),this._controls.focus(),this.getChildWidgetByIndex(0).setActiveChildWidget(this._controls.parentWidget)},setIsPlayingAds:function(e){var t={skipAnim:!0};e?(this._controls.setDataSource([{text:M.characters.moreOptions,action:y.MORE,callback:I.bind(this._onMoreOptionsSelect,this)},{text:"play/pause",action:y.PLAY_PAUSE,initialAction:y.PAUSE,callback:I.bind(this._onPlayPauseSelect,this)}]),this._scrubBar.hide(t),this._currentTimeIndicator.hide(t),this._totalTimeIndicator.hide(t),this._header.hideMetaData(t),this._adBreakBar=this.appendChildWidget(new A("")),this._adBreakBar.addClass("ad-break-bar"),B.onAdBreakStart()):(this.setControls(this._asset),this._scrubBar.show(t),this._currentTimeIndicator.show(t),this._totalTimeIndicator.show(t),this._header.showMetaData(t),this._showOrHideSourcesButton(),this.removeChildWidget(this._adBreakBar),this._adBreakBar=null,B.onAdBreakEnd()),this._controls.setActiveChildWidget(this._controls.getChildWidget(y.PLAY_PAUSE)),this._controls.focus(),this._isPlayingAds=e},getIsPlayingAds:function(){return!!this._isPlayingAds},setAdBreakBarText:function(e){this._adBreakBar&&this._adBreakBar.setText(e)},_resetControls:function(){this._player.getState()===l.STATE.COMPLETE||this._player.getState()===l.STATE.PAUSED&&!this._seeker.isActive()||this._controls.getChildWidget(y.PLAY_PAUSE).select(y.PLAY)},_enableForward:function(e){var t=this._controls.getChildWidget(y.PLAY_PAUSE),i=this._controls.getChildWidget(y.FORWARD);t&&t.setDisabled(!e),i&&i.setDisabled(!e),e?this._controls.setActiveChildIndex(0):(t&&t.setDisabled(!1),i&&i.setDisabled(!1)),this._canGoForward=e},_goBack:function(){var e=this.parentWidget._historyStack;for(this._eventManager.publish(L.PAGE.BACK,{pageName:F});0<e.length&&"application/components/player"===e[e.length-1].module;)e.pop();this.parentWidget.back()},_blockControls:function(){var e=this._controls.getChildWidget(y.PLAY_PAUSE);e&&e.getDataItem().action&&(e.getDataItem().action=null,e.addClass("blocked"))},_unblockControls:function(){var e=this._controls.getChildWidget(y.PLAY_PAUSE);e&&!e.getDataItem().action&&(e.getDataItem().action=y.PAUSE,e.removeClass("blocked"))},onKeyDown:function(e){var t,i,n=e.keyCode,r=this._controls,s=this._player.getState();switch(n){case a.VK_BACK:this._overlayOpened&&this._setOverlayState(!1),this._goBack();break;case a.VK_PLAY:t=r.getChildWidget(y.PLAY_PAUSE),i=y.PLAY;break;case a.VK_PAUSE:if(!(t=r.getChildWidget(y.PLAY_PAUSE)).getDataItem().action)return;i=y.PAUSE,this._firstPlayback=!1;break;case a.VK_PLAY_PAUSE:t=r.getChildWidget(y.PLAY_PAUSE);break;case a.VK_STOP:return this._eventManager.publish(L.INPUT.STOP,{playerState:s}),void this._goBack();case a.VK_FAST_FWD:t=r.getChildWidget(y.FORWARD);break;case a.VK_REWIND:t=r.getChildWidget(y.REWIND);break;case a.VK_LEFT:case a.VK_RIGHT:e.stopPropagation();break;default:this._setOverlayState(!0),this._onKeyDownChannelSwitch(e)}t&&(t.isFocusable()||r.getChildWidget(y.PLAY_PAUSE).select(y.PLAY),t.select(i),t.focus())},onControlsKeyDown:function(e){switch(e.keyCode){case a.VK_RED:case a.VK_YELLOW:case a.VK_GREEN:case a.VK_BLUE:e.stopPropagation();break;default:this._setOverlayState(!0)}},onSelect:function(){this._setOverlayState(!0)},onFocus:function(e){e.target===this&&(this._showMenu(!1),this._setOverlayState(!0))},_playNext:function(e,t){var i=B.getActiveSource();this._clearMediaHitInterval(),this._eventManager.publish(L.PAGE.SHOW,{pageName:F,args:{asset:e,position:0,serieAsset:t}}),this.play({asset:e,serieAsset:t,videoLanguageId:this._activeSource&&this._activeSource.getLanguage()&&this._activeSource.getLanguage().id,subtitlesLanguageId:i?i.getLanguage().id:null}),this._setOverlayState(!0)},onSelectBingeBar:function(e){var t=e.target.getDataItem(),i=this._serieAsset;t instanceof n?(this._playNext(t,i),this._setOverlayState(!1)):x.route("detail",{mediaID:t.getId(),mediaType:t.getMediaType()})},onSelectUpNext:function(e){var t=e.target.getDataItem(),i=this._serieAsset;t instanceof n&&this._upnextPlay(t,i)},onCountDownFinished:function(){var e=this._nextEpisode,t=this._serieAsset;this._upnextPlay(e,t)},_upnextPlay:function(e,t){this._player.stop(),this._playNext(e,t),this._upNext&&this._upNext.hide({skipAnim:!0})},isPlayerVisible:function(){return this._overlayOpened},_showError:function(e){var t,i,n=this;i=(e=e||{}).localizedErrorKey?(t=N.get("player.error."+e.localizedErrorKey+".title"),N.get("player.error."+e.localizedErrorKey+".message")):e.title&&e.message?(t=e.title,e.message):(t=N.get("player.error.stream_not_found.title"),N.get("player.error.stream_not_found.message")),x.route("dialog",{title:t,content:i,commands:new r(N.get("back"),function(){n._goBack(),x.getComponent("main").focus(),x.getComponent("modal").back()}),cancelCommandIndex:0})},_publishPlayerEvent:function(e,t){var i,n,r,s,o;try{t=t||{},i=this._isTrailer,n=this.getIsPlayingAds(),r=t.progress||this._player.getCurrentTime(),s=t.duration||this._player.getDuration(),o=this._asset instanceof c,this._eventManager.publish(e,{pageName:F,progress:r,duration:s,isTrailer:i,isAd:n,isLive:o,asset:this._asset})}catch(e){}},onMediaEvent:function(e){var t,i=this._asset,n=this._isTrailer,r=this.getIsPlayingAds(),s=this._controls.getChildWidget(y.PLAY_PAUSE);switch(i instanceof c?x.hideLoader():e.state===l.STATE.BUFFERING?(this._isBuffering||(this._isBuffering=!0,this._publishPlayerEvent(L.PLAYER.BUFFERING),x.showLoader(!0),this._blockControls()),this._upNext&&this._possiblyDisplayUpNext(e)):this._isBuffering&&(this._isBuffering=!1,x.hideLoader()),e.state===l.STATE.COMPLETE||this._canGoForward||r||this._enableForward(!0),e.type){case l.EVENT.STATUS:if(this._publishPlayerEvent(L.PLAYER.PROGRESS,{progress:e.currentTime,duration:e.duration}),r)break;if(this._stopStreamData.stop){this._stopStream();break}this._updateScrubBar(e.currentTime,e.duration),this._unblockControls(),null!==B.getActiveSource()&&B.onTimeUpdate(e.currentTime),this._upNext&&this._possiblyDisplayUpNext(e);break;case l.EVENT.COMPLETE:this._publishPlayerEvent(L.PLAYER.COMPLETE),n||r||this._saveCurrentState(Y),this._upNextShown||r||(I.isFunction(this._asset.getChannel)&&this._asset.getChannel().isVirtual()?this._nextBroadCastAsset&&this._nextBroadCastAsset.getStartTime()<=I.now()/1e3&&this._playNext(this._nextBroadCastAsset):this._bingeBar&&this._bingeBar.hasContent()?(this._bingeBar&&!this._isPlayingAds&&(t=this._serieAsset?this._serieAsset.getLabel():null,this._bingeBar.show({skipAnim:!0,label:t}),this._bingeBar.focus()),this._upNext&&this._upNext.hide()):this._goBack()),r||this._setOverlayState(!0,!0),this._enableForward(!1);break;case l.EVENT.ERROR:if(this._publishPlayerEvent(L.PLAYER.ERROR),r)return;o.getDevice().getLogger().error(e.errorMessage),this._handlePlaybackRestart();break;case l.EVENT.PAUSED:this._publishPlayerEvent(L.PLAYER.PAUSED),this._upNextShown&&(this._upNext.hide({skipAnim:!0}),this._upNextShown=!1),n||r||this._saveCurrentState(H);break;case l.EVENT.SUSPEND:this._goBack();break;case l.EVENT.PLAYING:this._publishPlayerEvent(L.PLAYER.PLAYING),this._upNext&&this._possiblyDisplayUpNext(e),this._pauseOnPlay?(s.select(y.PAUSE),this._pauseOnPlay=!1):i instanceof c||n||r||this._saveCurrentState(V),this._bingeBar&&this._bingeBar.hide({skipAnim:!0}),n||r||this._showOrHideSourcesButton(!0);break;case l.EVENT.STOPPED:this._publishPlayerEvent(L.PLAYER.STOPPED),i instanceof c||this._error||n||r||this._saveCurrentState(W)}},_possiblyDisplayUpNext:function(e){var t=this._upnextCountDown||30,i=e.duration;this._isPlayingAds||this._player.getState()!==l.STATE.PLAYING?this._upNextShown&&(this._upNextShown=!1,this._upNext.hide({skipAnim:!0})):this._nextBroadCastAsset&&this._nextEpisode&&i-e.currentTime<t?this._upNext.show({skipAnim:!0,broadcast:!0}):!this._upNextShown&&this._nextEpisode&&0<i&&i-e.currentTime<t&&(this._upNextShown=!0,this._upNext.show({skipAnim:!0,seconds:Math.round(i-e.currentTime)}),this._upNext.focus())},pauseWhenReady:function(){var e=this._controls.getChildWidget(y.PLAY_PAUSE);this._player.getState()===l.STATE.PLAYING?e.select(y.PAUSE):this._pauseOnPlay=!0},_prepare:function(){window.onmousemove=I.bind(function(){this._setOverlayState(!0)},this),x.getRootWidget().addClass("active-mediaplayer"),x.hideBackground(),this._setOverlayState(!0)},_restore:function(){window.onmousemove=null,this._setOverlayState(!1),x.showBackground(),x.getRootWidget().removeClass("active-mediaplayer")},_setOverlayState:function(e,t){var i,n=this,r={skipAnim:!0};if(this._overlayTimeout&&window.clearTimeout(this._overlayTimeout),!e&&!this._isPlayerPaused())return this._overlayOpened=!1,this._header.hide(r),this._footer.hide(r),this._bingeBar&&this._bingeBar.hide(r),void(i=this._controls).setActiveChildWidget(i.getChildWidget(y.PLAY_PAUSE));!this._bingeBar||!this._isPlayerPaused()||this._isPlayingAds||this._seeker.isActive()||this._bingeBar.isVisible()||this._bingeBar.show(r),this._overlayOpened||(this._header.show(r),this._footer.show(r)),this._overlayOpened=!0,this._overlayTimeout=window.setTimeout(function(){t||n._setOverlayState(!1)},5e3)},_isPlayerPaused:function(){return this._player.getState()===l.STATE.PAUSED||this._player.getState()===l.STATE.COMPLETE||this._player.getState()===l.STATE.EMPTY},_showMenu:function(e){e=void 0===e||e,x.updateMenu({show:e})},_updateScrubBar:function(e,t,i){var n,r,s,o,a=this._asset,l=this._scrubBar;this._isUpdatingBroadcast||(a instanceof c?(n=a.getStartDate().format("H:i"),s=a.getEndDate().format("H:i"),o=(Math.floor(I.now()/1e3+this._currentTimeOffset)-a.getStartTime())/a.getDuration(),I.isFunction(this._seeker.isSeeking)&&I.isFunction(this._seeker.getCurrentStatus)&&this._seeker.isSeeking()?((r=this._seeker.getCurrentStatus()/a.getDuration())<0||o<=r)&&(r=r<0?0:o)===o&&this._restartPlayback():r=this._player.getCurrentTime()/a.getDuration(),1<=r?(r=1,this._nextBroadCastAsset&&this._nextBroadCastAsset.getStartTime()<=I.now()/1e3&&this._playNext(this._nextBroadCastAsset)):r<=0&&this._controls.getChildWidget(y.PLAY_PAUSE).select(y.PLAY)):(I.isUndefined(t)&&(t=this._player.getDuration()),(t<=e||e<=0)&&(i||this._controls.getChildWidget(y.PLAY_PAUSE).select(y.PLAY)),r=e/t,n=z(e),s=z(t)),l.setBufferedRange({start:0,end:r}),l.setValue(r),this._currentTimeIndicator.setText(n),this._totalTimeIndicator.getText()!==s&&this._totalTimeIndicator.setText(s))},_restartPlayback:function(){this._player.stop(),this._seekerButton=null,this._speedIndicator=null,this.play({asset:this._asset})},_getNextLiveAssetInfo:function(t,i){var n,r=this;this._isUpdatingBroadcast=!0,s.retrieveEPGManager().then(function(e){return n=t.getChannel().getId(),p.all([e.getCurrentItem(n),e.getNextItem(n)])}).then(function(e){e[0]=e[0][n],r._header.updateAsset(e[0]),r._asset=e[0],r._isUpdatingBroadcast=!1,r._nextBroadCastAsset=e[1][n],i?(i.disableFocus(),i.setData(r._nextBroadCastAsset)):r._upNext&&r._upNext.setData(r._nextBroadCastAsset)})},_updatePosition:function(e){var t=e&&e.toFixed()||this._player.getCurrentTime()&&this._player.getCurrentTime().toFixed();t&&!this.getIsPlayingAds()&&g.saveCurrentPosition(this._mediaTypeID,this._mediaID,this._fileID,t)},_clearMediaHitInterval:function(){clearInterval(this._mediaHitInterval),this._mediaHitInterval=null},_saveCurrentState:function(e){var t,i,n=this;this._isSwitchingAudio||(e===V&&this._firstPlayback&&(e=U),this._clearMediaHitInterval(),t=this._player.getCurrentTime()?this._player.getCurrentTime().toFixed():this._videoPosition,i=[e,this._mediaTypeID,this._mediaID,this._fileID,t],(e!==W||this._firstBookmarkSent)&&(this._firstBookmarkSent=!0,g.saveCurrentState.apply(g,i).catch(function(){}).then(function(){n._mediaHitInterval||e!==V&&e!==U||(n._mediaHitInterval=setInterval(n._updatePositionBound,15e3))})))},_stopStreamEvent:function(e){var t=this._player.getState();this._stopStreamData={stop:!0,reason:e.reason},t!==l.STATE.PLAYING&&t!==l.STATE.PAUSED||this._stopStream()},_stopStream:function(){this._clearMediaHitInterval(),this._player.stop(),this._player.reset(),this._showError({localizedErrorKey:this._stopStreamData.reason})},_setBingeBarContent:function(e,t,i,n){var r=this._bingeBar,s=this._upNext,o=null,a=null;(r||s)&&(n?this._getNextLiveAssetInfo(t,r):(o=t?t&&t.getId&&t.getId():e,a=t&&I.isFunction(t.getRelatedRows)?t.getRelatedRows(!0):this._getRelatedContent(o,t),p.all([t&&!i?this._getNextEpisode(e,t):void 0,a]).then(function(e){r&&r.setData.apply(r,e),s&&s.setData.apply(s,e)})))},_getRelatedContent:function(t,e){var i=e?"Serie":"Movie";return s.retrieveApi().then(function(e){return e.read("browse/section",{params:{fromPlayer:!0,related:!0,id:t,label:N.get("player.related"),type:i}})}).then(function(e){if(0<e.getItems().length)return[e]}).catch(function(){return[]})},_getNextEpisode:function(t,i){var n=null,r=this,e=D.getFeature("upnext_service");if(this._upnextCountDown=e.countDownTimer,e&&e.enabled)return s.retrieveApi().then(function(e){return e.read("assets/upnext",{params:{seriesId:i.getGuid(),mediaId:t,mediaGuid:r._mediaGuid}}).then(function(t){return r._latestEpisode=!1,r._getEpisodes(i).then(function(e){return I.each(e,function(e){n&&0!==n.length||(n=I.filter(e,function(e){return e.getLabel()===t.getLabel()}))}),n&&0!==n.length?n&&0<n.length&&(r._nextEpisode=n[0]):(r._latestEpisode=!0,r._nextEpisode=null),r._nextEpisode})},function(){return r._latestEpisode=!0,r._nextEpisode=null})})},_getEpisodes:function(e){var i=[];return e.getSeasons().then(function(e){var t=0;if(!e.length||!e[0])return!1;for(;t<e.length;t++)i.push(e[t].getEpisodesList());return i})},setInitialVideoPosition:function(e){this._videoPosition=e,this._updatePosition(e)},_stopPlayback:function(){var e=this._player,t=e.getState();t!==l.STATE.EMPTY&&t!==l.STATE.STOPPED&&e.stop()},_resetPlayer:function(){var e=this._player;e.getState()!==l.STATE.EMPTY&&e.reset(),O.destroy()},_handlePlaybackRestart:function(){var e,t,i,n=this;3<++this._errors?this._showError():O.restartCurrentPlayback((e=this._currentTimeIndicator&&this._currentTimeIndicator.getText(),t=e.split(":"),i=0,3===t.length?i=60*+t[0]*60+60*+t[1]+ +t[2]:t.length&&(i=60*+t[0]+ +t[1]),i)).then(function(){n._activeSubtitle&&B.updateSource(n._activeSubtitle),n._activeTrack&&n._player.setAudioTrack(n._activeTrack)}).catch(function(){n._showError()})}})}),define("application/components/profilepin",["antie/widgets/component","antie/runtimecontext","rofl/lib/utils","antie/events/keyevent","smart-ott/resolver","application/managers/session","application/views/profilepin","rofl/lib/l10n","smart-ott-models/parentalpin","smart-ott/config","application/events/sessionstatuschangedevent","application/widgets/avatar"],function(e,t,i,n,r,s,o,a,l,c,u,d){"use strict";var h=t.getCurrentApplication(),g=t.getDevice(),p=new o("profilePin"),f=a.getInstance(),_=null;return e.extend({init:function(){this._super(),this.appendChildWidget(p),this._onBeforeRenderBound=i.bind(this._onBeforeRender,this),this._onBeforeShowBound=i.bind(this._onBeforeShow,this),this._onAfterHideBound=i.bind(this._onAfterHide,this),this._onKeyDownBound=i.bind(this._onKeyDown,this),this._onInputSelectBound=i.bind(this._onInputSelect,this),this._onKeyboardKeyDownBound=i.bind(this._onKeyboardKeyDown,this),this._onFormSubmitBound=i.bind(this._onFormSubmit,this),this.addEventListener("beforerender",this._onBeforeRenderBound),this.addEventListener("beforeshow",this._onBeforeShowBound),this.addEventListener("afterhide",this._onAfterHideBound),this.addEventListener("keydown",this._onKeyDownBound)},_onBeforeRender:function(e){var t,i,n,r=c.getFeature("accounts"),s=e.args.profile;this._profile=s,(t=p.getProfileButton()).setInnerWidget(new d(s)),t.setOuterLabel(s.getFirstName()),i=p.getMessage(),n=f.get("account."+r.profile_switch_code),i.setText(f.get("account.enter_x_to_access",{x:n}))},_goBack:function(){this.parentWidget&&this.parentWidget._historyStack.length&&this.parentWidget.back()},_onKeyDown:function(e){switch(e.keyCode){case n.VK_BACK:this._goBack()}},_onBeforeShow:function(){var e=p.getCode();e&&e.addEventListener("select",this._onInputSelectBound),p.getPin()&&p.getPin().addEventListener("pininput.full",i.bind(this._onPinInputFull,this)),p.getKeyboard().addEventListener("keydown",this._onKeyboardKeyDownBound),p.getProfileButton().addEventListener("select",this._onFormSubmitBound),p.getHeader().show(),p.resetToInitialState(),e&&e.focus()},_onAfterHide:function(){var e=p.getCode();p.getHeader().hide(),p.getKeyboard().removeEventListener("keydown",this._onKeyboardKeyDownBound),p.getProfileButton().removeEventListener("select",this._onFormSubmitBound),e&&(e.removeEventListener("select",this._onInputSelectBound),e.setValue(""))},_onInputSelect:function(e){var t=e.target,i=p.getKeyboard();_&&(this._clearKeyboard(),g.hideElement({el:i.outputElement,skipAnim:!0})),t.setKeyboard(i),i.setText(t.getValue()),g.showElement({el:i.outputElement,duration:250,onComplete:function(){_=t,i.focus()}})},_onKeyboardKeyDown:function(e){var t,i=this;e.keyCode===n.VK_BACK&&_&&(e.stopPropagation(),t=p.getKeyboard(),g.hideElement({el:t.outputElement,duration:250,onComplete:function(){i._clearKeyboard(!0)}}))},_clearKeyboard:function(e){var t=p.getKeyboard();_.unsetKeyboard(t),t.setText(""),e&&_.focus(),_=null},_onPinInputFull:function(){this._onFormSubmit()},_onFormSubmit:function(){var e=c.getFeature("accounts"),i=f.get("account."+e.profile_switch_code),t=s.getSession(),n=this;n._profile&&(e.profile_switch_code===c.ProfileCode.password?s.regularLogin({userName:p.getUsername().getValue(),password:p.getPassword().getValue()}).then(function(e){return s.setSession(e,{action:"login",type:"profile-pin"}),e.retrieveIdentity()}).then(function(){var e=new u(s.hasSession()&&s.isLoggedIn(),s.getSession());h.broadcastEvent(e),p.getPassword().setValue(""),p.setErrorMessage(""),h.updateMenu(),h.route("account")}).catch(function(){s.setSession(t),p.getPassword().setValue(""),p.setErrorMessage(f.get("account.entered_wrong_x",{x:i}))}):e.profile_switch_code===c.ProfileCode.pin&&r.retrieveApi().then(function(e){return e.read("parentalpin",{data:{userID:n._profile.getId(),pin:p.getPin().getValue()}})}).then(function(e){var t=e.getState();p.getPin().setValue(""),t===l.States.ERROR?p.setErrorMessage(f.get("account.error")):t===l.States.INCORRECT?p.setErrorMessage(f.get("account.entered_wrong_x",{x:i})):t!==l.States.UNSET&&t!==l.States.OK||(p.setErrorMessage(""),s.switchHouseholdAccount(n._profile).then(function(){h.updateMenu(),h.route("account")}))}))}})}),define("application/components/promo",["antie/runtimecontext","antie/widgets/component","antie/widgets/image","rofl/lib/utils","application/managers/features/promo"],function(e,t,i,n,r){"use strict";var s=e.getCurrentApplication();return t.extend({_duration:0,init:function(){this._super("promo"),this._buildView(),this._onBeforeShowBound=n.bind(this._onBeforeShow,this),this._promoImageLoadedBound=n.bind(this._promoImageLoaded,this),this._promoImageLoadFailedBound=n.bind(this._promoImageLoadFailed,this),this.addEventListener("beforeshow",this._onBeforeShowBound)},_buildView:function(){var e=s.getLayout(),t=this._image=new i("","",e.requiredScreenSize,{bindListenersOnRender:!1});t.addClass(["promo-image"]),this.appendChildWidget(t)},_onBeforeShow:function(e){var t=e.args.promo,i=this._image,n=i._imageElement;t=t||{},this._duration=1e3*parseInt(t.promo_timeout)||0,n.addEventListener("load",this._promoImageLoadedBound),n.addEventListener("error",this._promoImageLoadFailedBound),i.setSrc(t.promo_url)},_removeEventListeners:function(){var e=this._image._imageElement;e.removeEventListener("load",this._promoImageLoadedBound),e.removeEventListener("error",this._promoImageLoadFailedBound)},_promoImageLoaded:function(){this._removeEventListeners(),this._timeout=window.setTimeout(n.bind(function(){this._timeout=null,this._exeggcute()},this),this._duration)},_promoImageLoadFailed:function(){this._removeEventListeners(),this._exeggcute()},_exeggcute:function(){r.shownPromo(),s.route("initialisation",{keepHistory:!1})}})}),define("application/components/purchaseHistory",["antie/widgets/component","application/views/purchasehistory","rofl/lib/utils","rofl/lib/promise","rofl/widgets/button","rofl/widgets/label","smart-ott/resolver","antie/runtimecontext","application/widgets/browse/rows/grid","smart-ott-models/browse/section","antie/events/keyevent","application/utils/routing"],function(e,t,i,n,r,s,o,a,l,c,u,d){"use strict";var h=a.getCurrentApplication();return e.extend({init:function(){this._super(),this._view=this.appendChildWidget(new t),this._onBeforeRenderBound=i.bind(this._onBeforeRender,this),this._onBeforeShowBound=i.bind(this._onBeforeShow,this),this._onBeforeHideBound=i.bind(this._onBeforeHide,this),this._onSelectItemBound=i.bind(this._onSelectItem,this),this._onKeyDownBound=i.bind(this._onKeyDown,this),this.addEventListener("beforerender",this._onBeforeRenderBound),this.addEventListener("beforeshow",this._onBeforeShowBound),this.addEventListener("beforehide",this._onBeforeHideBound),this.addEventListener("keydown",this._onKeyDownBound)},_onBeforeRender:function(e){var t=this,i=this._view;h.showLoader(),o.retrieveApi().then(function(e){return e.read("purchasehistory/purchasehistory",{data:{itemType:"All",mediaType:0,picSize:"144x81",pageSize:20,start_index:0}})}).then(function(e){h.hideLoader(),i.setPurchaseHistoryPage(e),i.setStyleTo("display","block"),t._view.getCarousel().addEventListener("select",t._onSelectItemBound)})},_onBeforeShow:function(){var e=this._view.getBackButton();this._showOrHideHeader(),this._onBackButton=i.bind(this._onBackPressed,this),e.addEventListener("select",this._onBackButton)},_onBeforeHide:function(){var e=this._view;e.setStyleTo("display","none"),e.getHeader().hide(),e.getBackButton().removeEventListener("select",this._onBackPressed),e.getCarousel().removeEventListener("selecteditemchange",this._onSelectedItemChangedBound)},_onBackPressed:function(){this._goBack()},_goBack:function(){this.parentWidget&&this.parentWidget._historyStack.length?this.parentWidget.back():this._exitOnBack&&h.exit()},_onKeyDown:function(e){switch(e.keyCode){case u.VK_BACK:this._goBack()}},_onSelectItem:function(e){this._showOrHideHeader(),d.routeToAsset(e.target.getDataItem())},_gridActiveChanged:function(){var e=this._view.getCarousel().getActiveChildWidget();return e instanceof l&&(0<Math.floor(e.getActiveChildWidgetIndex()/l.DEFAULT_COLS)&&e.getRows()>l.VISIBLE_ROWS)},_showOrHideHeader:function(){var e=this._view;e.getCarousel().getActiveChildIndex()||this._gridActiveChanged()?e.getHeader().hide():e.getHeader().show()}})}),define("application/components/search",["rofl/lib/promise","smart-ott/resolver","antie/runtimecontext","antie/widgets/component","rofl/lib/utils","rofl/lib/l10n","antie/events/keyevent","application/views/search","application/utils/routing","rofl/decorators/pointer","rofl/decorators/scrollable","application/managers/event"],function(e,r,t,i,a,n,s,o,l,c,u,d){"use strict";var h=t.getCurrentApplication(),g=n.getInstance(),p=h.getConfiguration(),f=t.getCurrentApplication().getDevice(),_=p.pagingOffset||5,m=d.getInstance();return i.extend({_carousel:null,_count:0,init:function(){this._super("search"),this._view=this.appendChildWidget(new o),this._filter={name:"all",type:"all"},this._inputTimeout=null,this._carousel=this._view.getCarousel(),this._onBeforeRenderBound=a.bind(this._onBeforeRender,this),this._onBeforeShowBound=a.bind(this._onBeforeShow,this),this._onAfterHideBound=a.bind(this._onAfterHide,this),this._onKeyDownBound=a.bind(this._onKeyDown,this),this._onSelectItemBound=a.bind(this._onSelectItem,this),this._onSearchInputTextChangeBound=a.bind(this._onSearchInputTextChangeHandler,this),this._onSearchFilterChangeBound=a.bind(this._onSearchFilterChangeHandler,this),this._onSearchSuccessBound=a.bind(this._onSearchSuccess,this),this._onItemHoverBound=a.bind(this._onItemHover,this),this._onItemOutBound=a.bind(this._onItemOut,this),this._onResetBtnPressed=a.bind(this._resetBtnPressed,this),this._onLettersBtnPressed=a.bind(this._lettersBtnPressed,this),this._onNumbersBtnPressed=a.bind(this._numbersBtnPressed,this),this._onSpecialCharsBtnPressed=a.bind(this._specialCharsBtnPressed,this),this._onSelectedItemChangeBound=a.bind(this._onSelectedItemChange,this),this.addEventListener("beforerender",this._onBeforeRenderBound),this.addEventListener("beforeshow",this._onBeforeShowBound),this.addEventListener("afterhide",this._onAfterHideBound),this.decorate([c,u]),this.scrollReady=!1,this._onPagingLimitBound=a.bind(this._onPagingLimit,this),this.addEventListener("paginglimit",this._onPagingLimitBound)},_clear:function(){var e,t=this._view,i=t.getKeyboard(),n=i.getKeyboard();i.setText(""),e=n.getChildWidgetByIndex(0).getDataItem(),n.setActiveChildKey(e),t.setSearchPage("",[],!1),t.getFilter().hide(),0<t.getFilter().getChildWidgetCount()&&t.hideFilterButtons(),t.getCarouselContainer()&&t.getCarouselContainer().hide({duration:0,skipAnim:!0}),this._filter={name:"all",type:"all"},this._clearTimeout()},_onBeforeRender:function(e){this._addListeners(),e.fromBack&&this._view.setStyleTo("display","block")},_onBeforeShow:function(e){var t;e.fromBack?this._setUpScroll():((t=this._view).getHeader().show(),t.getSearchInput().focus(),t.hideError(),0===t.getCarousel().getChildWidgetCount()?(t.getFilter().hide(),t.getCarouselContainer().hide({duration:0,skipAnim:!0})):t.getCarouselContainer().show(),this._setUpScroll(),m.publish(m.eventList.PAGE.SHOW,{pageName:"Search"}),h.hideLoader(),this._clear())},_setUpScroll:function(){var e=this._view;this.scrollSetupSimple({container:e.getCarouselContainer(),carousel:e.getCarousel()})},_onAfterHide:function(){this._view.getHeader().hide(),this._removeListeners(),this.scrollCleanup(),this.scrollReady=!1},_onKeyDown:function(e){e.keyCode===s.VK_BACK?this.parentWidget.back():e.keyCode===s.VK_RIGHT&&e.stopPropagation()},_onSearchSuccess:function(e){var t,i,n,r=this._view,s=e.getAssets(),o=r.getKeyboard().getKeyboard();if(h.hideLoader(),0<s.length)this._filter&&(n=this._filter.name||"all"),i=n&&g.get("filterTabs."+n)||g.get("filterTabs.all"),r.setSearchPage(i,e.getAssets(),!1),r.setStyleTo("display","block"),r.getFilter().show(),r.getCarouselContainer().show(),r.showFilterButtons(),r.showResults(),this.scrollReady||(this._setUpScroll(),this.scrollReady=!0),this._count=e.getAssets().length,this.setDataItem(e),this.setPagingScrollOffset(_*r.widgetLength),m.publish(m.eventList.SEARCH.SUCCESS,{query:this._text,pages:Math.ceil(this._count/100)});else{switch(t=o.getActiveChildWidget().getDataItem()){case"DEL":t="-";break;case"SPACE":t=" "}o.setActiveChildKey(t),this.focus(),a.hasNested(this._filter,"name")&&"all"!==this._filter.name&&r.getFilter().show(),r.getCarouselContainer().hide({duration:0,skipAnim:!0}),this._showError(g.get("search.errors.no_content")),r.getKeyboard().focus(),m.publish(m.eventList.SEARCH.FAILED,{query:this._text,pages:0})}},_onSearchInputTextChangeHandler:function(e){var t=e.text;this._text=(t.match(/ /g)||[]).length===t.length?t.trim():t,2<t.length?this._delayedSearch():0<t.length?(this._showError(g.get("search.message")),this._clearTimeout()):(this._clear(),this._hideError())},_onSearchFilterChangeHandler:function(e){this._filter=e.filter,this._delayedSearch()},_onItemHover:function(e){var t=e&&e.target;this.isRowFocusOnLastTwoItems(t)?t.addClass("after-half"):t.removeClass("after-half")},isRowFocusOnLastTwoItems:function(e){var t=this._view.getCarousel(),i=e||t.getActiveChildWidget(),n=a.getNested(i,"outputElement")||{},r=a.getNested(f.getElementOffset(n),"left"),s=this._carousel.getMask().getLength(),o=(r-this._carousel.getCurrentScrollOffset())/s;return!!a.isNumber(o)&&.6<o},_onItemOut:function(e){var t=e&&e.target;t&&!this.isRowFocusOnLastTwoItems()&&t.removeClass("after-half")},_delayedSearch:function(){var e=this;this._clearTimeout(),this._inputTimeout=setTimeout(function(){e._search()},1e3)},_clearTimeout:function(){clearTimeout(this._inputTimeout)},_onSelectItem:function(e){m.publish(m.eventList.SEARCH.CONVERSION,{target:e.target.getDataItem().getId()}),l.routeToAsset(e.target.getDataItem())},_addListeners:function(){this.addEventListener("keydown",this._onKeyDownBound),this.addEventListener("searchinput.textchange",this._onSearchInputTextChangeBound),this.addEventListener("searchfilter.change",this._onSearchFilterChangeBound),this.addEventListener("button-hover",this._onItemHoverBound),this.addEventListener("button-out",this._onItemOutBound),this._view.getCarousel().addEventListener("select",this._onSelectItemBound),this._view.getResetButton().addEventListener("select",this._onResetBtnPressed),this._view.getLettersButton().addEventListener("select",this._onLettersBtnPressed),this._view.getNumbersButton().addEventListener("select",this._onNumbersBtnPressed),this._view.getSpecialCharsButton().addEventListener("select",this._onSpecialCharsBtnPressed),this._carousel.addEventListener("selecteditemchange",this._onSelectedItemChangeBound)},_removeListeners:function(){this.removeEventListener("keydown",this._onKeyDownBound),this.removeEventListener("searchinput.textchange",this._onSearchInputTextChangeBound),this.removeEventListener("searchfilter.change",this._onSearchFilterChangeBound),this.removeEventListener("button-hover",this._onItemHoverBound),this.removeEventListener("button-out",this._onItemOutBound),this._view.getCarousel().removeEventListener("select",this._onSelectItemBound),this._view.getResetButton().removeEventListener("select",this._onResetBtnPressed),this._view.getLettersButton().removeEventListener("select",this._onLettersBtnPressed),this._view.getNumbersButton().removeEventListener("select",this._onNumberBtnPressed),this._view.getSpecialCharsButton().removeEventListener("select",this._onSpecialCharsBtnPressed),this._carousel.removeEventListener("selecteditemchange",this._onSelectedItemChangeBound)},_search:function(){var t,i=this,n=[],e=this._filter||{name:"all",type:"all"};switch(this._hideError(),e.type){case"genre":t=e.name;break;case"mediaType":n.push(e.name);break;default:t="",n=["movie","episode","serie","broadcast"]}h.showLoader(!0),m.publish(m.eventList.SEARCH.QUERY,{query:i._text}),r.retrieveApi().then(function(e){e.read("search",{params:{text:i._text,genre:t,mediaTypes:n}}).then(i._onSearchSuccessBound)})},_getSearchModel:function(i){return new e(function(t,e){r.retrieveModel("search").then(function(e){t(new e(i))},e)})},_resetBtnPressed:function(){this._clear()},_lettersBtnPressed:function(){this._view.getKeyboard().setActiveKeysetByIndex(0)},_numbersBtnPressed:function(){this._view.getKeyboard().setActiveKeysetByIndex(1)},_specialCharsBtnPressed:function(){this._view.getKeyboard().setActiveKeysetByIndex(2)},_showError:function(e){var t=this._view;this._filter.name&&"all"===this._filter.name&&(t.hideFilterButtons(),t.hideResults()),t.getCarousel().isFocussed()&&t.getSearchInput().focus(),t.getCarousel().removeChildWidgets(),t.setErrorMessage(e),t.showError(),h.hideLoader()},_hideError:function(){var e=this._view;0<e.getCarousel().getChildWidgetCount()&&(e.showFilterButtons(),e.showResults()),e.setErrorMessage(""),e.hideError()},_onSelectedItemChange:function(e){var t=this._view.getCarousel().getActiveChildWidget();e.index+_>=this._count-1&&this.getMoreItems(),this.isRowFocusOnLastTwoItems()?t.addClass("after-half"):t.removeClass("after-half")},_onPagingLimit:function(){var e=this;!1===this.getMoreItems({onComplete:function(){e.pixelScroll(-1)}})&&this.unsetPagingScrollOffset()},getMoreItems:function(i){var n=this._view,r=this,e=this.getDataItem();if(i=i||{},!e||!e.hasMoreItems()||e.isGettingMoreItems())return!(e&&!e.hasMoreItems())&&void 0;h.showLoader(!1),e.getMoreItems().then(function(e){var t=e.getAssets();n.setMoreItemsSearchPage(t,!1),r._count+=t.length,h.hideLoader(),n.getCarousel().isFocusable()&&n.getCarousel().focus(),i.onComplete&&i.onComplete()})},getCurrentScrollOffset:function(){return this._view.getCarousel().getCurrentScrollOffset()},getMaximumOffset:function(){return this._view.getCarousel().getMaximumOffset()}})}),define("application/components/selectprofile",["antie/runtimecontext","antie/widgets/component","rofl/lib/l10n","rofl/lib/utils","application/managers/session","application/views/selectprofile","smart-ott/resolver","rofl/lib/promise","application/widgets/buttonround","smart-ott-models/parentalpin","product-layer/dialog/widgets/command","smart-ott/config","application/managers/device","application/widgets/avatar","antie/events/keyevent"],function(e,t,i,l,c,n,u,r,d,s,o,a,h,g,p){"use strict";var f=e.getCurrentApplication(),_=new n("selectProfile"),m=a.getFeature("connect"),v=f.getDevice(),C=i.getInstance();return t.extend({init:function(){this._super(),this._setupView()},_setupView:function(){this._onBeforeShowBound=l.bind(this._onBeforeShow,this),this._onAfterHideBound=l.bind(this._onAfterHide,this),this._onKeyDownBound=l.bind(this._onKeyDown,this),this.addEventListener("beforeshow",this._onBeforeShowBound),this.addEventListener("afterhide",this._onAfterHideBound),this._boundProfilePressed=l.bind(this._profilePressed,this),this.appendChildWidget(_)},_onBeforeShow:function(){var e=_.getLogout();this.addEventListener("keydown",this._onKeyDownBound),this._update(),e.focus(),e.addEventListener("select",this._signoutPressed),_.getHeader().show()},_onAfterHide:function(){_.getHeader().hide(),this._clearProfileListeners(),_.getLogout().removeEventListener("select",this._signoutPressed),this.removeEventListener("keydown",this._onKeyDownBound)},_signoutPressed:function(){var t={keepHistory:!1},e={title:C.get("signout.title"),content:C.get("signout.message"),commands:[new o(C.get("yes"),function(){c.clearSession().then(l.bind(c.anonymousLogin,c)).then(function(){m?h.isDeviceOnDomain().then(function(e){e?f.route("login",t):f.route("connect",t)}).catch(function(){f.route("login",t)}):f.route("login",t)})}),new o(C.get("no"),function(){f.getComponent("modal").hide()})],cancelCommandIndex:1};f.route("dialog",e)},_profilePressed:function(e){var t,i=this._profileModel.getProfileById(e.target.id);a.getFeature("accounts").profile_switch_code===a.ProfileCode.pin?u.retrieveApi().then(function(e){return e.read("parentalpin",{data:{userID:i.getId(),pin:"",account:i}})}).then(function(e){(t=e.getState())===s.States.INCORRECT?f.route("profilePin",{profile:i}):t===s.States.UNSET&&c.switchHouseholdAccount(i).then(function(){f.updateMenu(),f.route("account")})}):f.route("profilePin",{profile:i})},_clearProfileListeners:function(){var t=this;this._profileButtons&&this._profileButtons.length&&l.each(this._profileButtons,function(e){e.removeEventListener("select",t._boundProfilePressed)}),this._profileButtons=[]},_update:function(){var t,i,n,r,s,o=_.getProfiles(),a=this;o.removeChildWidgets(),this._clearProfileListeners(),u.retrieveApi().then(function(e){return e.read("profiles")}).then(function(e){t=e.getProfiles(),a._profileModel=e,i=t.length<=6?1:2,n=Math.ceil(t.length/i),o.setRows(i),o.setCols(n),v.setElementSize(o.outputElement,{width:150*n}),r=s=0,l.each(t,function(e){var t=new d(e.getId());t.addClass("profile"),e.getId()===c.getSession().getIdentity().getId()?t.setDisabled(!0):t.addEventListener("select",a._boundProfilePressed),a._profileButtons.push(t),t.setInnerWidget(new g(e)),t.setOuterLabel(e.getFirstName()),o.setWidgetAt(s,r,t),++s===n&&(s=0,r++)}),t.length&&o.focus()})},_onKeyDown:function(e){e.keyCode===p.VK_RIGHT&&e.stopPropagation()}})}),define("application/components/serie",["rofl/widgets/component","application/views/serie","rofl/lib/utils","antie/events/keyevent","smart-ott-models/assets/playable","smart-ott-models/assets/serie","antie/runtimecontext","rofl/lib/l10n","application/decorators/atmospheric","application/managers/entitlement","product-layer/dialog/widgets/command","application/managers/session","application/managers/action","application/managers/event"],function(e,t,i,n,r,s,o,a,l,c,u,d,h,g){"use strict";var p,f=o.getCurrentApplication(),_=a.getInstance(),m=g.getInstance();return e.extend({init:function(){this._super(),this.decorate([l]),this.addClass("episode-selector"),this._view=this.appendChildWidget(new t),this._onBeforeRenderBound=i.bind(this._onBeforeRender,this),this._onBeforeShowBound=i.bind(this._onBeforeShow,this),this._onAfterHideBound=i.bind(this._onAfterHide,this),this._onKeyDownBound=i.bind(this._onKeyDown,this),this._onSelectBound=i.bind(this._onSelect,this),this.addEventListener("beforerender",this._onBeforeRenderBound),this.addEventListener("beforeshow",this._onBeforeShowBound),this.addEventListener("afterhide",this._onAfterHideBound),this.addEventListener("keydown",this._onKeyDownBound),this.addEventListener("select",this._onSelectBound),this._bookmark={}},_onBeforeRender:function(e){var t,i,n,r,s,o=e.args.serie,a=this._view,l=this;this._addedAtmosphericImage=!1,this.hasAtmosphericImage()||(this._addedAtmosphericImage=!0,this.addAtmosphericImage(o)),e.fromBack||(this._bookmark={}),f.showLoader(),a.clearErrorMessage(),a.hideContent(),a.setTitle(o.getLabel()),o.getSeasons().then(function(e){if(0<e.length){if(f.hideLoader(),a.setSeasons(e),a.showContent(),l._bookmark.season){for(i=a.getList().getChildWidgets(),t=0;t<i.length;t++)if((n=i[t]).getDataItem().getSeasonNumber()===l._bookmark.season){r=n.getList().getChildWidgets(),n.open();break}if(l._bookmark.episode&&r)for(t=0;t<r.length;t++)if((s=r[t]).getDataItem().getEpisodeNumber()===l._bookmark.episode){s.focus();break}}1===e.length&&a.getList().getChildWidgetByIndex(0).open()}else f.hideLoader(),a.setErrorMessage(_.get("serie.errors.no_content",{label:o.getLabel()}))}),m.publish(m.eventList.PAGE.SHOW,{pageName:"Episode selector",asset:o})},_onBeforeShow:function(){this._view.getHeader().show()},_onAfterHide:function(e){!0===e.fromBack&&!0!==this._addedAtmosphericImage||this.removeAtmosphericImage()},_onKeyDown:function(e){e.keyCode===n.VK_BACK&&this.parentWidget.back()},_onSelect:function(t){var i=t.target.getDataItem(),n=this;i.getSerie()instanceof s&&(p=i.getSerie()),i instanceof r&&c.validate(i).then(function(){var e=i.getPosition()?"resume":"play";~h.getPlayerActions().indexOf(e)&&f.showLoader(),n._bookmark.season=i.getSeasonNumber(),n._bookmark.episode=i.getEpisodeNumber(),h.execute(e,{asset:i,evt:t,position:i.getPosition(),serieAsset:p})}).catch(function(e){var t="content",i=[],n=0;f.hideLoader(),e.reason===c.Reasons.GEOBLOCK?(t="geoblock_content",i.push(new u(_.get("back"),function(){f.getComponent("modal").hide()}))):d.hasSession()&&d.isLoggedIn()?(t="subscribe_content",i.push(new u(_.get("back"),function(){f.getComponent("modal").hide()}))):(t="log_in_content",i.push(new u(_.get("restriction.dialog.log_in_now"),function(){f.route("login")})),i.push(new u(_.get("restriction.dialog.log_in_later"),function(){f.getComponent("modal").hide()})),n=1),f.route("dialog",{title:_.get("restriction.dialog.title"),content:_.get("restriction.dialog."+t),commands:i,cancelCommandIndex:n})})}})}),define("application/decorators/atmospheric",["antie/widgets/container"],function(s){"use strict";return{addAtmosphericImage:function(e){var n=this.parentWidget,r=this;e.getAtmosphericImage().then(function(e){var t,i=n._atmospheric;e&&(i?(t=i.getChildWidgets()[0]).setStyleTo("background-image","url("+e+")"):((i=r.prependWidget(new s(null))).addClass("atmospheric-image"),(t=i.appendChildWidget(new s(null))).addClass("imageHolder"),t.setStyleTo("background-image","url("+e+")"),n._atmospheric=i))})},removeAtmosphericImage:function(){var e=this.parentWidget,t=e._atmospheric;t&&(e.removeChildWidget(t),e._atmospheric=null)},hasAtmosphericImage:function(){return!!this.parentWidget._atmospheric}}}),define("application/decorators/player/channelswitching",["application/managers/channel","smart-ott/config","rofl/lib/utils","rofl/events/keyevent","smart-ott-models/assets/broadcast"],function(n,e,i,t,r){"use strict";var s=e.getFeature("channel_switching"),o="up",a="down";return{_currentNumericInput:"",_numericInputTimeout:null,_switchChannelTimeout:null,_startSwitchChannelTimeout:function(e){this._numericInputTimeout&&clearTimeout(this._numericInputTimeout),this._switchChannelTimeout&&clearTimeout(this._switchChannelTimeout),this._currentNumericInput="",this._directDial.hide(),this._switchChannelTimeout=setTimeout(i.bind(this.play,this,{asset:e}),3e3)},_startInputTimeout:function(e){this._switchChannelTimeout&&clearTimeout(this._switchChannelTimeout),this._numericInputTimeout&&clearTimeout(this._numericInputTimeout),this._numericInputTimeout=setTimeout(i.bind(this._onPlayChannelByNumber,this,e),3e3)},_onNumericInput:function(e){var t=this._currentNumericInput,i=this._directDial;(e||"0"===e)&&s&&this._getCurrentlyPlayingChannel()&&(3===t.length?t=e:t+=e,this._currentNumericInput=t,this._startInputTimeout(t),i.setInput(t),i.show())},_onPlayChannelByNumber:function(e){this._currentNumericInput="",this._directDial.hide(),this._onPlayChannel(n.getChannelByNumber(e))},_onSwitchChannel:function(e){var t,i=this._getCurrentlyPlayingChannel();i&&s&&e&&(e===o?t=n.getNextChannel(i):e===a&&(t=n.getPreviousChannel(i)),t&&this._onPlayChannel(t,!0))},_onPlayChannel:function(e,t){e&&n.getCurrentBroadcastForChannel(e.getId()).then(i.bind(function(e){e&&(this._asset=e,this._header.updateAsset(e),this._header.show({skipAnim:!0}),this._stopPlayback(),this._resetPlayer(),this.setControls(e),t?this._startSwitchChannelTimeout(e):this.play({asset:e}))},this))},_getCurrentlyPlayingChannel:function(){var e=this._asset;return e instanceof r?e.getChannel():null},_onKeyDownChannelSwitch:function(e){if(s&&this._getCurrentlyPlayingChannel())switch(e.keyCode){case t.VK_0:case t.VK_1:case t.VK_2:case t.VK_3:case t.VK_4:case t.VK_5:case t.VK_6:case t.VK_7:case t.VK_8:case t.VK_9:this._onNumericInput(e.keyChar);break;case t.VK_CHANNEL_UP:this._onSwitchChannel(o);break;case t.VK_CHANNEL_DOWN:this._onSwitchChannel(a)}}}}),define("application/events/browsechangedevent",["rofl/events/broadcastevent","antie/runtimecontext"],function(e,t){"use strict";var i=t.getCurrentApplication(),n=e.extend({init:function(){this._super(n.TYPE,{timestamp:(new Date).getTime()})}});return n.TYPE="browse-changed",n.emit=function(){i.broadcastEvent(new n)},n}),define("application/events/epgmenuevent",["antie/events/event"],function(e){"use strict";return e.extend({init:function(e,t){this.items=e,this.channelId=t,this._super("epgmenu")}})}),define("application/events/pointerhoverevent",["antie/events/event"],function(e){"use strict";return e.extend({init:function(e){this.target=e,this._super("button-hover")}})}),define("application/events/pointeroutevent",["antie/events/event"],function(e){"use strict";return e.extend({init:function(e){this.target=e,this._super("button-out")}})}),define("application/events/sessionstatuschangedevent",["rofl/events/broadcastevent"],function(e){"use strict";return e.extend({init:function(e,t){this._super("sessionstatuschanged",{loggedIn:e,session:t})}})}),define("application/formatters/bingebar/row",["antie/formatter","rofl/iterator","application/widgets/bingebar/row"],function(e,n,r){"use strict";return e.extend({format:function(e){var t,i=this._opts||{};return e instanceof n&&(e=e.next()),"Movie"===e.getType()&&(i.items=4),(t=new r(i)).setDataItem(e),t}})}),define("application/formatters/browse",["antie/formatter","antie/iterator","smart-ott-models/assets/movie","smart-ott-models/assets/serie","smart-ott-models/assets/episode","smart-ott-models/assets/broadcast","smart-ott-models/assets/genre","application/widgets/browse/item","rofl/lib/utils"],function(e,s,o,a,l,c,u,d,h){"use strict";return e.extend({init:function(e){e&&(this._opts=e)},format:function(t,i){var n,e,r=this;if(e=[o,a,l,c,u],t instanceof s&&(t=t.next()),h.each(e,function(e){!n&&t instanceof e&&(n=new d(r._opts||i))}),!n)throw Error("Item to format should be a: Movie, Serie, Episode, Broadcast or Genre");return n.setDataItem(t),n}})}),define("application/formatters/browse/row",["antie/runtimecontext","antie/formatter","rofl/iterator","application/widgets/browse/rows/single","application/widgets/browse/rows/grid","application/widgets/browse/rows/double","application/widgets/browse/rows/friend","application/widgets/browse/rows/slider","application/widgets/browse/rows/highlight","application/widgets/browse/rows/doublesimple","application/widgets/browse/rows/header"],function(e,t,i,n,r,s,o,a,l,c,u){"use strict";var d=e.getCurrentApplication().getLayout().modifier,h={WIDTH:Math.round(246*(d||1)),HEIGHT:Math.round(138*(d||1))};return t.extend({format:function(e){var t;return e instanceof i&&(e=e.next()),"slider"===e.getType()?t=new a:"highlight"===e.getType()?t=e.getItems().length<=4?new l:new n:"single"===e.getType()?t=new n:"single_no_title"===e.getType()?t=new n({notitle:!0,width:h.WIDTH,height:h.HEIGHT}):"grid"===e.getType()?t=new r:"double"===e.getType()?t=new s:"doublesimple"===e.getType()?t=new c:"friend"===e.getType()?t=new o:"header"===e.getType()&&(t=new u),t&&t.setDataItem(e),t}})}),define("application/formatters/detail/actionbutton",["antie/formatter","antie/iterator","application/widgets/detail/actionbutton","antie/widgets/label"],function(e,r,s,o){"use strict";return e.extend({format:function(e){var t,i=new o(""),n=new o;return e instanceof r&&(e=e.next()),(t=new s(e.action)).addClass(["action",e.class]),t.setDataItem(e),i.addClass(["icon",e.class]),t.appendChildWidget(i),n.addClass("text"),n.setText(e.label||""),t.appendChildWidget(n),t}})}),define("application/formatters/epg/epgitem",["rofl/widgets/container","antie/formatter","antie/iterator","antie/runtimecontext","rofl/widgets/label","rofl/widgets/image","application/widgets/epg/item","smart-ott-models/menu/item","application/widgets/epg/programrow"],function(e,t,a,i,l,c,u,d,h){"use strict";return t.extend({format:function(e){var t,i,n,r,s,o;return e instanceof a&&(e=e.next()),(s=new u("")).setEPGItem(e),s.addClass(["epg-item"]),t=e.getChannel(),(i=new c("epg-logo-"+t.getLabel(),"",{height:60,width:60},{bindListenersOnRender:!1})).addClass(["epg-icon"]),t.getImage(100,100).then(function(e){i.setSrc(e)}),s.appendChildWidget(i),(r=new l(t.getCustomLabel&&t.getCustomLabel()||t.getId())).addClass(["epg-label","channel-id"]),s.appendChildWidget(r),e.type&&e.type===d.Types.CHANNELS?((o=new h(t.getId())).setEpgItem(e),s.appendChildWidget(o)):e.type===d.Types.GUIDE&&((n=new l(t.getLabel())).addClass(["epg-label","channel-label"]),s.appendChildWidget(n)),s}})}),define("application/formatters/epg/guideitem",["antie/formatter","antie/iterator","application/widgets/epg/programrow","rofl/widgets/container","rofl/widgets/label","rofl/lib/l10n"],function(e,n,r,a,l,t){"use strict";var i=t.getInstance(),c=i.get("dates.full.today"),u=i.get("dates.full.tomorrow"),d=function(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()};return e.extend({init:function(){this._todayDate=new Date,this._tomorrowDate=new Date,this._tomorrowDate.setDate(this._tomorrowDate.getDate()+1),this._nextDayDate=new Date},format:function(e){var t,i;return e instanceof n&&(i=e.next()),(t=new r).setEpgItem(i),this._possiblyWrapWithDaySeparator(t,i)},_possiblyWrapWithDaySeparator:function(e,t){var i,n,r,s,o=new Date(1e3*t.getStartTime());return d(this._nextDayDate,o)&&(this._nextDayDate.setDate(this._nextDayDate.getDate()+1),r=d(this._todayDate,o)?c:d(this._tomorrowDate,o)?u:o.format("F j"),i=new a,(n=new a).addClass("epg-day-separator-container"),s=new l(null,r,["epg-day-separator"]),n.appendChildWidget(s),i.appendChildWidget(n),i.appendChildWidget(e),e=i),e}})}),define("application/formatters/faq/item",["antie/widgets/label","antie/formatter","application/widgets/faq/question"],function(r,e,s){"use strict";return e.extend({format:function(e,t){var i,n=new s(e,t);return n.appendChildWidget(new r(e.name)),(i=new r("")).addClass(["arrow-right","icon"]),n.appendChildWidget(i),n}})}),define("application/formatters/friends/row",["antie/formatter","rofl/iterator","application/widgets/browse/rows/friend"],function(e,i,n){"use strict";return e.extend({format:function(e){var t;return e instanceof i&&(e=e.next()),(t=new n).setDataItem(e),t}})}),define("application/formatters/menu/item",["rofl/widgets/container","antie/formatter","antie/iterator","antie/runtimecontext","rofl/widgets/label","smart-ott-models/menu/item","application/widgets/menu/item","application/widgets/menu/items/account","application/widgets/menu/items/watchlist"],function(e,t,n,i,r,s,o,a,l){"use strict";return t.extend({format:function(e){var t,i;if(e instanceof n&&(e=e.next()),!(e instanceof s))throw new Error("Menu item should be an instance of MenuItemModel");return(i=e.getType()===s.Types.ACCOUNT?new a:e.getType()===s.Types.WATCHLIST?new l:new o("")).setMenuItem(e),i.addClass(["menu-item",e.getType()]),i instanceof a||((t=new r("")).addClass(["menu-icon","icon",e.getIcon()]),i.appendChildWidget(t),(t=new r(e.getLabel())).addClass("menu-label"),i.appendChildWidget(t)),i}})}),define("application/formatters/searchbrowse",["antie/formatter","antie/iterator","application/widgets/search/item"],function(e,n,r){"use strict";return e.extend({format:function(e,t){var i;if(e instanceof n&&(e=e.next()),!(i=new r(t)))throw Error("Item to format should be a: Movie, Serie or Episode");return i.setDataItem(e),i}})}),define("application/formatters/serie/episode",["antie/formatter","rofl/iterator","application/widgets/serie/episode"],function(e,i,n){"use strict";return e.extend({format:function(e){var t;return e instanceof i&&(e=e.next()),(t=new n).setDataItem(e),t}})}),define("application/formatters/serie/season",["antie/formatter","rofl/iterator","application/widgets/serie/season"],function(e,i,n){"use strict";return e.extend({format:function(e){var t;return e instanceof i&&(e=e.next()),(t=new n).setDataItem(e),t}})}),define("application/formatters/slider",["antie/formatter","antie/iterator","smart-ott-models/assets/movie","smart-ott-models/assets/serie","smart-ott-models/assets/episode","smart-ott-models/assets/broadcast","application/widgets/slider/item","rofl/lib/utils"],function(e,s,o,a,l,c,u,d){"use strict";return e.extend({init:function(e){e&&(this._opts=e)},format:function(t,i){var n,e,r=this;if(e=[o,a,l,c],t instanceof s&&(t=t.next()),d.each(e,function(e){!n&&t instanceof e&&(n=new u(r._opts||i))}),!n)throw Error("Item to format should be a: Movie, Serie, Episode or Broadcast");return n.setDataItem(t),n}})}),define("application/formatters/subtitles",["rofl/media/subtitles/formats/srt","rofl/media/subtitles/formats/ttml","application/formatters/subtitles/vtt","application/formatters/subtitles/m3u8","rofl/lib/utils"],function(e,t,i,n,r){"use strict";var s={srt:e,xml:t,dfxp:t,vtt:i,m3u8:n};return{getParser:function(e){var t;if(t=e.getFormat()?e.getFormat():e.getURL().match(/(\.[A-Z0-9]+)/gi).pop().replace(".",""),r.isUndefined(s[t]))throw new Error(r.formatString("The subtitle format {0} is not yet supported",t));return s[t]}}}),define("application/formatters/subtitles/m3u8",["application/formatters/subtitles/vtt","rofl/lib/utils","rofl/application","rofl/lib/promise"],function(r,s,e,o){"use strict";var a=e.getCurrentApplication().getDevice();return{responseType:"text",parse:function(e,t){var i,n,r;return 0!==e.indexOf("#EXTM3U")?o.reject("Invalid HLS subtitle playlist header"):((i=e.substring(e.indexOf("#EXTINF"),e.indexOf("#EXT-X-ENDLIST")-1).split(/(?:\r?\n)?#EXTINF.*(?:\r?\n)?/)).shift(),n=t.match(/(.*)\/.*$/)[1]+"/",r=s.map(i,s.bind(this._promiseToLoadAndParseSubtitleMediaSegment,this,n)),o.all(r).then(this._mergeSegments))},_promiseToLoadAndParseSubtitleMediaSegment:function(e,n){return n.match(/^https?:\/\//)||(n=e+n),new o(function(t,i){a.loadURL(n,{method:"GET",responseType:r.responseType,onLoad:function(e){t(r.parse(e))},onError:function(e){i(e)}})})},_mergeSegments:function(e){var t=Array.prototype.concat.apply([],e),i={};return s.filter(t,function(e){var t=e.start===i.start&&e.end===i.end&&e.text===i.text;return i=e,!t})}}}),define("application/formatters/subtitles/vtt",["components/vtt.js/dist/vtt"],function(){"use strict";return{responseType:"text",parse:function(e){var t=[],i=new window.WebVTT.Parser(window,window.WebVTT.StringDecoder());return i.oncue=function(e){e.start=e.startTime,e.end=e.endTime,t.push(e)},i.parse(e),i.flush(),t}}}),define("application/layouts/1080p",{classes:["layout1080p"],css:["layouts/1080p.css","styles_1080p.css"],requiredScreenSize:{width:1920,height:1080},modifier:1.5,components:{browse:{viewport:{height:1080,padding:140,bottomSafeMargin:105}}}}),define("application/layouts/720p",{classes:["layout720p"],css:["layouts/720p.css","styles.css"],requiredScreenSize:{width:1280,height:720},modifier:1,components:{browse:{viewport:{height:720,padding:93,bottomSafeMargin:55}}}}),define("application/managers/action",["antie/application","rofl/lib/promise","smart-ott-models/assets/broadcast","smart-ott-models/assets/playable","smart-ott-models/assets/serie","smart-ott-models/assets/episode","smart-ott/resolver","rofl/lib/utils","rofl/lib/l10n","application/managers/bookmarking/bookmark","application/managers/personal/favourite","application/managers/personal/watchlist","application/managers/session","application/managers/parentalcontrol","application/managers/entitlement","product-layer/dialog/widgets/command","smart-ott/config"],function(e,a,l,n,c,u,r,d,t,h,s,i,g,p,f,o,_){"use strict";var m="addedtofavorites",v="addtofavorites",C="addedtowatchlist",A="watchlist",E=e.getCurrentApplication(),I=t.getInstance(),y=_.getFeatures(),b=function(t,i){var n,r,s,o=null,a=t instanceof u;return f.validate(t).then(function(e){t.entitlement=e},function(e){t.entitlement=e}).then(function(){return h.getVideoPosition(t)}).then(function(e){return d.isObject(e)?o=e.getVideoPosition():d.isNumber(e)&&(o=e),!o&&t.getPosition&&0<t.getPosition()&&(o=t.getPosition()),r=o&&!a?"actionmenu.restart":"actionmenu.play",s=o&&!a?"rewind":"play",n=t.entitlement.entitled?"play":"restricted",t.entitlement.entitled||(r="actionmenu.play",s="restricted"),{label:I.get(r,{label:i}),action:n,class:s,asset:t}})},S=function(e){return e<10?"0"+e:e},T=function(t){var i,e,n,r,s="",o=t.name?"actionmenu.resume":"actionmenu.resume_movie";return e=t,n=d.isFunction(e.getEpisodeNumber)&&e.getEpisodeNumber(),r=d.isFunction(e.getSeasonNumber)&&e.getSeasonNumber(),(s=n&&r?(n=S(n),"s"+(r=S(r))+"e"+n):"")&&(o="actionmenu.resume"),f.validate(t).then(function(e){t.entitlement=e},function(e){t.entitlement=e}).then(function(){return h.getVideoPosition(t)}).then(function(e){return t.entitlement.entitled?(d.isObject(e)?i=e.getVideoPosition():d.isNumber(e)&&(i=e),!i&&t.getPosition&&0<t.getPosition()&&(i=t.getPosition()),i?{label:I.get(o,{label:s}),action:"resume",class:"play",position:i,asset:t}:null):null})},w=function(){return a.resolve({label:I.get("detail.error.no_episode"),action:"back",class:"back single"})},P=function(e){return s.isPartOf(e.getId()).then(function(e){return{action:"favorite",class:e?m:v}})},D=function(e){return i.isPartOf(e.getId()).then(function(e){return{action:"watchlist",class:e?C:A}})},k=function(e,t){var i=[];return e&&d.isFunction(e.getParentalRating)&&i.push(p.getParentalRating(e).catch(function(){return!1})),t&&d.isFunction(t.getParentalRating)&&i.push(p.getParentalRating(t).catch(function(){return!1})),d.isEmpty(i)?a.resolve(!1):a.all(i).then(function(e){return d.contains(e,!0)})},O=function(e,i){var o,t,n=function(e,t){E.route("player",{asset:e,serieAsset:t})};e instanceof c?(t=e,t.getSeasons().then(function(e){return!(!e.length||!e[0])&&e[0].getEpisodes().then(function(e){return!(!e.length||!e[0])&&e[0]})})).then(function(t){k(t,i).then(function(e){e?_.getFeature("accounts").show_parental_warning?p.isPinSet().then(function(e){g.isLoggedIn()&&e?L(n,t,i):x(t,i)}):L(n,t,i):n(t,i)})}):e instanceof l?(o=e.getChannel().getId(),r.retrieveApi().then(function(e){return a.all([e.read("channels"),r.retrieveEPGManager()])}).then(function(e){var t,i,n=e[0].getAllChannels(),r=e[1],s=n.length;for(i=0;i<s;i++)if(t=n[i],o===t.getId())return r.getCurrentItem(o)}).then(function(e){E.route("player",{asset:e[o]})})):E.route("player",{asset:e,serieAsset:i})},R=function(e,t,i){var n;e instanceof u?(n=e,r.retrieveApi().then(function(e){return e.read("detail",{params:{mediaID:n.getId(),asset:n}}).then(function(e){return e})})).then(function(e){E.route("player",{asset:e,position:i,serieAsset:t})}):E.route("player",{asset:e,position:i})},L=function(e,t,i,n,r){E.hideLoader(),E.getComponent("main").focus(),E.route("pindialog",{isParentalCheck:!0,onPinValidated:function(){e(t,i,n)},onCancelled:function(){r&&E.exit(!0)},assetLabel:t.getLabel()})},x=function(e,t,i,n){E.hideLoader(),E.route("dialog",{title:I.get("parental.parental_warning_title"),content:I.get("parental.parental_warning_description"),commands:[new o(I.get("parental.parental_warning_decline_text"),function(){n?E.exit(!0):(E.getComponent("modal").back(),E.getComponent("main").focus())}),new o(I.get("parental.parental_warning_confirm_text"),function(){E.getComponent("modal").hide(),i?R(e,t,i):O(e,t)})],cancelCommandIndex:0})},N=function(e){E.route("player",{asset:e,isTrailer:!0})};return{retrieve:function(r){var e,t,i,s=[],o=r.getDescription();return r?r instanceof n?(r instanceof l?(e=r.getEndDate()&&r.getEndDate()<d.now()?I.get("actionmenu.play",{label:r.getLabel()}):I.get("actionmenu.play_channel"),s.push(a.resolve({label:e,action:"play",class:"play"}))):(s.push(T(r)),s.push(b(r,r.getLabel())),d.isFunction(r.hasTrailer)&&r.hasTrailer()&&s.push((i=r,a.resolve({label:I.get("actionmenu.trailer"),action:"playTrailer",class:"new-movies",asset:i}))),g.hasSession()&&g.isLoggedIn()&&(d.hasNested(y,"favourites","enabled")&&y.favourites.enabled&&s.push(P(r)),d.hasNested(y,"watchlist","enabled")&&y.watchlist.enabled&&s.push(D(r))),r instanceof u&&(t=r.getSerie())&&s.push(t.getSeasons().then(function(e){var i=0;return d.each(e,function(e){var t=e.getEpisodesList();d.each(t,function(){i++})}),i?a.resolve({action:"episodeSelector",class:"episode-selector"}):w()}))),o&&0<o.length&&s.push(a.resolve({action:"moreInfo",class:"info"})),a.all(s).then(function(e){return d.filter(e,function(e){return null!==e})})):r instanceof c?r.getSeasons().then(function(e){var t,i=null,n=null;return d.each(e,function(e){var t=e.getEpisodesList();d.each(t,function(e){g.isAnonymous()&&e.setPosition(h.getBookmarkFromLocalStorage(e)),i||(i=e),0<e.getPosition()&&(n=e)})}),(t=n||i)?(n?s.push(T(t)):s.push(b(t,r.getLabel())),s.push(a.resolve({action:"episodeSelector",class:"episode-selector"}))):s.push(w()),o&&0<o.length&&s.push(a.resolve({action:"moreInfo",class:"info"})),g.hasSession()&&g.isLoggedIn()&&(d.hasNested(y,"favourites","enabled")&&y.favourites.enabled&&s.push(P(r)),d.hasNested(y,"watchlist","enabled")&&y.watchlist.enabled&&s.push(D(r))),a.all(s)}).then(function(e){return d.filter(e,function(e){return null!==e})}):void 0:a.reject("No asset found")},execute:function(e,t){var i=this["_"+e];if(!d.isFunction(i))throw Error("The action: `"+e+"` has not been implemented yet");i(t)},_play:function(t){k(t.asset,t.serieAsset).then(function(e){e?_.getFeature("accounts").show_parental_warning?p.isPinSet().then(function(e){g.isLoggedIn()&&e?L(O,t.asset,t.serieAsset,0,t.forceClose):x(t.asset,t.serieAsset,0,t.forceClose)}):L(O,t.asset,t.serieAsset):O(t.asset,t.serieAsset)})},_resume:function(t){k(t.asset,t.serieAsset).then(function(e){e?_.getFeature("accounts").show_parental_warning?p.isPinSet().then(function(e){g.isLoggedIn()&&e?L(R,t.asset,t.serieAsset,t.position):x(t.asset,t.serieAsset,t.position)}):L(R,t.asset,t.serieAsset,t.position):R(t.asset,t.serieAsset,t.position)})},_moreInfo:function(e){E.route("moreInfoModal",{asset:e.asset})},_episodeSelector:function(e){E.route("episodeSelector",{serie:e.serieAsset||e.asset})},_favorite:function(e){var t=e.asset,i=e.evt.target.getChildWidgetByIndex(0),n=function(e){i.removeClass(e?v:m),i.addClass(e?m:v)};i.hasClass(v)?s.addItem(t).then(function(){n(!0)}).catch(function(){s.isPartOf(t.getId()).then(function(e){n(e)}).catch(function(){n(!1)})}):s.removeItem(t).then(function(){n(!1)}).catch(function(){s.isPartOf(t.getId()).then(function(e){n(e)}).catch(function(){n(!0)})})},_watchlist:function(e){var t=e.evt.target.getChildWidgetByIndex(0);t.hasClass(A)?i.addItem(e.asset).then(function(){t.removeClass(A),t.addClass(C)}):i.removeItem(e.asset).then(function(){t.removeClass(C),t.addClass(A)})},_playTrailer:function(t){k(t.asset,t.serieAsset).then(function(e){e?L(N,t.asset):N(t.asset)})},_back:function(){var e=E.getComponent("main");e&&e._historyStack.length&&e.back()},_restricted:function(e){var t="content",i=[],n=0;e.asset.entitlement.reason?e.asset.entitlement.reason===f.Reasons.GEOBLOCK&&(t="geoblock_content",i.push(new o(I.get("back"),function(){E.getComponent("modal").hide()}))):g.hasSession()&&g.isLoggedIn()?(t="subscribe_content",i.push(new o(I.get("back"),function(){E.getComponent("modal").hide()}))):(t="log_in_content",i.push(new o(I.get("restriction.dialog.log_in_now"),function(){E.route("login")})),i.push(new o(I.get("restriction.dialog.log_in_later"),function(){E.getComponent("modal").hide()})),n=1),E.route("dialog",{title:I.get("restriction.dialog.title"),content:I.get("restriction.dialog."+t),commands:i,cancelCommandIndex:n})},getPlayerActions:function(){return["play","resume","playTrailer"]}}}),define("application/managers/ads",["smart-ott/config","rofl/lib/promise","rofl/lib/utils","rofl/advertisement/vast","rofl/advertisement/vmap","rofl/timelinemanager/timeline/adbreak","rofl/timelinemanager/timelineevents","smart-ott/resolver"],function(e,o,a,t,l,c,u,d){"use strict";var n=e.getFeature("ads")||{},h=a.now();return{getAds:function(e){var t=n.google_dfp||n.google,i=n.freewheel;return n.enabled?a.isObject(t)?this._getGoogleDfpAds(t,e):a.isObject(i)?this._getFreewheelAds(i,e):o.resolve(e.getAds()):o.reject()},_getGoogleDfpAds:function(i,n){var r,s="https://pubads.g.doubleclick.net/gampad/ads?";return d.retrieveModel("ads").then(function(e){var t=new e(i,n);return(r=t.getGoogleParameters())?new l(s+a.serialize(r)).prepare():o.resolve()}).catch(function(){return r={env:"vp",gdfp_req:1,unviewed_position_start:1,output:i.vmap_enabled?"vmap":"vast",iu:i.network_code+(i.ad_levels?"/"+i.ad_levels:""),sz:i.ad_sizes,url:window.location,correlator:a.now(),description_url:window.location},s+=a.serialize(r),(i.vmap_enabled?new l(s):new c(u.AD_BREAK.PRE_ROLLS,u.AD_BREAK.PRE_ROLLS,new t(s))).prepare()})},_getFreewheelAds:function(i,n){var r,s=i.base_url;return d.retrieveModel("ads").then(function(e){var t=new e(i,n);return(r=t.getFreewheelParameters())?new l(s+"?"+a.serialize(r)).prepare():o.resolve()}).catch(function(){return r={nw:i.network_code,prof:i.player_profile,csid:i.network_code||i.site_section,caid:n.getId(),vdur:n.getDuration(),resp:"vmap1",pvrn:h,vprn:a.now(),metr:"1031",flag:"+amcb+emcr+sltp+play+slc"},new l(s+"?"+a.serialize(r)).prepare()})}}}),define("application/managers/analytics",["smart-ott/config","rofl/lib/utils","antie/runtimecontext","rofl/analytics/web/google"],function(e,i,t,n){"use strict";var r=e.getFeature("analytics")||{},s=t.getCurrentApplication().getConfiguration();return{onScreenView:function(e){var t=this._getAnalyticsObject();t&&t.onScreenView(e)},onStreamStart:function(e){var t=this._getAnalyticsObject();t&&t.onEvent("stream","start",{eventLabel:e})},_getAnalyticsObject:function(){var e=this._analyticsObject,t=r.google;return!!r.enabled&&(e||!!i.isObject(t)&&(this._analyticsObject=e=this._getGoogleAnalytics(t),e))},_getGoogleAnalytics:function(e){return s.analytics={google:{default:e.id}},n.getInstance()}}}),define("application/managers/bookmarking/bookmark",["antie/class","antie/runtimecontext","antie/storageprovider","rofl/lib/promise","smart-ott/config","smart-ott/resolver","application/managers/session"],function(e,t,i,o,n,a,l){"use strict";var s="bookmark-";return{saveCurrentState:function(t,i,n,r,s){return l.hasSession()&&l.isLoggedIn()?a.retrieveApi().then(function(e){return e.create("bookmarking/bookmark",{params:{mediamark:"mediamark",action:t,mediaType:i,mediaID:n,fileID:r,location:s}})}):(s&&this.saveCurrentPosition(i,n,r,s-1),o.resolve({response:"mediamark"}))},saveCurrentPosition:function(t,i,n,r){var e;l.hasSession()&&l.isLoggedIn()?a.retrieveApi().then(function(e){e.create("bookmarking/bookmark",{params:{mediahit:"mediahit",mediaType:t,mediaID:i,fileID:n,location:r}})}):(e={mediahit:"mediahit",mediaType:t,mediaID:i,fileID:n,nLocationSec:r},this._writeBookmarkFromLocalStorage(s+i,e))},getVideoPosition:function(t){var e,i=o.resolve(),n=this,r=t.getId();return l.hasSession()&&l.isLoggedIn()?a.retrieveApi().then(function(e){return e.read("bookmarking/readbookmark",{params:{mediaID:r,asset:t}})}):i.then(function(){if((e=n._getBookmarkFromLocalStorage(s+r))&&e.nLocationSec)return parseInt(e.nLocationSec)})},getBookmarkFromLocalStorage:function(e){var t=e.getId(),i=this._getBookmarkFromLocalStorage(s+t);return i&&i.nLocationSec?parseInt(i.nLocationSec):0},_writeBookmarkFromLocalStorage:function(e,t){l.getBookmarkStorage().setItem(e,t)},_getBookmarkFromLocalStorage:function(e){return l.getBookmarkStorage().getItem(e)}}}),define("application/managers/channel",["rofl/lib/utils","smart-ott/resolver"],function(n,e){"use strict";return{_channels:[],setChannels:function(e){e&&n.isArray(e)&&(this._channels=e)},getAllChannels:function(){return this._channels||!1},getChannelById:function(t){var e=n.filter(this._channels,function(e){return e.getId().toString()===t.toString()});return 0<e.length?e[0]:null},getNextChannel:function(e){var t,i=this.getAllChannels();return i&&e?-1===(t=n.map(i,function(e){return e.getNumber()}).indexOf(e.getNumber()))?null:t===i.length-1?i[0]:i[t+1]:null},getPreviousChannel:function(e){var t,i=this.getAllChannels();return i&&e?-1===(t=n.map(i,function(e){return e.getNumber()}).indexOf(e.getNumber()))?null:0===t?i[i.length-1]:i[t+-1]:null},getChannelByNumber:function(i){var e=this.getAllChannels().slice(0);return e?e.sort(function(e,t){return Math.abs(e.getNumber()-i)-Math.abs(t.getNumber()-i)}).shift():null},getCurrentBroadcastForChannel:function(t){return e.retrieveEPGManager().then(function(e){return e.getCurrentItem([t]).then(function(e){return e[t]})}).catch(function(){return null})}}}),define("application/managers/device",["antie/class","antie/runtimecontext","rofl/lib/promise","smart-ott/resolver","rofl/lib/utils","rofl/lib/l10n","product-layer/dialog/widgets/command","application/managers/session","smart-ott-models/device/addremove"],function(e,o,t,a,i,n,l,r,c){"use strict";var u=n.getInstance();return{_deviceID:function(){return o.getDevice().getUdid()},_logout:function(){r.clearSession().then(function(){o.getCurrentApplication().route("login",{keepHistory:!1})})},_isCurrentDeviceInDomain:function(e){var t=!1,i=this;return e.some(function(e){return e.getDevices().some(function(e){return t=e.getId()&&e.getId().toString().toLowerCase()===i._deviceID().toString().toLowerCase()}),t}),t},_countDevices:function(e){var t=0;return i.each(e,function(e){t+=e.getDevices().length}),t},_addDeviceToDomain:function(){var n=this,r=o.getDevice().getBrand();return new t(function(t,i){a.retrieveApi().then(function(e){e.read("device/add",{data:{deviceName:r,brand:r}}).then(function(e){e.getResponseStatus()!==c.State.OK?e.getResponseStatus()===c.State.DeviceExistsInOtherDomains&&e.household?n._showAlreadyInOtherDomainDialog(e.household).then(t,i):n._showErrorDialog(e.getResponseStatus()).then(t,i):t()})})})},_showErrorDialog:function(n){var r=this,s=o.getCurrentApplication();return n=n||c.State.Error,new t(function(e,t){var i={title:u.get("device.error"),content:u.get("device.errors."+n),commands:[new l(u.get("device.ok"),function(){s.getComponent("modal").hide(),r._logout(),t()})],cancelCommandIndex:0};s.route("dialog",i)})},_showAddDeviceDialog:function(i){var n=this,r=o.getCurrentApplication();return new t(function(e,t){r.route("dialog",{title:u.get("device.title"),content:u.get("device.text",{remainingSlots:i-1}),commands:[new l(u.get("yes"),function(){n._addDeviceToDomain().then(e,t),r.getComponent("modal").hide()}),new l(u.get("no"),function(){r.getComponent("modal").hide(),n._logout(),t()})],cancelCommandIndex:1})})},_showAlreadyInOtherDomainDialog:function(n){var r=this,s=o.getCurrentApplication();return new t(function(t,i){var e={title:u.get("device.anotherDomain.title"),content:u.get("device.anotherDomain.text"),commands:[new l(u.get("yes"),function(){s.getComponent("modal").hide(),r.removeDevice(n).then(function(){r._addDeviceToDomain().then(t,i)},function(e){r._showErrorDialog(e.getResponseStatus()).then(t,i)})}),new l(u.get("no"),function(){s.getComponent("modal").hide(),r._logout(),i()})],cancelCommandIndex:1};s.route("dialog",e)})},addDevice:function(){var n,r,s=this;return new t(function(t,i){a.retrieveApi().then(function(e){e.read("household").then(function(e){e.getDeviceFamilies().length&&s._isCurrentDeviceInDomain(e.getDeviceFamilies())?t():(n=s._countDevices(e.getDeviceFamilies()),0<(r=e.getDeviceLimit()-n)?s._showAddDeviceDialog(r).then(t,i):s._showErrorDialog(c.State.ExceededLimit).then(t,i))})})})},removeDevice:function(r){var s=this;return new t(function(t,i){var n=o.getDevice().getBrand();a.retrieveApi().then(function(e){e.read("device/remove",{data:{deviceName:n,brand:n,udid:s._deviceID(),id:r._id||0}}).then(function(e){e.getResponseStatus()===c.State.OK?t(e):i(e)})},i)})},isDeviceOnDomain:function(){return a.retrieveModel("device").then(function(e){return(new e).isDeviceOnDomain()})}}}),define("application/managers/entitlement",["rofl/class","rofl/lib/promise","smart-ott/resolver","smart-ott-models/assets/serie"],function(e,i,n,r){"use strict";var s,o=null;return s={validate:function(t){return t instanceof r?i.resolve():this.resolveManager().then(function(e){return e.validate(t)},function(){return{entitled:!0,type:s.Types.FREE}})},resolveManager:function(){return o?i.resolve(o):new i(function(t,e){require([n.getNamespace()+"/managers/entitlement"],function(e){o=new e,t(o)},e)})},Types:{FREE:"free",SVOD:"svod",AVOD:"avod",TVOD:"tvod"},Reasons:{GEOBLOCK:"geoblock"}}}),define("application/managers/error",["rofl/lib/l10n","antie/runtimecontext","product-layer/dialog/widgets/command"],function(e,t,r){"use strict";var s=e.getInstance(),o=t.getCurrentApplication();return{showErrorDialogAndReturnToMenu:function(e,t){var i=e||{},n={title:s.get(i.title||"browse.error.title"),content:s.get(i.content||"browse.error.content"),commands:[],cancelCommandIndex:null};t||n.commands.push(new r(s.get(i.toMenu||"browse.error.menu"),function(){o.getComponent("modal").hide(),o.setActiveComponent("menu")})),i.alternativeActionCallback&&n.commands.push(new r(s.get(i.alternativeActionLabel),function(){o.getComponent("modal").hide(),i.alternativeActionCallback()})),o.route("dialog",n)}}}),define("application/managers/event",["antie/class","rofl/lib/utils","rofl/lib/promise","components/pubsub/index","smart-ott/resolver","application/managers/event/list","smart-ott/config"],function(e,i,r,t,n,s,o){"use strict";var a,l;return a=e.extend({eventList:s,init:function(){this._reset(),this._createPubSubInstance(),this._getConfig(),this._prepareAdapters().then(i.bind(this._onAdaptersReady,this))},_reset:function(){this._config=null,this._queue=null,this._adaptersReady=!1,this._pubSub=null},_createPubSubInstance:function(){this._pubSub=new t.default},_getConfig:function(){this._config=i.extend({},i.getNested(o._getSmartTV(),"features","tracking")||{}),this._config.legacy={adapter:"application/managers/event/adapter/legacy",options:{}},this._config.at_internet={adapter:"application/managers/event/adapter/atinternet",options:{lib:"smart-ott-appcore-api-rte-fincons/managers/analytics/atinternet/smarttag"}},this._config.mux={adapter:"application/managers/event/adapter/mux",options:{}}},_prepareAdapters:function(){var t=[];return i.each(this._config,function(e){t.push(this._prepareAdapter(e))},this),r.all(t)},_prepareAdapter:function(i){var n=this;return new r(function(t,e){require([i.adapter],function(e){t(new e(n,i.options))},e)}).then(function(e){return e.prepare()})},_onAdaptersReady:function(){this._adaptersReady=!0,this._executeQueue()},_addToQueue:function(e){this._queue||(this._queue=[]),this._queue.push(e)},_executeQueue:function(){i.each(this._queue,function(e){this.publish.apply(this,e)},this),this._queue.length=0},_removeSubscriptionsGroup:function(e){var t=this._pubSub;i.each(e,t.unsubscribe,t)},_removeSubscriptions:function(){i.each(s,this._removeSubscriptionsGroup,this)},subscribe:function(){this._pubSub.subscribe.apply(this._pubSub,arguments)},unsubscribe:function(){this._pubSub.unsubscribe.apply(this._pubSub,arguments)},publish:function(){this._adaptersReady?this._pubSub.publish.apply(this._pubSub,arguments):this._addToQueue(arguments)},terminate:function(){this._removeSubscriptions(),this._reset()}}),{getInstance:function(){return l||(l=new a),l}}}),define("application/managers/event/adapter",["antie/class"],function(e){"use strict";return e.extend({init:function(e,t){this._options=t||{},this._publisher=e,this._service=null},prepare:function(){throw"Method prepare was called but not implemented."},handleEvent:function(e){var t;this._service&&(t=this._getTrackingParams(e),this._service.track(t))},_getTrackingParams:function(e){throw"Method _getTrackingParams was called using event "+typeof e+" but not implemented."}})}),define("application/managers/event/adapter/adobeanalytics",["application/managers/event/adapter","application/managers/event/list","rofl/timelinemanager/timelineevents","components/adobe-analytics/index","rofl/lib/utils","rofl/lib/promise","antie/runtimecontext"],function(e,c,t,n,u,i,r){"use strict";return e.extend({init:function(e,t){this._super(e,t),this._eventHandler=u.bind(this.handleEvent,this),this._videoEventHandler=u.bind(this.handleVideoEvent,this),this._player=r.getDevice().getMediaPlayer(),this._player.getQoSObject=function(){return{bitrate:null,startupTime:0,fps:null,droppedFrames:0}},this.adBreakPosition=0,this.adActive=!1,this._buffering=!1,this._hasBeenReset=!1,this._resetSeeking()},prepare:function(){return this._service=new n.default(this._options,this._player),this._subscribeEventListeners(!!this._options.video),i.resolve()},_subscribeEventListeners:function(e){this._publisher.subscribe(c.APPLICATION.FIRST_LAUNCH,this._eventHandler),this._publisher.subscribe(c.APPLICATION.LAUNCH,this._eventHandler),this._publisher.subscribe(c.APPLICATION.READY,this._eventHandler),this._publisher.subscribe(c.APPLICATION.EXIT,this._eventHandler),this._publisher.subscribe(c.APPLICATION.ERROR,this._eventHandler),this._publisher.subscribe(c.PAGE.SHOW,this._eventHandler),this._publisher.subscribe(c.INPUT.NAVIGATE,this._eventHandler),this._publisher.subscribe(c.INPUT.SELECT,this._eventHandler),this._publisher.subscribe(c.SEARCH.QUERY,this._eventHandler),this._publisher.subscribe(c.SEARCH.SUCCESS,this._eventHandler),this._publisher.subscribe(c.SEARCH.FAILED,this._eventHandler),this._publisher.subscribe(c.SEARCH.CONVERSION,this._eventHandler),e&&(this._publisher.subscribe(c.INPUT.SEEK,this._videoEventHandler),this._publisher.subscribe(c.INPUT.STOP,this._videoEventHandler),this._publisher.subscribe(c.PLAYER.PLAYING,this._videoEventHandler),this._publisher.subscribe(c.PLAYER.PAUSED,this._videoEventHandler),this._publisher.subscribe(c.PLAYER.BUFFERING,this._videoEventHandler),this._publisher.subscribe(c.PLAYER.COMPLETE,this._videoEventHandler),this._publisher.subscribe(c.PLAYER.ERROR,this._videoEventHandler),this._publisher.subscribe(c.PAGE.READY,this._videoEventHandler),this._publisher.subscribe(c.PAGE.HIDE,this._videoEventHandler),this._publisher.subscribe(c.PAGE.BACK,this._videoEventHandler))},handleEvent:function(e){var t=e.event;if(this._service)switch(t){case c.APPLICATION.FIRST_LAUNCH:case c.APPLICATION.LAUNCH:case c.APPLICATION.READY:case c.APPLICATION.EXIT:case c.APPLICATION.ERROR:case c.PAGE.SHOW:case c.SEARCH.QUERY:case c.SEARCH.SUCCESS:case c.SEARCH.FAILED:case c.SEARCH.CONVERSION:case c.SESSION.AUTHENTICATED:case c.SESSION.REFRESHED:case c.SESSION.TERMINATED:this._service.track(n.EVENTS.PAGE_VISIT,this._getTrackingParams(e));break;case c.INPUT.NAVIGATE:case c.INPUT.SELECT:this._service.track(n.EVENTS.LINK_VISIT,this._getTrackingParams(e))}},handleVideoEvent:function(e){var t=e.event,i=e.params&&e.params.pageName||"";if(this._service)switch(t){case c.PAGE.READY:"player"===i&&this._service.trackVideoEvent(n.VIDEO_EVENTS.SESSION_START,this._getVideoTrackingParams(e));break;case c.PAGE.HIDE:case c.PAGE.BACK:"player"===i&&this._onUserEnd();break;case c.PLAYER.PLAYING:this._onPlay(e);break;case c.PLAYER.COMPLETE:case c.INPUT.STOP:this._onEnd();break;case c.PLAYER.ERROR:this._service.trackVideoEvent(n.VIDEO_EVENTS.ERROR,this._getVideoTrackingParams(e));break;case c.PLAYER.BUFFERING:this._onBuffer();break;case c.INPUT.SEEK:this._onSeek();break;case c.PLAYER.PAUSED:this._service.trackVideoEvent(n.VIDEO_EVENTS.PAUSE,this._getVideoTrackingParams(e))}},_getTrackingParams:function(e){var t=(u.getNested(e,"params","pageName")||"").toLowerCase(),i=u.getNested(e,"params","asset"),n=i&&i.getLabel&&i.getLabel(),r=e.event.replace("-",":"),s=u.getNested(e,"params","target"),o=u.getNested(e,"params","button"),a=u.getNested(e,"params","query"),l=u.getNested(e,"params","count");switch(e.event){case c.PAGE.SHOW:return{pageName:n?t+":"+n:t,contextData:{section:t}};case c.INPUT.NAVIGATE:return{src:!0,linkType:"o",linkName:r+":"+s.toLowerCase()};case c.INPUT.SELECT:return{src:!0,linkType:"o",linkName:r+":"+o.toLowerCase()};case c.SEARCH.QUERY:return{pageName:r,contextData:{search_query:a,section:t}};case c.SEARCH.CONVERSION:return{pageName:r,contextData:{search_conversion:s,section:t}};case c.SEARCH.FAILED:return{pageName:r,contextData:{section:t}};case c.SEARCH.SUCCESS:return{pageName:r,contextData:{search_results:l,section:t}};case c.APPLICATION.READY:case c.APPLICATION.FIRST_LAUNCH:case c.APPLICATION.LAUNCH:case c.APPLICATION.EXIT:case c.APPLICATION.ERROR:return{pageName:r,contextData:{section:"application"}};case c.SESSION.AUTHENTICATED:case c.SESSION.REFRESHED:case c.SESSION.TERMINATED:return{pageName:r,contextData:{section:"session"}}}},_getVideoTrackingParams:function(e){var t=u.getNested(e,"params","asset");switch(e.event){case c.PAGE.READY:return{player:this._player,mediaName:t._label||"",mediaId:t._id||"",mediaLength:t._duration||0,mediaType:"broadcast"===t._type?"LIVE":"VOD"};case c.PAGE.HIDE:return{};case c.PLAYER.PLAYING:case c.PLAYER.PAUSED:return{};case c.PLAYER.ERROR:return{errorMessage:"Unknown error"}}},_onPlay:function(e){this._isBuffering()&&(this._buffering=!1,this._service.trackVideoEvent(n.VIDEO_EVENTS.BUFFER_COMPLETE)),this._seeking?this._onSeekEnd():this._service.trackVideoEvent(n.VIDEO_EVENTS.PLAY,this._getVideoTrackingParams(e))},_onBuffer:function(){this._isBuffering()||(this._buffering=!0,this._bufferTimestamp=(new Date).getTime(),this._service.trackVideoEvent(n.VIDEO_EVENTS.BUFFER_START))},_isBuffering:function(){return this._buffering},isAdActive:function(){return this._adActive},_onSeek:function(){this._resetBufferTimestamp(),this._seeking||(this._seeking=!0,this._service.trackVideoEvent(n.VIDEO_EVENTS.SEEK_START))},_onSeekEnd:function(){this._resetSeeking(),this._service.trackVideoEvent(n.VIDEO_EVENTS.SEEK_COMPLETE)},_resetSeeking:function(){this._seeking=null},_resetBufferTimestamp:function(){this._bufferTimestamp=null},_onEnd:function(){this._isAdActive()||this._service.trackVideoEvent(n.VIDEO_EVENTS.SESSION_END),this._onReset()},_onUserEnd:function(){this._onReset(!0)},_onReset:function(e){this._hasBeenReset||(!e&&this._isAdActive()||(this._hasBeenReset=!0,this._service.trackVideoEvent(n.VIDEO_EVENTS.SESSION_END),this._adBreakPosition=0,this._adActive=!1),this._resetSeeking(),this._buffering=!1)}})}),define("application/managers/event/adapter/api",["rofl/lib/utils","application/managers/event/list","application/managers/event/adapter","smart-ott/resolver"],function(i,e,t,n){"use strict";return t.extend({init:function(e,t){this._super(e,t),this._eventHandler=i.bind(this.handleEvent,this)},prepare:function(){return n.retrieveModel("event").then(i.bind(function(e){this._service=e,this._subscribeEventListeners()},this)).catch(function(){})},_subscribeEventListeners:function(){i.each(e,function(e){i.each(e,function(e){this._publisher.subscribe(e,this._eventHandler)},this)},this)},handleEvent:function(e){var t;this._service&&(t=this._getTrackingParams(e),(new this._service).track(t))},_getTrackingParams:function(e){return e}})}),define("application/managers/event/adapter/applicationtag",["application/managers/event/adapter","application/managers/event/list","components/comscore-application-tag/index","rofl/lib/utils","rofl/lib/promise"],function(e,r,t,i,n){"use strict";return e.extend({init:function(e,t){this._super(e,t),this._eventHandler=i.bind(this.handleEvent,this)},prepare:function(){return this._service=new t.default(this._options),this._subscribeEventListeners(),n.resolve()},_subscribeEventListeners:function(){i.each(r,function(e){i.each(e,function(e){this._publisher.subscribe(e,this._eventHandler)},this)},this)},handleEvent:function(e){if(this._service)switch(e.event){case r.PAGE.SHOW:this._service.track(t.EVENTS.PAGE_VIEW,this._getTrackingParams(e));break;case r.APPLICATION.READY:case r.SESSION.AUTHENTICATED:case r.SESSION.REFRESHED:case r.SESSION.TERMINATED:case r.INPUT.SELECT:case r.INPUT.NAVIGATE:case r.SEARCH.QUERY:case r.SEARCH.SUCCESS:case r.SEARCH.FAILED:case r.SEARCH.CONVERSION:this._service.track(t.EVENTS.HIDDEN_ACTION,this._getTrackingParams(e));break;case r.APPLICATION.FIRST_LAUNCH:case r.APPLICATION.LAUNCH:this._service.track(t.EVENTS.APPLICATION_START,this._getTrackingParams(e));break;case r.APPLICATION.EXIT:this._service.track(t.EVENTS.APPLICATION_EXIT,this._getTrackingParams(e))}},_getTrackingParams:function(e){var t=e.params&&e.params.pageName,i=e.params&&e.params.button,n=e.params&&e.params.asset;switch(e.event){case r.PAGE.SHOW:return n?{name:t,asset:n.getId()}:{name:t};case r.INPUT.SELECT:return t?{page:t,button:i||""}:{};case r.INPUT.NAVIGATE:return{action:e.event,target:e.params.target};case r.SESSION.AUTHENTICATED:case r.SESSION.REFRESHED:case r.SESSION.TERMINATED:case r.APPLICATION.READY:return e.params&&e.params.type?{action:e.event,type:e.params.type}:{action:e.event};case r.SEARCH.QUERY:return{action:e.event,query:e.params.query};case r.SEARCH.SUCCESS:case r.SEARCH.FAILED:return{action:e.event};case r.SEARCH.CONVERSION:return{action:e.event,target:e.params.target};default:return{}}}})}),define("application/managers/event/adapter/atinternet",["application/managers/event/adapter","application/managers/event/list","smart-ott-models/assets/broadcast","rofl/lib/utils","rofl/lib/promise","antie/runtimecontext","smart-ott-models/assets/movie","smart-ott-models/assets/serie","smart-ott-models/assets/episode","rofl/lib/date.format"],function(e,s,l,o,t,a,c,u,d){"use strict";var i=[s.PLAYER.PLAYING,s.PLAYER.PAUSED,s.PLAYER.COMPLETE,s.PLAYER.STOPPED,s.INPUT.SEEK],n=[s.ADVERTISEMENT.AD_BREAK_START,s.ADVERTISEMENT.AD_BREAK_END,s.ADVERTISEMENT.AD_START],r={SEARCH:[s.SEARCH.SUCCESS,s.SEARCH.FAILED],PERSONAL:[s.PERSONAL.FAVOURITES_ADD,s.PERSONAL.FAVOURITES_REMOVE,s.PERSONAL.CONTINUE_WATCHING],OTHERS:[s.PAGE.SHOW,s.PAGE.HIDE,s.ADDITIONAL_ACTION.HERO]},h="play",g="pause",p="stop",f="move",_="live",m="clip",v={PRE_ROLL:"vpre",MID_ROLL:"vmid",POST_ROLL:"vpost",VIDEO:"video"},C=0,A=1,E=2,I=3,y={DISCOVER:"Discover",DETAIL:"Detail",SEARCH:"Search",COLLECTIONS:"Collections",PROGRAMMES:"Programmes",CONNECT:"Connect",LANDING:"Landing",FAVOURITES:"Favourites",ACCOUNT:"Account",SETTINGS:"Settings",PLAYER:"player"},b="vid",S="ott",T="pl",w={INDEX:"index",VIDEO:"video"},P="ie",D="en",k="Discover Standard | RTÉ Player",O="[8]",R="[preroll]",L="[midroll]",x="[postroll]",N=function(e){return e&&e.replace(/\s/g,"-")},M=function(e){return e&&e.toLowerCase().replace(/\s/g,"")},B=a.getDevice().getBrand(),F=a.getDevice().getOperatingSystem().toLowerCase();return e.extend({init:function(e,i){if(this._super(e,i),this._streamSenseEventHandler=o.bind(this.handleStreamSenseEvent,this),this._advertisementEventhandler=o.bind(this.handleAdvertisementEvent,this),this._searchEventHandler=o.bind(this.handleSearchEvent,this),this._personalEventHandler=o.bind(this.handlePersonalEvent,this),this._otherNonStreamSenseEventHandler=o.bind(this.handleNonStreamSenseEvent,this),this._streamSenseTag=null,this._preRollTag=null,this._midRollTag=null,this._lastDisplayedPage=null,this._ignoreUpcomingPlayEvent=!1,this._isAdBreakActive=!1,this._formatAVPR(),i.lib)return new t(function(e,t){require([i.lib],function(){e()},t)})},prepare:function(){return this._subscribeEventListeners(),t.resolve()},_subscribeEventListeners:function(){o.each(i,function(e){this._publisher.subscribe(e,this._streamSenseEventHandler)},this),o.each(n,function(e){this._publisher.subscribe(e,this._advertisementEventhandler)},this),o.each(r.OTHERS,function(e){this._publisher.subscribe(e,this._otherNonStreamSenseEventHandler)},this)},handleStreamSenseEvent:function(e){var t,i,n={};if(this._activeTag){switch(t=this._activeTag.tag,e.event){case s.PLAYER.PLAYING:this._ignoreUpcomingPlayEvent||this._isAdBreakActive||(i=h),this._ignoreUpcomingPlayEvent=!1;break;case s.PLAYER.PAUSED:i=g;break;case s.PLAYER.COMPLETE:this._isAdBreakActive||(i=p);break;case s.INPUT.SEEK:i=f}i&&t&&(n={action:i,playerId:this._activeTag.playerId},this._isAdBreakActive||(n.mediaLabel=this._getMediaLabel(e.params)),t.richMedia.send(n))}},handleAdvertisementEvent:function(e){var t,i=!1,n=!1,r=o.getNested(e,"params","adBreak");switch(e.event){case s.ADVERTISEMENT.AD_BREAK_START:this._isAdBreakActive=!0,r&&(o.isArray(r)&&0<r.length?t=r[0].trigger:r.trigger&&(t=r.trigger),i="adbreak-pre-rolls"===t,n="adbreak-post-rolls"===t),this._activeTag=i?{tag:this._preRollTag,playerId:A}:n?{tag:this._midRollTag,playerId:I}:{tag:this._midRollTag,playerId:E},this._streamSenseTag.richMedia.send({action:g,playerId:C,mediaLabel:this._getMediaLabel()});break;case s.ADVERTISEMENT.AD_START:this._addAdImpression(o.getNested(e,"params","ad")||{});break;case s.ADVERTISEMENT.AD_BREAK_END:this._activeTag&&this._activeTag.tag&&this._activeTag.tag.dispatch(),o.getNested(this._activeTag,"playerId")===I&&this._clear(),this._activeTag={tag:this._streamSenseTag,playerId:C},this._isAdBreakActive=!1}},handleSearchEvent:function(e){var t=this.getTag(),i=e.params;t.internalSearch.set({keyword:i.query,resultPageNumber:i.pages}),this.getAndDispatchPageTag({name:"search_result"},t)},handlePersonalEvent:function(e){var t=o.getNested(e,"params","item")||null,i=t?t.getLabel().replace(/\s/g,""):"";this.getAndDispatchPageTag({name:e.event,chapter1:this._lastDisplayedPage,chapter2:i})},handleNonStreamSenseEvent:function(t){var i,n,r=this;switch(t.event){case s.PAGE.SHOW:this._lastDisplayedPage=t.params.pageName,i=t.params.parentPage,n=i&&this._getParentPageName(i),o.each(y,function(e){e.toLowerCase()===t.params.pageName.toLowerCase()?(t.params.pageName,t.params.pageName.toLowerCase()===y.PLAYER.toLowerCase()?(r._onPlayerStartTime(t.params.args),null):t.params.pageName.toLowerCase()===y.LANDING.toLowerCase()?(r._handlePageShow("player::discover.standard",k),null):t.params.pageName.toLowerCase()===y.FAVOURITES.toLowerCase()?r._handlePageShow("player::profile"+M(t.params.pageName),t.params.pageName):t.params.asset?r._handlePageShowAsset(t.params.asset):r._handlePageShow("player::"+M(t.params.pageName),t.params.pageName)):n&&e.toLowerCase()===n.toLowerCase()&&n.toLowerCase()===y.PROGRAMMES.toLowerCase()&&r._handlePageShow("player::all-programmes."+r._getPageNameAndParents(i,t.params.pageName),t.params.pageName)});break;case s.ADDITIONAL_ACTION.HERO:t.event,this._lastDisplayedPage,t.params.item.getLabel().replace(/\s/g,"");break;case s.PAGE.HIDE:this._clear()}},_onPlayerStartTime:function(e){this._tag=this.createTag(),this._createMediaTags(e),this._streamSenseTag.richMedia.send({action:h,playerId:C,mediaLabel:this._getMediaLabel(e)}),this._handleVirtualPageEvent(e)},_getParentPageName:function(e){return e&&e._parent?this._getParentPageName(e._parent):e.getLabel()},_getPageNameAndParents:function(e,t){return e&&e._parent?this._getPageNameAndParents(e._parent,e.getLabel()+"."+t):M(t).replace(/&/g,"")},_handlePageShow:function(e,t){var i={Media_Type:b,Platform:S,App_Name:T,Content_ID:"",Title:t,Pub_Date:"",Content_Type:w.INDEX,Language:D,Author:"",Article_Source:"",Programme_ID:"",BRN_ID:"",Country_Code:P,Genre:"",Series_Number:"",Episode_Number:"",Programme_Name:"",Subscription_Type:"",Production_Company:""};this.getAndDispatchPageTag({name:e,level2:"7",customObject:i})},_handlePageShowAsset:function(e){var t,i="player::",n="",r="",s="",o="",a="";e instanceof c?(i+="movie.",i+=N(e.getLongTitle()).toLowerCase()+"."+e.getGuid(),r=e.getGuid(),n=a=e.getLongTitle()):e instanceof d?(i+="series.",i+=N(e.getLongTitle()).toLowerCase()+"."+e.getSerie().getGuid(),i+=".episode."+e.getGuid(),r=e.getGuid(),s=e.getSerie().getGuid(),o=e.getSerie().getBoxset&&e.getSerie().getBoxset()?"boxset":"",n=e.getLongTitle()+(e.getDescription()&&" | "+e.getDescription()||""),a=e.getLongTitle()):e instanceof u&&(i+="series.",i+=N(e.getLabel()).toLowerCase()+"."+e.getGuid(),r=e.getGuid(),n=a=e.getLabel(),o=e.getBoxset&&e.getBoxset()?"boxset":""),t={Media_Type:b,Platform:S,App_Name:T,Content_ID:r,Title:"Program | "+n+" | RTÉ Player",Pub_Date:e.getPublishDate&&e.getPublishDate()||"",Content_Type:w.VIDEO,Language:D,Author:"",Article_Source:"",Programme_ID:s||r,BRN_ID:r,Country_Code:P,Genre:e.getCategories&&e.getCategories()&&e.getCategories().join(" ")||"",Episode_Number:e.getEpisodeNumber&&e.getEpisodeNumber()||"",Series_Number:e.getSeasonNumber&&e.getSeasonNumber()||"",Programme_Name:a||"",Subscription_Type:o,Production_Company:e.getProvider&&e.getProvider()||""},this.getAndDispatchPageTag({name:i,level2:"7",customObject:t})},_createMediaTags:function(e){this._clear(),this._preRollTag=this._preRollTag||this.createRichMediaTag(e,v.PRE_ROLL),this._streamSenseTag=this._streamSenseTag||this.createRichMediaTag(e,v.VIDEO),this._midRollTag=this._midRollTag||this.createRichMediaTag(e,v.MID_ROLL),this._postRollTag=this._postRollTag||this.createRichMediaTag(e,v.POST_ROLL),this._activeTag={tag:this._streamSenseTag,playerId:C}},_handleVirtualPageEvent:function(e){var t=this.getTag(),i=e.asset,n=e.serieAsset,r="",s="";i&&(t.page.set({name:"richmedia::virtual_page",level2:"7"}),t.setParam("apvr",this._AVPR),r=i&&i.getLabel&&i.getLabel()||i.getLongTitle&&i.getLongTitle()||n&&n.getLongTitle&&n.getLongTitle()||n.getLabel&&n.getLabel(),s=i.getDescription&&i.getDescription()||i.getLabel&&i.getLabel()||i.getBroadcastDate&&i.getBroadcastDate(),i instanceof d&&i.getSeasonNumber&&null===i.getSeasonNumber()&&(s=i.getBroadcastDate()&&new Date(i.getBroadcastDate()).format("D d F Y")||s),t.customVars.set({page:{1:b,2:S,3:T,4:i.getGuid&&i.getGuid(),5:i.getGuid&&i.getGuid(),6:"rte_smarttv_player",7:"1.0",8:"player",9:"player",10:i.getStation&&i.getStation(),11:i.getCategories&&i.getCategories()&&i.getCategories().join(" "),12:r,13:s,15:i.getEpisodeNumber&&i.getEpisodeNumber(),16:i.getSeasonNumber&&i.getSeasonNumber(),17:0,18:i.getSubCategories&&i.getSubCategories()&&i.getSubCategories().join(" "),19:i.getCollectionTitle&&i.getCollectionTitle()||"",20:n&&n.getBoxset&&n.getBoxset()||0}}),t.dispatch(),this._ignoreUpcomingPlayEvent=!0)},createRichMediaTag:function(e,t){var i,n,r,s,o=this.getTag();return e&&(i=this._getMediaLabel(e),r=e.asset.getDurationSeconds(),s=e.asset instanceof l?_:m,n={mediaType:t,mediaLevel2:"7",playerId:t===v.PRE_ROLL?A:t===v.MID_ROLL?v.MID:t===v.POST_ROLL?v.POST:C,duration:r,isEmbedded:!1,broadcastMode:s},t===v.PRE_ROLL||t===v.MID_ROLL||t===v.POST_ROLL?n.linkedContent=i:(n.mediaLabel=i,n.refreshDuration={0:5}),o.richMedia.add(n)),o},_getMediaLabel:function(e){return this._mediaLabel||this._createMediaLabel(e)},_createMediaLabel:function(e){var t=e.asset,i=t instanceof l,n=t.getLongTitle&&t.getLongTitle()||t.getLabel&&t.getLabel(),r=i?t.getStartTime():t.getPublishDate(),s=t.getProvider()||"No Provider",o=t.getGuid&&t.getGuid(),a=[];return this._asset=t,a.push(n),a.push(r),a.push(s),a.push(o),this._mediaLabel=a.join("::")},_addAdImpression:function(e){var t=this._activeTag.tag,i=R;this._activeTag.playerId===E?i=L:this._activeTag.playerId===I&&(i=x),t&&t.publisher.add({impression:{campaignId:O,creation:i,variant:"[]",format:"[]",generalPlacement:"[]",detailedPlacement:"[]",advertiserId:"["+e.id+"]",url:"[]"}})},getAndDispatchPageTag:function(e,t){(t=t||this.createTag()).page.set(e),t.setParam("apvr",this._AVPR),t.dispatch()},createTag:function(){return new ATInternet.Tracker.Tag({secure:!0})},getTag:function(){return this._tag||(this._tag=this.createTag()),this._tag},_clear:function(){this._streamSenseTag&&this._streamSenseTag.richMedia.removeAll(),this._preRollTag&&this._preRollTag.richMedia.removeAll(),this._midRollTag&&this._midRollTag.richMedia.removeAll(),this._streamSenseTag=null,this._preRollTag=null,this._midRollTag=null,this._activeTag=null,this._isAdBreakActive=!1,this._ignoreUpcomingPlayEvent=!1,this._mediaLabel=null,this._tag=null},_formatAVPR:function(){var e,t,i=a.getCurrentApplication().getConfiguration().version,n=-1<F.indexOf("vewd")?["VEWD"]:o.filter(["LG","SAMSUNG","SONY","PANASONIC","PHILIPS","SAORVIEW"],function(e){return-1!==B.toUpperCase().indexOf(e)}),r="P_{0}_3 {1}";1===n.length?t=n[0]:-1<F.indexOf("android")&&(t="ANDROID"),t?(e="LG"===t?"LG":t[0]+t.substring(1,3).toLowerCase(),r=o.formatString(r,e,i),this._AVPR=r):this._AVPR=i}})}),define("application/managers/event/adapter/legacy",["application/managers/event/adapter","application/managers/event/list","application/managers/analytics","rofl/lib/utils","rofl/lib/promise"],function(e,t,r,i,n){"use strict";var s={};return s[t.PAGE.SHOW]=function(e){var t=e.params||{},i=t.pageName,n=t.asset;"player"!==i&&(n&&(i+=" - "+n.getLabel()),r.onScreenView(i))},s[t.PAGE.READY]=function(e){"player"===e.params.pageName&&r.onStreamStart(e.params.asset.getLabel())},e.extend({init:function(e,t){this._super(e,t),this._eventHandler=i.bind(this.handleEvent,this)},prepare:function(){return this._subscribeEventListeners(),n.resolve()},_subscribeEventListeners:function(){i.each(s,function(e,t){this._publisher.subscribe(t,this._eventHandler)},this)},handleEvent:function(e){s.hasOwnProperty(e.event)&&i.isFunction(s[e.event])&&s[e.event](e)}})}),define("application/managers/event/adapter/mux",["application/managers/event/adapter","application/managers/event/list","application/managers/session","smart-ott-models/assets/broadcast","rofl/lib/utils","rofl/lib/promise","rofl/devices/mediaplayer/mediaplayer","antie/runtimecontext"],function(e,r,n,s,o,t,i,a){"use strict";var l={env_key:"7rro99i9482rqqokaa3kuvgs4",player_software_name:"RTE_SMARTTRV_PLAYER",player_name:"RTE_SmartTV",player_software_version:"1.0",player_version:"1.0",player_mux_plugin_name:"Plugin_for_RTE_SmartTVs",player_mux_plugin_version:"0.1"},c=[r.INPUT.REWIND,r.INPUT.SEEK,r.INPUT.FAST_FORWARD],u="playerready",d="timeupdate",h="play",g="playing",p="pause",f="seeking",_="seeked",m="ended",v="error",C="viewend",A="adbreakstart",E="adplay",I="adplaying",y="adpause",b="adfirstquartile",S="admidpoint",T="adthirdquartile",w="adended",P="adbreakended",D="aderror",k=a.getDevice().getMediaPlayer(),O=function(e){return e&&e.replace(/\s/g,"_")},R=a.getDevice().getBrand(),L=a.getDevice().getOperatingSystem().toLowerCase();return e.extend({init:function(e,t){this._super(e,t),this._isPlayerActive=!1,this._isPlayerSeeking=!1,this._playerId=null,this._asset=null,this._currentAdUrl=null,this._was25triggered=!1,this._was50triggered=!1,this._was75triggered=!1,this._formatPlayerVersion(),this._streamSenseEventHandler=o.bind(this.handleStreamSenseEvent,this),this._inputEventHandler=o.bind(this.handleInputEvents,this),this._adsEventHandler=o.bind(this.handleAdsEvent,this),this._getPlayheadTimeCallback=o.bind(this._getPlayheadTime,this),this._getStateDataCallback=o.bind(this._getStateData,this)},prepare:function(){return this._subscribeEventListeners(),t.resolve()},_subscribeEventListeners:function(){o.each(o.values(r.PLAYER),function(e){this._publisher.subscribe(e,this._streamSenseEventHandler)},this),o.each(o.values(r.ADVERTISEMENT),function(e){this._publisher.subscribe(e,this._adsEventHandler)},this),o.each(c,function(e){this._publisher.subscribe(e,this._inputEventHandler)},this),this._publisher.subscribe(r.PAGE.READY,this._streamSenseEventHandler)},handleStreamSenseEvent:function(e){var t,i=[],n=!1;switch(this._playerParams=e.params,e.event){case r.PAGE.READY:"player"!==e.params.pageName||this._isPlayerActive||this._initMuxTracker(e.params);break;case r.PLAYER.PLAYING:this._isAdBreakActive?(i.push({event:E,additionalParams:{ad_asset_url:this._currentAdUrl}}),i.push({event:I,additionalParams:{ad_asset_url:this._currentAdUrl}})):(i.push({event:h}),i.push({event:g}));break;case r.PLAYER.PROGRESS:this._isAdBreakActive&&(25<=(t=Math.round(e.params.progress/e.params.duration*100))&&!this._was25triggered?(i.push({event:b}),this._was25triggered=!0):50<=t&&!this._was50triggered?(i.push({event:S}),this._was50triggered=!0):75<=t&&!this._was75triggered&&(i.push({event:T}),this._was75triggered=!0)),i.push({event:d});break;case r.PLAYER.PAUSED:this._isAdBreakActive?i.push({event:y,additionalParams:{ad_asset_url:this._currentAdUrl}}):i.push({event:p});break;case r.PLAYER.COMPLETE:this._isAdBreakActive?(this._was25triggered=!1,this._was50triggered=!1,this._was75triggered=!1,this._currentAdUrl=null,i.push({event:w,additionalParams:{ad_asset_url:this._currentAdUrl}})):(i.push({event:m}),i.push({event:C}),n=!0);break;case r.PLAYER.ERROR:this._isAdBreakActive?i.push({event:D}):(i.push({event:v}),this._clear())}i&&i.length&&this._emitMuxEvent(i,n)},handleInputEvents:function(e){var t=[];switch(e.event){case r.INPUT.SEEK:t.push({event:_}),this._isPlayerSeeking=!1;break;case r.INPUT.REWIND:case r.INPUT.FAST_FORWARD:this._isPlayerSeeking||(this._isPlayerSeeking=!0,t.push({event:f}))}t&&t.length&&this._emitMuxEvent(t)},handleAdsEvent:function(e){var t=[];switch(e.event){case r.ADVERTISEMENT.AD_BREAK_START:this._isAdBreakActive=!0,t.push({event:A});break;case r.ADVERTISEMENT.AD_START:this._currentAdUrl=o.getNested(e,"params","source","url")||"";break;case r.ADVERTISEMENT.AD_BREAK_END:t.push({event:P}),this._isAdBreakActive=!1}t&&t.length&&this._emitMuxEvent(t)},_emitMuxEvent:function(e,t){var i=this._playerId;i||(this._initMuxTracker(this._playerParams||{}),i=this._playerId),o.each(e,function(e){e.additionalParams?mux.emit(i,e.event,e.additionalParams):mux.emit(i,e.event)}),t&&this._clear()},_initMuxTracker:function(e){var t=this._playerId=Math.floor(100*Math.random()+1),i=[];mux.init(t,{getPlayheadTime:this._getPlayheadTimeCallback,getStateData:this._getStateDataCallback,data:this._resolveTrackerData(e)}),this._isPlayerActive=!0,i.push({event:u}),this._emitMuxEvent(i)},_getStateData:function(){return{player_is_paused:k.getState()!==i.STATE.PLAYING,player_width:window.innerWidth,player_height:window.innerHeight,video_source_width:window.innerWidth,video_source_height:window.innerHeight,player_is_fullscreen:!0,player_autoplay_on:!0,player_preload_on:!0,video_source_url:k.getSource(),video_source_mime_type:k.getMimeType(),video_source_duration:this._asset&&this._asset.getDurationSeconds&&1e3*this._asset.getDurationSeconds()}},_getPlayheadTime:function(){return 1e3*k.getCurrentTime()},_resolveTrackerData:function(e){var t=e.asset||{},i=e.series||{};return this._asset=t,l.player_version=this._playerVersion||l.player_version,o.extend(l,{viewer_user_id:n.hasSession()?n.getSession().getIdentity().getId():null,page_type:"watchpage",player_init_time:(new Date).getTime(),video_id:t.getGuid&&O(t.getGuid()),video_title:t.getLongTitle&&O(t.getLongTitle()),video_series:i&&i.getLabel&&O(i.getLabel()),video_language_code:"en",video_content_type:i?"episode":"movie",video_duration:t.getDurationSeconds&&1e3*t.getDurationSeconds(),video_stream_type:t instanceof s?"live":"on-demand",video_cdn:"RTE_CDN"})},_formatPlayerVersion:function(){var e,t,i=a.getCurrentApplication().getConfiguration().version,n=-1<L.indexOf("vewd")?["VEWD"]:o.filter(["LG","SAMSUNG","SONY","PANASONIC","PHILIPS","SAORVIEW"],function(e){return-1!==R.toUpperCase().indexOf(e)}),r="P_{0}_3 {1}";1===n.length?t=n[0]:-1<L.indexOf("android")&&(t="ANDROID"),t?(e="LG"===t?"LG":t[0]+t.substring(1,3).toLowerCase(),r=o.formatString(r,e,i),this._playerVersion=r):this._playerVersion=i},_clear:function(){this._isPlayerActive=!1,this._isPlayerSeeking=!1,this._playerId=null,this._asset=null,this._currentAdUrl=null,this._was25triggered=!1,this._was50triggered=!1,this._was75triggered=!1}})}),define("application/managers/event/adapter/youbora",["application/managers/event/adapter","application/managers/event/list","rofl/lib/utils","rofl/lib/promise","components/youbora/index","smart-ott-models/assets/broadcast"],function(e,i,n,t,r,s){"use strict";return e.extend({init:function(e,t){this._super(e,t),this._eventHandler=n.bind(this.handleEvent,this)},prepare:function(){return this._subscribeEventListeners(),this._service=new r({backend:this._options}),t.resolve()},_subscribeEventListeners:function(){n.each(i,function(e){n.each(e,function(e){this._publisher.subscribe(e,this._eventHandler)},this)},this)},handleEvent:function(e){if(this._service)switch(e.event){case i.PAGE.READY:"player"===e.params.pageName&&(this._playerState="ready",this._service.track(r.EVENTS.PLAY,this._getTrackingParams(e)));break;case i.INPUT.STOP:case i.PLAYER.COMPLETE:case i.PLAYER.STOPPED:"ready"!==this._playerState&&"stopped"!==this._playerState&&(this._playerState="stopped",this._service.track(r.EVENTS.ENDED,this._getTrackingParams(e)));break;case i.PAGE.HIDE:"player"===e.params.pageName&&"stopped"!==this._playerState&&(this._playerState="stopped",this._service.track(r.EVENTS.ENDED,this._getTrackingParams(e)));break;case i.PLAYER.PLAYING:this._playerState="playing",this._service.track(r.EVENTS.PLAYING,this._getTrackingParams(e));break;case i.PLAYER.PAUSED:this._playerState="paused",this._service.track(r.EVENTS.PAUSE,this._getTrackingParams(e));break;case i.PLAYER.ERROR:this._playerState="error",this._service.track(r.EVENTS.ERROR,this._getTrackingParams(e));break;case i.PLAYER.BUFFERING:if("seeking"===this._playerState)break;this._playerState="buffering",this._service.track(r.EVENTS.BUFFERING,this._getTrackingParams(e));break;case i.PLAYER.PROGRESS:this._service.track(r.EVENTS.PROGRESS,this._getTrackingParams(e));break;case i.INPUT.FAST_FORWARD:case i.INPUT.REWIND:"seeking"!==this._playerState&&(this._playerState="seeking",this._service.track(r.EVENTS.SEEKING,this._getTrackingParams(e)))}},_getTrackingParams:function(e){var t={};switch("progress"in e.params&&(t.position=e.params.progress),"duration"in e.params&&(t.duration=e.params.duration),e.event){case i.PAGE.READY:t.title=e.params.asset.getLabel(),t.url=e.params.loadedSource.getMediaUrl(),t.isLive=e.params.asset instanceof s;break;case i.INPUT.SEEK:t.position=e.params.seekTime}return t}})}),define("application/managers/event/list",function(){"use strict";return{APPLICATION:{FIRST_LAUNCH:"app-first-launch",LAUNCH:"app-launch",READY:"app-ready",ERROR:"app-error",EXIT:"app-exit"},API:{ERROR:"api-error"},PAGE:{SHOW:"page-show",LOAD:"page-loading",READY:"page-ready",ERROR:"page-error",HIDE:"page-hide",BACK:"page-back"},SEARCH:{QUERY:"search-query",SUCCESS:"search-success",FAILED:"search-failed",CONVERSION:"search-conversion"},SESSION:{AUTHENTICATED:"session-authenticated",REFRESHED:"session-refreshed",INVALIDATED:"session-invalidated",TERMINATED:"session-terminated"},INPUT:{SELECT:"input-select",NAVIGATE:"input-navigate",PAUSE:"input-pause",RESUME:"input-resume",STOP:"input-stop",SKIP:"input-skip",REWIND:"input-rewind",FAST_FORWARD:"input-fast-forward",SEEK:"input-seek",SELECT_AUDIO:"input-select-audio",SELECT_SUBTITLES:"input-select-subtitles",SELECT_STREAM_QUALITY:"input-select-stream-quality"},PLAYER:{PLAYING:"player-playing",BUFFERING:"player-buffering",PAUSED:"player-paused",ERROR:"player-error",COMPLETE:"player-complete",STOPPED:"player-stopped",MUTE:"player-mute",UNMUTE:"player-unmute",EXPAND:"player-expand",COLLAPSE:"player-collapse",PROGRESS:"player-progress",FIRST_QUARTILE:"player-first-quartile",MIDPOINT:"player-midpoint",THIRD_QUARTILE:"player-third-quartile"},PLAYLIST:{START:"playlist-start",END:"playlist-end"},ADVERTISEMENT:{AD_BREAK_START:"advertisement-ad-break-start",AD_BREAK_END:"advertisement-ad-break-end",AD_BREAK_ERROR:"advertisement-ad-break-error",AD_SHOW:"advertisement-ad-show",AD_START:"advertisement-ad-start",AD_END:"advertisement-ad-end",AD_ACCEPT:"advertisement-ad-accept"},PERSONAL:{FAVOURITES_ADD:"added-to-favourites",FAVOURITES_REMOVE:"removed-from-favourites",CONTINUE_WATCHING:"continue-watching"},ADDITIONAL_ACTION:{HERO:"hero-selected"}}}),define("application/managers/features/deeplinking",[],function(){"use strict";return{_loadedDeeplinkingID:!1,goToPlayer:function(){return!0},shouldLoadDeeplinkingID:function(){return this._deeplinkingID&&!this._loadedDeeplinkingID},getDeeplinkingID:function(){return this._deeplinkingID},setDeeplinkingID:function(e){return this._deeplinkingID=e},deeplinkingIDLoaded:function(){return this._loadedDeeplinkingID=!0}}}),define("application/managers/features/promo",["antie/class","antie/runtimecontext","antie/storageprovider","rofl/lib/promise","smart-ott/config"],function(e,t,i,n,r){"use strict";var s="promo-vars",o="promo_splashscreen",a=null,l=function(){return null===a&&(a=t.getDevice().getStorage(i.STORAGE_TYPE_LOCAL,"smart-ott-promo")),a};return{_shownPromoImage:!1,_readPromoStorage:function(){return l().getItem(s)},_writePromoStorage:function(e){l().setItem(s,e)},_clearPromoStorage:function(){l().removeItem(s)},shownPromo:function(){var e=this.getPromoSettings();this._shownPromoImage=!0,this._writePromoStorage(e.promo_url)},shouldShowPromo:function(){var e;return!(!r.hasFeature(o)||this._shownPromoImage)&&(!(e=this.getPromoSettings()).show_only_once||this._readPromoStorage()!==e.promo_url)},getPromoSettings:function(){return r.getFeature(o)}}}),define("application/managers/localpreferences",["antie/runtimecontext","application/managers/session","antie/storageprovider"],function(e,n,t){"use strict";var i,r=e.getDevice().getStorage(t.STORAGE_TYPE_LOCAL,"smart-ott-preferences"),s=r.getItem("accounts")||{};return i=function(){var e,t,i=null;return(e=n.getSession())&&(t=e.getIdentity())&&(i=t.getId()),i},{ANONYMOUS_ACCOUNT:null,SUBTITLES_STYLE_DEFAULT:"subtitles-style-default",SUBTITLES_STYLE_CUSTOM:"subtitles-style-custom",getForCurrentAccount:function(){return this.getForAccount(i())},setForCurrentAccount:function(e){this.setFortAccount(i(),e)},getForAccount:function(e){return s[e]||{}},setFortAccount:function(e,t){s[e]=t,r.setItem("accounts",s)}}}),define("application/managers/parentalcontrol",["smart-ott/resolver","smart-ott-models/parentalpin"],function(e,t){"use strict";return{getParentalRating:function(t){return e.retrieveApi().then(function(e){return e.read("parentalcontrol/parentalmediarules",{params:{asset:t}}).then(function(e){return e.hasParentalRules()})})},validatePin:function(t){return e.retrieveApi().then(function(e){return e.read("parentalcontrol/validatepin",{data:{pin:t}})})},isPinSet:function(){return e.retrieveApi().then(function(e){return e.read("parentalpin",{data:{pin:""}})}).then(function(e){return e.getState()!==t.States.UNSET})}}}),define("application/managers/personal",["antie/runtimecontext","rofl/lib/promise","rofl/lib/utils","smart-ott/resolver","application/managers/session","application/managers/event","application/managers/event/list"],function(e,n,o,r,t,i,s){"use strict";var a=e.getDevice();return function(e){if(!e)throw new Error("Missing argument `modelPath`.");return{_items:[],_modelPath:e,_eventManager:i.getInstance(),_isUserLoggedIn:function(){return t.hasSession()&&t.isLoggedIn()},isPartOf:function(e){return this.arePartOf([e])},arePartOf:function(s){return this.getItems().then(function(e){var t,i,n,r=o.map(e,function(e){return e.getId()});for(t=0,n=s.length;t<n;t++)if(i=s[t],!o.contains(r,i))return!1;return!0})},setItems:function(e){this._items=e},getItems:function(){var t;return this._isUserLoggedIn()?o.isEmpty(this._items)?(t=this,r.retrieveApi().then(function(e){return e.read(t._modelPath).then(function(e){return t.setItems(e.getItems()),t._items})})):n.resolve(this._items):n.reject(new Error("You must be logged in"))},addItem:function(t){var i=this;return r.retrieveApi().then(function(e){return e.create(i._modelPath,{params:{item:t},data:{item:t}}).then(function(e){i._items.push(e),"account/favourites"===i._modelPath&&i._eventManager.publish(s.PERSONAL.FAVOURITES_ADD,{item:t})}).catch(function(e){return a.getLogger().error("Failed adding item.",e),n.reject(new Error("Unfortunately something went wrong while trying to perform this action."))})})},removeItem:function(t){var i=this;return r.retrieveApi().then(function(e){return e.destroy(i._modelPath,{params:{item:t}}).then(function(){i._items.splice(o.map(i._items,function(e){return e.getId()}).indexOf(t.getId()),1),"account/favourites"===i._modelPath&&i._eventManager.publish(s.PERSONAL.FAVOURITES_REMOVE,{item:t})}).catch(function(e){return a.getLogger().error("Failed removing items.",e),n.reject(new Error("Unfortunately something went wrong while trying to perform this action."))})})}}}}),define("application/managers/personal/favourite",["application/managers/personal"],function(e){"use strict";return e("account/favourites")}),define("application/managers/personal/watchlist",["application/managers/personal"],function(e){"use strict";return e("account/watchlist")}),define("application/managers/player",["rofl/devices/mediaplayer/mediaplayer","rofl/timelinemanager","rofl/timelinemanager/timelineevents","application/managers/ads","antie/runtimecontext","rofl/lib/utils","rofl/lib/promise","smart-ott-models/assets/broadcast","application/managers/event","application/managers/event/list","rofl/lib/l10n"],function(n,r,t,s,o,a,l,c,e,u,d){"use strict";var h,g=null,p=null,f=e.getInstance(),_=null,m=null,v=null,i=o.getDevice(),C=i.getMediaPlayer(),A=null,E=null,I=i.getBrand(),y="lg"===I||"saorview"===I,b=o.getCurrentApplication().getConfiguration().ads||{},S=b.preferredFormat||MediaSource.MIME_TYPES.mp4,T=b.lowerBitrate;return{_activePlayer:null,prepare:function(t,i,e){var n=[];if((E=null)!==p)throw Error("Only one timeline manager can be active at a time");if(null!==_)throw Error("Only one player can be active at a time");_=o.getCurrentApplication().getComponent("main").getContent(),g=t,A=i,m=e,s.getAds(t).then(function(e){e&&0<e.length?n.push(e):a.isObject(e)&&!a.isArray(e)&&n.push([e])}).then(a.bind(function(){var e;(p=new r([],n,100)).setLowerBitrate(T),p.setPreferredFormat(S),this._setListeners(),e=p.getTimeline(),f.publish(u.PLAYLIST.START,{hasPreRolls:e.hasPreRolls(),hasPostRolls:e.hasPostRolls(),midrolls:e.getMidRollCount(),asset:t,ads:n,content:i,isLive:g instanceof c,segments:e.getSegmentCount()}),e.hasPreRolls()?p.startPreRolls():this._handleAssetPlayback(i)},this)).catch(a.bind(function(){this._handleAssetPlayback(i)},this))},destroy:function(){p&&p.destroy(),_&&_.getIsPlayingAds&&_.setIsPlayingAds(!1),this._unsetListeners(),p=_=g=null,clearTimeout(v),A=m=v=null},_setListeners:function(){var e;p&&(this._onAdBreakReadyBound=a.bind(this._onAdBreakReady,this),this._onAdBreakStartBound=a.bind(this._onAdBreakStart,this),this._onAdBreakEndBound=a.bind(this._onAdBreakEnd,this),this._onAdStartBound=a.bind(this._onAdStart,this),this._onAdEndBound=a.bind(this._onAdEnd,this),this._onTimelineResumeBound=a.bind(this._onTimelineResume,this),e=r.MANAGER_EVENTS,p.subscribe(e.ON_AD_BREAK_READY,this._onAdBreakReadyBound),p.subscribe(e.ON_AD_BREAK_START,this._onAdBreakStartBound),p.subscribe(e.ON_AD_BREAK_END,this._onAdBreakEndBound),p.subscribe(e.ON_AD_START,this._onAdStartBound),p.subscribe(e.ON_AD_END,this._onAdEndBound),p.subscribe(e.ON_RESUME,this._onTimelineResumeBound))},_unsetListeners:function(){var e;p&&(e=r.MANAGER_EVENTS,p.unsubscribe(e.ON_AD_BREAK_READY,this._onAdBreakReadyBound),p.unsubscribe(e.ON_AD_BREAK_START,this._onAdBreakStartBound),p.unsubscribe(e.ON_AD_BREAK_END,this._onAdBreakEndBound),p.unsubscribe(e.ON_AD_START,this._onAdStartBound),p.unsubscribe(e.ON_AD_END,this._onAdEndBound),p.unsubscribe(e.ON_RESUME,this._onTimelineResumeBound),this._onAdBreakReadyBound=null,this._onAdBreakStartBound=null,this._onAdBreakEndBound=null,this._onAdStartBound=null,this._onAdEndBound=null,this._onTimelineResumeBound=null)},_onAdBreakReady:function(e){var t=e.adBreak;p&&p.startAdBreak(t),E=t},_onAdBreakStart:function(e){if(null===_)throw Error("Error when starting ad-break, no Player component is active");_.setIsPlayingAds(!0),f.publish(u.ADVERTISEMENT.AD_BREAK_START,{adBreak:E,adCount:e.adCount,adIndex:e.adIndex})},_onAdBreakEnd:function(e){if(null===_)throw Error("Error when ending ad-break, no Player component is active");_.setIsPlayingAds(!1),f.publish(u.ADVERTISEMENT.AD_BREAK_END,{adBreak:e.adBreak,adCount:e.adCount,adIndex:e.adIndex}),E=null},_onAdStart:function(e){var t=e.adIndex,i=e.adCount;h||(h=d.getInstance()),_.setAdBreakBarText(h.get("player.ad.bar-text",{ad_number:t+1,ad_total:i})),f.publish(u.ADVERTISEMENT.AD_START,{adCount:i,adIndex:t,ad:e.ad,linear:e.linear,source:e.source})},_onAdEnd:function(e){f.publish(u.ADVERTISEMENT.AD_END,{adCount:e.adCount,adIndex:e.adIndex,ad:e.ad})},_onTimelineResume:function(e){var t=e.mediaSource||y&&A,i=e.seekTime;if(y||e.mediaSource||!a.isUndefined(i)&&null!==i){if(!a.isUndefined(i)&&null!==i&&C.getState()!==n.STATE.STOPPED)return f.publish(u.INPUT.SEEK,{seekTime:i}),void(C.getState()===n.STATE.EMPTY?this.restartCurrentPlayback(i):C.playFrom(i));m=i||a.getNested(e,"playerStatus","currentTime")||m||0,this._handleAssetPlayback(t)}else this._handleAssetPlayback(A)},_handleAssetPlayback:function(e,t){var i=null;return e&&(C.reset(),y||C.setMediaSource(e)),(!e||e&&t?l.resolve():e.prepare()).then(function(){y&&C.setMediaSource(e),g instanceof c?(i=e.getStreamOffset&&e.getStreamOffset(),a.isFunction(g.getChannel)&&g.getChannel().isVirtual()?i?C.beginPlaybackFrom(i):C.beginPlayback():C.beginLivePlayback()):m?"saorview"===I?C.beginPlaybackFrom(m):(C.beginPlayback(),v=setTimeout(function(){_.setInitialVideoPosition(m),f.publish(u.INPUT.SEEK,{seekTime:m}),C.playFrom(m),m=null},0)):C.beginPlayback()})},onSeek:function(e){p?p.onUserEvent(t.USER_EVENTS.RESUME,{seekTime:e}):o.getDevice().getLogger().error("Player manager hasn't been prepared (yet)!")},restartCurrentPlayback:function(e){return A?(m=e,this._handleAssetPlayback(A)):l.reject()}}}),define("application/managers/session",["antie/class","antie/runtimecontext","antie/storageprovider","rofl/lib/promise","smart-ott/resolver","application/events/sessionstatuschangedevent","smart-ott/config","rofl/lib/utils","application/managers/event","application/managers/event/list","application/managers/showlogin"],function(e,t,i,n,r,s,o,a,l,c,u){"use strict";var d="session-vars",h=null,g=null,p=null,f=null,_=function(){return null===h&&(h=t.getCurrentApplication()),h},m=function(){return null===p&&(p=t.getDevice().getStorage(i.STORAGE_TYPE_LOCAL,"smart-ott-session")),p};return{_readSessionStorage:function(){return m().getItem(d)},_writeSessionStorage:function(e){m().setItem(d,e)},_clearSessionStorage:function(){m().removeItem(d)},_createEvent:function(){return new s(this.hasSession()&&this.isLoggedIn(),this.getSession())},hasStoredSession:function(){return!!this._readSessionStorage()},checkStoredSession:function(){var t=this,i=this._readSessionStorage(),e=n.resolve();return i&&i.isAnonymous&&(this._clearSessionStorage(),i=null),i||(e=n.reject()),e.then(function(){return r.retrieveModel("session")}).then(function(e){return g=new e(i),a.isFunction(g.refreshSession)?g.refreshSession(i).then(function(e){return t.setSession(e,{action:"refresh"}),g.retrieveIdentity()}):g.retrieveIdentity()}).catch(a.bind(this.clearSession,this)).then(function(){return _().broadcastEvent(t._createEvent()),t})},hasSession:function(){return null!==g&&!g.getSessionVars().isAnonymous},isLoggedIn:function(e){var t=o.getFeature("accounts").profile_after_login||"",i=!(!g||this.isAnonymous())&&g.getIdentity(),n=!(!i||!i.isMainAccount());return e=e||{},t===o.LoginConfig.mandatory&&!e.loginOnly?!n&&!!i:!!i},getSession:function(){return g},setSession:function(e,t){var i=this._readSessionStorage(),n=l.getInstance(),r=null;if(t=t||{},e&&!e.getSessionVars().isAnonymous&&u.clear(),e){if(i!==e.getSessionVars()){switch(this._writeSessionStorage(e.getSessionVars()),g=e,_().broadcastEvent(this._createEvent()),t.action){case"login":r=c.SESSION.AUTHENTICATED;break;case"refresh":r=c.SESSION.REFRESHED}r&&n.publish(r,t)}}else this.clearSession()},_clearLocalSession:function(){var e=l.getInstance();this._clearSessionStorage(),g=null,_().broadcastEvent(this._createEvent()),e.publish(c.SESSION.TERMINATED),_().updateMenu()},clearSession:function(){var e=a.getNested(g,"terminateSession");return e&&a.isFunction(e)?e.call(g).catch(function(){}).then(a.bind(this._clearLocalSession,this)):(this._clearLocalSession(),n.resolve())},getBookmarkStorage:function(){return null===f&&(f=t.getDevice().getStorage(i.STORAGE_TYPE_LOCAL,"smart-ott-bookmark")),f},switchHouseholdAccount:function(e){return this.hasSession()?this.getSession().switchHouseholdAccount(e):n.reject("No session")},regularLogin:function(e){return g.regularLogin(e)},isAnonymous:function(){return!!this.getSession()&&this.getSession().getSessionVars().isAnonymous},anonymousLogin:function(){var t=this;return r.retrieveModel("session").then(function(e){return(g=new e).doLogin().then(function(e){return t.setSession(e,{action:"refresh"}),n.resolve({goBrowse:!0})})}).catch(function(){return r.retrieveModel("session").then(function(e){return(g=new e({isAnonymous:!0})).anonymousLogin().then(function(e){t.setSession(e,{action:"login",type:"anonymous"})})})})}}}),define("application/managers/showlogin",["antie/runtimecontext","antie/storageprovider"],function(e,t){"use strict";var i="login-times",n=null,r=function(){return null===n&&(n=e.getDevice().getStorage(t.STORAGE_TYPE_LOCAL,"smart-ott-showlogin")),n};return{_writeLoginTimesToLocalStorage:function(e){r().setItem(i,e)},_getLoginTimesLocalStorage:function(){return r().getItem(i)},clear:function(){r().removeItem(i)},showConnectComponent:function(){var e=this._getLoginTimesLocalStorage()||0;return e<=3&&this._writeLoginTimesToLocalStorage(++e),e<=3}}}),define("application/managers/subtitles",["rofl/class","rofl/lib/utils","rofl/lib/promise","rofl/application","application/formatters/subtitles","rofl/media/subtitles/player","application/managers/localpreferences","application/widgets/vttsubtitleplayer"],function(e,n,o,t,i,r,s,a){"use strict";var l,c=t.getCurrentApplication(),u=null,d=null,h=null,g=[],p={},f=c.getDevice();return p.srt=p.xml=p.dfxp=new r,p.vtt=p.m3u8=new a,l=e.extend({getSources:function(){return g},setSources:function(e){n.isArray(e)||(e=[e]),g=e},addSources:function(e){n.isArray(e)||(e=[e]),g=g.concat(e)},getActiveSource:function(){return h},loadAll:function(){var t=[],i=this;return n.each(g,function(e){t.push(i.loadSource(e))},this),o.all(t)},loadSource:function(t){return t.isLoading(!0),this._getSubtitlePromise(t,i.getParser(t)).then(function(e){t.setParsedContent(e),t.isLoading(!1)},function(){t.isLoading(!1)})},clear:function(){h=null,g=[],this._possiblyDeactivatePlayer()},_possiblyActivatePlayer:function(e){var t;e&&(d=p[e.getFormat()||"srt"],t=s.getForCurrentAccount(),d.setSubtitleStyleClassname(t.subtitlesStyle),d.setSubtitle(e.getParsedContent()),d.play())},_possiblyDeactivatePlayer:function(){d&&(d.setSubtitle(!1),d.stop(),d=null)},updateSource:function(e){return this._possiblyDeactivatePlayer(),n.isUndefined(e)&&(e=h),null===(h=e)||!e.getURL()||e.getParsedContent().length?(this._possiblyActivatePlayer(e),o.resolve()):e.isLoading()?void 0:this.loadSource(e).then(n.bind(function(){this._possiblyActivatePlayer(e)},this))},onTimeUpdate:function(e){h&&d&&d.onTimeUpdate(e)},_getSubtitlePromise:function(r,s){return new o(function(i,n){var t;t=function(e){var t;try{(t=s.parse(e,r.getURL()))instanceof o?t.then(i).catch(n):i(t)}catch(e){n(e)}},r.getRawContent()?t(r.getRawContent()):f.loadURL(r.getURL(),{method:"GET",responseType:s.responseType||"html",onLoad:function(e){t(e)},onError:function(e){n(e)}})})},onAdBreakStart:function(){this._possiblyDeactivatePlayer()},onAdBreakEnd:function(){this._possiblyActivatePlayer(h)}}),{getInstance:function(){return u||(u=new l),u}}}),define("application/modals/epg",["application/modals/modal","antie/runtimecontext","rofl/lib/utils","smart-ott/resolver","application/widgets/epgmenu","antie/events/keyevent","rofl/lib/promise","antie/widgets/horizontallist","application/widgets/guidecarousel","application/managers/channel"],function(e,t,l,i,n,r,s,o,a,c){"use strict";return e.extend({init:function(){this._hlist=new o("epg-hlist"),this._super(),this.addClass("epg-modal"),this._menu=new n("epg-menu"),this._createCarouselBound=l.bind(this._createCarousel,this),this._onFocusBound=l.bind(this._onFocus,this),this._onKeyDownBound=l.bind(this._onKeyDown,this),this.addEventListener("beforerender",l.bind(this._onBeforeRender,this)),this.addEventListener("beforehide",l.bind(this._onBeforeHide,this))},_onBeforeRender:function(e){var t=e.args;this._hlist.removeChildWidgets(),this._menu.removeAll(),this.appendChildWidget(this._hlist),this._buildEpgView(t),this.addEventListener("keydown",this._onKeyDownBound),this._menu.addEventListener("focus",this._onFocusBound),this._menu.addEventListener("epgmenu",this._createCarouselBound)},_onBeforeHide:function(){this.removeEventListener("keydown",this._onKeyDownBound),this._menu.removeEventListener("focus",this._onFocusBound),this._menu.removeEventListener("epgmenu",this._createCarouselBound)},_buildEpgView:function(e){var s=this,o=this._menu,a=e.type||e;return o.addClass(a),i.retrieveEPGManager().then(function(e){var t=c.getAllChannels(),i=e,r=l.map(t,function(e){return e.getId()});return i.getCurrentItem(r).then(function(i){var n=[];l.each(r,function(e){var t=i[e];t&&(t.type=a,n.push(t))}),o.setData(n),s._hlist.appendChildWidget(o),s.setActiveChildIndex(0),s.focus()})})},_onKeyDown:function(e){var t=this._carousel;switch(e.keyCode){case r.VK_BACK:case r.VK_LEFT:this.parentWidget.back(),e.stopPropagation();break;case r.VK_RIGHT:t||e.stopPropagation()}},_createCarousel:function(e){var t,i=e.items||[],n=e.channelId||null;this._destroyCarousel(),(t=this._carousel=new a("guide-carousel")).setData(i,n),this._hlist.appendChildWidget(t),t.outputElement||t.render(),t.hideScrollArrows(),t.getActiveChildWidget().focus()},_onFocus:function(e){"epg-menu"===e.target.id&&(this._destroyCarousel(),e.stopPropagation())},_destroyCarousel:function(){var e=this._carousel;e&&(e.removeChildWidgets(),e.removeAll(),e.parentWidget&&e.parentWidget.removeChildWidget(e),this._carousel=null)}})}),define("application/modals/medialanguagemenu",["application/modals/modal","antie/widgets/button","antie/widgets/label","antie/events/keyevent","rofl/models/audiotrack","rofl/lib/utils","rofl/lib/l10n","antie/widgets/horizontallist","rofl/widgets/container","rofl/widgets/carousel","rofl/widgets/carousel/aligners/natural","antie/widgets/carousel/keyhandlers/alignfirsthandler","antie/runtimecontext","application/widgets/tickbutton"],function(e,d,h,t,s,g,i,p,f,_,m,v,n,o){"use strict";var r=i.getInstance(),a=n.getCurrentApplication(),l=a.getConfiguration().defaultAudio,c=a.getConfiguration().audioLabels;return e.extend({init:function(){this._super("medialanguagemenu"),this._buildView(),this._media=null,this._activeSource=null,this._activeTrack=null,this._activeSubtitle=null,this._multiAudioInSources=null,this.addEventListener("beforerender",g.bind(this._onBeforeRender,this)),this.addEventListener("beforeshow",g.bind(this._onBeforeShow,this)),this.addEventListener("keydown",g.bind(this._onKeyDown,this)),this.addEventListener("select",g.bind(this._onSelectHandler,this))},_buildView:function(){var e,t,i=new p,n=this._confirmButton=new d("confirm"),r=this._buttonLabel=new h("",["text"]),s=new f,o=new f,a=this._audioLabel=new h,l=this._audioCarousel=new _,c=this._subtitleLabel=new h,u=this._subtitleCarousel=new _;s.addClass(["columnContainer","audioColumn"]),o.addClass(["columnContainer","subtitlesColumn"]),e=new m(l.getMask()),t=new v,e.setNumberOfItemsVisibleOnScreen(7),t.attach(l),l.setAligner(e),l.setAlignPoint(0),t.setAnimationOptions({duration:250,easing:"easeInOut",skipAnim:!1,fps:60}),e=new m(u.getMask()),t=new v,e.setNumberOfItemsVisibleOnScreen(7),t.attach(u),u.setAligner(e),u.setAlignPoint(0),t.setAnimationOptions({duration:250,easing:"easeInOut",skipAnim:!1,fps:60}),s.appendChildWidget(a).addClass("columnHeader"),s.appendChildWidget(l),o.appendChildWidget(c).addClass("columnHeader"),o.appendChildWidget(u),i.appendChildWidget(s),i.appendChildWidget(o),n.appendChildWidget(r),n.addEventListener("select",g.bind(this._onConfirmButton,this)),i.appendChildWidget(n),this.appendChildWidget(i)},_onBeforeRender:function(e){var t,i,n=this._media=e.args.media;this._origSource=e.args.activeSource,this._origSubtitle=e.args.activeSubtitle,this._origTrack=e.args.activeTrack,this._multiAudioInSources=e.args.multiAudioInSources,this._tracks=e.args.tracks,this._confirmHandler=e.args.confirmHandler,this._audioLabel.setText(r.get("player.language-menu.audio")),this._subtitleLabel.setText(r.get("player.language-menu.subtitles")),t=n.getSources(),this._updateCarousel(this._audioCarousel,this._multiAudioInSources?t:this._tracks),this._activeSource=this._origSource,this._activeTrack=this._origTrack,(i=n.getSubtitles()).unshift(n.getEmptySubtitle()),this._updateCarousel(this._subtitleCarousel,i),this._activeSubtitle=this._origSubtitle,this._buttonLabel.setText(r.get("player.language-menu.confirm")),this._updateTicks()},_onBeforeShow:function(){this._confirmButton.focus()},_onKeyDown:function(e){e.stopPropagation(),e.keyCode===t.VK_BACK&&this.hide()},_onConfirmButton:function(e){var t={};this.hide(),this._activeSource!==this._origSource&&(t.source=this._activeSource),this._activeTrack!==this._origTrack&&(t.track=this._activeTrack),this._activeSubtitle!==this._origSubtitle&&(t.subtitle=this._activeSubtitle),this._confirmHandler&&this._confirmHandler(t),e.stopPropagation()},_onSelectHandler:function(e){var t=e.target,i=t.getDataItem();-1!==this._audioCarousel.getIndexOfChildWidget(t)&&(i instanceof s?this._activeTrack=i:this._activeSource=i),-1!==this._subtitleCarousel.getIndexOfChildWidget(t)&&(this._activeSubtitle=i),this._updateTicks()},_updateTicks:function(){var i=this;g.each(this._audioCarousel.getChildWidgets(),function(e){var t=!1;t=i._multiAudioInSources?e.getDataItem()===i._activeSource:e.getDataItem().getId()===i._activeTrack.getId(),e.showTick(t)}),g.each(this._subtitleCarousel.getChildWidgets(),function(e){e.showTick(e.getDataItem()===i._activeSubtitle)})},_updateCarousel:function(r,e){r.removeChildWidgets(),g.each(e,function(e){var t=e instanceof s,i=new o,n=(t?e.getLanguage():e.getLanguage().title)||l;c&&c[n]&&(n=c[n]),i.setLabel(n),i.setDataItem(e),r.appendChildWidget(i)}),r.outputElement&&r.alignToIndex(0,{skipAnim:!0})}})}),define("application/modals/modal",["rofl/widgets/component"],function(e){"use strict";return e.extend({init:function(e){this._super(e||"modal-component"),this.setIsModal(!0)}})}),define("application/modals/moreinfo",["application/modals/modal","antie/widgets/button","antie/widgets/horizontallist","antie/widgets/label","antie/events/keyevent","application/widgets/detail/info","rofl/lib/utils","rofl/lib/l10n"],function(e,r,s,o,t,a,l,i){"use strict";var n=o.TRUNCATION_MODE_RIGHT_ELLIPSIS;return e.extend({_backButton:null,_buttonLabel:"",_info:null,init:function(){this._super("moreinfo"),this._buildView(),this.addEventListener("beforerender",l.bind(this.onBeforeRender,this)),this.addEventListener("beforeshow",l.bind(this.onBeforeShow,this)),this.addEventListener("keydown",l.bind(this.onKeyDown,this))},_buildView:function(){var e=new s,t=this._backButton=new r("back"),i=this._buttonLabel=new o,n=this._info=new a({id:"info",showImage:!1,scrollable:!0});i.setTruncationMode(o.TRUNCATION_MODE_RIGHT_ELLIPSIS),i.setWidth(220),i.setMaximumLines(1),t.appendChildWidget(i),t.addEventListener("select",l.bind(this.onBackButton,this)),e.appendChildWidget(t),e.appendChildWidget(n),this.appendChildWidget(e)},onBeforeRender:function(e){this.setButtonText(i.getInstance().get("detail.more.back")),this._info.setData({asset:e.args.asset,truncation:{alignment:n,maximumLines:24,width:630}})},onBeforeShow:function(){this._backButton.focus()},onKeyDown:function(e){e.stopPropagation(),e.keyCode===t.VK_BACK&&this.hide()},onBackButton:function(){this.hide()},setButtonText:function(e){this._buttonLabel.setText(e||"")}})}),define("application/modals/networkerror",["antie/application","application/modals/modal","rofl/widgets/button","rofl/widgets/label","rofl/widgets/container","rofl/events/keyevent","rofl/lib/utils","rofl/lib/l10n"],function(e,t,r,s,i,n,o,a){"use strict";var l=e.getCurrentApplication(),c=a.getInstance();return t.extend({init:function(){this._super("error"),this._buildView(),this.addEventListener("beforerender",o.bind(this.onBeforeRender,this)),this.addEventListener("beforeshow",o.bind(this.onBeforeShow,this)),this.addEventListener("keydown",o.bind(this.onKeyDown,this)),this.onExitButtonBound=o.bind(this._onExitButton,this)},_buildView:function(){var e=this._image=new s("image","",["image","icon","network-off"]),t=this._message=new s("message",c.get("network.offline")),i=this._exitButton=new r("exit"),n=this._buttonLabel=new s("exitLabel",c.get("exit.title"),[]);t.addClass("message"),i.appendChildWidget(n),this.appendChildWidget(e),this.appendChildWidget(t),this.appendChildWidget(i)},onBeforeRender:function(){this._exitButton.addEventListener("select",this.onExitButtonBound)},onBeforeShow:function(){this._exitButton.focus()},onBeforeHide:function(){this._exitButton.removeEventListener("select",this.onExitButtonBound),this.parentWidget.removeChildWidget(this)},onKeyDown:function(e){e.stopPropagation(),e.keyCode===n.VK_BACK&&this._onExitButton()},_onExitButton:function(){l.getDevice().exit()}})}),define("application/modals/passworddialog",["application/modals/modal","antie/runtimecontext","rofl/lib/utils","antie/events/keyevent","smart-ott/resolver","application/managers/session","application/views/profilepin","rofl/lib/l10n","smart-ott-models/parentalpin","rofl/widgets/label"],function(e,t,i,n,r,s,o,a,l,c){"use strict";var u=t.getCurrentApplication(),d=t.getDevice(),h=new o("profilePinModal"),g=a.getInstance(),p=null;return e.extend({init:function(){this._super(),this.appendChildWidget(h),this._onBeforeRenderBound=i.bind(this._onBeforeRender,this),this._onBeforeShowBound=i.bind(this._onBeforeShow,this),this._onAfterHideBound=i.bind(this._onAfterHide,this),this._onKeyDownBound=i.bind(this._onKeyDown,this),this._onFormSubmitBound=i.bind(this._onFormSubmit,this),this.addEventListener("beforerender",this._onBeforeRenderBound),this.addEventListener("beforeshow",this._onBeforeShowBound),this.addEventListener("afterhide",this._onAfterHideBound),this.addEventListener("keydown",this._onKeyDownBound)},_onBeforeRender:function(e){var t,i,n=this;this._onPinValidated=e.args.onPinValidated,h.getMessage().setText(g.get("parental.enter_pin_to_watch",{label:e.args.assetLabel})),(t=h.getProfileButton()).setOuterLabel("&nbsp;"),t.setDisabled(),s.getSession().retrieveIdentity().then(function(e){n._profile=e,i=new c("",n._profile.getInitials(),["initials"]),t.setInnerWidget(i),t.setOuterLabel(n._profile.getFirstName()),t.setDisabled(!1)})},_onKeyDown:function(e){switch(e.keyCode){case n.VK_BACK:this.hide()}e.stopPropagation()},_onBeforeShow:function(){h.getPin().addEventListener("keydown",this._onInputKeyDown),h.getKeyboard().addEventListener("keydown",this._onKeyboardKeyDown),h.getProfileButton().addEventListener("select",this._onFormSubmitBound),h.getHeader().show(),h.resetToInitialState(),h.getPin().focus()},_onAfterHide:function(){var e=h.getPin();h.getHeader().hide(),h.getKeyboard().removeEventListener("keydown",this._onKeyboardKeyDown),h.getProfileButton().removeEventListener("select",this._onFormSubmitBound),e.removeEventListener("keydown",this._onInputKeyDown),e.setValue("")},_onInputKeyDown:function(e){var t,i;e.keyCode===n.VK_ENTER&&(t=u.getFocussedWidget(),i=h.getKeyboard(),t.setKeyboard(i),i.setText(t.getValue()),d.showElement({el:i.outputElement,duration:250,onComplete:function(){p=t,i.focus()}}))},_onKeyboardKeyDown:function(e){var t;e.keyCode===n.VK_BACK&&p&&(e.stopPropagation(),t=h.getKeyboard(),d.hideElement({el:t.outputElement,duration:250,onComplete:function(){p.unsetKeyboard(t),t.setText(""),p.focus(),p=null}}))},_onFormSubmit:function(){var i=this;i._profile&&r.retrieveApi().then(function(e){return e.read("parentalpin",{data:{userID:i._profile.getId(),pin:h.getPin().getValue()}})}).then(function(e){var t=e.getState();h.getPin().setValue(""),t===l.States.ERROR?h.setErrorMessage(g.get("account.error")):t===l.States.INCORRECT?h.setErrorMessage(g.get("account.incorrect_pin")):t!==l.States.UNSET&&t!==l.States.OK||(h.setErrorMessage(""),i.hide(),i._onPinValidated())})}})}),define("application/modals/pindialog",["application/modals/modal","antie/runtimecontext","rofl/lib/utils","antie/events/keyevent","application/managers/session","application/views/parentalpin","application/managers/parentalcontrol","rofl/lib/l10n","rofl/widgets/label"],function(e,t,n,r,s,i,o,a,l){"use strict";var c=t.getDevice(),u=a.getInstance();return e.extend({init:function(){this._super(),this._view=new i("parentalPinModal"),this.appendChildWidget(this._view),this._onBeforeRenderBound=n.bind(this._onBeforeRender,this),this._onBeforeShowBound=n.bind(this._onBeforeShow,this),this._onBeforeHideBound=n.bind(this._onBeforeHide,this),this._onKeyDownBound=n.bind(this._onKeyDown,this),this._onKeySelectedBound=n.bind(this._onKeySelected,this),this.addEventListener("beforerender",this._onBeforeRenderBound),this.addEventListener("beforeshow",this._onBeforeShowBound),this.addEventListener("beforehide",this._onBeforeHideBound)},_onBeforeRender:function(e){var t,i,n=this,r=e.args;this._onPinValidated=r.onPinValidated,this._onCancelled=r.onCancelled,this._view.addEventListener("keydown",this._onKeyDownBound),this._view.getKeyboard().addEventListener("select",this._onKeySelectedBound),this._view.getMessage().setText(u.get("parental.enter_pin_to_watch",{label:r.assetLabel})),(t=this._view.getProfileButton()).setOuterLabel("&nbsp;"),t.setDisabled(!0),s.getSession().retrieveIdentity().then(function(e){n._profile=e,i=new l("",n._profile.getInitials(),["initials"]),t.setInnerWidget(i),t.setOuterLabel(n._profile.getFirstName())})},_onBeforeShow:function(){var e=this._view,t=e.getKeyboard();e.getHeader().show(),e.resetToInitialState(),c.showElement({el:e.getKeyboard().outputElement,duration:250,onComplete:function(){e.getPin(),t.focus()}}),e.focus()},_onBeforeHide:function(){var e=this._view;e.getHeader().hide(),e.removeEventListener("keydown",this._onKeyDownBound),e.getKeyboard().removeEventListener("select",this._onKeySelectedBound)},_onKeyDown:function(e){var t=this._view.getPin(),i=t.getPinCode().length;switch(event.stopPropagation(),e.keyCode){case r.VK_BACK:i?t.cleanSlot():this.parentWidget.back(),this._onCancelled&&this._onCancelled();break;case r.VK_0:case r.VK_1:case r.VK_2:case r.VK_3:case r.VK_4:case r.VK_5:case r.VK_6:case r.VK_7:case r.VK_8:case r.VK_9:i<t.getMaxLength()&&t.fillSlot(e.keyChar)}},_onKeySelected:function(e){var t=this._view,i=e.target.getDataItem(),n=t.getPin(),r=n.getPinCode().length;i&&("DEL"===i?0<r&&n.cleanSlot():r<n.getMaxLength()&&(r=n.fillSlot(i))===n.getMaxLength()&&this._pinValidation())},_pinValidation:function(){var t=this,i=this._view;o.validatePin(i.getPin().getPinCode()).then(function(e){i.getPin().cleanInput(),e.isPinValid()&&n.isFunction(t._onPinValidated)?(t.hide(),t._onPinValidated()):i.setErrorMessage(e.getMessage())}).catch(function(){i.getPin().cleanInput(),i.setErrorMessage(u.get("parental.errors.unknown"))})}})}),define("application/utils/routing",["antie/runtimecontext","smart-ott-models/assets/movie","smart-ott-models/assets/serie","smart-ott-models/assets/episode","smart-ott-models/assets/broadcast","rofl/lib/utils","smart-ott-models/assets/genre","application/managers/action","application/managers/session"],function(e,r,s,o,a,l,c,u,d){"use strict";var h=e.getCurrentApplication();return{routeToAsset:function(e){var t,i,n=0;e instanceof r||e instanceof o||e instanceof s?(d.isLoggedIn()&&e.getPosition&&0<e.getPosition()&&(n=e.getPosition()/e.getDurationSeconds()),h.route("detail",{mediaID:e.getId(),mediaType:e.getMediaType(),visionFactor:n})):e instanceof a?(t=l.now())>e.getStartDate().getTime()&&t<e.getEndDate().getTime()?u.execute("play",{asset:e}):h.route("detail",{asset:e,mediaID:e.getId(),mediaType:e.getMediaType()}):e instanceof c?((i=l.isFunction(e.getRoutingParams)?e.getRoutingParams():{genreID:e._id}).source=e,h.route("browse",i)):e&&e.deeplinkingID&&h.route("detail",{deeplinkingID:e.deeplinkingID})}}}),define("application/views/account",["antie/widgets/container","antie/widgets/horizontallist","antie/widgets/verticallist","rofl/widgets/button","rofl/widgets/label","application/widgets/header","rofl/lib/l10n","rofl/lib/utils","smart-ott/config"],function(T,e,w,P,D,k,t,O,R){"use strict";var L=t.getInstance();return T.extend({_elements:{},init:function(e){var t,i,n,r,s,o,a,l,c,u,d,h,g,p,f,_,m=new T,v=new D("titleLabel",L.get("account.title")),C=new D,A=new D("subtitleLabel",L.get("account.subtitle"),["subtitle"]),E=new D("emailLabel","",["email"]),I=new w,y=new w,b=new k,S=new P("logoutBtn");this._features=I,p=R.getFeatures(),this._super(e),m.addClass("title"),m.appendChildWidget(v),m.appendChildWidget(C),y.addClass("button-list"),I.addClass("feature-list"),t=new P("profilesBtn"),(l=new T).addClass(["icon","circle"]),t.addClass(["button","button-block","button-primary"]),t.appendChildWidget(l),t.appendChildWidget(new D(L.get("account.select_profile_button"))),(_=new T).addClass(["icon","logout"]),S.addClass(["button","button-block","button-primary"]),S.appendChildWidget(_),S.appendChildWidget(new D(L.get("account.log_out"))),O.hasNested(p,"friends","enabled")&&p.friends.enabled&&(i=new P("friendsBtn"),(f=new T).addClass(["icon","share"]),i.addClass(["button","button-block","button-primary"]),i.appendChildWidget(f),i.appendChildWidget(new D(L.get("account.friends")))),O.hasNested(p,"favourites","enabled")&&p.favourites.enabled&&(n=new P("favoritesBtn"),(d=new T).addClass(["icon","star"]),n.addClass(["button","button-block","button-primary"]),n.appendChildWidget(d),n.appendChildWidget(new D(L.get("account.favorites")))),O.hasNested(p,"history","enabled")&&p.history.enabled&&(o=new P("historyBtn"),(u=new T).addClass(["icon","play-button"]),o.addClass(["button","button-block","button-primary"]),o.appendChildWidget(u),o.appendChildWidget(new D(L.get("account.history")))),a=new P("purchaseBtn"),(c=new T).addClass(["icon","watchlist"]),a.addClass(["button","button-block","button-primary"]),a.appendChildWidget(c),a.appendChildWidget(new D(L.get("account.purchaseHistory"))),O.hasNested(p,"watchlist","enabled")&&p.watchlist.enabled&&(r=new P("watchlistBtn"),(h=new T).addClass(["icon","watchlist"]),r.addClass(["button","button-block","button-primary"]),r.appendChildWidget(h),r.appendChildWidget(new D(L.get("account.watchlist")))),O.hasNested(p,"subtitlesStyle","enabled")&&p.subtitlesStyle.enabled&&(s=new P("subtitlesBtn"),(g=new T).addClass(["icon","subtitles-style"]),s.addClass(["button","button-block","button-primary"]),s.appendChildWidget(g),s.appendChildWidget(new D(L.get("account.subtitlesStyle")))),o&&I.appendChildWidget(o),i&&I.appendChildWidget(i),n&&I.appendChildWidget(n),r&&I.appendChildWidget(r),s&&I.appendChildWidget(s),y.appendChildWidget(I),y.appendChildWidget(S),this.appendChildWidget(b),this.appendChildWidget(m),this.appendChildWidget(A),this.appendChildWidget(E),this.appendChildWidget(y),this._elements={header:b,name:C,email:E,logout:S,profiles:t,friends:i,favorites:n,history:o,purchase:a,watchlist:r,subtitlesStyle:s}},getHeader:function(){return this._elements.header||null},getName:function(){return this._elements.name||null},getEmail:function(){return this._elements.email||null},getLogout:function(){return this._elements.logout||null},getProfilesButton:function(){return this._elements.profiles||null},getFriendsButton:function(){return this._elements.friends||null},getFavoritesButton:function(){return this._elements.favorites||null},getWatchlistButton:function(){return this._elements.watchlist||null},getSubtitlesStyleButton:function(){return this._elements.subtitlesStyle||null},getHistoryButton:function(){return this._elements.history||null},getPurchaseHistoryButton:function(){return this._elements.purchase||null},prepareFocusOfLastFeature:function(){var e=this._features.getChildWidgets();e&&0<e.length&&this._features.setActiveChildWidget(e[e.length-1])}})}),define("application/views/browse",["rofl/widgets/container","rofl/widgets/carousel","antie/widgets/carousel/binder","antie/widgets/carousel/keyhandlers/alignfirsthandler","application/formatters/browse/row","application/widgets/header","application/widgets/carousel/aligners/noalign","application/widgets/carousel/aligners/customalignpoints","antie/widgets/carousel/aligners/aligner","rofl/lib/utils","application/widgets/browse/rows/slider","application/widgets/browse/rows/header","application/widgets/browse/rows/grid","antie/runtimecontext","rofl/widgets/label","rofl/widgets/button","rofl/lib/l10n"],function(c,u,s,d,o,h,g,p,E,f,t,i,I,e,_,m,n){"use strict";var r=e.getCurrentApplication(),y=f.getNested(r.getLayout(),"components","browse","viewport")||{},v=n.getInstance();return c.extend({init:function(e){var t,i,n=new d,r=new h,s=new c,o=new c,a=new m,l=new _;i=new u((e=e||{}).carouselId),t=this._aligner=new p(i.getMask()),this._super(),this.addClass("browse"),e.isStatic?i.setAligner(new g(i.getMask())):i.setAligner(t),this._scrollAnimationOptions={duration:250,easing:"easeInOut",skipAnim:!1,fps:60},n.attach(i),n.setAnimationOptions(this._scrollAnimationOptions),e.excludeHeader||(this._header=this.appendChildWidget(r)),s.addClass(["icon","arrow-left"]),a.addClass(["button","button-block","button-primary","back-button"]),a.appendChildWidget(s),a.appendChildWidget(new _(v.get("back"))),o.addClass(["no-results","hide"]),o.appendChildWidget(l),o.appendChildWidget(a),this._noResults=o,this._carousel=i,this._noContentLabel=l,this._bckButton=a,this.appendChildWidget(this._carousel),this._carouselBeforeAlignBound=f.bind(this._carouselBeforeAlign,this),this._carouselAfterAlignBound=f.bind(this._carouselAfterAlign,this)},getHeader:function(){return this._header||null},getCarousel:function(){return this._carousel||null},getBackButton:function(){return this._bckButton||null},setBrowsePage:function(e,t){var i,n=new s(new o,e.getSections()),r=this._carousel;delete this._hasHeroElement,delete this._hasGridElement,this._noAlign=!1,this.removeChildWidget(this._noResults),this.appendChildWidget(this._carousel),this._noResults.addClass("hide"),this.removeClass("withHeroElement"),this.removeClass("withGridElement"),r.removeChildWidgets(),n.appendAllTo(r),this.getHasHeroElement()?(this.addClass("withHeroElement"),e.getSections()&&f.isArray(e.getSections())&&e.getSections().length<=1&&(r.setAligner(new g(r.getMask())),this._noAlign=!0)):e.getSections()&&f.isArray(e.getSections())&&e.getSections().length<=2&&(r.setAligner(new g(r.getMask())),this._noAlign=!0),this._noAlign||(i=new E(r.getMask()),r.setAligner(i)),this.getHasGridElement()&&this.addClass("withGridElement"),r.setAlignPoint(this.getHasHeroElement()?y.padding:0),r.setActiveChildIndex(0),t&&(r.focus(),r.getChildWidgetByIndex(0)&&r.getChildWidgetByIndex(0).focusBigItem&&r.getChildWidgetByIndex(0).focusBigItem()),r.addEventListener("beforealign",this._carouselBeforeAlignBound),r.addEventListener("afteralign",this._carouselAfterAlignBound),this._handleNavigation(0,r)},_carouselAfterAlign:function(e){var t=e.alignedIndex,i=this._carousel;e.target===i&&(this._aligning=!1,0!==t&&(1!==t||i.getChildWidgetByIndex(0).isFocusable()||i.getChildWidgetByIndex(1)instanceof I)||i.scrollToPixel(0,this._scrollAnimationOptions))},_carouselBeforeAlign:function(e){var t=e.alignedIndex,i=this._carousel;e.target===i&&(this._aligning=!0,this._handleNavigation(t,i))},verticalAlignInProgress:function(){return this._aligning},hasAligner:function(){return!this._noAlign},getHasHeroElement:function(){var e=this._carousel;return f.isUndefined(this._hasHeroElement)&&(this._hasHeroElement=0<f.filter(e.items(),function(e){return e instanceof t||e instanceof i}).length),this._hasHeroElement},getHasGridElement:function(){var e=this._carousel;return f.isUndefined(this._hasGridElement)&&(this._hasGridElement=0<f.filter(e.items(),function(e){return e instanceof I}).length),this._hasGridElement},_handleNavigation:function(e,i){var n,t=i.getActiveChildWidget(),r=i.getActiveChildWidgetIndex(),s=i.getChildWidgetByIndex(e),o=t&&t.getOffsettedIndex(),a=s&&s.getOffsettedIndex(),l=t&&t.getActiveChildWidgetIndex(),c=Math.round(l-o+a),u=s&&s.getChildWidgetCount()-1,d=0<=e-r?E.directions.FORWARD:E.directions.BACKWARD,h=i._widgetStrip,g=i.items().length-1,p=h.getLengthToIndex(g),f=h.lengthOfWidgetAtIndex(g),_=h.getLengthToIndex(e),m=p+f,v=y.height-(this.getHasHeroElement()?0:y.padding)-y.bottomSafeMargin,C=.5*v+.5*h.lengthOfWidgetAtIndex(e),A=m-(_+.5*h.lengthOfWidgetAtIndex(e));u<c&&(c=u),s instanceof I&&(n=i.getMask().getWidgetStrip().getLengthToIndex(e),s.setScrollHandler(function(e,t){i.scrollToPixel(n+e,t)})),s.setOffsettedWidgetIndex(c,d),0<e&&A<C?i.setAlignPoint(v-f-(p-_)):this._noAlign||0===e?i.setAlignPoint(0):this.getHasHeroElement()?i.setNormalisedAlignPoint(.391):i.setNormalisedAlignPoint(.22)},showError:function(e){this.appendChildWidget(this._noResults),this.removeChildWidget(this._carousel),this._noContentLabel.setText(e||""),this._bckButton.focus(),this._noResults.removeClass("hide")},addEventListeners:function(){this._carousel.addEventListener("beforealign",this._carouselBeforeAlignBound),this._carousel.addEventListener("afteralign",this._carouselAfterAlignBound)},removeEventListeners:function(){this._carousel.removeEventListener("beforealign",this._carouselBeforeAlignBound),this._carousel.removeEventListener("afteralign",this._carouselAfterAlignBound)}})}),define("application/views/friends",["rofl/widgets/container","rofl/widgets/carousel","rofl/widgets/label","application/widgets/header","rofl/widgets/carousel/aligners/natural","antie/widgets/carousel/binder","antie/widgets/carousel/keyhandlers/alignfirsthandler","application/formatters/friends/row"],function(e,n,t,r,i,o,s,a){"use strict";return e.extend({init:function(){var e=new s,t=new n,i=new r;this._super(),this.addClass("browse"),e.attach(t),e.setAnimationOptions({duration:250,easing:"easeInOut",skipAnim:!1,fps:60}),this._header=this.appendChildWidget(i),this._carousel=this.appendChildWidget(t)},getHeader:function(){return this._header||null},getCarousel:function(){return this._carousel||null},setFriendsPage:function(e,t,i){var n=new o(new a,t),r=this._carousel,s=this;r.removeChildWidgets(),n.appendAllTo(r),r.setAlignPoint(0),r.setActiveChildIndex(0),r.alignToIndex(0),i&&r.focus(),r.addEventListener("beforealign",function(e){var t=e.alignedIndex;e.target===r&&s._handleNavigation(t,r)})},_handleNavigation:function(e,t){var i=t.getActiveChildWidget(),n=t.getChildWidgetByIndex(e),r=i.getOffsettedIndex(),s=n.getOffsettedIndex(),o=i.getActiveChildWidgetIndex(),a=Math.round(o-r+s),l=n.getChildWidgetCount()-1;l<a&&(a=l),n.setOffsettedWidgetIndex(a),2<t.items().length&&(e>t.items().length-2?t.setAlignPoint(280*(e-(t.items().length-2))):t.setAlignPoint(0))},getOffsettedIndex:function(){var e=parseInt(this._carousel.getMask().getWidgetStrip().outputElement.style.left,10)||0;return Math.abs(e/265)},setOffsettedWidgetIndex:function(e){var t=this._carousel;t.setActiveIndex(e),t._aligner._lastAlignIndex=e},getActiveChildWidgetIndex:function(){return this._carousel.getActiveChildWidgetIndex()},getChildWidgetCount:function(){return this._carousel.getChildWidgetCount()}})}),define("application/views/history",["rofl/widgets/container","rofl/widgets/label","rofl/widgets/button","rofl/widgets/carousel","antie/widgets/carousel/binder","antie/widgets/carousel/keyhandlers/alignfirsthandler","rofl/widgets/carousel/aligners/natural","application/formatters/browse/row","application/widgets/header","rofl/lib/l10n"],function(a,l,c,u,s,d,e,o,h,t){"use strict";var g,p=t.getInstance();return(g=a.extend({init:function(){var e,t=new d,i=new u,n=new h,r=new l,s=new c,o=new a;this._super("history"),this.addClass("browse"),t.attach(i),t.setAnimationOptions({duration:250,easing:"easeInOut",skipAnim:!1,fps:60}),r.setText(p.get("history.errors.no_content")),(e=new a).addClass(["icon","arrow-left"]),s.addClass(["button","button-block","button-primary","back-button"]),s.appendChildWidget(e),s.appendChildWidget(new l(p.get("back"))),o.addClass("no-results"),o.appendChildWidget(r),o.appendChildWidget(s),this._bckButton=s,this._header=this.appendChildWidget(n),this._noResults=this.appendChildWidget(o),this._carousel=this.appendChildWidget(i)},getBackButton:function(){return this._bckButton||null},getNoResults:function(){return this._noResults||null},getHeader:function(){return this._header||null},getCarousel:function(){return this._carousel||null},setHistoryPage:function(e){var t,i=e.getSections(),n=this._carousel,r=this;n.removeChildWidgets(),0<i.length?(t=new s(new o,i),this.getNoResults().hide({skipAnim:!0}),t.appendAllTo(n),n.setAlignPoint(0),n.setActiveChildIndex(0),n.alignToIndex(0),n.focus(),n.addEventListener("beforealign",function(e){var t=e.alignedIndex;e.target===n&&r._handleNavigation(t,n)})):(this.getNoResults().show({skipAnim:!0}),this.getBackButton().focus())},_handleNavigation:function(e,t){var i=t.getActiveChildWidget(),n=t.getChildWidgetByIndex(e),r=i.getOffsettedIndex(),s=n.getOffsettedIndex(),o=i.getActiveChildWidgetIndex(),a=Math.round(o-r+s),l=g.DEFAULT_VISIBLE_ROWS,c=n.getChildWidgetCount()-1;c<a&&(a=c),n.setOffsettedWidgetIndex(a),t.items().length>l&&(e>t.items().length-l?t.setAlignPoint(198*(e-(t.items().length-l))):t.setAlignPoint(0))}})).DEFAULT_VISIBLE_ROWS=3,g}),define("application/views/login",["antie/runtimecontext","antie/widgets/container","antie/widgets/horizontallist","antie/widgets/verticallist","rofl/widgets/button","rofl/widgets/label","rofl/widgets/input","application/widgets/header","rofl/widgets/keyboard/multi","rofl/lib/l10n","antie/events/keyevent","smart-ott/config"],function(i,e,p,f,_,m,v,C,A,t,E,I){"use strict";var y=t.getInstance();return e.extend({_elements:{},init:function(e){var t=I.getApplication().appname.replace(/\s+/g,""),i=new m(y.get("login.title")),n=new m(y.get("login.subtitle",{link:y.get("login.link."+t)})),r=new f,s=v("text",{placeholder:""}),o=v("password",{placeholder:""}),a=new A,l=a.getKeyboard(),c=new m(""),u=new p,d=new _("submit-login"),h=new _("skip-login"),g=new C;this._super(e),l.addEventListener("keypress",function(e){l.bubbleEvent(new E("keydown",e.keyCode))}),l.addEventListener("keydown",function(e){e.keyCode!==E.VK_LEFT||e.isPropagationStopped()?e.keyCode!==E.VK_RIGHT||e.isPropagationStopped()||(l.setActiveChildIndex(0),e.stopPropagation()):(l.setActiveChildIndex(l.getCols()-1),e.stopPropagation())}),i.addClass("title"),n.addClass("subtitle"),r.addClass("form"),s.addClass("button-secondary"),o.addClass("button-secondary"),o.setMaskCharacter("●"),c.addClass(["error"]),u.addClass("buttons"),d.appendChildWidget(new m(y.get("login.login_btn"))),d.addClass(["button","button-primary"]),h.appendChildWidget(new m(y.get("login.skip_btn"))),h.addClass(["button","button-secondary"]),r.appendChildWidget(new m(y.get("login.input.username_email"),["row-title"])),r.appendChildWidget(s),r.appendChildWidget(new m(y.get("login.input.password"),["row-title"])),r.appendChildWidget(o),r.appendChildWidget(c),r.appendChildWidget(u),u.appendChildWidget(d),u.appendChildWidget(h),this.appendChildWidget(g),this.appendChildWidget(a),this.appendChildWidget(i),this.appendChildWidget(n),this.appendChildWidget(r),this._elements={header:g,username:s,password:o,keyboard:a,error:c,submit:d,skip:h}},getHeader:function(){return this._elements.header||null},getUsername:function(){return this._elements.username||null},getPassword:function(){return this._elements.password||null},getKeyboard:function(){return this._elements.keyboard||null},getSubmit:function(){return this._elements.submit||null},getSkip:function(){return this._elements.skip||null},setErrorMessage:function(e){var t=this._elements.error;t.setText(e),i.getDevice().showElement({el:t.outputElement,duration:250})},resetToInitialState:function(){var e=this._elements.error;e.setText(""),i.getDevice().showElement({el:e.outputElement,skipAnim:!0}),this._elements.username.setValue(""),this._elements.password.setValue("")}})}),define("application/views/parentalpin",["antie/runtimecontext","antie/widgets/container","antie/widgets/verticallist","rofl/widgets/button","rofl/widgets/label","application/widgets/pininput","application/widgets/header","rofl/widgets/keyboard","rofl/widgets/keyboard/multi/keysets/default/numeric","antie/events/keyevent","application/widgets/buttonround","smart-ott/resolver"],function(e,l,t,i,c,u,d,h,n,g,p,f){"use strict";return l.extend({init:function(){var e=new p,t=new l,i=new l,n=new h("",11,1,["0","1","2","3","4","5","6","7","8","9","-"]),r=new c("",["row-title","pin-title"]),s=new c(""),o=new d,a=new u;this._super(),this.addClass("parentalpin-view"),f.retrieveModel("parentalpin").then(function(e){a.setLength(e.LengthLimits.max)}),i.addClass(["keyboard-container","single-keyboard"]),i.appendChildWidget(n),n.setActiveChildKey("0"),n.addEventListener("keypress",function(e){n.bubbleEvent(new g("keydown",e.keyCode))}),n.addEventListener("keydown",function(e){e.keyCode!==g.VK_LEFT||e.isPropagationStopped()?e.keyCode!==g.VK_RIGHT||e.isPropagationStopped()||(n.setActiveChildIndex(0),e.stopPropagation()):(n.setActiveChildIndex(n.getCols()-1),e.stopPropagation())}),e.addClass("profile"),s.addClass(["error"]),t.addClass("form"),t.appendChildWidget(e),t.appendChildWidget(r),t.appendChildWidget(a),t.appendChildWidget(s),this.appendChildWidget(o),this.appendChildWidget(i),this.appendChildWidget(t),this._header=o,this._pinInput=a,this._keyboard=n,this._profileButton=e,this._message=r,this._error=s},getHeader:function(){return this._header||null},getPin:function(){return this._pinInput},getKeyboard:function(){return this._keyboard},getProfileButton:function(){return this._profileButton},getMessage:function(){return this._message},setErrorMessage:function(e){var t=this._error;t.setText(e),t.show({onComplete:function(){setTimeout(function(){t.hide()},5e3)}})},resetToInitialState:function(){var e=this._error,t=this.getPin();e.setText(""),e.hide({skipAnim:!0}),t.cleanInput()}})}),define("application/views/profilepin",["antie/runtimecontext","antie/widgets/container","antie/widgets/verticallist","rofl/widgets/button","rofl/widgets/label","rofl/widgets/input","application/widgets/pin","application/widgets/header","rofl/widgets/keyboard/multi","antie/events/keyevent","application/widgets/buttonround","smart-ott/resolver","smart-ott/config"],function(e,t,u,i,d,h,g,p,f,_,m,v,C){"use strict";return t.extend({_elements:{},init:function(){var e,t,i=C.getFeature("accounts"),n=new m,r=new u,s=new f,o=s.getKeyboard(),a=new d("",["row-title","pin-title"]),l=new d(""),c=new p;this._super(),this.addClass("profilepin-view"),i.profile_switch_code===C.ProfileCode.password&&((e=h("password",{placeholder:""})).addClass("button-secondary"),e.setMaskCharacter("●")),i.profile_switch_code===C.ProfileCode.pin&&(t=new g,v.retrieveModel("parentalpin").then(function(e){t.setLimits({min:e.LengthLimits.min,max:e.LengthLimits.max})})),o.addEventListener("keypress",function(e){o.bubbleEvent(new _("keydown",e.keyCode))}),o.addEventListener("keydown",function(e){e.keyCode!==_.VK_LEFT||e.isPropagationStopped()?e.keyCode!==_.VK_RIGHT||e.isPropagationStopped()||(o.setActiveChildIndex(0),e.stopPropagation()):(o.setActiveChildIndex(o.getCols()-1),e.stopPropagation())}),n.addClass("profile"),r.addClass("form"),l.addClass(["error"]),r.appendChildWidget(n),r.appendChildWidget(a),e&&r.appendChildWidget(e),t&&r.appendChildWidget(t),r.appendChildWidget(l),this.appendChildWidget(c),this.appendChildWidget(s),this.appendChildWidget(r),this._elements={header:c,password:e,pin:t,keyboard:s,profileButton:n,message:a,error:l}},getHeader:function(){return this._elements.header||null},getPassword:function(){return this._elements.password||null},getPin:function(){return this._elements.pin||null},getCode:function(){return this.getPassword()||this.getPin()},getKeyboard:function(){return this._elements.keyboard||null},getProfileButton:function(){return this._elements.profileButton||null},getMessage:function(){return this._elements.message||null},setErrorMessage:function(e){var t=this._elements.error;t.setText(e),t.show({onComplete:function(){setTimeout(function(){t.hide()},5e3)}})},resetToInitialState:function(){var e=this._elements.error;e.setText(""),e.hide({skipAnim:!0}),this.getCode()&&this.getCode().setValue("")}})}),define("application/views/purchasehistory",["rofl/widgets/container","rofl/widgets/label","rofl/widgets/button","rofl/widgets/carousel","antie/widgets/carousel/binder","antie/widgets/carousel/keyhandlers/alignfirsthandler","rofl/widgets/carousel/aligners/natural","application/formatters/browse/row","application/widgets/header","rofl/lib/l10n"],function(a,l,c,u,r,d,e,s,h,t){"use strict";var g,p=t.getInstance();return(g=a.extend({init:function(){var e,t=new d,i=this._carousel=new u(null,u.orientations.HORIZONTAL),n=new h,r=new l,s=new c,o=new a;this._super("history"),this.addClass("browse"),t.attach(i),t.setAnimationOptions({duration:250,easing:"easeInOut",skipAnim:!1,fps:60}),r.setText(p.get("purchaseHistory.errors.no_content")),(e=new a).addClass(["icon","arrow-left"]),s.addClass(["button","button-block","button-primary","back-button"]),s.appendChildWidget(e),s.appendChildWidget(new l(p.get("back"))),o.addClass("no-results"),o.appendChildWidget(r),o.appendChildWidget(s),this._bckButton=s,this._header=this.appendChildWidget(n),this._noResults=this.appendChildWidget(o),this._carousel=this.appendChildWidget(i)},getBackButton:function(){return this._bckButton||null},getNoResults:function(){return this._noResults||null},getHeader:function(){return this._header||null},getCarousel:function(){return this._carousel||null},setPurchaseHistoryPage:function(e){var t=new r(new s,e.getSections()),i=this._carousel,n=this;i.removeChildWidgets(),0<i.length?(t.appendAllTo(i),i.setWidgetLengths(265),i.setAlignPoint(0),i.setActiveChildIndex(0),i.alignToIndex(0),i.focus(),0<e.getSections().length&&this.getNoResults().hide({skipAnim:!0}),i.addEventListener("beforealign",function(e){var t=e.alignedIndex;e.target===i&&n._handleNavigation(t,i)})):(this.getNoResults().show({skipAnim:!0}),this.getBackButton().focus())},_handleNavigation:function(e,t){var i=t.getActiveChildWidget(),n=t.getChildWidgetByIndex(e),r=i.getOffsettedIndex(),s=n.getOffsettedIndex(),o=i.getActiveChildWidgetIndex(),a=Math.round(o-r+s),l=g.DEFAULT_VISIBLE_ROWS,c=n.getChildWidgetCount()-1;c<a&&(a=c),n.setOffsettedWidgetIndex(a),t.items().length>l&&(e>t.items().length-l?t.setAlignPoint(198*(e-(t.items().length-l))):t.setAlignPoint(0))}})).DEFAULT_VISIBLE_ROWS=3,g}),define("application/views/search",["antie/widgets/verticallist","antie/widgets/horizontallist","rofl/widgets/container","rofl/widgets/label","application/widgets/header","application/widgets/search/searchinput","application/widgets/search/searchfilter","rofl/widgets/carousel","rofl/widgets/carousel/aligners/natural","antie/widgets/carousel/binder","antie/widgets/carousel/keyhandlers/alignfirsthandler","rofl/widgets/carousel/aligners/natural","application/formatters/searchbrowse","rofl/widgets/button","antie/runtimecontext","rofl/lib/l10n"],function(_,m,v,C,A,E,I,y,b,s,S,e,o,T,t,i){"use strict";var w=i.getInstance(),P=t.getCurrentApplication().getLayout();return v.extend({init:function(){var e,t,i,n,r,s,o,a,l,c,u,d=new m,h=new T("resetBtn"),g=new T("lettersBtn"),p=new T("numbersBtn"),f=new T("specialCharsBtn");this._super(),this.widgetLength=Math.round(265*(P.modifier||1)),d.addClass("search-buttons"),h.addClass(["button","button-primary"]),h.appendChildWidget(new C(w.get("search.resetBtn"))),g.addClass(["button","button-primary"]),g.appendChildWidget(new C("abc")),p.addClass(["button","button-primary"]),p.appendChildWidget(new C("123")),f.addClass(["button","button-primary"]),f.appendChildWidget(new C(w.get("#+-"))),d.appendChildWidget(g),d.appendChildWidget(p),d.appendChildWidget(f),d.appendChildWidget(h),l=this._carousel=new y(null,y.orientations.HORIZONTAL),(c=this._carouselContainer=new v).addClass("carouselContainer"),l.addClass("search-results"),u=this._carouselTitle=new C("","",["title","carousel-title"]),o=new b(l.getMask()),a=new S,t=new _,i=this._searchResult=new _("searchResults"),n=this._header=new A,e=this._searchInput=new E,r=this._searchFilter=new I,o.setNumberOfItemsVisibleOnScreen(4),a.attach(l),l.setAligner(o),a.setAnimationOptions({duration:250,easing:"easeInOut",skipAnim:!1,fps:60}),s=this._errorLabel=new C("errorLabel","",["title","error-label"]),i.appendChildWidget(r),i.appendChildWidget(u),c.appendChildWidget(l),i.appendChildWidget(c),t.appendChildWidget(n),t.appendChildWidget(e),t.appendChildWidget(d),t.appendChildWidget(i),t.appendChildWidget(s),this.appendChildWidget(t),this._elements={resetBtn:h,lettersBtn:g,numbersBtn:p,specialCharsBtn:f}},getHeader:function(){return this._header||null},getSearchInput:function(){return this._searchInput||null},getResetButton:function(){return this._elements.resetBtn||null},getLettersButton:function(){return this._elements.lettersBtn||null},getNumbersButton:function(){return this._elements.numbersBtn||null},getSpecialCharsButton:function(){return this._elements.specialCharsBtn||null},getKeyboard:function(){return this._searchInput._keyboard||null},getFilter:function(){return this._searchFilter||null},getCarousel:function(){return this._carousel||null},getCarouselContainer:function(){return this._carouselContainer||null},getSearchResult:function(){return this._searchResult||null},setErrorMessage:function(e){this._errorLabel.setText(e||"")},showError:function(){this._errorLabel.show({skipAnim:!0})},hideError:function(){this._errorLabel.hide({skipAnim:!0})},showResults:function(){this._searchResult.show({skipAnim:!0})},hideResults:function(){this._searchResult.hide({skipAnim:!0})},showFilterButtons:function(){this._searchFilter.toggleButtons(!0)},hideFilterButtons:function(){this._searchFilter.toggleButtons(!1)},setSearchPage:function(e,t,i){var n=new s(new o,t),r=this._carousel;r.removeChildWidgets(),n.appendAllTo(r),r.setWidgetLengths(this.widgetLength),r.setAlignPoint(0),r.setActiveChildIndex(0),r.alignToIndex(0),i&&r.focus()},getOffsettedIndex:function(){var e=parseInt(this._carousel.getMask().getWidgetStrip().outputElement.style.left,10)||0;return Math.abs(e/this.widgetLength)},setOffsettedWidgetIndex:function(e){var t=this._carousel;t.setActiveIndex(e),t._aligner._lastAlignIndex=e},getActiveChildWidgetIndex:function(){return this._carousel.getActiveChildWidgetIndex()},getChildWidgetCount:function(){return this._carousel.getChildWidgetCount()},setMoreItemsSearchPage:function(e,t){var i=new s(new o,e),n=this._carousel;i.appendAllTo(n),n.setWidgetLengths(this.widgetLength),n.recalculate(),t&&n.focus()}})}),define("application/views/selectprofile",["antie/widgets/container","antie/widgets/horizontallist","antie/widgets/verticallist","rofl/widgets/grid","application/widgets/buttonround","rofl/widgets/label","application/widgets/header","rofl/lib/l10n"],function(l,c,u,d,h,g,p,e){"use strict";var f=e.getInstance();return l.extend({_elements:{},init:function(e){var t,i=new g("titleLabel",f.get("account.select_profile_header"),["title"]),n=new d,r=new c,s=new u,o=new h("logoutBtn"),a=new p;this._super(e),n.addClass("profile-list"),r.addClass("button-list"),(t=new l).addClass(["icon","logout"]),o.setInnerWidget(t),o.setOuterLabel(f.get("account.log_out")),r.appendChildWidget(o),s.appendChildWidget(n),s.appendChildWidget(r),this.appendChildWidget(a),this.appendChildWidget(i),this.appendChildWidget(s),this._elements={header:a,profiles:n,buttons:r,logout:o}},getHeader:function(){return this._elements.header||null},getProfiles:function(){return this._elements.profiles||null},getButtons:function(){return this._elements.buttons||null},getLogout:function(){return this._elements.logout||null}})}),define("application/views/serie",["rofl/widgets/container","antie/widgets/carousel/binder","application/formatters/serie/season","application/widgets/header","application/widgets/detail/info","rofl/lib/utils","smart-ott-models/assets/episode","antie/widgets/verticallist","antie/runtimecontext","rofl/widgets/label","rofl/decorators/focus","rofl/decorators/pointer","rofl/decorators/scrollable"],function(e,n,r,t,i,s,o,a,l,c,u,d,h){"use strict";var g,p=l.getDevice(),f=l.getCurrentApplication().getLayout();return(g=e.extend({init:function(){this._super(),this.addClass("seasons"),this._header=this.appendChildWidget(new t),this._title=this.appendChildWidget(new c),this._title.addClass("title"),this._container=this.appendChildWidget(new e),this._container.addClass("scroll-container"),this._list=this._container.appendChildWidget(new a),this._info=this.appendChildWidget(new i({showImage:!0})),this.render(p),this._list.decorate([d,h]),this._list.scrollSetupSimple({container:this._container,list:this._list}),this.addEventListener("focus",s.bind(this._onFocus,this)),this.addEventListener("selecteditemchange",s.bind(this._onSelectedItemChange,this))},hideContent:function(){this._container.hide({skipAnim:!0}),this._info.hide({skipAnim:!0})},showContent:function(){this._container.show({}),this._info.show({})},setErrorMessage:function(e){var t=this._error;t?t.setText(e):(t=this._error=this.appendChildWidget(new c(e,["error"]))).decorate([u]),t.focus()},clearErrorMessage:function(){var e=this._error;e&&(this.removeChildWidget(e),this._error=null)},getHeader:function(){return this._header},getList:function(){return this._list},setTitle:function(e){this._title.setText(e)},setSeasons:function(e){var t=new n(new r,e),i=this._list;i.removeChildWidgets(),t.appendAllTo(i),i.setStylesTo({top:"0px",left:"0px"}),i.hideScrollArrows(),i.focus()},_onFocus:function(e){var t=e.target.getDataItem();t&&this._info.setData({asset:t,truncation:{maximumLines:6,width:460}})},realign:function(){var e,t,i=Math.floor(g.ITEMS_VISIBLE_ON_SCREEN/2),n=this._list,r=n.getChildWidgets(),s=0,o=n.getActiveChildWidgetIndex();for(e=0;e<o;e++)s+=r[e].getVisibleWidgetCount();t=(s+=n.getActiveChildWidget().getActiveWidgetCount())-1,n.pixelScroll((t-i)*g.ITEM_HEIGHT-n.getCurrentScrollOffset(),{skipAnim:!1})},_onSelectedItemChange:function(){this._list.pixelScroll(0),this.realign()},dispose:function(){this._list.scrollCleanup(),this._super()}})).ITEMS_VISIBLE_ON_SCREEN=8,g.ITEM_HEIGHT=Math.round(70*(f.modifier||1)),g}),define("application/views/watchlist",["rofl/widgets/container","rofl/widgets/label","rofl/widgets/button","rofl/widgets/carousel","antie/widgets/carousel/binder","antie/widgets/carousel/keyhandlers/alignfirsthandler","rofl/widgets/carousel/aligners/natural","application/formatters/browse/row","application/widgets/header","rofl/lib/l10n"],function(a,l,c,u,s,d,e,o,h,t){"use strict";var g,p=t.getInstance();return(g=a.extend({init:function(){var e,t=new d,i=new u,n=new h,r=new l,s=new c,o=new a;this._super("watchlist"),this.addClass("browse"),t.attach(i),t.setAnimationOptions({duration:250,easing:"easeInOut",skipAnim:!1,fps:60}),r.setText(p.get("watchlist.errors.no_content")),(e=new a).addClass(["icon","arrow-left"]),s.addClass(["button","button-block","button-primary","back-button"]),s.appendChildWidget(e),s.appendChildWidget(new l(p.get("back"))),o.addClass("no-results"),o.appendChildWidget(r),o.appendChildWidget(s),this._bckButton=s,this._header=this.appendChildWidget(n),this._carousel=this.appendChildWidget(i),this._noResults=this.appendChildWidget(o)},getBackButton:function(){return this._bckButton||null},getDefaultVisibleRows:function(){return g.DEFAULT_VISIBLE_ROWS||null},getNoResults:function(){return this._noResults||null},getHeader:function(){return this._header||null},getCarousel:function(){return this._carousel||null},setWatchlistPage:function(e){var t,i=e.getSections(),n=this._carousel,r=this;n.removeChildWidgets(),0<i.length?(t=new s(new o,i),this.getNoResults().hide({skipAnim:!0}),t.appendAllTo(n),n.setAlignPoint(0),n.setActiveChildIndex(0),n.alignToIndex(0),n.focus(),n.addEventListener("beforealign",function(e){var t=e.alignedIndex;e.target===n&&r._handleNavigation(t,n)})):(this.getNoResults().show({skipAnim:!0}),this.getBackButton().focus())},_handleNavigation:function(e,t){var i,n=t.getActiveChildWidget(),r=t.getChildWidgetByIndex(e),s=n.getOffsettedIndex(),o=r.getOffsettedIndex(),a=n.getActiveChildWidgetIndex(),l=Math.round(a-s+o),c=g.DEFAULT_VISIBLE_ROWS,u=r.getChildWidgetCount()-1;u<l&&(l=u),r.setOffsettedWidgetIndex(l),i=t.items().length-c,t.items().length>c?i<e?t.setAlignPoint(t._widgetStrip.getLengthToIndex(e)-t._widgetStrip.getLengthToIndex(i)):t.setAlignPoint(0):t.setAlignPoint(t._widgetStrip.getLengthToIndex(e)-t._widgetStrip.getLengthToIndex(i))}})).DEFAULT_VISIBLE_ROWS=3,g}),define("application/widgets/avatar",["rofl/widgets/container","rofl/widgets/label","rofl/widgets/image"],function(e,t,i){"use strict";return e.extend({init:function(e){this._super(),this.addClass("avatar"),this._initials=new t,this._initials.addClass("initials"),this.appendChildWidget(this._initials),this._picture=new i,this._picture.addClass("picture"),this.appendChildWidget(this._picture),this.setDataItem(e)},setDataItem:function(e){var t;e=e||null,this._super(e),this._initials.setText(e&&e.getInitials()||"&nbsp;"),(t=this._getAvatarUrl())&&this._picture.setSrc(t),this._updateVisibility()},_updateVisibility:function(){var e=!!this._getAvatarUrl();this.outputElement&&(this._picture.outputElement.style.display=e?"":"none",this._initials.outputElement.style.display=e?"none":"")},_getAvatarUrl:function(){return this._dataItem&&this._dataItem.getAvatarUrl&&this._dataItem.getAvatarUrl()||null},render:function(e){var t=this._super(e);return this._updateVisibility(),t}})}),define("application/widgets/bingebar/row",["rofl/widgets/container","rofl/widgets/carousel","rofl/widgets/label","rofl/widgets/carousel/aligners/natural","antie/widgets/carousel/keyhandlers/alignfirsthandler","antie/widgets/carousel/binder","application/formatters/browse","rofl/decorators/pointer","antie/runtimecontext","rofl/decorators/scrollable"],function(e,s,o,a,l,i,n,c,t,u){"use strict";var r=t.getCurrentApplication().getLayout().modifier,d=Math.round(265*(r||1));return e.extend({init:function(e){var t,i,n,r=e.items||3;this._super(),this._label=this.appendChildWidget(new o("",["title"])),i=new s(null,s.orientations.HORIZONTAL),t=new a(i.getMask()),n=new l,t.setNumberOfItemsVisibleOnScreen(r),n.attach(i),i.setAligner(t),n.setAnimationOptions({duration:250,easing:"easeInOut",skipAnim:!1,fps:60}),this._carousel=this.appendChildWidget(i),this.decorate([c,u])},setDataItem:function(e){var t=this._carousel;this._super(e),this._label.setText(e.getLabel()),new i(new n,e.getItems()).appendAllTo(t),0===e.getItems().length&&this._label.hide(),t.setWidgetLengths(d)},getOffsettedIndex:function(){var e=parseInt(this._carousel.getMask().getWidgetStrip().outputElement.style.left,10)||0;return Math.abs(e/d)},setOffsettedWidgetIndex:function(e){var t=this._carousel;t.setActiveIndex(e),t._aligner._lastAlignIndex=e},getActiveChildWidgetIndex:function(){return this._carousel.getActiveChildWidgetIndex()},getChildWidgetCount:function(){return this._carousel.getChildWidgetCount()},render:function(e){var t=this._super(e),i=this;return this.rendered?i.scrollSetupSimple({carousel:i._carousel}):(this.rendered=!0,setTimeout(function(){i.scrollSetupSimple({carousel:i._carousel})},0)),t},dispose:function(){this.scrollCleanup(),this._super()}})}),define("application/widgets/browse/item",["rofl/widgets/button","rofl/widgets/image","rofl/widgets/label","rofl/lib/utils","rofl/lib/promise","smart-ott/config","application/widgets/utils/progress","smart-ott-models/assets/movie","smart-ott-models/assets/serie","smart-ott-models/assets/episode","smart-ott-models/assets/broadcast","application/widgets/rating/rating","application/widgets/likes/likes","antie/runtimecontext"],function(e,i,n,o,r,a,s,t,l,c,u,d,h,g){"use strict";var p=g.getCurrentApplication().getLayout().modifier,f={WIDTH:Math.round(246*(p||1)),HEIGHT:Math.round(138*(p||1))},_=g.getCurrentApplication().getDevice().getLogger();return e.extend({init:function(e){var t={onError:o.bind(this._onImageError,this),bindListenersOnRender:!1};this._super(),this.addClass("browse-item"),(e=e||{}).width=e.width||f.WIDTH,e.height=e.height||f.HEIGHT,this._size={width:e.width,height:e.height},this._isUpNext=e.upNext||!1,this._noTitle=e.notitle,this._rating=this.appendChildWidget(new d),this._rating.addClass("small-stars"),this._likes=this.appendChildWidget(new h),this._likes.addClass("likeCounter"),this._image=this.appendChildWidget(new i("","",this._size,t)),this._noTitle?this.addClass("notitle"):this._title=this.appendChildWidget(new n("",["title"])),this._subtitle=this.appendChildWidget(new n("",["title","subtitle"])),this._progress=this.appendChildWidget(new s),this._progress.addClass("hidden"),this._disabled=!0},setDataItem:function(e){var t=this,i=this._size,n=a.getItemRatingType(),r=e.hasPoster&&e.hasPoster(),s=this._isUpNext?this._chooseUpNextSubtitle(e):e.getBrowseSubtitle();this._super(e),this._disabled=!1,this._defaultImageTested=!1,(this._noTitle?r?e.getPoster(i.width,i.height):e.getImageTitleCard(i.width,i.height):r?e.getPoster(i.width,i.height):e.getImage(i.width,i.height)).then(function(e){t._image.setSrc(e)},o.bind(this._onImageError,this)),this._noTitle||this._title.setText(e.getLongTitle&&e.getLongTitle()||e.getLabel()),this._setSubtitle(s),e instanceof l||this._setProgress(e.getProgress()),n===a.ItemRatingType.stars&&o.isFunction(e.getRating)?this._rating.setData(e.getRating()):this.removeChildWidget(this._rating),n===a.ItemRatingType.likes&&o.isFunction(e.getLikes)?this._likes.setData(e.getLikes()):this.removeChildWidget(this._likes)},getFallbackImage:function(e,t){return this.getDataItem()instanceof u?this.getDataItem().getChannel().getImage(e,t):r.resolve(a.getLogo())},_chooseUpNextSubtitle:function(e){var t="";return o.isFunction(e.getDescription)&&e.getDescription()?t=e.getDescription():o.isFunction(e.getBroadcastDateStr)&&e.getBroadcastDateStr()&&(t=e.getBroadcastDateStr()),t},_onImageError:function(){var n=this,e=this._size;this.getDataItem().hasPoster&&this.getDataItem().hasPoster()&&!this._defaultImageTested?(this._defaultImageTested=!0,this.getDataItem().getImage(e.width,e.height).then(function(e){n._image.setSrc(e)},o.bind(this._onImageError,this))):this.getFallbackImage(e.width,e.height).then(function(e){var t=n._image,i=t._imageElement;t.setOnErrorCallback(n._onFallbackImageError),t.addClass("fallback"),t.setSrc(e),i.style.width="auto",i.style.height="auto"})},_setSubtitle:function(e){""===e?(this._subtitle.setText(e),!this._noTitle&&this._title.removeClass("maintitle")):"string"==typeof e&&(this._subtitle.setText(e),!this._noTitle&&this._title.addClass("maintitle"))},_setProgress:function(e){o.isNumber(e)&&0<e&&(this._progress.setProgress(e),this._progress.removeClass("hidden"))},_onFallbackImageError:function(){_.error("Error loading fallback image")}})}),define("application/widgets/browse/rows/dots",["antie/widgets/container","rofl/widgets/label"],function(e,i){"use strict";return e.extend({init:function(){this._super()},setActive:function(e){var t;if(this._childWidgetOrder[e]){for(t=0;t<this._childWidgetOrder.length;t++)this._childWidgetOrder[t].removeClass("active");this._childWidgetOrder[e].addClass("active")}},setQuantity:function(e){this._buildWidget(e)},_buildWidget:function(e){var t;for(t=0;t<e;t++)this.appendChildWidget(new i("",""));this.addClass(["dots"])}})}),define("application/widgets/browse/rows/double",["rofl/widgets/container","rofl/widgets/label","antie/widgets/horizontallist","rofl/widgets/grid","application/formatters/browse","rofl/lib/utils","antie/runtimecontext","application/views/browse","antie/widgets/carousel/aligners/aligner","rofl/decorators/pointer","rofl/decorators/scrollable","antie/events/beforealignevent"],function(e,t,i,r,a,s,n,o,l,c,u,d){"use strict";var h=n.getDevice(),g=n.getCurrentApplication(),p=g.getConfiguration().pagingOffset||5,f=g.getLayout().modifier,_={WIDTH:Math.round(513*(f||1)),HEIGHT:Math.round(296*(f||1))},m={WIDTH:Math.round(265*(f||1)),OFFSET:Math.round(19*(f||1))};return e.extend({_realCols:null,init:function(){this._super(),this.addClass("double-row"),this._grids=[],this._label=this.appendChildWidget(new t("",["title"])),this._wrapper=this.appendChildWidget(new e),this._container=this._wrapper.appendChildWidget(new i),this._grids[0]=this._container.appendChildWidget(new r("grid_"+this._grids.length,0,2)),this._grids[0].addEventListener("gridselecteditemchange",s.bind(this._onGridChange,this)),this._grid=this._grids[0],this._gridList=this._container,this._gridList.addEventListener("selecteditemchange",s.bind(this._onGridsChange,this)),this._onBigItemFocusBound=s.bind(this._onBigItemFocus,this),this._onGridFocusBound=s.bind(this._onGridFocus,this),this._onBlurBound=s.bind(this._onBlur,this),this.decorate([c,u]),this._visibleCols=4,this._hasFocus=!1,this.addEventListener("blur",this._onBlurBound),this._onPagingLimitBound=s.bind(this._onPagingLimit,this),this.addEventListener("paginglimit",this._onPagingLimitBound)},_onBigItemFocus:function(){this._onGridChange({col:0,bigItem:!0}),this._hasFocus=!0},_onGridFocus:function(e){e.target===this._grid&&(this._hasFocus&&this.bubbleEvent(new d(this,0)),this._hasFocus=!0)},_onBlur:function(e){e.target===this&&(this._hasFocus=!1)},setDataItem:function(e,t){var i,n,r=new a,s=e.getItems().slice(0),o=t||this._grid;for(this._super(e),t||((n=o.prependWidget(r.format(s.shift(),{width:_.WIDTH,height:_.HEIGHT}))).addClass("big-item"),n.addEventListener("focus",this._onBigItemFocusBound),this._big=n,this._label.setText(e.getLabel()),this._count=e.getItems().length,this.setPagingScrollOffset(p*this.getColWidth())),o.setCols(Math.ceil(s.length/2)),this._realCols=o.getCols(),o.addEventListener("focus",this._onGridFocusBound),i=0;i<s.length;i++)o.setWidgetAt(Math.floor(i/2),i%2,r.format(s[i]))},getOffsettedIndex:function(){return this._big.isFocussed()?0:this.getCurrentScrollOffset()/this.getColWidth()},setOffsettedWidgetIndex:function(e,t){var i=this._grid,n=t===l.directions.FORWARD?0:1;e<=1?this._container.setActiveChildWidget(this._big):(this._container.setActiveChildWidget(i),i.setActiveChildWidget(i.getWidgetAt(e-2,n)))},getActiveChildWidgetIndex:function(){return this._big.isFocussed()?0:this._grid.getSelectedCol()+2},_onGridChange:function(e){var t,i=this,n=e.target||this._grid,r=this._realCols||n.getCols(),s=this.getColIndexAtOffset(this.getCurrentScrollOffset())||-1,o=this._grids.indexOf(n),a=e.col+o*(this._grids[o-1]?this._grids[o-1].getCols():this._grids[0].getCols());this._grid=n,e.bigItem||(a+=2),this._grids[o]&&(this._selectedRow=e.row),this._container.outputElement&&(this._hasFocus&&this.bubbleEvent(new d(this,a)),(t=a-s)<=0?this.itemScroll(t,this._scrollAnimationOptions):t>=this._visibleCols&&(this.itemScroll(t-(this._visibleCols-1),this._scrollAnimationOptions),a+(n.getCols()-1)>=r&&this.getMoreItems({onComplete:function(){i._grid.isFocusable()&&i._grid.focus()}})))},getMoreItems:function(i){var n=this,e=this.getDataItem();if(i=i||{},!e.hasMoreItems()||e.isGettingMoreItems())return!!e.hasMoreItems()&&void 0;e.getMoreItems().then(function(e){var t=new r("grid_"+n._grids.length,0,2);n.setDataItem(e,t),n._gridList.appendChildWidget(t),n._grids.push(t),n._grids[n._grids.length-1].addEventListener("gridselecteditemchange",s.bind(n._onGridChange,n)),n._count+=e.getItems().length,n._realCols=Math.ceil(n._count/2),i.onComplete&&i.onComplete()})},_onPagingLimit:function(){var e=this;!1===this.getMoreItems({onComplete:function(){e.pixelScroll(-1)}})&&this.unsetPagingScrollOffset()},_onGridsChange:function(e){var t,i=e.target.getActiveChildWidget();i instanceof r&&(0===(t=i.getSelectedCol())?i.setActiveChildIndex(i.getCols()*this._selectedRow):t===i.getCols()-1&&i.setActiveChildIndex(i.getCols()*(this._selectedRow+1)-1))},getCols:function(){var e=0;return this._big&&(e+=2),e+=this._realCols||this._grid.getCols()},getWidth:function(){return this.getCols()*(this.getColWidth()+this.getPaddingOffset())},getColWidth:function(){return m.WIDTH},getPaddingOffset:function(){return m.OFFSET},getViewWidth:function(){return this.getColWidth()*this._visibleCols},getCurrentScrollOffset:function(){return-parseInt(s.getNested(this._container.outputElement,"style","left")||0,10)},getColIndexAtOffset:function(e){return Math.floor(e/this.getColWidth())},getMaximumOffset:function(){return Math.max(0,this.getWidth()-this.getViewWidth())},scrollToPixel:function(e,t){var i;(i=s.extend({},this._scrollAnimationOptions,{el:this._container.outputElement,to:{left:-e}},t)).skipAnim?this._animation||h.moveElementTo(i):(this._animation&&h.stopAnimation(this._animation),this._animation=h.moveElementTo(i))},scrollByPixels:function(e,t){var i,n,r,s;return t=t||{skipAnim:!0},s={up:!1,down:!1,left:!1,right:!1},i=this.getCurrentScrollOffset(),n=Math.max(0,i+e),(r=this.getMaximumOffset())<=n&&(n=r,s.right=!0),n<=0&&(n=0,s.left=!0),this.scrollToPixel(n,t),s},scrollByItems:function(e,t){var i,n=this.getColIndexAtOffset(this.getCurrentScrollOffset())+e,r=this.getCols();n<0?n=0:this._big&&n<=1?n=0:n>r-this._visibleCols&&this._grids.length<=1&&(n=r-this._visibleCols),i=this.getColWidth()*n,this.scrollToPixel(i,t)},render:function(e){var t=this._super(e),i=this;return this.scrollSetup({container:this._wrapper,pixelScrollHandler:function(e,t){return i.scrollByPixels(e,t)},itemScrollHandler:function(e,t){i.scrollByItems(e,t)},directions:{left:{hoverHandler:function(){i.pixelScroll(-4)},clickHandler:function(){i.itemScroll(-3,i._scrollAnimationOptions)}},right:{hoverHandler:function(){i.pixelScroll(4)},clickHandler:function(){i.itemScroll(3,i._scrollAnimationOptions)}}}}),t},dispose:function(){this.scrollCleanup(),this._big.removeEventListener("focus",this._onBigItemFocusBound),this._grid.removeEventListener("focus",this._onGridFocusBound),this._gridList.removeEventListener("selecteditemchange",s.bind(this._onGridsChange,this)),this.removeEventListener("blur",this._onBlurBound),this.removeEventListener("paginglimit",this._onPagingLimitBound),this._super()},getChildWidgetCount:function(){return this._grid.getChildWidgetCount()},focusBigItem:function(){this._big.focus()}})}),define("application/widgets/browse/rows/doublesimple",["rofl/widgets/container","rofl/widgets/label","antie/widgets/horizontallist","rofl/widgets/grid","application/formatters/browse","rofl/lib/utils","antie/runtimecontext","antie/widgets/carousel/aligners/aligner","rofl/decorators/pointer","rofl/decorators/scrollable","antie/events/beforealignevent"],function(e,t,i,r,o,s,n,a,l,c,u){"use strict";var d=n.getDevice(),h=n.getCurrentApplication(),g=h.getConfiguration().pagingOffset||5,p=h.getLayout().modifier,f={WIDTH:Math.round(265*(p||1)),OFFSET:Math.round(19*(p||1))};return e.extend({_realCols:null,init:function(){this._super(),this.addClass("double-row"),this._grids=[],this._animDuration=250,this._visibleCols=4,this._label=this.appendChildWidget(new t("",["title"])),this._wrapper=this.appendChildWidget(new e),this._container=this._wrapper.appendChildWidget(new i),this._grids[0]=this._container.appendChildWidget(new r("",0,2)),this._grid=this._grids[0],this._gridList=this._container,this._grids[0].addEventListener("gridselecteditemchange",s.bind(this._onGridChange,this)),this._gridList.addEventListener("selecteditemchange",s.bind(this._onGridsChange,this)),this._onPagingLimitBound=s.bind(this._onPagingLimit,this),this.addEventListener("paginglimit",this._onPagingLimitBound),this.decorate([l,c])},setDataItem:function(e,t){var i,n=new o,r=e.getItems().slice(0),s=t||this._grid;for(this._super(e),t||(this._label.setText(e.getLabel()),this._count=e.getItems().length,this.setPagingScrollOffset(g*this.getColWidth())),s.setCols(Math.ceil(r.length/2)),s.addEventListener("focus",this._onGridFocusBound),i=0;i<r.length;i++)s.setWidgetAt(Math.floor(i/2),i%2,n.format(r[i]))},getOffsettedIndex:function(){return this.getCurrentScrollOffset()/this.getColWidth()},setOffsettedWidgetIndex:function(e,t){var i=this._grid,n=t===a.directions.FORWARD?0:1;this._container.setActiveChildWidget(i),i.setActiveChildWidget(i.getWidgetAt(e,n))},getActiveChildWidgetIndex:function(){return this._grid.getSelectedCol()},_onGridChange:function(e){var t,i=this,n=e.target,r=this._realCols||n.getCols(),s=this.getColIndexAtOffset(this.getCurrentScrollOffset())||-1,o=this._grids.indexOf(n),a=e.col+o*(this._grids[o-1]?this._grids[o-1].getCols():this._grids[0].getCols());this._grid=n,this._grids[o]&&(this._selectedRow=e.row),this._container.outputElement&&(this.bubbleEvent(new u(this,a)),(t=a-s)<=0?this.itemScroll(t,this._scrollAnimationOptions):t>=this._visibleCols&&(this.itemScroll(t-(this._visibleCols-1),this._scrollAnimationOptions),a+(n.getCols()-1)>=r&&this.getMoreItems({onComplete:function(){i._grid.isFocusable()&&i._grid.focus()}})))},getMoreItems:function(i){var n=this,e=this.getDataItem();if(i=i||{},!e.hasMoreItems()||e.isGettingMoreItems())return!!e.hasMoreItems()&&void 0;e.getMoreItems().then(function(e){var t=new r("grid_"+n._grids.length,0,2);n.setDataItem(e,t),n._gridList.appendChildWidget(t),n._grids.push(t),n._grids[n._grids.length-1].addEventListener("gridselecteditemchange",s.bind(n._onGridChange,n)),n._count+=e.getItems().length,n._realCols=Math.ceil(n._count/2),i.onComplete&&i.onComplete()})},_onPagingLimit:function(){var e=this;!1===this.getMoreItems({onComplete:function(){e.pixelScroll(-1)}})&&this.unsetPagingScrollOffset()},_onGridsChange:function(e){var t,i=e.target.getActiveChildWidget();i instanceof r&&(0===(t=i.getSelectedCol())?i.setActiveChildIndex(i.getCols()*this._selectedRow):t===i.getCols()-1&&i.setActiveChildIndex(i.getCols()*(this._selectedRow+1)-1))},getCols:function(){return this._realCols||this._grid.getCols()},getWidth:function(){return this.getCols()*(this.getColWidth()+this.getPaddingOffset())},getColWidth:function(){return f.WIDTH},getPaddingOffset:function(){return f.OFFSET},getViewWidth:function(){return this.getColWidth()*this._visibleCols},getCurrentScrollOffset:function(){return-parseInt(this._container.outputElement.style.left,10)||0},getColIndexAtOffset:function(e){return Math.floor(e/this.getColWidth())},getMaximumOffset:function(){return Math.max(0,this.getWidth()-this.getViewWidth())},scrollToPixel:function(e,t){var i;(i=s.extend({},this._scrollAnimationOptions,{el:this._container.outputElement,to:{left:-e}},t)).skipAnim?this._animation||d.moveElementTo(i):(this._animation&&d.stopAnimation(this._animation),this._animation=d.moveElementTo(i))},scrollByPixels:function(e,t){var i,n,r,s;return t=t||{skipAnim:!0},s={up:!1,down:!1,left:!1,right:!1},i=this.getCurrentScrollOffset(),n=Math.max(0,i+e),(r=this.getMaximumOffset())<=n&&(n=r,s.right=!0),n<=0&&(n=0,s.left=!0),this.scrollToPixel(n,t),s},scrollByItems:function(e,t){var i,n=this.getColIndexAtOffset(this.getCurrentScrollOffset())+e,r=this.getCols();n<0?n=0:n>r-this._visibleCols&&this._grids.length<=1&&(n=r-this._visibleCols),i=this.getColWidth()*n,this.scrollToPixel(i,t)},render:function(e){var t=this._super(e),i=this;return this.scrollSetup({container:this._wrapper,pixelScrollHandler:function(e,t){return i.scrollByPixels(e,t)},itemScrollHandler:function(e,t){i.scrollByItems(e,t)},directions:{left:{hoverHandler:function(){i.pixelScroll(-4)},clickHandler:function(){i.itemScroll(-3,i._scrollAnimationOptions)}},right:{hoverHandler:function(){i.pixelScroll(4)},clickHandler:function(){i.itemScroll(3,i._scrollAnimationOptions)}}}}),t},dispose:function(){this.scrollCleanup(),this._grid.removeEventListener("focus",this._onGridFocusBound),this._gridList.removeEventListener("selecteditemchange",s.bind(this._onGridsChange,this)),this.removeEventListener("blur",this._onBlurBound),this.removeEventListener("paginglimit",this._onPagingLimitBound),this._super()},getChildWidgetCount:function(){return this._grid.getChildWidgetCount()}})}),define("application/widgets/browse/rows/friend",["rofl/widgets/container","rofl/widgets/carousel","rofl/widgets/label","rofl/widgets/image","rofl/widgets/carousel/aligners/natural","antie/widgets/carousel/keyhandlers/alignfirsthandler","antie/widgets/carousel/binder","application/formatters/browse","application/widgets/friendInfo","rofl/decorators/pointer","rofl/decorators/scrollable","antie/runtimecontext","rofl/lib/utils"],function(r,s,e,t,o,a,l,c,u,d,h,i,g){"use strict";var n=i.getCurrentApplication(),p=n.getConfiguration().pagingOffset||5,f=n.getLayout().modifier,_=Math.round(265*(f||1));return r.extend({init:function(){var e,t,i,n;this._super(),i=new r,t=new s(null,s.orientations.HORIZONTAL),e=new o(t.getMask()),n=new a,i.addClass("friend-info"),e.setNumberOfItemsVisibleOnScreen(4),n.attach(t),t.setAligner(e),n.setAnimationOptions({duration:250,easing:"easeInOut",skipAnim:!1,fps:60}),this._friendInfoItem=i.appendChildWidget(new u),this.appendChildWidget(i),this._carousel=this.appendChildWidget(t),this.decorate([d,h]),n.setAnimationOptions(this._scrollAnimationOptions),this._onSelectedItemChangeBound=g.bind(this._onSelectedItemChange,this),this.addEventListener("selecteditemchange",this._onSelectedItemChangeBound),this._onPagingLimitBound=g.bind(this._onPagingLimit,this),this.addEventListener("paginglimit",this._onPagingLimitBound)},_onSelectedItemChange:function(e){e.index+p>=this._totalItems-1&&this.getMoreItems()},_onPagingLimit:function(){var e=this;!1===this.getMoreItems({onComplete:function(){e.pixelScroll(-1)}})&&this.unsetPagingScrollOffset()},getMoreItems:function(t){var i=this,n=this._carousel,e=this.getDataItem();if(t=t||{},!e.hasMoreItems()||e.isGettingMoreItems())return!!e.hasMoreItems()&&void 0;e.getMoreItems().then(function(e){new l(new c,e.getItems()).appendAllTo(n),n.setWidgetLengths(_),n.recalculate(),i._totalItems+=e.getItems().length,t.onComplete&&t.onComplete()})},setDataItem:function(e){var t=this._carousel;this._super(e),this._friendInfoItem.setDataItem(e.getIdentity()),new l(new c,e.getMediaInfo()).appendAllTo(t),t.setWidgetLengths(_),this._totalItems=e.getMediaInfo().length,this.setPagingScrollOffset(p*_)},getCurrentScrollOffset:function(){return this._carousel.getCurrentScrollOffset()},getMaximumOffset:function(){return this._carousel.getMaximumOffset()},getOffsettedIndex:function(){var e=parseInt(this._carousel.getMask().getWidgetStrip().outputElement.style.left,10)||0;return Math.abs(e/_)},setOffsettedWidgetIndex:function(e){var t=this._carousel;t.setActiveIndex(e),t._aligner._lastAlignIndex=e},getActiveChildWidgetIndex:function(){return this._carousel.getActiveChildWidgetIndex()},getChildWidgetCount:function(){return this._carousel.getChildWidgetCount()},render:function(e){var t=this._super(e),i=this;return this.rendered?i.scrollSetupSimple({carousel:i._carousel}):(this.rendered=!0,setTimeout(function(){i.scrollSetupSimple({carousel:i._carousel})},0)),t},dispose:function(){this.scrollCleanup(),this.removeEventListener("selecteditemchange",this._onSelectedItemChangeBound),this._super()}})}),define("application/widgets/browse/rows/grid",["rofl/widgets/container","rofl/widgets/label","rofl/widgets/grid","application/formatters/browse","rofl/lib/utils","antie/runtimecontext","antie/widgets/verticallist"],function(e,n,r,c,s,t,o){"use strict";var u,a=t.getCurrentApplication(),i=a.getLayout(),l=a.getLayout().modifier,d=Math.round(15*(l||1)+26);return(u=e.extend({_realRows:null,init:function(){var e,t,i=this;this._super(),this._grids=[],this._currentScrollOffset=0,this._initialCarouselOffset=0,this._scrollHandler=null,this._label=this.appendChildWidget(new n("",["title"])),t=this.appendChildWidget(new o("gridList")),e=(this._gridList=t).appendChildWidget(new r("grid_"+i._grids.length,u.DEFAULT_COLS,0)),this._grids.push(e),this._grids[0].addEventListener("gridselecteditemchange",s.bind(this._onGridChange,this)),this._gridList.addEventListener("selecteditemchange",s.bind(this._onGridsChange,this)),this._grid=e,this._animationOptions={duration:250,easing:"easeInOut",skipAnim:!1,fps:60,onComplete:function(){i._animation=null}}},render:function(e){var t=this._super(e);return this.setStyleTo("position","relative"),t},setDataItem:function(e,t){var i,n=u.DEFAULT_COLS,r=t||this._grid,s=e.getItems(),o=s.length,a=0,l=new c;for(this._super(e);a<o;a++)i=Math.floor(a/n),r.setWidgetAt(a-i*n,i,l.format(s[a]));r.setRows(Math.ceil(o/u.DEFAULT_COLS)),t||(this._label.setText(e.getLabel()),this._count=e.getItems().length,this._realRows=r.getRows())},setScrollHandler:function(e){this._scrollHandler=e},getOffsettedIndex:function(){return 0},setOffsettedWidgetIndex:function(e,t){var i,n=this._grid.getRows();i=0===t?this._grid.getWidgetAt(e,0):this._grid.getWidgetAt(e,n-1),this._grid.setActiveChildWidget(i)},getNormalisedWidgetAlignPoint:function(){return this.getRows()<u.VISIBLE_ROWS?0:(this.getRows()-3)/this.getRows()},getActiveChildWidgetIndex:function(){return this._grid.getSelectedCol()},getChildWidgetCount:function(){return this._grid.getChildWidgetCount()},getRows:function(){return this._realRows||this._grid.getRows()},_onGridChange:function(e){var t=this,i=e.target,n=this._realRows||i.getRows(),r=u.VISIBLE_ROWS-1,s=this._grids.indexOf(i),o=e.row+s*(this._grids[s-1]?this._grids[s-1].getRows():this._grids[0].getRows());this._grid=i,r<n&&o<=n-r&&(this.scrollByItems(o-this.getRowIndexAtOffset(this.getCurrentScrollOffset()),this._animationOptions),this._grids[s]&&(this._selectedCol=e.col),o+(i.getRows()-1)>=n&&this.getMoreItems({onComplete:function(){t._grid.isFocusable()&&t._grid.focus()}}))},getMoreItems:function(i){var n=this,e=this.getDataItem();if(i=i||{},!e.hasMoreItems()||e.isGettingMoreItems())return!!e.hasMoreItems()&&void 0;a.showLoader(!1),e.getMoreItems().then(function(e){var t=new r("grid_"+n._grids.length,u.DEFAULT_COLS,0);n.setDataItem(e,t),n._gridList.appendChildWidget(t),n._grids.push(t),n._grids[n._grids.length-1].addEventListener("gridselecteditemchange",s.bind(n._onGridChange,n)),n._count+=e.getItems().length,n._realRows=Math.ceil(n._count/u.DEFAULT_COLS),a.hideLoader(),i.onComplete&&i.onComplete()})},_onGridsChange:function(e){var t,i=e.target.getActiveChildWidget();i instanceof r&&(0===(t=i.getSelectedRow())?i.setActiveChildIndex(this._selectedCol):t===i.getRows()-1&&i.setActiveChildIndex(i.getChildWidgetCount()-(u.DEFAULT_COLS-this._selectedCol)))},getHeight:function(){var e;return(e=a.getDevice()).getElementSize(this.outputElement||this.render(e)).height},getRowHeight:function(){return Math.round(158*(i.modifier||1))},getViewHeight:function(){return this.getRowHeight()*u.VISIBLE_ROWS},getCurrentScrollOffset:function(){return this._scrollHandler?this._currentScrollOffset:parseInt(s.getNested(this.outputElement,"style","top")||0,10)},getRowIndexAtOffset:function(e){return Math.floor(e/this.getRowHeight())},getMaximumOffset:function(){return Math.max(0,this.getHeight()-this.getViewHeight())},_moveElementTo:function(e,t){var i=-s.getNested(e,"to","top")||0;this._scrollHandler?(this._currentScrollOffset=i,this._scrollHandler(i,t)):a.getDevice().moveElementTo(e)},scrollToPixel:function(e,t){var i,n;this.outputElement&&(n=s.extend({},this._animationOptions,{el:this.outputElement,to:{top:-e}},t),i=a.getDevice(),n.skipAnim?this._animation||this._moveElementTo(n,t):(this._animation&&i.stopAnimation(this._animation),this._animation=this._moveElementTo(n,t)))},scrollByPixels:function(e,t){var i,n,r,s;return t=t||{skipAnim:!0},s={up:!1,down:!1,left:!1,right:!1},i=this.getCurrentScrollOffset(),n=Math.max(0,i+e),(r=this.getMaximumOffset())<=n&&(n=r,s.down=!0),n<=0&&(n=0,s.up=!0),this.scrollToPixel(n,t),s},scrollByItems:function(e,t){var i,n=this.getRowIndexAtOffset(this.getCurrentScrollOffset())+e,r=this.getRows();--n<0?n=0:n>r-u.VISIBLE_ROWS&&(n=r-u.VISIBLE_ROWS),i=this.getRowHeight()*n,n&&(i+=d*(n-1)),this.scrollToPixel(i,t)}})).DEFAULT_COLS=4,u.VISIBLE_ROWS=3,u}),define("application/widgets/browse/rows/header",["rofl/widgets/container","rofl/widgets/image","rofl/widgets/label"],function(r,s,o){"use strict";return r.extend({init:function(){var e,t,i,n;this._super(),this.addClass(["section","header"]),(t=this.appendChildWidget(new r)).addClass("align-container"),(e=t.appendChildWidget(new r)).addClass("content-container"),(i=e.appendChildWidget(new o)).addClass("title"),(n=e.appendChildWidget(new o)).addClass("description"),this._image=this.appendChildWidget(new s),this._title=i,this._description=n},setDataItem:function(e){this._super(e),this._image.setSrc(e.getImage()),this._title.setText(e.getLongTitle&&e.getLongTitle()||e.getLabel()),this._description.setText(e.getCollectionDescription&&e.getCollectionDescription())}})}),define("application/widgets/browse/rows/highlight",["rofl/widgets/container","rofl/widgets/label","antie/widgets/horizontallist","antie/widgets/carousel/binder","application/formatters/browse","antie/runtimecontext"],function(e,t,i,o,a,n){"use strict";var r=n.getCurrentApplication().getLayout().modifier,s=[{width:Math.round(556*(r||1)),height:Math.round(309*(r||1))},{width:Math.round(365*(r||1)),height:Math.round(203*(r||1))},{width:Math.round(274*(r||1)),height:Math.round(152*(r||1))}];return e.extend({init:function(){var e;this._super(),this._sizes={1:s[0],2:s[0],3:s[1],4:s[2]},this.addClass("highlightContainer"),this._label=this.appendChildWidget(new t("",["title","highlightTitle"])),(e=new i).addClass("highlight"),this._list=this.appendChildWidget(e)},setDataItem:function(e){var t,i,n=this._list,r=e.getItems(),s=r.length;for(this._super(e),this._label.setText(e.getLabel()),i=1;i<=4;i++)this._list.removeClass("items"+i);(t=this._sizes[s])&&(this._list.addClass("items"+s),new o(new a({width:t.width,height:t.height,type:e._type}),r).appendAllTo(n))},getActiveChildWidgetIndex:function(){return this._list.getActiveChildWidgetIndex()},getChildWidgetCount:function(){return this._list.getChildWidgetCount()},getOffsettedIndex:function(){return 0},setOffsettedWidgetIndex:function(e){this._list.setActiveChildIndex(e)}})}),define("application/widgets/browse/rows/single",["rofl/widgets/container","rofl/widgets/carousel","rofl/widgets/label","rofl/widgets/carousel/aligners/natural","antie/widgets/carousel/keyhandlers/alignfirsthandler","antie/widgets/carousel/binder","application/formatters/browse","rofl/decorators/pointer","rofl/decorators/scrollable","rofl/lib/utils","antie/runtimecontext"],function(e,r,s,o,a,l,c,u,d,h,t){"use strict";var i=t.getCurrentApplication(),n=t.getDevice(),g=i.getConfiguration().pagingOffset||5,p=i.getLayout().modifier,f=Math.round(265*(p||1)),_=f;return e.extend({_totalItems:0,init:function(e){var t,i,n;this._super(),this._opts=e,this._opts&&this._opts.width&&(_=this._opts.width+Math.round(19*(p||1))),this._label=this.appendChildWidget(new s("",["title","carouselTitle"])),i=new r(null,r.orientations.HORIZONTAL),t=new o(i.getMask()),n=new a,f<_?t.setNumberOfItemsVisibleOnScreen(3):t.setNumberOfItemsVisibleOnScreen(4),n.attach(i),i.setAligner(t),i.autoCalculate(!1),this._carousel=this.appendChildWidget(i),this.decorate([u,d]),n.setAnimationOptions(this._scrollAnimationOptions),this._onSelectedItemChangeBound=h.bind(this._onSelectedItemChange,this),this.addEventListener("selecteditemchange",this._onSelectedItemChangeBound),this._onPagingLimitBound=h.bind(this._onPagingLimit,this),this.addEventListener("paginglimit",this._onPagingLimitBound)},_onSelectedItemChange:function(e){e.index+g>=this._totalItems-1&&this.getMoreItems()},_onPagingLimit:function(){var e=this;!1===this.getMoreItems({onComplete:function(){e.pixelScroll(-1)}})&&this.unsetPagingScrollOffset()},getMoreItems:function(t){var i=this,n=this._carousel,e=this.getDataItem();if(t=t||{},!e.hasMoreItems()||e.isGettingMoreItems())return!!e.hasMoreItems()&&void 0;e.getMoreItems().then(function(e){new l(new c(this._opts),e.getItems()).appendAllTo(n),n.setWidgetLengths(_),n.recalculate(),i._totalItems+=e.getItems().length,t.onComplete&&t.onComplete()})},setDataItem:function(e){var t=this._carousel;this._super(e),this._label.setText(e.getLabel()),new l(new c(this._opts),e.getItems()).appendAllTo(t),this._totalItems=e.getItems().length,t.setWidgetLengths(_),this.setPagingScrollOffset(g*_),0===this._totalItems&&(this._label.isRendered()||this._label.render(n),this._label.hide())},getCurrentScrollOffset:function(){return this._carousel.getCurrentScrollOffset()},getMaximumOffset:function(){return this._carousel.getMaximumOffset()},getOffsettedIndex:function(){var e=parseInt(this._carousel.getMask().getWidgetStrip().outputElement.style.left,10)||0;return Math.abs(e/_)},setOffsettedWidgetIndex:function(e){var t=this._carousel;t.setActiveIndex(e),t._aligner._lastAlignIndex=e},getActiveChildWidgetIndex:function(){return this._carousel.getActiveChildWidgetIndex()},getChildWidgetCount:function(){return this._carousel.getChildWidgetCount()},render:function(e){var t=this._super(e),i=this;return setTimeout(function(){i.scrollSetupSimple({carousel:i._carousel})},0),t},dispose:function(){this.scrollCleanup(),this.removeEventListener("selecteditemchange",this._onSelectedItemChangeBound),this._super()}})}),define("application/widgets/browse/rows/slider",["rofl/widgets/container","antie/widgets/horizontallist","rofl/widgets/carousel","rofl/widgets/label","rofl/widgets/button","rofl/widgets/carousel/aligners/natural","application/widgets/carousel/handlers/alignfirstnokeyshandler","antie/widgets/carousel/binder","application/formatters/slider","application/widgets/browse/rows/dots","rofl/lib/utils","rofl/lib/l10n","application/managers/event","application/managers/event/list","antie/runtimecontext"],function(e,a,l,c,u,d,h,r,s,g,p,t,f,i,n){"use strict";var o=t.getInstance(),_=n.getCurrentApplication().getLayout().modifier;return e.extend({init:function(){var e,t,i,n,r,s,o;this._super(),this._slideDelay=5e3,this._animDuration=400,this._autoSlide=!1,this._isMultiItem=!1,this._horList=null,this._eventManager=f.getInstance(),this.addClass("sliderContainer"),o=new g,(r=new u).addClass("slideButton"),n=new c("","",["icon","arrow-right"]),r.appendChildWidget(n),(s=new u).addClass("actionButton"),t=new l(null,l.orientations.HORIZONTAL),e=new d(t.getMask()),i=new h,e.setNumberOfItemsVisibleOnScreen(1),t.addClass("slider"),i.attach(t),t.setAligner(e),this._horList=new a,this._horList.addClass("sliderControls"),this._actionButton=s,this._slideButton=r,this._dots=o,this._carousel=this.appendChildWidget(t),this._slideButton.addEventListener("select",p.bind(this.nextSlide,this)),this._actionButton.addEventListener("select",p.bind(this._actionButtonSelected,this)),this._carousel.addEventListener("focus",p.bind(this._redirectFocus,this)),this._carousel.addEventListener("select",p.bind(this._stopSelect,this)),this._carousel.addEventListener("selecteditemchange",p.bind(this._setActiveDot,this)),this._carousel.addEventListener("afteralign",p.bind(this._afteralign,this)),this.addEventListener("focus",p.bind(this.onFocus,this)),this.addEventListener("blur",p.bind(this.onBlur,this))},setSlideDelay:function(e){this._slideDelay=e},setAnimDuration:function(e){this._animDuration=e},setDataItem:function(e){var t=this._carousel,i=this._dots,n=e.getItems().slice(0);this._super(e),i.setQuantity(n.length),i.setActive(0),1<n.length&&(this._isMultiItem=!0),new r(new s({type:e.getType()}),n).appendAllTo(t),t.setWidgetLengths(Math.round(1190*(_||1))),this._updateActionButton(this._carousel.getActiveChildWidget().getDataItem()),this._isMultiItem?(this.appendChildWidget(this._dots),this._horList.appendChildWidget(this._slideButton),this._horList.appendChildWidget(this._actionButton),this.appendChildWidget(this._horList),this.startAutoSlide()):(this._horList.appendChildWidget(this._actionButton),this.appendChildWidget(this._horList),this._actionButton.removeClass("actionButton"),this._actionButton.addClass("actionButtonStatic"))},onFocus:function(e){e.target===this&&this._isMultiItem&&this.stopAutoSlide()},onBlur:function(e){e.target===this&&this._isMultiItem&&this.startAutoSlide()},_redirectFocus:function(){this._actionButton.focus()},_stopSelect:function(e){e.stopPropagation()},_setActiveDot:function(){this._dots.setActive(this.getActiveChildWidgetIndex())},getOffsettedIndex:function(){return this.getActiveChildWidgetIndex()},setOffsettedWidgetIndex:function(){},getActiveChildWidgetIndex:function(){return this._carousel.getActiveChildWidgetIndex()},getChildWidgetCount:function(){return this._carousel.getChildWidgetCount()},nextSlide:function(){var t=(this.getActiveChildWidgetIndex()+1)%this.getChildWidgetCount(),i=this._animDuration,n=this;this.setOffsettedWidgetIndex(t),this._carousel.alignToIndex(t,{skipAnim:!1,duration:i,easing:"easeInOut",fps:60}),this._actionButton.hide({duration:i/2,onComplete:function(){var e=n._carousel.getChildWidgetByIndex(t).getDataItem();n._updateActionButton(e),n._actionButton.show({duration:i/2})}})},startAutoSlide:function(){var e=this;clearTimeout(this._autoSlideTimeout),this._autoSlide=!0,this._autoSlideTimeout=setTimeout(function(){e.nextSlide()},this._slideDelay)},stopAutoSlide:function(){this._autoSlide=!1,clearTimeout(this._autoSlideTimeout)},_updateActionButton:function(e){var t,i;t={label:"play",icon:"play"},this._actionButton.removeChildWidgets(),i=new c("","",["icon",t.icon]),this._actionButton.appendChildWidget(i),i=new c("",o.get("actionmenu."+t.label),["action"]),this._actionButton.appendChildWidget(i),this._actionButton.setDataItem(e)},_afteralign:function(){var e=this;this.getActiveChildWidgetIndex()===this.getChildWidgetCount()-1&&(this.setOffsettedWidgetIndex(0),this._carousel.alignToIndex(0,{skipAnim:!0})),this._updateActionButton(this._carousel.getActiveChildWidget().getDataItem()),clearTimeout(this._autoSlideTimeout),this._autoSlide&&(this._autoSlideTimeout=setTimeout(function(){e.nextSlide()},this._slideDelay))},_actionButtonSelected:function(){this._eventManager.publish(i.ADDITIONAL_ACTION.HERO,{item:this._actionButton.getDataItem()})}})}),define("application/widgets/buttonround",["antie/widgets/container","rofl/widgets/button","rofl/widgets/label","rofl/lib/utils"],function(i,e,n,t){"use strict";return e.extend({init:function(e,t){this._super(e,t),this.addClass(["button-round"]),this._buttonHolder=this.appendChildWidget(new i),this._buttonHolder.addClass(["button-round-container"]),this._button=this._buttonHolder.appendChildWidget(new i),this._button.addClass(["button-round-inner"]),this._innerWidget=null,this._outerLabelShown=!1,this._label=new n,this._label.addClass("outerLabel")},addButtonClass:function(e){this._button.addClass(e)},removeButtonClass:function(e){this._button.removeClass(e)},setInnerWidget:function(e){var t=!1;return e&&(this.clearInnerWidget(),this._innerWidget=this._button.appendChildWidget(e),t=!0),t},getInnerWidget:function(){return this._innerWidget},clearInnerWidget:function(){this._innerWidget&&(this._button.removeChildWidget(this._innerWidget),this._innerWidget=null)},setOuterLabel:function(e){return!(!t.isNumber(e)&&!t.isString(e))&&(e=e.toString(),this._label.setText(e),this._outerLabelShown||""===e||(this.appendChildWidget(this._label),this._outerLabelShown=!0),this._outerLabelShown&&""===e&&(this.removeChildWidget(this._label),this._outerLabelShown=!1),!0)}})}),define("application/widgets/carousel/aligners/customalignpoints",["antie/widgets/carousel/aligners/aligner"],function(e){"use strict";return e.extend({_alignPoints:null,init:function(e,t){this._super(e),this.setAlignParams(t)},setAlignParams:function(e){(e=e||{alignPoint:{initialValue:0,endValue:0}}).alignPoint.normalised?this._mask.setNormalisedAlignPoint(e.alignPoint.initialValue):this._mask.setAlignPoint(e.alignPoint.initialValue),e.widgetAlignPoint&&this._mask.setNormalisedWidgetAlignPoint(e.widgetAlignPoint.initialValue),this._alignPoints=e},setWidgetAlignParams:function(e){this._alignPoints.widgetAlignPoint=e},_align:function(e,t,i){var n=this.indexOfLastAlignRequest(),r=this._subsequentIndexInDirection(e,t);if(this._isWrap(n,r,t))throw new Error("Wrapping is not supported in the NaturalAligner");null!==r&&(this._informMaskBeforeAlign(r),this._moveNormally(r,i))},_moveNormally:function(e,t){var i=this._mask,n=this._alignPoints,r=this._mask.getWidgetStrip().getActiveChildWidgetIndex();r<e?(n.alignPoint.normalised?i.setNormalisedAlignPoint(n.alignPoint.initialValue):i.setAlignPoint(n.alignPoint.initialValue),n.widgetAlignPoint&&i.setNormalisedWidgetAlignPoint(n.widgetAlignPoint.initialValue)):e<r&&(n.alignPoint.normalised?i.setNormalisedAlignPoint(n.alignPoint.endValue):i.setAlignPoint(n.alignPoint.endValue),n.widgetAlignPoint&&i.setNormalisedWidgetAlignPoint(n.widgetAlignPoint.endValue)),this._super(e,t)}})}),define("application/widgets/carousel/aligners/middle",["antie/widgets/carousel/aligners/aligner","rofl/lib/utils","antie/events/event"],function(o,a,l){"use strict";return o.extend({init:function(e,t){t=t||{},this._super(e),this._triggerPagingEvent=t.triggerPagingEvent},setNumberOfItemsVisibleOnScreen:function(e){this._itemsOnScreen=e,this._middlePosition=Math.floor(e/2)},_align:function(e,t,i){var n=this._mask.getWidgetStrip().getActiveChildWidgetIndex(),r=t===o.directions.FORWARD?e.indexAfter(n):e.indexBefore(n),s=this._itemsOnScreen%2==0;if(this._isWrap(n,r))throw new Error("Wrapping is not supported in the MiddleAligner");a.isNumber(r)&&(this._informMaskBeforeAlign(r),r+1>this._middlePosition&&r<e.indexCount()-this._middlePosition+(s?1:0)&&(this._mask.setNormalisedAlignPoint(.5),this._mask.setNormalisedWidgetAlignPoint(s?0:.5),this._moveNormally(r,i),this._triggerPagingEvent&&r===e.indexCount()-3-this._middlePosition+(s?1:0)&&this._mask.getWidgetStrip().bubbleEvent(new l("paginglimit"))),this._informMaskAfterAlign(r))}})}),define("application/widgets/carousel/aligners/noalign",["antie/widgets/carousel/aligners/aligner","rofl/lib/utils"],function(r,s){"use strict";return r.extend({_align:function(e,t){var i=this._mask.getWidgetStrip().getActiveChildWidgetIndex(),n=t===r.directions.FORWARD?e.indexAfter(i):e.indexBefore(i);s.isNumber(n)&&(this._informMaskBeforeAlign(n),this._informMaskAfterAlign(n))}})}),define("application/widgets/carousel/handlers/alignfirstnokeyshandler",["antie/widgets/carousel/keyhandlers/alignfirsthandler"],function(e){"use strict";return e.extend({_addKeyListeners:function(){}})}),define("application/widgets/clock",["antie/runtimecontext","rofl/lib/utils","rofl/widgets/label","rofl/lib/date"],function(e,i,t,n){"use strict";var r=e.getCurrentApplication(),s=r.__("dates.months"),o=r.__("dates.days");return"dates.months"===s&&(s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),"dates.days"===o&&(o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),t.extend({_timeout:null,init:function(){this._super(""),this.addClass("clock")},start:function(){var e;null===this._timeout&&(e=6e4-(new Date).getTime()%6e4,this._timeout=window.setTimeout(i.bind(function(){this.stop(),this.update()},this),e))},stop:function(){window.clearTimeout(this._timeout),this._timeout=null},update:function(){var e,t=n.getDate();e=i.formatTemplate("{{day}} {{date}} {{month}} | {{hour}}:{{min}}",{day:o[t.getDay()],date:t.getDate(),month:s[t.getMonth()],hour:this._formatNumber(t.getHours()),min:this._formatNumber(t.getMinutes())}),this.setText(e),this.start()},_formatNumber:function(e){return e<10?"0"+e:e}})}),define("application/widgets/countdown",["antie/runtimecontext","rofl/lib/utils","rofl/widgets/label","antie/events/event"],function(e,t,i,n){"use strict";return i.extend({init:function(){this._super("")},setRemainingSeconds:function(e){this._remainingSeconds=e},setCustomText:function(e){this._customText=e,this.setText(e)},start:function(){var e=this;this._interval||0===this._remainingSeconds||(this._interval=setInterval(function(){e.update(),e._remainingSeconds--},1e3))},stop:function(){clearInterval(this._interval),this._interval=null,this.setText(this._customText)},update:function(){var e;e=t.formatTemplate("{{customText}} {{seconds}}{{ellipsis}}",{customText:this._customText||"",seconds:this._remainingSeconds,ellipsis:"..."}),this.setText(e),0===this._remainingSeconds&&(this.stop(),this.bubbleEvent(new n("countdown.finished")))}})}),define("application/widgets/detail/actionbutton",["antie/widgets/button"],function(e){"use strict";return e.extend({})}),define("application/widgets/detail/actionmenu",["antie/widgets/horizontallist","application/formatters/detail/actionbutton"],function(e,t){"use strict";return e.extend({init:function(e){this._super("actionmenu",new t,e)},reset:function(){this.removeChildWidgets()}})}),define("application/widgets/detail/info",["antie/widgets/container","antie/widgets/image","antie/widgets/label","rofl/lib/promise","rofl/lib/utils","application/widgets/textscroller","application/widgets/rating/rating","application/widgets/likes/likes","smart-ott-models/assets/movie","smart-ott-models/assets/serie","smart-ott-models/assets/episode","smart-ott-models/assets/broadcast","smart-ott/config","antie/runtimecontext"],function(l,c,u,a,s,d,h,g,o,p,f,t,_,e){"use strict";var m=_.getItemRatingType(),i=e.getCurrentApplication().getLayout().modifier,n={WIDTH:Math.round(480*(i||1)),HEIGHT:Math.round(285*(i||1))};return l.extend({init:function(e){this._title=null,this._image=null,this._meta=null,this._rating=null,this._likes=null,this._description=null,this._options=e||{},this._width=e.width||n.WIDTH,this._height=e.height||n.HEIGHT,this._asset=null,this._super(e.id||"detail-info"),this._buildInfo(e),this.onImageErrorBound=s.bind(this.onImageError,this)},_buildInfo:function(e){var t,i,n,r,s,o=this._image=new c("",null,{width:this._width,height:this._height},{bindListenersOnRender:!1}),a=this._infoContainer=new l("info-container");e.showImage&&this.appendChildWidget(o),(n=this._title=new u("")).addClass("title"),a.appendChildWidget(n),(r=this._meta=new u("")).addClass("meta"),a.appendChildWidget(r),m===_.ItemRatingType.stars?(t=this._rating=new h,a.appendChildWidget(t)):m===_.ItemRatingType.likes&&((i=this._likes=new g).addClass("likeCounter"),a.appendChildWidget(i)),s=e.scrollable?new d:new u(""),(this._description=s).addClass("description"),a.appendChildWidget(s),this.appendChildWidget(a)},_formatMeta:function(e){return(e=e.filter(function(e){return void 0!==e}))&&0!==e.length?s.isArray(e)&&1<e.length?e.join(" | "):e:""},setData:function(e){var t,i,n=this._asset=e.asset,r=[];this._description instanceof u&&this.setTruncation(e.truncation),this._options.showImage&&this.setImage(n.getImage(),this.getFallback(n)),n.getCategories&&(s.isEmpty(n.getCategories())||r.push(n.getCategories())),n.getReleaseYear&&n.getReleaseYear()&&r.push(n.getReleaseYear()),n.getParentalRating&&n.getParentalRating()&&r.push(n.getParentalRating()),n.getDuration&&n.getDuration()&&r.push((i=n.getDuration())+(1===i?" minute":" minutes")),this.setTitle(n.getLongTitle&&n.getLongTitle()||n.getLabel()),this.setMeta(r,n.getBroadcastDateStr&&n.getBroadcastDateStr()),n instanceof p?this.setDescription(n.getDescription&&n.getDescription(),""):n instanceof o?this.setDescription(n.getLongDescription&&n.getLongDescription(),""):this.setDescription(n.getDescription&&n.getDescription(),n.getLongDescription&&n.getLongDescription()),s.isFunction(n.getRating)&&this.setRating(n.getRating()),s.isFunction(n.getLikes)&&this.setLikes(n.getLikes()),t=n instanceof o||n instanceof f,this._rating&&this._rating.outputElement&&this._rating.setStyleTo("display",t?"block":"none"),this._likes&&this._likes.outputElement&&this._likes.setStyleTo("display",t?"block":"none")},getFallback:function(e){return e instanceof t?e.getChannel().getImage(n.WIDTH,n.HEIGHT):a.resolve(_.getLogo())},setTruncation:function(e){var t=this._description;e&&(t.setTruncationMode(e.alignment||u.TRUNCATION_MODE_RIGHT_ELLIPSIS),t.setMaximumLines(e.maximumLines),t.setWidth(Math.round((i||1)*e.width)))},onImageError:function(){var t=this,e=this.getFallback(this._asset);this._image._imageElement.removeEventListener("error",this.onImageErrorBound),e.then(function(e){t._image.setSrc(e),t._image.addClass("fallback")})},setImage:function(e,t){var i,n,r=this._image,s=this,o=this._asset.getId();n=function(){t.then(function(e){o===s._asset.getId()&&(r.setSrc(e),r.addClass("fallback"))})},e instanceof a?e.then(function(e){if(null==e)return n();i=r._imageElement,o===s._asset.getId()&&(r.setSrc(e),r.removeClass("fallback")),i.addEventListener("error",s.onImageErrorBound),i.addEventListener("load",function e(){i.removeEventListener("error",s.onImageErrorBound),i.removeEventListener("load",e)})}).catch(n):n()},setTitle:function(e){this._title.setText(e||"")},setMeta:function(e,t){var i=this._formatMeta(e);t?this._meta.setText(t+(i?"<br />"+i:"")):this._meta.setText(i)},setRating:function(e){this._rating&&this._rating.setData(e)},setLikes:function(e){this._likes&&this._likes.setData(e)},setDescription:function(e,t){e?this._description.setText(e+(t?"<br />"+t:"")):this._description.setText(t||"")},hideInfo:function(){var e=this._infoContainer;e.isRendered()&&e.setStyleTo("display","none")},showInfo:function(){var e=this._infoContainer;e.isRendered()&&e.setStyleTo("display","block")},isTruncated:function(){return this._description.isTruncable()},destroy:function(){this._image.setSrc(""),this._title.setText(""),this._meta.setText(""),this._description.setText("")}})}),define("application/widgets/epg/item",["rofl/widgets/button"],function(e){"use strict";return e.extend({epgItem:null,hasEPGItem:function(){return null!==this.epgItem},getEPGItem:function(){return this.epgItem},setEPGItem:function(e){this.epgItem=e}})}),define("application/widgets/epg/programrow",["rofl/lib/utils","rofl/widgets/button","rofl/widgets/label","rofl/widgets/container","application/widgets/utils/progress","rofl/lib/l10n","rofl/lib/date.format"],function(e,t,u,d,h,i){"use strict";var g=["menu-container"],n=i.getInstance(),r=n.has("time.format")?n.get("time.format"):"H:i";return t.extend({_dataItem:null,init:function(e){this._super(e||""),this.addClass("program-item")},setEpgItem:function(e){var t,i,n,r,s,o,a,l,c;n=(t=e||{})&&t.getChannel()||{},(i=new d("program"+n.getId())).addClass(g),(r=new u(t.getLabel())).addClass(["now","program-title"]),i.appendChildWidget(r),s=t.getStartDate(),o=t.getEndDate(),(a=new u(this._formatTimeLabel(s,o))).addClass("program-time"),i.appendChildWidget(a),(c=this._percentProgress(s,o))&&(l=new h("progress-"+t.getId(),c),i.appendChildWidget(l)),this.appendChildWidget(i),this.setDataItem(e)},_formatTimeLabel:function(e,t){return e.format(r)+" - "+t.format(r)},_percentProgress:function(e,t){var i,n=Date.now(),r=e.getTime(),s=t.getTime();return r<n&&n<s&&(i=(n-r)/(s-r)*100),i},updateProgress:function(e,t){},hasDataItem:function(){return null!==this._dataItem},getDataItem:function(){return this._dataItem},setDataItem:function(e){this._dataItem=e}})}),define("application/widgets/epgmenu",["rofl/widgets/carousel","antie/widgets/container","antie/widgets/carousel/keyhandlers/activatefirsthandler","application/widgets/carousel/aligners/middle","antie/widgets/carousel/binder","antie/runtimecontext","antie/widgets/verticallist","rofl/lib/utils","application/formatters/epg/epgitem","smart-ott-models/menu/action","smart-ott-models/menu/item","smart-ott/resolver","rofl/lib/promise","rofl/events/broadcastevent","application/events/epgmenuevent","rofl/decorators/pointer","rofl/decorators/scrollable","application/managers/action","application/managers/event"],function(r,e,s,o,n,t,i,a,l,c,u,d,h,g,p,f,_,m,v){"use strict";return e.extend({_activeMenuItem:null,_carousel:null,init:function(e){var t=new s,i=this._carousel=new r(null,r.orientations.VERTICAL),n=new o(i.getMask());this._super(e),n.setNumberOfItemsVisibleOnScreen(7),t.attach(i),t.setAnimationOptions({duration:250,easing:"easeInOut",skipAnim:!1,fps:60}),i.setAligner(n),i.setMaskLength(630),this.appendChildWidget(i),this._onSelectBound=a.bind(this._onSelect,this),this.addEventListener("select",this._onSelectBound),this.addClass("menu-list"),this.decorate([f,_])},removeAll:function(){this._carousel.removeAll()},setData:function(e){var t=new n(new l,e),i=this._carousel;i.removeChildWidgets(),t.appendAllTo(i),i.setAlignPoint(.5),i.setNormalisedWidgetAlignPoint(.5),i.setActiveChildIndex(0),i.focus(),i.outputElement&&i.alignToIndex(0)},render:function(e){var t=this._super(e),i=this;return this.rendered?i.scrollSetupSimple({carousel:i._carousel}):(this.rendered=!0,setTimeout(function(){i.scrollSetupSimple({carousel:i._carousel})},0)),t},dispose:function(){this.scrollCleanup(),this.super()},_onSelect:function(e){var t=e.target.getEPGItem(),i=t.getChannel&&t.getChannel(),n=v.getInstance();i&&n.publish(n.eventList.INPUT.NAVIGATE,{target:i.getLabel()}),t.type===u.Types.CHANNELS?(this.getComponent().hide(),m.execute("play",{asset:t})):t.type===u.Types.GUIDE&&this.openChannelGuide(t)},openChannelGuide:function(e){var n=this;return h.all([h.resolve(e),d.retrieveEPGManager()]).then(function(e){var i=e[0];return e[1].getItems(i.getChannel().getId(),Date.now()/1e3,86400).then(function(e){var t=[];return a.each(e,function(e){null!==e&&t.push(e)}),n.bubbleEvent(new p(t.shift(),i.getChannel().getId()))})})}})}),define("application/widgets/faq/item",["antie/widgets/button","antie/widgets/label","antie/events/keyevent","application/formatters/faq/item","rofl/lib/utils"],function(e,t,i,n,r){"use strict";var s=new n;return e.extend({_label:null,_component:null,_questions:null,_formattedQuestions:null,_type:null,_text:null,_title:null,init:function(e,t){this._super(e.id||""),"faq"===e.key?this._questions=e.questions:(this._title=e.text.title,this._text=e.text.text),this._type=e.key,this._name=e.name,this._component=t,this.addEventListener("select",r.bind(this.onSelect,this)),this.addEventListener("keydown",r.bind(this.onKeyDown,this)),this._build()},_build:function(){var e;this.addClass("section"),this.appendChildWidget(new t(this._name)),(e=new t("")).addClass(["arrow-right","icon"]),this.appendChildWidget(e)},onSelect:function(){this.updateComponent()},onKeyDown:function(e){e.keyCode===i.VK_RIGHT&&(e.stopPropagation(),this.updateComponent())},updateComponent:function(){this._component.setType(this._type),"faq"===this._type?this.showQuestions():this.showText()},showQuestions:function(){var e,t,i=this._formattedQuestions,n=this._questions;if(i)this.appendQuestions(i);else{for(i=[],e=0,t=n.length;e<t;e++)i.push(s.format(n[e],this._component));this.appendQuestions(i)}},appendQuestions:function(e){var t,i,n=this._component,r=n.getQuestionsContainer();for(r.removeChildWidgets(),t=0,i=e.length;t<i;t++)r.appendChildWidget(e[t]);n.showQuestions(),n.hideText(),r.setActiveChildIndex(0),r.focus()},showText:function(){this._component.hideQuestions(),this._component.setText(this._title,this._text)}})}),define("application/widgets/faq/question",["antie/widgets/button","antie/events/keyevent","rofl/lib/utils"],function(e,t,i){"use strict";return e.extend({_component:null,_answer:null,_title:null,init:function(e,t){this._super(e.id||""),this._component=t,this._title=e.title,this._text=e.text,this.addEventListener("select",i.bind(this.onSelect,this)),this.addEventListener("keydown",i.bind(this.onKeyDown,this)),this._build()},_build:function(){this.addClass("question-item")},onSelect:function(){this.setText()},onKeyDown:function(e){e.keyCode===t.VK_RIGHT&&(this.setText(),e.stopPropagation())},setText:function(){this._component.setText(this._title,this._text)}})}),define("application/widgets/friendInfo",["rofl/widgets/container","rofl/widgets/carousel","rofl/widgets/label","rofl/widgets/image"],function(n,e,r,s){"use strict";return n.extend({init:function(e){var t,i;this._super(),(e=e||{}).width=e.width||100,e.height=e.height||100,this._opts=e,this._super("friend-info"),t=new n("friend-name"),i=new n,t.addClass("friend-name"),i.addClass("friend-state"),this._friendAvatar=this.appendChildWidget(new s("","",e,{bindListenersOnRender:!1})),this._friendName=t.appendChildWidget(new r("",["friend-name"])),this._state=i.appendChildWidget(new r("",["icon","circle"])),this._firendState=i.appendChildWidget(new r("",["friend-state-label"])),this.appendChildWidget(t),this.appendChildWidget(i)},setDataItem:function(e){this._super(e),e.isOnline()?(this._state.addClass("online"),this._firendState.setText("Online")):(this._state.addClass("offline"),this._firendState.setText("Offline - Last seen 09/08/2016")),this._friendAvatar.setSrc(e.getProfileImage()),this._friendName.setText(e.getFirstName()+" "+e.getLastName())}})}),define("application/widgets/guidecarousel",["rofl/widgets/carousel","antie/widgets/carousel/keyhandlers/alignfirsthandler","antie/widgets/carousel/binder","antie/runtimecontext","rofl/lib/utils","application/formatters/epg/guideitem","application/utils/routing","application/widgets/carousel/aligners/middle","rofl/decorators/pointer","rofl/decorators/scrollable","application/managers/event","smart-ott/resolver","smart-ott/config"],function(n,r,s,o,a,l,c,u,d,h,g,e,p){"use strict";var f=o.getCurrentApplication().getDevice().getLogger();return n.extend({_activeMenuItem:null,init:function(e){var t,i=new r;this._super(e,n.orientations.VERTICAL),i.attach(this),i.setAnimationOptions({duration:250,easing:"easeInOut",skipAnim:!1,fps:60}),(t=new u(this.getMask(),{triggerPagingEvent:!0})).setNumberOfItemsVisibleOnScreen(8),this.setAligner(t),this.setNormalisedAlignPoint(.5),this.setNormalisedWidgetAlignPoint(.5),this.setMaskLength(710),this._onSelectBound=a.bind(this._onSelect,this),this._onGetMoreItemsBound=a.bind(this._onGetMoreItems,this),this.addEventListener("select",this._onSelectBound),a.getNested(p._getSmartTV(),"features","dynamicepg")&&this.addEventListener("paginglimit",this._onGetMoreItemsBound),this.addClass("menu-list"),this.decorate([d,h]),this.setPagingScrollOffset(200),this._formatter=new l},setData:function(e,t){var i=new s(this._formatter,e),n=this;this._lastItem=e[e.length-1],t&&(this._channelId=t),this.removeChildWidgets(),i.appendAllTo(this),this.outputElement||this.render(o.getDevice()),this.rendered?n.scrollSetupSimple({carousel:n}):(this.rendered=!0,setTimeout(function(){n.scrollSetupSimple({carousel:n})},0))},appendData:function(e){var t=new s(this._formatter,e);e&&(this._lastItem=e[e.length-1],t.appendAllTo(this),this.outputElement||this.render(o.getDevice()))},_onSelect:function(e){var t=g.getInstance(),i=e.target.getDataItem&&e.target.getDataItem();i&&t.publish(t.eventList.INPUT.NAVIGATE,{target:i.getId()}),c.routeToAsset(i)},_onGetMoreItems:function(){var t,i=this,n=this._lastItem.getEndTime()+60;this._loading||(this._loading=!0,e.retrieveEPGManager().then(a.bind(function(e){return e.getItems(i._channelId,n,43200).then(a.bind(function(e){(t=e[i._channelId])&&t.length?i.appendData(t):f.debug("No more EPG data are available."),this._loading=!1},this))},this)).catch(a.bind(function(e){this._loading=!1,f.error("Loading additional EPG data has failed",e)},this)))},dispose:function(){this.scrollCleanup(),this._super()}})}),define("application/widgets/header",["antie/widgets/container","rofl/lib/promise","rofl/widgets/image","smart-ott/config","application/widgets/clock"],function(e,t,i,n,r){"use strict";return e.extend({init:function(e){this._super(e),this._buildWidget()},show:function(e){this._clock.update(),this._super(e||{skipAnim:!0})},hide:function(e){this._clock.stop(),this._super(e||{skipAnim:!0})},_buildWidget:function(){var e=this._image=new i("","",{},{bindListenersOnRender:!1}),t=this._clock=new r;e.setSrc(n.getLogo()),this.addClass(["header-widget"]),this.appendChildWidget(t),this.appendChildWidget(e)}})}),define("application/widgets/likes/likes",["antie/widgets/horizontallist","antie/widgets/container","rofl/lib/utils","rofl/widgets/label","rofl/widgets/button"],function(e,i,t,n,r){"use strict";return e.extend({init:function(e){this._super(e&&e.id||""),this.likesBtn="",this._buildLikes()},_buildLikes:function(){var e,t=new i;this.likesBtn=new r("likesBtn"),this.likesBtn.isFocusable=function(){return!1},(e=new i).addClass(["icon","like"]),this.likesBtn.addClass(["button","button-block","button-primary"]),this.appendChildWidget(t),t.appendChildWidget(this.likesBtn),this.likesBtn.appendChildWidget(e)},setData:function(e){t.isUndefined(e)&&(e=0),this.label&&this.likesBtn.removeChildWidget(this.label),this.label=new n(e),this.likesBtn.appendChildWidget(this.label)}})}),define("application/widgets/loader",["antie/runtimecontext","rofl/lib/utils","rofl/widgets/button"],function(r,t,e){"use strict";return e.extend({init:function(e){this._super(e||"loader"),this._stopPropagationBound=t.bind(this._stopPropagation,this),this.addClass(["loader-container"]),this.addEventListener("keydown",this._stopPropagationBound),this.addEventListener("select",this._stopPropagationBound)},render:function(e){var t=this._super(e);return this.hide({skipAnim:!0}),t},_stopPropagation:function(e){e.stopPropagation()},show:function(e){var t,i=r.getDevice(),n=0;this.outputElement||this.render(i),this._hideTimeout&&window.clearTimeout(this._hideTimeout),this._animation&&window.clearInterval(this._animation),this.outputElement.innerHTML='<svg width="130px" height="130px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" stroke-dasharray="5,5" class="svg-container"><circle cx="50" cy="50" r="40" fill="none" stroke-width="6" stroke-linecap="round" class="loader"></circle></svg>',t=i.getChildElementsByTagName(this.outputElement,"svg")[0],this._animation=window.setInterval(function(){n+=10,t.style.strokeDashoffset=Math.round(.251*n)+"px",t.style.strokeDasharray=n<=1e3?Math.max(1,150-.15*n)+"px ,"+(100+.15*n)+"px":1+.15*(n-1e3)+"px ,"+(250-.15*(n-1e3))+"px",2e3<=n&&(n=0)},10),this._super(e||{})},hide:function(e){e=e||{},this._super(e),this._hideTimeout&&window.clearTimeout(this._hideTimeout),this._animation&&window.clearInterval(this._animation),this._hideTimeout=window.setTimeout(t.bind(function(){this.outputElement.innerHTML=""},this),e.duration||500)},isFocusable:function(){var e;return(!this.outputElement||"hidden"!==(e=this.outputElement.style).visibility&&0!==e.opacity&&"none"!==e.display)&&this._super()}})}),define("application/widgets/menu",["antie/runtimecontext","antie/widgets/verticallist","rofl/lib/utils","application/formatters/menu/item","smart-ott-models/menu/action","smart-ott-models/menu/item","rofl/events/keyevent","rofl/decorators/pointer"],function(e,t,r,i,s,o,n,a){"use strict";var l=e.getCurrentApplication();return t.extend({_activeMenuItem:null,init:function(e){this._super(e,new i),this.addClass("menu-list"),this._onSelectBound=r.bind(this._onSelect,this),this._onBlurBound=r.bind(this._onBlur,this),this.addEventListener("select",this._onSelectBound),this.addEventListener("blur",this._onBlurBound),this.decorate([a])},setDataSource:function(e){var t;this._super(e),(t=this.getActiveChildWidget()).addClass("activated"),this._activeMenuItem=t},isFocusable:function(){return l.isMenuAllowed()},setActivatedItem:function(e){var t=e.getMenuItem();~r.indexOf([o.Types.CHANNELS,o.Types.GUIDE],t.getType())||(this._activeMenuItem&&this._activeMenuItem.removeClass("activated"),e.addClass("activated"),this._activeMenuItem=e)},_onSelect:function(e){var t=e.target,i=t.getMenuItem(),n=i.getAction();n instanceof s&&(n.prepare().then(function(){l.route(n.getRoute(),n.getArguments())}),~r.indexOf([o.Types.CHANNELS,o.Types.GUIDE],i.getType())||(this._activeMenuItem=t),this.setActivatedItem(t),e.stopPropagation())},_onBlur:function(e){var t=this._activeMenuItem;e.target===this&&(t?this.setActiveChildWidget(t):this.setActiveChildIndex(0))},_onKeyDown:function(e){switch(this._super(e),e.keyCode){case n.VK_BACK:case n.VK_LEFT:l.getComponent("main").focus(),e.stopPropagation()}},render:function(e){var t=this._super(e);return this.initPointerHandlers(),t},_getMenuContainers:function(){return[this,this.getComponent(),this.getComponent().parentWidget]},_onMouseEnterHandler:function(){r.each(this._getMenuContainers(),function(e){e.addClass("hover")})},_onMouseLeaveHandler:function(){r.each(this._getMenuContainers(),function(e){e.removeClass("hover")})},_onPointerOffHandler:function(){r.each(this._getMenuContainers(),function(e){e.removeClass("hover")})},dispose:function(){this.destroyPointerHandlers(),this._super()}})}),define("application/widgets/menu/item",["rofl/widgets/button"],function(e){"use strict";return e.extend({_menuItem:null,hasMenuItem:function(){return null!==this._menuItem},getMenuItem:function(){return this._menuItem},setMenuItem:function(e){this._menuItem=e}})}),define("application/widgets/menu/items/account",["antie/runtimecontext","antie/widgets/container","antie/widgets/label","rofl/lib/utils","application/managers/session","application/widgets/menu/item","application/widgets/avatar"],function(e,n,r,t,i,s,o){"use strict";var a=e.getCurrentApplication();return s.extend({init:function(){this._super(),this._buildWidget(),this._sessionChangedBound=t.bind(this._sessionChanged,this),a.addEventListener("$!sessionstatuschanged",this._sessionChangedBound)},dispose:function(){a.removeEventListener("$sessionstatuschanged",this._sessionChangedBound)},setMenuItem:function(e){this._super(e),i.hasSession()&&i.isLoggedIn()||this._label.setText(e.getLabel())},_buildWidget:function(){var e=new n,t=this._avatar=new o,i=this._label=new r("&nbsp;");i.addClass("menu-label"),e.addClass(["initials-item"]),e.appendChildWidget(t),this.appendChildWidget(e),this.appendChildWidget(i)},_sessionChanged:function(e){var t,i;if(!e.loggedIn)return this._avatar.setDataItem(null),void((i=this.getMenuItem())&&this._label.setText(i.getLabel()));t=e.session.getIdentity(),this._avatar.setDataItem(t),this._label.setText(t.getFirstName())}})}),define("application/widgets/menu/items/watchlist",["antie/runtimecontext","antie/widgets/container","rofl/lib/utils","application/managers/session","application/widgets/menu/item"],function(e,t,i,n,r){"use strict";var s=e.getCurrentApplication();return r.extend({init:function(){this._super(),this._sessionChangedBound=i.bind(this._sessionChanged,this),s.addEventListener("$!sessionstatuschanged",this._sessionChangedBound)},dispose:function(){s.removeEventListener("$sessionstatuschanged",this._sessionChangedBound)},setMenuItem:function(e){this._super(e)},_sessionChanged:function(e){var t;(t=this.getMenuItem())&&(e.loggedIn?t.show({skipAnim:!0}):t.hide({skipAnim:!0}))}})}),define("application/widgets/pin",["rofl/widgets/input","rofl/widgets/label","antie/events/event","rofl/widgets/button","rofl/lib/utils"],function(i,n,r,e,s){"use strict";return e.extend({init:function(e){var t=this;(e=e||{}).id=e.id||"",this._super(e.id),this._minLength=e.minLength,this._maxLength=e.maxLength,this.addClass(["input","pin"]),e.id="",this._input=new i("password",e),this.appendChildWidget(this._input),this._input._onKeyboardTextChange=function(e){t.setValue(e.text)},this._labels=[]},setLimits:function(e){void 0!==e.min&&(this._minLength=e.min),void 0!==e.max&&(this._maxLength=e.max,this._updateLabels())},getValue:function(){return this._input.getValue()},setValue:function(e){var t;e=(""+e).substr(0,this._maxLength),this._input.setValue(e),t=this._input.getValue(),this._updateLabels(t),t.length===this._maxLength&&this.bubbleEvent(new r("pininput.full"))},setKeyboard:function(e){this._input.setKeyboard(e)},unsetKeyboard:function(){this._input.unsetKeyboard()},_updateLabels:function(e){var t,i;if(this._labels.length!==this._maxLength){for(t=0;t<this._labels.length;t++)this.removeChildWidget(this._labels[t]);for(this._labels=[],t=0;t<this._maxLength;t++)(i=new n("","")).addClass("pinBullet"),this.appendChildWidget(i),this._labels.push(i)}if(!s.isUndefined(e))for(t=0;t<this._maxLength;t++)this._labels[t].removeClass("filled"),e[t]&&this._labels[t].addClass("filled")}})}),define("application/widgets/pininput",["rofl/widgets/container","rofl/widgets/label","rofl/lib/utils"],function(i,n,r){"use strict";return i.extend({init:function(){this._super(),this.addClass("pin-input"),this._currentSlot=0},getMaxLength:function(){return this._length},setLength:function(e){var t;for(this._length=e||4,t=0;t<e;t++)this.appendSlot(t)},appendSlot:function(){var e=new n("",["circle"]),t=new i;t.addClass(["slot","empty"]),t._value="",t.appendChildWidget(e),this.appendChildWidget(t)},getFilledOutLength:function(){return this._currentSlot||0},fillSlot:function(e){var t;return"number"==typeof e&&(e=String.valueOf(e)),this._currentSlot<this._length&&((t=this.getChildWidgetByIndex(this._currentSlot))._value=e,t.removeClass("empty"),t.addClass("highlighted"),this._currentSlot++),this.getFilledOutLength()},cleanSlot:function(){var e;return this._currentSlot&&(this._currentSlot--,(e=this.getChildWidgetByIndex(this._currentSlot))._value="",e.addClass("empty"),e.removeClass("highlighted")),this.getFilledOutLength()},cleanInput:function(){for(var e=this.getFilledOutLength();e;)e=this.cleanSlot()},getPinCode:function(){var e=this.getChildWidgets(),t="";return r.each(e,function(e){t+=e._value}),t}})}),define("application/widgets/player/bingebar",["antie/widgets/container","antie/widgets/horizontallist","application/widgets/browse/item","rofl/lib/utils","rofl/widgets/label","antie/widgets/carousel/binder","application/formatters/bingebar/row","rofl/lib/l10n"],function(a,l,c,o,u,s,d,h){"use strict";var g="Recommended";return a.extend({init:function(e){this._super(e),this._buildWidget()},show:function(e){var t=h.getInstance();e.label&&(this._endLabel.setText(t.get("player.latest-episode.text",{label:e.label})),this._endLabelContainer.addClass("show")),this._super(e||{})},hide:function(e){this._endLabelContainer.removeClass("show"),this._super(e||{})},_buildWidget:function(){var e=this._endLabelContainer=new a("end-label-container"),t=this._container=new l("player-bingebar"),i=this._upNextContainer=new a,n=this._relatedContainer=new a,r=this._upNext=new c({upNext:!0}),s=this._upNextLabel=new u,o=this._endLabel=new u;t.addClass("player-bingebar"),e.addClass("end-label"),s.addClass("upNextLabel"),r.addClass("upnext"),n.addClass("related-container"),e.appendChildWidget(o),i.appendChildWidget(s),i.appendChildWidget(r),t.appendChildWidget(i),t.appendChildWidget(n),this.appendChildWidget(e),this.appendChildWidget(t)},setData:function(e,t){var i,n=!1,r=this._upNextContainer,s=this._relatedContainer;if(t&&o.isFunction(t.getSections)&&(t=t.getSections())[0].getLabel()!==g&&t[0].setLabel(g),e?(i=h.getInstance(),this._container.insertChildWidget(0,this._upNextContainer),this._upNextLabel.setText(i.get("player.next.text")),this._upNext.setDataItem(e),r.removeClass("display-none"),s.removeClass("single"),r.focus(),n=!1):(r.addClass("display-none"),s.addClass("single"),n=!0,this._container.removeChildWidget(this._upNextContainer)),t)try{this._setRelatedContent(t,e,n)}catch(e){}this._hasContent=!0,e||t||(this._hasContent=!1)},_setRelatedContent:function(e,t,i){var n=new s(new d(t?{}:{items:4}),e),r=this._relatedContainer;r.removeChildWidgets(),n.appendAllTo(r),i&&r.focus()},isFocusable:function(){return!(this.unfocusable||!this.isVisible())&&this._super()},destroy:function(){this._relatedContainer.removeChildWidgets()},hasContent:function(){return this._hasContent},disableFocus:function(){this.unfocusable=!0},enableFocus:function(){this.unfocusable=!1}})}),define("application/widgets/player/directdial",["rofl/widgets/container","rofl/widgets/label"],function(e,t){"use strict";return e.extend({init:function(){this._super(),this.addClass("directdial"),this._build()},_build:function(){this._label=this.appendChildWidget(new t(""))},setInput:function(e){this._label.setText(e)},show:function(){this._super({skipAnim:!0,duration:0})},hide:function(){this._super({skipAnim:!0,duration:0})}})}),define("application/widgets/player/header",["antie/widgets/container","rofl/lib/promise","rofl/widgets/image","rofl/widgets/label","smart-ott-models/assets/broadcast","application/widgets/clock"],function(e,r,s,o,a,l){"use strict";return e.extend({init:function(e){this._super(e||"player-header"),this._buildView()},show:function(e){this._clock.update(),this._super(e||{})},hide:function(e){this._clock.stop(),this._super(e||{})},hideMetaData:function(e){this._label.hide(e||{}),this._description.hide(e||{})},showMetaData:function(e){this._label.show(e||{}),this._description.show(e||{})},updateAsset:function(e){if(!e&&e===this._asset)return r.resolve();this._asset=e,this._updateView(e)},_setImage:function(e){e?(this._image.setSrc(e),this.removeClass("no-image")):this._hideImage()},_hideImage:function(){this.addClass("no-image")},_buildView:function(){var e=this._image=new s("","",{},{bindListenersOnRender:!1}),t=this._label=new o,i=this._description=new o,n=this._clock=new l,r=this._upcoming=new o("");e.setSize({width:100,height:50}),i.setWidth(725),i.setMaximumLines(3),i.setTruncationMode(o.TRUNCATION_MODE_RIGHT_ELLIPSIS),i.addClass("player-description"),t.addClass("title"),this.appendChildWidget(n),this.appendChildWidget(e),this.appendChildWidget(t),this.appendChildWidget(i),this.appendChildWidget(r)},_updateView:function(e){var t,i=this,n=e?e.getLongTitle&&e.getLongTitle()||e.getLabel():"";if(this._label.setText(n),this._description.setText(e&&e.getDescription()||""),e instanceof a){if(t=e.getChannel())return t.getImage(100,50).then(function(e){i._setImage(e)}).catch(function(){i._hideImage()});this._hideImage()}else this._hideImage();return r.resolve()}})}),define("application/widgets/player/liveseeker",["rofl/lib/utils","antie/runtimecontext"],function(e,t){"use strict";var i,n=t.getCurrentApplication().getConfiguration().seeker||{},r=t.getDevice().getMediaPlayer(),s=n.interval||500,o=s/1e3,a=n.steps||["2","4","8","16","32"],l=function(){this._playerStatus=null,this._onSpeedChanged=null,this._onCurrentTimeUpdated=null,this._steps=a,this._interval=null,this._currentTime=null,this._speed=null};return l.prototype={_getSpeedStep:function(){return this._steps[Math.abs(this._speed)-1]*(this._speed<0?-1:1)},_onSpeedChange:function(){var e=this._speed?this._getSpeedStep():null;if(!this._onSpeedChanged)throw"No _onSpeedChanged method defined.";this._onSpeedChanged(e)},_onCurrentTimeChange:function(){if(!this._onCurrentTimeUpdated)throw"No _onCurrentTimeUpdated method defined.";this._onCurrentTimeUpdated({relativePlaybackTime:this._relativePlaybackTime,currentTime:this._currentTime})},_stopInterval:function(){this._interval&&(clearInterval(this._interval),this._interval=null)},_onStopSeeking:function(){this._isSeeking=!1,this._stopInterval(),this._speed=null,this._onSpeedChange(),this._onCurrentTimeChange()},_onInterval:function(){var e;this._speed&&(e=1e3*Math.round(o*this._getSpeedStep()),this._relativePlaybackTime+=e,this._currentTime+=e,this._seekSteps+=e,this._onCurrentTimeChange())},_startInterval:function(){this._interval=setInterval(e.bind(this._onInterval,this),s)},_onStartSeeking:function(){this._oldPlaybackTime=this._relativePlaybackTime,this._oldCurrentTime=this._currentTime,this._seekSteps=0,r.pause(),this._startInterval(),this._isSeeking=!0},_onAfterSpeedMutation:function(){Math.abs(this._speed)<=this._steps.length?this._onSpeedChange():this.confirm()},_onBeforeSpeedMutation:function(e){(e<0&&0<this._speed||0<e&&this._speed<0)&&this._onStopSeeking(),null===this._speed&&(this._speed=0,this._onStartSeeking())},isSeeking:function(){return this._isSeeking},getCurrentStatus:function(){return r.getCurrentTime()+this._seekSteps/1e3},getSeekSteps:function(){return this._seekSteps/1e3},setSpeedSteps:function(e){this._steps=e||a},cancel:function(){this._relativePlaybackTime=this._oldPlaybackTime,this._currentTime=this._oldCurrentTime,this._onStopSeeking(),r.resume()},confirm:function(e){var t,i;e&&e!==this._currentTime&&(e=Math.round(e),t=this._currentTime-e,this._seekSteps=-t,this._relativePlaybackTime=e-this._startTime,this._currentTime=e),(i=r.getCurrentTime()+this._seekSteps/1e3)<0&&(i=0),r.playFrom(i),this._onSeek(i),this._onStopSeeking()},rewind:function(){this.canSeek()&&(this._onBeforeSpeedMutation(-1),this._speed--,this._onAfterSpeedMutation())},fastForward:function(){this.canSeek()&&(this._onBeforeSpeedMutation(1),this._speed++,this._onAfterSpeedMutation())},isActive:function(){return!!this._interval},canSeek:function(){return!!r.getSeekableRange()},detach:function(){this._stopInterval(),this._isSeeking=!1,this._onSpeedChanged=null,this._onCurrentTimeUpdated=null,this._steps=null,this._interval=null,this._currentTime=null,this._duration=null,this._speed=null},setProgramTime:function(e,t,i){this._startTime=e,this._endTime=t,this._currentTime=i,this._relativePlaybackTime=i-e},getDirection:function(){return 0<this._speed?1:-1},setCurrentTime:function(e){this._currentTime=e,this._relativePlaybackTime=e-this._startTime},attach:function(e){e=e||{},this._isSeeking=!1,this._onSpeedChanged=e.onSpeedChanged,this._onCurrentTimeUpdated=e.onCurrentTimeUpdated,this._onSeek=e.onSeek,this.setSpeedSteps(e.steps)}},function(){return i||(i=new l),i}}),define("application/widgets/player/upnext",["antie/widgets/container","application/widgets/browse/item","application/widgets/countdown","rofl/lib/utils","rofl/widgets/label","rofl/lib/l10n"],function(o,a,l,e,c,u){"use strict";return o.extend({init:function(e){this._super(e),this._buildWidget()},show:function(e){e.broadcast?this._upNextLabel.removeClass("display-none"):(this._countDown.removeClass("display-none"),this._countDown.setRemainingSeconds(e.seconds),this._countDown.start()),this._super(e||{})},hide:function(e){(e=e||{}).broadcast?this._upNextLabel.addClass("display-none"):(this._countDown.addClass("display-none"),this._countDown.stop()),this._super(e)},_buildWidget:function(){var e=this._upNextContainer=new o,t=new o,i=this._upNext=new a({upNext:!0}),n=this._upNextLabel=new c,r=this._countDown=new l,s=u.getInstance();r.setCustomText(s.get("player.next-countdown.text")),n.setText(s.get("player.next.text")),n.addClass(["upnext-label","display-none"]),t.addClass("countDown"),e.addClass("player-upnext"),t.appendChildWidget(r),t.appendChildWidget(n),e.appendChildWidget(t),e.appendChildWidget(i),this.appendChildWidget(e)},setData:function(e){var t=this._upNextContainer;e&&(this._upNext.setDataItem(e),t.focus())},isFocusable:function(){return!!this.isVisible()&&this._super()}})}),define("application/widgets/rating/rating",["antie/widgets/horizontallist","antie/widgets/container","rofl/lib/utils"],function(e,i,o){"use strict";return e.extend({init:function(e){this._starsArray=[],this._super(e&&e.id||""),this.addClass("rating"),this._starsCount=e&&e.starsCount||5,this._buildRating()},_buildRating:function(){for(var e=0;e<this._starsCount;e++){var t=new i;this._starsArray.push({star:t,currentStarClass:null}),this.appendChildWidget(t)}},setData:function(e){o.isUndefined(e)&&(e=0);var t=this._starsCount*e/100,i=Math.floor(2*(t<this._starsCount?t:this._starsCount))/2,n=Math.floor(i),r=0<i%1,s=0;for(this._starsArray.forEach(function(e){e.currentStarClass&&e.star.removeClass(e.currentStarClass)});s<n;s++)this._starsArray[s].currentStarClass="full-star",this._starsArray[s].star.addClass("full-star");r&&s<this._starsCount&&(this._starsArray[s].currentStarClass="half-star",this._starsArray[s].star.addClass("half-star"))}})}),define("application/widgets/search/info",["antie/widgets/container","smart-ott-models/assets/movie","antie/widgets/label"],function(r,c,s){"use strict";return r.extend({init:function(){this._title=null,this._meta=null,this._description=null,this._asset=null,this._super(),this.addClass("detail-info"),this._create()},_create:function(){var e,t,i,n=this._infoContainer=new r;(e=this._title=new s).addClass("title-info"),n.addClass("info-container"),n.appendChildWidget(e),(t=this._meta=new s).addClass("meta"),n.appendChildWidget(t),(i=this._description=new s).addClass("description"),n.appendChildWidget(i),this.appendChildWidget(n)},setData:function(e){var t=e.getCategories(),i=e.getDuration(),n=e.getPublishDate&&e.getPublishDate(),r=e instanceof c,s=r&&e.getLongTitle&&e.getLongTitle()||e.getLabel(),o=e.getDescription()||"",a=e.getShortDescription&&e.getShortDescription()||"",l=[];0<t.length&&l.push(t.join(", ")),n&&l.push(n),i&&l.push(i),this._title.setText(s),this._meta.setText(l.join(" | ")),this._description.setText(r?"":o&&o!==a?o+"<br />"+a:a)},hideInfo:function(){this._infoContainer.setStyleTo("display","none")},showInfo:function(){this._infoContainer.setStyleTo("display","block")}})}),define("application/widgets/search/item",["rofl/widgets/button","rofl/widgets/image","rofl/widgets/label","rofl/lib/utils","rofl/lib/promise","smart-ott/config","application/widgets/utils/progress","application/widgets/search/info","smart-ott-models/assets/serie","antie/runtimecontext","application/events/pointerhoverevent","application/events/pointeroutevent"],function(e,i,n,r,t,s,o,a,l,c,u,d){"use strict";var h=c.getCurrentApplication().getLayout().modifier,g={WIDTH:Math.round(246*(h||1)),HEIGHT:Math.round(138*(h||1))},p=c.getCurrentApplication().getDevice().getLogger();return e.extend({init:function(e){var t={onError:r.bind(this._onImageError,this),bindListenersOnRender:!1};this._super(),this.addClass("browse-item"),(e=e||{}).width=e.width||g.WIDTH,e.height=e.height||g.HEIGHT,this._size={width:e.width,height:e.height},this._image=this.appendChildWidget(new i("","",this._size,t)),this._itemTitle=this.appendChildWidget(new n("",["title"])),this._itemSubtitle=this.appendChildWidget(new n("",["subtitle"])),this._info=this.appendChildWidget(new a)},render:function(e){var t=this._super(e),i=this;return t.onmouseenter=function(){i.bubbleEvent(new u(i))},t.onmouseleave=function(){i.bubbleEvent(new d(i))},t},setDataItem:function(e){var t,i=this,n=this._size,r=e.getLongTitle&&e.getLongTitle()||e.getLabel();this._super(e),this._itemTitle.setText(r),e.getImage(n.width,n.height).then(function(e){i._image.setSrc(e)}),e instanceof l||0<(t=e.getProgress())&&(this._progress=this._info.prependWidget(new o),this._progress.setProgress(t)),this._info.setData(e)},getFallbackImage:function(){return t.resolve(s.getLogo())},_onImageError:function(){var n=this,r=this._size;this.getFallbackImage().then(function(e){var t=n._image,i=t._imageElement;t.setOnErrorCallback(n._onFallbackImageError),t.addClass("fallback"),t.setSrc(e),i.style.width=r.width,i.style.height=r.height})},_onFallbackImageError:function(){p.error("Error loading fallback image")}})}),define("application/widgets/search/searchfilter",["antie/widgets/container","antie/widgets/horizontallist","rofl/widgets/button","rofl/widgets/label","rofl/lib/utils","rofl/lib/l10n","antie/runtimecontext","antie/events/event","smart-ott/resolver"],function(e,c,u,d,h,g,p,i,f){"use strict";return e.extend({init:function(){this._super(),this.addClass("search-filter"),this._createButtons()},_createButtons:function(){var t,i,n,r,s,o=p.getCurrentApplication().getConfiguration().filterTabs,a=g.getInstance(),l=this;f.retrieveApi().then(function(e){for(s=e.getSupportedMediaTypes(),l._filterContainer=new c,t=0;t<o.length;t++)("ALL"===(r=o[t].name.toUpperCase())||s[r]&&s[r].id)&&((i=new u).setDataItem({filter:o[t]}),n=new d(a.get("filterTabs."+o[t].name)),i.appendChildWidget(n),l._filterContainer.appendChildWidget(i));l.addEventListener("select",h.bind(l._onSelect,l)),l.appendChildWidget(l._filterContainer),l.toggleButtons(!1)})},_onSelect:function(e){var t=new i("searchfilter.change");t.filter=e.target.getDataItem().filter,this.bubbleEvent(t)},show:function(e){this._super(e||{skipAnim:!0})},hide:function(e){this._super(e||{skipAnim:!0})},toggleButtons:function(t){var e=this._filterContainer.getChildWidgets();h.each(e,function(e){e.setDisabled(!t)})}})}),define("application/widgets/search/searchinput",["antie/widgets/horizontallist","rofl/widgets/container","rofl/widgets/input/text","rofl/widgets/keyboard/multi","rofl/widgets/label","antie/events/event","rofl/events/keyevent","rofl/lib/utils"],function(e,t,i,n,r,s,o,a){"use strict";return t.extend({init:function(){this._super(),this.addClass("search-input"),this._inputContainer=null,this._input=null,this._keyboard=null,this._createInput(),this._createKeyboard(this._input),this._keyboard.addEventListener("textchange",a.bind(this._onTextChange,this))},_createInput:function(){this._inputContainer=new e,this._inputContainer.addClass("search-input-wrapper"),this._inputContainer.addClass("icon"),this._inputContainer.addClass("search"),this._input=new i,this._input.addClass("search-input-field"),this._input.setDisabled(!0),this._input.setOverflowLength(42),this._inputContainer.appendChildWidget(this._input),this.appendChildWidget(this._inputContainer)},_createKeyboard:function(e){var t=this._keyboard=new n({id:"searchKeyboard",keysets:[{keys:"abcdefghijklmnopqrstuvwxyz -".toUpperCase(),swap:"abc",capitalise:!0},{keys:"0123456789 -",swap:"123",capitalise:!0},{keys:".,_!@#$%^&*()_+# -",swap:"#+-",capitalise:!0,custom:[{columnIndex:2,character:"_"},{columnIndex:13,character:"-"}]}]});t.addEventListener("keypress",a.bind(this._onKeypressHandler,this)),e.setKeyboard(t),t.getContainerList().removeChildWidget(t.getSwapList()),this.appendChildWidget(t)},_onKeypressHandler:function(e){var t=new o("keydown",e.keyCode);this._keyboard.getKeyboard().bubbleEvent(t),e.stopPropagation()},_onTextChange:function(e){var t=new s("searchinput.textchange");t.text=e.text,this.bubbleEvent(t)},focus:function(){return this._keyboard.getKeyboard().focus()},reset:function(){this._keyboard.setText("")},removeListeners:function(){this._keyboard.getKeyboard().removeEventListener("keypress",a.bind(this._onKeypressHandler,this))}})}),define("application/widgets/serie/episode",["rofl/widgets/button","rofl/widgets/label","application/widgets/utils/progress","rofl/lib/l10n","application/managers/session","application/managers/bookmarking/bookmark"],function(e,t,i,o,a,l){"use strict";return e.extend({init:function(){this._super(),this.addClass(["episode","button-primary"]),this._label=this.appendChildWidget(new t),this._progress=this.appendChildWidget(new i),this._progress.addClass("hidden")},setDataItem:function(e){var t,i=e.getEpisodeNumber(),n=e.getDescription(),r=e.getBroadcastDateStr()||e.getDescription()||e.getLabel(),s=e.getSeasonNumber();this._super(e),t=null===s?o.getInstance().get("serie.episode.linear_label",{label:r}):n&&0<n.length?o.getInstance().get("serie.episode.label",{number:i,label:n}):o.getInstance().get("serie.episode.fallback",{number:i}),this._label.setText(t),this._setProgress(e.getProgress()),a.isAnonymous()&&(e.setPosition(l.getBookmarkFromLocalStorage(e)),this._setProgress(e.getProgress()))},isFocusable:function(){return!!this.parentWidget&&this.parentWidget.isVisible()},_setProgress:function(e){"number"==typeof e&&(this._progress.setProgress(e),this._progress.removeClass("hidden"))}})}),define("application/widgets/serie/season",["rofl/widgets/container","rofl/widgets/button","rofl/widgets/label","application/formatters/serie/episode","rofl/lib/l10n","rofl/lib/utils","antie/widgets/verticallist","antie/widgets/carousel/binder","antie/runtimecontext","antie/events/keyevent","antie/events/selecteditemchangeevent"],function(e,r,s,o,a,l,c,u,t,i,d){"use strict";var h=t.getDevice();return c.extend({init:function(){var e=new r,t=new s,i=new c,n=new s("");this._super(),e.addClass(["season","button-secondary"]),i.addClass("display-none"),n.addClass("icon arrow-down"),this.addClass("episodes"),e.addEventListener("select",l.bind(this._onSelect,this)),e.addEventListener("keydown",l.bind(this._onButtonKeyDown,this)),this._button=this.appendChildWidget(e),this._label=e.appendChildWidget(t),this._icon=e.appendChildWidget(n),this._list=this.appendChildWidget(i)},setDataItem:function(e){var t,i=this._list,n=e.getSeasonNumber();this._super(e),this._button.setDataItem(e),t=null===n?a.getInstance().get("serie.season.linear_label"):a.getInstance().get("serie.season.label",{number:e.getSeasonNumber()}),this._label.setText(t),new u(new o,e.getEpisodesList()).appendAllTo(i)},getVisibleWidgetCount:function(){var e=this._list;return e.hasClass("display-none")?1:e.getChildWidgetCount()+1},getActiveWidgetCount:function(){return this._button.isFocussed()?1:this._list.getActiveChildWidgetIndex()+2},getList:function(){return this._list},_onSelect:function(e){var t=this._list,i=this._icon;e.target===this._button&&(t.hasClass("display-none")?(this._openEpisodeList(t),i.removeClass("arrow-down"),i.addClass("arrow-up")):(this._closeEpisodeList(t),i.removeClass("arrow-up"),i.addClass("arrow-down")))},_onButtonKeyDown:function(e){this._animation&&e.keyCode===i.VK_DOWN&&e.stopPropagation()},_openEpisodeList:function(e){var t=this._animation,i=this;t&&h.stopAnimation(t),e.removeClass("display-none"),e.setStylesTo({overflow:"hidden",maxHeight:"0px"}),this._animation=h.tweenElementStyle({el:e.outputElement,from:{"max-height":0},to:{"max-height":1280},units:{"max-height":"px"},onComplete:function(){i._animation=null,e.setStylesTo({overflow:"visible","max-height":"none"}),i.bubbleEvent(new d(e,i,0))}})},_closeEpisodeList:function(e){var t=this._animation,i=e.outputElement,n=this;t&&h.stopAnimation(t),e.setStyleTo("overflow","hidden"),this._animation=h.tweenElementStyle({el:i,from:{"max-height":i.offsetHeight},to:{"max-height":0},units:{"max-height":"px"},onComplete:function(){n._animation=null,e.addClass("display-none"),e.setStylesTo({overflow:"visible","max-height":"none"}),n.bubbleEvent(new d(e,n,0))}})},open:function(){this._openEpisodeList(this._list)},close:function(){this._closeEpisodeList(this._list)}})}),define("application/widgets/sidemenu/base",["components/side-menu/src/js/widgets/sections/base","application/managers/event"],function(e,r){"use strict";return e.extend({_onSelect:function(e){var t=e.target,i=t.getMenuItem().getAction(),n=r.getInstance();i&&n.publish(n.eventList.INPUT.NAVIGATE,{target:t._menuItem.getLabel()}),this._super(e)}})}),define("application/widgets/slider/item",["rofl/widgets/button","rofl/widgets/image","rofl/widgets/label","rofl/lib/utils","rofl/lib/promise","rofl/widgets/container","smart-ott/config","smart-ott-models/assets/movie","smart-ott-models/assets/serie","smart-ott-models/assets/episode","smart-ott-models/assets/broadcast","antie/runtimecontext"],function(e,i,n,r,s,o,a,t,l,c,u,d){"use strict";var h=d.getCurrentApplication().getLayout().modifier,g={WIDTH:Math.round(1190*(h||1)),HEIGHT:Math.round(458*(h||1))},p=d.getCurrentApplication().getDevice().getLogger();return e.extend({init:function(e){var t={onError:r.bind(this._onImageError,this),bindListenersOnRender:!1};this._super(),this.addClass("slider-item"),(e=e||{}).width=e.width||g.WIDTH,e.height=e.height||g.HEIGHT,this._size={width:e.width,height:e.height},this._image=this.appendChildWidget(new i("","",this._size,t)),this._descriptionWrap=this.appendChildWidget(new o),this._descriptionWrap.addClass("item-description"),this._title=this._descriptionWrap.appendChildWidget(new n("",["title"])),this._description=this._descriptionWrap.appendChildWidget(new n("",["description"]))},setDataItem:function(e){var t=this,i=this._size,n=e.hasPoster&&e.hasPoster()?e.getPoster(i.width,i.height):e.getImage(i.width,i.height);this._super(e),this._defaultImageTested=!1,n.then(function(e){t._image.setSrc(e)}),this._title.setText(e.getLongTitle&&e.getLongTitle()||e.getLabel()),this._description&&(e instanceof l?this._description.setText(e.getDescription()):this._description.setText(e.getShortDescription&&e.getShortDescription()))},getFallbackImage:function(e,t){return this.getDataItem()instanceof u?this.getDataItem().getChannel().getImage(e,t):s.resolve(a.getLogo())},_onImageError:function(){var i=this,e=this._size;this.getDataItem().hasPoster&&this.getDataItem().hasPoster()&&!this._defaultImageTested?(this._defaultImageTested=!0,this.getDataItem().getImage(e.width,e.height).then(function(e){i._image.setSrc(e)})):this.getFallbackImage(e.width,e.height).then(function(e){var t=i._image;t.setOnErrorCallback(i._onFallbackImageError),t.addClass("fallback"),t.setSrc(e)})},_onFallbackImageError:function(){p.error("Error loading fallback image")}})}),define("application/widgets/textscroller",["antie/runtimecontext","rofl/widgets/container","rofl/widgets/label","application/widgets/textscroller/scrollbar","rofl/events/keyevent","rofl/decorators/pointer","rofl/decorators/scrollable","rofl/lib/utils"],function(r,t,i,e,n,s,o,a){"use strict";return t.extend({init:function(){this._super(),this.addClass("textscroller"),this.decorate([s,o]),this._viewPort=null,this._view=null,this._scrollBar=null,this._createContents(),this.addEventListener("keydown",a.bind(this.onKeyDown,this))},render:function(e){var t=this._super(e),i=this;return this.scrollSetup({container:this._viewPort,pixelScrollHandler:function(e,t){return this.scrollByPixels(e,t)},directions:{up:{clickHandler:function(){i.focus(),i.pixelScroll(-i._getScrollStep(),i._scrollAnimationOptions)}},down:{clickHandler:function(){i.focus(),i.pixelScroll(i._getScrollStep(),i._scrollAnimationOptions)}}}}),t},_createContents:function(){this._viewPort=this._createViewPort(),this._view=this._createView(),this._viewPort.appendChildWidget(this._view),this._scrollBar=this._createScrollBar(),this._scrollBar.attach(this),this._viewPort.appendChildWidget(this._scrollBar),this.appendChildWidget(this._viewPort)},_createViewPort:function(){var e=new t;return e.addClass("viewport"),e},_createView:function(){var e=new t;return e.addClass("view"),e},_createScrollBar:function(){return new e},_createText:function(e){var t=new i(e);return t.addClass("text"),t},getViewSize:function(){var e=this.getScrollWidget().outputElement;return e?e.getBoundingClientRect():null},getViewPortSize:function(){var e=this._viewPort.outputElement;return e?e.getBoundingClientRect():null},setText:function(e,t){var i=this,n=this._view,r=this._scrollBar;i.addClass("skipAnim"),n.removeChildWidgets(),n.appendChildWidget(i._createText(e)),i.scrollToPixel(0,{skipAnim:!0}),r.hide(),setTimeout(function(){0!==i.getMaximumOffset()&&(r.show(),t&&i._scrollBar.focus()),i.removeClass("skipAnim"),r.update()},100)},onKeyDown:function(e){switch(e.keyCode){case n.VK_UP:this.pixelScroll(-this._getScrollStep(),this._scrollAnimationOptions),e.stopPropagation();break;case n.VK_DOWN:this.pixelScroll(this._getScrollStep(),this._scrollAnimationOptions),e.stopPropagation()}},getScrollWidget:function(){return this._view},getCurrentScrollOffset:function(){var e=this.getScrollWidget().outputElement.style.top.replace("px","");return""===e?0:Math.abs(parseInt(e,10))},getMaximumOffset:function(){var e=this.getViewSize().height-this.getViewPortSize().height;return Math.max(0,e)},scrollToPixel:function(e,t){var i,n=r.getCurrentApplication().getDevice();(i=a.extend({},this._scrollAnimationOptions,{el:this.getScrollWidget().outputElement,to:{top:-e}},t)).skipAnim?this._animation||n.moveElementTo(i):(this._animation&&n.stopAnimation(this._animation),this._animation=n.moveElementTo(i)),this._scrollBar.setScrollPos(e)},scrollByPixels:function(e,t){var i,n,r,s;return t=t||{skipAnim:!0},s={up:!1,down:!1,left:!1,right:!1},i=this.getCurrentScrollOffset(),n=Math.max(0,i+e),(r=this.getMaximumOffset())<=n&&(n=r,s.down=!0),n<=0&&(n=0,s.up=!0),this.scrollToPixel(n,t),s},_getScrollStep:function(){return this.getViewPortSize().height*(1/3)}})}),define("application/widgets/textscroller/scrollbar",["rofl/widgets/container","rofl/widgets/button","rofl/lib/utils"],function(e,t,i){"use strict";return e.extend({init:function(){this._super(),this.addClass("scrollbar"),this._textScroller=null,this._indicator=null,this._indicatorPosition=null,this._createContents()},_createContents:function(){this._indicator=this._createIndicator(),this.appendChildWidget(this._indicator)},_createIndicator:function(){var e=new t;return e.addClass("indicator"),e},attach:function(e){this._textScroller=e},update:function(e){if(!this._textScroller)throw"Scroll-bar is not attached to textScroller widget.";this._setIndicatorSize(),this.setScrollPos(e)},_getSize:function(){var e=this.outputElement;if(!e||!e.parentNode)throw"Scroll-bar is not part of the DOM. Append it first.";return e.getBoundingClientRect()},_calcIndicatorSize:function(){var e=this._getSizeFactor(),t=this._getSize();return Math.min(t.height,t.height*e)},_getSizeFactor:function(){var e=this._textScroller.getViewSize();return this._textScroller.getViewPortSize().height/e.height},_setIndicatorSize:function(){var e=this._calcIndicatorSize(),t=i.getNested(this._indicator,"outputElement");t&&(t.style.height=e+"px")},setScrollPos:function(e){var t;t=(e=e||0)*this._getScrollFactor(),this._setIndicatorPosition(t)},_getScrollFactor:function(){var e=this._textScroller.getViewSize();return this._getSize().height/e.height},_setIndicatorPosition:function(e){var t=i.getNested(this._indicator,"outputElement");e=parseInt(e,10),i.isNumber(e)&&t&&(t.style.top=e+"px",this._indicatorPosition=e)},render:function(e){var t=this._super(e);return this._setIndicatorPosition(this._indicatorPosition),t},show:function(){this._super({skipAnim:!0}),this.setStyleTo("display","block")},hide:function(){this._super({skipAnim:!0}),this.setStyleTo("display","none")},isFocusable:function(){return!!this.isVisible()&&this._super()}})}),define("application/widgets/tickbutton",["antie/widgets/container","rofl/widgets/button","rofl/widgets/label","rofl/lib/utils"],function(e,t,i,n){"use strict";return t.extend({init:function(e,t){this._super(e,t),this.addClass(["tickbutton"]),this._label=new i("",["text"]),this._tick=new i("",["icon","check"]),this.appendChildWidget(this._label),this.appendChildWidget(this._tick),this._showTick=!1},setLabel:function(e){return!n.isUndefined(e)&&(e=e.toString(),this._label.setText(e),!0)},showTick:function(e){return!n.isUndefined(e)&&(this._tick.outputElement&&(e?this._tick.show({skipAnim:!0}):this._tick.hide({skipAnim:!0})),this._showTick=!!e,!0)},render:function(e){var t=this._super(e);return this.showTick(this._showTick),t}})}),define("application/widgets/utils/progress",["rofl/widgets/widget","rofl/lib/utils"],function(e,i){"use strict";return e.extend({_progress:0,init:function(e,t){this._super(e),this.addClass("progress"),i.isUndefined(t)||(this._progress=t)},render:function(e){var t=e.createContainer(this.getId(),this.getClasses()),i=e.createContainer(null,["fill"]);return i.style.width=this._progress+"%",e.appendChildElement(t,i),this.outputElement=t,this._fillElement=i,t},setProgress:function(e){var t=this._fillElement;this._progress=e,t&&(t.style.width=e+"%")}})}),define("application/widgets/vttsubtitleplayer",["rofl/application","rofl/lib/utils","rofl/media/subtitles/player","components/vtt.js/dist/vtt"],function(e,t,i){"use strict";var n=e.getCurrentApplication().getDevice();return i.extend({_subtitlesPlayerElement:null,_subtitleStyleClassName:"",_subtitles:!1,setSubtitleStyleClassname:function(e){var t=this._subtitleStyleClassName;this._subtitleStyleClassName=e||"",this._subtitlesPlayerElement&&(n.removeClassFromElement(this._subtitlesPlayerElement,t),n.addClassToElement(this._subtitlesPlayerElement,this._subtitleStyleClassName))},onTimeUpdate:function(t){var e;this._subtitles&&this._subtitlesPlayerElement&&(e=this._subtitles.filter(function(e){return e.startTime<t&&e.endTime>t}),window.WebVTT.processCues(window,e,this._subtitlesPlayerElement))},getElement:function(){return this._subtitlesPlayerElement},stop:function(){n.removeElement(this._subtitlesPlayerElement),this._subtitlesPlayerElement=null},play:function(){this._subtitlesPlayerElement||(this._subtitlesPlayerElement=n.createContainer(null,["subtitle-player-vtt"]),this.setSubtitleStyleClassname(this._subtitleStyleClassName),n.appendChildElement(document.body,this._subtitlesPlayerElement))},setSubtitle:function(e){if(!t.isArray(e)&&!1!==e)throw new Error("Subtitle needs to be an array or false");this._subtitles=e,window.WebVTT.processCues(window,[],this._subtitlesPlayerElement)},getSubtitle:function(){return this._subtitles}})}),define("application/application",["rofl/application","smart-ott/bootstrap","smart-ott/resolver","antie/widgets/horizontallist","rofl/router","smart-ott/config","application/managers/session","rofl/lib/l10n","product-layer/dialog/widgets/command","rofl/lib/utils","application/widgets/loader","application/managers/device","application/managers/event","application/managers/event/list"],function(e,r,s,o,n,a,l,c,u,d,h,t,g,p){"use strict";var f;return e.extend({_loader:null,_menuConditions:{},_showMenu:!0,init:function(e,t,i,n){this._super(e,t,i,n),this._eventManager=null,f=e},run:function(){var t=new o,n=this,e=this._loader=new h,i=-1!==(this.getDevice&&this.getDevice().getBrand&&this.getDevice().getBrand()).indexOf("saorview")?"https://www.rte.ie/wordpress/wp-content/uploads/standard/smartott/config.json".replace("smartott","saorview"):"https://www.rte.ie/wordpress/wp-content/uploads/standard/smartott/config.json";t.outputElement=f,this.setRootWidget(t),this.addComponentContainer("menu"),this.addComponentContainer("main"),this.addComponentContainer("modal"),t.appendChildWidget(e),r.run(i).then(function(){var e=a.getApplication()||{};return f.style.backgroundImage="url('"+a.getBackground()+"')",t.addClass(e.identifier||"smartott"),n._eventManager=g.getInstance(),n._eventManager.publish(p.APPLICATION.LAUNCH),s.retrieveApi()}).then(function(){return l.checkStoredSession()}).then(function(e){var t=c.getInstance(),i=function(){n.ready()};t.getLanguage()?i():n.getDevice().loadURL("cdn/l10n/en-us.json",{headers:{"Content-Type":"application/json"},onLoad:function(e){t.setTranslation(e,"en-us"),i()}})}),this.addEventListener("$!networkstatuschange",d.bind(this.onNetworkStatusChange,this))},ready:function(){this.getDevice().getMediaPlayer().setNativeSubtitlesEnabled(!1),this._super(),this._eventManager.publish(p.APPLICATION.READY)},route:function(e,t){var i=n.getInstance();"string"==typeof e?i.route(e,t):i.deeplink(e)},hideBackground:function(){f.style.backgroundImage=""},showBackground:function(e){e=e||this._image,f.style.backgroundImage="url('"+a.getBackground()+"')",this._image=e},showLoader:function(e){this._loader.show({duration:200}),e||this._loader.focus()},hideLoader:function(){this._loader.hide({duration:200})},updateMenu:function(e){var t=this.getComponent("menu").getChildWidgets()[0];return d.isObject(e)||(e={}),d.isBool(e.show)&&(this._showMenu=e.show),d.isObject(e.conditions)&&(this._menuConditions=d.extend(this._menuConditions,e.conditions)),!(!t||!t.isRendered())&&(this.isMenuAllowed()&&this._showMenu?this._showMenu&&t.setStyleTo("display","block"):t.setStyleTo("display","none"),t.isVisible())},isMenuAllowed:function(){var e=!0,t=l.hasSession()&&l.isLoggedIn(),i=l.hasSession()&&l.isLoggedIn({loginOnly:!0});return this._menuConditions.login&&!t&&(e=!1),i&&this._menuConditions.profile&&!t&&(e=!1),e},exit:function(e){var t=this.getFocussedWidget(),i=c.getInstance(),n=this,r=d.bind(this._super,this);if(this.getDevice().hasExit())return e?(this._eventManager.publish(p.APPLICATION.EXIT),t.focus(),void this._super()):void this.route("dialog",{title:i.get("exit.title"),content:i.get("exit.content"),commands:[new u(i.get("yes"),d.bind(function(){this._eventManager.publish(p.APPLICATION.EXIT),t.focus(),this.getComponent("modal").back(),r()},this)),new u(i.get("no"),function(){t.focus(),n.getComponent("modal").back()})],cancelCommandIndex:1})},onNetworkStatusChange:function(e){e.networkStatus||this.route("networkerror")}})}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./enc-base64"),require("./md5"),require("./evpkdf"),require("./cipher-core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/aes",["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],t):t(e.CryptoJS)}(this,function(r){return function(){var e=r,t=e.lib.BlockCipher,i=e.algo,c=[],u=[],d=[],h=[],g=[],p=[],f=[],_=[],m=[],v=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var i=0,n=0;for(t=0;t<256;t++){var r=n^n<<1^n<<2^n<<3^n<<4;r=r>>>8^255&r^99,c[i]=r;var s=e[u[r]=i],o=e[s],a=e[o],l=257*e[r]^16843008*r;d[i]=l<<24|l>>>8,h[i]=l<<16|l>>>16,g[i]=l<<8|l>>>24,p[i]=l;l=16843009*a^65537*o^257*s^16843008*i;f[r]=l<<24|l>>>8,_[r]=l<<16|l>>>16,m[r]=l<<8|l>>>24,v[r]=l,i?(i=s^e[e[e[a^s]]],n^=e[e[n]]):i=n=1}}();var C=[0,1,2,4,8,16,32,64,128,27,54],n=i.AES=t.extend({_doReset:function(){for(var e=this._key,t=e.words,i=e.sigBytes/4,n=4*((this._nRounds=i+6)+1),r=this._keySchedule=[],s=0;s<n;s++)if(s<i)r[s]=t[s];else{var o=r[s-1];s%i?6<i&&s%i==4&&(o=c[o>>>24]<<24|c[o>>>16&255]<<16|c[o>>>8&255]<<8|c[255&o]):(o=c[(o=o<<8|o>>>24)>>>24]<<24|c[o>>>16&255]<<16|c[o>>>8&255]<<8|c[255&o],o^=C[s/i|0]<<24),r[s]=r[s-i]^o}for(var a=this._invKeySchedule=[],l=0;l<n;l++){s=n-l;if(l%4)o=r[s];else o=r[s-4];a[l]=l<4||s<=4?o:f[c[o>>>24]]^_[c[o>>>16&255]]^m[c[o>>>8&255]]^v[c[255&o]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,d,h,g,p,c)},decryptBlock:function(e,t){var i=e[t+1];e[t+1]=e[t+3],e[t+3]=i,this._doCryptBlock(e,t,this._invKeySchedule,f,_,m,v,u);i=e[t+1];e[t+1]=e[t+3],e[t+3]=i},_doCryptBlock:function(e,t,i,n,r,s,o,a){for(var l=this._nRounds,c=e[t]^i[0],u=e[t+1]^i[1],d=e[t+2]^i[2],h=e[t+3]^i[3],g=4,p=1;p<l;p++){var f=n[c>>>24]^r[u>>>16&255]^s[d>>>8&255]^o[255&h]^i[g++],_=n[u>>>24]^r[d>>>16&255]^s[h>>>8&255]^o[255&c]^i[g++],m=n[d>>>24]^r[h>>>16&255]^s[c>>>8&255]^o[255&u]^i[g++],v=n[h>>>24]^r[c>>>16&255]^s[u>>>8&255]^o[255&d]^i[g++];c=f,u=_,d=m,h=v}f=(a[c>>>24]<<24|a[u>>>16&255]<<16|a[d>>>8&255]<<8|a[255&h])^i[g++],_=(a[u>>>24]<<24|a[d>>>16&255]<<16|a[h>>>8&255]<<8|a[255&c])^i[g++],m=(a[d>>>24]<<24|a[h>>>16&255]<<16|a[c>>>8&255]<<8|a[255&u])^i[g++],v=(a[h>>>24]<<24|a[c>>>16&255]<<16|a[u>>>8&255]<<8|a[255&d])^i[g++];e[t]=f,e[t+1]=_,e[t+2]=m,e[t+3]=v},keySize:8});e.AES=t._createHelper(n)}(),r.AES}),function(e,t){"object"==typeof exports?module.exports=exports=t(require("./core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/cipher-core",["./core"],t):t(e.CryptoJS)}(this,function(e){var t,i,n,l,r,s,o,a,c,u,d,h,g,p,f,_,m,v;e.lib.Cipher||(i=(t=e).lib,n=i.Base,l=i.WordArray,r=i.BufferedBlockAlgorithm,(s=t.enc).Utf8,o=s.Base64,a=t.algo.EvpKDF,c=i.Cipher=r.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,i){this.cfg=this.cfg.extend(i),this._xformMode=e,this._key=t,this.reset()},reset:function(){r.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function r(e){return"string"==typeof e?v:_}return function(n){return{encrypt:function(e,t,i){return r(t).encrypt(n,e,t,i)},decrypt:function(e,t,i){return r(t).decrypt(n,e,t,i)}}}}()}),i.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),u=t.mode={},d=i.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),h=u.CBC=function(){var e=d.extend();function s(e,t,i){var n=this._iv;if(n){var r=n;this._iv=void 0}else r=this._prevBlock;for(var s=0;s<i;s++)e[t+s]^=r[s]}return e.Encryptor=e.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize;s.call(this,e,t,n),i.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}}),e.Decryptor=e.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize,r=e.slice(t,t+n);i.decryptBlock(e,t),s.call(this,e,t,n),this._prevBlock=r}}),e}(),g=(t.pad={}).Pkcs7={pad:function(e,t){for(var i=4*t,n=i-e.sigBytes%i,r=n<<24|n<<16|n<<8|n,s=[],o=0;o<n;o+=4)s.push(r);var a=l.create(s,n);e.concat(a)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},i.BlockCipher=c.extend({cfg:c.cfg.extend({mode:h,padding:g}),reset:function(){c.reset.call(this);var e=this.cfg,t=e.iv,i=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=i.createEncryptor;else{n=i.createDecryptor;this._minBufferSize=1}this._mode=n.call(i,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else{t=this._process(!0);e.unpad(t)}return t},blockSize:4}),p=i.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),f=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,i=e.salt;if(i)var n=l.create([1398893684,1701076831]).concat(i).concat(t);else n=t;return n.toString(o)},parse:function(e){var t=o.parse(e),i=t.words;if(1398893684==i[0]&&1701076831==i[1]){var n=l.create(i.slice(2,4));i.splice(0,4),t.sigBytes-=16}return p.create({ciphertext:t,salt:n})}},_=i.SerializableCipher=n.extend({cfg:n.extend({format:f}),encrypt:function(e,t,i,n){n=this.cfg.extend(n);var r=e.createEncryptor(i,n),s=r.finalize(t),o=r.cfg;return p.create({ciphertext:s,key:i,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,i,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(i,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),m=(t.kdf={}).OpenSSL={execute:function(e,t,i,n){n||(n=l.random(8));var r=a.create({keySize:t+i}).compute(e,n),s=l.create(r.words.slice(t),4*i);return r.sigBytes=4*t,p.create({key:r,iv:s,salt:n})}},v=i.PasswordBasedCipher=_.extend({cfg:_.cfg.extend({kdf:m}),encrypt:function(e,t,i,n){var r=(n=this.cfg.extend(n)).kdf.execute(i,e.keySize,e.ivSize);n.iv=r.iv;var s=_.encrypt.call(this,e,t,r.key,n);return s.mixIn(r),s},decrypt:function(e,t,i,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var r=n.kdf.execute(i,e.keySize,e.ivSize,t.salt);return n.iv=r.iv,_.decrypt.call(this,e,t,r.key,n)}}))}),function(e,t){"object"==typeof exports?module.exports=exports=t():"function"==typeof define&&define.amd?define("vendor/crypto-js/core",[],t):e.CryptoJS=t()}(this,function(){var u,e,t,i,d,n,r,s,o,a,l,c=c||(u=Math,t=(e={}).lib={},i=t.Base=function(){function i(){}return{extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),d=t.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||r).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes,r=e.sigBytes;if(this.clamp(),n%4)for(var s=0;s<r;s++){var o=i[s>>>2]>>>24-s%4*8&255;t[n+s>>>2]|=o<<24-(n+s)%4*8}else for(s=0;s<r;s+=4)t[n+s>>>2]=i[s>>>2];return this.sigBytes+=r,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=u.ceil(t/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t,i=[],n=function(t){t=t;var i=987654321,n=4294967295;return function(){var e=((i=36969*(65535&i)+(i>>16)&n)<<16)+(t=18e3*(65535&t)+(t>>16)&n)&n;return e/=4294967296,(e+=.5)*(.5<u.random()?1:-1)}},r=0;r<e;r+=4){var s=n(4294967296*(t||u.random()));t=987654071*s(),i.push(4294967296*s()|0)}return new d.init(i,e)}}),n=e.enc={},r=n.Hex={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],r=0;r<i;r++){var s=t[r>>>2]>>>24-r%4*8&255;n.push((s>>>4).toString(16)),n.push((15&s).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new d.init(i,t/2)}},s=n.Latin1={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],r=0;r<i;r++){var s=t[r>>>2]>>>24-r%4*8&255;n.push(String.fromCharCode(s))}return n.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new d.init(i,t)}},o=n.Utf8={stringify:function(e){try{return decodeURIComponent(escape(s.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return s.parse(unescape(encodeURIComponent(e)))}},a=t.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=o.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,i=t.words,n=t.sigBytes,r=this.blockSize,s=n/(4*r),o=(s=e?u.ceil(s):u.max((0|s)-this._minBufferSize,0))*r,a=u.min(4*o,n);if(o){for(var l=0;l<o;l+=r)this._doProcessBlock(i,l);var c=i.splice(0,o);t.sigBytes-=a}return new d.init(c,a)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),t.Hasher=a.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){a.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(i){return function(e,t){return new i.init(t).finalize(e)}},_createHmacHelper:function(i){return function(e,t){return new l.HMAC.init(i,t).finalize(e)}}}),l=e.algo={},e);return c}),function(e,t){"object"==typeof exports?module.exports=exports=t():"function"==typeof define&&define.amd?define("vendor/crypto-js/crypto-js",[],t):e.CryptoJS=t()}(this,function(){var u,e,t,i,d,n,r,s,o,a,l,c,h,g,p,f,_,m,v,C,A,E,I,y,b,S,T,w,P,D,k,O,R,L,x,N,M,B,F,U,V,W,H,Y,K,G,j,q,z,Q,J,Z,X,$,ee,te,ie,ne,re,se,oe,ae,le,ce,ue,de,he,ge,pe,fe,_e,me,ve,Ce,Ae,Ee,Ie,ye,be,Se,Te,we=we||(u=Math,t=(e={}).lib={},i=t.Base=function(){function i(){}return{extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),d=t.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||r).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes,r=e.sigBytes;if(this.clamp(),n%4)for(var s=0;s<r;s++){var o=i[s>>>2]>>>24-s%4*8&255;t[n+s>>>2]|=o<<24-(n+s)%4*8}else for(s=0;s<r;s+=4)t[n+s>>>2]=i[s>>>2];return this.sigBytes+=r,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=u.ceil(t/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t,i=[],n=function(t){t=t;var i=987654321,n=4294967295;return function(){var e=((i=36969*(65535&i)+(i>>16)&n)<<16)+(t=18e3*(65535&t)+(t>>16)&n)&n;return e/=4294967296,(e+=.5)*(.5<u.random()?1:-1)}},r=0;r<e;r+=4){var s=n(4294967296*(t||u.random()));t=987654071*s(),i.push(4294967296*s()|0)}return new d.init(i,e)}}),n=e.enc={},r=n.Hex={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],r=0;r<i;r++){var s=t[r>>>2]>>>24-r%4*8&255;n.push((s>>>4).toString(16)),n.push((15&s).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new d.init(i,t/2)}},s=n.Latin1={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],r=0;r<i;r++){var s=t[r>>>2]>>>24-r%4*8&255;n.push(String.fromCharCode(s))}return n.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new d.init(i,t)}},o=n.Utf8={stringify:function(e){try{return decodeURIComponent(escape(s.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return s.parse(unescape(encodeURIComponent(e)))}},a=t.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=o.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,i=t.words,n=t.sigBytes,r=this.blockSize,s=n/(4*r),o=(s=e?u.ceil(s):u.max((0|s)-this._minBufferSize,0))*r,a=u.min(4*o,n);if(o){for(var l=0;l<o;l+=r)this._doProcessBlock(i,l);var c=i.splice(0,o);t.sigBytes-=a}return new d.init(c,a)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),t.Hasher=a.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){a.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(i){return function(e,t){return new i.init(t).finalize(e)}},_createHmacHelper:function(i){return function(e,t){return new l.HMAC.init(i,t).finalize(e)}}}),l=e.algo={},e);return h=(c=we).lib.WordArray,c.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,n=this._map;e.clamp();for(var r=[],s=0;s<i;s+=3)for(var o=(t[s>>>2]>>>24-s%4*8&255)<<16|(t[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|t[s+2>>>2]>>>24-(s+2)%4*8&255,a=0;a<4&&s+.75*a<i;a++)r.push(n.charAt(o>>>6*(3-a)&63));var l=n.charAt(64);if(l)for(;r.length%4;)r.push(l);return r.join("")},parse:function(e){var t=e.length,i=this._map,n=i.charAt(64);if(n){var r=e.indexOf(n);-1!=r&&(t=r)}for(var s=[],o=0,a=0;a<t;a++)if(a%4){var l=i.indexOf(e.charAt(a-1))<<a%4*2|i.indexOf(e.charAt(a))>>>6-a%4*2;s[o>>>2]|=l<<24-o%4*8,o++}return h.create(s,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(u){var e=we,t=e.lib,i=t.WordArray,n=t.Hasher,r=e.algo,T=[];!function(){for(var e=0;e<64;e++)T[e]=4294967296*u.abs(u.sin(e+1))|0}();var s=r.MD5=n.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var n=t+i,r=e[n];e[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var s=this._hash.words,o=e[t+0],a=e[t+1],l=e[t+2],c=e[t+3],u=e[t+4],d=e[t+5],h=e[t+6],g=e[t+7],p=e[t+8],f=e[t+9],_=e[t+10],m=e[t+11],v=e[t+12],C=e[t+13],A=e[t+14],E=e[t+15],I=s[0],y=s[1],b=s[2],S=s[3];y=k(y=k(y=k(y=k(y=D(y=D(y=D(y=D(y=P(y=P(y=P(y=P(y=w(y=w(y=w(y=w(y,b=w(b,S=w(S,I=w(I,y,b,S,o,7,T[0]),y,b,a,12,T[1]),I,y,l,17,T[2]),S,I,c,22,T[3]),b=w(b,S=w(S,I=w(I,y,b,S,u,7,T[4]),y,b,d,12,T[5]),I,y,h,17,T[6]),S,I,g,22,T[7]),b=w(b,S=w(S,I=w(I,y,b,S,p,7,T[8]),y,b,f,12,T[9]),I,y,_,17,T[10]),S,I,m,22,T[11]),b=w(b,S=w(S,I=w(I,y,b,S,v,7,T[12]),y,b,C,12,T[13]),I,y,A,17,T[14]),S,I,E,22,T[15]),b=P(b,S=P(S,I=P(I,y,b,S,a,5,T[16]),y,b,h,9,T[17]),I,y,m,14,T[18]),S,I,o,20,T[19]),b=P(b,S=P(S,I=P(I,y,b,S,d,5,T[20]),y,b,_,9,T[21]),I,y,E,14,T[22]),S,I,u,20,T[23]),b=P(b,S=P(S,I=P(I,y,b,S,f,5,T[24]),y,b,A,9,T[25]),I,y,c,14,T[26]),S,I,p,20,T[27]),b=P(b,S=P(S,I=P(I,y,b,S,C,5,T[28]),y,b,l,9,T[29]),I,y,g,14,T[30]),S,I,v,20,T[31]),b=D(b,S=D(S,I=D(I,y,b,S,d,4,T[32]),y,b,p,11,T[33]),I,y,m,16,T[34]),S,I,A,23,T[35]),b=D(b,S=D(S,I=D(I,y,b,S,a,4,T[36]),y,b,u,11,T[37]),I,y,g,16,T[38]),S,I,_,23,T[39]),b=D(b,S=D(S,I=D(I,y,b,S,C,4,T[40]),y,b,o,11,T[41]),I,y,c,16,T[42]),S,I,h,23,T[43]),b=D(b,S=D(S,I=D(I,y,b,S,f,4,T[44]),y,b,v,11,T[45]),I,y,E,16,T[46]),S,I,l,23,T[47]),b=k(b,S=k(S,I=k(I,y,b,S,o,6,T[48]),y,b,g,10,T[49]),I,y,A,15,T[50]),S,I,d,21,T[51]),b=k(b,S=k(S,I=k(I,y,b,S,v,6,T[52]),y,b,c,10,T[53]),I,y,_,15,T[54]),S,I,a,21,T[55]),b=k(b,S=k(S,I=k(I,y,b,S,p,6,T[56]),y,b,E,10,T[57]),I,y,h,15,T[58]),S,I,C,21,T[59]),b=k(b,S=k(S,I=k(I,y,b,S,u,6,T[60]),y,b,m,10,T[61]),I,y,l,15,T[62]),S,I,f,21,T[63]),s[0]=s[0]+I|0,s[1]=s[1]+y|0,s[2]=s[2]+b|0,s[3]=s[3]+S|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32;var r=u.floor(i/4294967296),s=i;t[15+(n+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t[14+(n+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),e.sigBytes=4*(t.length+1),this._process();for(var o=this._hash,a=o.words,l=0;l<4;l++){var c=a[l];a[l]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return o},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});function w(e,t,i,n,r,s,o){var a=e+(t&i|~t&n)+r+o;return(a<<s|a>>>32-s)+t}function P(e,t,i,n,r,s,o){var a=e+(t&n|i&~n)+r+o;return(a<<s|a>>>32-s)+t}function D(e,t,i,n,r,s,o){var a=e+(t^i^n)+r+o;return(a<<s|a>>>32-s)+t}function k(e,t,i,n,r,s,o){var a=e+(i^(t|~n))+r+o;return(a<<s|a>>>32-s)+t}e.MD5=n._createHelper(s),e.HmacMD5=n._createHmacHelper(s)}(Math),p=(g=we).lib,f=p.WordArray,_=p.Hasher,m=g.algo,v=[],C=m.SHA1=_.extend({_doReset:function(){this._hash=new f.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],r=i[1],s=i[2],o=i[3],a=i[4],l=0;l<80;l++){if(l<16)v[l]=0|e[t+l];else{var c=v[l-3]^v[l-8]^v[l-14]^v[l-16];v[l]=c<<1|c>>>31}var u=(n<<5|n>>>27)+a+v[l];u+=l<20?1518500249+(r&s|~r&o):l<40?1859775393+(r^s^o):l<60?(r&s|r&o|s&o)-1894007588:(r^s^o)-899497514,a=o,o=s,s=r<<30|r>>>2,r=n,n=u}i[0]=i[0]+n|0,i[1]=i[1]+r|0,i[2]=i[2]+s|0,i[3]=i[3]+o|0,i[4]=i[4]+a|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(i/4294967296),t[15+(n+64>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=_.clone.call(this);return e._hash=this._hash.clone(),e}}),g.SHA1=_._createHelper(C),g.HmacSHA1=_._createHmacHelper(C),function(r){var e=we,t=e.lib,i=t.WordArray,n=t.Hasher,s=e.algo,o=[],C=[];!function(){function e(e){for(var t=r.sqrt(e),i=2;i<=t;i++)if(!(e%i))return!1;return!0}function t(e){return 4294967296*(e-(0|e))|0}for(var i=2,n=0;n<64;)e(i)&&(n<8&&(o[n]=t(r.pow(i,.5))),C[n]=t(r.pow(i,1/3)),n++),i++}();var A=[],a=s.SHA256=n.extend({_doReset:function(){this._hash=new i.init(o.slice(0))},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],r=i[1],s=i[2],o=i[3],a=i[4],l=i[5],c=i[6],u=i[7],d=0;d<64;d++){if(d<16)A[d]=0|e[t+d];else{var h=A[d-15],g=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,p=A[d-2],f=(p<<15|p>>>17)^(p<<13|p>>>19)^p>>>10;A[d]=g+A[d-7]+f+A[d-16]}var _=n&r^n&s^r&s,m=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),v=u+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&l^~a&c)+C[d]+A[d];u=c,c=l,l=a,a=o+v|0,o=s,s=r,r=n,n=v+(m+_)|0}i[0]=i[0]+n|0,i[1]=i[1]+r|0,i[2]=i[2]+s|0,i[3]=i[3]+o|0,i[4]=i[4]+a|0,i[5]=i[5]+l|0,i[6]=i[6]+c|0,i[7]=i[7]+u|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=r.floor(i/4294967296),t[15+(n+64>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA256=n._createHelper(a),e.HmacSHA256=n._createHmacHelper(a)}(Math),function(){var e=we,r=e.lib.WordArray,t=e.enc;t.Utf16=t.Utf16BE={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],r=0;r<i;r+=2){var s=t[r>>>2]>>>16-r%4*8&65535;n.push(String.fromCharCode(s))}return n.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>1]|=e.charCodeAt(n)<<16-n%2*16;return r.create(i,2*t)}};function o(e){return e<<8&4278255360|e>>>8&16711935}t.Utf16LE={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],r=0;r<i;r+=2){var s=o(t[r>>>2]>>>16-r%4*8&65535);n.push(String.fromCharCode(s))}return n.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>1]|=o(e.charCodeAt(n)<<16-n%2*16);return r.create(i,2*t)}}}(),function(){if("function"==typeof ArrayBuffer){var e=we.lib.WordArray,r=e.init;(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,i=[],n=0;n<t;n++)i[n>>>2]|=e[n]<<24-n%4*8;r.call(this,i,t)}else r.apply(this,arguments)}).prototype=e}}(),function(e){var t=we,i=t.lib,n=i.WordArray,r=i.Hasher,s=t.algo,y=n.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),b=n.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),S=n.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),T=n.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),w=n.create([0,1518500249,1859775393,2400959708,2840853838]),P=n.create([1352829926,1548603684,1836072691,2053994217,0]),o=s.RIPEMD160=r.extend({_doReset:function(){this._hash=n.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var n=t+i,r=e[n];e[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var s,o,a,l,c,u,d,h,g,p,f,_=this._hash.words,m=w.words,v=P.words,C=y.words,A=b.words,E=S.words,I=T.words;u=s=_[0],d=o=_[1],h=a=_[2],g=l=_[3],p=c=_[4];for(i=0;i<80;i+=1)f=s+e[t+C[i]]|0,f+=i<16?D(o,a,l)+m[0]:i<32?k(o,a,l)+m[1]:i<48?O(o,a,l)+m[2]:i<64?R(o,a,l)+m[3]:L(o,a,l)+m[4],f=(f=x(f|=0,E[i]))+c|0,s=c,c=l,l=x(a,10),a=o,o=f,f=u+e[t+A[i]]|0,f+=i<16?L(d,h,g)+v[0]:i<32?R(d,h,g)+v[1]:i<48?O(d,h,g)+v[2]:i<64?k(d,h,g)+v[3]:D(d,h,g)+v[4],f=(f=x(f|=0,I[i]))+p|0,u=p,p=g,g=x(h,10),h=d,d=f;f=_[1]+a+g|0,_[1]=_[2]+l+p|0,_[2]=_[3]+c+u|0,_[3]=_[4]+s+d|0,_[4]=_[0]+o+h|0,_[0]=f},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(t.length+1),this._process();for(var r=this._hash,s=r.words,o=0;o<5;o++){var a=s[o];s[o]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return r},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});function D(e,t,i){return e^t^i}function k(e,t,i){return e&t|~e&i}function O(e,t,i){return(e|~t)^i}function R(e,t,i){return e&i|t&~i}function L(e,t,i){return e^(t|~i)}function x(e,t){return e<<t|e>>>32-t}t.RIPEMD160=r._createHelper(o),t.HmacRIPEMD160=r._createHmacHelper(o)}(Math),E=(A=we).lib.Base,I=A.enc.Utf8,A.algo.HMAC=E.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=I.parse(t));var i=e.blockSize,n=4*i;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var r=this._oKey=t.clone(),s=this._iKey=t.clone(),o=r.words,a=s.words,l=0;l<i;l++)o[l]^=1549556828,a[l]^=909522486;r.sigBytes=s.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,i=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(i))}}),b=(y=we).lib,S=b.Base,T=b.WordArray,w=y.algo,P=w.SHA1,D=w.HMAC,k=w.PBKDF2=S.extend({cfg:S.extend({keySize:4,hasher:P,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,n=D.create(i.hasher,e),r=T.create(),s=T.create([1]),o=r.words,a=s.words,l=i.keySize,c=i.iterations;o.length<l;){var u=n.update(t).finalize(s);n.reset();for(var d=u.words,h=d.length,g=u,p=1;p<c;p++){g=n.finalize(g),n.reset();for(var f=g.words,_=0;_<h;_++)d[_]^=f[_]}r.concat(u),a[0]++}return r.sigBytes=4*l,r}}),y.PBKDF2=function(e,t,i){return k.create(i).compute(e,t)},R=(O=we).lib,L=R.Base,x=R.WordArray,N=O.algo,M=N.MD5,B=N.EvpKDF=L.extend({cfg:L.extend({keySize:4,hasher:M,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,n=i.hasher.create(),r=x.create(),s=r.words,o=i.keySize,a=i.iterations;s.length<o;){l&&n.update(l);var l=n.update(e).finalize(t);n.reset();for(var c=1;c<a;c++)l=n.finalize(l),n.reset();r.concat(l)}return r.sigBytes=4*o,r}}),O.EvpKDF=function(e,t,i){return B.create(i).compute(e,t)},U=(F=we).lib.WordArray,V=F.algo,W=V.SHA256,H=V.SHA224=W.extend({_doReset:function(){this._hash=new U.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=W._doFinalize.call(this);return e.sigBytes-=4,e}}),F.SHA224=W._createHelper(H),F.HmacSHA224=W._createHmacHelper(H),K=(Y=we).lib,G=K.Base,j=K.WordArray,(q=Y.x64={}).Word=G.extend({init:function(e,t){this.high=e,this.low=t}}),q.WordArray=G.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,i=[],n=0;n<t;n++){var r=e[n];i.push(r.high),i.push(r.low)}return j.create(i,this.sigBytes)},clone:function(){for(var e=G.clone.call(this),t=e.words=this.words.slice(0),i=t.length,n=0;n<i;n++)t[n]=t[n].clone();return e}}),function(h){var e=we,t=e.lib,g=t.WordArray,n=t.Hasher,u=e.x64.Word,i=e.algo,D=[],k=[],O=[];!function(){for(var e=1,t=0,i=0;i<24;i++){D[e+5*t]=(i+1)*(i+2)/2%64;var n=(2*e+3*t)%5;e=t%5,t=n}for(e=0;e<5;e++)for(t=0;t<5;t++)k[e+5*t]=t+(2*e+3*t)%5*5;for(var r=1,s=0;s<24;s++){for(var o=0,a=0,l=0;l<7;l++){if(1&r){var c=(1<<l)-1;c<32?a^=1<<c:o^=1<<c-32}128&r?r=r<<1^113:r<<=1}O[s]=u.create(o,a)}}();var R=[];!function(){for(var e=0;e<25;e++)R[e]=u.create()}();var r=i.SHA3=n.extend({cfg:n.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new u.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var i=this._state,n=this.blockSize/2,r=0;r<n;r++){var s=e[t+2*r],o=e[t+2*r+1];s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),(b=i[r]).high^=o,b.low^=s}for(var a=0;a<24;a++){for(var l=0;l<5;l++){for(var c=0,u=0,d=0;d<5;d++){c^=(b=i[l+5*d]).high,u^=b.low}var h=R[l];h.high=c,h.low=u}for(l=0;l<5;l++){var g=R[(l+4)%5],p=R[(l+1)%5],f=p.high,_=p.low;for(c=g.high^(f<<1|_>>>31),u=g.low^(_<<1|f>>>31),d=0;d<5;d++){(b=i[l+5*d]).high^=c,b.low^=u}}for(var m=1;m<25;m++){var v=(b=i[m]).high,C=b.low,A=D[m];if(A<32)c=v<<A|C>>>32-A,u=C<<A|v>>>32-A;else c=C<<A-32|v>>>64-A,u=v<<A-32|C>>>64-A;var E=R[k[m]];E.high=c,E.low=u}var I=R[0],y=i[0];I.high=y.high,I.low=y.low;for(l=0;l<5;l++)for(d=0;d<5;d++){var b=i[m=l+5*d],S=R[m],T=R[(l+1)%5+5*d],w=R[(l+2)%5+5*d];b.high=S.high^~T.high&w.high,b.low=S.low^~T.low&w.low}b=i[0];var P=O[a];b.high^=P.high,b.low^=P.low}},_doFinalize:function(){var e=this._data,t=e.words,i=(this._nDataBytes,8*e.sigBytes),n=32*this.blockSize;t[i>>>5]|=1<<24-i%32,t[(h.ceil((i+1)/n)*n>>>5)-1]|=128,e.sigBytes=4*t.length,this._process();for(var r=this._state,s=this.cfg.outputLength/8,o=s/8,a=[],l=0;l<o;l++){var c=r[l],u=c.high,d=c.low;u=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),a.push(d),a.push(u)}return new g.init(a,s)},clone:function(){for(var e=n.clone.call(this),t=e._state=this._state.slice(0),i=0;i<25;i++)t[i]=t[i].clone();return e}});e.SHA3=n._createHelper(r),e.HmacSHA3=n._createHmacHelper(r)}(Math),function(){var e=we,t=e.lib.Hasher,i=e.x64,n=i.Word,r=i.WordArray,s=e.algo;function o(){return n.create.apply(n,arguments)}var ye=[o(1116352408,3609767458),o(1899447441,602891725),o(3049323471,3964484399),o(3921009573,2173295548),o(961987163,4081628472),o(1508970993,3053834265),o(2453635748,2937671579),o(2870763221,3664609560),o(3624381080,2734883394),o(310598401,1164996542),o(607225278,1323610764),o(1426881987,3590304994),o(1925078388,4068182383),o(2162078206,991336113),o(2614888103,633803317),o(3248222580,3479774868),o(3835390401,2666613458),o(4022224774,944711139),o(264347078,2341262773),o(604807628,2007800933),o(770255983,1495990901),o(1249150122,1856431235),o(1555081692,3175218132),o(1996064986,2198950837),o(2554220882,3999719339),o(2821834349,766784016),o(2952996808,2566594879),o(3210313671,3203337956),o(3336571891,1034457026),o(3584528711,2466948901),o(113926993,3758326383),o(338241895,168717936),o(666307205,1188179964),o(773529912,1546045734),o(1294757372,1522805485),o(1396182291,2643833823),o(1695183700,2343527390),o(1986661051,1014477480),o(2177026350,1206759142),o(2456956037,344077627),o(2730485921,1290863460),o(2820302411,3158454273),o(3259730800,3505952657),o(3345764771,106217008),o(3516065817,3606008344),o(3600352804,1432725776),o(4094571909,1467031594),o(275423344,851169720),o(430227734,3100823752),o(506948616,1363258195),o(659060556,3750685593),o(883997877,3785050280),o(958139571,3318307427),o(1322822218,3812723403),o(1537002063,2003034995),o(1747873779,3602036899),o(1955562222,1575990012),o(2024104815,1125592928),o(2227730452,2716904306),o(2361852424,442776044),o(2428436474,593698344),o(2756734187,3733110249),o(3204031479,2999351573),o(3329325298,3815920427),o(3391569614,3928383900),o(3515267271,566280711),o(3940187606,3454069534),o(4118630271,4000239992),o(116418474,1914138554),o(174292421,2731055270),o(289380356,3203993006),o(460393269,320620315),o(685471733,587496836),o(852142971,1086792851),o(1017036298,365543100),o(1126000580,2618297676),o(1288033470,3409855158),o(1501505948,4234509866),o(1607167915,987167468),o(1816402316,1246189591)],be=[];!function(){for(var e=0;e<80;e++)be[e]=o()}();var a=s.SHA512=t.extend({_doReset:function(){this._hash=new r.init([new n.init(1779033703,4089235720),new n.init(3144134277,2227873595),new n.init(1013904242,4271175723),new n.init(2773480762,1595750129),new n.init(1359893119,2917565137),new n.init(2600822924,725511199),new n.init(528734635,4215389547),new n.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],r=i[1],s=i[2],o=i[3],a=i[4],l=i[5],c=i[6],u=i[7],d=n.high,h=n.low,g=r.high,p=r.low,f=s.high,_=s.low,m=o.high,v=o.low,C=a.high,A=a.low,E=l.high,I=l.low,y=c.high,b=c.low,S=u.high,T=u.low,w=d,P=h,D=g,k=p,O=f,R=_,L=m,x=v,N=C,M=A,B=E,F=I,U=y,V=b,W=S,H=T,Y=0;Y<80;Y++){var K=be[Y];if(Y<16)var G=K.high=0|e[t+2*Y],j=K.low=0|e[t+2*Y+1];else{var q=be[Y-15],z=q.high,Q=q.low,J=(z>>>1|Q<<31)^(z>>>8|Q<<24)^z>>>7,Z=(Q>>>1|z<<31)^(Q>>>8|z<<24)^(Q>>>7|z<<25),X=be[Y-2],$=X.high,ee=X.low,te=($>>>19|ee<<13)^($<<3|ee>>>29)^$>>>6,ie=(ee>>>19|$<<13)^(ee<<3|$>>>29)^(ee>>>6|$<<26),ne=be[Y-7],re=ne.high,se=ne.low,oe=be[Y-16],ae=oe.high,le=oe.low;G=(G=(G=J+re+((j=Z+se)>>>0<Z>>>0?1:0))+te+((j=j+ie)>>>0<ie>>>0?1:0))+ae+((j=j+le)>>>0<le>>>0?1:0);K.high=G,K.low=j}var ce,ue=N&B^~N&U,de=M&F^~M&V,he=w&D^w&O^D&O,ge=P&k^P&R^k&R,pe=(w>>>28|P<<4)^(w<<30|P>>>2)^(w<<25|P>>>7),fe=(P>>>28|w<<4)^(P<<30|w>>>2)^(P<<25|w>>>7),_e=(N>>>14|M<<18)^(N>>>18|M<<14)^(N<<23|M>>>9),me=(M>>>14|N<<18)^(M>>>18|N<<14)^(M<<23|N>>>9),ve=ye[Y],Ce=ve.high,Ae=ve.low,Ee=W+_e+((ce=H+me)>>>0<H>>>0?1:0),Ie=fe+ge;W=U,H=V,U=B,V=F,B=N,F=M,N=L+(Ee=(Ee=(Ee=Ee+ue+((ce=ce+de)>>>0<de>>>0?1:0))+Ce+((ce=ce+Ae)>>>0<Ae>>>0?1:0))+G+((ce=ce+j)>>>0<j>>>0?1:0))+((M=x+ce|0)>>>0<x>>>0?1:0)|0,L=O,x=R,O=D,R=k,D=w,k=P,w=Ee+(pe+he+(Ie>>>0<fe>>>0?1:0))+((P=ce+Ie|0)>>>0<ce>>>0?1:0)|0}h=n.low=h+P,n.high=d+w+(h>>>0<P>>>0?1:0),p=r.low=p+k,r.high=g+D+(p>>>0<k>>>0?1:0),_=s.low=_+R,s.high=f+O+(_>>>0<R>>>0?1:0),v=o.low=v+x,o.high=m+L+(v>>>0<x>>>0?1:0),A=a.low=A+M,a.high=C+N+(A>>>0<M>>>0?1:0),I=l.low=I+F,l.high=E+B+(I>>>0<F>>>0?1:0),b=c.low=b+V,c.high=y+U+(b>>>0<V>>>0?1:0),T=u.low=T+H,u.high=S+W+(T>>>0<H>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[30+(n+128>>>10<<5)]=Math.floor(i/4294967296),t[31+(n+128>>>10<<5)]=i,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(a),e.HmacSHA512=t._createHmacHelper(a)}(),Q=(z=we).x64,J=Q.Word,Z=Q.WordArray,X=z.algo,$=X.SHA512,ee=X.SHA384=$.extend({_doReset:function(){this._hash=new Z.init([new J.init(3418070365,3238371032),new J.init(1654270250,914150663),new J.init(2438529370,812702999),new J.init(355462360,4144912697),new J.init(1731405415,4290775857),new J.init(2394180231,1750603025),new J.init(3675008525,1694076839),new J.init(1203062813,3204075428)])},_doFinalize:function(){var e=$._doFinalize.call(this);return e.sigBytes-=16,e}}),z.SHA384=$._createHelper(ee),z.HmacSHA384=$._createHmacHelper(ee),we.lib.Cipher||(ie=(te=we).lib,ne=ie.Base,re=ie.WordArray,se=ie.BufferedBlockAlgorithm,(oe=te.enc).Utf8,ae=oe.Base64,le=te.algo.EvpKDF,ce=ie.Cipher=se.extend({cfg:ne.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,i){this.cfg=this.cfg.extend(i),this._xformMode=e,this._key=t,this.reset()},reset:function(){se.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function r(e){return"string"==typeof e?ve:_e}return function(n){return{encrypt:function(e,t,i){return r(t).encrypt(n,e,t,i)},decrypt:function(e,t,i){return r(t).decrypt(n,e,t,i)}}}}()}),ie.StreamCipher=ce.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),ue=te.mode={},de=ie.BlockCipherMode=ne.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),he=ue.CBC=function(){var e=de.extend();function s(e,t,i){var n=this._iv;if(n){var r=n;this._iv=void 0}else r=this._prevBlock;for(var s=0;s<i;s++)e[t+s]^=r[s]}return e.Encryptor=e.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize;s.call(this,e,t,n),i.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}}),e.Decryptor=e.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize,r=e.slice(t,t+n);i.decryptBlock(e,t),s.call(this,e,t,n),this._prevBlock=r}}),e}(),ge=(te.pad={}).Pkcs7={pad:function(e,t){for(var i=4*t,n=i-e.sigBytes%i,r=n<<24|n<<16|n<<8|n,s=[],o=0;o<n;o+=4)s.push(r);var a=re.create(s,n);e.concat(a)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},ie.BlockCipher=ce.extend({cfg:ce.cfg.extend({mode:he,padding:ge}),reset:function(){ce.reset.call(this);var e=this.cfg,t=e.iv,i=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=i.createEncryptor;else{n=i.createDecryptor;this._minBufferSize=1}this._mode=n.call(i,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else{t=this._process(!0);e.unpad(t)}return t},blockSize:4}),pe=ie.CipherParams=ne.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),fe=(te.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,i=e.salt;if(i)var n=re.create([1398893684,1701076831]).concat(i).concat(t);else n=t;return n.toString(ae)},parse:function(e){var t=ae.parse(e),i=t.words;if(1398893684==i[0]&&1701076831==i[1]){var n=re.create(i.slice(2,4));i.splice(0,4),t.sigBytes-=16}return pe.create({ciphertext:t,salt:n})}},_e=ie.SerializableCipher=ne.extend({cfg:ne.extend({format:fe}),encrypt:function(e,t,i,n){n=this.cfg.extend(n);var r=e.createEncryptor(i,n),s=r.finalize(t),o=r.cfg;return pe.create({ciphertext:s,key:i,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,i,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(i,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),me=(te.kdf={}).OpenSSL={execute:function(e,t,i,n){n||(n=re.random(8));var r=le.create({keySize:t+i}).compute(e,n),s=re.create(r.words.slice(t),4*i);return r.sigBytes=4*t,pe.create({key:r,iv:s,salt:n})}},ve=ie.PasswordBasedCipher=_e.extend({cfg:_e.cfg.extend({kdf:me}),encrypt:function(e,t,i,n){var r=(n=this.cfg.extend(n)).kdf.execute(i,e.keySize,e.ivSize);n.iv=r.iv;var s=_e.encrypt.call(this,e,t,r.key,n);return s.mixIn(r),s},decrypt:function(e,t,i,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var r=n.kdf.execute(i,e.keySize,e.ivSize,t.salt);return n.iv=r.iv,_e.decrypt.call(this,e,t,r.key,n)}})),we.mode.CFB=function(){var e=we.lib.BlockCipherMode.extend();function s(e,t,i,n){var r=this._iv;if(r){var s=r.slice(0);this._iv=void 0}else s=this._prevBlock;n.encryptBlock(s,0);for(var o=0;o<i;o++)e[t+o]^=s[o]}return e.Encryptor=e.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize;s.call(this,e,t,n,i),this._prevBlock=e.slice(t,t+n)}}),e.Decryptor=e.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize,r=e.slice(t,t+n);s.call(this,e,t,n,i),this._prevBlock=r}}),e}(),we.mode.ECB=((Ce=we.lib.BlockCipherMode.extend()).Encryptor=Ce.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),Ce.Decryptor=Ce.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),Ce),we.pad.AnsiX923={pad:function(e,t){var i=e.sigBytes,n=4*t,r=n-i%n,s=i+r-1;e.clamp(),e.words[s>>>2]|=r<<24-s%4*8,e.sigBytes+=r},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},we.pad.Iso10126={pad:function(e,t){var i=4*t,n=i-e.sigBytes%i;e.concat(we.lib.WordArray.random(n-1)).concat(we.lib.WordArray.create([n<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},we.pad.Iso97971={pad:function(e,t){e.concat(we.lib.WordArray.create([2147483648],1)),we.pad.ZeroPadding.pad(e,t)},unpad:function(e){we.pad.ZeroPadding.unpad(e),e.sigBytes--}},we.mode.OFB=(Ae=we.lib.BlockCipherMode.extend(),Ee=Ae.Encryptor=Ae.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize,r=this._iv,s=this._keystream;r&&(s=this._keystream=r.slice(0),this._iv=void 0),i.encryptBlock(s,0);for(var o=0;o<n;o++)e[t+o]^=s[o]}}),Ae.Decryptor=Ee,Ae),we.pad.NoPadding={pad:function(){},unpad:function(){}},ye=(Ie=we).lib.CipherParams,be=Ie.enc.Hex,Ie.format.Hex={stringify:function(e){return e.ciphertext.toString(be)},parse:function(e){var t=be.parse(e);return ye.create({ciphertext:t})}},function(){var e=we,t=e.lib.BlockCipher,i=e.algo,c=[],u=[],d=[],h=[],g=[],p=[],f=[],_=[],m=[],v=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var i=0,n=0;for(t=0;t<256;t++){var r=n^n<<1^n<<2^n<<3^n<<4;r=r>>>8^255&r^99,c[i]=r;var s=e[u[r]=i],o=e[s],a=e[o],l=257*e[r]^16843008*r;d[i]=l<<24|l>>>8,h[i]=l<<16|l>>>16,g[i]=l<<8|l>>>24,p[i]=l;l=16843009*a^65537*o^257*s^16843008*i;f[r]=l<<24|l>>>8,_[r]=l<<16|l>>>16,m[r]=l<<8|l>>>24,v[r]=l,i?(i=s^e[e[e[a^s]]],n^=e[e[n]]):i=n=1}}();var C=[0,1,2,4,8,16,32,64,128,27,54],n=i.AES=t.extend({_doReset:function(){for(var e=this._key,t=e.words,i=e.sigBytes/4,n=4*((this._nRounds=i+6)+1),r=this._keySchedule=[],s=0;s<n;s++)if(s<i)r[s]=t[s];else{var o=r[s-1];s%i?6<i&&s%i==4&&(o=c[o>>>24]<<24|c[o>>>16&255]<<16|c[o>>>8&255]<<8|c[255&o]):(o=c[(o=o<<8|o>>>24)>>>24]<<24|c[o>>>16&255]<<16|c[o>>>8&255]<<8|c[255&o],o^=C[s/i|0]<<24),r[s]=r[s-i]^o}for(var a=this._invKeySchedule=[],l=0;l<n;l++){s=n-l;if(l%4)o=r[s];else o=r[s-4];a[l]=l<4||s<=4?o:f[c[o>>>24]]^_[c[o>>>16&255]]^m[c[o>>>8&255]]^v[c[255&o]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,d,h,g,p,c)},decryptBlock:function(e,t){var i=e[t+1];e[t+1]=e[t+3],e[t+3]=i,this._doCryptBlock(e,t,this._invKeySchedule,f,_,m,v,u);i=e[t+1];e[t+1]=e[t+3],e[t+3]=i},_doCryptBlock:function(e,t,i,n,r,s,o,a){for(var l=this._nRounds,c=e[t]^i[0],u=e[t+1]^i[1],d=e[t+2]^i[2],h=e[t+3]^i[3],g=4,p=1;p<l;p++){var f=n[c>>>24]^r[u>>>16&255]^s[d>>>8&255]^o[255&h]^i[g++],_=n[u>>>24]^r[d>>>16&255]^s[h>>>8&255]^o[255&c]^i[g++],m=n[d>>>24]^r[h>>>16&255]^s[c>>>8&255]^o[255&u]^i[g++],v=n[h>>>24]^r[c>>>16&255]^s[u>>>8&255]^o[255&d]^i[g++];c=f,u=_,d=m,h=v}f=(a[c>>>24]<<24|a[u>>>16&255]<<16|a[d>>>8&255]<<8|a[255&h])^i[g++],_=(a[u>>>24]<<24|a[d>>>16&255]<<16|a[h>>>8&255]<<8|a[255&c])^i[g++],m=(a[d>>>24]<<24|a[h>>>16&255]<<16|a[c>>>8&255]<<8|a[255&u])^i[g++],v=(a[h>>>24]<<24|a[c>>>16&255]<<16|a[u>>>8&255]<<8|a[255&d])^i[g++];e[t]=f,e[t+1]=_,e[t+2]=m,e[t+3]=v},keySize:8});e.AES=t._createHelper(n)}(),function(){var e=we,t=e.lib,i=t.WordArray,n=t.BlockCipher,r=e.algo,c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],d=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],h=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],g=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],s=r.DES=n.extend({_doReset:function(){for(var e=this._key.words,t=[],i=0;i<56;i++){var n=c[i]-1;t[i]=e[n>>>5]>>>31-n%32&1}for(var r=this._subKeys=[],s=0;s<16;s++){var o=r[s]=[],a=d[s];for(i=0;i<24;i++)o[i/6|0]|=t[(u[i]-1+a)%28]<<31-i%6,o[4+(i/6|0)]|=t[28+(u[i+24]-1+a)%28]<<31-i%6;o[0]=o[0]<<1|o[0]>>>31;for(i=1;i<7;i++)o[i]=o[i]>>>4*(i-1)+3;o[7]=o[7]<<5|o[7]>>>27}var l=this._invSubKeys=[];for(i=0;i<16;i++)l[i]=r[15-i]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,i){this._lBlock=e[t],this._rBlock=e[t+1],p.call(this,4,252645135),p.call(this,16,65535),f.call(this,2,858993459),f.call(this,8,16711935),p.call(this,1,1431655765);for(var n=0;n<16;n++){for(var r=i[n],s=this._lBlock,o=this._rBlock,a=0,l=0;l<8;l++)a|=h[l][((o^r[l])&g[l])>>>0];this._lBlock=o,this._rBlock=s^a}var c=this._lBlock;this._lBlock=this._rBlock,this._rBlock=c,p.call(this,1,1431655765),f.call(this,8,16711935),f.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function p(e,t){var i=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=i,this._lBlock^=i<<e}function f(e,t){var i=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=i,this._rBlock^=i<<e}e.DES=n._createHelper(s);var o=r.TripleDES=n.extend({_doReset:function(){var e=this._key.words;this._des1=s.createEncryptor(i.create(e.slice(0,2))),this._des2=s.createEncryptor(i.create(e.slice(2,4))),this._des3=s.createEncryptor(i.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=n._createHelper(o)}(),function(){var e=we,t=e.lib.StreamCipher,i=e.algo,n=i.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,i=e.sigBytes,n=this._S=[],r=0;r<256;r++)n[r]=r;r=0;for(var s=0;r<256;r++){var o=r%i,a=t[o>>>2]>>>24-o%4*8&255;s=(s+n[r]+a)%256;var l=n[r];n[r]=n[s],n[s]=l}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=r.call(this)},keySize:8,ivSize:0});function r(){for(var e=this._S,t=this._i,i=this._j,n=0,r=0;r<4;r++){i=(i+e[t=(t+1)%256])%256;var s=e[t];e[t]=e[i],e[i]=s,n|=e[(e[t]+e[i])%256]<<24-8*r}return this._i=t,this._j=i,n}e.RC4=t._createHelper(n);var s=i.RC4Drop=n.extend({cfg:n.cfg.extend({drop:192}),_doReset:function(){n._doReset.call(this);for(var e=this.cfg.drop;0<e;e--)r.call(this)}});e.RC4Drop=t._createHelper(s)}(),we.mode.CTRGladman=function(){var e=we.lib.BlockCipherMode.extend();function c(e){if(255==(e>>24&255)){var t=e>>16&255,i=e>>8&255,n=255&e;255===t?(t=0,255===i?(i=0,255===n?n=0:++n):++i):++t,e=0,e+=t<<16,e+=i<<8,e+=n}else e+=1<<24;return e}var t=e.Encryptor=e.extend({processBlock:function(e,t){var i,n=this._cipher,r=n.blockSize,s=this._iv,o=this._counter;s&&(o=this._counter=s.slice(0),this._iv=void 0),0===((i=o)[0]=c(i[0]))&&(i[1]=c(i[1]));var a=o.slice(0);n.encryptBlock(a,0);for(var l=0;l<r;l++)e[t+l]^=a[l]}});return e.Decryptor=t,e}(),function(){var e=we,t=e.lib.StreamCipher,i=e.algo,r=[],l=[],c=[],n=i.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,i=0;i<4;i++)e[i]=16711935&(e[i]<<8|e[i]>>>24)|4278255360&(e[i]<<24|e[i]>>>8);var n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(i=this._b=0;i<4;i++)h.call(this);for(i=0;i<8;i++)r[i]^=n[i+4&7];if(t){var s=t.words,o=s[0],a=s[1],l=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),u=l>>>16|4294901760&c,d=c<<16|65535&l;r[0]^=l,r[1]^=u,r[2]^=c,r[3]^=d,r[4]^=l,r[5]^=u,r[6]^=c,r[7]^=d;for(i=0;i<4;i++)h.call(this)}},_doProcessBlock:function(e,t){var i=this._X;h.call(this),r[0]=i[0]^i[5]>>>16^i[3]<<16,r[1]=i[2]^i[7]>>>16^i[5]<<16,r[2]=i[4]^i[1]>>>16^i[7]<<16,r[3]=i[6]^i[3]>>>16^i[1]<<16;for(var n=0;n<4;n++)r[n]=16711935&(r[n]<<8|r[n]>>>24)|4278255360&(r[n]<<24|r[n]>>>8),e[t+n]^=r[n]},blockSize:4,ivSize:2});function h(){for(var e=this._X,t=this._C,i=0;i<8;i++)l[i]=t[i];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<l[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<l[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<l[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<l[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<l[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<l[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<l[6]>>>0?1:0)|0,this._b=t[7]>>>0<l[7]>>>0?1:0;for(i=0;i<8;i++){var n=e[i]+t[i],r=65535&n,s=n>>>16,o=((r*r>>>17)+r*s>>>15)+s*s,a=((4294901760&n)*n|0)+((65535&n)*n|0);c[i]=o^a}e[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,e[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,e[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,e[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,e[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,e[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,e[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,e[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}e.Rabbit=t._createHelper(n)}(),we.mode.CTR=(Se=we.lib.BlockCipherMode.extend(),Te=Se.Encryptor=Se.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize,r=this._iv,s=this._counter;r&&(s=this._counter=r.slice(0),this._iv=void 0);var o=s.slice(0);i.encryptBlock(o,0),s[n-1]=s[n-1]+1|0;for(var a=0;a<n;a++)e[t+a]^=o[a]}}),Se.Decryptor=Te,Se),function(){var e=we,t=e.lib.StreamCipher,i=e.algo,r=[],l=[],c=[],n=i.RabbitLegacy=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,i=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],n=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]],r=this._b=0;r<4;r++)h.call(this);for(r=0;r<8;r++)n[r]^=i[r+4&7];if(t){var s=t.words,o=s[0],a=s[1],l=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),u=l>>>16|4294901760&c,d=c<<16|65535&l;n[0]^=l,n[1]^=u,n[2]^=c,n[3]^=d,n[4]^=l,n[5]^=u,n[6]^=c,n[7]^=d;for(r=0;r<4;r++)h.call(this)}},_doProcessBlock:function(e,t){var i=this._X;h.call(this),r[0]=i[0]^i[5]>>>16^i[3]<<16,r[1]=i[2]^i[7]>>>16^i[5]<<16,r[2]=i[4]^i[1]>>>16^i[7]<<16,r[3]=i[6]^i[3]>>>16^i[1]<<16;for(var n=0;n<4;n++)r[n]=16711935&(r[n]<<8|r[n]>>>24)|4278255360&(r[n]<<24|r[n]>>>8),e[t+n]^=r[n]},blockSize:4,ivSize:2});function h(){for(var e=this._X,t=this._C,i=0;i<8;i++)l[i]=t[i];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<l[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<l[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<l[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<l[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<l[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<l[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<l[6]>>>0?1:0)|0,this._b=t[7]>>>0<l[7]>>>0?1:0;for(i=0;i<8;i++){var n=e[i]+t[i],r=65535&n,s=n>>>16,o=((r*r>>>17)+r*s>>>15)+s*s,a=((4294901760&n)*n|0)+((65535&n)*n|0);c[i]=o^a}e[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,e[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,e[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,e[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,e[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,e[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,e[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,e[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}e.RabbitLegacy=t._createHelper(n)}(),we.pad.ZeroPadding={pad:function(e,t){var i=4*t;e.clamp(),e.sigBytes+=i-(e.sigBytes%i||i)},unpad:function(e){for(var t=e.words,i=e.sigBytes-1;!(t[i>>>2]>>>24-i%4*8&255);)i--;e.sigBytes=i+1}},we}),function(e,t){"object"==typeof exports?module.exports=exports=t(require("./core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/enc-base64",["./core"],t):t(e.CryptoJS)}(this,function(e){var t,c;return c=(t=e).lib.WordArray,t.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,n=this._map;e.clamp();for(var r=[],s=0;s<i;s+=3)for(var o=(t[s>>>2]>>>24-s%4*8&255)<<16|(t[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|t[s+2>>>2]>>>24-(s+2)%4*8&255,a=0;a<4&&s+.75*a<i;a++)r.push(n.charAt(o>>>6*(3-a)&63));var l=n.charAt(64);if(l)for(;r.length%4;)r.push(l);return r.join("")},parse:function(e){var t=e.length,i=this._map,n=i.charAt(64);if(n){var r=e.indexOf(n);-1!=r&&(t=r)}for(var s=[],o=0,a=0;a<t;a++)if(a%4){var l=i.indexOf(e.charAt(a-1))<<a%4*2|i.indexOf(e.charAt(a))>>>6-a%4*2;s[o>>>2]|=l<<24-o%4*8,o++}return c.create(s,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.enc.Base64}),function(e,t){"object"==typeof exports?module.exports=exports=t(require("./core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/enc-hex",["./core"],t):t(e.CryptoJS)}(this,function(e){return e.enc.Hex}),function(e,t){"object"==typeof exports?module.exports=exports=t(require("./core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/enc-latin1",["./core"],t):t(e.CryptoJS)}(this,function(e){return e.enc.Latin1}),function(e,t){"object"==typeof exports?module.exports=exports=t(require("./core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/enc-utf16",["./core"],t):t(e.CryptoJS)}(this,function(i){return function(){var e=i,r=e.lib.WordArray,t=e.enc;t.Utf16=t.Utf16BE={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],r=0;r<i;r+=2){var s=t[r>>>2]>>>16-r%4*8&65535;n.push(String.fromCharCode(s))}return n.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>1]|=e.charCodeAt(n)<<16-n%2*16;return r.create(i,2*t)}};function o(e){return e<<8&4278255360|e>>>8&16711935}t.Utf16LE={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],r=0;r<i;r+=2){var s=o(t[r>>>2]>>>16-r%4*8&65535);n.push(String.fromCharCode(s))}return n.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>1]|=o(e.charCodeAt(n)<<16-n%2*16);return r.create(i,2*t)}}}(),i.enc.Utf16}),function(e,t){"object"==typeof exports?module.exports=exports=t(require("./core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/enc-utf8",["./core"],t):t(e.CryptoJS)}(this,function(e){return e.enc.Utf8}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./sha1"),require("./hmac")):"function"==typeof define&&define.amd?define("vendor/crypto-js/evpkdf",["./core","./sha1","./hmac"],t):t(e.CryptoJS)}(this,function(e){var t,i,n,u,r,s,o;return i=(t=e).lib,n=i.Base,u=i.WordArray,r=t.algo,s=r.MD5,o=r.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:s,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,n=i.hasher.create(),r=u.create(),s=r.words,o=i.keySize,a=i.iterations;s.length<o;){l&&n.update(l);var l=n.update(e).finalize(t);n.reset();for(var c=1;c<a;c++)l=n.finalize(l),n.reset();r.concat(l)}return r.sigBytes=4*o,r}}),t.EvpKDF=function(e,t,i){return o.create(i).compute(e,t)},e.EvpKDF}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./cipher-core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/format-hex",["./core","./cipher-core"],t):t(e.CryptoJS)}(this,function(e){var t,i,n;return i=(t=e).lib.CipherParams,n=t.enc.Hex,t.format.Hex={stringify:function(e){return e.ciphertext.toString(n)},parse:function(e){var t=n.parse(e);return i.create({ciphertext:t})}},e.format.Hex}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./cipher-core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/format-openssl",["./core","./cipher-core"],t):t(e.CryptoJS)}(this,function(e){return e.format.OpenSSL}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./md5"),require("./hmac")):"function"==typeof define&&define.amd?define("vendor/crypto-js/hmac-md5",["./core","./md5","./hmac"],t):t(e.CryptoJS)}(this,function(e){return e.HmacMD5}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./ripemd160"),require("./hmac")):"function"==typeof define&&define.amd?define("vendor/crypto-js/hmac-ripemd160",["./core","./ripemd160","./hmac"],t):t(e.CryptoJS)}(this,function(e){return e.HmacRIPEMD160}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./sha1"),require("./hmac")):"function"==typeof define&&define.amd?define("vendor/crypto-js/hmac-sha1",["./core","./sha1","./hmac"],t):t(e.CryptoJS)}(this,function(e){return e.HmacSHA1}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./sha256"),require("./sha224"),require("./hmac")):"function"==typeof define&&define.amd?define("vendor/crypto-js/hmac-sha224",["./core","./sha256","./sha224","./hmac"],t):t(e.CryptoJS)}(this,function(e){return e.HmacSHA224}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./sha256"),require("./hmac")):"function"==typeof define&&define.amd?define("vendor/crypto-js/hmac-sha256",["./core","./sha256","./hmac"],t):t(e.CryptoJS)}(this,function(e){return e.HmacSHA256}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./x64-core"),require("./sha3"),require("./hmac")):"function"==typeof define&&define.amd?define("vendor/crypto-js/hmac-sha3",["./core","./x64-core","./sha3","./hmac"],t):t(e.CryptoJS)}(this,function(e){return e.HmacSHA3}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./x64-core"),require("./sha512"),require("./sha384"),require("./hmac")):"function"==typeof define&&define.amd?define("vendor/crypto-js/hmac-sha384",["./core","./x64-core","./sha512","./sha384","./hmac"],t):t(e.CryptoJS)}(this,function(e){return e.HmacSHA384}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./x64-core"),require("./sha512"),require("./hmac")):"function"==typeof define&&define.amd?define("vendor/crypto-js/hmac-sha512",["./core","./x64-core","./sha512","./hmac"],t):t(e.CryptoJS)}(this,function(e){return e.HmacSHA512}),function(e,t){"object"==typeof exports?module.exports=exports=t(require("./core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/hmac",["./core"],t):t(e.CryptoJS)}(this,function(e){var t,i,c;i=(t=e).lib.Base,c=t.enc.Utf8,t.algo.HMAC=i.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=c.parse(t));var i=e.blockSize,n=4*i;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var r=this._oKey=t.clone(),s=this._iKey=t.clone(),o=r.words,a=s.words,l=0;l<i;l++)o[l]^=1549556828,a[l]^=909522486;r.sigBytes=s.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,i=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(i))}})}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./x64-core"),require("./lib-typedarrays"),require("./enc-utf16"),require("./enc-base64"),require("./md5"),require("./sha1"),require("./sha256"),require("./sha224"),require("./sha512"),require("./sha384"),require("./sha3"),require("./ripemd160"),require("./hmac"),require("./pbkdf2"),require("./evpkdf"),require("./cipher-core"),require("./mode-cfb"),require("./mode-ctr"),require("./mode-ctr-gladman"),require("./mode-ofb"),require("./mode-ecb"),require("./pad-ansix923"),require("./pad-iso10126"),require("./pad-iso97971"),require("./pad-zeropadding"),require("./pad-nopadding"),require("./format-hex"),require("./aes"),require("./tripledes"),require("./rc4"),require("./rabbit"),require("./rabbit-legacy")):"function"==typeof define&&define.amd?define("vendor/crypto-js/index",["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy"],t):e.CryptoJS=t(e.CryptoJS)}(this,function(e){return e}),function(e,t){"object"==typeof exports?module.exports=exports=t(require("./core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/lib-typedarrays",["./core"],t):t(e.CryptoJS)}(this,function(t){return function(){if("function"==typeof ArrayBuffer){var e=t.lib.WordArray,r=e.init;(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,i=[],n=0;n<t;n++)i[n>>>2]|=e[n]<<24-n%4*8;r.call(this,i,t)}else r.apply(this,arguments)}).prototype=e}}(),t.lib.WordArray}),function(e,t){"object"==typeof exports?module.exports=exports=t(require("./core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/md5",["./core"],t):t(e.CryptoJS)}(this,function(o){return function(u){var e=o,t=e.lib,i=t.WordArray,n=t.Hasher,r=e.algo,T=[];!function(){for(var e=0;e<64;e++)T[e]=4294967296*u.abs(u.sin(e+1))|0}();var s=r.MD5=n.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var n=t+i,r=e[n];e[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var s=this._hash.words,o=e[t+0],a=e[t+1],l=e[t+2],c=e[t+3],u=e[t+4],d=e[t+5],h=e[t+6],g=e[t+7],p=e[t+8],f=e[t+9],_=e[t+10],m=e[t+11],v=e[t+12],C=e[t+13],A=e[t+14],E=e[t+15],I=s[0],y=s[1],b=s[2],S=s[3];y=k(y=k(y=k(y=k(y=D(y=D(y=D(y=D(y=P(y=P(y=P(y=P(y=w(y=w(y=w(y=w(y,b=w(b,S=w(S,I=w(I,y,b,S,o,7,T[0]),y,b,a,12,T[1]),I,y,l,17,T[2]),S,I,c,22,T[3]),b=w(b,S=w(S,I=w(I,y,b,S,u,7,T[4]),y,b,d,12,T[5]),I,y,h,17,T[6]),S,I,g,22,T[7]),b=w(b,S=w(S,I=w(I,y,b,S,p,7,T[8]),y,b,f,12,T[9]),I,y,_,17,T[10]),S,I,m,22,T[11]),b=w(b,S=w(S,I=w(I,y,b,S,v,7,T[12]),y,b,C,12,T[13]),I,y,A,17,T[14]),S,I,E,22,T[15]),b=P(b,S=P(S,I=P(I,y,b,S,a,5,T[16]),y,b,h,9,T[17]),I,y,m,14,T[18]),S,I,o,20,T[19]),b=P(b,S=P(S,I=P(I,y,b,S,d,5,T[20]),y,b,_,9,T[21]),I,y,E,14,T[22]),S,I,u,20,T[23]),b=P(b,S=P(S,I=P(I,y,b,S,f,5,T[24]),y,b,A,9,T[25]),I,y,c,14,T[26]),S,I,p,20,T[27]),b=P(b,S=P(S,I=P(I,y,b,S,C,5,T[28]),y,b,l,9,T[29]),I,y,g,14,T[30]),S,I,v,20,T[31]),b=D(b,S=D(S,I=D(I,y,b,S,d,4,T[32]),y,b,p,11,T[33]),I,y,m,16,T[34]),S,I,A,23,T[35]),b=D(b,S=D(S,I=D(I,y,b,S,a,4,T[36]),y,b,u,11,T[37]),I,y,g,16,T[38]),S,I,_,23,T[39]),b=D(b,S=D(S,I=D(I,y,b,S,C,4,T[40]),y,b,o,11,T[41]),I,y,c,16,T[42]),S,I,h,23,T[43]),b=D(b,S=D(S,I=D(I,y,b,S,f,4,T[44]),y,b,v,11,T[45]),I,y,E,16,T[46]),S,I,l,23,T[47]),b=k(b,S=k(S,I=k(I,y,b,S,o,6,T[48]),y,b,g,10,T[49]),I,y,A,15,T[50]),S,I,d,21,T[51]),b=k(b,S=k(S,I=k(I,y,b,S,v,6,T[52]),y,b,c,10,T[53]),I,y,_,15,T[54]),S,I,a,21,T[55]),b=k(b,S=k(S,I=k(I,y,b,S,p,6,T[56]),y,b,E,10,T[57]),I,y,h,15,T[58]),S,I,C,21,T[59]),b=k(b,S=k(S,I=k(I,y,b,S,u,6,T[60]),y,b,m,10,T[61]),I,y,l,15,T[62]),S,I,f,21,T[63]),s[0]=s[0]+I|0,s[1]=s[1]+y|0,s[2]=s[2]+b|0,s[3]=s[3]+S|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32;var r=u.floor(i/4294967296),s=i;t[15+(n+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t[14+(n+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),e.sigBytes=4*(t.length+1),this._process();for(var o=this._hash,a=o.words,l=0;l<4;l++){var c=a[l];a[l]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return o},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});function w(e,t,i,n,r,s,o){var a=e+(t&i|~t&n)+r+o;return(a<<s|a>>>32-s)+t}function P(e,t,i,n,r,s,o){var a=e+(t&n|i&~n)+r+o;return(a<<s|a>>>32-s)+t}function D(e,t,i,n,r,s,o){var a=e+(t^i^n)+r+o;return(a<<s|a>>>32-s)+t}function k(e,t,i,n,r,s,o){var a=e+(i^(t|~n))+r+o;return(a<<s|a>>>32-s)+t}e.MD5=n._createHelper(s),e.HmacMD5=n._createHmacHelper(s)}(Math),o.MD5}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./cipher-core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/mode-cfb",["./core","./cipher-core"],t):t(e.CryptoJS)}(this,function(t){return t.mode.CFB=function(){var e=t.lib.BlockCipherMode.extend();function s(e,t,i,n){var r=this._iv;if(r){var s=r.slice(0);this._iv=void 0}else s=this._prevBlock;n.encryptBlock(s,0);for(var o=0;o<i;o++)e[t+o]^=s[o]}return e.Encryptor=e.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize;s.call(this,e,t,n,i),this._prevBlock=e.slice(t,t+n)}}),e.Decryptor=e.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize,r=e.slice(t,t+n);s.call(this,e,t,n,i),this._prevBlock=r}}),e}(),t.mode.CFB}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./cipher-core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/mode-ctr-gladman",["./core","./cipher-core"],t):t(e.CryptoJS)}(this,function(i){return i.mode.CTRGladman=function(){var e=i.lib.BlockCipherMode.extend();function c(e){if(255==(e>>24&255)){var t=e>>16&255,i=e>>8&255,n=255&e;255===t?(t=0,255===i?(i=0,255===n?n=0:++n):++i):++t,e=0,e+=t<<16,e+=i<<8,e+=n}else e+=1<<24;return e}var t=e.Encryptor=e.extend({processBlock:function(e,t){var i,n=this._cipher,r=n.blockSize,s=this._iv,o=this._counter;s&&(o=this._counter=s.slice(0),this._iv=void 0),0===((i=o)[0]=c(i[0]))&&(i[1]=c(i[1]));var a=o.slice(0);n.encryptBlock(a,0);for(var l=0;l<r;l++)e[t+l]^=a[l]}});return e.Decryptor=t,e}(),i.mode.CTRGladman}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./cipher-core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/mode-ctr",["./core","./cipher-core"],t):t(e.CryptoJS)}(this,function(e){var t,i;return e.mode.CTR=(t=e.lib.BlockCipherMode.extend(),i=t.Encryptor=t.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize,r=this._iv,s=this._counter;r&&(s=this._counter=r.slice(0),this._iv=void 0);var o=s.slice(0);i.encryptBlock(o,0),s[n-1]=s[n-1]+1|0;for(var a=0;a<n;a++)e[t+a]^=o[a]}}),t.Decryptor=i,t),e.mode.CTR}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./cipher-core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/mode-ecb",["./core","./cipher-core"],t):t(e.CryptoJS)}(this,function(e){var t;return e.mode.ECB=((t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t),e.mode.ECB}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./cipher-core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/mode-ofb",["./core","./cipher-core"],t):t(e.CryptoJS)}(this,function(e){var t,i;return e.mode.OFB=(t=e.lib.BlockCipherMode.extend(),i=t.Encryptor=t.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize,r=this._iv,s=this._keystream;r&&(s=this._keystream=r.slice(0),this._iv=void 0),i.encryptBlock(s,0);for(var o=0;o<n;o++)e[t+o]^=s[o]}}),t.Decryptor=i,t),e.mode.OFB}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./cipher-core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/pad-ansix923",["./core","./cipher-core"],t):t(e.CryptoJS)}(this,function(e){return e.pad.AnsiX923={pad:function(e,t){var i=e.sigBytes,n=4*t,r=n-i%n,s=i+r-1;e.clamp(),e.words[s>>>2]|=r<<24-s%4*8,e.sigBytes+=r},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./cipher-core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/pad-iso10126",["./core","./cipher-core"],t):t(e.CryptoJS)}(this,function(r){return r.pad.Iso10126={pad:function(e,t){var i=4*t,n=i-e.sigBytes%i;e.concat(r.lib.WordArray.random(n-1)).concat(r.lib.WordArray.create([n<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},r.pad.Iso10126}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./cipher-core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/pad-iso97971",["./core","./cipher-core"],t):t(e.CryptoJS)}(this,function(i){return i.pad.Iso97971={pad:function(e,t){e.concat(i.lib.WordArray.create([2147483648],1)),i.pad.ZeroPadding.pad(e,t)},unpad:function(e){i.pad.ZeroPadding.unpad(e),e.sigBytes--}},i.pad.Iso97971}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./cipher-core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/pad-nopadding",["./core","./cipher-core"],t):t(e.CryptoJS)}(this,function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./cipher-core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/pad-pkcs7",["./core","./cipher-core"],t):t(e.CryptoJS)}(this,function(e){return e.pad.Pkcs7}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./cipher-core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/pad-zeropadding",["./core","./cipher-core"],t):t(e.CryptoJS)}(this,function(e){return e.pad.ZeroPadding={pad:function(e,t){var i=4*t;e.clamp(),e.sigBytes+=i-(e.sigBytes%i||i)},unpad:function(e){for(var t=e.words,i=e.sigBytes-1;!(t[i>>>2]>>>24-i%4*8&255);)i--;e.sigBytes=i+1}},e.pad.ZeroPadding}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./sha1"),require("./hmac")):"function"==typeof define&&define.amd?define("vendor/crypto-js/pbkdf2",["./core","./sha1","./hmac"],t):t(e.CryptoJS)}(this,function(e){var t,i,n,m,r,s,v,o;return i=(t=e).lib,n=i.Base,m=i.WordArray,r=t.algo,s=r.SHA1,v=r.HMAC,o=r.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:s,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,n=v.create(i.hasher,e),r=m.create(),s=m.create([1]),o=r.words,a=s.words,l=i.keySize,c=i.iterations;o.length<l;){var u=n.update(t).finalize(s);n.reset();for(var d=u.words,h=d.length,g=u,p=1;p<c;p++){g=n.finalize(g),n.reset();for(var f=g.words,_=0;_<h;_++)d[_]^=f[_]}r.concat(u),a[0]++}return r.sigBytes=4*l,r}}),t.PBKDF2=function(e,t,i){return o.create(i).compute(e,t)},e.PBKDF2}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./enc-base64"),require("./md5"),require("./evpkdf"),require("./cipher-core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/rabbit-legacy",["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],t):t(e.CryptoJS)}(this,function(s){return function(){var e=s,t=e.lib.StreamCipher,i=e.algo,r=[],l=[],c=[],n=i.RabbitLegacy=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,i=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],n=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]],r=this._b=0;r<4;r++)h.call(this);for(r=0;r<8;r++)n[r]^=i[r+4&7];if(t){var s=t.words,o=s[0],a=s[1],l=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),u=l>>>16|4294901760&c,d=c<<16|65535&l;n[0]^=l,n[1]^=u,n[2]^=c,n[3]^=d,n[4]^=l,n[5]^=u,n[6]^=c,n[7]^=d;for(r=0;r<4;r++)h.call(this)}},_doProcessBlock:function(e,t){var i=this._X;h.call(this),r[0]=i[0]^i[5]>>>16^i[3]<<16,r[1]=i[2]^i[7]>>>16^i[5]<<16,r[2]=i[4]^i[1]>>>16^i[7]<<16,r[3]=i[6]^i[3]>>>16^i[1]<<16;for(var n=0;n<4;n++)r[n]=16711935&(r[n]<<8|r[n]>>>24)|4278255360&(r[n]<<24|r[n]>>>8),e[t+n]^=r[n]},blockSize:4,ivSize:2});function h(){for(var e=this._X,t=this._C,i=0;i<8;i++)l[i]=t[i];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<l[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<l[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<l[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<l[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<l[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<l[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<l[6]>>>0?1:0)|0,this._b=t[7]>>>0<l[7]>>>0?1:0;for(i=0;i<8;i++){var n=e[i]+t[i],r=65535&n,s=n>>>16,o=((r*r>>>17)+r*s>>>15)+s*s,a=((4294901760&n)*n|0)+((65535&n)*n|0);c[i]=o^a}e[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,e[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,e[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,e[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,e[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,e[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,e[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,e[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}e.RabbitLegacy=t._createHelper(n)}(),s.RabbitLegacy}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./enc-base64"),require("./md5"),require("./evpkdf"),require("./cipher-core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/rabbit",["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],t):t(e.CryptoJS)}(this,function(s){return function(){var e=s,t=e.lib.StreamCipher,i=e.algo,r=[],l=[],c=[],n=i.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,i=0;i<4;i++)e[i]=16711935&(e[i]<<8|e[i]>>>24)|4278255360&(e[i]<<24|e[i]>>>8);var n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(i=this._b=0;i<4;i++)h.call(this);for(i=0;i<8;i++)r[i]^=n[i+4&7];if(t){var s=t.words,o=s[0],a=s[1],l=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),u=l>>>16|4294901760&c,d=c<<16|65535&l;r[0]^=l,r[1]^=u,r[2]^=c,r[3]^=d,r[4]^=l,r[5]^=u,r[6]^=c,r[7]^=d;for(i=0;i<4;i++)h.call(this)}},_doProcessBlock:function(e,t){var i=this._X;h.call(this),r[0]=i[0]^i[5]>>>16^i[3]<<16,r[1]=i[2]^i[7]>>>16^i[5]<<16,r[2]=i[4]^i[1]>>>16^i[7]<<16,r[3]=i[6]^i[3]>>>16^i[1]<<16;for(var n=0;n<4;n++)r[n]=16711935&(r[n]<<8|r[n]>>>24)|4278255360&(r[n]<<24|r[n]>>>8),e[t+n]^=r[n]},blockSize:4,ivSize:2});function h(){for(var e=this._X,t=this._C,i=0;i<8;i++)l[i]=t[i];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<l[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<l[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<l[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<l[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<l[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<l[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<l[6]>>>0?1:0)|0,this._b=t[7]>>>0<l[7]>>>0?1:0;for(i=0;i<8;i++){var n=e[i]+t[i],r=65535&n,s=n>>>16,o=((r*r>>>17)+r*s>>>15)+s*s,a=((4294901760&n)*n|0)+((65535&n)*n|0);c[i]=o^a}e[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,e[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,e[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,e[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,e[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,e[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,e[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,e[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}e.Rabbit=t._createHelper(n)}(),s.Rabbit}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./enc-base64"),require("./md5"),require("./evpkdf"),require("./cipher-core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/rc4",["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],t):t(e.CryptoJS)}(this,function(o){return function(){var e=o,t=e.lib.StreamCipher,i=e.algo,n=i.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,i=e.sigBytes,n=this._S=[],r=0;r<256;r++)n[r]=r;r=0;for(var s=0;r<256;r++){var o=r%i,a=t[o>>>2]>>>24-o%4*8&255;s=(s+n[r]+a)%256;var l=n[r];n[r]=n[s],n[s]=l}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=r.call(this)},keySize:8,ivSize:0});function r(){for(var e=this._S,t=this._i,i=this._j,n=0,r=0;r<4;r++){i=(i+e[t=(t+1)%256])%256;var s=e[t];e[t]=e[i],e[i]=s,n|=e[(e[t]+e[i])%256]<<24-8*r}return this._i=t,this._j=i,n}e.RC4=t._createHelper(n);var s=i.RC4Drop=n.extend({cfg:n.cfg.extend({drop:192}),_doReset:function(){n._doReset.call(this);for(var e=this.cfg.drop;0<e;e--)r.call(this)}});e.RC4Drop=t._createHelper(s)}(),o.RC4}),function(e,t){"object"==typeof exports?module.exports=exports=t(require("./core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/ripemd160",["./core"],t):t(e.CryptoJS)}(this,function(a){return function(e){var t=a,i=t.lib,n=i.WordArray,r=i.Hasher,s=t.algo,y=n.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),b=n.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),S=n.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),T=n.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),w=n.create([0,1518500249,1859775393,2400959708,2840853838]),P=n.create([1352829926,1548603684,1836072691,2053994217,0]),o=s.RIPEMD160=r.extend({_doReset:function(){this._hash=n.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var n=t+i,r=e[n];e[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var s,o,a,l,c,u,d,h,g,p,f,_=this._hash.words,m=w.words,v=P.words,C=y.words,A=b.words,E=S.words,I=T.words;u=s=_[0],d=o=_[1],h=a=_[2],g=l=_[3],p=c=_[4];for(i=0;i<80;i+=1)f=s+e[t+C[i]]|0,f+=i<16?D(o,a,l)+m[0]:i<32?k(o,a,l)+m[1]:i<48?O(o,a,l)+m[2]:i<64?R(o,a,l)+m[3]:L(o,a,l)+m[4],f=(f=x(f|=0,E[i]))+c|0,s=c,c=l,l=x(a,10),a=o,o=f,f=u+e[t+A[i]]|0,f+=i<16?L(d,h,g)+v[0]:i<32?R(d,h,g)+v[1]:i<48?O(d,h,g)+v[2]:i<64?k(d,h,g)+v[3]:D(d,h,g)+v[4],f=(f=x(f|=0,I[i]))+p|0,u=p,p=g,g=x(h,10),h=d,d=f;f=_[1]+a+g|0,_[1]=_[2]+l+p|0,_[2]=_[3]+c+u|0,_[3]=_[4]+s+d|0,_[4]=_[0]+o+h|0,_[0]=f},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(t.length+1),this._process();for(var r=this._hash,s=r.words,o=0;o<5;o++){var a=s[o];s[o]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return r},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});function D(e,t,i){return e^t^i}function k(e,t,i){return e&t|~e&i}function O(e,t,i){return(e|~t)^i}function R(e,t,i){return e&i|t&~i}function L(e,t,i){return e^(t|~i)}function x(e,t){return e<<t|e>>>32-t}t.RIPEMD160=r._createHelper(o),t.HmacRIPEMD160=r._createHmacHelper(o)}(Math),a.RIPEMD160}),function(e,t){"object"==typeof exports?module.exports=exports=t(require("./core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/sha1",["./core"],t):t(e.CryptoJS)}(this,function(e){var t,i,n,r,s,d,o;return i=(t=e).lib,n=i.WordArray,r=i.Hasher,s=t.algo,d=[],o=s.SHA1=r.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],r=i[1],s=i[2],o=i[3],a=i[4],l=0;l<80;l++){if(l<16)d[l]=0|e[t+l];else{var c=d[l-3]^d[l-8]^d[l-14]^d[l-16];d[l]=c<<1|c>>>31}var u=(n<<5|n>>>27)+a+d[l];u+=l<20?1518500249+(r&s|~r&o):l<40?1859775393+(r^s^o):l<60?(r&s|r&o|s&o)-1894007588:(r^s^o)-899497514,a=o,o=s,s=r<<30|r>>>2,r=n,n=u}i[0]=i[0]+n|0,i[1]=i[1]+r|0,i[2]=i[2]+s|0,i[3]=i[3]+o|0,i[4]=i[4]+a|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(i/4294967296),t[15+(n+64>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA1=r._createHelper(o),t.HmacSHA1=r._createHmacHelper(o),e.SHA1}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./sha256")):"function"==typeof define&&define.amd?define("vendor/crypto-js/sha224",["./core","./sha256"],t):t(e.CryptoJS)}(this,function(e){var t,i,n,r,s;return i=(t=e).lib.WordArray,n=t.algo,r=n.SHA256,s=n.SHA224=r.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=4,e}}),t.SHA224=r._createHelper(s),t.HmacSHA224=r._createHmacHelper(s),e.SHA224}),function(e,t){"object"==typeof exports?module.exports=exports=t(require("./core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/sha256",["./core"],t):t(e.CryptoJS)}(this,function(l){return function(r){var e=l,t=e.lib,i=t.WordArray,n=t.Hasher,s=e.algo,o=[],C=[];!function(){function e(e){for(var t=r.sqrt(e),i=2;i<=t;i++)if(!(e%i))return!1;return!0}function t(e){return 4294967296*(e-(0|e))|0}for(var i=2,n=0;n<64;)e(i)&&(n<8&&(o[n]=t(r.pow(i,.5))),C[n]=t(r.pow(i,1/3)),n++),i++}();var A=[],a=s.SHA256=n.extend({_doReset:function(){this._hash=new i.init(o.slice(0))},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],r=i[1],s=i[2],o=i[3],a=i[4],l=i[5],c=i[6],u=i[7],d=0;d<64;d++){if(d<16)A[d]=0|e[t+d];else{var h=A[d-15],g=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,p=A[d-2],f=(p<<15|p>>>17)^(p<<13|p>>>19)^p>>>10;A[d]=g+A[d-7]+f+A[d-16]}var _=n&r^n&s^r&s,m=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),v=u+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&l^~a&c)+C[d]+A[d];u=c,c=l,l=a,a=o+v|0,o=s,s=r,r=n,n=v+(m+_)|0}i[0]=i[0]+n|0,i[1]=i[1]+r|0,i[2]=i[2]+s|0,i[3]=i[3]+o|0,i[4]=i[4]+a|0,i[5]=i[5]+l|0,i[6]=i[6]+c|0,i[7]=i[7]+u|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=r.floor(i/4294967296),t[15+(n+64>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA256=n._createHelper(a),e.HmacSHA256=n._createHmacHelper(a)}(Math),l.SHA256}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./x64-core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/sha3",["./core","./x64-core"],t):t(e.CryptoJS)}(this,function(s){return function(h){var e=s,t=e.lib,g=t.WordArray,n=t.Hasher,u=e.x64.Word,i=e.algo,D=[],k=[],O=[];!function(){for(var e=1,t=0,i=0;i<24;i++){D[e+5*t]=(i+1)*(i+2)/2%64;var n=(2*e+3*t)%5;e=t%5,t=n}for(e=0;e<5;e++)for(t=0;t<5;t++)k[e+5*t]=t+(2*e+3*t)%5*5;for(var r=1,s=0;s<24;s++){for(var o=0,a=0,l=0;l<7;l++){if(1&r){var c=(1<<l)-1;c<32?a^=1<<c:o^=1<<c-32}128&r?r=r<<1^113:r<<=1}O[s]=u.create(o,a)}}();var R=[];!function(){for(var e=0;e<25;e++)R[e]=u.create()}();var r=i.SHA3=n.extend({cfg:n.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new u.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var i=this._state,n=this.blockSize/2,r=0;r<n;r++){var s=e[t+2*r],o=e[t+2*r+1];s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),(b=i[r]).high^=o,b.low^=s}for(var a=0;a<24;a++){for(var l=0;l<5;l++){for(var c=0,u=0,d=0;d<5;d++){c^=(b=i[l+5*d]).high,u^=b.low}var h=R[l];h.high=c,h.low=u}for(l=0;l<5;l++){var g=R[(l+4)%5],p=R[(l+1)%5],f=p.high,_=p.low;for(c=g.high^(f<<1|_>>>31),u=g.low^(_<<1|f>>>31),d=0;d<5;d++){(b=i[l+5*d]).high^=c,b.low^=u}}for(var m=1;m<25;m++){var v=(b=i[m]).high,C=b.low,A=D[m];if(A<32)c=v<<A|C>>>32-A,u=C<<A|v>>>32-A;else c=C<<A-32|v>>>64-A,u=v<<A-32|C>>>64-A;var E=R[k[m]];E.high=c,E.low=u}var I=R[0],y=i[0];I.high=y.high,I.low=y.low;for(l=0;l<5;l++)for(d=0;d<5;d++){var b=i[m=l+5*d],S=R[m],T=R[(l+1)%5+5*d],w=R[(l+2)%5+5*d];b.high=S.high^~T.high&w.high,b.low=S.low^~T.low&w.low}b=i[0];var P=O[a];b.high^=P.high,b.low^=P.low}},_doFinalize:function(){var e=this._data,t=e.words,i=(this._nDataBytes,8*e.sigBytes),n=32*this.blockSize;t[i>>>5]|=1<<24-i%32,t[(h.ceil((i+1)/n)*n>>>5)-1]|=128,e.sigBytes=4*t.length,this._process();for(var r=this._state,s=this.cfg.outputLength/8,o=s/8,a=[],l=0;l<o;l++){var c=r[l],u=c.high,d=c.low;u=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),a.push(d),a.push(u)}return new g.init(a,s)},clone:function(){for(var e=n.clone.call(this),t=e._state=this._state.slice(0),i=0;i<25;i++)t[i]=t[i].clone();return e}});e.SHA3=n._createHelper(r),e.HmacSHA3=n._createHmacHelper(r)}(Math),s.SHA3}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./x64-core"),require("./sha512")):"function"==typeof define&&define.amd?define("vendor/crypto-js/sha384",["./core","./x64-core","./sha512"],t):t(e.CryptoJS)}(this,function(e){var t,i,n,r,s,o,a;return i=(t=e).x64,n=i.Word,r=i.WordArray,s=t.algo,o=s.SHA512,a=s.SHA384=o.extend({_doReset:function(){this._hash=new r.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=16,e}}),t.SHA384=o._createHelper(a),t.HmacSHA384=o._createHmacHelper(a),e.SHA384}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./x64-core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/sha512",["./core","./x64-core"],t):t(e.CryptoJS)}(this,function(l){return function(){var e=l,t=e.lib.Hasher,i=e.x64,n=i.Word,r=i.WordArray,s=e.algo;function o(){return n.create.apply(n,arguments)}var ye=[o(1116352408,3609767458),o(1899447441,602891725),o(3049323471,3964484399),o(3921009573,2173295548),o(961987163,4081628472),o(1508970993,3053834265),o(2453635748,2937671579),o(2870763221,3664609560),o(3624381080,2734883394),o(310598401,1164996542),o(607225278,1323610764),o(1426881987,3590304994),o(1925078388,4068182383),o(2162078206,991336113),o(2614888103,633803317),o(3248222580,3479774868),o(3835390401,2666613458),o(4022224774,944711139),o(264347078,2341262773),o(604807628,2007800933),o(770255983,1495990901),o(1249150122,1856431235),o(1555081692,3175218132),o(1996064986,2198950837),o(2554220882,3999719339),o(2821834349,766784016),o(2952996808,2566594879),o(3210313671,3203337956),o(3336571891,1034457026),o(3584528711,2466948901),o(113926993,3758326383),o(338241895,168717936),o(666307205,1188179964),o(773529912,1546045734),o(1294757372,1522805485),o(1396182291,2643833823),o(1695183700,2343527390),o(1986661051,1014477480),o(2177026350,1206759142),o(2456956037,344077627),o(2730485921,1290863460),o(2820302411,3158454273),o(3259730800,3505952657),o(3345764771,106217008),o(3516065817,3606008344),o(3600352804,1432725776),o(4094571909,1467031594),o(275423344,851169720),o(430227734,3100823752),o(506948616,1363258195),o(659060556,3750685593),o(883997877,3785050280),o(958139571,3318307427),o(1322822218,3812723403),o(1537002063,2003034995),o(1747873779,3602036899),o(1955562222,1575990012),o(2024104815,1125592928),o(2227730452,2716904306),o(2361852424,442776044),o(2428436474,593698344),o(2756734187,3733110249),o(3204031479,2999351573),o(3329325298,3815920427),o(3391569614,3928383900),o(3515267271,566280711),o(3940187606,3454069534),o(4118630271,4000239992),o(116418474,1914138554),o(174292421,2731055270),o(289380356,3203993006),o(460393269,320620315),o(685471733,587496836),o(852142971,1086792851),o(1017036298,365543100),o(1126000580,2618297676),o(1288033470,3409855158),o(1501505948,4234509866),o(1607167915,987167468),o(1816402316,1246189591)],be=[];!function(){for(var e=0;e<80;e++)be[e]=o()}();var a=s.SHA512=t.extend({_doReset:function(){this._hash=new r.init([new n.init(1779033703,4089235720),new n.init(3144134277,2227873595),new n.init(1013904242,4271175723),new n.init(2773480762,1595750129),new n.init(1359893119,2917565137),new n.init(2600822924,725511199),new n.init(528734635,4215389547),new n.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],r=i[1],s=i[2],o=i[3],a=i[4],l=i[5],c=i[6],u=i[7],d=n.high,h=n.low,g=r.high,p=r.low,f=s.high,_=s.low,m=o.high,v=o.low,C=a.high,A=a.low,E=l.high,I=l.low,y=c.high,b=c.low,S=u.high,T=u.low,w=d,P=h,D=g,k=p,O=f,R=_,L=m,x=v,N=C,M=A,B=E,F=I,U=y,V=b,W=S,H=T,Y=0;Y<80;Y++){var K=be[Y];if(Y<16)var G=K.high=0|e[t+2*Y],j=K.low=0|e[t+2*Y+1];else{var q=be[Y-15],z=q.high,Q=q.low,J=(z>>>1|Q<<31)^(z>>>8|Q<<24)^z>>>7,Z=(Q>>>1|z<<31)^(Q>>>8|z<<24)^(Q>>>7|z<<25),X=be[Y-2],$=X.high,ee=X.low,te=($>>>19|ee<<13)^($<<3|ee>>>29)^$>>>6,ie=(ee>>>19|$<<13)^(ee<<3|$>>>29)^(ee>>>6|$<<26),ne=be[Y-7],re=ne.high,se=ne.low,oe=be[Y-16],ae=oe.high,le=oe.low;G=(G=(G=J+re+((j=Z+se)>>>0<Z>>>0?1:0))+te+((j=j+ie)>>>0<ie>>>0?1:0))+ae+((j=j+le)>>>0<le>>>0?1:0);K.high=G,K.low=j}var ce,ue=N&B^~N&U,de=M&F^~M&V,he=w&D^w&O^D&O,ge=P&k^P&R^k&R,pe=(w>>>28|P<<4)^(w<<30|P>>>2)^(w<<25|P>>>7),fe=(P>>>28|w<<4)^(P<<30|w>>>2)^(P<<25|w>>>7),_e=(N>>>14|M<<18)^(N>>>18|M<<14)^(N<<23|M>>>9),me=(M>>>14|N<<18)^(M>>>18|N<<14)^(M<<23|N>>>9),ve=ye[Y],Ce=ve.high,Ae=ve.low,Ee=W+_e+((ce=H+me)>>>0<H>>>0?1:0),Ie=fe+ge;W=U,H=V,U=B,V=F,B=N,F=M,N=L+(Ee=(Ee=(Ee=Ee+ue+((ce=ce+de)>>>0<de>>>0?1:0))+Ce+((ce=ce+Ae)>>>0<Ae>>>0?1:0))+G+((ce=ce+j)>>>0<j>>>0?1:0))+((M=x+ce|0)>>>0<x>>>0?1:0)|0,L=O,x=R,O=D,R=k,D=w,k=P,w=Ee+(pe+he+(Ie>>>0<fe>>>0?1:0))+((P=ce+Ie|0)>>>0<ce>>>0?1:0)|0}h=n.low=h+P,n.high=d+w+(h>>>0<P>>>0?1:0),p=r.low=p+k,r.high=g+D+(p>>>0<k>>>0?1:0),_=s.low=_+R,s.high=f+O+(_>>>0<R>>>0?1:0),v=o.low=v+x,o.high=m+L+(v>>>0<x>>>0?1:0),A=a.low=A+M,a.high=C+N+(A>>>0<M>>>0?1:0),I=l.low=I+F,l.high=E+B+(I>>>0<F>>>0?1:0),b=c.low=b+V,c.high=y+U+(b>>>0<V>>>0?1:0),T=u.low=T+H,u.high=S+W+(T>>>0<H>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[30+(n+128>>>10<<5)]=Math.floor(i/4294967296),t[31+(n+128>>>10<<5)]=i,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(a),e.HmacSHA512=t._createHmacHelper(a)}(),l.SHA512}),function(e,t,i){"object"==typeof exports?module.exports=exports=t(require("./core"),require("./enc-base64"),require("./md5"),require("./evpkdf"),require("./cipher-core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/tripledes",["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],t):t(e.CryptoJS)}(this,function(a){return function(){var e=a,t=e.lib,i=t.WordArray,n=t.BlockCipher,r=e.algo,c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],d=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],h=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],g=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],s=r.DES=n.extend({_doReset:function(){for(var e=this._key.words,t=[],i=0;i<56;i++){var n=c[i]-1;t[i]=e[n>>>5]>>>31-n%32&1}for(var r=this._subKeys=[],s=0;s<16;s++){var o=r[s]=[],a=d[s];for(i=0;i<24;i++)o[i/6|0]|=t[(u[i]-1+a)%28]<<31-i%6,o[4+(i/6|0)]|=t[28+(u[i+24]-1+a)%28]<<31-i%6;o[0]=o[0]<<1|o[0]>>>31;for(i=1;i<7;i++)o[i]=o[i]>>>4*(i-1)+3;o[7]=o[7]<<5|o[7]>>>27}var l=this._invSubKeys=[];for(i=0;i<16;i++)l[i]=r[15-i]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,i){this._lBlock=e[t],this._rBlock=e[t+1],p.call(this,4,252645135),p.call(this,16,65535),f.call(this,2,858993459),f.call(this,8,16711935),p.call(this,1,1431655765);for(var n=0;n<16;n++){for(var r=i[n],s=this._lBlock,o=this._rBlock,a=0,l=0;l<8;l++)a|=h[l][((o^r[l])&g[l])>>>0];this._lBlock=o,this._rBlock=s^a}var c=this._lBlock;this._lBlock=this._rBlock,this._rBlock=c,p.call(this,1,1431655765),f.call(this,8,16711935),f.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function p(e,t){var i=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=i,this._lBlock^=i<<e}function f(e,t){var i=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=i,this._rBlock^=i<<e}e.DES=n._createHelper(s);var o=r.TripleDES=n.extend({_doReset:function(){var e=this._key.words;this._des1=s.createEncryptor(i.create(e.slice(0,2))),this._des2=s.createEncryptor(i.create(e.slice(2,4))),this._des3=s.createEncryptor(i.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=n._createHelper(o)}(),a.TripleDES}),function(e,t){"object"==typeof exports?module.exports=exports=t(require("./core")):"function"==typeof define&&define.amd?define("vendor/crypto-js/x64-core",["./core"],t):t(e.CryptoJS)}(this,function(e){var t,i,r,s,n;return i=(t=e).lib,r=i.Base,s=i.WordArray,(n=t.x64={}).Word=r.extend({init:function(e,t){this.high=e,this.low=t}}),n.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,i=[],n=0;n<t;n++){var r=e[n];i.push(r.high),i.push(r.low)}return s.create(i,this.sigBytes)},clone:function(){for(var e=r.clone.call(this),t=e.words=this.words.slice(0),i=t.length,n=0;n<i;n++)t[n]=t[n].clone();return e}}),e}),define("vendor/webos/webOS",function(){return window.webOS=function(i){function n(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var r={};return n.m=i,n.c=r,n.i=function(e){return e},n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r={};if("object"===("undefined"==typeof window?"undefined":n(window))&&window.PalmSystem)if(-1<window.navigator.userAgent.indexOf("SmartWatch"))r.watch=!0;else if(-1<window.navigator.userAgent.indexOf("SmartTV")||-1<window.navigator.userAgent.indexOf("Large Screen"))r.tv=!0;else{try{var s=JSON.parse(window.PalmSystem.deviceInfo||"{}");if(s.platformVersionMajor&&s.platformVersionMinor){var o=Number(s.platformVersionMajor),a=Number(s.platformVersionMinor);o<3||3===o&&a<=0?r.legacy=!0:r.open=!0}}catch(e){r.open=!0}window.Mojo=window.Mojo||{relaunch:function(){}},window.PalmSystem.stageReady&&window.PalmSystem.stageReady()}else r.unknown=!0;t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},n=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),C={},r=t.LS2Request=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.bridge=null,this.cancelled=!1,this.subscribe=!1}return n(e,[{key:"send",value:function(e){var t=e.service,i=void 0===t?"":t,n=e.method,r=void 0===n?"":n,s=e.parameters,o=void 0===s?{}:s,a=e.onSuccess,l=void 0===a?function(){}:a,c=e.onFailure,u=void 0===c?function(){}:c,d=e.onComplete,h=void 0===d?function(){}:d,g=e.subscribe,p=void 0!==g&&g;if(!window.PalmServiceBridge){var f={errorCode:-1,errorText:"PalmServiceBridge is not found.",returnValue:!1};return u(f),h(f),console.error("PalmServiceBridge is not found."),this}this.ts&&C[this.ts]&&delete C[this.ts];var _,m=v({},o);return this.subscribe=p,this.subscribe&&(m.subscribe=this.subscribe),m.subscribe&&(this.subscribe=m.subscribe),this.ts=Date.now(),(C[this.ts]=this).bridge=new PalmServiceBridge,this.bridge.onservicecallback=this.callback.bind(this,l,u,h),this.bridge.call(("/"!==(_=i).slice(-1)&&(_+="/"),_+r),JSON.stringify(m)),this}},{key:"callback",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"";if(!this.cancelled){var r={};try{r=JSON.parse(n)}catch(e){r={errorCode:-1,errorText:n,returnValue:!1}}var s=r,o=s.errorCode,a=s.returnValue;void 0!==o||!1===a?(r.returnValue=!1,t(r)):(r.returnValue=!0,e(r)),i(r),this.subscribe||this.cancel()}}},{key:"cancel",value:function(){this.cancelled=!0,null!==this.bridge&&(this.bridge.cancel(),this.bridge=null),this.ts&&C[this.ts]&&delete C[this.ts]}}]),e}(),s={request:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=v({service:e},t);return(new r).send(i)}};t.default=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.fetchAppId=function(){return window.PalmSystem&&window.PalmSystem.identifier?window.PalmSystem.identifier.split(" ")[0]:""},s={};t.fetchAppInfo=function(i,e){if(0===Object.keys(s).length){var t=function(e,t){if(!e&&t)try{s=JSON.parse(t),i&&i(s)}catch(e){console.error("Unable to parse appinfo.json file for",r()),i&&i()}else i&&i()},n=new window.XMLHttpRequest;n.onreadystatechange=function(){4===n.readyState&&(200<=n.status&&n.status<300||0===n.status?t(null,n.responseText):t({status:404}))};try{n.open("GET",e||"appinfo.json",!0),n.send(null)}catch(i){t({status:404})}}else i&&i(s)},t.fetchAppRootPath=function(){var e=window.location.href;if("baseURI"in window.document)e=window.document.baseURI;else{var t=window.document.getElementsByTagName("base");0<t.length&&(e=t[0].href)}var i=e.match(new RegExp(".*://[^#]*/"));return i?i[0]:""},t.platformBack=function(){if(window.PalmSystem&&window.PalmSystem.platformBack)return window.PalmSystem.platformBack()}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=i(1),r=i(0),o=(n=r)&&n.__esModule?n:{default:n},a={};t.default=function(r){if(0===Object.keys(a).length){try{var e=JSON.parse(window.PalmSystem.deviceInfo);a.modelName=e.modelName,a.version=e.platformVersion,a.versionMajor=e.platformVersionMajor,a.versionMinor=e.platformVersionMinor,a.versionDot=e.platformVersionDot,a.sdkVersion=e.platformVersion,a.screenWidth=e.screenWidth,a.screenHeight=e.screenHeight}catch(r){a.modelName="webOS Device"}a.screenHeight=a.screenHeight||window.screen.height,a.screenWidth=a.screenWidth||window.screen.width,o.default.tv&&(new s.LS2Request).send({service:"luna://com.webos.service.tv.systemproperty",method:"getSystemInfo",parameters:{keys:["firmwareVersion","modelName","sdkVersion","UHD"]},onSuccess:function(e){if(a.modelName=e.modelName||a.modelName,a.sdkVersion=e.sdkVersion||a.sdkVersion,a.uhd="true"===e.UHD,e.firmwareVersion&&"0.0.0"!==e.firmwareVersion||(e.firmwareVersion=e.sdkVersion),e.firmwareVersion){a.version=e.firmwareVersion;for(var t=a.version.split("."),i=["versionMajor","versionMinor","versionDot"],n=0;n<i.length;n+=1)try{a[i[n]]=parseInt(t[n],10)}catch(e){a[i[n]]=t[n]}}r(a)},onFailure:function(){r(a)}})}else r(a)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={isShowing:function(){return!!PalmSystem&&(PalmSystem.isKeyboardVisible||!1)}};t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e={};if(window.PalmSystem){if(window.PalmSystem.country){var t=JSON.parse(window.PalmSystem.country);e.country=t.country,e.smartServiceCountry=t.smartServiceCountry}window.PalmSystem.timeZone&&(e.timezone=window.PalmSystem.timeZone)}return e}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="1.1.0"},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.systemInfo=t.service=t.platform=t.platformBack=t.libVersion=t.keyboard=t.fetchAppRootPath=t.fetchAppInfo=t.fetchAppId=t.deviceInfo=void 0;var r=i(2),s=n(i(1)),o=n(i(3)),a=n(i(4)),l=n(i(0)),c=n(i(5)),u=n(i(6));t.deviceInfo=o.default,t.fetchAppId=r.fetchAppId,t.fetchAppInfo=r.fetchAppInfo,t.fetchAppRootPath=r.fetchAppRootPath,t.keyboard=a.default,t.libVersion=u.default,t.platformBack=r.platformBack,t.platform=l.default,t.service=s.default,t.systemInfo=c.default}]),window.webOS}),define("components/connect-code/src/js/component",["antie/runtimecontext","antie/widgets/component","rofl/lib/utils","antie/widgets/verticallist","antie/widgets/horizontallist","rofl/events/keyevent","components/connect-code/src/js/widgets/sections/step","components/connect-code/src/js/widgets/sections/code","components/connect-code/src/js/widgets/sections/action"],function(e,t,i,r,s,n,u,d,h){"use strict";e.getCurrentApplication();var o="horizontal",a="vertical",g={STEPS:{id:"step-widget",name:"steps"},CODE:{id:"code-widget",name:"code"},ACTIONS:{id:"action-widget",name:"actions"}};return t.extend({init:function(){this._super("connect-code-component"),this._onBeforeRenderBound=i.bind(this._onBeforeRender,this),this._onBeforeShowBound=i.bind(this._onBeforeShow,this),this._onAfterHideBound=i.bind(this._onAfterHide,this),this.addEventListener("beforerender",this._onBeforeRenderBound),this.addEventListener("beforeshow",this._onBeforeShowBound),this.addEventListener("afterhide",this._onAfterHideBound)},_onBeforeRender:function(e){var t=e.args,i=t.navigation||a,n=t.cssClass||"connect-code";this.removeChildWidgets(),this.addClass(n),this._list=i===o?new s("connect-code-list"):new r("connect-code-list")},_onBeforeShow:function(e){var t=e.args;this._buildSections(t),this.focus()},_buildSections:function(e){var t,i,n,r,s,o,a=e.steps,l=e.code,c=e.actions;a&&(i=a.widget||u,a.props=g.STEPS,t=new i(a),g.STEPS.section=t,this.appendChildWidget(t)),l&&(r=l.widget||d,l.props=g.CODE,n=new r(l),g.CODE.section=n,this._list.appendChildWidget(n)),c&&(o=c.widget||h,c.props=g.ACTIONS,s=new o(c),g.ACTIONS.section=s,this._list.appendChildWidget(s)),this.appendChildWidget(this._list)},_onAfterHide:function(){i.each(g,function(e){var t=e.section;t&&i.isFunction(t.dispose)&&t.dispose()})}})}),define("components/connect-code/src/js/widgets/actionbutton",["rofl/widgets/button"],function(e){"use strict";return e.extend({init:function(){this._super(),this._actionItem=null},getItem:function(){return this._actionItem},setItem:function(e){this._actionItem=e}})}),define("components/connect-code/src/js/widgets/sections/action",["antie/runtimecontext","rofl/lib/utils","rofl/widgets/label","rofl/widgets/container","antie/widgets/verticallist","antie/widgets/horizontallist","components/connect-code/src/js/widgets/actionbutton"],function(e,s,o,t,a,l,c){"use strict";var n=e.getCurrentApplication(),u="vertical";return t.extend({init:function(e){var t=e.props;this._super(t.id),this.addClass(t.name),this._buildWidget(e)},_buildWidget:function(e){var i,n=this,t=e.navigation,r=e.items;this._actionList=t===u?new a("action-vertical-list"):new l("action-horizontal-list"),this._actionList.addClass(t),r&&s.each(r,function(e,t){(i=new c("action-button-"+t)).setItem(e),i.appendChildWidget(new o("action-label-button-"+t,e.getLabel())),n._actionList.appendChildWidget(i)}),this._actionList.addEventListener("select",s.bind(this._onSelect,this)),this.appendChildWidget(this._actionList)},_onSelect:function(e){var i=e.target.getItem().getAction();i&&i.prepare().then(function(){var e=i.getArguments(),t=s.isFunction(i.getRoute)&&i.getRoute();t&&n.route(t,e)}),e.stopPropagation()}})}),define("components/connect-code/src/js/widgets/sections/code",["antie/widgets/horizontallist","antie/runtimecontext","rofl/lib/utils","rofl/widgets/label","rofl/widgets/button","rofl/widgets/container"],function(i,e,h,g,p,f){"use strict";var n=e.getCurrentApplication();return f.extend({init:function(e){var t=e.props;this._codeContainer=null,this._buttonList=null,this._refreshCodeButton=null,this._checkDeviceStatusButton=null,this._messageContainer=null,this._messageLabel=null,this._messageIcon=null,this._successText=null,this._failText=null,this._checkDeviceInterval=null,this._expirationTimeout=null,this._getNewCode=null,this._getDeviceStatus=null,this._route=null,this._super(t.id),this.addClass(t.name),this._codeContainer=new f("code-container"),this._buttonList=new i("code-button-list"),this._buttonList.addClass("horizontal"),this.appendChildWidget(this._codeContainer),this.appendChildWidget(this._buttonList),this._buildWidget(e)},_buildWidget:function(e){var t,i,n,r,s,o,a,l,c=e.number,u=e.generateCode,d=e.checkDevice;u&&(n=u.func,this._getNewCode=h.isFunction(n)?n:null,u.hasVisibleButton&&(a=u.buttonLabel,this._refreshCodeButton=new p("refresh-code"),this._refreshCodeButton.appendChildWidget(new g("refresh-code-label",a)),this._buttonList.appendChildWidget(this._refreshCodeButton),this._refreshCodeButton.addEventListener("select",h.bind(this._onRefreshCode,this)))),this._code=new g("number-code",""),this._codeContainer.appendChildWidget(this._code),c?this._code.setText(c):this._onRefreshCode(),d&&(t=d.manual,i=d.func,r=h.getNested(d,"success","message")||null,s=h.getNested(d,"fail","message")||null,o=d.buttonLabel,l=d.timeInterval||5e3,this._route=h.hasNested(d,"success","route")&&d.success.route||null,this._getDeviceStatus=h.isFunction(i)?i:null,t?(this._checkDeviceStatusButton=new p("check-device-status"),this._buttonList.appendChildWidget(this._checkDeviceStatusButton),this._checkDeviceStatusButton.addEventListener("select",h.bind(this._onCheckDeviceStatus,this)),this._checkDeviceStatusButton.appendChildWidget(new g("check-device-status-label",o))):this._checkDeviceInterval=setInterval(h.bind(this._onCheckDeviceStatus,this),l),this._successText=r,this._failText=s),this._messageContainer=new f("connect-message-container"),this._messageLabel=new g("connect-label",""),this._messageIcon=new g("connect-icon-label","","icon"),this._messageContainer.appendChildWidget(this._messageIcon),this._messageContainer.appendChildWidget(this._messageLabel),this.appendChildWidget(this._messageContainer)},_onRefreshCode:function(){var t,i=this;this._getNewCode&&this._getNewCode().then(function(e){t=e.expirationTime,i._code.setText(e.code),t&&(clearTimeout(i._expirationTimeout),i._expirationTimeout=setTimeout(h.bind(i._onRefreshCode,i),t))})},_onCheckDeviceStatus:function(){var t=this;this._getDeviceStatus&&this._getDeviceStatus().then(function(e){e?(clearInterval(t._checkDeviceInterval),clearTimeout(t._expirationTimeout),t._successText&&(t._messageLabel.setText(t._successText),t._messageIcon.removeClass("fail"),t._messageIcon.addClass("check")),t._route&&setTimeout(function(){n.route(t._route)},0)):t._failText&&(t._messageLabel.setText(t._failText),t._messageIcon.removeClass("check"),t._messageIcon.addClass("fail"))})},dispose:function(){clearTimeout(this._expirationTimeout),clearInterval(this._checkDeviceInterval)}})}),define("components/connect-code/src/js/widgets/sections/step",["rofl/lib/utils","rofl/widgets/label","rofl/widgets/container"],function(r,s,n){"use strict";return n.extend({init:function(e){var t=e.props,i=e.config;this._stepContainer=null,this._super(t.id),this.addClass(t.name),this._stepContainer=new n("step-container"),this._buildWidget(i)},_buildWidget:function(e){var t=e.title,i=e.subtitle,n=e.items;t&&this.appendChildWidget(new s("title-steps",t,"step-item")),i&&this.appendChildWidget(new s("subtitle-steps",i,"step-item")),n&&(r.each(n,function(e,t){this._stepContainer.appendChildWidget(new s("step-icon-"+t,"","icon")),this._stepContainer.appendChildWidget(new s("step-label-"+t,e,"step"))},this),this.appendChildWidget(this._stepContainer))}})}),define("components/side-menu/src/js/component",["antie/runtimecontext","antie/widgets/component","components/side-menu/src/js/widgets/sections/base","components/side-menu/src/js/widgets/sections/top","rofl/lib/utils","antie/widgets/verticallist","rofl/events/keyevent"],function(e,t,u,d,i,n,r){"use strict";var s=e.getCurrentApplication(),o="left",a="right",h={TOP:{id:"top-menu",name:"top"},MIDDLE:{id:"middle-menu",name:"middle"},BOTTOM:{id:"bottom-menu",name:"bottom"}},l="submenu-visible";return t.extend({init:function(){this._super("component-menu"),this.addClass("side-menu"),this._position=null,this._menuSections=null,this._onBeforeRenderBound=i.bind(this._onBeforeRender,this),this._onBeforeShowBound=i.bind(this._onBeforeShow,this),this._onFocusBound=i.bind(this._onFocus,this),this._onBlurBound=i.bind(this._onBlur,this),this._onKeyDownBound=i.bind(this._onKeyDown,this),this._submenuVisible=i.bind(this._submenuVisible,this),this._submenuNotVisible=i.bind(this._submenuNotVisible,this),this.addEventListener("beforerender",this._onBeforeRenderBound),this.addEventListener("beforeshow",this._onBeforeShowBound),this.addEventListener("focus",this._onFocusBound),this.addEventListener("blur",this._onBlurBound),this.addEventListener("keydown",this._onKeyDownBound),this.addEventListener("submenuvisible",this._submenuVisible),this.addEventListener("submenunotvisible",this._submenuNotVisible),this._menuSections=this.appendChildWidget(new n("section-menu"))},_onBeforeRender:function(e){var t=e.args,i=t.cssClass;this._position=t.position||o,this._totallyHidden=t.totallyHidden,this.addClass([this._position,i]),this._menuSections.removeChildWidgets()},_onBeforeShow:function(e){var t=e.args;this._buildSections(t),this.setSelectedIndex(t.selectedIndex),this._hide()},_onBlur:function(e){e.target===this&&(this._hide(),e.stopPropagation())},_onKeyDown:function(e){var t=this._menuSections.getActiveChildWidget();switch(e.keyCode){case r.VK_BACK:t===h.MIDDLE.section&&t.removeSubmenus(),this._focusMainComponent(e);break;case r.VK_LEFT:if(t.isSubmenuVisible()||t.isSubmenu()){e.stopPropagation();break}this._position===a&&this._focusMainComponent(e);break;case r.VK_RIGHT:if(t.isSubmenuVisible()||t.isSubmenu()){e.stopPropagation();break}this._position===o&&this._focusMainComponent(e)}},_onFocus:function(e){e.target===this&&(i.isFunction(s.isMenuAllowed)&&i.isFunction(s.isMenuAllowed)&&s.updateMenu()?s.updateMenu({show:!0}):(this._show(),this.focus()),e.stopPropagation())},_buildSections:function(e){var t,i,n,r,s,o,a=e.top,l=e.middle,c=e.bottom;a&&(i=a.widget||a.items?u:d,a.props=h.TOP,t=new i(a),h.TOP.section=t,this._menuSections.appendChildWidget(t)),l&&l.items.length&&(r=l.widget||u,l.props=h.MIDDLE,l.position=this._position,n=new r(l),h.MIDDLE.section=n,this._menuSections.appendChildWidget(n)),c&&c.items.length&&(o=c.widget||u,c.props=h.BOTTOM,s=new o(c),h.BOTTOM.section=s,this._menuSections.appendChildWidget(s))},_submenuVisible:function(e){this.addClass(l),e.stopPropagation()},_submenuNotVisible:function(e){this.removeClass(l),e.stopPropagation()},_hide:function(){this.isRendered()&&this._totallyHidden&&this.setStyleTo("display","none")},_show:function(){this.isRendered()&&this._totallyHidden&&this.setStyleTo("display","block")},_focusMainComponent:function(e){s.getComponent("main").focus(),e.stopPropagation()},setSelectedIndex:function(e){var t,i;e&&e.section&&(t=h[e.section.toUpperCase()].section,0<=(i=parseInt(e.index,10))&&t.selectChildWidgetByIndex(i))}})}),define("components/side-menu/src/js/formatter/item",["rofl/widgets/container","antie/formatter","antie/iterator","antie/runtimecontext","rofl/widgets/label","components/side-menu/src/js/widgets/item","rofl/lib/utils"],function(e,t,n,i,r,s,o){"use strict";return t.extend({format:function(e){var t,i;return e instanceof n&&(e=e.next()),(i=new s("")).setMenuItem(e),i.addClass(["menu-item",e.getType()]),e.getIcon()&&((t=new r("")).addClass(["menu-icon","icon",e.getIcon().toLowerCase()]),i.appendChildWidget(t)),e.getLabel()&&((t=new r(e.getLabel())).addClass("menu-label"),i.appendChildWidget(t)),e.hasSubmenu&&o.isFunction(e.hasSubmenu)&&e.hasSubmenu()&&((t=new r("")).addClass(["arrow-right","icon"]),i.appendChildWidget(t)),i}})}),define("components/side-menu/src/js/widgets/item",["rofl/widgets/button"],function(e){"use strict";return e.extend({init:function(){this._super(),this._menuItem=null},hasMenuItem:function(){return null!==this._menuItem},getMenuItem:function(){return this._menuItem},setMenuItem:function(e){this._menuItem=e}})}),define("components/side-menu/src/js/widgets/sections/base",["antie/widgets/horizontallist","antie/runtimecontext","antie/widgets/verticallist","rofl/lib/utils","components/side-menu/src/js/formatter/item","rofl/decorators/pointer","components/side-menu/src/js/widgets/sections/submenu/base","rofl/widgets/button","antie/events/event"],function(e,t,a,l,c,u,i,r,n){"use strict";var o=t.getCurrentApplication(),s=o.getDevice(),d={SCROLL_OFFSET:{top:1,middle:3,bottom:1},VISIBLE_ITEMS:{top:1,middle:8,bottom:1},WIDGET_CLASS:"menu-list",SCROLL_DURATION:250};return e.extend({_visibleItems:null,_totalDataItems:null,_scrollOffset:null,init:function(e){var t=e.props,i=t.id,n=t.name,r=e.items,s=e.menuItemFormatter||c,o=e.widgetCssClass||d.WIDGET_CLASS;this._visibleItems=e.visibleItems||d.VISIBLE_ITEMS[n],this._scrollOffset=e.scrollOffset||d.SCROLL_OFFSET[n],this._scrollAnimationDuration=d.SCROLL_DURATION,this._subMenuConfig=e.submenu||{},this._position=e.position,this._super(),this.addClass("section-list"),this._menu=new a(i,new s,r),this._submenu=null,this._subSubmenu=null,this._menu.addClass([o,n]),this._onSelectBound=l.bind(this._onSelect,this),this._onSelectedIndexChangeBound=l.bind(this._onSelectedIndexChange,this),this._onKeyDownBound=l.bind(this._onKeyDown,this),this._onFocusBound=l.bind(this._onFocus,this),this.addEventListener("select",this._onSelectBound),this.addEventListener("selecteditemchange",this._onSelectedIndexChangeBound),this._menu.decorate([u]),this.addEventListener("focus",this._onFocusBound),this.appendChildWidget(this._menu)},isFocusable:function(){return l.isFunction(o.isMenuAllowed)&&o.isMenuAllowed()||!0},_onFocus:function(e){var t,i=e.target;i!==this._menu&&i!==this._submenu&&i!==this._subSubmenu||(t=i.getList&&i.getList()||i,this._totalDataItems=t.getChildWidgetCount(),i.getList&&this._handleScroll(t.getActiveChildWidget(),t,t.getActiveChildWidgetIndex())),this.isSubmenuVisible()||this._menu.focus()},render:function(e){var t=this._super(e);return this._menu.initPointerHandlers(),t},selectChildWidgetByIndex:function(e){this._menu.setActiveChildIndex(e),this._menu.getActiveChildWidget()&&(this._removeSelectedClass(),this._menu.getActiveChildWidget().addClass("selected"),this.setActiveChildWidget(this._menu))},_onSelect:function(t){var i=this,n=t.target,r=n.getMenuItem(),s=r.getAction();r.hasSubmenu()&&!this.isSubmenu()?(this.removeSubmenus(),r.getChildren().then(function(e){var t=i._subMenuConfig;t.id=r.getLabel().toLowerCase()+"SubMenu",t.items=e,t.cssClass="submenu-list",i._removeSelectedClass(),n.addClass("selected"),i._createSubmenu(t)})):r.hasSubmenu()&&(this._subSubmenu&&this.removeChildWidget(this._subSubmenu),r.getChildren().then(function(e){var t=i._subMenuConfig;t.id=r.getLabel().toLowerCase()+"SubSubMenu",t.items=e,t.cssClass="sub-submenu-list",i._removeSelectedClass(),n.addClass("selected"),i._createSubSubmenu(t)})),s&&(this._submenu&&this.removeSubmenus(),s.prepare().then(function(){var e=s.getArguments();i._removeSelectedClass(),n.addClass("selected"),l.isFunction(s.getRoute)&&s.getRoute()&&o.route(s.getRoute(),e),t.stopPropagation()}))},_createSubmenu:function(e){var t=new n("submenuvisible");this.bubbleEvent(t),this._submenu=this.appendChildWidget(new i(e)),this.setActiveChildWidget(this._submenu),this._submenu.setActiveChildIndex(0)},_createSubSubmenu:function(e){this._subSubmenu=this.appendChildWidget(new i(e)),this.setActiveChildWidget(this._subSubmenu),this._subSubmenu.setActiveChildIndex(0)},removeSubmenus:function(){var e=new n("submenunotvisible");this.bubbleEvent(e),this._submenu&&(this.removeChildWidget(this._submenu),this._submenu=null),this._subSubmenu&&(this.removeChildWidget(this._subSubmenu),this._subSubmenu=null),l.getNested(this,"_activeChildWidget","parentWidget")||this.setActiveChildIndex(0)},_onSelectedIndexChange:function(e){var t=e.index,i=e.item,n=i.parentWidget;i instanceof r&&this._totalDataItems>this._visibleItems&&this._handleScroll(i,n,t)},_handleScroll:function(e,t,i){var n=0;(t.getCurrentScrollOffset()>t.getLengthToIndexIncludingWidget(i)||i===this._totalDataItems-1||i>=this._visibleItems-this._scrollOffset&&i<=this._totalDataItems-(this._scrollOffset-1))&&(0<(n=this._visibleItems-this._scrollOffset-i)&&(n=0),e.outputElement&&this._scroll(n*e.outputElement.offsetHeight))},_getMenuContainers:function(){return[this,this.getComponent(),this.getComponent().parentWidget]},_onMouseEnterHandler:function(){l.each(this._getMenuContainers(),function(e){e.addClass("hover")})},_onMouseLeaveHandler:function(){l.each(this._getMenuContainers(),function(e){e.removeClass("hover")})},_onPointerOffHandler:function(){l.each(this._getMenuContainers(),function(e){e.removeClass("hover")})},_removeSelectedClass:function(){var e=this.parentWidget.getChildWidgets();l.each(e,function(e){e.getChildWidgets()&&l.each(e.getChildWidgets(),function(e){e.getChildWidgets()&&l.each(e.getChildWidgets(),function(e){e.removeClass("selected")})})})},_scroll:function(e){var t=this,i=this._scrollAnimation,n=(this.getActiveChildWidget().getList&&this.getActiveChildWidget().getList()||this.getActiveChildWidget()).outputElement;n&&(i&&s.stopAnimation(i),this._scrollAnimation=s.moveElementTo({el:n,duration:t._scrollAnimationDuration,to:{top:e},onComplete:function(){t._scrollAnimation=null}}))},dispose:function(){this._menu.destroyPointerHandlers(),this.removeSubmenus(),this._super()},isSubmenuVisible:function(){return!!this._submenu},isSubmenu:function(){return this.getActiveChildWidget().hasClass("submenu-list")}})}),define("components/side-menu/src/js/widgets/sections/submenu/base",["rofl/widgets/container","antie/runtimecontext","antie/widgets/verticallist","rofl/lib/utils","components/side-menu/src/js/formatter/item","rofl/decorators/pointer","rofl/decorators/scrollable","antie/events/keyevent"],function(e,t,o,a,l,c,u,i){"use strict";var n=t.getCurrentApplication(),d=8,h=3,g=250;return e.extend({_visibleItems:null,_totalDataItems:null,_scrollOffset:null,init:function(e){var t,i=e.id,n=e.items,r=e.submenuItemFormatter||l,s=e.cssClass||"submenu-list";this._visibleItems=e.visibleItems||d,this._scrollOffset=e.scrollOffset||h,this._scrollAnimationDuration=g,this._totalDataItems=n.length,this._super(i),this.addClass(s),this._list=t=this.appendChildWidget(new o(null,new r,n)),t.decorate([u,c]),this._onKeyDownPropagation=a.bind(this._onKeyDownPropagation,this),this.addEventListener("keydown",this._onKeyDownPropagation)},_onKeyDownPropagation:function(e){var t=this._list._selectedIndex;e.keyCode===i.VK_DOWN&&(++t<0||t>=this._childWidgetOrder.length)&&e.stopPropagation()},getList:function(){return this._list},isFocusable:function(){return a.isFunction(n.isMenuAllowed)&&n.isMenuAllowed()||!0},render:function(e){var t=this._super(e);return this._list.getMaximumOffset=a.bind(this.getMaximumOffset,this),this._list.scrollSetupSimple({list:this._list}),t},getMaximumOffset:function(){return this._list.getLengthToIndexIncludingWidget(this._totalDataItems)-this._list.getLengthToIndexIncludingWidget(this._visibleItems)}})}),define("components/side-menu/src/js/widgets/sections/top",["antie/widgets/component","rofl/widgets/image","rofl/widgets/label"],function(e,t,i){"use strict";return e.extend({init:function(e){var t=e.props;this._super(t.id),this._logo=null,this._title=null,this.addClass(t.name),this._build(e)},_build:function(e){e.logo?(this._logo=new t("logo",e.logo),this.appendChildWidget(this._logo)):e.title&&(this._title=new i(e.title),this.appendChildWidget(this._title))}})}),define("components/vtt.js/dist/vtt",[],function(){!function(e){var A={"":!0,lr:!0,rl:!0},t={start:!0,center:!0,end:!0,left:!0,right:!0};function E(e){return"string"==typeof e&&(!!t[e.toLowerCase()]&&e.toLowerCase())}function I(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)e[n]=i[n]}return e}function i(e,t,i){var n=this,r=/MSIE\s8\.0/.test(navigator.userAgent),s={};r?n=document.createElement("custom"):s.enumerable=!0,n.hasBeenReset=!1;var o="",a=!1,l=e,c=t,u=i,d=null,h="",g=!0,p="auto",f="start",_=50,m="center",v=50,C="center";if(Object.defineProperty(n,"id",I({},s,{get:function(){return o},set:function(e){o=""+e}})),Object.defineProperty(n,"pauseOnExit",I({},s,{get:function(){return a},set:function(e){a=!!e}})),Object.defineProperty(n,"startTime",I({},s,{get:function(){return l},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");l=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"endTime",I({},s,{get:function(){return c},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");c=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"text",I({},s,{get:function(){return u},set:function(e){u=""+e,this.hasBeenReset=!0}})),Object.defineProperty(n,"region",I({},s,{get:function(){return d},set:function(e){d=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"vertical",I({},s,{get:function(){return h},set:function(e){var t,i="string"==typeof(t=e)&&!!A[t.toLowerCase()]&&t.toLowerCase();if(!1===i)throw new SyntaxError("An invalid or illegal string was specified.");h=i,this.hasBeenReset=!0}})),Object.defineProperty(n,"snapToLines",I({},s,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(n,"line",I({},s,{get:function(){return p},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");p=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"lineAlign",I({},s,{get:function(){return f},set:function(e){var t=E(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");f=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"position",I({},s,{get:function(){return _},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");_=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"positionAlign",I({},s,{get:function(){return m},set:function(e){var t=E(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"size",I({},s,{get:function(){return v},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"align",I({},s,{get:function(){return C},set:function(e){var t=E(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");C=t,this.hasBeenReset=!0}})),n.displayState=void 0,r)return n}i.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},e.VTTCue&&"center"===new e.VTTCue(0,0,"text").align||(e.VTTCue=i)}(this),function(e){var l={"":!0,up:!0};function c(e){return"number"==typeof e&&0<=e&&e<=100}e.VTTRegion=e.VTTRegion||function(){var t=100,i=3,n=0,r=100,s=0,o=100,a="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(e){if(!c(e))throw new Error("Width must be between 0 and 100.");t=e}},lines:{enumerable:!0,get:function(){return i},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");i=e}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(e){if(!c(e))throw new Error("RegionAnchorX must be between 0 and 100.");r=e}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(e){if(!c(e))throw new Error("RegionAnchorY must be between 0 and 100.");n=e}},viewportAnchorY:{enumerable:!0,get:function(){return o},set:function(e){if(!c(e))throw new Error("ViewportAnchorY must be between 0 and 100.");o=e}},viewportAnchorX:{enumerable:!0,get:function(){return s},set:function(e){if(!c(e))throw new Error("ViewportAnchorX must be between 0 and 100.");s=e}},scroll:{enumerable:!0,get:function(){return a},set:function(e){var t,i="string"==typeof(t=e)&&!!l[t.toLowerCase()]&&t.toLowerCase();if(!1===i)throw new SyntaxError("An invalid or illegal string was specified.");a=i}}})}}(this),function(e){function c(e,t){return void 0===t&&(t=1),"rgba("+[parseInt(e.substring(0,2),16),parseInt(e.substring(2,4),16),parseInt(e.substring(4,6),16),t].join(",")+")"}var u=1;function t(e,t,i){switch(i){case"webvtt.font.color":case"webvtt.font.opacity":var n=Services.prefs.getCharPref("webvtt.font.color"),r=Services.prefs.getIntPref("webvtt.font.opacity")/100;d.fontSet=c(n,r);break;case"webvtt.font.scale":u=Services.prefs.getIntPref("webvtt.font.scale")/100;break;case"webvtt.bg.color":case"webvtt.bg.opacity":var s=Services.prefs.getCharPref("webvtt.bg.color"),o=Services.prefs.getIntPref("webvtt.bg.opacity")/100;d.backgroundSet=c(s,o);break;case"webvtt.edge.color":case"webvtt.edge.type":var a=Services.prefs.getIntPref("webvtt.edge.type"),l=Services.prefs.getCharPref("webvtt.edge.color");d.edgeSet=["","0px 0px ","4px 4px 4px ","-2px -2px ","2px 2px "][a]+c(l)}}if("undefined"!=typeof Services){var d={};["webvtt.font.color","webvtt.font.opacity","webvtt.font.scale","webvtt.bg.color","webvtt.bg.opacity","webvtt.edge.color","webvtt.edge.type"].forEach(function(e){t(0,0,e),Services.prefs.addObserver(e,t,!1)})}var i=Object.create||function(){function t(){}return function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return t.prototype=e,new t}}();function h(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function f(e){function t(e,t,i,n){return 3600*(0|e)+60*(0|t)+(0|i)+(0|n)/1e3}var i=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return i?i[3]?t(i[1],i[2],i[3].replace(":",""),i[4]):59<i[1]?t(i[1],i[2],0,i[4]):t(0,i[1],i[2],i[4]):null}function g(){this.values=i(null)}function p(e,t,i,n){var r=n?e.split(n):[e];for(var s in r)if("string"==typeof r[s]){var o=r[s].split(i);if(2===o.length)t(o[0],o[1])}}function l(t,e,s){var i,n,o,r=t;function a(){var e=f(t);if(null===e)throw new h(h.Errors.BadTimeStamp,"Malformed timestamp: "+r);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function l(){t=t.replace(/^\s+/,"")}if(l(),e.startTime=a(),l(),"--\x3e"!==t.substr(0,3))throw new h(h.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);t=t.substr(3),l(),e.endTime=a(),l(),i=t,n=e,o=new g,p(i,function(e,t){switch(e){case"region":for(var i=s.length-1;0<=i;i--)if(s[i].id===t){o.set(e,s[i].region);break}break;case"vertical":o.alt(e,t,["rl","lr"]);break;case"line":var n=t.split(","),r=n[0];o.integer(e,r),o.percent(e,r)&&o.set("snapToLines",!1),o.alt(e,r,["auto"]),2===n.length&&o.alt("lineAlign",n[1],["start","center","end"]);break;case"position":n=t.split(","),o.percent(e,n[0]),2===n.length&&o.alt("positionAlign",n[1],["start","center","end"]);break;case"size":o.percent(e,t);break;case"align":o.alt(e,t,["start","center","end","left","right"])}},/:/,/\s/),n.region=o.get("region",null),n.vertical=o.get("vertical",""),n.line=o.get("line","auto"),n.lineAlign=o.get("lineAlign","start"),n.snapToLines=o.get("snapToLines",!0),n.size=o.get("size",100),n.align=o.get("align","center"),n.position=o.get("position","auto"),n.positionAlign=o.get("positionAlign",{start:"start",left:"start",center:"center",end:"end",right:"end"},n.align)}((h.prototype=i(Error.prototype)).constructor=h).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},g.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,i){for(var n=0;n<i.length;++n)if(t===i[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var _={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},m={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},v={v:"title",lang:"lang"},C={rt:"ruby"};function A(s,i){function e(){if(!i)return null;var e,t=i.match(/^([^<]*)(<[^>]+>?)?/);return e=t[1]?t[1]:t[2],i=i.substr(e.length),e}function t(e){return _[e]}function n(e){for(;p=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(p[0],t);return e}function r(e,t){var i=m[e];if(!i)return null;var n=s.document.createElement(i);n.localName=i;var r=v[e];return r&&t&&(n[r]=t.trim()),n}for(var o,a,l,c=s.document.createElement("div"),u=c,d=[];null!==(o=e());)if("<"!==o[0])u.appendChild(s.document.createTextNode(n(o)));else{if("/"===o[1]){d.length&&d[d.length-1]===o.substr(2).replace(">","")&&(d.pop(),u=u.parentNode);continue}var h,g=f(o.substr(1,o.length-2));if(g){h=s.document.createProcessingInstruction("timestamp",g),u.appendChild(h);continue}var p=o.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!p)continue;if(!(h=r(p[1],p[3])))continue;if(a=u,C[(l=h).localName]&&C[l.localName]!==a.localName)continue;p[2]&&(h.className=p[2].substr(1).replace("."," ")),d.push(p[1]),u.appendChild(h),u=h}return c}var n=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function E(e){for(var t=0;t<n.length;t++){var i=n[t];if(e>=i[0]&&e<=i[1])return!0}return!1}function I(){}function y(e,t,i){var n="undefined"!=typeof navigator&&/MSIE\s8\.0/.test(navigator.userAgent),r="rgba(255, 255, 255, 1)",s="rgba(0, 0, 0, 0.8)",o="";void 0!==d&&(r=d.fontSet,s=d.backgroundSet,o=d.edgeSet),n&&(r="rgb(255, 255, 255)",s="rgb(0, 0, 0)"),I.call(this),this.cue=t,this.cueDiv=A(e,t.text);var a={color:r,backgroundColor:s,textShadow:o,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};n||(a.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",a.unicodeBidi="plaintext"),this.applyStyles(a,this.cueDiv),this.div=e.document.createElement("div"),a={textAlign:t.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},n||(a.direction=function(e){var t=[],i="";if(!e||!e.childNodes)return"ltr";function r(e,t){for(var i=t.childNodes.length-1;0<=i;i--)e.push(t.childNodes[i])}function s(e){if(!e||!e.length)return null;var t=e.pop(),i=t.textContent||t.innerText;if(i){var n=i.match(/^.*(\n|\r)/);return n?n[e.length=0]:i}return"ruby"===t.tagName?s(e):t.childNodes?(r(e,t),s(e)):void 0}for(r(t,e);i=s(t);)for(var n=0;n<i.length;n++)if(E(i.charCodeAt(n)))return"rtl";return"ltr"}(this.cueDiv),a.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(a),this.div.appendChild(this.cueDiv);var l=0;switch(t.positionAlign){case"start":l=t.position;break;case"center":l=t.position-t.size/2;break;case"end":l=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(l,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(l,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function b(e){var t,i,n,r,s="undefined"!=typeof navigator&&/MSIE\s8\.0/.test(navigator.userAgent);if(e.div){i=e.div.offsetHeight,n=e.div.offsetWidth,r=e.div.offsetTop;var o=(o=e.div.childNodes)&&(o=o[0])&&o.getClientRects&&o.getClientRects();e=e.div.getBoundingClientRect(),t=o?Math.max(o[0]&&o[0].height||0,e.height/o.length):0}this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||i,this.bottom=e.bottom||r+(e.height||i),this.width=e.width||n,this.lineHeight=void 0!==t?t:e.lineHeight,s&&!this.lineHeight&&(this.lineHeight=13)}function S(e,t,a,l){var i=new b(t),n=t.cue,r=function(e){if("number"==typeof e.line&&(e.snapToLines||0<=e.line&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,i=t.textTrackList,n=0,r=0;r<i.length&&i[r]!==t;r++)"showing"===i[r].mode&&n++;return-1*++n}(n),s=[];if(n.snapToLines){var o;switch(n.vertical){case"":s=["+y","-y"],o="height";break;case"rl":s=["+x","-x"],o="width";break;case"lr":s=["-x","+x"],o="width"}var c=i.lineHeight,u=c*Math.round(r),d=a[o]+c,h=s[0];Math.abs(u)>d&&(u=u<0?-1:1,u*=Math.ceil(d/c)*c),r<0&&(u+=""===n.vertical?a.height:a.width,s=s.reverse()),i.move(h,u)}else{var g=i.lineHeight/a.height*100;switch(n.lineAlign){case"center":r-=g/2;break;case"end":r-=g}switch(n.vertical){case"":t.applyStyles({top:t.formatStyle(r,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(r,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(r,"%")})}s=["+y","-x","+x","-y"],i=new b(t)}var p=function(e,t){for(var i,n=new b(e),r=1,s=0;s<t.length;s++){for(;e.overlapsOppositeAxis(a,t[s])||e.within(a)&&e.overlapsAny(l);)e.move(t[s]);if(e.within(a))return e;var o=e.intersectPercentage(a);o<r&&(i=new b(e),r=o),e=new b(n)}return i||n}(i,s);t.move(p.toCSSCompatValues(a))}function r(){}I.prototype.applyStyles=function(e,t){for(var i in t=t||this.div,e)e.hasOwnProperty(i)&&(t.style[i]=e[i])},I.prototype.formatStyle=function(e,t){return 0===e?0:e+t},(y.prototype=i(I.prototype)).constructor=y,b.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},b.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},b.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},b.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},b.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},b.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},b.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},b.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,i=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,n=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||n,height:e.height||t,bottom:e.bottom||n+(e.height||t),width:e.width||i}},r.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},r.convertCueToDOMTree=function(e,t){return e&&t?A(e,t):null};r.processCues=function(n,r,e){if(!n||!r||!e)return null;for(;e.firstChild;)e.removeChild(e.firstChild);var s=n.document.createElement("div");if(s.style.position="absolute",s.style.left="0",s.style.right="0",s.style.top="0",s.style.bottom="0",s.style.margin="1.5%",e.appendChild(s),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(r)){var o=[],a=b.getSimpleBoxPosition(s),l={font:Math.round(.05*a.height*100)/100*u+"px sans-serif"};!function(){for(var e,t,i=0;i<r.length;i++)t=r[i],e=new y(n,t,l),s.appendChild(e.div),S(0,e,a,o),t.displayState=e.div,o.push(b.getSimpleBoxPosition(e))}()}else for(var t=0;t<r.length;t++)s.appendChild(r[t].displayState)},(r.Parser=function(e,t){this.window=e,this.state="INITIAL",this.buffer="",this.decoder=t||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(e){if(!(e instanceof h))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var n=this;function t(){for(var e=n.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var i=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,n.buffer=e.substr(t),i}function i(e){p(e,function(e,t){switch(e){case"Region":!function(e){var r=new g;if(p(e,function(e,t){switch(e){case"id":r.set(e,t);break;case"width":r.percent(e,t);break;case"lines":r.integer(e,t);break;case"regionanchor":case"viewportanchor":var i=t.split(",");if(2!==i.length)break;var n=new g;if(n.percent("x",i[0]),n.percent("y",i[1]),!n.has("x")||!n.has("y"))break;r.set(e+"X",n.get("x")),r.set(e+"Y",n.get("y"));break;case"scroll":r.alt(e,t,["up"])}},/=/,/\s/),r.has("id")){var t=new n.window.VTTRegion;t.width=r.get("width",100),t.lines=r.get("lines",3),t.regionAnchorX=r.get("regionanchorX",0),t.regionAnchorY=r.get("regionanchorY",100),t.viewportAnchorX=r.get("viewportanchorX",0),t.viewportAnchorY=r.get("viewportanchorY",100),t.scroll=r.get("scroll",""),n.onregion&&n.onregion(t),n.regionList.push({id:r.get("id"),region:t})}}(t)}},/:/)}e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));try{var r;if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;var s=(r=t()).match(/^WEBVTT([ \t].*)?$/);if(!s||!s[0])throw new h(h.Errors.BadSignature);n.state="HEADER"}for(var o=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(o?o=!1:r=t(),n.state){case"HEADER":/:/.test(r)?i(r):r||(n.state="ID");continue;case"NOTE":r||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){n.state="NOTE";break}if(!r)continue;if(n.cue=new n.window.VTTCue(0,0,""),n.state="CUE",-1===r.indexOf("--\x3e")){n.cue.id=r;continue}case"CUE":try{l(r,n.cue,n.regionList)}catch(e){n.reportOrThrowError(e),n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var a=-1!==r.indexOf("--\x3e");if(!r||a&&(o=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=r;continue;case"BADCUE":r||(n.state="ID");continue}}}catch(e){n.reportOrThrowError(e),"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new h(h.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}},e.WebVTT=r}(this),"undefined"!=typeof module&&module.exports&&(this["encoding-indexes"]=require("./encoding-indexes.js")["encoding-indexes"]),function(t){"use strict";function _(e,t,i){return t<=e&&e<=i}function d(e,t){return Math.floor(e/t)}function o(i){var n=0;this.get=function(){return n>=i.length?-1:Number(i[n])},this.offset=function(e){if((n+=e)<0)throw new Error("Seeking past start of the buffer");if(n>i.length)throw new Error("Seeking past EOF")},this.match=function(e){if(e.length>n+i.length)return!1;var t;for(t=0;t<e.length;t+=1)if(Number(i[n+t])!==e[t])return!1;return!0}}function s(n){var r=0;this.emit=function(e){var t,i=-1;for(t=0;t<arguments.length;++t)i=Number(arguments[t]),n[r++]=i;return i}}function a(e){var t=0,i=function(e){for(var t=[],i=0,n=e.length;i<e.length;){var r=e.charCodeAt(i);if(_(r,55296,57343))if(_(r,56320,57343))t.push(65533);else if(i===n-1)t.push(65533);else{var s=e.charCodeAt(i+1);if(_(s,56320,57343)){var o=1023&r,a=1023&s;i+=1,t.push(65536+(o<<10)+a)}else t.push(65533)}else t.push(r);i+=1}return t}(e);this.offset=function(e){if((t+=e)<0)throw new Error("Seeking past start of the buffer");if(t>i.length)throw new Error("Seeking past EOF")},this.get=function(){return t>=i.length?-1:i[t]}}function l(){var t="";this.string=function(){return t},this.emit=function(e){e<=65535?t+=String.fromCharCode(e):(e-=65536,t+=String.fromCharCode(55296+(e>>10&1023)),t+=String.fromCharCode(56320+(1023&e)))}}function i(e){this.name="EncodingError",this.message=e,this.code=0}function m(e,t){if(e)throw new i("Decoder error");return t||65533}function u(e){throw new i("The code point "+e+" could not be encoded.")}function r(e){return e=String(e).trim().toLowerCase(),Object.prototype.hasOwnProperty.call(c,e)?c[e]:null}i.prototype=Error.prototype;var e=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"utf-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"ibm866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"iso-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"iso-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"iso-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"iso-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"iso-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"iso-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"iso-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"iso-8859-8-i"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"iso-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"iso-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"iso-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"iso-8859-15"},{labels:["iso-8859-16"],name:"iso-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"koi8-r"},{labels:["koi8-u"],name:"koi8-u"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb18030","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"gb18030"},{labels:["hz-gb-2312"],name:"hz-gb-2312"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"euc-jp"},{labels:["csiso2022jp","iso-2022-jp"],name:"iso-2022-jp"},{labels:["csshiftjis","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"shift_jis"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"euc-kr"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"utf-16be"},{labels:["utf-16","utf-16le"],name:"utf-16le"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],n={},c={};function v(e,t){return t&&t[e]||null}function h(e,t){var i=t.indexOf(e);return-1===i?null:i}function C(e){if(!("encoding-indexes"in t))throw new Error("Indexes missing. Did you forget to include encoding-indexes.js?");return t["encoding-indexes"][e]}e.forEach(function(e){e.encodings.forEach(function(t){(n[t.name]=t).labels.forEach(function(e){c[e]=t})})});var g="utf-8";function p(e,t){if(!(this instanceof p))return new p(e,t);if(e=e?String(e):g,t=Object(t),this._encoding=r(e),null===this._encoding||"replacement"===this._encoding.name)throw new TypeError("Unknown encoding: "+e);if(!this._encoding.getDecoder)throw new Error("Decoder not present. Did you forget to include encoding-indexes.js?");return this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._options={fatal:Boolean(t.fatal)},Object.defineProperty?Object.defineProperty(this,"encoding",{get:function(){return this._encoding.name}}):this.encoding=this._encoding.name,this}function f(e,t){if(!(this instanceof f))return new f(e,t);e=e?String(e):g,t=Object(t),this._encoding=r(e);var i=t.NONSTANDARD_allowLegacyEncoding,n="utf-8"!==this._encoding.name&&"utf-16le"!==this._encoding.name&&"utf-16be"!==this._encoding.name;if(null===this._encoding||n&&!i)throw new TypeError("Unknown encoding: "+e);if(!this._encoding.getEncoder)throw new Error("Encoder not present. Did you forget to include encoding-indexes.js?");return this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(t.fatal)},Object.defineProperty?Object.defineProperty(this,"encoding",{get:function(){return this._encoding.name}}):this.encoding=this._encoding.name,this}function A(e){var r=e.fatal,s=0,o=0,a=0,l=0;this.decode=function(e){var t=e.get();if(-1===t)return 0!==o?m(r):-1;if(e.offset(1),0===o){if(_(t,0,127))return t;if(_(t,194,223))o=1,l=128,s=t-192;else if(_(t,224,239))o=2,l=2048,s=t-224;else{if(!_(t,240,244))return m(r);o=3,l=65536,s=t-240}return s*=Math.pow(64,o),null}if(!_(t,128,191))return l=a=o=s=0,e.offset(-1),m(r);if(a+=1,s+=(t-128)*Math.pow(64,o-a),a!==o)return null;var i=s,n=l;return l=a=o=s=0,_(i,n,1114111)&&!_(i,55296,57343)?i:m(r)}}function E(e){e.fatal;this.encode=function(e,t){var i,n,r=t.get();if(-1===r)return-1;if(t.offset(1),_(r,55296,57343))return u(r);if(_(r,0,127))return e.emit(r);_(r,128,2047)?(i=1,n=192):_(r,2048,65535)?(i=2,n=224):_(r,65536,1114111)&&(i=3,n=240);for(var s=e.emit(d(r,Math.pow(64,i))+n);0<i;){var o=d(r,Math.pow(64,i-1));s=e.emit(128+o%64),i-=1}return s}}function I(n,e){var r=e.fatal;this.decode=function(e){var t=e.get();if(-1===t)return-1;if(e.offset(1),_(t,0,127))return t;var i=n[t-128];return null===i?m(r):i}}function y(r,e){e.fatal;this.encode=function(e,t){var i=t.get();if(-1===i)return-1;if(t.offset(1),_(i,0,127))return e.emit(i);var n=h(i,r);return null===n&&u(i),e.emit(n+128)}}function b(e){var o=e.fatal,a=0,l=0,c=0;this.decode=function(e){var t,i=e.get();if(-1===i&&0===a&&0===l&&0===c)return-1;if(-1!==i||0===a&&0===l&&0===c||(c=l=a=0,m(o)),e.offset(1),0!==c)return t=null,_(i,48,57)&&(t=function(e){if(39419<e&&e<189e3||1237575<e)return null;var t,i=0,n=0,r=C("gb18030");for(t=0;t<r.length;++t){var s=r[t];if(!(s[0]<=e))break;i=s[0],n=s[1]}return n+e-i}(10*(126*(10*(a-129)+(l-48))+(c-129))+i-48)),c=l=a=0,null===t?(e.offset(-3),m(o)):t;if(0!==l)return _(i,129,254)?(c=i,null):(e.offset(-2),l=a=0,m(o));if(0===a)return _(i,0,127)?i:128===i?8364:_(i,129,254)?(a=i,null):m(o);if(_(i,48,57))return l=i,null;var n=a,r=null;a=0;var s=i<127?64:65;return(_(i,64,126)||_(i,128,254))&&(r=190*(n-129)+(i-s)),t=null===r?null:v(r,C("gb18030")),null===r&&e.offset(-1),null===t?m(o):t}}function S(e){e.fatal;this.encode=function(e,t){var i=t.get();if(-1===i)return-1;if(t.offset(1),_(i,0,127))return e.emit(i);var n=h(i,C("gb18030"));if(null!==n){var r=d(n,190)+129,s=n%190,o=s<63?64:65;return e.emit(r,s+o)}var a=d(d(d(n=function(e){var t,i=0,n=0,r=C("gb18030");for(t=0;t<r.length;++t){var s=r[t];if(!(s[1]<=e))break;i=s[1],n=s[0]}return n+e-i}(i),10),126),10),l=d(d(n-=10*a*126*10,10),126),c=d(n-=10*l*126,10),u=n-10*c;return e.emit(a+129,l+48,c+129,u+48)}}function T(e){var r=e.fatal,s=!1,o=0;this.decode=function(e){var t=e.get();if(-1===t&&0===o)return-1;if(-1===t&&0!==o)return o=0,m(r);if(e.offset(1),126===o)return o=0,123===t?(s=!0,null):125===t?(s=!1,null):126===t?126:10===t?null:(e.offset(-1),m(r));if(0===o)return 126===t?(o=126,null):s?_(t,32,127)?(o=t,null):(10===t&&(s=!1),m(r)):_(t,0,127)?t:m(r);var i=o;o=0;var n=null;return _(t,33,126)&&(n=v(190*(i-1)+(t+63),C("gb18030"))),10===t&&(s=!1),null===n?m(r):n}}function w(e){e.fatal;var o=!1;this.encode=function(e,t){var i=t.get();if(-1===i)return-1;if(t.offset(1),_(i,0,127)&&o)return t.offset(-1),o=!1,e.emit(126,125);if(126===i)return e.emit(126,126);if(_(i,0,127))return e.emit(i);if(!o)return t.offset(-1),o=!0,e.emit(126,123);var n=h(i,C("gb18030"));if(null===n)return u(i);var r=d(n,190)+1,s=n%190-63;return _(r,33,126)&&_(s,33,126)?e.emit(r,s):u(i)}}function P(e){var a=e.fatal,l=0,c=null;this.decode=function(e){if(null!==c){var t=c;return c=null,t}var i=e.get();if(-1===i&&0===l)return-1;if(-1===i&&0!==l)return l=0,m(a);if(e.offset(1),0===l)return _(i,0,127)?i:_(i,129,254)?(l=i,null):m(a);var n=l,r=null;l=0;var s=i<127?64:98;if((_(i,64,126)||_(i,161,254))&&(r=157*(n-129)+(i-s)),1133===r)return c=772,202;if(1135===r)return c=780,202;if(1164===r)return c=772,234;if(1166===r)return c=780,234;var o=null===r?null:v(r,C("big5"));return null===r&&e.offset(-1),null===o?m(a):o}}function D(e){e.fatal;this.encode=function(e,t){var i=t.get();if(-1===i)return-1;if(t.offset(1),_(i,0,127))return e.emit(i);var n=h(i,C("big5"));if(null===n)return u(i);var r=d(n,157)+129,s=n%157,o=s<63?64:98;return e.emit(r,s+o)}}function k(e){var r=e.fatal,s=0,o=0;this.decode=function(e){var t,i,n=e.get();return-1===n?0===s&&0===o?-1:(o=s=0,m(r)):(e.offset(1),0!==o?(t=o,o=0,i=null,_(t,161,254)&&_(n,161,254)&&(i=v(94*(t-161)+n-161,C("jis0212"))),_(n,161,254)||e.offset(-1),null===i?m(r):i):142===s&&_(n,161,223)?(s=0,65377+n-161):143===s&&_(n,161,254)?(s=0,o=n,null):0!==s?(t=s,s=0,i=null,_(t,161,254)&&_(n,161,254)&&(i=v(94*(t-161)+n-161,C("jis0208"))),_(n,161,254)||e.offset(-1),null===i?m(r):i):_(n,0,127)?n:142===n||143===n||_(n,161,254)?(s=n,null):m(r))}}function O(e){e.fatal;this.encode=function(e,t){var i=t.get();if(-1===i)return-1;if(t.offset(1),_(i,0,127))return e.emit(i);if(165===i)return e.emit(92);if(8254===i)return e.emit(126);if(_(i,65377,65439))return e.emit(142,i-65377+161);var n=h(i,C("jis0208"));if(null===n)return u(i);var r=d(n,94)+161,s=n%94+161;return e.emit(r,s)}}function R(e){var s=e.fatal,o=0,a=1,l=2,c=3,u=4,d=5,h=6,g=o,p=!1,f=0;this.decode=function(e){var t=e.get();switch(-1!==t&&e.offset(1),g){default:case o:return 27===t?(g=a,null):_(t,0,127)?t:-1===t?-1:m(s);case a:return 36===t||40===t?(f=t,g=l,null):(-1!==t&&e.offset(-1),g=o,m(s));case l:var i=f;return f=0,36!==i||64!==t&&66!==t?36===i&&40===t?(g=c,null):40!==i||66!==t&&74!==t?40===i&&73===t?(g=h,null):(-1===t?e.offset(-1):e.offset(-2),g=o,m(s)):(g=o,null):(p=!1,g=u,null);case c:return 68===t?(p=!0,g=u,null):(-1===t?e.offset(-2):e.offset(-3),g=o,m(s));case u:return 10===t?(g=o,m(s,10)):27===t?(g=a,null):-1===t?-1:(f=t,g=d,null);case d:if(g=u,-1===t)return m(s);var n=null,r=94*(f-33)+t-33;return _(f,33,126)&&_(t,33,126)&&(n=v(r,C(!1===p?"jis0208":"jis0212"))),null===n?m(s):n;case h:return 27===t?(g=a,null):_(t,33,95)?65377+t-33:-1===t?-1:m(s)}}}function L(e){e.fatal;var o=0,a=1,l=2,c=o;this.encode=function(e,t){var i=t.get();if(-1===i)return-1;if(t.offset(1),(_(i,0,127)||165===i||8254===i)&&c!==o)return t.offset(-1),c=o,e.emit(27,40,66);if(_(i,0,127))return e.emit(i);if(165===i)return e.emit(92);if(8254===i)return e.emit(126);if(_(i,65377,65439)&&c!==l)return t.offset(-1),c=l,e.emit(27,40,73);if(_(i,65377,65439))return e.emit(i-65377-33);if(c!==a)return t.offset(-1),c=a,e.emit(27,36,66);var n=h(i,C("jis0208"));if(null===n)return u(i);var r=d(n,94)+33,s=n%94+33;return e.emit(r,s)}}function x(e){var r=e.fatal,s=0;this.decode=function(e){var t=e.get();if(-1===t&&0===s)return-1;if(-1===t&&0!==s)return s=0,m(r);if(e.offset(1),0===s)return _(t,0,128)?t:_(t,161,223)?65377+t-161:_(t,129,159)||_(t,224,252)?(s=t,null):m(r);var i=s;if(s=0,_(t,64,126)||_(t,128,252)){var n=v(188*(i-(i<160?129:193))+t-(t<127?64:65),C("jis0208"));return null===n?m(r):n}return e.offset(-1),m(r)}}function N(e){e.fatal;this.encode=function(e,t){var i=t.get();if(-1===i)return-1;if(t.offset(1),_(i,0,128))return e.emit(i);if(165===i)return e.emit(92);if(8254===i)return e.emit(126);if(_(i,65377,65439))return e.emit(i-65377+161);var n=h(i,C("jis0208"));if(null===n)return u(i);var r=d(n,188),s=r<31?129:193,o=n%188,a=o<63?64:65;return e.emit(r+s,o+a)}}function M(e){var o=e.fatal,a=0;this.decode=function(e){var t=e.get();if(-1===t&&0===a)return-1;if(-1===t&&0!==a)return a=0,m(o);if(e.offset(1),0===a)return _(t,0,127)?t:_(t,129,253)?(a=t,null):m(o);var i=a,n=null;if(a=0,_(i,129,198)){var r=178*(i-129);_(t,65,90)?n=r+t-65:_(t,97,122)?n=r+26+t-97:_(t,129,254)&&(n=r+26+26+t-129)}_(i,199,253)&&_(t,161,254)&&(n=12460+94*(i-199)+(t-161));var s=null===n?null:v(n,C("euc-kr"));return null===n&&e.offset(-1),null===s?m(o):s}}function B(e){e.fatal;this.encode=function(e,t){var i=t.get();if(-1===i)return-1;if(t.offset(1),_(i,0,127))return e.emit(i);var n,r,s=h(i,C("euc-kr"));if(null===s)return u(i);if(s<12460){n=d(s,178)+129;var o=(r=s%178)<26?65:r<52?71:77;return e.emit(n,r+o)}return n=d(s-=12460,94)+199,r=s%94+161,e.emit(n,r)}}function F(r,e){var s=e.fatal,o=null,a=null;this.decode=function(e){var t,i=e.get();if(-1===i&&null===o&&null===a)return-1;if(-1===i&&(null!==o||null!==a))return m(s);if(e.offset(1),null===o)return o=i,null;if(t=r?(o<<8)+i:(i<<8)+o,(o=null)===a)return _(t,55296,56319)?(a=t,null):_(t,56320,57343)?m(s):t;var n=a;return a=null,_(t,56320,57343)?65536+1024*(n-55296)+(t-56320):(e.offset(-2),m(s))}}function U(s,e){e.fatal;this.encode=function(n,e){function t(e){var t=e>>8,i=255&e;return s?n.emit(t,i):n.emit(i,t)}var i=e.get();if(-1===i)return-1;if(e.offset(1),_(i,55296,57343)&&u(i),i<=65535)return t(i);var r=(i-65536)%1024+56320;return t(d(i-65536,1024)+55296),t(r)}}function V(e){e.fatal;this.decode=function(e){var t=e.get();return-1===t?-1:(e.offset(1),_(t,0,127)?t:63360+t-128)}}function W(e,t){t.fatal;this.encode=function(e,t){var i=t.get();return-1===i?-1:(t.offset(1),_(i,0,127)?e.emit(i):_(i,63360,63487)?e.emit(i-63360+128):void u(i))}}p.prototype={decode:function(e,t){if(e&&!("buffer"in e&&"byteOffset"in e&&"byteLength"in e))throw new TypeError("Expected ArrayBufferView");e||(e=new Uint8Array(0)),t=Object(t),this._streaming||(this._decoder=this._encoding.getDecoder(this._options),this._BOMseen=!1),this._streaming=Boolean(t.stream);for(var i,n=new o(new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),r=new l;-1!==n.get();)null!==(i=this._decoder.decode(n))&&-1!==i&&r.emit(i);if(!this._streaming){for(;null!==(i=this._decoder.decode(n))&&-1!==i&&r.emit(i),-1!==i&&-1!=n.get(););this._decoder=null}var s=r.string();return!this._BOMseen&&s.length&&(this._BOMseen=!0,-1!==["utf-8","utf-16le","utf-16be"].indexOf(this.encoding)&&65279===s.charCodeAt(0)&&(s=s.substring(1))),s}},f.prototype={encode:function(e,t){e=e?String(e):"",t=Object(t),this._streaming||(this._encoder=this._encoding.getEncoder(this._options)),this._streaming=Boolean(t.stream);for(var i=[],n=new s(i),r=new a(e);-1!==r.get();)this._encoder.encode(n,r);if(!this._streaming){for(;-1!==this._encoder.encode(n,r););this._encoder=null}return new Uint8Array(i)}},n["utf-8"].getEncoder=function(e){return new E(e)},n["utf-8"].getDecoder=function(e){return new A(e)},"encoding-indexes"in t&&e.forEach(function(e){"Legacy single-byte encodings"===e.heading&&e.encodings.forEach(function(e){var t=C(e.name);e.getDecoder=function(e){return new I(t,e)},e.getEncoder=function(e){return new y(t,e)}})}),n.gb18030.getEncoder=function(e){return new S(e)},n.gb18030.getDecoder=function(e){return new b(e)},n["hz-gb-2312"].getEncoder=function(e){return new w(e)},n["hz-gb-2312"].getDecoder=function(e){return new T(e)},n.big5.getEncoder=function(e){return new D(e)},n.big5.getDecoder=function(e){return new P(e)},n["euc-jp"].getEncoder=function(e){return new O(e)},n["euc-jp"].getDecoder=function(e){return new k(e)},n["iso-2022-jp"].getEncoder=function(e){return new L(e)},n["iso-2022-jp"].getDecoder=function(e){return new R(e)},n.shift_jis.getEncoder=function(e){return new N(e)},n.shift_jis.getDecoder=function(e){return new x(e)},n["euc-kr"].getEncoder=function(e){return new B(e)},n["euc-kr"].getDecoder=function(e){return new M(e)},n["utf-16be"].getEncoder=function(e){return new U(!0,e)},n["utf-16be"].getDecoder=function(e){return new F(!0,e)},n["utf-16le"].getEncoder=function(e){return new U(!1,e)},n["utf-16le"].getDecoder=function(e){return new F(!1,e)},n["x-user-defined"].getEncoder=function(e){return new W(!1,e)},n["x-user-defined"].getDecoder=function(e){return new V(!1,e)},"TextEncoder"in t||(t.TextEncoder=f),"TextDecoder"in t||(t.TextDecoder=p)}(this)}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("components/pubsub/index",[],t):"object"==typeof exports?exports["components/pubsub/index"]=t():e["components/pubsub/index"]=t()}("undefined"!=typeof self?self:this,function(){return function(i){function n(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var r={};return n.m=i,n.c=r,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,i){var n,r,s;r=[t],void 0!==(s="function"==typeof(n=function(e){"use strict";e.__esModule=!0;var t=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),i=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._listeners={}}return t(e,[{key:"_listenerExists",value:function(e,t){var i=this._listeners[e];return!!i&&-1!==i.indexOf(t)}},{key:"sub",value:function(e,t){if(!this._listenerExists(e,t)){var i=this._listeners[e];i||(this._listeners[e]=i=[]),i.push(t)}}},{key:"subscribe",value:function(){this.sub.apply(this,arguments)}},{key:"pub",value:function(t,i){var e=this._listeners[t];e&&e.forEach(function(e){return e({event:t,params:i})})}},{key:"publish",value:function(){this.pub.apply(this,arguments)}},{key:"unsub",value:function(e,t){var i=this._listeners[e],n=void 0;i&&(t&&1!==i.length?(n=i.indexOf(t),i.splice(n,1)):delete this._listeners[e])}},{key:"unsubscribe",value:function(){this.unsub.apply(this,arguments)}}]),e}();e.default=i})?n.apply(t,r):n)&&(e.exports=s)}])});